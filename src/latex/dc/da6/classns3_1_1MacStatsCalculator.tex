\hypertarget{classns3_1_1MacStatsCalculator}{}\section{ns3\+:\+:Mac\+Stats\+Calculator Class Reference}
\label{classns3_1_1MacStatsCalculator}\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}


{\ttfamily \#include $<$mac-\/stats-\/calculator.\+h$>$}



Inheritance diagram for ns3\+:\+:Mac\+Stats\+Calculator\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Mac\+Stats\+Calculator\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MacStatsCalculator_acee2e1640d011068c88bafa7ca675611}{Mac\+Stats\+Calculator} ()
\item 
virtual \hyperlink{classns3_1_1MacStatsCalculator_ac0e2886748904d4718f546bef5ed80e4}{$\sim$\+Mac\+Stats\+Calculator} ()
\item 
void \hyperlink{classns3_1_1MacStatsCalculator_ad628644433f0da784dd1307946feebc8}{Set\+Ul\+Output\+Filename} (std\+::string output\+Filename)
\item 
std\+::string \hyperlink{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}{Get\+Ul\+Output\+Filename} (void)
\item 
void \hyperlink{classns3_1_1MacStatsCalculator_a645ec89ad8601f1deaa93e9c20fdeb2a}{Set\+Dl\+Output\+Filename} (std\+::string output\+Filename)
\item 
std\+::string \hyperlink{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}{Get\+Dl\+Output\+Filename} (void)
\item 
void \hyperlink{classns3_1_1MacStatsCalculator_acfbe2e6288517a685fee4b4bd708ebf6}{Dl\+Scheduling} (uint16\+\_\+t cell\+Id, uint64\+\_\+t imsi, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs\+Tb1, uint16\+\_\+t size\+Tb1, uint8\+\_\+t mcs\+Tb2, uint16\+\_\+t size\+Tb2)
\item 
void \hyperlink{classns3_1_1MacStatsCalculator_a1dff14e446fbebfb126948c90db9ddda}{Ul\+Scheduling} (uint16\+\_\+t cell\+Id, uint64\+\_\+t imsi, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs\+Tb, uint16\+\_\+t size\+Tb)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1MacStatsCalculator_ae1308fec317465b6251beb591a6fb330}{Get\+Type\+Id} (void)
\item 
static void \hyperlink{classns3_1_1MacStatsCalculator_a0be474ae585c5669b37a33a0584e68ab}{Dl\+Scheduling\+Callback} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MacStatsCalculator}{Mac\+Stats\+Calculator} $>$ mac\+Stats, std\+::string path, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs\+Tb1, uint16\+\_\+t size\+Tb1, uint8\+\_\+t mcs\+Tb2, uint16\+\_\+t size\+Tb2)
\item 
static void \hyperlink{classns3_1_1MacStatsCalculator_aeb1afcd5f47a1df9d1764f80ea9926d6}{Ul\+Scheduling\+Callback} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MacStatsCalculator}{Mac\+Stats\+Calculator} $>$ mac\+Stats, std\+::string path, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs, uint16\+\_\+t size)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classns3_1_1MacStatsCalculator_a5374491bcea5d56f24be7e9cd0f98e3f}{m\+\_\+dl\+First\+Write}
\item 
bool \hyperlink{classns3_1_1MacStatsCalculator_ade5ada157fabe3969ce7338ae05997ee}{m\+\_\+ul\+First\+Write}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Takes care of storing the information generated at M\+AC layer. Metrics saved are\+:
\begin{DoxyItemize}
\item Timestamp (in seconds)
\item Frame index
\item Subframe index
\item C-\/\+R\+N\+TI
\item M\+CS for transport block 1
\item Size of transport block 1
\item M\+CS for transport block 2 (0 if not used)
\item Size of transport block 2 (0 if not used) 
\end{DoxyItemize}

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Mac\+Stats\+Calculator@{Mac\+Stats\+Calculator}}
\index{Mac\+Stats\+Calculator@{Mac\+Stats\+Calculator}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Mac\+Stats\+Calculator()}{MacStatsCalculator()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mac\+Stats\+Calculator\+::\+Mac\+Stats\+Calculator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacStatsCalculator_acee2e1640d011068c88bafa7ca675611}{}\label{classns3_1_1MacStatsCalculator_acee2e1640d011068c88bafa7ca675611}
Constructor 
\begin{DoxyCode}
33   : \hyperlink{classns3_1_1MacStatsCalculator_a5374491bcea5d56f24be7e9cd0f98e3f}{m\_dlFirstWrite} (\textcolor{keyword}{true}),
34     \hyperlink{classns3_1_1MacStatsCalculator_ade5ada157fabe3969ce7338ae05997ee}{m\_ulFirstWrite} (\textcolor{keyword}{true})
35 \{
36   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
37 
38 \}
\end{DoxyCode}
\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!````~Mac\+Stats\+Calculator@{$\sim$\+Mac\+Stats\+Calculator}}
\index{````~Mac\+Stats\+Calculator@{$\sim$\+Mac\+Stats\+Calculator}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{$\sim$\+Mac\+Stats\+Calculator()}{~MacStatsCalculator()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mac\+Stats\+Calculator\+::$\sim$\+Mac\+Stats\+Calculator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MacStatsCalculator_ac0e2886748904d4718f546bef5ed80e4}{}\label{classns3_1_1MacStatsCalculator_ac0e2886748904d4718f546bef5ed80e4}
Destructor 
\begin{DoxyCode}
41 \{
42   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
43 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Dl\+Scheduling@{Dl\+Scheduling}}
\index{Dl\+Scheduling@{Dl\+Scheduling}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Dl\+Scheduling(uint16\+\_\+t cell\+Id, uint64\+\_\+t imsi, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs\+Tb1, uint16\+\_\+t size\+Tb1, uint8\+\_\+t mcs\+Tb2, uint16\+\_\+t size\+Tb2)}{DlScheduling(uint16_t cellId, uint64_t imsi, uint32_t frameNo, uint32_t subframeNo, uint16_t rnti, uint8_t mcsTb1, uint16_t sizeTb1, uint8_t mcsTb2, uint16_t sizeTb2)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Stats\+Calculator\+::\+Dl\+Scheduling (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{cell\+Id, }
\item[{uint64\+\_\+t}]{imsi, }
\item[{uint32\+\_\+t}]{frame\+No, }
\item[{uint32\+\_\+t}]{subframe\+No, }
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{mcs\+Tb1, }
\item[{uint16\+\_\+t}]{size\+Tb1, }
\item[{uint8\+\_\+t}]{mcs\+Tb2, }
\item[{uint16\+\_\+t}]{size\+Tb2}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacStatsCalculator_acfbe2e6288517a685fee4b4bd708ebf6}{}\label{classns3_1_1MacStatsCalculator_acfbe2e6288517a685fee4b4bd708ebf6}
Notifies the stats calculator that an downlink scheduling has occurred. 
\begin{DoxyParams}{Parameters}
{\em cell\+Id} & Cell ID of the attached Enb \\
\hline
{\em imsi} & I\+M\+SI of the scheduled UE \\
\hline
{\em frame\+No} & Frame number \\
\hline
{\em subframe\+No} & Subframe number \\
\hline
{\em rnti} & C-\/\+R\+N\+TI scheduled \\
\hline
{\em mcs\+Tb1} & M\+CS for transport block 1 \\
\hline
{\em size\+Tb1} & Size of transport block 1 \\
\hline
{\em mcs\+Tb2} & M\+CS for transport block 2 (0 if not used) \\
\hline
{\em size\+Tb2} & Size of transport block 2 (0 if not used) \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
93 \{
94   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << cellId << imsi << frameNo << subframeNo << rnti << (uint32\_t) 
      mcsTb1 << sizeTb1 << (uint32\_t) mcsTb2 << sizeTb2);
95   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Write DL Mac Stats in "} << \hyperlink{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}{GetDlOutputFilename} ().c\_str ());
96 
97   std::ofstream outFile;
98   \textcolor{keywordflow}{if} ( \hyperlink{classns3_1_1MacStatsCalculator_a5374491bcea5d56f24be7e9cd0f98e3f}{m\_dlFirstWrite} == \textcolor{keyword}{true} )
99     \{
100       outFile.open (\hyperlink{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}{GetDlOutputFilename} ().c\_str ());
101       \textcolor{keywordflow}{if} (!outFile.is\_open ())
102         \{
103           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Can't open file "} << \hyperlink{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}{GetDlOutputFilename} ().c\_str (
      ));
104           \textcolor{keywordflow}{return};
105         \}
106       \hyperlink{classns3_1_1MacStatsCalculator_a5374491bcea5d56f24be7e9cd0f98e3f}{m\_dlFirstWrite} = \textcolor{keyword}{false};
107       outFile << \textcolor{stringliteral}{"% time\(\backslash\)tcellId\(\backslash\)tIMSI\(\backslash\)tframe\(\backslash\)tsframe\(\backslash\)tRNTI\(\backslash\)tmcsTb1\(\backslash\)tsizeTb1\(\backslash\)tmcsTb2\(\backslash\)tsizeTb2"};
108       outFile << std::endl;
109     \}
110   \textcolor{keywordflow}{else}
111     \{
112       outFile.open (\hyperlink{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}{GetDlOutputFilename} ().c\_str (),  std::ios\_base::app);
113       \textcolor{keywordflow}{if} (!outFile.is\_open ())
114         \{
115           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Can't open file "} << \hyperlink{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}{GetDlOutputFilename} ().c\_str (
      ));
116           \textcolor{keywordflow}{return};
117         \}
118     \}
119 
120   outFile << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a2fdb7bf0e1f5cd93b6149cb37bbb7f08}{GetNanoSeconds} () / (double) 1e9 << \textcolor{stringliteral}{"\(\backslash\)t"};
121   outFile << (uint32\_t) cellId << \textcolor{stringliteral}{"\(\backslash\)t"};
122   outFile << imsi << \textcolor{stringliteral}{"\(\backslash\)t"};
123   outFile << frameNo << \textcolor{stringliteral}{"\(\backslash\)t"};
124   outFile << subframeNo << \textcolor{stringliteral}{"\(\backslash\)t"};
125   outFile << rnti << \textcolor{stringliteral}{"\(\backslash\)t"};
126   outFile << (uint32\_t) mcsTb1 << \textcolor{stringliteral}{"\(\backslash\)t"};
127   outFile << sizeTb1 << \textcolor{stringliteral}{"\(\backslash\)t"};
128   outFile << (uint32\_t) mcsTb2 << \textcolor{stringliteral}{"\(\backslash\)t"};
129   outFile << sizeTb2 << std::endl;
130   outFile.close ();
131 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Dl\+Scheduling\+Callback@{Dl\+Scheduling\+Callback}}
\index{Dl\+Scheduling\+Callback@{Dl\+Scheduling\+Callback}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Dl\+Scheduling\+Callback(\+Ptr$<$ Mac\+Stats\+Calculator $>$ mac\+Stats, std\+::string path, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs\+Tb1, uint16\+\_\+t size\+Tb1, uint8\+\_\+t mcs\+Tb2, uint16\+\_\+t size\+Tb2)}{DlSchedulingCallback(Ptr< MacStatsCalculator > macStats, std::string path, uint32_t frameNo, uint32_t subframeNo, uint16_t rnti, uint8_t mcsTb1, uint16_t sizeTb1, uint8_t mcsTb2, uint16_t sizeTb2)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Stats\+Calculator\+::\+Dl\+Scheduling\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Mac\+Stats\+Calculator} $>$}]{mac\+Stats, }
\item[{std\+::string}]{path, }
\item[{uint32\+\_\+t}]{frame\+No, }
\item[{uint32\+\_\+t}]{subframe\+No, }
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{mcs\+Tb1, }
\item[{uint16\+\_\+t}]{size\+Tb1, }
\item[{uint8\+\_\+t}]{mcs\+Tb2, }
\item[{uint16\+\_\+t}]{size\+Tb2}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MacStatsCalculator_a0be474ae585c5669b37a33a0584e68ab}{}\label{classns3_1_1MacStatsCalculator_a0be474ae585c5669b37a33a0584e68ab}
Trace sink for the ns3\+::\+Lte\+Enb\+Mac\+::\+Dl\+Scheduling trace source


\begin{DoxyParams}{Parameters}
{\em mac\+Stats} & \\
\hline
{\em path} & \\
\hline
{\em frame\+No} & \\
\hline
{\em subframe\+No} & \\
\hline
{\em rnti} & \\
\hline
{\em mcs\+Tb1} & \\
\hline
{\em size\+Tb1} & \\
\hline
{\em mcs\+Tb2} & \\
\hline
{\em size\+Tb2} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
179 \{
180   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (macStats << path);
181   uint64\_t imsi = 0;
182   std::ostringstream pathAndRnti;
183   pathAndRnti << path << \textcolor{stringliteral}{"/"} << rnti;
184   \textcolor{keywordflow}{if} (macStats->ExistsImsiPath (pathAndRnti.str ()) == \textcolor{keyword}{true})
185     \{
186       imsi = macStats->GetImsiPath (pathAndRnti.str ());
187     \}
188   \textcolor{keywordflow}{else}
189     \{
190       imsi = \hyperlink{classns3_1_1LteStatsCalculator_a9cad885eb21450cedca3f94d6cf191d8}{FindImsiFromEnbMac} (path, rnti);
191       macStats->SetImsiPath (pathAndRnti.str (), imsi);
192     \}
193 
194   uint16\_t cellId = 0;
195   \textcolor{keywordflow}{if} (macStats->ExistsCellIdPath (pathAndRnti.str ()) == \textcolor{keyword}{true})
196     \{
197       cellId = macStats->GetCellIdPath (pathAndRnti.str ());
198     \}
199   \textcolor{keywordflow}{else}
200     \{
201       cellId = \hyperlink{classns3_1_1LteStatsCalculator_a87a9bc9d89913c21ef67854abeaf2dd3}{FindCellIdFromEnbMac} (path, rnti);
202       macStats->SetCellIdPath (pathAndRnti.str (), cellId);
203     \}
204 
205   macStats->DlScheduling (cellId, imsi, frameNo, subframeNo, rnti, mcsTb1, sizeTb1, mcsTb2, sizeTb2);
206 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Get\+Dl\+Output\+Filename@{Get\+Dl\+Output\+Filename}}
\index{Get\+Dl\+Output\+Filename@{Get\+Dl\+Output\+Filename}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Get\+Dl\+Output\+Filename(void)}{GetDlOutputFilename(void)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string ns3\+::\+Mac\+Stats\+Calculator\+::\+Get\+Dl\+Output\+Filename (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}{}\label{classns3_1_1MacStatsCalculator_a2034e7b21fcc1343f62b2affbbfa0334}
Get the name of the file where the downlink statistics will be stored. \begin{DoxyReturn}{Returns}
the name of the file where the downlink statistics will be stored 
\end{DoxyReturn}

\begin{DoxyCode}
86 \{
87   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1LteStatsCalculator_a022c578ee2e9eca77969f2f63e71bcc9}{LteStatsCalculator::GetDlOutputFilename} ();
88 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Mac\+Stats\+Calculator\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MacStatsCalculator_ae1308fec317465b6251beb591a6fb330}{}\label{classns3_1_1MacStatsCalculator_ae1308fec317465b6251beb591a6fb330}
Register this type. \begin{DoxyReturn}{Returns}
The object \hyperlink{classns3_1_1TypeId}{Type\+Id}. 
\end{DoxyReturn}

\begin{DoxyCode}
47 \{
48   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::MacStatsCalculator"})
49     .SetParent<\hyperlink{classns3_1_1LteStatsCalculator_a4d74204c35bb226063fb38662072b272}{LteStatsCalculator}> ()
50     .SetGroupName(\textcolor{stringliteral}{"Lte"})
51     .AddConstructor<\hyperlink{classns3_1_1MacStatsCalculator_acee2e1640d011068c88bafa7ca675611}{MacStatsCalculator}> ()
52     .AddAttribute (\textcolor{stringliteral}{"DlOutputFilename"},
53                    \textcolor{stringliteral}{"Name of the file where the downlink results will be saved."},
54                    StringValue (\textcolor{stringliteral}{"DlMacStats.txt"}),
55                    MakeStringAccessor (&\hyperlink{classns3_1_1MacStatsCalculator_a645ec89ad8601f1deaa93e9c20fdeb2a}{MacStatsCalculator::SetDlOutputFilename}
      ),
56                    MakeStringChecker ())
57     .AddAttribute (\textcolor{stringliteral}{"UlOutputFilename"},
58                    \textcolor{stringliteral}{"Name of the file where the uplink results will be saved."},
59                    StringValue (\textcolor{stringliteral}{"UlMacStats.txt"}),
60                    MakeStringAccessor (&\hyperlink{classns3_1_1MacStatsCalculator_ad628644433f0da784dd1307946feebc8}{MacStatsCalculator::SetUlOutputFilename}
      ),
61                    MakeStringChecker ())
62   ;
63   \textcolor{keywordflow}{return} tid;
64 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Get\+Ul\+Output\+Filename@{Get\+Ul\+Output\+Filename}}
\index{Get\+Ul\+Output\+Filename@{Get\+Ul\+Output\+Filename}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Get\+Ul\+Output\+Filename(void)}{GetUlOutputFilename(void)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string ns3\+::\+Mac\+Stats\+Calculator\+::\+Get\+Ul\+Output\+Filename (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}{}\label{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}
Get the name of the file where the uplink statistics will be stored. \begin{DoxyReturn}{Returns}
the name of the file where the uplink statistics will be stored 
\end{DoxyReturn}

\begin{DoxyCode}
74 \{
75   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1LteStatsCalculator_a8091b8aee336d1c4745de3e422b46e40}{LteStatsCalculator::GetUlOutputFilename} ();
76 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Set\+Dl\+Output\+Filename@{Set\+Dl\+Output\+Filename}}
\index{Set\+Dl\+Output\+Filename@{Set\+Dl\+Output\+Filename}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Set\+Dl\+Output\+Filename(std\+::string output\+Filename)}{SetDlOutputFilename(std::string outputFilename)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Stats\+Calculator\+::\+Set\+Dl\+Output\+Filename (
\begin{DoxyParamCaption}
\item[{std\+::string}]{output\+Filename}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacStatsCalculator_a645ec89ad8601f1deaa93e9c20fdeb2a}{}\label{classns3_1_1MacStatsCalculator_a645ec89ad8601f1deaa93e9c20fdeb2a}
Set the name of the file where the downlink statistics will be stored.


\begin{DoxyParams}{Parameters}
{\em output\+Filename} & string with the name of the file \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
80 \{
81   \hyperlink{classns3_1_1LteStatsCalculator_a1cd704e00a2384ef49fa74a7d29f91c1}{LteStatsCalculator::SetDlOutputFilename} (outputFilename);
82 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10




Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Set\+Ul\+Output\+Filename@{Set\+Ul\+Output\+Filename}}
\index{Set\+Ul\+Output\+Filename@{Set\+Ul\+Output\+Filename}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Set\+Ul\+Output\+Filename(std\+::string output\+Filename)}{SetUlOutputFilename(std::string outputFilename)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Stats\+Calculator\+::\+Set\+Ul\+Output\+Filename (
\begin{DoxyParamCaption}
\item[{std\+::string}]{output\+Filename}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacStatsCalculator_ad628644433f0da784dd1307946feebc8}{}\label{classns3_1_1MacStatsCalculator_ad628644433f0da784dd1307946feebc8}
Set the name of the file where the uplink statistics will be stored.


\begin{DoxyParams}{Parameters}
{\em output\+Filename} & string with the name of the file \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
68 \{
69   \hyperlink{classns3_1_1LteStatsCalculator_a47ced91f91ab7550e347ee1a933ca998}{LteStatsCalculator::SetUlOutputFilename} (outputFilename);
70 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12




Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Ul\+Scheduling@{Ul\+Scheduling}}
\index{Ul\+Scheduling@{Ul\+Scheduling}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Ul\+Scheduling(uint16\+\_\+t cell\+Id, uint64\+\_\+t imsi, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs\+Tb, uint16\+\_\+t size\+Tb)}{UlScheduling(uint16_t cellId, uint64_t imsi, uint32_t frameNo, uint32_t subframeNo, uint16_t rnti, uint8_t mcsTb, uint16_t sizeTb)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Stats\+Calculator\+::\+Ul\+Scheduling (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{cell\+Id, }
\item[{uint64\+\_\+t}]{imsi, }
\item[{uint32\+\_\+t}]{frame\+No, }
\item[{uint32\+\_\+t}]{subframe\+No, }
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{mcs\+Tb, }
\item[{uint16\+\_\+t}]{size\+Tb}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacStatsCalculator_a1dff14e446fbebfb126948c90db9ddda}{}\label{classns3_1_1MacStatsCalculator_a1dff14e446fbebfb126948c90db9ddda}
Notifies the stats calculator that an uplink scheduling has occurred. 
\begin{DoxyParams}{Parameters}
{\em cell\+Id} & Cell ID of the attached Enb \\
\hline
{\em imsi} & I\+M\+SI of the scheduled UE \\
\hline
{\em frame\+No} & Frame number \\
\hline
{\em subframe\+No} & Subframe number \\
\hline
{\em rnti} & C-\/\+R\+N\+TI scheduled \\
\hline
{\em mcs\+Tb} & M\+CS for transport block \\
\hline
{\em size\+Tb} & Size of transport block \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
136 \{
137   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << cellId << imsi << frameNo << subframeNo << rnti << (uint32\_t) 
      mcsTb << size);
138   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Write UL Mac Stats in "} << \hyperlink{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}{GetUlOutputFilename} ().c\_str ());
139 
140   std::ofstream outFile;
141   \textcolor{keywordflow}{if} ( \hyperlink{classns3_1_1MacStatsCalculator_ade5ada157fabe3969ce7338ae05997ee}{m\_ulFirstWrite} == \textcolor{keyword}{true} )
142     \{
143       outFile.open (\hyperlink{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}{GetUlOutputFilename} ().c\_str ());
144       \textcolor{keywordflow}{if} (!outFile.is\_open ())
145         \{
146           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Can't open file "} << \hyperlink{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}{GetUlOutputFilename} ().c\_str (
      ));
147           \textcolor{keywordflow}{return};
148         \}
149       \hyperlink{classns3_1_1MacStatsCalculator_ade5ada157fabe3969ce7338ae05997ee}{m\_ulFirstWrite} = \textcolor{keyword}{false};
150       outFile << \textcolor{stringliteral}{"% time\(\backslash\)tcellId\(\backslash\)tIMSI\(\backslash\)tframe\(\backslash\)tsframe\(\backslash\)tRNTI\(\backslash\)tmcs\(\backslash\)tsize"};
151       outFile << std::endl;
152     \}
153   \textcolor{keywordflow}{else}
154     \{
155       outFile.open (\hyperlink{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}{GetUlOutputFilename} ().c\_str (),  std::ios\_base::app);
156       \textcolor{keywordflow}{if} (!outFile.is\_open ())
157         \{
158           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Can't open file "} << \hyperlink{classns3_1_1MacStatsCalculator_abb13fbefe40f66fb22137401a931c520}{GetUlOutputFilename} ().c\_str (
      ));
159           \textcolor{keywordflow}{return};
160         \}
161     \}
162 
163   outFile << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a2fdb7bf0e1f5cd93b6149cb37bbb7f08}{GetNanoSeconds} () / (double) 1e9 << \textcolor{stringliteral}{"\(\backslash\)t"};
164   outFile << (uint32\_t) cellId << \textcolor{stringliteral}{"\(\backslash\)t"};
165   outFile << imsi << \textcolor{stringliteral}{"\(\backslash\)t"};
166   outFile << frameNo << \textcolor{stringliteral}{"\(\backslash\)t"};
167   outFile << subframeNo << \textcolor{stringliteral}{"\(\backslash\)t"};
168   outFile << rnti << \textcolor{stringliteral}{"\(\backslash\)t"};
169   outFile << (uint32\_t) mcsTb << \textcolor{stringliteral}{"\(\backslash\)t"};
170   outFile << size << std::endl;
171   outFile.close ();
172 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14


\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!Ul\+Scheduling\+Callback@{Ul\+Scheduling\+Callback}}
\index{Ul\+Scheduling\+Callback@{Ul\+Scheduling\+Callback}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{Ul\+Scheduling\+Callback(\+Ptr$<$ Mac\+Stats\+Calculator $>$ mac\+Stats, std\+::string path, uint32\+\_\+t frame\+No, uint32\+\_\+t subframe\+No, uint16\+\_\+t rnti, uint8\+\_\+t mcs, uint16\+\_\+t size)}{UlSchedulingCallback(Ptr< MacStatsCalculator > macStats, std::string path, uint32_t frameNo, uint32_t subframeNo, uint16_t rnti, uint8_t mcs, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Stats\+Calculator\+::\+Ul\+Scheduling\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Mac\+Stats\+Calculator} $>$}]{mac\+Stats, }
\item[{std\+::string}]{path, }
\item[{uint32\+\_\+t}]{frame\+No, }
\item[{uint32\+\_\+t}]{subframe\+No, }
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{mcs, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MacStatsCalculator_aeb1afcd5f47a1df9d1764f80ea9926d6}{}\label{classns3_1_1MacStatsCalculator_aeb1afcd5f47a1df9d1764f80ea9926d6}
Trace sink for the ns3\+::\+Lte\+Enb\+Mac\+::\+Ul\+Scheduling trace source


\begin{DoxyParams}{Parameters}
{\em mac\+Stats} & \\
\hline
{\em path} & \\
\hline
{\em frame\+No} & \\
\hline
{\em subframe\+No} & \\
\hline
{\em rnti} & \\
\hline
{\em mcs} & \\
\hline
{\em size} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
212 \{
213   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (macStats << path);
214 
215   uint64\_t imsi = 0;
216   std::ostringstream pathAndRnti;
217   pathAndRnti << path << \textcolor{stringliteral}{"/"} << rnti;
218   \textcolor{keywordflow}{if} (macStats->ExistsImsiPath (pathAndRnti.str ()) == \textcolor{keyword}{true})
219     \{
220       imsi = macStats->GetImsiPath (pathAndRnti.str ());
221     \}
222   \textcolor{keywordflow}{else}
223     \{
224       imsi = \hyperlink{classns3_1_1LteStatsCalculator_a9cad885eb21450cedca3f94d6cf191d8}{FindImsiFromEnbMac} (path, rnti);
225       macStats->SetImsiPath (pathAndRnti.str (), imsi);
226     \}
227   uint16\_t cellId = 0;
228   \textcolor{keywordflow}{if} (macStats->ExistsCellIdPath (pathAndRnti.str ()) == \textcolor{keyword}{true})
229     \{
230       cellId = macStats->GetCellIdPath (pathAndRnti.str ());
231     \}
232   \textcolor{keywordflow}{else}
233     \{
234       cellId = \hyperlink{classns3_1_1LteStatsCalculator_a87a9bc9d89913c21ef67854abeaf2dd3}{FindCellIdFromEnbMac} (path, rnti);
235       macStats->SetCellIdPath (pathAndRnti.str (), cellId);
236     \}
237 
238   macStats->UlScheduling (cellId, imsi, frameNo, subframeNo, rnti, mcs, size);
239 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15




Here is the caller graph for this function\+:
% FIG 16




\subsection{Member Data Documentation}
\index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!m\+\_\+dl\+First\+Write@{m\+\_\+dl\+First\+Write}}
\index{m\+\_\+dl\+First\+Write@{m\+\_\+dl\+First\+Write}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+First\+Write}{m_dlFirstWrite}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Mac\+Stats\+Calculator\+::m\+\_\+dl\+First\+Write\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacStatsCalculator_a5374491bcea5d56f24be7e9cd0f98e3f}{}\label{classns3_1_1MacStatsCalculator_a5374491bcea5d56f24be7e9cd0f98e3f}
When writing DL M\+AC statistics first time to file, columns description is added. Then next lines are appended to file. This value is true if output files have not been opened yet \index{ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}!m\+\_\+ul\+First\+Write@{m\+\_\+ul\+First\+Write}}
\index{m\+\_\+ul\+First\+Write@{m\+\_\+ul\+First\+Write}!ns3\+::\+Mac\+Stats\+Calculator@{ns3\+::\+Mac\+Stats\+Calculator}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+First\+Write}{m_ulFirstWrite}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Mac\+Stats\+Calculator\+::m\+\_\+ul\+First\+Write\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacStatsCalculator_ade5ada157fabe3969ce7338ae05997ee}{}\label{classns3_1_1MacStatsCalculator_ade5ada157fabe3969ce7338ae05997ee}
When writing UL M\+AC statistics first time to file, columns description is added. Then next lines are appended to file. This value is true if output files have not been opened yet 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/helper/\hyperlink{mac-stats-calculator_8h}{mac-\/stats-\/calculator.\+h}\item 
lte/helper/\hyperlink{mac-stats-calculator_8cc}{mac-\/stats-\/calculator.\+cc}\end{DoxyCompactItemize}
