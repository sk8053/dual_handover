\hypertarget{classWifiInterferenceTestCase}{}\section{Wifi\+Interference\+Test\+Case Class Reference}
\label{classWifiInterferenceTestCase}\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}


Inheritance diagram for Wifi\+Interference\+Test\+Case\+:
% FIG 0


Collaboration diagram for Wifi\+Interference\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classWifiInterferenceTestCase_a32833b4815338fdb5bb1999e1c62238c}{Wifi\+Interference\+Test\+Case} ()
\item 
virtual \hyperlink{classWifiInterferenceTestCase_a80882c69197c8f5a60d208434768c179}{$\sim$\+Wifi\+Interference\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classWifiInterferenceTestCase_a1823c61fbe424309cf15e81ee03f398a}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classWifiInterferenceTestCase_a74caea35a68998ff6498ca882f00581b}{Receive\+Packet} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\item 
void \hyperlink{classWifiInterferenceTestCase_aa18e53673390dc3e3eb6e0f32b85f9ef}{Print\+End\+Sync} (std\+::string context, uint32\+\_\+t data\+Rate, double \hyperlink{lte__pathloss_8m_ae6e82a215dff6b79fb6e9952a1b78453}{snr}, double per)
\item 
double \hyperlink{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{Wifi\+Simple\+Interference} (std\+::string phy\+Mode, double Prss, double Irss, double delta, uint32\+\_\+t Ppacket\+Size, uint32\+\_\+t Ipacket\+Size, bool \hyperlink{openflow-switch_8cc_ab3f078684998b83967d507d0f453f454}{verbose}, \hyperlink{classns3_1_1InternetStackHelper}{Internet\+Stack\+Helper} internet, \hyperlink{group__wifi_ga1299834f4e1c615af3ca738033b76a49}{Wifi\+Phy\+Standard} wifi\+Standard)
\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{classWifiInterferenceTestCase_a5ad509bd0112e0cf6de835cd4cabbb2b}{Generate\+Traffic} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket, uint32\+\_\+t pkt\+Size, uint32\+\_\+t pkt\+Count, \hyperlink{classns3_1_1Time}{Time} pkt\+Interval)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classWifiInterferenceTestCase_ab810c2782277c76c886528e0b9d20537}{m\+\_\+\+P\+ER}
\item 
double \hyperlink{classWifiInterferenceTestCase_aebf7a181c7f73dd03a90b12e84ecd916}{m\+\_\+\+S\+NR}
\item 
uint32\+\_\+t \hyperlink{classWifiInterferenceTestCase_a3358f7dc0f18f41a5e9a5a2882be8078}{m\+\_\+\+Data\+Rate}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{Wifi\+Interference\+Test\+Case()}{WifiInterferenceTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Wifi\+Interference\+Test\+Case\+::\+Wifi\+Interference\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classWifiInterferenceTestCase_a32833b4815338fdb5bb1999e1c62238c}{}\label{classWifiInterferenceTestCase_a32833b4815338fdb5bb1999e1c62238c}

\begin{DoxyCode}
73   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Test interference calculation when interfering frame exactly overlaps intended frame
      "})
74 \{
75 \}
\end{DoxyCode}
\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!````~Wifi\+Interference\+Test\+Case@{$\sim$\+Wifi\+Interference\+Test\+Case}}
\index{````~Wifi\+Interference\+Test\+Case@{$\sim$\+Wifi\+Interference\+Test\+Case}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Wifi\+Interference\+Test\+Case()}{~WifiInterferenceTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Wifi\+Interference\+Test\+Case\+::$\sim$\+Wifi\+Interference\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classWifiInterferenceTestCase_a80882c69197c8f5a60d208434768c179}{}\label{classWifiInterferenceTestCase_a80882c69197c8f5a60d208434768c179}

\begin{DoxyCode}
78 \{
79 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Wifi\+Interference\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classWifiInterferenceTestCase_a1823c61fbe424309cf15e81ee03f398a}{}\label{classWifiInterferenceTestCase_a1823c61fbe424309cf15e81ee03f398a}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
254 \{
255 
256   std::string phyMode (\textcolor{stringliteral}{"DsssRate1Mbps"});
257   \hyperlink{group__wifi_ga1299834f4e1c615af3ca738033b76a49}{WifiPhyStandard} wifiStandard=\hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a77e1cc9f77a0bce8e2bc82cbef437b5a}{WIFI\_PHY\_STANDARD\_80211b};
258   \textcolor{keywordtype}{double} Prss = -90;  \textcolor{comment}{// -dBm}
259   \textcolor{keywordtype}{double} Irss = -90;  \textcolor{comment}{// -dBm}
260   \textcolor{keywordtype}{double} delta = 0;  \textcolor{comment}{// microseconds}
261   uint32\_t PpacketSize = 1000; \textcolor{comment}{// bytes}
262   uint32\_t IpacketSize = 1000; \textcolor{comment}{// bytes}
263   \textcolor{keywordtype}{bool} \hyperlink{openflow-switch_8cc_ab3f078684998b83967d507d0f453f454}{verbose} = \textcolor{keyword}{false};
264   \textcolor{keywordtype}{double} PER, PER1, PER2;
265   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
266 
267   \textcolor{comment}{// Compute the packet error rate (PER) when delta=0 microseconds.  This}
268   \textcolor{comment}{// means that the interferer arrives at exactly the same time as the}
269   \textcolor{comment}{// intended packet}
270   PER = \hyperlink{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{WifiSimpleInterference} (phyMode,Prss,Irss,delta,PpacketSize,IpacketSize,
      verbose,internet,wifiStandard);
271 
272   \textcolor{comment}{// Now rerun this test case and compute the PER when the delta time between}
273   \textcolor{comment}{// arrival of the intended frame and interferer is 1 microsecond.}
274   delta = 1;
275   PER1 = \hyperlink{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{WifiSimpleInterference} (phyMode,Prss,Irss,delta,PpacketSize,IpacketSize,
      verbose,internet,wifiStandard);
276 
277   \textcolor{comment}{// Now rerun this test case and compute the PER when the delta time between}
278   \textcolor{comment}{// arrival of the intended frame and interferer is 2 microseconds.}
279   delta = 2;
280   PER2 = \hyperlink{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{WifiSimpleInterference} (phyMode,Prss,Irss,delta,PpacketSize,IpacketSize,
      verbose,internet,wifiStandard);
281 
282   \textcolor{keywordtype}{double} PERDiff1 = PER - PER1;
283 
284   \textcolor{keywordtype}{double} PERDiff2 = PER1 - PER2;
285 
286   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (PERDiff1, PERDiff2, 
287                          \textcolor{stringliteral}{"The PER difference due to 1 microsecond difference in arrival shouldn't depend on
       absolute arrival"});
288   \textcolor{comment}{//Now rerun for 11n}
289   wifiStandard = \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a6e449a5ca14fc7c0eb36064ce04a5192}{WIFI\_PHY\_STANDARD\_80211n\_2\_4GHZ};
290   \textcolor{comment}{// Compute the packet error rate (PER) when delta=0 microseconds.  This}
291   \textcolor{comment}{// means that the interferer arrives at exactly the same time as the}
292   \textcolor{comment}{// intended packet}
293   PER = \hyperlink{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{WifiSimpleInterference} (phyMode,Prss,Irss,delta,PpacketSize,IpacketSize,
      verbose,internet,wifiStandard);
294 
295   \textcolor{comment}{// Now rerun this test case and compute the PER when the delta time between}
296   \textcolor{comment}{// arrival of the intended frame and interferer is 1 microsecond.}
297   delta = 1;
298   PER1 = \hyperlink{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{WifiSimpleInterference} (phyMode,Prss,Irss,delta,PpacketSize,IpacketSize,
      verbose,internet,wifiStandard);
299 
300   \textcolor{comment}{// Now rerun this test case and compute the PER when the delta time between}
301   \textcolor{comment}{// arrival of the intended frame and interferer is 2 microseconds.}
302   delta = 2;
303   PER2 = \hyperlink{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{WifiSimpleInterference} (phyMode,Prss,Irss,delta,PpacketSize,IpacketSize,
      verbose,internet,wifiStandard);
304 
305   PERDiff1 = PER - PER1;
306 
307   PERDiff2 = PER1 - PER2;
308 
309   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (PERDiff1, PERDiff2, 
310                          \textcolor{stringliteral}{"The PER difference due to 1 microsecond difference in arrival shouldn't depend on
       absolute arrival"});
311 
312 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!Generate\+Traffic@{Generate\+Traffic}}
\index{Generate\+Traffic@{Generate\+Traffic}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{Generate\+Traffic(\+Ptr$<$ Socket $>$ socket, uint32\+\_\+t pkt\+Size, uint32\+\_\+t pkt\+Count, Time pkt\+Interval)}{GenerateTraffic(Ptr< Socket > socket, uint32_t pktSize, uint32_t pktCount, Time pktInterval)}}]{\setlength{\rightskip}{0pt plus 5cm}void Wifi\+Interference\+Test\+Case\+::\+Generate\+Traffic (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket, }
\item[{uint32\+\_\+t}]{pkt\+Size, }
\item[{uint32\+\_\+t}]{pkt\+Count, }
\item[{{\bf Time}}]{pkt\+Interval}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classWifiInterferenceTestCase_a5ad509bd0112e0cf6de835cd4cabbb2b}{}\label{classWifiInterferenceTestCase_a5ad509bd0112e0cf6de835cd4cabbb2b}

\begin{DoxyCode}
102 \{
103   \textcolor{keywordflow}{if} (pktCount > 0)
104     \{
105       socket->\hyperlink{classns3_1_1Socket_a036901c8f485fe5b6eab93b7f2ec289d}{Send} (Create<Packet> (pktSize));
106       Simulator::Schedule (pktInterval, &
      \hyperlink{classWifiInterferenceTestCase_a5ad509bd0112e0cf6de835cd4cabbb2b}{WifiInterferenceTestCase::GenerateTraffic}, socket, pktSize, 
      pktCount-1, pktInterval);
107     \}
108   \textcolor{keywordflow}{else}
109     \{
110       socket->\hyperlink{classns3_1_1Socket_abdac6e2498c5aa2963ef361d4200ddf3}{Close} ();
111     \}
112 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!Print\+End\+Sync@{Print\+End\+Sync}}
\index{Print\+End\+Sync@{Print\+End\+Sync}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{Print\+End\+Sync(std\+::string context, uint32\+\_\+t data\+Rate, double snr, double per)}{PrintEndSync(std::string context, uint32_t dataRate, double snr, double per)}}]{\setlength{\rightskip}{0pt plus 5cm}void Wifi\+Interference\+Test\+Case\+::\+Print\+End\+Sync (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{uint32\+\_\+t}]{data\+Rate, }
\item[{double}]{snr, }
\item[{double}]{per}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classWifiInterferenceTestCase_aa18e53673390dc3e3eb6e0f32b85f9ef}{}\label{classWifiInterferenceTestCase_aa18e53673390dc3e3eb6e0f32b85f9ef}

\begin{DoxyCode}
116 \{
117   \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND} (\textcolor{stringliteral}{"EndSync:  Received frame with dataRate="} << dataRate << \textcolor{stringliteral}{", SNR="} << 
      \hyperlink{lte__amc_8m_a7543c5e4e80c828b652e0c63e4a6de70}{snr} << \textcolor{stringliteral}{", PER ="} << per);
118   \hyperlink{classWifiInterferenceTestCase_ab810c2782277c76c886528e0b9d20537}{m\_PER} = per;
119   \hyperlink{classWifiInterferenceTestCase_aebf7a181c7f73dd03a90b12e84ecd916}{m\_SNR} = \hyperlink{lte__amc_8m_a7543c5e4e80c828b652e0c63e4a6de70}{snr};
120   \hyperlink{classWifiInterferenceTestCase_a3358f7dc0f18f41a5e9a5a2882be8078}{m\_DataRate} = dataRate;
121 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 5


\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!Receive\+Packet@{Receive\+Packet}}
\index{Receive\+Packet@{Receive\+Packet}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{Receive\+Packet(\+Ptr$<$ Socket $>$ socket)}{ReceivePacket(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Wifi\+Interference\+Test\+Case\+::\+Receive\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classWifiInterferenceTestCase_a74caea35a68998ff6498ca882f00581b}{}\label{classWifiInterferenceTestCase_a74caea35a68998ff6498ca882f00581b}

\begin{DoxyCode}
96 \{
97   \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND} (\hyperlink{wifi-interference-test-suite_8cc_ad8addb72baae43bf761d7d7621c26b21}{PrintReceivedPacket} (socket));
98 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!Wifi\+Simple\+Interference@{Wifi\+Simple\+Interference}}
\index{Wifi\+Simple\+Interference@{Wifi\+Simple\+Interference}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{Wifi\+Simple\+Interference(std\+::string phy\+Mode, double Prss, double Irss, double delta, uint32\+\_\+t Ppacket\+Size, uint32\+\_\+t Ipacket\+Size, bool verbose, Internet\+Stack\+Helper internet, Wifi\+Phy\+Standard wifi\+Standard)}{WifiSimpleInterference(std::string phyMode, double Prss, double Irss, double delta, uint32_t PpacketSize, uint32_t IpacketSize, bool verbose, InternetStackHelper internet, WifiPhyStandard wifiStandard)}}]{\setlength{\rightskip}{0pt plus 5cm}double Wifi\+Interference\+Test\+Case\+::\+Wifi\+Simple\+Interference (
\begin{DoxyParamCaption}
\item[{std\+::string}]{phy\+Mode, }
\item[{double}]{Prss, }
\item[{double}]{Irss, }
\item[{double}]{delta, }
\item[{uint32\+\_\+t}]{Ppacket\+Size, }
\item[{uint32\+\_\+t}]{Ipacket\+Size, }
\item[{bool}]{verbose, }
\item[{{\bf Internet\+Stack\+Helper}}]{internet, }
\item[{{\bf Wifi\+Phy\+Standard}}]{wifi\+Standard}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}{}\label{classWifiInterferenceTestCase_a360c9c443551246707b58ee879c37a5a}

\begin{DoxyCode}
125 \{
126 
127   uint32\_t numPackets = 1;
128   \textcolor{keywordtype}{double} interval = 1.0; \textcolor{comment}{// seconds}
129   \textcolor{keywordtype}{double} startTime = 10.0; \textcolor{comment}{// seconds}
130   \textcolor{keywordtype}{double} distanceToRx = 100.0; \textcolor{comment}{// meters}
131 
132   \textcolor{keywordtype}{double} offset = 91;  \textcolor{comment}{// This is a magic number used to set the }
133   \textcolor{comment}{// transmit power, based on other configuration}
134 
135   \hyperlink{classWifiInterferenceTestCase_ab810c2782277c76c886528e0b9d20537}{m\_PER} = 0;
136   \hyperlink{classWifiInterferenceTestCase_aebf7a181c7f73dd03a90b12e84ecd916}{m\_SNR} = 0;
137   \hyperlink{classWifiInterferenceTestCase_a3358f7dc0f18f41a5e9a5a2882be8078}{m\_DataRate} = 0;
138 
139   \textcolor{comment}{// Convert to time object}
140   \hyperlink{classns3_1_1Time}{Time} interPacketInterval = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (interval);
141 
142   \textcolor{comment}{// disable fragmentation for frames below 2200 bytes}
143   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::WifiRemoteStationManager::FragmentationThreshold"}, 
      StringValue (\textcolor{stringliteral}{"2200"}));
144   \textcolor{comment}{// turn off RTS/CTS for frames below 2200 bytes}
145   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::WifiRemoteStationManager::RtsCtsThreshold"}, StringValue (\textcolor{stringliteral}{"
      2200"}));
146   \textcolor{comment}{// Fix non-unicast data rate to be the same as that of unicast}
147   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::WifiRemoteStationManager::NonUnicastMode"}, 
148                       StringValue (phyMode));
149 
150   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c};
151   c.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (3);
152 
153   \textcolor{comment}{// The below set of helpers will help us to put together the wifi NICs we want}
154   \hyperlink{classns3_1_1WifiHelper}{WifiHelper} wifi;
155   wifi.\hyperlink{classns3_1_1WifiHelper_aa54f3e61527ef8de318d310045bc5dfd}{SetStandard} (wifiStandard);
156 
157   \hyperlink{classns3_1_1YansWifiPhyHelper}{YansWifiPhyHelper} wifiPhy =  YansWifiPhyHelper::Default ();
158   \textcolor{comment}{// This is one parameter that matters when using FixedRssLossModel}
159   \textcolor{comment}{// set it to zero; otherwise, gain will be added}
160   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"RxGain"}, DoubleValue (0) ); 
161   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"CcaMode1Threshold"}, DoubleValue (0.0) );
162 
163   \textcolor{comment}{// ns-3 supports RadioTap and Prism tracing extensions for 802.11b}
164   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_ae4b90e90f6e78a19c1b7fdf08b270218}{SetPcapDataLinkType} (YansWifiPhyHelper::DLT\_IEEE802\_11\_RADIO); 
165 
166   \hyperlink{classns3_1_1YansWifiChannelHelper}{YansWifiChannelHelper} wifiChannel;
167   wifiChannel.\hyperlink{classns3_1_1YansWifiChannelHelper_a6b452ba53ccaee6ca000cc72ed9ea0fa}{SetPropagationDelay} (\textcolor{stringliteral}{"ns3::ConstantSpeedPropagationDelayModel"});
168   wifiChannel.\hyperlink{classns3_1_1YansWifiChannelHelper_a71c64d54e148b43698c65736e1c77156}{AddPropagationLoss} (\textcolor{stringliteral}{"ns3::LogDistancePropagationLossModel"});
169   wifiPhy.\hyperlink{classns3_1_1YansWifiPhyHelper_ad2e9a27587dd4ff320435c93cc2676de}{SetChannel} (wifiChannel.\hyperlink{classns3_1_1YansWifiChannelHelper_a0532e292ab9452f3cf630c848708e563}{Create} ());
170 
171   \textcolor{comment}{// Add a mac and disable rate control}
172   \hyperlink{classns3_1_1WifiMacHelper}{WifiMacHelper} wifiMac;
173   wifi.\hyperlink{classns3_1_1WifiHelper_a3d01b178aeb2de246ab5a3aa5638ce24}{SetRemoteStationManager} (\textcolor{stringliteral}{"ns3::ConstantRateWifiManager"},
174                                 \textcolor{stringliteral}{"DataMode"},StringValue (phyMode),
175                                 \textcolor{stringliteral}{"ControlMode"},StringValue (phyMode));
176 
177   \textcolor{comment}{// Set it to adhoc mode (and enable QOS for HT/VHT stations)}
178   \textcolor{keywordflow}{if} (wifiStandard == \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a6e449a5ca14fc7c0eb36064ce04a5192}{WIFI\_PHY\_STANDARD\_80211n\_2\_4GHZ}
179       || wifiStandard == \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aaabe94a0be4668583c42595437b4a6c0}{WIFI\_PHY\_STANDARD\_80211n\_5GHZ}
180       || wifiStandard == \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a7c078959de635b84fb280a955dcfb27e}{WIFI\_PHY\_STANDARD\_80211ac})
181     \{
182       wifiMac.\hyperlink{classns3_1_1WifiMacHelper_a382d8df76a1dd7007179d1963b4b6bc6}{SetType} (\textcolor{stringliteral}{"ns3::AdhocWifiMac"},
183                        \textcolor{stringliteral}{"QosSupported"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
184     \}
185   \textcolor{keywordflow}{else}
186     \{
187       wifiMac.\hyperlink{classns3_1_1WifiMacHelper_a382d8df76a1dd7007179d1963b4b6bc6}{SetType} (\textcolor{stringliteral}{"ns3::AdhocWifiMac"});
188     \}
189   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} devices = wifi.\hyperlink{classns3_1_1WifiHelper_a451b3d33fa1497c22f06c5451f57a127}{Install} (wifiPhy, wifiMac, c.
      \hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0));
190 
191   \textcolor{comment}{// This will disable these sending devices from detecting a signal }
192   \textcolor{comment}{// so that they do not backoff}
193   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"EnergyDetectionThreshold"}, DoubleValue (0.0) );
194   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"TxGain"}, DoubleValue (offset + Prss) ); 
195   devices.\hyperlink{classns3_1_1NetDeviceContainer_a7ca8bc1d7ec00fd4fcc63869987fbda5}{Add} (wifi.\hyperlink{classns3_1_1WifiHelper_a451b3d33fa1497c22f06c5451f57a127}{Install} (wifiPhy, wifiMac, c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1)));
196   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"TxGain"}, DoubleValue (offset + Irss) ); 
197   devices.\hyperlink{classns3_1_1NetDeviceContainer_a7ca8bc1d7ec00fd4fcc63869987fbda5}{Add} (wifi.\hyperlink{classns3_1_1WifiHelper_a451b3d33fa1497c22f06c5451f57a127}{Install} (wifiPhy, wifiMac, c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (2)));
198 
199   \textcolor{comment}{// Note that with FixedRssLossModel, the positions below are not }
200   \textcolor{comment}{// used for received signal strength. }
201   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
202   \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} positionAlloc = CreateObject<ListPositionAllocator> 
      ();
203   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (0.0, 0.0, 0.0));
204   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (distanceToRx, 0.0, 0.0));
205   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (-1*distanceToRx, 0.0, 0.0));
206   mobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (positionAlloc);
207   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
208   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (c);
209 
210   \textcolor{comment}{// InternetStackHelper internet;}
211   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (c);
212  
213   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4;
214   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Assign IP Addresses."});
215   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.1.0"}, \textcolor{stringliteral}{"255.255.255.0"});
216   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (devices);
217 
218   \hyperlink{classns3_1_1TypeId}{TypeId} tid = TypeId::LookupByName (\textcolor{stringliteral}{"ns3::UdpSocketFactory"});
219   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} recvSink = Socket::CreateSocket (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0), tid);
220   \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} local = \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (
      \hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"10.1.1.1"}), 80);
221   recvSink->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (local);
222   recvSink->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classWifiInterferenceTestCase_a74caea35a68998ff6498ca882f00581b}{WifiInterferenceTestCase::ReceivePacket}, \textcolor{keyword}{this}));
223 
224   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} source = Socket::CreateSocket (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1), tid);
225   \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} remote = \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (
      \hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"255.255.255.255"}), 80);
226   source->\hyperlink{classns3_1_1Socket_a97f08aaf37b8fd7d4b5cad4dfdd4022a}{Connect} (remote);
227 
228   \textcolor{comment}{// Interferer will send to a different port; we will not see a}
229   \textcolor{comment}{// "Received packet" message}
230   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} interferer = Socket::CreateSocket (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (2), tid);
231   \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} interferingAddr = \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (
      \hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"255.255.255.255"}), 49000);
232   interferer->\hyperlink{classns3_1_1Socket_a97f08aaf37b8fd7d4b5cad4dfdd4022a}{Connect} (interferingAddr);
233 
234   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"
      /NodeList/0/DeviceList/0/$ns3::WifiNetDevice/Phy/$ns3::YansWifiPhy/EndSync"}, \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classWifiInterferenceTestCase_aa18e53673390dc3e3eb6e0f32b85f9ef}{WifiInterferenceTestCase::PrintEndSync}
      , \textcolor{keyword}{this})); 
235   \textcolor{comment}{// Tracing}
236 \textcolor{comment}{//  wifiPhy.EnablePcap ("wifi-simple-interference", devices.Get (0));}
237 
238   Simulator::ScheduleWithContext (source->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (),
239                                   \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (startTime), &\hyperlink{classWifiInterferenceTestCase_a5ad509bd0112e0cf6de835cd4cabbb2b}{GenerateTraffic},
240                                   source, PpacketSize, numPackets, interPacketInterval);
241 
242   Simulator::ScheduleWithContext (interferer->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (),
243                                   \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (startTime + delta/1000000.0), &
      \hyperlink{classWifiInterferenceTestCase_a5ad509bd0112e0cf6de835cd4cabbb2b}{GenerateTraffic},
244                                   interferer, IpacketSize, numPackets, interPacketInterval);
245 
246   Simulator::Run ();
247   Simulator::Destroy ();
248 
249   \textcolor{keywordflow}{return} \hyperlink{classWifiInterferenceTestCase_ab810c2782277c76c886528e0b9d20537}{m\_PER};
250 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9




\subsection{Member Data Documentation}
\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!m\+\_\+\+Data\+Rate@{m\+\_\+\+Data\+Rate}}
\index{m\+\_\+\+Data\+Rate@{m\+\_\+\+Data\+Rate}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+\+Data\+Rate}{m_DataRate}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Wifi\+Interference\+Test\+Case\+::m\+\_\+\+Data\+Rate\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classWifiInterferenceTestCase_a3358f7dc0f18f41a5e9a5a2882be8078}{}\label{classWifiInterferenceTestCase_a3358f7dc0f18f41a5e9a5a2882be8078}
\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!m\+\_\+\+P\+ER@{m\+\_\+\+P\+ER}}
\index{m\+\_\+\+P\+ER@{m\+\_\+\+P\+ER}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+\+P\+ER}{m_PER}}]{\setlength{\rightskip}{0pt plus 5cm}double Wifi\+Interference\+Test\+Case\+::m\+\_\+\+P\+ER\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classWifiInterferenceTestCase_ab810c2782277c76c886528e0b9d20537}{}\label{classWifiInterferenceTestCase_ab810c2782277c76c886528e0b9d20537}
\index{Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}!m\+\_\+\+S\+NR@{m\+\_\+\+S\+NR}}
\index{m\+\_\+\+S\+NR@{m\+\_\+\+S\+NR}!Wifi\+Interference\+Test\+Case@{Wifi\+Interference\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+\+S\+NR}{m_SNR}}]{\setlength{\rightskip}{0pt plus 5cm}double Wifi\+Interference\+Test\+Case\+::m\+\_\+\+S\+NR\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classWifiInterferenceTestCase_aebf7a181c7f73dd03a90b12e84ecd916}{}\label{classWifiInterferenceTestCase_aebf7a181c7f73dd03a90b12e84ecd916}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/ns3wifi/\hyperlink{wifi-interference-test-suite_8cc}{wifi-\/interference-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
