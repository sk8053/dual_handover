\hypertarget{classLenaHarqTestCase}{}\section{Lena\+Harq\+Test\+Case Class Reference}
\label{classLenaHarqTestCase}\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}


{\ttfamily \#include $<$lte-\/test-\/harq.\+h$>$}



Inheritance diagram for Lena\+Harq\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lena\+Harq\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLenaHarqTestCase_a986096c11ac19b92c8833e4fa74eb93c}{Lena\+Harq\+Test\+Case} (uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint16\+\_\+t tb\+Size, double amc\+Ber, double thr\+Ref)
\item 
virtual \hyperlink{classLenaHarqTestCase_ae3bc34acf903a0c5a08248e66dea318e}{$\sim$\+Lena\+Harq\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLenaHarqTestCase_a77a86faca2ff6021e971516d82ea0533}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::string \hyperlink{classLenaHarqTestCase_a6560ccf998d92aba95d60a42c060b023}{Build\+Name\+String} (uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint16\+\_\+t tb\+Size)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \hyperlink{classLenaHarqTestCase_a63345f1ba9ffc5ab5e8a01ca79d6f0c4}{m\+\_\+n\+User}
\item 
uint16\+\_\+t \hyperlink{classLenaHarqTestCase_a5663ec9ff3b57db57555bedee9b6544c}{m\+\_\+dist}
\item 
double \hyperlink{classLenaHarqTestCase_adbc2a162861957d9858e16556c0988fe}{m\+\_\+amc\+Ber}
\item 
double \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\+\_\+throughput\+Ref}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
This system test program creates different test cases with a single e\+NB and several U\+Es, all having the same Radio Bearer specification. In each test case, the U\+Es see the same S\+I\+NR from the e\+NB; different test cases are implemented obtained by using different S\+I\+NR values and different numbers of U\+Es. The test consists on ... 

\subsection{Constructor \& Destructor Documentation}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lena\+Harq\+Test\+Case(uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint16\+\_\+t tb\+Size, double amc\+Ber, double thr\+Ref)}{LenaHarqTestCase(uint16_t nUser, uint16_t dist, uint16_t tbSize, double amcBer, double thrRef)}}]{\setlength{\rightskip}{0pt plus 5cm}Lena\+Harq\+Test\+Case\+::\+Lena\+Harq\+Test\+Case (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{n\+User, }
\item[{uint16\+\_\+t}]{dist, }
\item[{uint16\+\_\+t}]{tb\+Size, }
\item[{double}]{amc\+Ber, }
\item[{double}]{thr\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{classLenaHarqTestCase_a986096c11ac19b92c8833e4fa74eb93c}{}\label{classLenaHarqTestCase_a986096c11ac19b92c8833e4fa74eb93c}

\begin{DoxyCode}
92   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{classLenaHarqTestCase_a6560ccf998d92aba95d60a42c060b023}{BuildNameString} (nUser, dist, tbSize)),
93     \hyperlink{classLenaHarqTestCase_a63345f1ba9ffc5ab5e8a01ca79d6f0c4}{m\_nUser} (nUser),
94     \hyperlink{classLenaHarqTestCase_a5663ec9ff3b57db57555bedee9b6544c}{m\_dist} (dist),
95     \hyperlink{classLenaHarqTestCase_adbc2a162861957d9858e16556c0988fe}{m\_amcBer} (amcBer),
96     \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef} (thrRef)
97 \{
98 \}
\end{DoxyCode}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!````~Lena\+Harq\+Test\+Case@{$\sim$\+Lena\+Harq\+Test\+Case}}
\index{````~Lena\+Harq\+Test\+Case@{$\sim$\+Lena\+Harq\+Test\+Case}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Lena\+Harq\+Test\+Case()}{~LenaHarqTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lena\+Harq\+Test\+Case\+::$\sim$\+Lena\+Harq\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classLenaHarqTestCase_ae3bc34acf903a0c5a08248e66dea318e}{}\label{classLenaHarqTestCase_ae3bc34acf903a0c5a08248e66dea318e}

\begin{DoxyCode}
101 \{
102 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!Build\+Name\+String@{Build\+Name\+String}}
\index{Build\+Name\+String@{Build\+Name\+String}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{Build\+Name\+String(uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint16\+\_\+t tb\+Size)}{BuildNameString(uint16_t nUser, uint16_t dist, uint16_t tbSize)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Lena\+Harq\+Test\+Case\+::\+Build\+Name\+String (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{n\+User, }
\item[{uint16\+\_\+t}]{dist, }
\item[{uint16\+\_\+t}]{tb\+Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLenaHarqTestCase_a6560ccf998d92aba95d60a42c060b023}{}\label{classLenaHarqTestCase_a6560ccf998d92aba95d60a42c060b023}

\begin{DoxyCode}
85 \{
86   std::ostringstream oss;
87   oss << nUser << \textcolor{stringliteral}{" UEs, distance "} << dist << \textcolor{stringliteral}{" m, TB size "} << tbSize;
88   \textcolor{keywordflow}{return} oss.str ();
89 \}
\end{DoxyCode}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lena\+Harq\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLenaHarqTestCase_a77a86faca2ff6021e971516d82ea0533}{}\label{classLenaHarqTestCase_a77a86faca2ff6021e971516d82ea0533}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. Initialize Simulation Scenario\+: 1 e\+NB and m\+\_\+n\+User U\+Es

Check that the assignation is done in a RR fashion

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
106 \{
107 
108   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteAmc::Ber"}, DoubleValue (
      \hyperlink{classLenaHarqTestCase_adbc2a162861957d9858e16556c0988fe}{m\_amcBer}));
109   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteAmc::AmcModel"}, \hyperlink{classns3_1_1EnumValue}{EnumValue} (LteAmc::PiroEW2010));
110   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::CtrlErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
111   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::DataErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
112   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteHelper::UseIdealRrc"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
113   \textcolor{comment}{//Disable Uplink Power Control}
114   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteUePhy::EnableUplinkPowerControl"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
115 
116 \textcolor{comment}{//   Config::SetDefault ("ns3::RrFfMacScheduler::HarqEnabled", BooleanValue (false));}
117 \textcolor{comment}{//   LogComponentEnable ("LteEnbRrc", LOG\_LEVEL\_ALL);}
118 \textcolor{comment}{//   LogComponentEnable ("LteUeRrc", LOG\_LEVEL\_ALL);}
119 \textcolor{comment}{//   LogComponentEnable ("LteEnbMac", LOG\_LEVEL\_ALL);}
120 \textcolor{comment}{//   LogComponentEnable ("LteUeMac", LOG\_LEVEL\_ALL);}
121 \textcolor{comment}{//   LogComponentEnable ("LteRlc", LOG\_LEVEL\_ALL);}
122 \textcolor{comment}{//}
123 \textcolor{comment}{//   LogComponentEnable ("LtePhy", LOG\_LEVEL\_ALL);}
124 \textcolor{comment}{//   LogComponentEnable ("LteEnbPhy", LOG\_LEVEL\_ALL);}
125 \textcolor{comment}{//   LogComponentEnable ("LteUePhy", LOG\_LEVEL\_ALL);}
126 
127 \textcolor{comment}{//   LogComponentEnable ("LteSpectrumPhy", LOG\_LEVEL\_ALL);}
128 \textcolor{comment}{//   LogComponentEnable ("LteInterference", LOG\_LEVEL\_ALL);}
129 \textcolor{comment}{//   LogComponentEnable ("LteChunkProcessor", LOG\_LEVEL\_ALL);}
130 \textcolor{comment}{//}
131 \textcolor{comment}{//   LogComponentEnable ("LtePropagationLossModel", LOG\_LEVEL\_ALL);}
132 \textcolor{comment}{//   LogComponentEnable ("LossModel", LOG\_LEVEL\_ALL);}
133 \textcolor{comment}{//   LogComponentEnable ("ShadowingLossModel", LOG\_LEVEL\_ALL);}
134 \textcolor{comment}{//   LogComponentEnable ("PenetrationLossModel", LOG\_LEVEL\_ALL);}
135 \textcolor{comment}{//   LogComponentEnable ("MultipathLossModel", LOG\_LEVEL\_ALL);}
136 \textcolor{comment}{//   LogComponentEnable ("PathLossModel", LOG\_LEVEL\_ALL);}
137 \textcolor{comment}{//}
138 \textcolor{comment}{//   LogComponentEnable ("LteNetDevice", LOG\_LEVEL\_ALL);}
139 \textcolor{comment}{//   LogComponentEnable ("LteUeNetDevice", LOG\_LEVEL\_ALL);}
140 \textcolor{comment}{//   LogComponentEnable ("LteEnbNetDevice", LOG\_LEVEL\_ALL);}
141 
142 \textcolor{comment}{//   LogComponentEnable ("RrFfMacScheduler", LOG\_LEVEL\_ALL);}
143 \textcolor{comment}{//   LogComponentEnable ("LenaHelper", LOG\_LEVEL\_ALL);}
144 \textcolor{comment}{//   LogComponentEnable ("RlcStatsCalculator", LOG\_LEVEL\_ALL);}
145 
146 
147 \textcolor{comment}{//   LogComponentEnable ("LteSpectrumPhy", LOG\_LEVEL\_ALL);}
148 \textcolor{comment}{//   LogComponentEnable ("LteEnbMac", LOG\_LEVEL\_ALL);}
149 \textcolor{comment}{//   LogComponentEnable ("LteEnbPhy", LOG\_LEVEL\_ALL);}
150 \textcolor{comment}{//   LogComponentEnable ("LteUePhy", LOG\_LEVEL\_ALL);}
151 \textcolor{comment}{//   LogComponentEnable ("RrFfMacScheduler", LOG\_LEVEL\_ALL);}
152 \textcolor{comment}{//   LogComponentEnable ("LenaHelper", LOG\_LEVEL\_ALL);}
153 \textcolor{comment}{//   LogComponentEnable ("BuildingsPropagationLossModel", LOG\_LEVEL\_ALL);}
154 \textcolor{comment}{//   LogComponentEnable ("LteMiErrorModel", LOG\_LEVEL\_ALL);}
155 \textcolor{comment}{//   LogComponentEnable ("LteAmc", LOG\_LEVEL\_ALL);}
156 \textcolor{comment}{//}
157 \textcolor{comment}{//   LogComponentDisableAll (LOG\_LEVEL\_ALL);}
158 
159 \textcolor{comment}{//  LogComponentEnable ("LenaTestHarq", LOG\_LEVEL\_ALL);}
160 
161 
166   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lena = CreateObject<LteHelper> ();
167 
168   \textcolor{comment}{// Create Nodes: eNodeB and UE}
169   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
170   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
171   enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
172   ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (\hyperlink{classLenaHarqTestCase_a63345f1ba9ffc5ab5e8a01ca79d6f0c4}{m\_nUser});
173 
174   \textcolor{comment}{// Install Mobility Model}
175   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
176   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
177   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (enbNodes);
178   BuildingsHelper::Install (enbNodes);
179   
180   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
181   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (ueNodes);
182   BuildingsHelper::Install (ueNodes);
183 
184   \textcolor{comment}{// remove random shadowing component}
185   lena->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PathlossModel"}, StringValue (\textcolor{stringliteral}{"ns3::HybridBuildingsPropagationLossModel"})
      );
186   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaOutdoor"}, DoubleValue (0.0));
187   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaIndoor"}, DoubleValue (0.0));
188   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaExtWalls"}, DoubleValue (0.0));
189 
190   \textcolor{comment}{// Create Devices and install them in the Nodes (eNB and UE)}
191   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbDevs;
192   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueDevs;
193   lena->\hyperlink{classns3_1_1LteHelper_a8f86e55b8b80a81732c4b2df00fb25d5}{SetSchedulerType} (\textcolor{stringliteral}{"ns3::RrFfMacScheduler"});
194   lena->\hyperlink{classns3_1_1LteHelper_a38f8c7f4592b31c0f3dedb53e7909742}{SetSchedulerAttribute} (\textcolor{stringliteral}{"UlCqiFilter"}, \hyperlink{classns3_1_1EnumValue}{EnumValue} (
      FfMacScheduler::PUSCH\_UL\_CQI));
195 
196   enbDevs = lena->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbNodes);
197   ueDevs = lena->\hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ueNodes);
198 
199   \textcolor{comment}{// Attach a UE to a eNB}
200   lena->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueDevs, enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
201 
202   \textcolor{comment}{// Activate an EPS bearer}
203   \textcolor{keyword}{enum} \hyperlink{structns3_1_1EpsBearer_aecf0c67109c5eb4ec0b07226fff5885e}{EpsBearer::Qci} q = EpsBearer::GBR\_CONV\_VOICE;
204   \hyperlink{structns3_1_1EpsBearer}{EpsBearer} bearer (q);
205   lena->\hyperlink{classns3_1_1LteHelper_ac896e16cf162e4beeaa292d39ab1b700}{ActivateDataRadioBearer} (ueDevs, bearer);
206 
207 
208   \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbNetDevice>} lteEnbDev = enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetObject<
      \hyperlink{classns3_1_1LteEnbNetDevice}{LteEnbNetDevice}> ();
209   \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbPhy>} enbPhy = lteEnbDev->\hyperlink{classns3_1_1LteEnbNetDevice_a58db72130e0740f16a5e03b22e4a10a4}{GetPhy} ();
210   enbPhy->SetAttribute (\textcolor{stringliteral}{"TxPower"}, DoubleValue (43.0));
211   enbPhy->SetAttribute (\textcolor{stringliteral}{"NoiseFigure"}, DoubleValue (5.0));
212   \textcolor{comment}{// place the HeNB over the default rooftop level (20 mt.)}
213   \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} mm = enbNodes.Get (0)->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1MobilityModel}{MobilityModel}> ();
214   mm->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0.0, 0.0, 30.0));
215 
216   \textcolor{comment}{// Set UEs' position and power}
217   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classLenaHarqTestCase_a63345f1ba9ffc5ab5e8a01ca79d6f0c4}{m\_nUser}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
218     \{
219       \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} mm = ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1MobilityModel}{MobilityModel}> ();
220       mm->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (\hyperlink{classLenaHarqTestCase_a5663ec9ff3b57db57555bedee9b6544c}{m\_dist}, 0.0, 1.0));
221       \hyperlink{classns3_1_1Ptr}{Ptr<LteUeNetDevice>} lteUeDev = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->GetObject<
      \hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ();
222       \hyperlink{classns3_1_1Ptr}{Ptr<LteUePhy>} uePhy = lteUeDev->\hyperlink{classns3_1_1LteUeNetDevice_a2a9940a1e457a8bf3dae87fed4199c7a}{GetPhy} ();
223       uePhy->SetAttribute (\textcolor{stringliteral}{"TxPower"}, DoubleValue (23.0));
224       uePhy->SetAttribute (\textcolor{stringliteral}{"NoiseFigure"}, DoubleValue (9.0));
225     \}
226 
227 
228   \textcolor{keywordtype}{double} statsStartTime = 0.050; \textcolor{comment}{// need to allow for RRC connection establishment + SRS }
229   \textcolor{keywordtype}{double} statsDuration = 2.0;
230   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsStartTime + statsDuration - 0.0001));
231 
232   lena->\hyperlink{classns3_1_1LteHelper_abadfdd04d30b261e9b6f0846b4784928}{EnableRlcTraces} ();
233   \hyperlink{classns3_1_1Ptr}{Ptr<RadioBearerStatsCalculator>} rlcStats = lena->
      \hyperlink{classns3_1_1LteHelper_a6eb438ccf69642e3863adea4991fa2ca}{GetRlcStats} ();
234   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"StartTime"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsStartTime)));
235   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"EpochDuration"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsDuration)));
236 
237   \textcolor{comment}{// for debugging purposes}
238   lena->\hyperlink{classns3_1_1LteHelper_affa3a12841520407d3662417fe41863d}{EnableMacTraces} ();
239 
240   Simulator::Run ();
241 
245   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tTest on downlink data shared channels (PDSCH)"});
246   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Test with "} << m\_nUser << \textcolor{stringliteral}{" user(s) at distance "} << 
      \hyperlink{classLenaHarqTestCase_a5663ec9ff3b57db57555bedee9b6544c}{m\_dist} << \textcolor{stringliteral}{" expected Thr "} << \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef});
247   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classLenaHarqTestCase_a63345f1ba9ffc5ab5e8a01ca79d6f0c4}{m\_nUser}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
248     \{
249       \textcolor{comment}{// get the imsi}
250       uint64\_t imsi = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->GetObject<\hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ()->GetImsi ();
251       uint8\_t lcId = 3;
252       \textcolor{keywordtype}{double} txed = rlcStats->\hyperlink{classns3_1_1RadioBearerStatsCalculator_a12f2d1946eb125e42611ecdc31079150}{GetDlTxData} (imsi, lcId);
253       \textcolor{keywordtype}{double} rxed = rlcStats->\hyperlink{classns3_1_1RadioBearerStatsCalculator_a80ec1463cd053d8deebda8498d2b864e}{GetDlRxData} (imsi, lcId);
254       \textcolor{keywordtype}{double} tolerance = 0.1;
255 
256       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{" User "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" imsi "} << imsi << \textcolor{stringliteral}{" bytes rxed/t "} << rxed/statsDuration 
      << \textcolor{stringliteral}{" txed/t "} << txed/statsDuration << \textcolor{stringliteral}{" thr Ref "} << \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef} << \textcolor{stringliteral}{" Err "} << (std::abs
       (txed/statsDuration - \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef})) / \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef});
257 
258       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (txed/statsDuration, 
      \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef}, \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef} * tolerance, \textcolor{stringliteral}{" Unexpected Throughput!"});
259       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (rxed/statsDuration, 
      \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef}, \hyperlink{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{m\_throughputRef} * tolerance, \textcolor{stringliteral}{" Unexpected Throughput!"});
260     \}
261 
262 
263   Simulator::Destroy ();
264 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!m\+\_\+amc\+Ber@{m\+\_\+amc\+Ber}}
\index{m\+\_\+amc\+Ber@{m\+\_\+amc\+Ber}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+amc\+Ber}{m_amcBer}}]{\setlength{\rightskip}{0pt plus 5cm}double Lena\+Harq\+Test\+Case\+::m\+\_\+amc\+Ber\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaHarqTestCase_adbc2a162861957d9858e16556c0988fe}{}\label{classLenaHarqTestCase_adbc2a162861957d9858e16556c0988fe}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!m\+\_\+dist@{m\+\_\+dist}}
\index{m\+\_\+dist@{m\+\_\+dist}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+dist}{m_dist}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Harq\+Test\+Case\+::m\+\_\+dist\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaHarqTestCase_a5663ec9ff3b57db57555bedee9b6544c}{}\label{classLenaHarqTestCase_a5663ec9ff3b57db57555bedee9b6544c}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!m\+\_\+n\+User@{m\+\_\+n\+User}}
\index{m\+\_\+n\+User@{m\+\_\+n\+User}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+n\+User}{m_nUser}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Harq\+Test\+Case\+::m\+\_\+n\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaHarqTestCase_a63345f1ba9ffc5ab5e8a01ca79d6f0c4}{}\label{classLenaHarqTestCase_a63345f1ba9ffc5ab5e8a01ca79d6f0c4}
\index{Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}!m\+\_\+throughput\+Ref@{m\+\_\+throughput\+Ref}}
\index{m\+\_\+throughput\+Ref@{m\+\_\+throughput\+Ref}!Lena\+Harq\+Test\+Case@{Lena\+Harq\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+throughput\+Ref}{m_throughputRef}}]{\setlength{\rightskip}{0pt plus 5cm}double Lena\+Harq\+Test\+Case\+::m\+\_\+throughput\+Ref\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}{}\label{classLenaHarqTestCase_a041c5b33791e34cdfa46c79235f6ac77}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/test/\hyperlink{lte-test-harq_8h}{lte-\/test-\/harq.\+h}\item 
lte/test/\hyperlink{lte-test-harq_8cc}{lte-\/test-\/harq.\+cc}\end{DoxyCompactItemize}
