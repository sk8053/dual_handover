\hypertarget{classTcpRttEstimationTest}{}\section{Tcp\+Rtt\+Estimation\+Test Class Reference}
\label{classTcpRttEstimationTest}\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}


Check Rtt calculations.  




Inheritance diagram for Tcp\+Rtt\+Estimation\+Test\+:
% FIG 0


Collaboration diagram for Tcp\+Rtt\+Estimation\+Test\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTcpRttEstimationTest_a0a263ad6e8dae777597b9d18203e6231}{Tcp\+Rtt\+Estimation\+Test} (const std\+::string \&desc, bool enable\+Ts, uint32\+\_\+t pkt\+Count)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketMsgBase}{Tcp\+Socket\+Msg\+Base} $>$ \hyperlink{classTcpRttEstimationTest_ad28cb87b3ee874008937ff5158980e3d}{Create\+Receiver\+Socket} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ node)
\begin{DoxyCompactList}\small\item\em Create and install the socket to install on the receiver. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketMsgBase}{Tcp\+Socket\+Msg\+Base} $>$ \hyperlink{classTcpRttEstimationTest_a9b84db1757b8702294bc1310160adc44}{Create\+Sender\+Socket} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ node)
\begin{DoxyCompactList}\small\item\em Create and install the socket to install on the sender. \end{DoxyCompactList}\item 
virtual void \hyperlink{classTcpRttEstimationTest_ae9ca082b1475694ea29c540497bd7846}{Rx} (const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&h, \hyperlink{classns3_1_1TcpGeneralTest_a29338e6b7137cad650c2ff835713f6ee}{Socket\+Who} who)
\begin{DoxyCompactList}\small\item\em Packet received from IP layer. \end{DoxyCompactList}\item 
virtual void \hyperlink{classTcpRttEstimationTest_ab5ad5c4ad8bb1fc46cc6eedd9a36bca5}{Tx} (const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&h, \hyperlink{classns3_1_1TcpGeneralTest_a29338e6b7137cad650c2ff835713f6ee}{Socket\+Who} who)
\begin{DoxyCompactList}\small\item\em Packet transmitted down to IP layer. \end{DoxyCompactList}\item 
virtual void \hyperlink{classTcpRttEstimationTest_aa27a4399fbfaeb029a05357c3b83c292}{Updated\+Rtt\+History} (const \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \&seq, uint32\+\_\+t sz, bool is\+Retransmission, \hyperlink{classns3_1_1TcpGeneralTest_a29338e6b7137cad650c2ff835713f6ee}{Socket\+Who} who)
\begin{DoxyCompactList}\small\item\em Updated the Rtt history. \end{DoxyCompactList}\item 
virtual void \hyperlink{classTcpRttEstimationTest_a6ee6478809b03802883fe70ff61a5816}{Rtt\+Trace} (\hyperlink{classns3_1_1Time}{Time} old\+Time, \hyperlink{classns3_1_1Time}{Time} new\+Time)
\begin{DoxyCompactList}\small\item\em Rtt changes. \end{DoxyCompactList}\item 
void \hyperlink{classTcpRttEstimationTest_af57fb1c07f68644231c4c1d9b81ebaf6}{Final\+Checks} ()
\begin{DoxyCompactList}\small\item\em Performs the (eventual) final checks through test asserts. \end{DoxyCompactList}\item 
virtual void \hyperlink{classTcpRttEstimationTest_a2f03b64bf5e45e2c66446fe8887685a2}{Configure\+Environment} ()
\begin{DoxyCompactList}\small\item\em Change the configuration of the evironment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classTcpRttEstimationTest_a38fddc898bc183558475f0eff7f6ae1a}{m\+\_\+enable\+Ts}
\begin{DoxyCompactList}\small\item\em Enable Time\+Stamp option. \end{DoxyCompactList}\item 
bool \hyperlink{classTcpRttEstimationTest_a5282ebae2ff937ed719a965467637fcd}{m\+\_\+rtt\+Changed}
\begin{DoxyCompactList}\small\item\em True if R\+TT has changed. \end{DoxyCompactList}\item 
\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \hyperlink{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{m\+\_\+highest\+Tx\+Seq}
\begin{DoxyCompactList}\small\item\em Highest sequence number sent. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpRttEstimationTest_a4d52bd083094492d32dd4d57e77779ca}{m\+\_\+pkt\+Count}
\begin{DoxyCompactList}\small\item\em Packet counter. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}{m\+\_\+data\+Count}
\begin{DoxyCompactList}\small\item\em Data counter. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Check Rtt calculations. 

First check is that, for each A\+CK, we have a valid estimation of the R\+TT. The second check is that, when updating R\+TT history, we should consider retransmission only segments which sequence number is lower than the highest already transmitted. 

\subsection{Constructor \& Destructor Documentation}
\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Tcp\+Rtt\+Estimation\+Test(const std\+::string \&desc, bool enable\+Ts, uint32\+\_\+t pkt\+Count)}{TcpRttEstimationTest(const std::string &desc, bool enableTs, uint32_t pktCount)}}]{\setlength{\rightskip}{0pt plus 5cm}Tcp\+Rtt\+Estimation\+Test\+::\+Tcp\+Rtt\+Estimation\+Test (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{desc, }
\item[{bool}]{enable\+Ts, }
\item[{uint32\+\_\+t}]{pkt\+Count}
\end{DoxyParamCaption}
)}\hypertarget{classTcpRttEstimationTest_a0a263ad6e8dae777597b9d18203e6231}{}\label{classTcpRttEstimationTest_a0a263ad6e8dae777597b9d18203e6231}


Constructor. 


\begin{DoxyParams}{Parameters}
{\em desc} & Test description. \\
\hline
{\em enable\+Ts} & Enable Time\+Stamp option. \\
\hline
{\em pkt\+Count} & Packet number. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
74   : \hyperlink{classns3_1_1TcpGeneralTest_aed700e733bc50b1e736cb52c0b71f3f8}{TcpGeneralTest} (desc),
75     \hyperlink{classTcpRttEstimationTest_a38fddc898bc183558475f0eff7f6ae1a}{m\_enableTs} (enableTs),
76     \hyperlink{classTcpRttEstimationTest_a5282ebae2ff937ed719a965467637fcd}{m\_rttChanged} (\textcolor{keyword}{false}),
77     \hyperlink{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{m\_highestTxSeq} (0),
78     \hyperlink{classTcpRttEstimationTest_a4d52bd083094492d32dd4d57e77779ca}{m\_pktCount} (pktCount),
79     \hyperlink{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}{m\_dataCount} (0)
80 \{
81 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Configure\+Environment@{Configure\+Environment}}
\index{Configure\+Environment@{Configure\+Environment}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Configure\+Environment()}{ConfigureEnvironment()}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Rtt\+Estimation\+Test\+::\+Configure\+Environment (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_a2f03b64bf5e45e2c66446fe8887685a2}{}\label{classTcpRttEstimationTest_a2f03b64bf5e45e2c66446fe8887685a2}


Change the configuration of the evironment. 



Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_abd4e42807a8d2b13dcd207131af12c3b}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
85 \{
86   TcpGeneralTest::ConfigureEnvironment ();
87   \hyperlink{classns3_1_1TcpGeneralTest_a256c8df5966f89ed0acfc966cd5d3898}{SetAppPktCount} (\hyperlink{classTcpRttEstimationTest_a4d52bd083094492d32dd4d57e77779ca}{m\_pktCount});
88   \hyperlink{classns3_1_1TcpGeneralTest_a167056795264e377b425cdac2441b263}{SetPropagationDelay} (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (50));
89   \hyperlink{classns3_1_1TcpGeneralTest_af8d94d931bd7377ff0267a7ce1edc74d}{SetTransmitStart} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2.0));
90   \hyperlink{classns3_1_1TcpGeneralTest_a892d917a99ab3ce285e7ffec4eac743f}{SetMTU} (500);
91 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Create\+Receiver\+Socket@{Create\+Receiver\+Socket}}
\index{Create\+Receiver\+Socket@{Create\+Receiver\+Socket}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Create\+Receiver\+Socket(\+Ptr$<$ Node $>$ node)}{CreateReceiverSocket(Ptr< Node > node)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Tcp\+Socket\+Msg\+Base} $>$ Tcp\+Rtt\+Estimation\+Test\+::\+Create\+Receiver\+Socket (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{node}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_ad28cb87b3ee874008937ff5158980e3d}{}\label{classTcpRttEstimationTest_ad28cb87b3ee874008937ff5158980e3d}


Create and install the socket to install on the receiver. 


\begin{DoxyParams}{Parameters}
{\em node} & receiver node pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the socket to be installed in the receiver 
\end{DoxyReturn}


Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_a5f2bfe5673d80704ec6608badf7c1c6e}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
95 \{
96   \hyperlink{classns3_1_1Ptr}{Ptr<TcpSocketMsgBase>} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = TcpGeneralTest::CreateReceiverSocket (node);
97   \textcolor{keywordflow}{if} (!\hyperlink{classTcpRttEstimationTest_a38fddc898bc183558475f0eff7f6ae1a}{m\_enableTs})
98     \{
99       s->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Timestamp"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
100     \}
101 
102   \textcolor{keywordflow}{return} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
103 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Create\+Sender\+Socket@{Create\+Sender\+Socket}}
\index{Create\+Sender\+Socket@{Create\+Sender\+Socket}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Create\+Sender\+Socket(\+Ptr$<$ Node $>$ node)}{CreateSenderSocket(Ptr< Node > node)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Tcp\+Socket\+Msg\+Base} $>$ Tcp\+Rtt\+Estimation\+Test\+::\+Create\+Sender\+Socket (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{node}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_a9b84db1757b8702294bc1310160adc44}{}\label{classTcpRttEstimationTest_a9b84db1757b8702294bc1310160adc44}


Create and install the socket to install on the sender. 


\begin{DoxyParams}{Parameters}
{\em node} & sender node pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the socket to be installed in the sender 
\end{DoxyReturn}


Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_a0476c37d8a08b42d42f6ea2634eece70}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
107 \{
108   \hyperlink{classns3_1_1Ptr}{Ptr<TcpSocketMsgBase>} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = TcpGeneralTest::CreateSenderSocket (node);
109   \textcolor{keywordflow}{if} (!\hyperlink{classTcpRttEstimationTest_a38fddc898bc183558475f0eff7f6ae1a}{m\_enableTs})
110     \{
111       s->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Timestamp"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
112     \}
113 
114   \textcolor{keywordflow}{return} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
115 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Final\+Checks@{Final\+Checks}}
\index{Final\+Checks@{Final\+Checks}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Final\+Checks()}{FinalChecks()}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Rtt\+Estimation\+Test\+::\+Final\+Checks (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_af57fb1c07f68644231c4c1d9b81ebaf6}{}\label{classTcpRttEstimationTest_af57fb1c07f68644231c4c1d9b81ebaf6}


Performs the (eventual) final checks through test asserts. 



Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_ada871cedd37de404288f163b6f8dea39}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
181 \{
182   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classTcpRttEstimationTest_a5282ebae2ff937ed719a965467637fcd}{m\_rttChanged}, \textcolor{keyword}{true}, \textcolor{stringliteral}{"Rtt was not updated"});
183 \}
\end{DoxyCode}
\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Rtt\+Trace@{Rtt\+Trace}}
\index{Rtt\+Trace@{Rtt\+Trace}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Rtt\+Trace(\+Time old\+Time, Time new\+Time)}{RttTrace(Time oldTime, Time newTime)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Rtt\+Estimation\+Test\+::\+Rtt\+Trace (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{old\+Time, }
\item[{{\bf Time}}]{new\+Time}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_a6ee6478809b03802883fe70ff61a5816}{}\label{classTcpRttEstimationTest_a6ee6478809b03802883fe70ff61a5816}


Rtt changes. 

This applies only for sender socket.


\begin{DoxyParams}{Parameters}
{\em old\+Time} & old value \\
\hline
{\em new\+Time} & new value \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_af6dc2fcbb42268b3dcf5b3897564edf2}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
174 \{
175   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Rtt changed to "} << newTime.\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} ());
176   \hyperlink{classTcpRttEstimationTest_a5282ebae2ff937ed719a965467637fcd}{m\_rttChanged} = \textcolor{keyword}{true};
177 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Rx@{Rx}}
\index{Rx@{Rx}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Rx(const Ptr$<$ const Packet $>$ p, const Tcp\+Header \&h, Socket\+Who who)}{Rx(const Ptr< const Packet > p, const TcpHeader &h, SocketWho who)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Rtt\+Estimation\+Test\+::\+Rx (
\begin{DoxyParamCaption}
\item[{const {\bf Ptr}$<$ const {\bf Packet} $>$}]{p, }
\item[{const {\bf Tcp\+Header} \&}]{h, }
\item[{{\bf Socket\+Who}}]{who}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_ae9ca082b1475694ea29c540497bd7846}{}\label{classTcpRttEstimationTest_ae9ca082b1475694ea29c540497bd7846}


Packet received from IP layer. 


\begin{DoxyParams}{Parameters}
{\em p} & packet \\
\hline
{\em h} & header \\
\hline
{\em who} & the socket which has received the packet (S\+E\+N\+D\+ER or R\+E\+C\+E\+I\+V\+ER) \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_ab4744fb3cbeb09405e2debc943c01c3a}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
138 \{
139   \textcolor{keywordflow}{if} (who == \hyperlink{classns3_1_1TcpGeneralTest_a29338e6b7137cad650c2ff835713f6eea2a9a39a8fe1edd25b643a48956b8ecff}{RECEIVER})
140     \{
141       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"R Rx: seq="} << h.\hyperlink{classns3_1_1TcpHeader_a1081077eaf9bc64e9af909cebd128ae5}{GetSequenceNumber} () << \textcolor{stringliteral}{" ack="} << h.
      \hyperlink{classns3_1_1TcpHeader_a76e832a86b88ffd2f23c2e246b8fa0f3}{GetAckNumber} ());
142     \}
143 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Tx@{Tx}}
\index{Tx@{Tx}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Tx(const Ptr$<$ const Packet $>$ p, const Tcp\+Header \&h, Socket\+Who who)}{Tx(const Ptr< const Packet > p, const TcpHeader &h, SocketWho who)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Rtt\+Estimation\+Test\+::\+Tx (
\begin{DoxyParamCaption}
\item[{const {\bf Ptr}$<$ const {\bf Packet} $>$}]{p, }
\item[{const {\bf Tcp\+Header} \&}]{h, }
\item[{{\bf Socket\+Who}}]{who}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_ab5ad5c4ad8bb1fc46cc6eedd9a36bca5}{}\label{classTcpRttEstimationTest_ab5ad5c4ad8bb1fc46cc6eedd9a36bca5}


Packet transmitted down to IP layer. 


\begin{DoxyParams}{Parameters}
{\em p} & packet \\
\hline
{\em h} & header \\
\hline
{\em who} & the socket which has received the packet (S\+E\+N\+D\+ER or R\+E\+C\+E\+I\+V\+ER) \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_ae3ae1d4a08bd0337cf66ef34d4771d89}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
119 \{
120   \textcolor{keywordflow}{if} (who == \hyperlink{classns3_1_1TcpGeneralTest_a29338e6b7137cad650c2ff835713f6eea5400e3d6b26928cf9e67ebb026462256}{SENDER} && h.\hyperlink{classns3_1_1TcpHeader_a0d04c5620ee147d4e01d56b9530e8db1}{GetFlags} () != TcpHeader::SYN)
121     \{
122       \textcolor{keywordflow}{if} (\hyperlink{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{m\_highestTxSeq} < h.\hyperlink{classns3_1_1TcpHeader_a1081077eaf9bc64e9af909cebd128ae5}{GetSequenceNumber} ())
123         \{
124           \hyperlink{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{m\_highestTxSeq} = h.\hyperlink{classns3_1_1TcpHeader_a1081077eaf9bc64e9af909cebd128ae5}{GetSequenceNumber} ();
125           \hyperlink{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}{m\_dataCount} = 0;
126         \}
127 
128       \hyperlink{classns3_1_1Ptr}{Ptr<RttEstimator>} rttEstimator = \hyperlink{classns3_1_1TcpGeneralTest_a046965a7dd34cdb77c1403a3fb55ba54}{GetRttEstimator} (
      \hyperlink{classns3_1_1TcpGeneralTest_a29338e6b7137cad650c2ff835713f6eea5400e3d6b26928cf9e67ebb026462256}{SENDER});
129       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (rttEstimator != 0);
130       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"S Tx: seq="} << h.\hyperlink{classns3_1_1TcpHeader_a1081077eaf9bc64e9af909cebd128ae5}{GetSequenceNumber} () << \textcolor{stringliteral}{" ack="} << h.
      \hyperlink{classns3_1_1TcpHeader_a76e832a86b88ffd2f23c2e246b8fa0f3}{GetAckNumber} ());
131       \hyperlink{group__testing_ga73d66fb0050a5111453fd144e767b91a}{NS\_TEST\_ASSERT\_MSG\_NE} (rttEstimator->\hyperlink{classns3_1_1RttEstimator_a11f575ae2d843d2f9d94842dd739e3d3}{GetEstimate} (), 
      \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1),
132                              \textcolor{stringliteral}{"Default Estimate for the RTT"});
133     \}
134 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!Updated\+Rtt\+History@{Updated\+Rtt\+History}}
\index{Updated\+Rtt\+History@{Updated\+Rtt\+History}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{Updated\+Rtt\+History(const Sequence\+Number32 \&seq, uint32\+\_\+t sz, bool is\+Retransmission, Socket\+Who who)}{UpdatedRttHistory(const SequenceNumber32 &seq, uint32_t sz, bool isRetransmission, SocketWho who)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Rtt\+Estimation\+Test\+::\+Updated\+Rtt\+History (
\begin{DoxyParamCaption}
\item[{const {\bf Sequence\+Number32} \&}]{seq, }
\item[{uint32\+\_\+t}]{sz, }
\item[{bool}]{is\+Retransmission, }
\item[{{\bf Socket\+Who}}]{who}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classTcpRttEstimationTest_aa27a4399fbfaeb029a05357c3b83c292}{}\label{classTcpRttEstimationTest_aa27a4399fbfaeb029a05357c3b83c292}


Updated the Rtt history. 


\begin{DoxyParams}{Parameters}
{\em seq} & Sequence inserted \\
\hline
{\em sz} & size \\
\hline
{\em is\+Retransmission} & self-\/explanatory \\
\hline
{\em who} & where the rtt history was updated \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1TcpGeneralTest_a76d3d48cdce7914920506a695bead8dd}{ns3\+::\+Tcp\+General\+Test}.


\begin{DoxyCode}
148 \{
149   \textcolor{keywordflow}{if} (sz == 0)
150     \{
151       \textcolor{keywordflow}{return};
152     \}
153 
154   \textcolor{keywordflow}{if} (seq < \hyperlink{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{m\_highestTxSeq})
155     \{
156       \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (isRetransmission, \textcolor{keyword}{true},
157                              \textcolor{stringliteral}{"A retransmission is not flagged as such"});
158     \}
159   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seq == \hyperlink{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{m\_highestTxSeq} && \hyperlink{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}{m\_dataCount} == 0)
160     \{
161       \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (isRetransmission, \textcolor{keyword}{false},
162                              \textcolor{stringliteral}{"Incorrectly flagging seq as retransmission"});
163       \hyperlink{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}{m\_dataCount}++;
164     \}
165   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seq == \hyperlink{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{m\_highestTxSeq} && \hyperlink{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}{m\_dataCount} > 0)
166     \{
167       \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (isRetransmission, \textcolor{keyword}{true},
168                              \textcolor{stringliteral}{"A retransmission is not flagged as such"});
169     \}
170 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!m\+\_\+data\+Count@{m\+\_\+data\+Count}}
\index{m\+\_\+data\+Count@{m\+\_\+data\+Count}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+data\+Count}{m_dataCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Rtt\+Estimation\+Test\+::m\+\_\+data\+Count\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}{}\label{classTcpRttEstimationTest_afc3c949430c9dddc0c6d761d3d8ebf30}


Data counter. 

\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!m\+\_\+enable\+Ts@{m\+\_\+enable\+Ts}}
\index{m\+\_\+enable\+Ts@{m\+\_\+enable\+Ts}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+enable\+Ts}{m_enableTs}}]{\setlength{\rightskip}{0pt plus 5cm}bool Tcp\+Rtt\+Estimation\+Test\+::m\+\_\+enable\+Ts\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpRttEstimationTest_a38fddc898bc183558475f0eff7f6ae1a}{}\label{classTcpRttEstimationTest_a38fddc898bc183558475f0eff7f6ae1a}


Enable Time\+Stamp option. 

\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!m\+\_\+highest\+Tx\+Seq@{m\+\_\+highest\+Tx\+Seq}}
\index{m\+\_\+highest\+Tx\+Seq@{m\+\_\+highest\+Tx\+Seq}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+highest\+Tx\+Seq}{m_highestTxSeq}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sequence\+Number32} Tcp\+Rtt\+Estimation\+Test\+::m\+\_\+highest\+Tx\+Seq\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}{}\label{classTcpRttEstimationTest_a3c08a5a07c9dc4c9c85c6d8fe4f7ca68}


Highest sequence number sent. 

\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!m\+\_\+pkt\+Count@{m\+\_\+pkt\+Count}}
\index{m\+\_\+pkt\+Count@{m\+\_\+pkt\+Count}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+pkt\+Count}{m_pktCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Rtt\+Estimation\+Test\+::m\+\_\+pkt\+Count\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpRttEstimationTest_a4d52bd083094492d32dd4d57e77779ca}{}\label{classTcpRttEstimationTest_a4d52bd083094492d32dd4d57e77779ca}


Packet counter. 

\index{Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}!m\+\_\+rtt\+Changed@{m\+\_\+rtt\+Changed}}
\index{m\+\_\+rtt\+Changed@{m\+\_\+rtt\+Changed}!Tcp\+Rtt\+Estimation\+Test@{Tcp\+Rtt\+Estimation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+rtt\+Changed}{m_rttChanged}}]{\setlength{\rightskip}{0pt plus 5cm}bool Tcp\+Rtt\+Estimation\+Test\+::m\+\_\+rtt\+Changed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpRttEstimationTest_a5282ebae2ff937ed719a965467637fcd}{}\label{classTcpRttEstimationTest_a5282ebae2ff937ed719a965467637fcd}


True if R\+TT has changed. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{tcp-rtt-estimation_8cc}{tcp-\/rtt-\/estimation.\+cc}\end{DoxyCompactItemize}
