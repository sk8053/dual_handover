\hypertarget{classns3_1_1FdTbfqFfMacScheduler}{}\section{ns3\+:\+:Fd\+Tbfq\+Ff\+Mac\+Scheduler Class Reference}
\label{classns3_1_1FdTbfqFfMacScheduler}\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}


Implements the S\+C\+H\+ED S\+AP and C\+S\+C\+H\+ED S\+AP for a Frequency Domain Token Bank Fair \hyperlink{classns3_1_1Queue}{Queue} scheduler.  




{\ttfamily \#include $<$fdtbfq-\/ff-\/mac-\/scheduler.\+h$>$}



Inheritance diagram for ns3\+:\+:Fd\+Tbfq\+Ff\+Mac\+Scheduler\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Fd\+Tbfq\+Ff\+Mac\+Scheduler\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac477fe3176012b8f47af380d23ae8cb2}{Fd\+Tbfq\+Ff\+Mac\+Scheduler} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a29f7c9ac864edbbd764276b3d0134479}{$\sim$\+Fd\+Tbfq\+Ff\+Mac\+Scheduler} ()
\item 
virtual void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a431a7360f10d11e0c015761b460e680a}{Do\+Dispose} (void)
\item 
virtual void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a7c2df3221f0ace874b71a8a39b3b422d}{Set\+Ff\+Mac\+Csched\+Sap\+User} (\hyperlink{classns3_1_1FfMacCschedSapUser}{Ff\+Mac\+Csched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a012f67d3f10f63ed3c0899907cf2f0c1}{Set\+Ff\+Mac\+Sched\+Sap\+User} (\hyperlink{classns3_1_1FfMacSchedSapUser}{Ff\+Mac\+Sched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1FfMacCschedSapProvider}{Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aba8a28cd9c3a16dda5b631baa1d9fa6e}{Get\+Ff\+Mac\+Csched\+Sap\+Provider} ()
\item 
virtual \hyperlink{classns3_1_1FfMacSchedSapProvider}{Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8e16f360bc391ebcf0a9c65df7227517}{Get\+Ff\+Mac\+Sched\+Sap\+Provider} ()
\item 
virtual void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4f73838dc00dc8e3df05c138bfbee369}{Set\+Lte\+Ffr\+Sap\+Provider} (\hyperlink{classns3_1_1LteFfrSapProvider}{Lte\+Ffr\+Sap\+Provider} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1LteFfrSapUser}{Lte\+Ffr\+Sap\+User} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_af7a2c7fdac3cf75075c2c8a29ab37d7b}{Get\+Lte\+Ffr\+Sap\+User} ()
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8fa3d7ac241a7ebcdb0132790d2bde65}{Transmission\+Mode\+Configuration\+Update} (uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a677e3b83d8d192546172a2404403640a}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abeea694d2a927c5951883d0fa191eee2}{Do\+Csched\+Cell\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4c2c063c40940a66304afd8b83d26057}{Do\+Csched\+Ue\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0b42adffae3cb20dc71f8e3a101ee2bc}{Do\+Csched\+Lc\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_afcb81e1ad81fbec96983390d86195045}{Do\+Csched\+Lc\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a316cc7318dd419590ae7d85befa50e83}{Do\+Csched\+Ue\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a81de99be98edf820a323dd4644c14fa6}{Do\+Sched\+Dl\+Rlc\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRlcBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a7170de1fb11e75b418444267520aad15}{Do\+Sched\+Dl\+Paging\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlPagingBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad366bd77d323fd505272e4df786fba05}{Do\+Sched\+Dl\+Mac\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlMacBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aca7deb47b0377b1facea6c6378ba2ec7}{Do\+Sched\+Dl\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a46d334a998f73d0a8a9f0efaf2779b8e}{Do\+Sched\+Dl\+Rach\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRachInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a6e1f3a4a2430b020061624a8ac875a84}{Do\+Sched\+Dl\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a393439d7b65f01d14f335b1cf3fc8423}{Do\+Sched\+Ul\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a98a457d2928d95c0d3f759abf37c2e01}{Do\+Sched\+Ul\+Noise\+Interference\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlNoiseInterferenceReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa9c40fa29197361fa5b1c43c1407725d}{Do\+Sched\+Ul\+Sr\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlSrInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a722a8c6f2a83857d47e941bdad36d73f}{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlMacCtrlInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15711a9aaa411036ac353d1688170c58}{Do\+Sched\+Ul\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
int \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aee50f9f1c073802906068329c43811f1}{Get\+Rbg\+Size} (int dlbandwidth)
\item 
int \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a606f29c62ab153d6a584da5371070045}{Lc\+Active\+Per\+Flow} (uint16\+\_\+t rnti)
\item 
double \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a796f3c39b9129b67c429d9d122525ae0}{Estimate\+Ul\+Sinr} (uint16\+\_\+t rnti, uint16\+\_\+t rb)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a45264dfea612218caa30fa414ea7989c}{Refresh\+Dl\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad2dfae20e850223f711180ab3a900cfd}{Refresh\+Ul\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5c2d153f27717df1f7c8627a387c337f}{Update\+Dl\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)
\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aecdd6c2d6176edebe823a9cb22dfb317}{Update\+Ul\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint16\+\_\+t size)
\item 
uint8\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e807a88411774f9552f3b394de16b57}{Update\+Harq\+Process\+Id} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Update and return a new process Id for the R\+N\+TI specified. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad6dba4921f9a502a6c02d1f9095f0a17}{Harq\+Process\+Availability} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Return the availability of free process for the R\+N\+TI specified. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3c8688dfe09de01251cc4d15a4f620c6}{Refresh\+Harq\+Processes} ()
\begin{DoxyCompactList}\small\item\em Refresh H\+A\+RQ processes according to the timers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LteAmc}{Lte\+Amc} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\+\_\+amc}
\item 
std\+::map$<$ \hyperlink{structns3_1_1LteFlowId__t}{Lte\+Flow\+Id\+\_\+t}, \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRlcBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\+\_\+rlc\+Buffer\+Req}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1fdtbfqsFlowPerf__t}{fdtbfqs\+Flow\+Perf\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\+\_\+flow\+Stats\+Dl}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1fdtbfqsFlowPerf__t}{fdtbfqs\+Flow\+Perf\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a104df6ff96dc70c7daeffa99ca042f96}{m\+\_\+flow\+Stats\+Ul}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{m\+\_\+p10\+Cqi\+Rxed}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}{m\+\_\+p10\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1SbMeasResult__s}{Sb\+Meas\+Result\+\_\+s} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\+\_\+a30\+Cqi\+Rxed}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}{m\+\_\+a30\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ uint16\+\_\+t $>$ $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}{m\+\_\+allocation\+Maps}
\item 
std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ double $>$ $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\+\_\+ue\+Cqi}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\+\_\+ue\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\+\_\+ce\+Bsr\+Rxed}
\item 
\hyperlink{classns3_1_1FfMacCschedSapUser}{Ff\+Mac\+Csched\+Sap\+User} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7f6560bf03534df3702164a74da8309}{m\+\_\+csched\+Sap\+User}
\item 
\hyperlink{classns3_1_1FfMacSchedSapUser}{Ff\+Mac\+Sched\+Sap\+User} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{m\+\_\+sched\+Sap\+User}
\item 
\hyperlink{classns3_1_1FfMacCschedSapProvider}{Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab9204a4d0edccb863de0f60b2d818c4d}{m\+\_\+csched\+Sap\+Provider}
\item 
\hyperlink{classns3_1_1FfMacSchedSapProvider}{Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac42b10eec7e048dc14078359273ffeeb}{m\+\_\+sched\+Sap\+Provider}
\item 
\hyperlink{classns3_1_1LteFfrSapUser}{Lte\+Ffr\+Sap\+User} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a33331ad1347d0db07f6b6bce134ff7bf}{m\+\_\+ffr\+Sap\+User}
\item 
\hyperlink{classns3_1_1LteFfrSapProvider}{Lte\+Ffr\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\+\_\+ffr\+Sap\+Provider}
\item 
\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\+\_\+csched\+Cell\+Config}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\+\_\+next\+Rnti\+Ul}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\+\_\+cqi\+Timers\+Threshold}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\+\_\+ues\+Tx\+Mode}
\item 
uint64\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bank\+Size}
\item 
int \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa73b1800df86289d9a1fc49886c9a175}{m\+\_\+debt\+Limit}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa390b2d541c6190fd44f6457fe006a38}{m\+\_\+credit\+Limit}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0f729f9c65abdbcd28f36269f501fe14}{m\+\_\+token\+Pool\+Size}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a581771a634fa44e3e817131accd9db1f}{m\+\_\+creditable\+Threshold}
\item 
bool \hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\+\_\+harq\+On}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{m\+\_\+dl\+Harq\+Current\+Process\+Id}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a457b3571b67ff17d042e9894e90e2ce2}{Dl\+Harq\+Processes\+Status\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\+\_\+dl\+Harq\+Processes\+Status}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a39413ade536de4b1c82d6c0074cc703e}{Dl\+Harq\+Processes\+Timer\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\+\_\+dl\+Harq\+Processes\+Timer}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_af25599bf8f9f564075c005759c9af18c}{Dl\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a4c0cbd1e72f1c667f8b5879655f13210}{Dl\+Harq\+Rlc\+Pdu\+List\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}
\item 
std\+::vector$<$ \hyperlink{structns3_1_1DlInfoListElement__s}{Dl\+Info\+List\+Element\+\_\+s} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\+\_\+dl\+Info\+List\+Buffered}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\+\_\+ul\+Harq\+Current\+Process\+Id}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_af765c4daaafe4ea4809c1041fc196629}{Ul\+Harq\+Processes\+Status\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\+\_\+ul\+Harq\+Processes\+Status}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a042cbd6bf67e73911cba35b8c070223d}{Ul\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}
\item 
std\+::vector$<$ struct \hyperlink{structns3_1_1RachListElement__s}{Rach\+List\+Element\+\_\+s} $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0d2d08dad69997d048c8d35b5dac76e7}{m\+\_\+rach\+List}
\item 
std\+::vector$<$ uint16\+\_\+t $>$ \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{m\+\_\+rach\+Allocation\+Map}
\item 
uint8\+\_\+t \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{m\+\_\+ul\+Grant\+Mcs}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4b513a821c5c70c5027baa42b42bfd22}{Fd\+Tbfq\+Scheduler\+Member\+Csched\+Sap\+Provider}
\item 
class \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15ddf7b82e9a0e193c9b8c83bedebf96}{Fd\+Tbfq\+Scheduler\+Member\+Sched\+Sap\+Provider}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Implements the S\+C\+H\+ED S\+AP and C\+S\+C\+H\+ED S\+AP for a Frequency Domain Token Bank Fair \hyperlink{classns3_1_1Queue}{Queue} scheduler. 

This class implements the interface defined by the \hyperlink{classns3_1_1FfMacScheduler}{Ff\+Mac\+Scheduler} abstract class 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Fd\+Tbfq\+Ff\+Mac\+Scheduler@{Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\index{Fd\+Tbfq\+Ff\+Mac\+Scheduler@{Fd\+Tbfq\+Ff\+Mac\+Scheduler}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Fd\+Tbfq\+Ff\+Mac\+Scheduler()}{FdTbfqFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ac477fe3176012b8f47af380d23ae8cb2}{}\label{classns3_1_1FdTbfqFfMacScheduler_ac477fe3176012b8f47af380d23ae8cb2}


Constructor. 

Creates the M\+AC \hyperlink{classns3_1_1Scheduler}{Scheduler} interface implementation 
\begin{DoxyCode}
218   :   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7f6560bf03534df3702164a74da8309}{m\_cschedSapUser} (0),
219     \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{m\_schedSapUser} (0),
220     \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl} (0),
221     \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} (0)
222 \{
223   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc} = CreateObject <LteAmc> ();
224   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab9204a4d0edccb863de0f60b2d818c4d}{m\_cschedSapProvider} = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4b513a821c5c70c5027baa42b42bfd22}{FdTbfqSchedulerMemberCschedSapProvider} (\textcolor{keyword}{this});
225   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac42b10eec7e048dc14078359273ffeeb}{m\_schedSapProvider} = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15ddf7b82e9a0e193c9b8c83bedebf96}{FdTbfqSchedulerMemberSchedSapProvider} (\textcolor{keyword}{this});
226   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider} = 0;
227   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a33331ad1347d0db07f6b6bce134ff7bf}{m\_ffrSapUser} = \textcolor{keyword}{new} MemberLteFfrSapUser<FdTbfqFfMacScheduler> (\textcolor{keyword}{this});
228 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!````~Fd\+Tbfq\+Ff\+Mac\+Scheduler@{$\sim$\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\index{````~Fd\+Tbfq\+Ff\+Mac\+Scheduler@{$\sim$\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{$\sim$\+Fd\+Tbfq\+Ff\+Mac\+Scheduler()}{~FdTbfqFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::$\sim$\+Fd\+Tbfq\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a29f7c9ac864edbbd764276b3d0134479}{}\label{classns3_1_1FdTbfqFfMacScheduler_a29f7c9ac864edbbd764276b3d0134479}
Destructor 
\begin{DoxyCode}
231 \{
232   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
233 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}}
\index{Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Cell\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters \&params)}{DoCschedCellConfigReq(const struct FfMacCschedSapProvider::CschedCellConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Cell\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_abeea694d2a927c5951883d0fa191eee2}{}\label{classns3_1_1FdTbfqFfMacScheduler_abeea694d2a927c5951883d0fa191eee2}

\begin{DoxyCode}
338 \{
339   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
340   \textcolor{comment}{// Read the subset of parameters used}
341   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig} = params;
342   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
343   FfMacCschedSapUser::CschedUeConfigCnfParameters cnf;
344   cnf.m\_result = \hyperlink{namespacens3_a7acf2b7f9e0781dfe43a6bc54d6ecd07a4e8f5e8f6e514152d0a9fbd6b1607fd0}{SUCCESS};
345   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7f6560bf03534df3702164a74da8309}{m\_cschedSapUser}->\hyperlink{classns3_1_1FfMacCschedSapUser_aecc852478a4ba7e4cd868dae75e01b68}{CschedUeConfigCnf} (cnf);
346   \textcolor{keywordflow}{return};
347 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}}
\index{Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters \&params)}{DoCschedLcConfigReq(const struct FfMacCschedSapProvider::CschedLcConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a0b42adffae3cb20dc71f8e3a101ee2bc}{}\label{classns3_1_1FdTbfqFfMacScheduler_a0b42adffae3cb20dc71f8e3a101ee2bc}

\begin{DoxyCode}
390 \{
391   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" New LC, rnti: "}  << params.m\_rnti);
392 
393   std::map <uint16\_t, fdtbfqsFlowPerf\_t>::iterator it;
394   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_logicalChannelConfigList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
395     \{
396       it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.find (params.m\_rnti);
397 
398       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.end ())
399         \{
400           uint64\_t mbrDlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabMaximulBitrateDl / 8;   \textcolor{comment}{
      // byte/s}
401           uint64\_t mbrUlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabMaximulBitrateUl / 8;   \textcolor{comment}{
      // byte/s}
402 
403           fdtbfqsFlowPerf\_t flowStatsDl;
404           flowStatsDl.flowStart = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
405           flowStatsDl.packetArrivalRate = 0;
406           flowStatsDl.tokenGenerationRate =  mbrDlInBytes;
407           flowStatsDl.tokenPoolSize = 0;
408           flowStatsDl.maxTokenPoolSize = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0f729f9c65abdbcd28f36269f501fe14}{m\_tokenPoolSize};
409           flowStatsDl.counter = 0;
410           flowStatsDl.burstCredit = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa390b2d541c6190fd44f6457fe006a38}{m\_creditLimit}; \textcolor{comment}{// bytes}
411           flowStatsDl.debtLimit = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa73b1800df86289d9a1fc49886c9a175}{m\_debtLimit}; \textcolor{comment}{// bytes}
412           flowStatsDl.creditableThreshold = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a581771a634fa44e3e817131accd9db1f}{m\_creditableThreshold};
413           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.insert (std::pair<uint16\_t, fdtbfqsFlowPerf\_t> (params.m\_rnti, 
      flowStatsDl));
414           fdtbfqsFlowPerf\_t flowStatsUl;
415           flowStatsUl.flowStart = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
416           flowStatsUl.packetArrivalRate = 0;
417           flowStatsUl.tokenGenerationRate = mbrUlInBytes;
418           flowStatsUl.tokenPoolSize = 0;
419           flowStatsUl.maxTokenPoolSize = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0f729f9c65abdbcd28f36269f501fe14}{m\_tokenPoolSize};
420           flowStatsUl.counter = 0;
421           flowStatsUl.burstCredit = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa390b2d541c6190fd44f6457fe006a38}{m\_creditLimit};  \textcolor{comment}{// bytes}
422           flowStatsUl.debtLimit = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa73b1800df86289d9a1fc49886c9a175}{m\_debtLimit};  \textcolor{comment}{// bytes}
423           flowStatsUl.creditableThreshold = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a581771a634fa44e3e817131accd9db1f}{m\_creditableThreshold};
424           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a104df6ff96dc70c7daeffa99ca042f96}{m\_flowStatsUl}.insert (std::pair<uint16\_t, fdtbfqsFlowPerf\_t> (params.m\_rnti, 
      flowStatsUl));
425         \}
426       \textcolor{keywordflow}{else}
427         \{
428           \textcolor{comment}{// update MBR and GBR from UeManager::SetupDataRadioBearer ()}
429           uint64\_t mbrDlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabMaximulBitrateDl / 8;   \textcolor{comment}{
      // byte/s}
430           uint64\_t mbrUlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabMaximulBitrateUl / 8;   \textcolor{comment}{
      // byte/s}
431           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}[(*it).first].tokenGenerationRate =  mbrDlInBytes;
432           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a104df6ff96dc70c7daeffa99ca042f96}{m\_flowStatsUl}[(*it).first].tokenGenerationRate =  mbrUlInBytes;
433 
434         \}
435     \}
436 
437   \textcolor{keywordflow}{return};
438 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}}
\index{Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters \&params)}{DoCschedLcReleaseReq(const struct FfMacCschedSapProvider::CschedLcReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_afcb81e1ad81fbec96983390d86195045}{}\label{classns3_1_1FdTbfqFfMacScheduler_afcb81e1ad81fbec96983390d86195045}

\begin{DoxyCode}
442 \{
443   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
444   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_logicalChannelIdentity.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
445     \{
446       std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.begin ();
447       std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator temp;
448       \textcolor{keywordflow}{while} (it!=\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end ())
449         \{
450           \textcolor{keywordflow}{if} (((*it).first.m\_rnti == params.m\_rnti) && ((*it).first.m\_lcId == params.
      m\_logicalChannelIdentity.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})))
451             \{
452               temp = it;
453               it++;
454               \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.erase (temp);
455             \}
456           \textcolor{keywordflow}{else}
457             \{
458               it++;
459             \}
460         \}
461     \}
462   \textcolor{keywordflow}{return};
463 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}}
\index{Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters \&params)}{DoCschedUeConfigReq(const struct FfMacCschedSapProvider::CschedUeConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a4c2c063c40940a66304afd8b83d26057}{}\label{classns3_1_1FdTbfqFfMacScheduler_a4c2c063c40940a66304afd8b83d26057}

\begin{DoxyCode}
351 \{
352   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << params.m\_rnti << \textcolor{stringliteral}{" txMode "} << (uint16\_t)params.
      m\_transmissionMode);
353   std::map <uint16\_t,uint8\_t>::iterator it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.find (params.m\_rnti);
354   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.end ())
355     \{
356       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.insert (std::pair <uint16\_t, double> (params.m\_rnti, params.m\_transmissionMode
      ));
357       \textcolor{comment}{// generate HARQ buffers}
358       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{m\_dlHarqCurrentProcessId}.insert (std::pair <uint16\_t,uint8\_t > (params.m\_rnti
      , 0));
359       \hyperlink{namespacens3_a457b3571b67ff17d042e9894e90e2ce2}{DlHarqProcessesStatus\_t} dlHarqPrcStatus;
360       dlHarqPrcStatus.resize (8,0);
361       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.insert (std::pair <uint16\_t, DlHarqProcessesStatus\_t> 
      (params.m\_rnti, dlHarqPrcStatus));
362       \hyperlink{namespacens3_a39413ade536de4b1c82d6c0074cc703e}{DlHarqProcessesTimer\_t} dlHarqProcessesTimer;
363       dlHarqProcessesTimer.resize (8,0);
364       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.insert (std::pair <uint16\_t, DlHarqProcessesTimer\_t> (
      params.m\_rnti, dlHarqProcessesTimer));
365       \hyperlink{namespacens3_af25599bf8f9f564075c005759c9af18c}{DlHarqProcessesDciBuffer\_t} dlHarqdci;
366       dlHarqdci.resize (8);
367       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\_dlHarqProcessesDciBuffer}.insert (std::pair <uint16\_t,
       DlHarqProcessesDciBuffer\_t> (params.m\_rnti, dlHarqdci));
368       \hyperlink{namespacens3_a4c0cbd1e72f1c667f8b5879655f13210}{DlHarqRlcPduListBuffer\_t} dlHarqRlcPdu;
369       dlHarqRlcPdu.resize (2);
370       dlHarqRlcPdu.at (0).resize (8);
371       dlHarqRlcPdu.at (1).resize (8);
372       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.insert (std::pair <uint16\_t,
       DlHarqRlcPduListBuffer\_t> (params.m\_rnti, dlHarqRlcPdu));
373       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.insert (std::pair <uint16\_t,uint8\_t > (params.m\_rnti
      , 0));
374       \hyperlink{namespacens3_af765c4daaafe4ea4809c1041fc196629}{UlHarqProcessesStatus\_t} ulHarqPrcStatus;
375       ulHarqPrcStatus.resize (8,0);
376       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\_ulHarqProcessesStatus}.insert (std::pair <uint16\_t, UlHarqProcessesStatus\_t> 
      (params.m\_rnti, ulHarqPrcStatus));
377       \hyperlink{namespacens3_a042cbd6bf67e73911cba35b8c070223d}{UlHarqProcessesDciBuffer\_t} ulHarqdci;
378       ulHarqdci.resize (8);
379       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.insert (std::pair <uint16\_t,
       UlHarqProcessesDciBuffer\_t> (params.m\_rnti, ulHarqdci));
380     \}
381   \textcolor{keywordflow}{else}
382     \{
383       (*it).second = params.m\_transmissionMode;
384     \}
385   \textcolor{keywordflow}{return};
386 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}}
\index{Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters \&params)}{DoCschedUeReleaseReq(const struct FfMacCschedSapProvider::CschedUeReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a316cc7318dd419590ae7d85befa50e83}{}\label{classns3_1_1FdTbfqFfMacScheduler_a316cc7318dd419590ae7d85befa50e83}

\begin{DoxyCode}
467 \{
468   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
469   
470   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.erase (params.m\_rnti);
471   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{m\_dlHarqCurrentProcessId}.erase (params.m\_rnti);
472   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.erase  (params.m\_rnti);
473   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.erase (params.m\_rnti);
474   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\_dlHarqProcessesDciBuffer}.erase  (params.m\_rnti);
475   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.erase  (params.m\_rnti);
476   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.erase  (params.m\_rnti);
477   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\_ulHarqProcessesStatus}.erase  (params.m\_rnti);
478   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.erase  (params.m\_rnti);
479   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.erase  (params.m\_rnti);
480   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a104df6ff96dc70c7daeffa99ca042f96}{m\_flowStatsUl}.erase  (params.m\_rnti);
481   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.erase (params.m\_rnti);
482   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.begin ();
483   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator temp;
484   \textcolor{keywordflow}{while} (it!=\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end ())
485     \{
486       \textcolor{keywordflow}{if} ((*it).first.m\_rnti == params.m\_rnti)
487         \{
488           temp = it;
489           it++;
490           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.erase (temp);
491         \}
492       \textcolor{keywordflow}{else}
493         \{
494           it++;
495         \}
496     \}
497   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl} == params.m\_rnti)
498     \{
499       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl} = 0;
500     \}
501 
502   \textcolor{keywordflow}{return};
503 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a431a7360f10d11e0c015761b460e680a}{}\label{classns3_1_1FdTbfqFfMacScheduler_a431a7360f10d11e0c015761b460e680a}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a431a7360f10d11e0c015761b460e680a}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1FfMacScheduler_a771411e455992b81d8399681779debd9}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
237 \{
238   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
239   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\_dlHarqProcessesDciBuffer}.clear ();
240   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.clear ();
241   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.clear ();
242   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.clear ();
243   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.clear ();
244   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\_ulHarqProcessesStatus}.clear ();
245   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.clear ();
246   \textcolor{keyword}{delete} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab9204a4d0edccb863de0f60b2d818c4d}{m\_cschedSapProvider};
247   \textcolor{keyword}{delete} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac42b10eec7e048dc14078359273ffeeb}{m\_schedSapProvider};
248   \textcolor{keyword}{delete} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a33331ad1347d0db07f6b6bce134ff7bf}{m\_ffrSapUser};
249 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedDlCqiInfoReq(const struct FfMacSchedSapProvider::SchedDlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a6e1f3a4a2430b020061624a8ac875a84}{}\label{classns3_1_1FdTbfqFfMacScheduler_a6e1f3a4a2430b020061624a8ac875a84}

\begin{DoxyCode}
1616 \{
1617   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1618   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a9b28572b241707f364405a269f79dbd8}{ReportDlCqiInfo} (params);
1619 
1620   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_cqiList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1621     \{
1622       \textcolor{keywordflow}{if} ( params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_cqiType == \hyperlink{structns3_1_1CqiListElement__s_a8f1bd827fd9842e7c07e39265d88299aa9db5a80433fbf06a4c98935e28ad26e8}{CqiListElement\_s::P10} )
1623         \{
1624           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"wideband CQI "} <<  (uint32\_t) params.m\_cqiList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0) << \textcolor{stringliteral}{" reported"});
1625           std::map <uint16\_t,uint8\_t>::iterator it;
1626           uint16\_t rnti = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1627           it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{m\_p10CqiRxed}.find (rnti);
1628           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{m\_p10CqiRxed}.end ())
1629             \{
1630               \textcolor{comment}{// create the new entry}
1631               \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{m\_p10CqiRxed}.insert ( std::pair<uint16\_t, uint8\_t > (rnti, params.m\_cqiList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0)) ); \textcolor{comment}{// only codeword 0 at this stage (SISO)}
1632               \textcolor{comment}{// generate correspondent timer}
1633               \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}{m\_p10CqiTimers}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold}));
1634             \}
1635           \textcolor{keywordflow}{else}
1636             \{
1637               \textcolor{comment}{// update the CQI value and refresh correspondent timer}
1638               (*it).second = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0);
1639               \textcolor{comment}{// update correspondent timer}
1640               std::map <uint16\_t,uint32\_t>::iterator itTimers;
1641               itTimers = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}{m\_p10CqiTimers}.find (rnti);
1642               (*itTimers).second = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold};
1643             \}
1644         \}
1645       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_cqiType == \hyperlink{structns3_1_1CqiListElement__s_a8f1bd827fd9842e7c07e39265d88299aab9a9d64494e36c89d7932a00edb056a7}{CqiListElement\_s::A30} )
1646         \{
1647           \textcolor{comment}{// subband CQI reporting high layer configured}
1648           std::map <uint16\_t,SbMeasResult\_s>::iterator it;
1649           uint16\_t rnti = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1650           it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.find (rnti);
1651           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.end ())
1652             \{
1653               \textcolor{comment}{// create the new entry}
1654               \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.insert ( std::pair<uint16\_t, SbMeasResult\_s > (rnti, params.
      m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbMeasResult) );
1655               \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}{m\_a30CqiTimers}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold}));
1656             \}
1657           \textcolor{keywordflow}{else}
1658             \{
1659               \textcolor{comment}{// update the CQI value and refresh correspondent timer}
1660               (*it).second = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbMeasResult;
1661               std::map <uint16\_t,uint32\_t>::iterator itTimers;
1662               itTimers = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}{m\_a30CqiTimers}.find (rnti);
1663               (*itTimers).second = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold};
1664             \}
1665         \}
1666       \textcolor{keywordflow}{else}
1667         \{
1668           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" CQI type unknown"});
1669         \}
1670     \}
1671 
1672   \textcolor{keywordflow}{return};
1673 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Mac\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters \&params)}{DoSchedDlMacBufferReq(const struct FfMacSchedSapProvider::SchedDlMacBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Mac\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ad366bd77d323fd505272e4df786fba05}{}\label{classns3_1_1FdTbfqFfMacScheduler_ad366bd77d323fd505272e4df786fba05}

\begin{DoxyCode}
540 \{
541   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
542   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"method not implemented"});
543   \textcolor{keywordflow}{return};
544 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Paging\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters \&params)}{DoSchedDlPagingBufferReq(const struct FfMacSchedSapProvider::SchedDlPagingBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Paging\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a7170de1fb11e75b418444267520aad15}{}\label{classns3_1_1FdTbfqFfMacScheduler_a7170de1fb11e75b418444267520aad15}

\begin{DoxyCode}
532 \{
533   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
534   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"method not implemented"});
535   \textcolor{keywordflow}{return};
536 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}}
\index{Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rach\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters \&params)}{DoSchedDlRachInfoReq(const struct FfMacSchedSapProvider::SchedDlRachInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rach\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a46d334a998f73d0a8a9f0efaf2779b8e}{}\label{classns3_1_1FdTbfqFfMacScheduler_a46d334a998f73d0a8a9f0efaf2779b8e}

\begin{DoxyCode}
1606 \{
1607   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1608 
1609   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0d2d08dad69997d048c8d35b5dac76e7}{m\_rachList} = params.m\_rachList;
1610   
1611   \textcolor{keywordflow}{return};
1612 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rlc\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters \&params)}{DoSchedDlRlcBufferReq(const struct FfMacSchedSapProvider::SchedDlRlcBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rlc\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a81de99be98edf820a323dd4644c14fa6}{}\label{classns3_1_1FdTbfqFfMacScheduler_a81de99be98edf820a323dd4644c14fa6}

\begin{DoxyCode}
508 \{
509   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << params.m\_rnti << (uint32\_t) params.m\_logicalChannelIdentity);
510   \textcolor{comment}{// API generated by RLC for updating RLC parameters on a LC (tx and retx queues)}
511 
512   std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
513 
514   LteFlowId\_t flow (params.m\_rnti, params.m\_logicalChannelIdentity);
515 
516   it =  \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.find (flow);
517 
518   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end ())
519     \{
520       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.insert (std::pair <LteFlowId\_t,
       FfMacSchedSapProvider::SchedDlRlcBufferReqParameters> (flow, params));
521     \}
522   \textcolor{keywordflow}{else}
523     \{
524       (*it).second = params;
525     \}
526 
527   \textcolor{keywordflow}{return};
528 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}}
\index{Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters \&params)}{DoSchedDlTriggerReq(const struct FfMacSchedSapProvider::SchedDlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aca7deb47b0377b1facea6c6378ba2ec7}{}\label{classns3_1_1FdTbfqFfMacScheduler_aca7deb47b0377b1facea6c6378ba2ec7}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000080}{Todo}]check correct value according the D\+C\+Is txed \end{DoxyRefDesc}

\begin{DoxyCode}
693 \{
694   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{" subframe no. "} << (0
      xF & params.m\_sfnSf));
695   \textcolor{comment}{// API generated by RLC for triggering the scheduling of a DL subframe}
696 
697 
698   \textcolor{comment}{// evaluate the relative channel quality indicator for each UE per each RBG}
699   \textcolor{comment}{// (since we are using allocation type 0 the small unit of allocation is RBG)}
700   \textcolor{comment}{// Resource allocation type 0 (see sec 7.1.6.1 of 36.213)}
701 
702   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a45264dfea612218caa30fa414ea7989c}{RefreshDlCqiMaps} ();
703 
704   \textcolor{keywordtype}{int} rbgSize = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aee50f9f1c073802906068329c43811f1}{GetRbgSize} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth});
705   \textcolor{keywordtype}{int} rbgNum = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth} / rbgSize;
706   std::map <uint16\_t, std::vector <uint16\_t> > allocationMap; \textcolor{comment}{// RBs map per RNTI}
707   std::vector <bool> rbgMap;  \textcolor{comment}{// global RBGs map}
708   uint16\_t rbgAllocatedNum = 0;
709   std::set <uint16\_t> rntiAllocated;
710   rbgMap.resize (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth} / rbgSize, \textcolor{keyword}{false});
711 
712   rbgMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_ad60306dae43b74dc25b65f81d6587a24}{GetAvailableDlRbg} ();
713   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = rbgMap.begin (); it != rbgMap.end (); it++)
714     \{
715       \textcolor{keywordflow}{if} ((*it) == true )
716         \{
717           rbgAllocatedNum++;
718         \}
719     \}
720 
721   FfMacSchedSapUser::SchedDlConfigIndParameters ret;
722 
723   \textcolor{comment}{//   update UL HARQ proc id}
724   std::map <uint16\_t, uint8\_t>::iterator itProcId;
725   \textcolor{keywordflow}{for} (itProcId = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.begin (); itProcId != 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.end (); itProcId++)
726     \{
727       (*itProcId).second = ((*itProcId).second + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
728     \}
729 
730   \textcolor{comment}{// RACH Allocation}
731   uint16\_t rbAllocatedNum = 0;
732   std::vector <bool> ulRbMap;
733   ulRbMap.resize (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, \textcolor{keyword}{false});
734   ulRbMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_aafd23b22a27ec83e03d54795c122d175}{GetAvailableUlRbg} ();
735   uint8\_t maxContinuousUlBandwidth = 0;
736   uint8\_t tmpMinBandwidth = 0;
737   uint16\_t ffrRbStartOffset = 0;
738   uint16\_t tmpFfrRbStartOffset = 0;
739   uint16\_t index = 0;
740 
741   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = ulRbMap.begin (); it != ulRbMap.end (); it++)
742     \{
743       \textcolor{keywordflow}{if} ((*it) == true )
744         \{
745           rbAllocatedNum++;
746           \textcolor{keywordflow}{if} (tmpMinBandwidth > maxContinuousUlBandwidth)
747             \{
748               maxContinuousUlBandwidth = tmpMinBandwidth;
749               ffrRbStartOffset = tmpFfrRbStartOffset;
750             \}
751           tmpMinBandwidth = 0;
752         \}
753       \textcolor{keywordflow}{else}
754         \{
755           \textcolor{keywordflow}{if} (tmpMinBandwidth == 0)
756             \{
757               tmpFfrRbStartOffset = index;
758             \}
759           tmpMinBandwidth++;
760         \}
761       index++;
762     \}
763 
764   \textcolor{keywordflow}{if} (tmpMinBandwidth > maxContinuousUlBandwidth)
765     \{
766       maxContinuousUlBandwidth = tmpMinBandwidth;
767       ffrRbStartOffset = tmpFfrRbStartOffset;
768     \}
769 
770   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
771   uint16\_t rbStart = 0;
772   rbStart = ffrRbStartOffset;
773   std::vector <struct RachListElement\_s>::iterator itRach;
774   \textcolor{keywordflow}{for} (itRach = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0d2d08dad69997d048c8d35b5dac76e7}{m\_rachList}.begin (); itRach != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0d2d08dad69997d048c8d35b5dac76e7}{m\_rachList}.end (); itRach++)
775     \{
776       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetTbSizeFromMcs (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{m\_ulGrantMcs}, 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) > (*itRach).m\_estimatedSize, \textcolor{stringliteral}{" Default UL
       Grant MCS does not allow to send RACH messages"});
777       BuildRarListElement\_s newRar;
778       newRar.m\_rnti = (*itRach).m\_rnti;
779       \textcolor{comment}{// DL-RACH Allocation}
780       \textcolor{comment}{// Ideal: no needs of configuring m\_dci}
781       \textcolor{comment}{// UL-RACH Allocation}
782       newRar.m\_grant.m\_rnti = newRar.m\_rnti;
783       newRar.m\_grant.m\_mcs = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{m\_ulGrantMcs};
784       uint16\_t rbLen = 1;
785       uint16\_t tbSizeBits = 0;
786       \textcolor{comment}{// find lowest TB size that fits UL grant estimated size}
787       \textcolor{keywordflow}{while} ((tbSizeBits < (*itRach).m\_estimatedSize) && (rbStart + rbLen < (ffrRbStartOffset + 
      maxContinuousUlBandwidth)))
788         \{
789           rbLen++;
790           tbSizeBits = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetTbSizeFromMcs (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{m\_ulGrantMcs}, rbLen);
791         \}
792       \textcolor{keywordflow}{if} (tbSizeBits < (*itRach).m\_estimatedSize)
793         \{
794           \textcolor{comment}{// no more allocation space: finish allocation}
795           \textcolor{keywordflow}{break};
796         \}
797       newRar.m\_grant.m\_rbStart = rbStart;
798       newRar.m\_grant.m\_rbLen = rbLen;
799       newRar.m\_grant.m\_tbSize = tbSizeBits / 8;
800       newRar.m\_grant.m\_hopping = \textcolor{keyword}{false};
801       newRar.m\_grant.m\_tpc = 0;
802       newRar.m\_grant.m\_cqiRequest = \textcolor{keyword}{false};
803       newRar.m\_grant.m\_ulDelay = \textcolor{keyword}{false};
804       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL grant allocated to RNTI "} << (*itRach).m\_rnti << \textcolor{stringliteral}{" rbStart "} << 
      rbStart << \textcolor{stringliteral}{" rbLen "} << rbLen << \textcolor{stringliteral}{" MCS "} << \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{m\_ulGrantMcs} << \textcolor{stringliteral}{" tbSize "} << newRar.m\_grant.
      m\_tbSize);
805       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < rbStart + rbLen; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
806         \{
807           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{m\_rachAllocationMap}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = (*itRach).m\_rnti;
808         \}
809 
810       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\_harqOn} == \textcolor{keyword}{true})
811         \{
812           \textcolor{comment}{// generate UL-DCI for HARQ retransmissions}
813           UlDciListElement\_s uldci;
814           uldci.m\_rnti = newRar.m\_rnti;
815           uldci.m\_rbLen = rbLen;
816           uldci.m\_rbStart = rbStart;
817           uldci.m\_mcs = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{m\_ulGrantMcs};
818           uldci.m\_tbSize = tbSizeBits / 8;
819           uldci.m\_ndi = 1;
820           uldci.m\_cceIndex = 0;
821           uldci.m\_aggrLevel = 1;
822           uldci.m\_ueTxAntennaSelection = 3; \textcolor{comment}{// antenna selection OFF}
823           uldci.m\_hopping = \textcolor{keyword}{false};
824           uldci.m\_n2Dmrs = 0;
825           uldci.m\_tpc = 0; \textcolor{comment}{// no power control}
826           uldci.m\_cqiRequest = \textcolor{keyword}{false}; \textcolor{comment}{// only period CQI at this stage}
827           uldci.m\_ulIndex = 0; \textcolor{comment}{// TDD parameter}
828           uldci.m\_dai = 1; \textcolor{comment}{// TDD parameter}
829           uldci.m\_freqHopping = 0;
830           uldci.m\_pdcchPowerOffset = 0; \textcolor{comment}{// not used}
831 
832           uint8\_t harqId = 0;
833           std::map <uint16\_t, uint8\_t>::iterator itProcId;
834           itProcId = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.find (uldci.m\_rnti);
835           \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.end ())
836             \{
837               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << uldci.m\_rnti);
838             \}
839           harqId = (*itProcId).second;
840           std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.find (uldci.m\_rnti);
841           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.end ())
842             \{
843               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in UL DCI HARQ buffer for RNTI "} << 
      uldci.m\_rnti);
844             \}
845           (*itDci).second.at (harqId) = uldci;
846         \}
847 
848       rbStart = rbStart + rbLen;
849       ret.m\_buildRarList.push\_back (newRar);
850     \}
851   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0d2d08dad69997d048c8d35b5dac76e7}{m\_rachList}.clear ();
852 
853 
854   \textcolor{comment}{// Process DL HARQ feedback}
855   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3c8688dfe09de01251cc4d15a4f620c6}{RefreshHarqProcesses} ();
856   \textcolor{comment}{// retrieve past HARQ retx buffered}
857   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.size () > 0)
858     \{
859       \textcolor{keywordflow}{if} (params.m\_dlInfoList.size () > 0)
860         \{
861           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Received DL-HARQ feedback"});
862           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.insert (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.end (),
       params.m\_dlInfoList.begin (), params.m\_dlInfoList.end ());
863         \}
864     \}
865   \textcolor{keywordflow}{else}
866     \{
867       \textcolor{keywordflow}{if} (params.m\_dlInfoList.size () > 0)
868         \{
869           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered} = params.m\_dlInfoList;
870         \}
871     \}
872   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\_harqOn} == \textcolor{keyword}{false})
873     \{
874       \textcolor{comment}{// Ignore HARQ feedback}
875       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.clear ();
876     \}
877   std::vector <struct DlInfoListElement\_s> dlInfoListUntxed;
878   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
879     \{
880       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find (
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
881       \textcolor{keywordflow}{if} (itRnti != rntiAllocated.end ())
882         \{
883           \textcolor{comment}{// RNTI already allocated for retx}
884           \textcolor{keywordflow}{continue};
885         \}
886       uint8\_t nLayers = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.size ();
887       std::vector <bool> retx;
888       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Processing DLHARQ feedback"});
889       \textcolor{keywordflow}{if} (nLayers == 1)
890         \{
891           retx.push\_back (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (0) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
892           retx.push\_back (\textcolor{keyword}{false});
893         \}
894       \textcolor{keywordflow}{else}
895         \{
896           retx.push\_back (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (0) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
897           retx.push\_back (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (1) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
898         \}
899       \textcolor{keywordflow}{if} (retx.at (0) || retx.at (1))
900         \{
901           \textcolor{comment}{// retrieve HARQ process information}
902           uint16\_t rnti = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
903           uint8\_t harqId = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId;
904           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ retx RNTI "} << rnti << \textcolor{stringliteral}{" harqId "} << (uint16\_t)harqId);
905           std::map <uint16\_t, DlHarqProcessesDciBuffer\_t>::iterator itHarq = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\_dlHarqProcessesDciBuffer}.find (rnti);
906           \textcolor{keywordflow}{if} (itHarq == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\_dlHarqProcessesDciBuffer}.end ())
907             \{
908               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << rnti);
909             \}
910 
911           DlDciListElement\_s dci = (*itHarq).second.at (harqId);
912           \textcolor{keywordtype}{int} rv = 0;
913           \textcolor{keywordflow}{if} (dci.m\_rv.size () == 1)
914             \{
915               rv = dci.m\_rv.at (0);
916             \}
917           \textcolor{keywordflow}{else}
918             \{
919               rv = (dci.m\_rv.at (0) > dci.m\_rv.at (1) ? dci.m\_rv.at (0) : dci.m\_rv.at (1));
920             \}
921 
922           \textcolor{keywordflow}{if} (rv == 3)
923             \{
924               \textcolor{comment}{// maximum number of retx reached -> drop process}
925               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Maximum number of retransmissions reached -> drop process"});
926               std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator it = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.find (rnti);
927               \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.end ())
928                 \{
929                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
930                 \}
931               (*it).second.at (harqId) = 0;
932               std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.find (rnti);
933               \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
934                 \{
935                   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
936                 \}
937               \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.size (); k++)
938                 \{
939                   (*itRlcPdu).second.at (k).at (harqId).clear ();
940                 \}
941               \textcolor{keywordflow}{continue};
942             \}
943           \textcolor{comment}{// check the feasibility of retransmitting on the same RBGs}
944           \textcolor{comment}{// translate the DCI to Spectrum framework}
945           std::vector <int> dciRbg;
946           uint32\_t mask = 0x1;
947           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Original RBGs "} << dci.m\_rbBitmap << \textcolor{stringliteral}{" rnti "} << dci.m\_rnti);
948           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 32; j++)
949             \{
950               \textcolor{keywordflow}{if} (((dci.m\_rbBitmap & mask) >> j) == 1)
951                 \{
952                   dciRbg.push\_back (j);
953                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t"} << j);
954                 \}
955               mask = (mask << 1);
956             \}
957           \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
958           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < dciRbg.size (); j++)
959             \{
960               \textcolor{keywordflow}{if} (rbgMap.at (dciRbg.at (j)) == \textcolor{keyword}{true})
961                 \{
962                   free = \textcolor{keyword}{false};
963                   \textcolor{keywordflow}{break};
964                 \}
965             \}
966           \textcolor{keywordflow}{if} (free)
967             \{
968               \textcolor{comment}{// use the same RBGs for the retx}
969               \textcolor{comment}{// reserve RBGs}
970               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < dciRbg.size (); j++)
971                 \{
972                   rbgMap.at (dciRbg.at (j)) = \textcolor{keyword}{true};
973                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"RBG "} << dciRbg.at (j) << \textcolor{stringliteral}{" assigned"});
974                   rbgAllocatedNum++;
975                 \}
976 
977               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Send retx in the same RBGs"});
978             \}
979           \textcolor{keywordflow}{else}
980             \{
981               \textcolor{comment}{// find RBGs for sending HARQ retx}
982               uint8\_t j = 0;
983               uint8\_t rbgId = (dciRbg.at (dciRbg.size () - 1) + 1) % rbgNum;
984               uint8\_t startRbg = dciRbg.at (dciRbg.size () - 1);
985               std::vector <bool> rbgMapCopy = rbgMap;
986               \textcolor{keywordflow}{while} ((j < dciRbg.size ())&&(startRbg != rbgId))
987                 \{
988                   \textcolor{keywordflow}{if} (rbgMapCopy.at (rbgId) == \textcolor{keyword}{false})
989                     \{
990                       rbgMapCopy.at (rbgId) = \textcolor{keyword}{true};
991                       dciRbg.at (j) = rbgId;
992                       j++;
993                     \}
994                   rbgId = (rbgId + 1) % rbgNum;
995                 \}
996               \textcolor{keywordflow}{if} (j == dciRbg.size ())
997                 \{
998                   \textcolor{comment}{// find new RBGs -> update DCI map}
999                   uint32\_t rbgMask = 0;
1000                   \textcolor{keywordflow}{for} (uint16\_t k = 0; k < dciRbg.size (); k++)
1001                     \{
1002                       rbgMask = rbgMask + (0x1 << dciRbg.at (k));
1003                       rbgAllocatedNum++;
1004                     \}
1005                   dci.m\_rbBitmap = rbgMask;
1006                   rbgMap = rbgMapCopy;
1007                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Move retx in RBGs "} << dciRbg.size ());
1008                 \}
1009               \textcolor{keywordflow}{else}
1010                 \{
1011                   \textcolor{comment}{// HARQ retx cannot be performed on this TTI -> store it}
1012                   dlInfoListUntxed.push\_back (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
1013                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" No resource for this retx -> buffer it"});
1014                 \}
1015             \}
1016           \textcolor{comment}{// retrieve RLC PDU list for retx TBsize and update DCI}
1017           BuildDataListElement\_s newEl;
1018           std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.find (rnti);
1019           \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
1020             \{
1021               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << rnti);
1022             \}
1023           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayers; j++)
1024             \{
1025               \textcolor{keywordflow}{if} (retx.at (j))
1026                 \{
1027                   \textcolor{keywordflow}{if} (j >= dci.m\_ndi.size ())
1028                     \{
1029                       \textcolor{comment}{// for avoiding errors in MIMO transient phases}
1030                       dci.m\_ndi.push\_back (0);
1031                       dci.m\_rv.push\_back (0);
1032                       dci.m\_mcs.push\_back (0);
1033                       dci.m\_tbsSize.push\_back (0);
1034                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" no txed (MIMO
       transition)"});
1035                     \}
1036                   \textcolor{keywordflow}{else}
1037                     \{
1038                       dci.m\_ndi.at (j) = 0;
1039                       dci.m\_rv.at (j)++;
1040                       (*itHarq).second.at (harqId).m\_rv.at (j)++;
1041                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" RV "} << (uint16\_t)dci.
      m\_rv.at (j));
1042                     \}
1043                 \}
1044               \textcolor{keywordflow}{else}
1045                 \{
1046                   \textcolor{comment}{// empty TB of layer j}
1047                   dci.m\_ndi.at (j) = 0;
1048                   dci.m\_rv.at (j) = 0;
1049                   dci.m\_mcs.at (j) = 0;
1050                   dci.m\_tbsSize.at (j) = 0;
1051                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" no retx"});
1052                 \}
1053             \}
1054           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.at (0).at (dci.m\_harqProcess).size (); k++)
1055             \{
1056               std::vector <struct RlcPduListElement\_s> rlcPduListPerLc;
1057               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayers; j++)
1058                 \{
1059                   \textcolor{keywordflow}{if} (retx.at (j))
1060                     \{
1061                       \textcolor{keywordflow}{if} (j < dci.m\_ndi.size ())
1062                         \{
1063                           rlcPduListPerLc.push\_back ((*itRlcPdu).second.at (j).at (dci.m\_harqProcess).at (k
      ));
1064                         \}
1065                     \}
1066                 \}
1067 
1068               \textcolor{keywordflow}{if} (rlcPduListPerLc.size () > 0)
1069                 \{
1070                   newEl.m\_rlcPduList.push\_back (rlcPduListPerLc);
1071                 \}
1072             \}
1073           newEl.m\_rnti = rnti;
1074           newEl.m\_dci = dci;
1075           (*itHarq).second.at (harqId).m\_rv = dci.m\_rv;
1076           \textcolor{comment}{// refresh timer}
1077           std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itHarqTimer = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.find (rnti);
1078           \textcolor{keywordflow}{if} (itHarqTimer== \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.end ())
1079             \{
1080               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find HARQ timer for RNTI "} << (uint16\_t)rnti);
1081             \}
1082           (*itHarqTimer).second.at (harqId) = 0;
1083           ret.m\_buildDataList.push\_back (newEl);
1084           rntiAllocated.insert (rnti);
1085         \}
1086       \textcolor{keywordflow}{else}
1087         \{
1088           \textcolor{comment}{// update HARQ process status}
1089           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ received ACK for UE "} << 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1090           std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator it = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.find (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1091           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.end ())
1092             \{
1093               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1094             \}
1095           (*it).second.at (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId) = 0;
1096           std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.find (
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1097           \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
1098             \{
1099               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1100             \}
1101           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.size (); k++)
1102             \{
1103               (*itRlcPdu).second.at (k).at (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId).clear ();
1104             \}
1105         \}
1106     \}
1107   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered}.clear ();
1108   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{m\_dlInfoListBuffered} = dlInfoListUntxed;
1109 
1110   \textcolor{keywordflow}{if} (rbgAllocatedNum == rbgNum)
1111     \{
1112       \textcolor{comment}{// all the RBGs are already allocated -> exit}
1113       \textcolor{keywordflow}{if} ((ret.m\_buildDataList.size () > 0) || (ret.m\_buildRarList.size () > 0))
1114         \{
1115           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a28f8484af5a32a45ee6c0e51770d83f7}{SchedDlConfigInd} (ret);
1116         \}
1117       \textcolor{keywordflow}{return};
1118     \}
1119 
1120   \textcolor{comment}{// update token pool, counter and bank size}
1121   std::map <uint16\_t, fdtbfqsFlowPerf\_t>::iterator itStats;
1122   \textcolor{keywordflow}{for} (itStats = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.begin (); itStats != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.end (); itStats
      ++)
1123     \{
1124       \textcolor{keywordflow}{if} ( (*itStats).second.tokenGenerationRate / 1000 +  (*itStats).second.tokenPoolSize > (*itStats).
      second.maxTokenPoolSize )     
1125         \{
1126           (*itStats).second.counter +=  (*itStats).second.tokenGenerationRate / 1000 - ( (*itStats).second.
      maxTokenPoolSize -  (*itStats).second.tokenPoolSize );
1127           (*itStats).second.tokenPoolSize = (*itStats).second.maxTokenPoolSize;
1128           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} += (*itStats).second.tokenGenerationRate / 1000 - ( (*itStats).second.
      maxTokenPoolSize -  (*itStats).second.tokenPoolSize );
1129         \}
1130       \textcolor{keywordflow}{else}
1131         \{
1132           (*itStats).second.tokenPoolSize += (*itStats).second.tokenGenerationRate / 1000;
1133         \}
1134     \}
1135 
1136   std::set <uint16\_t> allocatedRnti;   \textcolor{comment}{// store UEs which are already assigned RBGs}
1137   std::set <uint8\_t> allocatedRbg;  \textcolor{comment}{// store RBGs which are already allocated to UE}
1138 
1139   \textcolor{keywordtype}{int} totalRbg = 0;
1140   \textcolor{keywordflow}{while} (totalRbg < rbgNum)
1141     \{
1142       \textcolor{comment}{// select UE with largest metric}
1143       std::map <uint16\_t, fdtbfqsFlowPerf\_t>::iterator it;
1144       std::map <uint16\_t, fdtbfqsFlowPerf\_t>::iterator itMax = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.end ();
1145       \textcolor{keywordtype}{double} metricMax = 0.0;
1146       \textcolor{keywordtype}{bool} firstRnti = \textcolor{keyword}{true};
1147       \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.begin (); it != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.end (); it++)
1148         \{
1149           std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
1150           \textcolor{keywordflow}{if} ((itRnti != rntiAllocated.end ())||(!\hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad6dba4921f9a502a6c02d1f9095f0a17}{HarqProcessAvailability} ((*it).
      first)))
1151             \{
1152               \textcolor{comment}{// UE already allocated for HARQ or without HARQ process available -> drop it}
1153               \textcolor{keywordflow}{if} (itRnti != rntiAllocated.end ())
1154                 \{
1155                   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI discared for HARQ tx"} << (uint16\_t)(*it).first);
1156                 \}
1157               \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad6dba4921f9a502a6c02d1f9095f0a17}{HarqProcessAvailability} ((*it).first))
1158                 \{
1159                   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI discared for HARQ id"} << (uint16\_t)(*it).first);
1160                 \}
1161               \textcolor{keywordflow}{continue};
1162            \}
1163           
1164           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a606f29c62ab153d6a584da5371070045}{LcActivePerFlow} ((*it).first) == 0)
1165             \{
1166               \textcolor{keywordflow}{continue};
1167             \}
1168 
1169           std::set <uint16\_t>::iterator rnti;
1170           rnti = allocatedRnti.find((*it).first);
1171           \textcolor{keywordflow}{if} (rnti != allocatedRnti.end ())  \textcolor{comment}{//  already allocated RBGs to this UE}
1172             \{
1173               \textcolor{keywordflow}{continue};
1174             \}
1175   
1176           \textcolor{keywordtype}{double} metric = ( ( (double)(*it).second.counter ) / ( (double)(*it).second.tokenGenerationRate )
       );
1177   
1178           \textcolor{keywordflow}{if} (firstRnti == \textcolor{keyword}{true})
1179            \{
1180              metricMax = metric;
1181              itMax = it;
1182              firstRnti = \textcolor{keyword}{false};
1183              \textcolor{keywordflow}{continue};
1184            \}
1185          \textcolor{keywordflow}{if} (metric > metricMax)
1186           \{
1187             metricMax = metric;
1188             itMax = it;
1189           \} 
1190        \} \textcolor{comment}{// end for m\_flowStatsDl}
1191   
1192       \textcolor{keywordflow}{if} (itMax == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{m\_flowStatsDl}.end())
1193         \{
1194           \textcolor{comment}{// all UEs are allocated RBG or all UEs already allocated for HARQ or without HARQ process
       available}
1195           \textcolor{keywordflow}{break};
1196         \}
1197 
1198       \textcolor{comment}{// mark this UE as "allocated"}
1199       allocatedRnti.insert((*itMax).first);
1200      
1201       \textcolor{comment}{// calculate the maximum number of byte that the scheduler can assigned to this UE}
1202       uint32\_t budget = 0;
1203       \textcolor{keywordflow}{if} ( \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} > 0 )
1204         \{
1205                 budget = (*itMax).second.counter - (*itMax).second.debtLimit;
1206                 \textcolor{keywordflow}{if} ( budget > (*itMax).second.burstCredit )
1207                   budget = (*itMax).second.burstCredit;
1208                 \textcolor{keywordflow}{if} ( budget > \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} )
1209                   budget = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize};
1210               \}
1211       budget = budget + (*itMax).second.tokenPoolSize;
1212 
1213       \textcolor{comment}{// calcualte how much bytes this UE actally need}
1214       \textcolor{keywordflow}{if} (budget == 0)
1215         \{
1216           \textcolor{comment}{// there are no tokens for this UE}
1217                 \textcolor{keywordflow}{continue};
1218         \}
1219       \textcolor{keywordflow}{else} 
1220         \{       
1221                 \textcolor{comment}{// calculate rlc buffer size}
1222                 uint32\_t rlcBufSize = 0;
1223           uint8\_t lcid = 0;
1224           std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator itRlcBuf;
1225           \textcolor{keywordflow}{for} (itRlcBuf = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.begin (); itRlcBuf != 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end (); itRlcBuf++)
1226                   \{
1227               \textcolor{keywordflow}{if} ( (*itRlcBuf).first.m\_rnti == (*itMax).first )
1228                 lcid = (*itRlcBuf).first.m\_lcId;
1229                   \}
1230           LteFlowId\_t flow ((*itMax).first, lcid);
1231           itRlcBuf = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.find (flow);
1232           \textcolor{keywordflow}{if} (itRlcBuf!=\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end ())
1233                   rlcBufSize = (*itRlcBuf).second.m\_rlcTransmissionQueueSize + (*itRlcBuf).second.
      m\_rlcRetransmissionQueueSize + (*itRlcBuf).second.m\_rlcStatusPduSize;
1234                 \hyperlink{loss__ITU1238_8m_a419d895abe1313c35fa353c93802647e}{if} ( budget > rlcBufSize )
1235                   budget = rlcBufSize;
1236         \}
1237 
1238       \textcolor{comment}{// assign RBGs to this UE }
1239       uint32\_t bytesTxed = 0;
1240       uint32\_t bytesTxedTmp = 0;
1241       \textcolor{keywordtype}{int} rbgIndex = 0;
1242       \textcolor{keywordflow}{while} ( bytesTxed <= budget )
1243         \{
1244           totalRbg++;
1245 
1246           std::map <uint16\_t,SbMeasResult\_s>::iterator itCqi;
1247           itCqi = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.find ((*itMax).first);
1248           std::map <uint16\_t,uint8\_t>::iterator itTxMode;
1249           itTxMode = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.find ((*itMax).first);
1250           \textcolor{keywordflow}{if} (itTxMode == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.end ())
1251             \{
1252               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Transmission Mode info on user "} << (*it).first);
1253             \}
1254           \textcolor{keywordtype}{int} nLayer = \hyperlink{classns3_1_1TransmissionModesLayers_a31f608b7bfaa77440fe4cb85ad035329}{TransmissionModesLayers::TxMode2LayerNum} (
      (*itTxMode).second);
1255 
1256                  \textcolor{comment}{// find RBG with largest achievableRate}
1257           \textcolor{keywordtype}{double} achievableRateMax = 0.0;
1258           rbgIndex = rbgNum;
1259                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < rbgNum; k++)
1260                   \{
1261               std::set <uint8\_t>::iterator rbg;
1262               rbg = allocatedRbg.find (k);
1263                     \textcolor{keywordflow}{if} (rbg != allocatedRbg.end ())  \textcolor{comment}{// RBGs are already allocated to this UE}
1264                       \textcolor{keywordflow}{continue};
1265 
1266               \textcolor{keywordflow}{if} ( rbgMap.at (k) == \textcolor{keyword}{true}) \textcolor{comment}{// this RBG is allocated in RACH procedure}
1267                 \textcolor{keywordflow}{continue};
1268 
1269               \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a91f4de3c794d2a32fae5bcfafd88b6fa}{IsDlRbgAvailableForUe} (k, 
      (*itMax).first)) == \textcolor{keyword}{false})
1270                 \textcolor{keywordflow}{continue};
1271 
1272               std::vector <uint8\_t> sbCqi;
1273               \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.end ())
1274                 \{
1275                   \textcolor{keywordflow}{for} (uint8\_t k = 0; k < nLayer; k++)
1276                     \{
1277                       sbCqi.push\_back (1);  \textcolor{comment}{// start with lowest value}
1278                     \}
1279                 \}
1280               \textcolor{keywordflow}{else}
1281                 \{
1282                   sbCqi = (*itCqi).second.m\_higherLayerSelected.at (k).m\_sbCqi;
1283                 \}
1284               uint8\_t cqi1 = sbCqi.at (0);
1285               uint8\_t cqi2 = 1;
1286               \textcolor{keywordflow}{if} (sbCqi.size () > 1)
1287                 \{
1288                   cqi2 = sbCqi.at (1);
1289                 \}
1290           
1291               \textcolor{keywordflow}{if} ((cqi1 > 0)||(cqi2 > 0)) \textcolor{comment}{// CQI == 0 means "out of range" (see table 7.2.3-1 of 36.213)}
1292                 \{
1293                   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a606f29c62ab153d6a584da5371070045}{LcActivePerFlow} ((*itMax).first) > 0)
1294                     \{
1295                       \textcolor{comment}{// this UE has data to transmit}
1296                       \textcolor{keywordtype}{double} achievableRate = 0.0;
1297                       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++) 
1298                         \{
1299                           uint8\_t mcs = 0; 
1300                           \textcolor{keywordflow}{if} (sbCqi.size () > j)
1301                             \{                       
1302                               mcs = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetMcsFromCqi (sbCqi.at (j));
1303                             \}
1304                           \textcolor{keywordflow}{else}
1305                             \{
1306                               \textcolor{comment}{// no info on this subband -> worst MCS}
1307                               mcs = 0;
1308                             \}
1309                           achievableRate += ((\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetTbSizeFromMcs (mcs, rbgSize) / 8) / 0.001); \textcolor{comment}{//
       = TB size / TTI}
1310                         \}
1311 
1312                       \textcolor{keywordflow}{if} ( achievableRate > achievableRateMax )
1313                         \{
1314                           achievableRateMax = achievableRate;
1315                           rbgIndex = k;
1316                         \}
1317                       \}  \textcolor{comment}{// end of LcActivePerFlow}
1318                     \}  \textcolor{comment}{// end of cqi}
1319             \}  \textcolor{comment}{// end of for rbgNum}
1320 
1321           \textcolor{keywordflow}{if} ( rbgIndex == rbgNum)  \textcolor{comment}{// impossible}
1322             \{
1323               \textcolor{comment}{// all RBGs are already assigned}
1324               totalRbg = rbgNum;
1325               \textcolor{keywordflow}{break};
1326             \}
1327           \textcolor{keywordflow}{else}
1328             \{
1329               \textcolor{comment}{// mark this UE as "allocated"}
1330               allocatedRbg.insert (rbgIndex);
1331             \}
1332 
1333           \textcolor{comment}{// assign this RBG to UE}
1334           std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap;
1335           itMap = allocationMap.find ((*itMax).first);
1336           uint16\_t RbgPerRnti;
1337           \textcolor{keywordflow}{if} (itMap == allocationMap.end ())
1338             \{
1339               \textcolor{comment}{// insert new element}
1340               std::vector <uint16\_t> tempMap;
1341               tempMap.push\_back (rbgIndex);
1342               allocationMap.insert (std::pair <uint16\_t, std::vector <uint16\_t> > ((*itMax).first, tempMap)
      );
1343               itMap = allocationMap.find ((*itMax).first);  \textcolor{comment}{// point itMap to the first RBGs assigned to
       this UE}
1344             \}
1345           \textcolor{keywordflow}{else}
1346             \{
1347               (*itMap).second.push\_back (rbgIndex);
1348             \}
1349           rbgMap.at (rbgIndex) = \textcolor{keyword}{true};  \textcolor{comment}{// Mark this RBG as allocated}
1350  
1351           RbgPerRnti = (*itMap).second.size();
1352 
1353           \textcolor{comment}{// calculate tb size}
1354           std::vector <uint8\_t> worstCqi (2, 15);
1355           \textcolor{keywordflow}{if} (itCqi != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.end ())
1356             \{
1357               \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itMap).second.size (); k++)
1358                 \{
1359                   \textcolor{keywordflow}{if} ((*itCqi).second.m\_higherLayerSelected.size () > (*itMap).second.at (k))
1360                     \{
1361                       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++) 
1362                         \{
1363                           \textcolor{keywordflow}{if} ((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).m\_sbCqi.
      size () > j)
1364                             \{
1365                               \textcolor{keywordflow}{if} (((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).
      m\_sbCqi.at (j)) < worstCqi.at (j))
1366                                 \{
1367                                   worstCqi.at (j) = ((*itCqi).second.m\_higherLayerSelected.at ((*itMap).
      second.at (k)).m\_sbCqi.at (j));
1368                                 \}
1369                             \}
1370                           \textcolor{keywordflow}{else}
1371                             \{
1372                               \textcolor{comment}{// no CQI for this layer of this suband -> worst one}
1373                               worstCqi.at (j) = 1;
1374                             \}
1375                         \}
1376                     \}
1377                   \textcolor{keywordflow}{else}
1378                     \{
1379                       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1380                         \{
1381                           worstCqi.at (j) = 1; \textcolor{comment}{// try with lowest MCS in RBG with no info on channel}
1382                         \}
1383                     \}
1384                 \}
1385             \}
1386           \textcolor{keywordflow}{else}
1387             \{
1388               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1389                 \{
1390                   worstCqi.at (j) = 1; \textcolor{comment}{// try with lowest MCS in RBG with no info on channel}
1391                 \}
1392             \}
1393  
1394           bytesTxedTmp = bytesTxed;
1395           bytesTxed = 0;
1396           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1397             \{
1398               \textcolor{keywordtype}{int} tbSize = (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetTbSizeFromMcs (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetMcsFromCqi (worstCqi.at (j)), 
      RbgPerRnti * rbgSize) / 8); \textcolor{comment}{// (size of TB in bytes according to table 7.1.7.2.1-1 of 36.213) }
1399               bytesTxed += tbSize;
1400             \}
1401 
1402         \} \textcolor{comment}{// end of while()}
1403 
1404         \textcolor{comment}{// remove and unmark last RBG assigned to UE}
1405       \textcolor{keywordflow}{if} ( bytesTxed > budget )
1406         \{
1407           std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap;
1408           itMap = allocationMap.find ((*itMax).first);
1409           (*itMap).second.pop\_back ();
1410           allocatedRbg.erase (rbgIndex);
1411           bytesTxed = bytesTxedTmp;  \textcolor{comment}{// recovery bytesTxed}
1412           totalRbg--;
1413           rbgMap.at (rbgIndex) = \textcolor{keyword}{false};  \textcolor{comment}{// unmark this RBG}
1414         \}
1415 
1416         \textcolor{comment}{// update UE stats}
1417       \textcolor{keywordflow}{if} ( bytesTxed <= (*itMax).second.tokenPoolSize )
1418         \{
1419           (*itMax).second.tokenPoolSize -= bytesTxed;
1420         \}
1421       \textcolor{keywordflow}{else}
1422         \{
1423           (*itMax).second.counter = (*itMax).second.counter - ( bytesTxed -  (*itMax).second.tokenPoolSize 
      );
1424           (*itMax).second.tokenPoolSize = 0;
1425           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} <= ( bytesTxed -  (*itMax).second.tokenPoolSize ))
1426             \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} = 0;
1427           \textcolor{keywordflow}{else} 
1428             \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{bankSize} - ( bytesTxed -  (*itMax).second.tokenPoolSize );
1429         \}
1430     \} \textcolor{comment}{// end of RBGs}
1431 
1432   \textcolor{comment}{// generate the transmission opportunities by grouping the RBGs of the same RNTI and}
1433   \textcolor{comment}{// creating the correspondent DCIs}
1434   std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap = allocationMap.begin ();
1435   \textcolor{keywordflow}{while} (itMap != allocationMap.end ())
1436     \{
1437       \textcolor{comment}{// create new BuildDataListElement\_s for this LC}
1438       BuildDataListElement\_s newEl;
1439       newEl.m\_rnti = (*itMap).first;
1440       \textcolor{comment}{// create the DlDciListElement\_s}
1441       DlDciListElement\_s newDci;
1442       newDci.m\_rnti = (*itMap).first;
1443       newDci.m\_harqProcess = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2e807a88411774f9552f3b394de16b57}{UpdateHarqProcessId} ((*itMap).first);
1444 
1445       uint16\_t lcActives = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a606f29c62ab153d6a584da5371070045}{LcActivePerFlow} ((*itMap).first);
1446       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"Allocate user "} << newEl.m\_rnti << \textcolor{stringliteral}{" rbg "} << lcActives);
1447       \textcolor{keywordflow}{if} (lcActives == 0)
1448         \{
1449           \textcolor{comment}{// Set to max value, to avoid divide by 0 below}
1450           lcActives = (uint16\_t)65535; \textcolor{comment}{// UINT16\_MAX;}
1451         \}
1452       uint16\_t RgbPerRnti = (*itMap).second.size ();
1453       std::map <uint16\_t,SbMeasResult\_s>::iterator itCqi;
1454       itCqi = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.find ((*itMap).first);
1455       std::map <uint16\_t,uint8\_t>::iterator itTxMode;
1456       itTxMode = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.find ((*itMap).first);
1457       \textcolor{keywordflow}{if} (itTxMode == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{m\_uesTxMode}.end ())
1458         \{
1459           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Transmission Mode info on user "} << (*itMap).first);
1460         \}
1461       \textcolor{keywordtype}{int} nLayer = \hyperlink{classns3_1_1TransmissionModesLayers_a31f608b7bfaa77440fe4cb85ad035329}{TransmissionModesLayers::TxMode2LayerNum} (
      (*itTxMode).second);
1462       std::vector <uint8\_t> worstCqi (2, 15);
1463       \textcolor{keywordflow}{if} (itCqi != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.end ())
1464         \{
1465           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itMap).second.size (); k++)
1466             \{
1467               \textcolor{keywordflow}{if} ((*itCqi).second.m\_higherLayerSelected.size () > (*itMap).second.at (k))
1468                 \{
1469                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RBG "} << (*itMap).second.at (k) << \textcolor{stringliteral}{" CQI "} << (uint16\_t
      )((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).m\_sbCqi.at (0)) );
1470                   \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1471                     \{
1472                       \textcolor{keywordflow}{if} ((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).m\_sbCqi.size ()
       > j)
1473                         \{
1474                           \textcolor{keywordflow}{if} (((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).m\_sbCqi.at
       (j)) < worstCqi.at (j))
1475                             \{
1476                               worstCqi.at (j) = ((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.
      at (k)).m\_sbCqi.at (j));
1477                             \}
1478                         \}
1479                       \textcolor{keywordflow}{else}
1480                         \{
1481                           \textcolor{comment}{// no CQI for this layer of this suband -> worst one}
1482                           worstCqi.at (j) = 1;
1483                         \}
1484                     \}
1485                 \}
1486               \textcolor{keywordflow}{else}
1487                 \{
1488                   \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1489                     \{
1490                       worstCqi.at (j) = 1; \textcolor{comment}{// try with lowest MCS in RBG with no info on channel}
1491                     \}
1492                 \}
1493             \}
1494         \}
1495       \textcolor{keywordflow}{else}
1496         \{
1497           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1498             \{
1499               worstCqi.at (j) = 1; \textcolor{comment}{// try with lowest MCS in RBG with no info on channel}
1500             \}
1501         \}
1502       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1503         \{
1504           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Layer "} << (uint16\_t)j << \textcolor{stringliteral}{" CQI selected "} << (uint16\_t)
      worstCqi.at (j));
1505         \}
1506       uint32\_t bytesTxed = 0;
1507       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1508         \{
1509           newDci.m\_mcs.push\_back (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetMcsFromCqi (worstCqi.at (j)));
1510           \textcolor{keywordtype}{int} tbSize = (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetTbSizeFromMcs (newDci.m\_mcs.at (j), RgbPerRnti * rbgSize) / 8); \textcolor{comment}{//
       (size of TB in bytes according to table 7.1.7.2.1-1 of 36.213)}
1511           newDci.m\_tbsSize.push\_back (tbSize);
1512           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Layer "} << (uint16\_t)j << \textcolor{stringliteral}{" MCS selected"} << 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetMcsFromCqi (worstCqi.at (j)));
1513           bytesTxed += tbSize;
1514         \}
1515 
1516       newDci.m\_resAlloc = 0;  \textcolor{comment}{// only allocation type 0 at this stage}
1517       newDci.m\_rbBitmap = 0; \textcolor{comment}{// TBD (32 bit bitmap see 7.1.6 of 36.213)}
1518       uint32\_t rbgMask = 0;
1519       \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itMap).second.size (); k++)
1520         \{
1521           rbgMask = rbgMask + (0x1 << (*itMap).second.at (k));
1522           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Allocated RBG "} << (*itMap).second.at (k));
1523         \}
1524       newDci.m\_rbBitmap = rbgMask; \textcolor{comment}{// (32 bit bitmap see 7.1.6 of 36.213)}
1525 
1526       \textcolor{comment}{// create the rlc PDUs -> equally divide resources among actives LCs}
1527       std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator itBufReq;
1528       \textcolor{keywordflow}{for} (itBufReq = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.begin (); itBufReq != 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end (); itBufReq++)
1529         \{
1530           \textcolor{keywordflow}{if} (((*itBufReq).first.m\_rnti == (*itMap).first)
1531               && (((*itBufReq).second.m\_rlcTransmissionQueueSize > 0)
1532                   || ((*itBufReq).second.m\_rlcRetransmissionQueueSize > 0)
1533                   || ((*itBufReq).second.m\_rlcStatusPduSize > 0) ))
1534             \{
1535               std::vector <struct RlcPduListElement\_s> newRlcPduLe;
1536               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1537                 \{
1538                   RlcPduListElement\_s newRlcEl;
1539                   newRlcEl.m\_logicalChannelIdentity = (*itBufReq).first.m\_lcId;
1540                   newRlcEl.m\_size = newDci.m\_tbsSize.at (j) / lcActives;
1541                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" LCID "} << (uint32\_t) newRlcEl.m\_logicalChannelIdentity 
      << \textcolor{stringliteral}{" size "} << newRlcEl.m\_size << \textcolor{stringliteral}{" layer "} << (uint16\_t)j);
1542                   newRlcPduLe.push\_back (newRlcEl);
1543                   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5c2d153f27717df1f7c8627a387c337f}{UpdateDlRlcBufferInfo} (newDci.m\_rnti, newRlcEl.
      m\_logicalChannelIdentity, newRlcEl.m\_size);
1544                   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\_harqOn} == \textcolor{keyword}{true})
1545                     \{
1546                       \textcolor{comment}{// store RLC PDU list for HARQ}
1547                       std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.find ((*itMap).first);
1548                       \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{m\_dlHarqProcessesRlcPduListBuffer}.
      end ())
1549                         \{
1550                           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI 
      "} << (*itMap).first);
1551                         \}
1552                       (*itRlcPdu).second.at (j).at (newDci.m\_harqProcess).push\_back (newRlcEl);
1553                     \}
1554                 \}
1555               newEl.m\_rlcPduList.push\_back (newRlcPduLe);
1556             \}
1557           \textcolor{keywordflow}{if} ((*itBufReq).first.m\_rnti > (*itMap).first)
1558             \{
1559               \textcolor{keywordflow}{break};
1560             \}
1561         \}
1562       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1563         \{
1564           newDci.m\_ndi.push\_back (1);
1565           newDci.m\_rv.push\_back (0);
1566         \}
1567 
1568       newDci.m\_tpc = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a0021d72c12fdaddd3817ef0eb5a7cd4e}{GetTpc} ((*itMap).first);
1569 
1570       newEl.m\_dci = newDci;
1571 
1572       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\_harqOn} == \textcolor{keyword}{true})
1573         \{
1574           \textcolor{comment}{// store DCI for HARQ}
1575           std::map <uint16\_t, DlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\_dlHarqProcessesDciBuffer}.find (newEl.m\_rnti);
1576           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{m\_dlHarqProcessesDciBuffer}.end ())
1577             \{
1578               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in DCI HARQ buffer for RNTI "} << 
      newEl.m\_rnti);
1579             \}
1580           (*itDci).second.at (newDci.m\_harqProcess) = newDci;
1581           \textcolor{comment}{// refresh timer}
1582           std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itHarqTimer =  
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.find (newEl.m\_rnti);
1583           \textcolor{keywordflow}{if} (itHarqTimer== \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.end ())
1584             \{
1585               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find HARQ timer for RNTI "} << (uint16\_t)newEl.m\_rnti
      );
1586             \}
1587           (*itHarqTimer).second.at (newDci.m\_harqProcess) = 0;
1588         \}
1589 
1590       \textcolor{comment}{// ...more parameters -> ingored in this version}
1591 
1592       ret.m\_buildDataList.push\_back (newEl);
1593 
1594       itMap++;
1595     \} \textcolor{comment}{// end while allocation}
1596   ret.m\_nrOfPdcchOfdmSymbols = 1;   
1597 
1598   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a28f8484af5a32a45ee6c0e51770d83f7}{SchedDlConfigInd} (ret);
1599 
1600 
1601   \textcolor{keywordflow}{return};
1602 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15




Here is the caller graph for this function\+:
% FIG 16


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedUlCqiInfoReq(const struct FfMacSchedSapProvider::SchedUlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a15711a9aaa411036ac353d1688170c58}{}\label{classns3_1_1FdTbfqFfMacScheduler_a15711a9aaa411036ac353d1688170c58}

\begin{DoxyCode}
2152 \{
2153   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2154 \textcolor{comment}{// retrieve the allocation for this subframe}
2155   \textcolor{keywordflow}{switch} (\hyperlink{classns3_1_1FfMacScheduler_adae16e66a1c4231da80a1221297442cf}{m\_ulCqiFilter})
2156     \{
2157     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52af2e0df473ba2c8f9cb131cb760591aed}{FfMacScheduler::SRS\_UL\_CQI}:
2158       \{
2159         \textcolor{comment}{// filter all the CQIs that are not SRS based}
2160         \textcolor{keywordflow}{if} (params.m\_ulCqi.m\_type != \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af4b6dba4243636562c910c4d4761dd7e}{UlCqi\_s::SRS})
2161           \{
2162             \textcolor{keywordflow}{return};
2163           \}
2164       \}
2165       \textcolor{keywordflow}{break};
2166     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52a4a833bc779439b15bd904e1dd8eaa563}{FfMacScheduler::PUSCH\_UL\_CQI}:
2167       \{
2168         \textcolor{comment}{// filter all the CQIs that are not SRS based}
2169         \textcolor{keywordflow}{if} (params.m\_ulCqi.m\_type != \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a9716b20a3095c473ae3fde1eb5d0bb63}{UlCqi\_s::PUSCH})
2170           \{
2171             \textcolor{keywordflow}{return};
2172           \}
2173       \}
2174     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52a84059a597c72335f0a5963c3efcbda71}{FfMacScheduler::ALL\_UL\_CQI}:
2175       \textcolor{keywordflow}{break};
2176 
2177     \textcolor{keywordflow}{default}:
2178       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unknown UL CQI type"});
2179     \}
2180 
2181   \textcolor{keywordflow}{switch} (params.m\_ulCqi.m\_type)
2182     \{
2183     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a9716b20a3095c473ae3fde1eb5d0bb63}{UlCqi\_s::PUSCH}:
2184       \{
2185         std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap;
2186         std::map <uint16\_t, std::vector <double> >::iterator itCqi;
2187         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Collect PUSCH CQIs of Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{"
       subframe no. "} << (0xF & params.m\_sfnSf));
2188         itMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}{m\_allocationMaps}.find (params.m\_sfnSf);
2189         \textcolor{keywordflow}{if} (itMap == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}{m\_allocationMaps}.end ())
2190           \{
2191             \textcolor{keywordflow}{return};
2192           \}
2193         \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < (*itMap).second.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2194           \{
2195             \textcolor{comment}{// convert from fixed point notation Sxxxxxxxxxxx.xxx to double}
2196             \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2197             itCqi = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.find ((*itMap).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2198             \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.end ())
2199               \{
2200                 \textcolor{comment}{// create a new entry}
2201                 std::vector <double> newCqi;
2202                 \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2203                   \{
2204                     \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == j)
2205                       \{
2206                         newCqi.push\_back (sinr);
2207                       \}
2208                     \textcolor{keywordflow}{else}
2209                       \{
2210                         \textcolor{comment}{// initialize with NO\_SINR value.}
2211                         newCqi.push\_back (\hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR});
2212                       \}
2213 
2214                   \}
2215                 \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.insert (std::pair <uint16\_t, std::vector <double> > ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), newCqi));
2216                 \textcolor{comment}{// generate correspondent timer}
2217                 \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\_ueCqiTimers}.insert (std::pair <uint16\_t, uint32\_t > ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold}));
2218               \}
2219             \textcolor{keywordflow}{else}
2220               \{
2221                 \textcolor{comment}{// update the value}
2222                 (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = sinr;
2223                 \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << (*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) << \textcolor{stringliteral}{" RB "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" SINR "} << sinr);
2224                 \textcolor{comment}{// update correspondent timer}
2225                 std::map <uint16\_t, uint32\_t>::iterator itTimers;
2226                 itTimers = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\_ueCqiTimers}.find ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2227                 (*itTimers).second = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold};
2228 
2229               \}
2230 
2231           \}
2232         \textcolor{comment}{// remove obsolete info on allocation}
2233         \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}{m\_allocationMaps}.erase (itMap);
2234       \}
2235       \textcolor{keywordflow}{break};
2236     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af4b6dba4243636562c910c4d4761dd7e}{UlCqi\_s::SRS}:
2237       \{
2238         \textcolor{comment}{// get the RNTI from vendor specific parameters}
2239         uint16\_t rnti = 0;
2240         \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (params.m\_vendorSpecificList.size () > 0);
2241         \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_vendorSpecificList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2242           \{
2243             \textcolor{keywordflow}{if} (params.m\_vendorSpecificList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_type == \hyperlink{lte-vendor-specific-parameters_8h_a3b5e6e766032ab4a8e374a1cfd237a26}{SRS\_CQI\_RNTI\_VSP})
2244               \{
2245                 Ptr<SrsCqiRntiVsp> vsp = DynamicCast<SrsCqiRntiVsp> (params.m\_vendorSpecificList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_value);
2246                 rnti = vsp->GetRnti ();
2247               \}
2248           \}
2249         std::map <uint16\_t, std::vector <double> >::iterator itCqi;
2250         itCqi = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.find (rnti);
2251         \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.end ())
2252           \{
2253             \textcolor{comment}{// create a new entry}
2254             std::vector <double> newCqi;
2255             \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2256               \{
2257                 \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (j));
2258                 newCqi.push\_back (sinr);
2259                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" new SRS-CQI for RB  "} << j << \textcolor{stringliteral}{" value
       "} << sinr);
2260 
2261               \}
2262             \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.insert (std::pair <uint16\_t, std::vector <double> > (rnti, newCqi));
2263             \textcolor{comment}{// generate correspondent timer}
2264             \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\_ueCqiTimers}.insert (std::pair <uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold}));
2265           \}
2266         \textcolor{keywordflow}{else}
2267           \{
2268             \textcolor{comment}{// update the values}
2269             \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2270               \{
2271                 \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (j));
2272                 (*itCqi).second.at (j) = sinr;
2273                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" update SRS-CQI for RB  "} << j << \textcolor{stringliteral}{"
       value "} << sinr);
2274               \}
2275             \textcolor{comment}{// update correspondent timer}
2276             std::map <uint16\_t, uint32\_t>::iterator itTimers;
2277             itTimers = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\_ueCqiTimers}.find (rnti);
2278             (*itTimers).second = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold};
2279 
2280           \}
2281 
2282 
2283       \}
2284       \textcolor{keywordflow}{break};
2285     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a05ca6554bc6fcd96a0a51fbaa8e794c7}{UlCqi\_s::PUCCH\_1}:
2286     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a35664b4bda6f1cd6acfe9edc84c7571d}{UlCqi\_s::PUCCH\_2}:
2287     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af93f36792cb1eed08f6119e4abfe58e8}{UlCqi\_s::PRACH}:
2288       \{
2289         \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"FdTbfqFfMacScheduler supports only PUSCH and SRS UL-CQIs"});
2290       \}
2291       \textcolor{keywordflow}{break};
2292     \textcolor{keywordflow}{default}:
2293       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unknown type of UL-CQI"});
2294     \}
2295   \textcolor{keywordflow}{return};
2296 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17




Here is the caller graph for this function\+:
% FIG 18


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}}
\index{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters \&params)}{DoSchedUlMacCtrlInfoReq(const struct FfMacSchedSapProvider::SchedUlMacCtrlInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a722a8c6f2a83857d47e941bdad36d73f}{}\label{classns3_1_1FdTbfqFfMacScheduler_a722a8c6f2a83857d47e941bdad36d73f}

\begin{DoxyCode}
2108 \{
2109   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2110 
2111   std::map <uint16\_t,uint32\_t>::iterator it;
2112 
2113   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_macCeList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2114     \{
2115       \textcolor{keywordflow}{if} ( params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_macCeType == \hyperlink{structns3_1_1MacCeListElement__s_a270a6526dfc7da02e9dc91823c290f6bac50796b01160b1825ec34efa1ad9f051}{MacCeListElement\_s::BSR} )
2116         \{
2117           \textcolor{comment}{// buffer status report}
2118           \textcolor{comment}{// note that this scheduler does not differentiate the}
2119           \textcolor{comment}{// allocation according to which LCGs have more/less bytes}
2120           \textcolor{comment}{// to send.}
2121           \textcolor{comment}{// Hence the BSR of different LCGs are just summed up to get}
2122           \textcolor{comment}{// a total queue size that is used for allocation purposes.}
2123 
2124           uint32\_t buffer = 0;
2125           \textcolor{keywordflow}{for} (uint8\_t lcg = 0; lcg < 4; ++lcg)
2126             \{
2127               uint8\_t bsrId = params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_macCeValue.m\_bufferStatus.at (lcg);
2128               buffer += \hyperlink{classns3_1_1BufferSizeLevelBsr_a67fc905f267ed8ac5a617fe229699122}{BufferSizeLevelBsr::BsrId2BufferSize} (bsrId);
2129             \}
2130           
2131           uint16\_t rnti = params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
2132           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"RNTI="} << rnti << \textcolor{stringliteral}{" buffer="} << buffer);
2133           it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.find (rnti);
2134           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end ())
2135             \{
2136               \textcolor{comment}{// create the new entry}
2137               \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, buffer));
2138             \}
2139           \textcolor{keywordflow}{else}
2140             \{
2141               \textcolor{comment}{// update the buffer size value}
2142               (*it).second = buffer;
2143             \}
2144         \}
2145     \}
2146 
2147   \textcolor{keywordflow}{return};
2148 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19




Here is the caller graph for this function\+:
% FIG 20


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}}
\index{Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Noise\+Interference\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters \&params)}{DoSchedUlNoiseInterferenceReq(const struct FfMacSchedSapProvider::SchedUlNoiseInterferenceReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Noise\+Interference\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a98a457d2928d95c0d3f759abf37c2e01}{}\label{classns3_1_1FdTbfqFfMacScheduler_a98a457d2928d95c0d3f759abf37c2e01}

\begin{DoxyCode}
2094 \{
2095   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2096   \textcolor{keywordflow}{return};
2097 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 21


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}}
\index{Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Sr\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters \&params)}{DoSchedUlSrInfoReq(const struct FfMacSchedSapProvider::SchedUlSrInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Sr\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aa9c40fa29197361fa5b1c43c1407725d}{}\label{classns3_1_1FdTbfqFfMacScheduler_aa9c40fa29197361fa5b1c43c1407725d}

\begin{DoxyCode}
2101 \{
2102   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2103   \textcolor{keywordflow}{return};
2104 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 22


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}}
\index{Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters \&params)}{DoSchedUlTriggerReq(const struct FfMacSchedSapProvider::SchedUlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a393439d7b65f01d14f335b1cf3fc8423}{}\label{classns3_1_1FdTbfqFfMacScheduler_a393439d7b65f01d14f335b1cf3fc8423}

\begin{DoxyCode}
1709 \{
1710   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL - Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{" subframe no. "} 
      << (0xF & params.m\_sfnSf) << \textcolor{stringliteral}{" size "} << params.m\_ulInfoList.size ());
1711 
1712   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ad2dfae20e850223f711180ab3a900cfd}{RefreshUlCqiMaps} ();
1713   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a14e6bcaf7db6afcb42f75122717313b1}{ReportUlCqiInfo} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi});
1714 
1715   \textcolor{comment}{// Generate RBs map}
1716   FfMacSchedSapUser::SchedUlConfigIndParameters ret;
1717   std::vector <bool> rbMap;
1718   uint16\_t rbAllocatedNum = 0;
1719   std::set <uint16\_t> rntiAllocated;
1720   std::vector <uint16\_t> rbgAllocationMap;
1721   \textcolor{comment}{// update with RACH allocation map}
1722   rbgAllocationMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{m\_rachAllocationMap};
1723   \textcolor{comment}{//rbgAllocationMap.resize (m\_cschedCellConfig.m\_ulBandwidth, 0);}
1724   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{m\_rachAllocationMap}.clear ();
1725   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
1726 
1727   rbMap.resize (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, \textcolor{keyword}{false});
1728 
1729   rbMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_aafd23b22a27ec83e03d54795c122d175}{GetAvailableUlRbg} ();
1730 
1731   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = rbMap.begin (); it != rbMap.end (); it++)
1732     \{
1733       \textcolor{keywordflow}{if} ((*it) == true )
1734         \{
1735           rbAllocatedNum++;
1736         \}
1737     \}
1738 
1739   uint8\_t minContinuousUlBandwidth = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->
      \hyperlink{classns3_1_1LteFfrSapProvider_a78c8a0c801d8a7d4f2e853f5138fd577}{GetMinContinuousUlBandwidth} ();
1740   uint8\_t ffrUlBandwidth = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocatedNum
      ;
1741 
1742   \textcolor{comment}{// remove RACH allocation}
1743   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1744     \{
1745       \textcolor{keywordflow}{if} (rbgAllocationMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) != 0)
1746         \{
1747           rbMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = \textcolor{keyword}{true};
1748           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Allocated for RACH "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1749         \}
1750     \}
1751 
1752 
1753   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\_harqOn} == \textcolor{keyword}{true})
1754     \{
1755       \textcolor{comment}{//   Process UL HARQ feedback}
1756       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_ulInfoList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1757         \{        
1758           \textcolor{keywordflow}{if} (params.m\_ulInfoList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_receptionStatus == 
      \hyperlink{structns3_1_1UlInfoListElement__s_a2a4dff5145d25c81086660e991db6f61a98aed738fd24811d3461668e394a53c8}{UlInfoListElement\_s::NotOk})
1759             \{
1760               \textcolor{comment}{// retx correspondent block: retrieve the UL-DCI}
1761               uint16\_t rnti = params.m\_ulInfoList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1762               std::map <uint16\_t, uint8\_t>::iterator itProcId = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.find (rnti);
1763               \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.end ())
1764                 \{
1765                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1766                 \}
1767               uint8\_t harqId = (uint8\_t)((*itProcId).second - \hyperlink{lte-common_8h_a275321ee206f130c3ddc81fcdaa13cfd}{HARQ\_PERIOD}) % 
      \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
1768               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-HARQ retx RNTI "} << rnti << \textcolor{stringliteral}{" harqId "} << (uint16\_t)
      harqId << \textcolor{stringliteral}{" i "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" size "}  << params.m\_ulInfoList.size ());
1769               std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itHarq = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.find (rnti);
1770               \textcolor{keywordflow}{if} (itHarq == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.end ())
1771                 \{
1772                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1773                   \textcolor{keywordflow}{continue};
1774                 \}
1775               UlDciListElement\_s dci = (*itHarq).second.at (harqId);
1776               std::map <uint16\_t, UlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\_ulHarqProcessesStatus}.find (rnti);
1777               \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\_ulHarqProcessesStatus}.end ())
1778                 \{
1779                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1780                 \}
1781               \textcolor{keywordflow}{if} ((*itStat).second.at (harqId) >= 3)
1782                 \{
1783                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Max number of retransmissions reached (UL)-> drop process"});
1784                   \textcolor{keywordflow}{continue};
1785                 \}
1786               \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
1787               \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = dci.m\_rbStart; j < dci.m\_rbStart + dci.m\_rbLen; j++)
1788                 \{
1789                   \textcolor{keywordflow}{if} (rbMap.at (j) == \textcolor{keyword}{true})
1790                     \{
1791                       free = \textcolor{keyword}{false};
1792                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" BUSY "} << j);
1793                     \}
1794                 \}
1795               \textcolor{keywordflow}{if} (free)
1796                 \{
1797                   \textcolor{comment}{// retx on the same RBs}
1798                   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = dci.m\_rbStart; j < dci.m\_rbStart + dci.m\_rbLen; j++)
1799                     \{
1800                       rbMap.at (j) = \textcolor{keyword}{true};
1801                       rbgAllocationMap.at (j) = dci.m\_rnti;
1802                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tRB "} << j);
1803                       rbAllocatedNum++;
1804                     \}
1805                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Send retx in the same RBs "} << (uint16\_t)dci.m\_rbStart 
      << \textcolor{stringliteral}{" to "} << dci.m\_rbStart + dci.m\_rbLen << \textcolor{stringliteral}{" RV "} << (*itStat).second.at (harqId) + 1);
1806                 \}
1807               \textcolor{keywordflow}{else}
1808                 \{
1809                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Cannot allocate retx due to RACH allocations for UE "} << rnti);
1810                   \textcolor{keywordflow}{continue};
1811                 \}
1812               dci.m\_ndi = 0;
1813               \textcolor{comment}{// Update HARQ buffers with new HarqId}
1814               (*itStat).second.at ((*itProcId).second) = (*itStat).second.at (harqId) + 1;
1815               (*itStat).second.at (harqId) = 0;
1816               (*itHarq).second.at ((*itProcId).second) = dci;
1817               ret.m\_dciList.push\_back (dci);
1818               rntiAllocated.insert (dci.m\_rnti);
1819             \}
1820             \textcolor{keywordflow}{else}
1821             \{
1822               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ-ACK feedback from RNTI "} << params.m\_ulInfoList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1823             \}
1824         \}
1825     \}
1826 
1827   std::map <uint16\_t,uint32\_t>::iterator it;
1828   \textcolor{keywordtype}{int} nflows = 0;
1829 
1830   \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.begin (); it != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end (); it++)
1831     \{
1832       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
1833       \textcolor{comment}{// select UEs with queues not empty and not yet allocated for HARQ}
1834       \textcolor{keywordflow}{if} (((*it).second > 0)&&(itRnti == rntiAllocated.end ()))
1835         \{
1836           nflows++;
1837         \}
1838     \}
1839 
1840   \textcolor{keywordflow}{if} (nflows == 0)
1841     \{
1842       \textcolor{keywordflow}{if} (ret.m\_dciList.size () > 0)
1843         \{
1844           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}{m\_allocationMaps}.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.
      m\_sfnSf, rbgAllocationMap));
1845           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a1b89636256701a84d990db7db8aea874}{SchedUlConfigInd} (ret);
1846         \}
1847         
1848       \textcolor{keywordflow}{return};  \textcolor{comment}{// no flows to be scheduled}
1849     \}
1850 
1851 
1852   \textcolor{comment}{// Divide the remaining resources equally among the active users starting from the subsequent one served
       last scheduling trigger}
1853   uint16\_t tempRbPerFlow = (ffrUlBandwidth) / (nflows + rntiAllocated.size ());
1854   uint16\_t rbPerFlow = (minContinuousUlBandwidth < tempRbPerFlow) ? minContinuousUlBandwidth : 
      tempRbPerFlow;
1855 
1856   \textcolor{keywordflow}{if} (rbPerFlow < 3)
1857     \{
1858       rbPerFlow = 3;  \textcolor{comment}{// at least 3 rbg per flow (till available resource) to ensure TxOpportunity >= 7
       bytes}
1859     \}
1860   \textcolor{keywordtype}{int} rbAllocated = 0;
1861 
1862   std::map <uint16\_t, fdtbfqsFlowPerf\_t>::iterator itStats;
1863   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl} != 0)
1864     \{
1865       \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.begin (); it != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end (); it++)
1866         \{
1867           \textcolor{keywordflow}{if} ((*it).first == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl})
1868             \{
1869               \textcolor{keywordflow}{break};
1870             \}
1871         \}
1872       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end ())
1873         \{
1874           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" no user found"});
1875         \}
1876     \}
1877   \textcolor{keywordflow}{else}
1878     \{
1879       it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.begin ();
1880       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl} = (*it).first;
1881     \}
1882   \textcolor{keywordflow}{do}
1883     \{
1884       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
1885       \textcolor{keywordflow}{if} ((itRnti != rntiAllocated.end ())||((*it).second == 0))
1886         \{
1887           \textcolor{comment}{// UE already allocated for UL-HARQ -> skip it}
1888           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE already allocated in HARQ -> discared, RNTI "} << (*it).
      first);
1889           it++;
1890           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end ())
1891             \{
1892               \textcolor{comment}{// restart from the first}
1893               it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.begin ();
1894             \}
1895           \textcolor{keywordflow}{continue};
1896         \}
1897       \textcolor{keywordflow}{if} (rbAllocated + rbPerFlow - 1 > \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth})
1898         \{
1899           \textcolor{comment}{// limit to physical resources last resource assignment}
1900           rbPerFlow = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocated;
1901           \textcolor{comment}{// at least 3 rbg per flow to ensure TxOpportunity >= 7 bytes}
1902           \textcolor{keywordflow}{if} (rbPerFlow < 3)
1903             \{
1904               \textcolor{comment}{// terminate allocation}
1905               rbPerFlow = 0;      
1906             \}
1907         \}
1908 
1909       rbAllocated = 0;
1910       UlDciListElement\_s uldci;
1911       uldci.m\_rnti = (*it).first;
1912       uldci.m\_rbLen = rbPerFlow;
1913       \textcolor{keywordtype}{bool} allocated = \textcolor{keyword}{false};
1914       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RB Allocated "} << rbAllocated << \textcolor{stringliteral}{" rbPerFlow "} << rbPerFlow << \textcolor{stringliteral}{"
       flows "} << nflows);
1915       \textcolor{keywordflow}{while} ((!allocated)&&((rbAllocated + rbPerFlow - \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) < 1) && (rbPerFlow != 0))
1916         \{
1917           \textcolor{comment}{// check availability}
1918           \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
1919           \textcolor{keywordflow}{for} (uint16\_t j = rbAllocated; j < rbAllocated + rbPerFlow; j++)
1920             \{
1921               \textcolor{keywordflow}{if} (rbMap.at (j) == \textcolor{keyword}{true})
1922                 \{
1923                   free = \textcolor{keyword}{false};
1924                   \textcolor{keywordflow}{break};
1925                 \}
1926               \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a3ef80840549b8ea3d50d2cef8a9866e2}{IsUlRbgAvailableForUe} (j, (*it).
      first)) == \textcolor{keyword}{false})
1927                 \{
1928                   free = \textcolor{keyword}{false};
1929                   \textcolor{keywordflow}{break};
1930                 \}
1931             \}
1932           \textcolor{keywordflow}{if} (free)
1933             \{
1934               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"RNTI: "}<< (*it).first<< \textcolor{stringliteral}{" RB Allocated "} << rbAllocated << \textcolor{stringliteral}{"
       rbPerFlow "} << rbPerFlow << \textcolor{stringliteral}{" flows "} << nflows);
1935               uldci.m\_rbStart = rbAllocated;
1936 
1937               \textcolor{keywordflow}{for} (uint16\_t j = rbAllocated; j < rbAllocated + rbPerFlow; j++)
1938                 \{
1939                   rbMap.at (j) = \textcolor{keyword}{true};
1940                   \textcolor{comment}{// store info on allocation for managing ul-cqi interpretation}
1941                   rbgAllocationMap.at (j) = (*it).first;
1942                 \}
1943               rbAllocated += rbPerFlow;
1944               allocated = \textcolor{keyword}{true};
1945               \textcolor{keywordflow}{break};
1946             \}
1947           rbAllocated++;
1948           \textcolor{keywordflow}{if} (rbAllocated + rbPerFlow - 1 > \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth})
1949             \{
1950               \textcolor{comment}{// limit to physical resources last resource assignment}
1951               rbPerFlow = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocated;
1952               \textcolor{comment}{// at least 3 rbg per flow to ensure TxOpportunity >= 7 bytes}
1953               \textcolor{keywordflow}{if} (rbPerFlow < 3)
1954                 \{
1955                   \textcolor{comment}{// terminate allocation}
1956                   rbPerFlow = 0;                 
1957                 \}
1958             \}
1959         \}
1960       \textcolor{keywordflow}{if} (!allocated)
1961         \{
1962           \textcolor{comment}{// unable to allocate new resource: finish scheduling}
1963 \textcolor{comment}{//          m\_nextRntiUl = (*it).first;}
1964 \textcolor{comment}{//          if (ret.m\_dciList.size () > 0)}
1965 \textcolor{comment}{//            \{}
1966 \textcolor{comment}{//              m\_schedSapUser->SchedUlConfigInd (ret);}
1967 \textcolor{comment}{//            \}}
1968 \textcolor{comment}{//          m\_allocationMaps.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.m\_sfnSf,
       rbgAllocationMap));}
1969 \textcolor{comment}{//          return;}
1970           \textcolor{keywordflow}{break};
1971         \}
1972 
1973 
1974 
1975       std::map <uint16\_t, std::vector <double> >::iterator itCqi = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.find ((*it).first);
1976       \textcolor{keywordtype}{int} cqi = 0;
1977       \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.end ())
1978         \{
1979           \textcolor{comment}{// no cqi info about this UE}
1980           uldci.m\_mcs = 0; \textcolor{comment}{// MCS 0 -> UL-AMC TBD}
1981         \}
1982       \textcolor{keywordflow}{else}
1983         \{
1984           \textcolor{comment}{// take the lowest CQI value (worst RB)}
1985           \textcolor{keywordtype}{double} minSinr = (*itCqi).second.at (uldci.m\_rbStart);
1986           \textcolor{keywordflow}{if} (minSinr == \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
1987             \{
1988               minSinr = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a796f3c39b9129b67c429d9d122525ae0}{EstimateUlSinr} ((*it).first, uldci.m\_rbStart);
1989             \}
1990           \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = uldci.m\_rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < uldci.m\_rbStart + uldci.m\_rbLen; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1991             \{
1992               \textcolor{keywordtype}{double} sinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1993               \textcolor{keywordflow}{if} (sinr == \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
1994                 \{
1995                   sinr = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a796f3c39b9129b67c429d9d122525ae0}{EstimateUlSinr} ((*it).first, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1996                 \}
1997               \textcolor{keywordflow}{if} ((*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) < minSinr)
1998                 \{
1999                   minSinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
2000                 \}
2001             \}
2002 
2003           \textcolor{comment}{// translate SINR -> cqi: WILD ACK: same as DL}
2004           \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = log2 ( 1 + (
2005                                  std::pow (10, minSinr / 10 )  /
2006                                  ( (-std::log (5.0 * 0.00005 )) / 1.5) ));
2007           cqi = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetCqiFromSpectralEfficiency (s);
2008           \textcolor{keywordflow}{if} (cqi == 0)
2009             \{
2010               it++;
2011               \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end ())
2012                 \{
2013                   \textcolor{comment}{// restart from the first}
2014                   it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.begin ();
2015                 \}
2016               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE discared for CQI=0, RNTI "} << uldci.m\_rnti);
2017               \textcolor{comment}{// remove UE from allocation map}
2018               \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = uldci.m\_rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < uldci.m\_rbStart + uldci.m\_rbLen; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2019                 \{
2020                   rbgAllocationMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
2021                 \}
2022               \textcolor{keywordflow}{continue}; \textcolor{comment}{// CQI == 0 means "out of range" (see table 7.2.3-1 of 36.213)}
2023             \}
2024           uldci.m\_mcs = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetMcsFromCqi (cqi);
2025         \}
2026 
2027       uldci.m\_tbSize = (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{m\_amc}->GetTbSizeFromMcs (uldci.m\_mcs, rbPerFlow) / 8);
2028       \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aecdd6c2d6176edebe823a9cb22dfb317}{UpdateUlRlcBufferInfo} (uldci.m\_rnti, uldci.m\_tbSize);
2029       uldci.m\_ndi = 1;
2030       uldci.m\_cceIndex = 0;
2031       uldci.m\_aggrLevel = 1;
2032       uldci.m\_ueTxAntennaSelection = 3; \textcolor{comment}{// antenna selection OFF}
2033       uldci.m\_hopping = \textcolor{keyword}{false};
2034       uldci.m\_n2Dmrs = 0;
2035       uldci.m\_tpc = 0; \textcolor{comment}{// no power control}
2036       uldci.m\_cqiRequest = \textcolor{keyword}{false}; \textcolor{comment}{// only period CQI at this stage}
2037       uldci.m\_ulIndex = 0; \textcolor{comment}{// TDD parameter}
2038       uldci.m\_dai = 1; \textcolor{comment}{// TDD parameter}
2039       uldci.m\_freqHopping = 0;
2040       uldci.m\_pdcchPowerOffset = 0; \textcolor{comment}{// not used}
2041       ret.m\_dciList.push\_back (uldci);
2042       \textcolor{comment}{// store DCI for HARQ\_PERIOD}
2043       uint8\_t harqId = 0;
2044       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\_harqOn} == \textcolor{keyword}{true})
2045         \{
2046           std::map <uint16\_t, uint8\_t>::iterator itProcId;
2047           itProcId = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.find (uldci.m\_rnti);
2048           \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{m\_ulHarqCurrentProcessId}.end ())
2049             \{
2050               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << uldci.m\_rnti);
2051             \}
2052           harqId = (*itProcId).second;
2053           std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.find (uldci.m\_rnti);
2054           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{m\_ulHarqProcessesDciBuffer}.end ())
2055             \{
2056               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in UL DCI HARQ buffer for RNTI "} << 
      uldci.m\_rnti);
2057             \}
2058           (*itDci).second.at (harqId) = uldci;
2059           \textcolor{comment}{// Update HARQ process status (RV 0)}
2060           std::map <uint16\_t, UlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\_ulHarqProcessesStatus}.find (uldci.m\_rnti);
2061           \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{m\_ulHarqProcessesStatus}.end ())
2062             \{
2063               \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << uldci.
      m\_rnti);
2064             \}
2065           (*itStat).second.at (harqId) = 0;
2066         \}
2067 
2068       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE Allocation RNTI "} << (*it).first << \textcolor{stringliteral}{" startPRB "} << (uint32\_t)
      uldci.m\_rbStart << \textcolor{stringliteral}{" nPRB "} << (uint32\_t)uldci.m\_rbLen << \textcolor{stringliteral}{" CQI "} << cqi << \textcolor{stringliteral}{" MCS "} << (uint32\_t)uldci.m\_mcs 
      << \textcolor{stringliteral}{" TBsize "} << uldci.m\_tbSize << \textcolor{stringliteral}{" RbAlloc "} << rbAllocated << \textcolor{stringliteral}{" harqId "} << (uint16\_t)harqId);
2069 
2070       it++;
2071       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end ())
2072         \{
2073           \textcolor{comment}{// restart from the first}
2074           it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.begin ();
2075         \}
2076       \textcolor{keywordflow}{if} ((rbAllocated == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) || (rbPerFlow ==
       0))
2077         \{
2078           \textcolor{comment}{// Stop allocation: no more PRBs}
2079           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl} = (*it).first;
2080           \textcolor{keywordflow}{break};
2081         \}
2082     \}
2083   \textcolor{keywordflow}{while} (((*it).first != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{m\_nextRntiUl})&&(rbPerFlow!=0));
2084 
2085 
2086   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}{m\_allocationMaps}.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.m\_sfnSf, 
      rbgAllocationMap));
2087   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a1b89636256701a84d990db7db8aea874}{SchedUlConfigInd} (ret);
2088 
2089   \textcolor{keywordflow}{return};
2090 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23




Here is the caller graph for this function\+:
% FIG 24


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}}
\index{Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Estimate\+Ul\+Sinr(uint16\+\_\+t rnti, uint16\+\_\+t rb)}{EstimateUlSinr(uint16_t rnti, uint16_t rb)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Estimate\+Ul\+Sinr (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{rb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a796f3c39b9129b67c429d9d122525ae0}{}\label{classns3_1_1FdTbfqFfMacScheduler_a796f3c39b9129b67c429d9d122525ae0}

\begin{DoxyCode}
1678 \{
1679   std::map <uint16\_t, std::vector <double> >::iterator itCqi = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.find (rnti);
1680   \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.end ())
1681     \{
1682       \textcolor{comment}{// no cqi info about this UE}
1683       \textcolor{keywordflow}{return} (\hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR});
1684 
1685     \}
1686   \textcolor{keywordflow}{else}
1687     \{
1688       \textcolor{comment}{// take the average SINR value among the available}
1689       \textcolor{keywordtype}{double} sinrSum = 0;
1690       \textcolor{keywordtype}{int} sinrNum = 0;
1691       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1692         \{
1693           \textcolor{keywordtype}{double} sinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1694           \textcolor{keywordflow}{if} (sinr != \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
1695             \{
1696               sinrSum += sinr;
1697               sinrNum++;
1698             \}
1699         \}
1700       \textcolor{keywordtype}{double} estimatedSinr = (sinrNum > 0) ? (sinrSum / sinrNum) : DBL\_MAX;
1701       \textcolor{comment}{// store the value}
1702       (*itCqi).second.at (rb) = estimatedSinr;
1703       \textcolor{keywordflow}{return} (estimatedSinr);
1704     \}
1705 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 25


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Csched\+Sap\+Provider()}{GetFfMacCschedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Csched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aba8a28cd9c3a16dda5b631baa1d9fa6e}{}\label{classns3_1_1FdTbfqFfMacScheduler_aba8a28cd9c3a16dda5b631baa1d9fa6e}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Csched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a458388c88c892d32e2d7a48883947379}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
314 \{
315   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab9204a4d0edccb863de0f60b2d818c4d}{m\_cschedSapProvider};
316 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Sched\+Sap\+Provider()}{GetFfMacSchedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Sched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a8e16f360bc391ebcf0a9c65df7227517}{}\label{classns3_1_1FdTbfqFfMacScheduler_a8e16f360bc391ebcf0a9c65df7227517}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Sched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_ad3a2aca6f1c01fbddf88bfbf19cc07a4}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
320 \{
321   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac42b10eec7e048dc14078359273ffeeb}{m\_schedSapProvider};
322 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}}
\index{Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Lte\+Ffr\+Sap\+User()}{GetLteFfrSapUser()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+User} $\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Get\+Lte\+Ffr\+Sap\+User (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_af7a2c7fdac3cf75075c2c8a29ab37d7b}{}\label{classns3_1_1FdTbfqFfMacScheduler_af7a2c7fdac3cf75075c2c8a29ab37d7b}
\begin{DoxyReturn}{Returns}
the User part of the Lte\+Ffr\+Sap provided by the Ffr\+Algorithm 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a32fe62051fd6ac175116417df11e6c4e}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
332 \{
333   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a33331ad1347d0db07f6b6bce134ff7bf}{m\_ffrSapUser};
334 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Get\+Rbg\+Size@{Get\+Rbg\+Size}}
\index{Get\+Rbg\+Size@{Get\+Rbg\+Size}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Rbg\+Size(int dlbandwidth)}{GetRbgSize(int dlbandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Get\+Rbg\+Size (
\begin{DoxyParamCaption}
\item[{int}]{dlbandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aee50f9f1c073802906068329c43811f1}{}\label{classns3_1_1FdTbfqFfMacScheduler_aee50f9f1c073802906068329c43811f1}

\begin{DoxyCode}
548 \{
549   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 4; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
550     \{
551       \textcolor{keywordflow}{if} (dlbandwidth < \hyperlink{namespacens3_aef6c46038962d1fa30e2ea246148b44b}{FdTbfqType0AllocationRbg}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}])
552         \{
553           \textcolor{keywordflow}{return} (i + 1);
554         \}
555     \}
556 
557   \textcolor{keywordflow}{return} (-1);
558 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 26


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a677e3b83d8d192546172a2404403640a}{}\label{classns3_1_1FdTbfqFfMacScheduler_a677e3b83d8d192546172a2404403640a}

\begin{DoxyCode}
253 \{
254   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::FdTbfqFfMacScheduler"})
255     .SetParent<\hyperlink{classns3_1_1FfMacScheduler_aa4c8ce28dbba2c19ff3328533c444045}{FfMacScheduler}> ()
256     .SetGroupName(\textcolor{stringliteral}{"Lte"})
257     .AddConstructor<\hyperlink{classns3_1_1FdTbfqFfMacScheduler_ac477fe3176012b8f47af380d23ae8cb2}{FdTbfqFfMacScheduler}> ()
258     .AddAttribute (\textcolor{stringliteral}{"CqiTimerThreshold"},
259                    \textcolor{stringliteral}{"The number of TTIs a CQI is valid (default 1000 - 1 sec.)"},
260                    UintegerValue (1000),
261                    MakeUintegerAccessor (&
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{FdTbfqFfMacScheduler::m\_cqiTimersThreshold}),
262                    MakeUintegerChecker<uint32\_t> ())
263     .AddAttribute (\textcolor{stringliteral}{"DebtLimit"},
264                    \textcolor{stringliteral}{"Flow debt limit (default -625000 bytes)"},
265                    IntegerValue (-625000),
266                    MakeIntegerAccessor (&\hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa73b1800df86289d9a1fc49886c9a175}{FdTbfqFfMacScheduler::m\_debtLimit}
      ),
267                    MakeIntegerChecker<int> ())
268     .AddAttribute (\textcolor{stringliteral}{"CreditLimit"},
269                    \textcolor{stringliteral}{"Flow credit limit (default 625000 bytes)"},
270                    UintegerValue (625000),
271                    MakeUintegerAccessor (&\hyperlink{classns3_1_1FdTbfqFfMacScheduler_aa390b2d541c6190fd44f6457fe006a38}{FdTbfqFfMacScheduler::m\_creditLimit}
      ),
272                    MakeUintegerChecker<uint32\_t> ())
273     .AddAttribute (\textcolor{stringliteral}{"TokenPoolSize"},
274                    \textcolor{stringliteral}{"The maximum value of flow token pool (default 1 bytes)"},
275                    UintegerValue (1),
276                    MakeUintegerAccessor (&\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a0f729f9c65abdbcd28f36269f501fe14}{FdTbfqFfMacScheduler::m\_tokenPoolSize}
      ),
277                    MakeUintegerChecker<uint32\_t> ())
278     .AddAttribute (\textcolor{stringliteral}{"CreditableThreshold"},
279                    \textcolor{stringliteral}{"Threshold of flow credit (default 0 bytes)"},
280                    UintegerValue (0),
281                    MakeUintegerAccessor (&
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a581771a634fa44e3e817131accd9db1f}{FdTbfqFfMacScheduler::m\_creditableThreshold}),
282                    MakeUintegerChecker<uint32\_t> ())
283 
284     .AddAttribute (\textcolor{stringliteral}{"HarqEnabled"},
285                    \textcolor{stringliteral}{"Activate/Deactivate the HARQ [by default is active]."},
286                    BooleanValue (\textcolor{keyword}{true}),
287                    MakeBooleanAccessor (&\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{FdTbfqFfMacScheduler::m\_harqOn}),
288                    MakeBooleanChecker ())
289     .AddAttribute (\textcolor{stringliteral}{"UlGrantMcs"},
290                    \textcolor{stringliteral}{"The MCS of the UL grant, must be [0..15] (default 0)"},
291                    UintegerValue (0),
292                    MakeUintegerAccessor (&\hyperlink{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{FdTbfqFfMacScheduler::m\_ulGrantMcs}
      ),
293                    MakeUintegerChecker<uint8\_t> ())
294   ;
295   \textcolor{keywordflow}{return} tid;
296 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Harq\+Process\+Availability@{Harq\+Process\+Availability}}
\index{Harq\+Process\+Availability@{Harq\+Process\+Availability}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Harq\+Process\+Availability(uint16\+\_\+t rnti)}{HarqProcessAvailability(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Harq\+Process\+Availability (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ad6dba4921f9a502a6c02d1f9095f0a17}{}\label{classns3_1_1FdTbfqFfMacScheduler_ad6dba4921f9a502a6c02d1f9095f0a17}


Return the availability of free process for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}

\begin{DoxyCode}
586 \{
587   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti);
588 
589   std::map <uint16\_t, uint8\_t>::iterator it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{m\_dlHarqCurrentProcessId}.find (rnti);
590   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{m\_dlHarqCurrentProcessId}.end ())
591     \{
592       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id found for this RNTI "} << rnti);
593     \}
594   std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.find (rnti);
595   \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.end ())
596     \{
597       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Statusfound for this RNTI "} << rnti);
598     \}
599   uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = (*it).second;
600   \textcolor{keywordflow}{do}
601     \{
602       i = (i + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
603     \}
604   \textcolor{keywordflow}{while} ( ((*itStat).second.at (i) != 0)&&(i != (*it).second));
605   \textcolor{keywordflow}{if} ((*itStat).second.at (i) == 0)
606     \{
607       \textcolor{keywordflow}{return} (\textcolor{keyword}{true});
608     \}
609   \textcolor{keywordflow}{else}
610     \{
611       \textcolor{keywordflow}{return} (\textcolor{keyword}{false}); \textcolor{comment}{// return a not valid harq proc id}
612     \}
613 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 28


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}}
\index{Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Lc\+Active\+Per\+Flow(uint16\+\_\+t rnti)}{LcActivePerFlow(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Lc\+Active\+Per\+Flow (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a606f29c62ab153d6a584da5371070045}{}\label{classns3_1_1FdTbfqFfMacScheduler_a606f29c62ab153d6a584da5371070045}

\begin{DoxyCode}
563 \{
564   std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
565   \textcolor{keywordtype}{int} lcActive = 0;
566   \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.begin (); it != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end (); it++)
567     \{
568       \textcolor{keywordflow}{if} (((*it).first.m\_rnti == rnti) && (((*it).second.m\_rlcTransmissionQueueSize > 0)
569                                            || ((*it).second.m\_rlcRetransmissionQueueSize > 0)
570                                            || ((*it).second.m\_rlcStatusPduSize > 0) ))
571         \{
572           lcActive++;
573         \}
574       \textcolor{keywordflow}{if} ((*it).first.m\_rnti > rnti)
575         \{
576           \textcolor{keywordflow}{break};
577         \}
578     \}
579   \textcolor{keywordflow}{return} (lcActive);
580 
581 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 29


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}}
\index{Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Dl\+Cqi\+Maps(void)}{RefreshDlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Refresh\+Dl\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a45264dfea612218caa30fa414ea7989c}{}\label{classns3_1_1FdTbfqFfMacScheduler_a45264dfea612218caa30fa414ea7989c}

\begin{DoxyCode}
2300 \{
2301   \textcolor{comment}{// refresh DL CQI P01 Map}
2302   std::map <uint16\_t,uint32\_t>::iterator itP10 = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}{m\_p10CqiTimers}.begin ();
2303   \textcolor{keywordflow}{while} (itP10 != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}{m\_p10CqiTimers}.end ())
2304     \{
2305       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" P10-CQI for user "} << (*itP10).first << \textcolor{stringliteral}{" is "} << (uint32\_t)
      (*itP10).second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold});
2306       \textcolor{keywordflow}{if} ((*itP10).second == 0)
2307         \{
2308           \textcolor{comment}{// delete correspondent entries}
2309           std::map <uint16\_t,uint8\_t>::iterator itMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{m\_p10CqiRxed}.find ((*itP10).first);
2310           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{m\_p10CqiRxed}.end (), \textcolor{stringliteral}{" Does not find CQI report
       for user "} << (*itP10).first);
2311           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" P10-CQI expired for user "} << (*itP10).first);
2312           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{m\_p10CqiRxed}.erase (itMap);
2313           std::map <uint16\_t,uint32\_t>::iterator temp = itP10;
2314           itP10++;
2315           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}{m\_p10CqiTimers}.erase (temp);
2316         \}
2317       \textcolor{keywordflow}{else}
2318         \{
2319           (*itP10).second--;
2320           itP10++;
2321         \}
2322     \}
2323 
2324   \textcolor{comment}{// refresh DL CQI A30 Map}
2325   std::map <uint16\_t,uint32\_t>::iterator itA30 = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}{m\_a30CqiTimers}.begin ();
2326   \textcolor{keywordflow}{while} (itA30 != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}{m\_a30CqiTimers}.end ())
2327     \{
2328       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" A30-CQI for user "} << (*itA30).first << \textcolor{stringliteral}{" is "} << (uint32\_t)
      (*itA30).second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold});
2329       \textcolor{keywordflow}{if} ((*itA30).second == 0)
2330         \{
2331           \textcolor{comment}{// delete correspondent entries}
2332           std::map <uint16\_t,SbMeasResult\_s>::iterator itMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.find ((*itA30).
      first);
2333           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.end (), \textcolor{stringliteral}{" Does not find CQI report
       for user "} << (*itA30).first);
2334           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" A30-CQI expired for user "} << (*itA30).first);
2335           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{m\_a30CqiRxed}.erase (itMap);
2336           std::map <uint16\_t,uint32\_t>::iterator temp = itA30;
2337           itA30++;
2338           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}{m\_a30CqiTimers}.erase (temp);
2339         \}
2340       \textcolor{keywordflow}{else}
2341         \{
2342           (*itA30).second--;
2343           itA30++;
2344         \}
2345     \}
2346 
2347   \textcolor{keywordflow}{return};
2348 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 30


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}}
\index{Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Harq\+Processes()}{RefreshHarqProcesses()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Refresh\+Harq\+Processes (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a3c8688dfe09de01251cc4d15a4f620c6}{}\label{classns3_1_1FdTbfqFfMacScheduler_a3c8688dfe09de01251cc4d15a4f620c6}


Refresh H\+A\+RQ processes according to the timers. 


\begin{DoxyCode}
660 \{
661   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
662 
663   std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itTimers;
664   \textcolor{keywordflow}{for} (itTimers = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.begin (); itTimers != 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{m\_dlHarqProcessesTimer}.end (); itTimers ++)
665     \{
666       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
667         \{
668           \textcolor{keywordflow}{if} ((*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) == \hyperlink{cqa-ff-mac-scheduler_8h_add9e0c4889dc1b5b25686480b31ad166}{HARQ\_DL\_TIMEOUT})
669             \{
670               \textcolor{comment}{// reset HARQ process}
671               
672               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Reset HARQ proc "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" for RNTI "} << (*itTimers).
      first);
673               std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.find ((*itTimers).first);
674               \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.end ())
675                 \{
676                   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Status found for this RNTI "} << (*itTimers).
      first);
677                 \}
678               (*itStat).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
679               (*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
680             \}
681           \textcolor{keywordflow}{else}
682             \{
683               (*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})++;
684             \}
685         \}
686     \}
687   
688 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 31


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}}
\index{Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Ul\+Cqi\+Maps(void)}{RefreshUlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Refresh\+Ul\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ad2dfae20e850223f711180ab3a900cfd}{}\label{classns3_1_1FdTbfqFfMacScheduler_ad2dfae20e850223f711180ab3a900cfd}

\begin{DoxyCode}
2353 \{
2354   \textcolor{comment}{// refresh UL CQI  Map}
2355   std::map <uint16\_t,uint32\_t>::iterator itUl = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\_ueCqiTimers}.begin ();
2356   \textcolor{keywordflow}{while} (itUl != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\_ueCqiTimers}.end ())
2357     \{
2358       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-CQI for user "} << (*itUl).first << \textcolor{stringliteral}{" is "} << (uint32\_t)(*itUl).
      second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{m\_cqiTimersThreshold});
2359       \textcolor{keywordflow}{if} ((*itUl).second == 0)
2360         \{
2361           \textcolor{comment}{// delete correspondent entries}
2362           std::map <uint16\_t, std::vector <double> >::iterator itMap = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.find ((*itUl).first);
2363           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.end (), \textcolor{stringliteral}{" Does not find CQI report for user "}
       << (*itUl).first);
2364           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-CQI exired for user "} << (*itUl).first);
2365           (*itMap).second.clear ();
2366           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{m\_ueCqi}.erase (itMap);
2367           std::map <uint16\_t,uint32\_t>::iterator temp = itUl;
2368           itUl++;
2369           \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{m\_ueCqiTimers}.erase (temp);
2370         \}
2371       \textcolor{keywordflow}{else}
2372         \{
2373           (*itUl).second--;
2374           itUl++;
2375         \}
2376     \}
2377 
2378   \textcolor{keywordflow}{return};
2379 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 32


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Csched\+Sap\+User(\+Ff\+Mac\+Csched\+Sap\+User $\ast$s)}{SetFfMacCschedSapUser(FfMacCschedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Csched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Csched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a7c2df3221f0ace874b71a8a39b3b422d}{}\label{classns3_1_1FdTbfqFfMacScheduler_a7c2df3221f0ace874b71a8a39b3b422d}
set the user part of the Ff\+Mac\+Csched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a3984d8478223218fd4432a9f9ead328b}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
302 \{
303   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7f6560bf03534df3702164a74da8309}{m\_cschedSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
304 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Sched\+Sap\+User(\+Ff\+Mac\+Sched\+Sap\+User $\ast$s)}{SetFfMacSchedSapUser(FfMacSchedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Sched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Sched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a012f67d3f10f63ed3c0899907cf2f0c1}{}\label{classns3_1_1FdTbfqFfMacScheduler_a012f67d3f10f63ed3c0899907cf2f0c1}
set the user part of the Ff\+Mac\+Sched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_aa45093350c367b9a33263d5b6eecee34}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
308 \{
309   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{m\_schedSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
310 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}}
\index{Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Lte\+Ffr\+Sap\+Provider(\+Lte\+Ffr\+Sap\+Provider $\ast$s)}{SetLteFfrSapProvider(LteFfrSapProvider *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Set\+Lte\+Ffr\+Sap\+Provider (
\begin{DoxyParamCaption}
\item[{{\bf Lte\+Ffr\+Sap\+Provider} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a4f73838dc00dc8e3df05c138bfbee369}{}\label{classns3_1_1FdTbfqFfMacScheduler_a4f73838dc00dc8e3df05c138bfbee369}
Set the Provider part of the Lte\+Ffr\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a2b3a1635ada88804f035984277371926}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
326 \{
327   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{m\_ffrSapProvider} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
328 \}
\end{DoxyCode}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}}
\index{Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Transmission\+Mode\+Configuration\+Update(uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)}{TransmissionModeConfigurationUpdate(uint16_t rnti, uint8_t txMode)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Transmission\+Mode\+Configuration\+Update (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{tx\+Mode}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a8fa3d7ac241a7ebcdb0132790d2bde65}{}\label{classns3_1_1FdTbfqFfMacScheduler_a8fa3d7ac241a7ebcdb0132790d2bde65}

\begin{DoxyCode}
2460 \{
2461   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" txMode "} << (uint16\_t)txMode);
2462   FfMacCschedSapUser::CschedUeConfigUpdateIndParameters params;
2463   params.m\_rnti = rnti;
2464   params.m\_transmissionMode = txMode;
2465   \hyperlink{classns3_1_1FdTbfqFfMacScheduler_ae7f6560bf03534df3702164a74da8309}{m\_cschedSapUser}->\hyperlink{classns3_1_1FfMacCschedSapUser_a63f3fa5bac0cc7234a17c3241bff6a04}{CschedUeConfigUpdateInd} (params);
2466 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 33


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}}
\index{Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Dl\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)}{UpdateDlRlcBufferInfo(uint16_t rnti, uint8_t lcid, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Update\+Dl\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{lcid, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a5c2d153f27717df1f7c8627a387c337f}{}\label{classns3_1_1FdTbfqFfMacScheduler_a5c2d153f27717df1f7c8627a387c337f}

\begin{DoxyCode}
2383 \{
2384   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
2385   LteFlowId\_t flow (rnti, lcid);
2386   it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.find (flow);
2387   \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{m\_rlcBufferReq}.end ())
2388     \{
2389       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE "} << rnti << \textcolor{stringliteral}{" LC "} << (uint16\_t)lcid << \textcolor{stringliteral}{" txqueue "} << (*it).
      second.m\_rlcTransmissionQueueSize << \textcolor{stringliteral}{" retxqueue "} << (*it).second.m\_rlcRetransmissionQueueSize << \textcolor{stringliteral}{" status "} 
      << (*it).second.m\_rlcStatusPduSize << \textcolor{stringliteral}{" decrease "} << size);
2390       \textcolor{comment}{// Update queues: RLC tx order Status, ReTx, Tx}
2391       \textcolor{comment}{// Update status queue}
2392       \textcolor{keywordflow}{if} (((*it).second.m\_rlcStatusPduSize > 0) && (size >= (*it).second.m\_rlcStatusPduSize))
2393         \{
2394            (*it).second.m\_rlcStatusPduSize = 0;
2395         \}
2396       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (((*it).second.m\_rlcRetransmissionQueueSize > 0) && (size >= (*it).second.
      m\_rlcRetransmissionQueueSize))
2397         \{
2398           (*it).second.m\_rlcRetransmissionQueueSize = 0;
2399         \}
2400       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((*it).second.m\_rlcTransmissionQueueSize > 0)
2401         \{
2402           uint32\_t rlcOverhead;
2403           \textcolor{keywordflow}{if} (lcid == 1)
2404             \{
2405               \textcolor{comment}{// for SRB1 (using RLC AM) it's better to}
2406               \textcolor{comment}{// overestimate RLC overhead rather than}
2407               \textcolor{comment}{// underestimate it and risk unneeded}
2408               \textcolor{comment}{// segmentation which increases delay }
2409               rlcOverhead = 4;                                  
2410             \}
2411           \textcolor{keywordflow}{else}
2412             \{
2413               \textcolor{comment}{// minimum RLC overhead due to header}
2414               rlcOverhead = 2;
2415             \}
2416           \textcolor{comment}{// update transmission queue}
2417           \textcolor{keywordflow}{if} ((*it).second.m\_rlcTransmissionQueueSize <= size - rlcOverhead)
2418             \{
2419               (*it).second.m\_rlcTransmissionQueueSize = 0;
2420             \}
2421           \textcolor{keywordflow}{else}
2422             \{                    
2423               (*it).second.m\_rlcTransmissionQueueSize -= size - rlcOverhead;
2424             \}
2425         \}
2426     \}
2427   \textcolor{keywordflow}{else}
2428     \{
2429       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Does not find DL RLC Buffer Report of UE "} << rnti);
2430     \}
2431 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 34


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}}
\index{Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Harq\+Process\+Id(uint16\+\_\+t rnti)}{UpdateHarqProcessId(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Update\+Harq\+Process\+Id (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a2e807a88411774f9552f3b394de16b57}{}\label{classns3_1_1FdTbfqFfMacScheduler_a2e807a88411774f9552f3b394de16b57}


Update and return a new process Id for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}

\begin{DoxyCode}
619 \{
620   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti);
621 
622   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{m\_harqOn} == \textcolor{keyword}{false})
623     \{
624       \textcolor{keywordflow}{return} (0);
625     \}
626 
627 
628   std::map <uint16\_t, uint8\_t>::iterator it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{m\_dlHarqCurrentProcessId}.find (rnti);
629   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{m\_dlHarqCurrentProcessId}.end ())
630     \{
631       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id found for this RNTI "} << rnti);
632     \}
633   std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.find (rnti);
634   \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{m\_dlHarqProcessesStatus}.end ())
635     \{
636       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Statusfound for this RNTI "} << rnti);
637     \}
638   uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = (*it).second;
639   \textcolor{keywordflow}{do}
640     \{
641       i = (i + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
642     \}
643   \textcolor{keywordflow}{while} ( ((*itStat).second.at (i) != 0)&&(i != (*it).second));
644   \textcolor{keywordflow}{if} ((*itStat).second.at (i) == 0)
645     \{
646       (*it).second = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
647       (*itStat).second.at (i) = 1;
648     \}
649   \textcolor{keywordflow}{else}
650     \{
651       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No HARQ process available for RNTI "} << rnti << \textcolor{stringliteral}{" check before update
       with HarqProcessAvailability"});
652     \}
653 
654   \textcolor{keywordflow}{return} ((*it).second);
655 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 35


\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}}
\index{Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Ul\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint16\+\_\+t size)}{UpdateUlRlcBufferInfo(uint16_t rnti, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::\+Update\+Ul\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aecdd6c2d6176edebe823a9cb22dfb317}{}\label{classns3_1_1FdTbfqFfMacScheduler_aecdd6c2d6176edebe823a9cb22dfb317}

\begin{DoxyCode}
2435 \{
2436 
2437   size = size - 2; \textcolor{comment}{// remove the minimum RLC overhead}
2438   std::map <uint16\_t,uint32\_t>::iterator it = \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.find (rnti);
2439   \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{m\_ceBsrRxed}.end ())
2440     \{
2441       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE "} << rnti << \textcolor{stringliteral}{" size "} << size << \textcolor{stringliteral}{" BSR "} << (*it).second);
2442       \textcolor{keywordflow}{if} ((*it).second >= size)
2443         \{
2444           (*it).second -= size;
2445         \}
2446       \textcolor{keywordflow}{else}
2447         \{
2448           (*it).second = 0;
2449         \}
2450     \}
2451   \textcolor{keywordflow}{else}
2452     \{
2453       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Does not find BSR report info of UE "} << rnti);
2454     \}
2455 
2456 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 36




\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Fd\+Tbfq\+Scheduler\+Member\+Csched\+Sap\+Provider@{Fd\+Tbfq\+Scheduler\+Member\+Csched\+Sap\+Provider}}
\index{Fd\+Tbfq\+Scheduler\+Member\+Csched\+Sap\+Provider@{Fd\+Tbfq\+Scheduler\+Member\+Csched\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Fd\+Tbfq\+Scheduler\+Member\+Csched\+Sap\+Provider}{FdTbfqSchedulerMemberCschedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Fd\+Tbfq\+Scheduler\+Member\+Csched\+Sap\+Provider}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a4b513a821c5c70c5027baa42b42bfd22}{}\label{classns3_1_1FdTbfqFfMacScheduler_a4b513a821c5c70c5027baa42b42bfd22}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!Fd\+Tbfq\+Scheduler\+Member\+Sched\+Sap\+Provider@{Fd\+Tbfq\+Scheduler\+Member\+Sched\+Sap\+Provider}}
\index{Fd\+Tbfq\+Scheduler\+Member\+Sched\+Sap\+Provider@{Fd\+Tbfq\+Scheduler\+Member\+Sched\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Fd\+Tbfq\+Scheduler\+Member\+Sched\+Sap\+Provider}{FdTbfqSchedulerMemberSchedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Fd\+Tbfq\+Scheduler\+Member\+Sched\+Sap\+Provider}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a15ddf7b82e9a0e193c9b8c83bedebf96}{}\label{classns3_1_1FdTbfqFfMacScheduler_a15ddf7b82e9a0e193c9b8c83bedebf96}


\subsection{Member Data Documentation}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!bank\+Size@{bank\+Size}}
\index{bank\+Size@{bank\+Size}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{bank\+Size}{bankSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::bank\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}{}\label{classns3_1_1FdTbfqFfMacScheduler_a2e499981c641859beb7ae48a0c343ba1}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+a30\+Cqi\+Rxed@{m\+\_\+a30\+Cqi\+Rxed}}
\index{m\+\_\+a30\+Cqi\+Rxed@{m\+\_\+a30\+Cqi\+Rxed}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+a30\+Cqi\+Rxed}{m_a30CqiRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,{\bf Sb\+Meas\+Result\+\_\+s}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+a30\+Cqi\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}{}\label{classns3_1_1FdTbfqFfMacScheduler_a2c52c04323552283ec3f14a7ce083bc2}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+a30\+Cqi\+Timers@{m\+\_\+a30\+Cqi\+Timers}}
\index{m\+\_\+a30\+Cqi\+Timers@{m\+\_\+a30\+Cqi\+Timers}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+a30\+Cqi\+Timers}{m_a30CqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+a30\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}{}\label{classns3_1_1FdTbfqFfMacScheduler_a64ea10738e270f2cbb6d456c3851fcef}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+allocation\+Maps@{m\+\_\+allocation\+Maps}}
\index{m\+\_\+allocation\+Maps@{m\+\_\+allocation\+Maps}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+allocation\+Maps}{m_allocationMaps}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, std\+::vector $<$uint16\+\_\+t$>$ $>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+allocation\+Maps\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}{}\label{classns3_1_1FdTbfqFfMacScheduler_a5f22054304388f5f9469e3591b3bedea}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+amc@{m\+\_\+amc}}
\index{m\+\_\+amc@{m\+\_\+amc}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+amc}{m_amc}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Lte\+Amc}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+amc\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}{}\label{classns3_1_1FdTbfqFfMacScheduler_a53e0bcb714cd32ee639f7b4e7265087c}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ce\+Bsr\+Rxed@{m\+\_\+ce\+Bsr\+Rxed}}
\index{m\+\_\+ce\+Bsr\+Rxed@{m\+\_\+ce\+Bsr\+Rxed}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ce\+Bsr\+Rxed}{m_ceBsrRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ce\+Bsr\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}{}\label{classns3_1_1FdTbfqFfMacScheduler_a4affe9fe434a4cb87f5875ddf1766d61}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+cqi\+Timers\+Threshold@{m\+\_\+cqi\+Timers\+Threshold}}
\index{m\+\_\+cqi\+Timers\+Threshold@{m\+\_\+cqi\+Timers\+Threshold}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+cqi\+Timers\+Threshold}{m_cqiTimersThreshold}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+cqi\+Timers\+Threshold\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}{}\label{classns3_1_1FdTbfqFfMacScheduler_a5699ce6b376d8919bd386101b5c55e4a}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+creditable\+Threshold@{m\+\_\+creditable\+Threshold}}
\index{m\+\_\+creditable\+Threshold@{m\+\_\+creditable\+Threshold}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+creditable\+Threshold}{m_creditableThreshold}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+creditable\+Threshold\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a581771a634fa44e3e817131accd9db1f}{}\label{classns3_1_1FdTbfqFfMacScheduler_a581771a634fa44e3e817131accd9db1f}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+credit\+Limit@{m\+\_\+credit\+Limit}}
\index{m\+\_\+credit\+Limit@{m\+\_\+credit\+Limit}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+credit\+Limit}{m_creditLimit}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+credit\+Limit\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aa390b2d541c6190fd44f6457fe006a38}{}\label{classns3_1_1FdTbfqFfMacScheduler_aa390b2d541c6190fd44f6457fe006a38}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Cell\+Config@{m\+\_\+csched\+Cell\+Config}}
\index{m\+\_\+csched\+Cell\+Config@{m\+\_\+csched\+Cell\+Config}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Cell\+Config}{m_cschedCellConfig}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Cell\+Config\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}{}\label{classns3_1_1FdTbfqFfMacScheduler_a73d5d866713fa06e1cc6186b0f556693}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Sap\+Provider@{m\+\_\+csched\+Sap\+Provider}}
\index{m\+\_\+csched\+Sap\+Provider@{m\+\_\+csched\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Sap\+Provider}{m_cschedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider}$\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ab9204a4d0edccb863de0f60b2d818c4d}{}\label{classns3_1_1FdTbfqFfMacScheduler_ab9204a4d0edccb863de0f60b2d818c4d}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Sap\+User@{m\+\_\+csched\+Sap\+User}}
\index{m\+\_\+csched\+Sap\+User@{m\+\_\+csched\+Sap\+User}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Sap\+User}{m_cschedSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+User}$\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ae7f6560bf03534df3702164a74da8309}{}\label{classns3_1_1FdTbfqFfMacScheduler_ae7f6560bf03534df3702164a74da8309}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+debt\+Limit@{m\+\_\+debt\+Limit}}
\index{m\+\_\+debt\+Limit@{m\+\_\+debt\+Limit}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+debt\+Limit}{m_debtLimit}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+debt\+Limit\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aa73b1800df86289d9a1fc49886c9a175}{}\label{classns3_1_1FdTbfqFfMacScheduler_aa73b1800df86289d9a1fc49886c9a175}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Current\+Process\+Id@{m\+\_\+dl\+Harq\+Current\+Process\+Id}}
\index{m\+\_\+dl\+Harq\+Current\+Process\+Id@{m\+\_\+dl\+Harq\+Current\+Process\+Id}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Current\+Process\+Id}{m_dlHarqCurrentProcessId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, uint8\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Current\+Process\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}{}\label{classns3_1_1FdTbfqFfMacScheduler_a62be9c7aa20ef5d6994f9aa927f73858}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}}
\index{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}{m_dlHarqProcessesDciBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Dci\+Buffer\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}{}\label{classns3_1_1FdTbfqFfMacScheduler_a3b740ad89004ff0fce4d87eea57508e5}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}}
\index{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}{m_dlHarqProcessesRlcPduListBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Rlc\+Pdu\+List\+Buffer\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}{}\label{classns3_1_1FdTbfqFfMacScheduler_ac885f8c49550f861905b5e790e346d7b}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Status@{m\+\_\+dl\+Harq\+Processes\+Status}}
\index{m\+\_\+dl\+Harq\+Processes\+Status@{m\+\_\+dl\+Harq\+Processes\+Status}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Status}{m_dlHarqProcessesStatus}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Status\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}{}\label{classns3_1_1FdTbfqFfMacScheduler_abc7e2984f379ab5a1855d815c439fa4f}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Timer@{m\+\_\+dl\+Harq\+Processes\+Timer}}
\index{m\+\_\+dl\+Harq\+Processes\+Timer@{m\+\_\+dl\+Harq\+Processes\+Timer}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Timer}{m_dlHarqProcessesTimer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Timer\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Timer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}{}\label{classns3_1_1FdTbfqFfMacScheduler_ae7a4cdc82a971f39b2238c472ceedf62}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Info\+List\+Buffered@{m\+\_\+dl\+Info\+List\+Buffered}}
\index{m\+\_\+dl\+Info\+List\+Buffered@{m\+\_\+dl\+Info\+List\+Buffered}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Info\+List\+Buffered}{m_dlInfoListBuffered}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Dl\+Info\+List\+Element\+\_\+s}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Info\+List\+Buffered\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}{}\label{classns3_1_1FdTbfqFfMacScheduler_a72f4bdca7a08fcc26b1618bb9e2d0cf3}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ffr\+Sap\+Provider@{m\+\_\+ffr\+Sap\+Provider}}
\index{m\+\_\+ffr\+Sap\+Provider@{m\+\_\+ffr\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ffr\+Sap\+Provider}{m_ffrSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+Provider}$\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ffr\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}{}\label{classns3_1_1FdTbfqFfMacScheduler_a15bcdfbb46c65cae0d42e26b321f7827}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ffr\+Sap\+User@{m\+\_\+ffr\+Sap\+User}}
\index{m\+\_\+ffr\+Sap\+User@{m\+\_\+ffr\+Sap\+User}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ffr\+Sap\+User}{m_ffrSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+User}$\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ffr\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a33331ad1347d0db07f6b6bce134ff7bf}{}\label{classns3_1_1FdTbfqFfMacScheduler_a33331ad1347d0db07f6b6bce134ff7bf}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+flow\+Stats\+Dl@{m\+\_\+flow\+Stats\+Dl}}
\index{m\+\_\+flow\+Stats\+Dl@{m\+\_\+flow\+Stats\+Dl}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+flow\+Stats\+Dl}{m_flowStatsDl}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf fdtbfqs\+Flow\+Perf\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+flow\+Stats\+Dl\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}{}\label{classns3_1_1FdTbfqFfMacScheduler_ad55ff3305031aa6d2b3d351145754972}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+flow\+Stats\+Ul@{m\+\_\+flow\+Stats\+Ul}}
\index{m\+\_\+flow\+Stats\+Ul@{m\+\_\+flow\+Stats\+Ul}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+flow\+Stats\+Ul}{m_flowStatsUl}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf fdtbfqs\+Flow\+Perf\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+flow\+Stats\+Ul\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a104df6ff96dc70c7daeffa99ca042f96}{}\label{classns3_1_1FdTbfqFfMacScheduler_a104df6ff96dc70c7daeffa99ca042f96}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+harq\+On@{m\+\_\+harq\+On}}
\index{m\+\_\+harq\+On@{m\+\_\+harq\+On}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+harq\+On}{m_harqOn}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+harq\+On\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}{}\label{classns3_1_1FdTbfqFfMacScheduler_afb4bf57d3b17b967f82a5b2134cd70e7}
m\+\_\+harq\+On when false inhibit te H\+A\+RQ mechanisms (by default active) \index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+next\+Rnti\+Ul@{m\+\_\+next\+Rnti\+Ul}}
\index{m\+\_\+next\+Rnti\+Ul@{m\+\_\+next\+Rnti\+Ul}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+next\+Rnti\+Ul}{m_nextRntiUl}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+next\+Rnti\+Ul\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}{}\label{classns3_1_1FdTbfqFfMacScheduler_adcaedd73d9597af47782db5e9f605544}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+p10\+Cqi\+Rxed@{m\+\_\+p10\+Cqi\+Rxed}}
\index{m\+\_\+p10\+Cqi\+Rxed@{m\+\_\+p10\+Cqi\+Rxed}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+p10\+Cqi\+Rxed}{m_p10CqiRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint8\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+p10\+Cqi\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}{}\label{classns3_1_1FdTbfqFfMacScheduler_a9f978cfdf8024b324d38301a06546cf7}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+p10\+Cqi\+Timers@{m\+\_\+p10\+Cqi\+Timers}}
\index{m\+\_\+p10\+Cqi\+Timers@{m\+\_\+p10\+Cqi\+Timers}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+p10\+Cqi\+Timers}{m_p10CqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+p10\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}{}\label{classns3_1_1FdTbfqFfMacScheduler_a9ef02ee999e33adc46b3ab820ea6450d}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+rach\+Allocation\+Map@{m\+\_\+rach\+Allocation\+Map}}
\index{m\+\_\+rach\+Allocation\+Map@{m\+\_\+rach\+Allocation\+Map}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rach\+Allocation\+Map}{m_rachAllocationMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$uint16\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+rach\+Allocation\+Map\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}{}\label{classns3_1_1FdTbfqFfMacScheduler_a046aaad84777461862179b30893e38ec}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+rach\+List@{m\+\_\+rach\+List}}
\index{m\+\_\+rach\+List@{m\+\_\+rach\+List}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rach\+List}{m_rachList}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$struct {\bf Rach\+List\+Element\+\_\+s}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+rach\+List\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a0d2d08dad69997d048c8d35b5dac76e7}{}\label{classns3_1_1FdTbfqFfMacScheduler_a0d2d08dad69997d048c8d35b5dac76e7}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+rlc\+Buffer\+Req@{m\+\_\+rlc\+Buffer\+Req}}
\index{m\+\_\+rlc\+Buffer\+Req@{m\+\_\+rlc\+Buffer\+Req}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rlc\+Buffer\+Req}{m_rlcBufferReq}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Lte\+Flow\+Id\+\_\+t}, {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+rlc\+Buffer\+Req\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}{}\label{classns3_1_1FdTbfqFfMacScheduler_a1de1056077db96c215eb47ef724e1167}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+sched\+Sap\+Provider@{m\+\_\+sched\+Sap\+Provider}}
\index{m\+\_\+sched\+Sap\+Provider@{m\+\_\+sched\+Sap\+Provider}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+sched\+Sap\+Provider}{m_schedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+Provider}$\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+sched\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ac42b10eec7e048dc14078359273ffeeb}{}\label{classns3_1_1FdTbfqFfMacScheduler_ac42b10eec7e048dc14078359273ffeeb}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+sched\+Sap\+User@{m\+\_\+sched\+Sap\+User}}
\index{m\+\_\+sched\+Sap\+User@{m\+\_\+sched\+Sap\+User}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+sched\+Sap\+User}{m_schedSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+User}$\ast$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+sched\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}{}\label{classns3_1_1FdTbfqFfMacScheduler_adba18bbdd7247045a60bda41322253c5}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+token\+Pool\+Size@{m\+\_\+token\+Pool\+Size}}
\index{m\+\_\+token\+Pool\+Size@{m\+\_\+token\+Pool\+Size}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+token\+Pool\+Size}{m_tokenPoolSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+token\+Pool\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a0f729f9c65abdbcd28f36269f501fe14}{}\label{classns3_1_1FdTbfqFfMacScheduler_a0f729f9c65abdbcd28f36269f501fe14}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ue\+Cqi@{m\+\_\+ue\+Cqi}}
\index{m\+\_\+ue\+Cqi@{m\+\_\+ue\+Cqi}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ue\+Cqi}{m_ueCqi}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, std\+::vector $<$double$>$ $>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ue\+Cqi\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}{}\label{classns3_1_1FdTbfqFfMacScheduler_a74c33465af3fd4306d994e9942836a27}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ue\+Cqi\+Timers@{m\+\_\+ue\+Cqi\+Timers}}
\index{m\+\_\+ue\+Cqi\+Timers@{m\+\_\+ue\+Cqi\+Timers}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ue\+Cqi\+Timers}{m_ueCqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, uint32\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ue\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}{}\label{classns3_1_1FdTbfqFfMacScheduler_a86890d454debae559e2a13f86c0b829c}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ues\+Tx\+Mode@{m\+\_\+ues\+Tx\+Mode}}
\index{m\+\_\+ues\+Tx\+Mode@{m\+\_\+ues\+Tx\+Mode}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ues\+Tx\+Mode}{m_uesTxMode}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint8\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ues\+Tx\+Mode\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}{}\label{classns3_1_1FdTbfqFfMacScheduler_a08550374df1be10395aa320fc1722066}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Grant\+Mcs@{m\+\_\+ul\+Grant\+Mcs}}
\index{m\+\_\+ul\+Grant\+Mcs@{m\+\_\+ul\+Grant\+Mcs}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Grant\+Mcs}{m_ulGrantMcs}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Grant\+Mcs\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}{}\label{classns3_1_1FdTbfqFfMacScheduler_ab528c9593f9398be49667dd8f7864488}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Current\+Process\+Id@{m\+\_\+ul\+Harq\+Current\+Process\+Id}}
\index{m\+\_\+ul\+Harq\+Current\+Process\+Id@{m\+\_\+ul\+Harq\+Current\+Process\+Id}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Current\+Process\+Id}{m_ulHarqCurrentProcessId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, uint8\+\_\+t$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Current\+Process\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}{}\label{classns3_1_1FdTbfqFfMacScheduler_a36b22976070611aa3fdd5c573f891dc2}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}}
\index{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}{m_ulHarqProcessesDciBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Ul\+Harq\+Processes\+Dci\+Buffer\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}{}\label{classns3_1_1FdTbfqFfMacScheduler_a8566c4093902c1a4c227fa795fa90756}
\index{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Processes\+Status@{m\+\_\+ul\+Harq\+Processes\+Status}}
\index{m\+\_\+ul\+Harq\+Processes\+Status@{m\+\_\+ul\+Harq\+Processes\+Status}!ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler@{ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Processes\+Status}{m_ulHarqProcessesStatus}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Ul\+Harq\+Processes\+Status\+\_\+t}$>$ ns3\+::\+Fd\+Tbfq\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Processes\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}{}\label{classns3_1_1FdTbfqFfMacScheduler_aa02927d2f9ea374d54c0fff160b5dbbc}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/model/\hyperlink{fdtbfq-ff-mac-scheduler_8h}{fdtbfq-\/ff-\/mac-\/scheduler.\+h}\item 
lte/model/\hyperlink{fdtbfq-ff-mac-scheduler_8cc}{fdtbfq-\/ff-\/mac-\/scheduler.\+cc}\end{DoxyCompactItemize}
