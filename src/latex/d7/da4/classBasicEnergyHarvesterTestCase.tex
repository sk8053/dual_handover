\hypertarget{classBasicEnergyHarvesterTestCase}{}\section{Basic\+Energy\+Harvester\+Test\+Case Class Reference}
\label{classBasicEnergyHarvesterTestCase}\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}


Inheritance diagram for Basic\+Energy\+Harvester\+Test\+Case\+:
% FIG 0


Collaboration diagram for Basic\+Energy\+Harvester\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classBasicEnergyHarvesterTestCase_af46c592b02f0e0ce705f826657076c7b}{Basic\+Energy\+Harvester\+Test\+Case} ()
\item 
\hyperlink{classBasicEnergyHarvesterTestCase_a960048f7a184f7d334edf4f1cf2c8310}{$\sim$\+Basic\+Energy\+Harvester\+Test\+Case} ()
\item 
void \hyperlink{classBasicEnergyHarvesterTestCase_a0ccc441de009ad419be183aae7398576}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}{m\+\_\+timeS}
\item 
double \hyperlink{classBasicEnergyHarvesterTestCase_ab99eb52f3d30d0a6bd4355bbea80a2a7}{m\+\_\+tolerance}
\item 
\hyperlink{classns3_1_1ObjectFactory}{Object\+Factory} \hyperlink{classBasicEnergyHarvesterTestCase_a584587fe08d8a8ba0efe8da4acbb69dc}{m\+\_\+energy\+Source}
\item 
\hyperlink{classns3_1_1ObjectFactory}{Object\+Factory} \hyperlink{classBasicEnergyHarvesterTestCase_a690155e18bc90086f4bc116bc522a717}{m\+\_\+energy\+Harvester}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\subsubsection[{\texorpdfstring{Basic\+Energy\+Harvester\+Test\+Case()}{BasicEnergyHarvesterTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Basic\+Energy\+Harvester\+Test\+Case\+::\+Basic\+Energy\+Harvester\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classBasicEnergyHarvesterTestCase_af46c592b02f0e0ce705f826657076c7b}{}\label{classBasicEnergyHarvesterTestCase_af46c592b02f0e0ce705f826657076c7b}

\begin{DoxyCode}
53   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Basic Energy Harvester test case"})
54 \{
55         \hyperlink{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}{m\_timeS} = 15; \textcolor{comment}{// harvest energy for 15 seconds}
56         \hyperlink{classBasicEnergyHarvesterTestCase_ab99eb52f3d30d0a6bd4355bbea80a2a7}{m\_tolerance} = 1.0e-13;  \textcolor{comment}{//}
57 \}
\end{DoxyCode}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!````~Basic\+Energy\+Harvester\+Test\+Case@{$\sim$\+Basic\+Energy\+Harvester\+Test\+Case}}
\index{````~Basic\+Energy\+Harvester\+Test\+Case@{$\sim$\+Basic\+Energy\+Harvester\+Test\+Case}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Basic\+Energy\+Harvester\+Test\+Case()}{~BasicEnergyHarvesterTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Basic\+Energy\+Harvester\+Test\+Case\+::$\sim$\+Basic\+Energy\+Harvester\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classBasicEnergyHarvesterTestCase_a960048f7a184f7d334edf4f1cf2c8310}{}\label{classBasicEnergyHarvesterTestCase_a960048f7a184f7d334edf4f1cf2c8310}

\begin{DoxyCode}
60 \{
61 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Basic\+Energy\+Harvester\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classBasicEnergyHarvesterTestCase_a0ccc441de009ad419be183aae7398576}{}\label{classBasicEnergyHarvesterTestCase_a0ccc441de009ad419be183aae7398576}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
65 \{
66         \textcolor{comment}{// set types}
67         \hyperlink{classBasicEnergyHarvesterTestCase_a584587fe08d8a8ba0efe8da4acbb69dc}{m\_energySource}.\hyperlink{classns3_1_1ObjectFactory_a77dcd099064038a1eb7a6b8251229ec3}{SetTypeId} (\textcolor{stringliteral}{"ns3::BasicEnergySource"});
68         \hyperlink{classBasicEnergyHarvesterTestCase_a690155e18bc90086f4bc116bc522a717}{m\_energyHarvester}.\hyperlink{classns3_1_1ObjectFactory_a77dcd099064038a1eb7a6b8251229ec3}{SetTypeId} (\textcolor{stringliteral}{"ns3::BasicEnergyHarvester"});
69   \textcolor{comment}{// create node}
70   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} node = CreateObject<Node> ();
71 
72   \textcolor{comment}{// create Energy Source}
73   \hyperlink{classns3_1_1Ptr}{Ptr<BasicEnergySource>} source = \hyperlink{classBasicEnergyHarvesterTestCase_a584587fe08d8a8ba0efe8da4acbb69dc}{m\_energySource}.
      \hyperlink{classns3_1_1ObjectFactory_a18152e93f0a6fe184ed7300cb31e9896}{Create}<\hyperlink{classns3_1_1BasicEnergySource}{BasicEnergySource}> ();
74   \textcolor{comment}{// aggregate Energy Source to the node}
75   node->\hyperlink{classns3_1_1Object_a79dd435d300f3deca814553f561a2922}{AggregateObject} (source);
76 
77   \textcolor{comment}{//create energy harvester}
78   \hyperlink{classns3_1_1Ptr}{Ptr<BasicEnergyHarvester>} harvester = 
      \hyperlink{classBasicEnergyHarvesterTestCase_a690155e18bc90086f4bc116bc522a717}{m\_energyHarvester}.\hyperlink{classns3_1_1ObjectFactory_a18152e93f0a6fe184ed7300cb31e9896}{Create}<\hyperlink{classns3_1_1BasicEnergyHarvester}{BasicEnergyHarvester}> ();
79   \textcolor{comment}{// Set the Energy Harvesting update interval to a value grater than the}
80   \textcolor{comment}{// simulation duration, so that the power provided by the harvester is constant}
81   harvester->\hyperlink{classns3_1_1BasicEnergyHarvester_a6e50dec1a1903c158ed701f2dfbe911c}{SetHarvestedPowerUpdateInterval} (
      \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (\hyperlink{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}{m\_timeS} + 1.0));
82         \textcolor{comment}{// Connect the Basic Energy Harvester to the Energy Source}
83         source->ConnectEnergyHarvester (harvester);
84         harvester->\hyperlink{classns3_1_1EnergyHarvester_ad479141b1019ee683615272e807e529c}{SetNode} (node);
85         harvester->\hyperlink{classns3_1_1EnergyHarvester_ad659bea785a5d3de63f2d9c767e809ab}{SetEnergySource} (source);
86 
87   \hyperlink{classns3_1_1Time}{Time} now = \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ();
88 
89   \textcolor{comment}{/*}
90 \textcolor{comment}{         * The energy harvester will recharge the energy source for m\_timeS seconds.}
91 \textcolor{comment}{         */}
92 
93   \textcolor{comment}{// Calculate remaining energy at simulation stop time}
94   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (\hyperlink{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}{m\_timeS}),
95                        &BasicEnergySource::UpdateEnergySource, source);
96 
97   \textcolor{keywordtype}{double} timeDelta = 0.000000001; \textcolor{comment}{// 1 nanosecond}
98   \textcolor{comment}{// run simulation; stop just after last scheduled event}
99   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (\hyperlink{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}{m\_timeS} + timeDelta));
100   Simulator::Run ();
101 
102   \textcolor{comment}{// calculate energy harvested}
103   \textcolor{keywordtype}{double} estRemainingEnergy = source->GetInitialEnergy ();
104   \textcolor{comment}{// energy = power * time}
105   estRemainingEnergy += harvester->\hyperlink{classns3_1_1EnergyHarvester_a4f4aed7ac81b2e655fcb71980b299c84}{GetPower} () * \hyperlink{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}{m\_timeS};
106 
107   \textcolor{comment}{// obtain remaining energy from source}
108         \textcolor{keywordtype}{double} remainingEnergy = source->GetRemainingEnergy ();
109         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Remaining energy is "} << remainingEnergy);
110         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Estimated remaining energy is "} << estRemainingEnergy);
111         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Difference is "} << estRemainingEnergy - remainingEnergy);
112 
113         Simulator::Destroy ();
114 
115         \textcolor{comment}{// check remaining energy}
116   \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (remainingEnergy, estRemainingEnergy, 
      \hyperlink{classBasicEnergyHarvesterTestCase_ab99eb52f3d30d0a6bd4355bbea80a2a7}{m\_tolerance},
117                              \textcolor{stringliteral}{"Incorrect Remaining energy!"});
118 
119 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!m\+\_\+energy\+Harvester@{m\+\_\+energy\+Harvester}}
\index{m\+\_\+energy\+Harvester@{m\+\_\+energy\+Harvester}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+energy\+Harvester}{m_energyHarvester}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Object\+Factory} Basic\+Energy\+Harvester\+Test\+Case\+::m\+\_\+energy\+Harvester}\hypertarget{classBasicEnergyHarvesterTestCase_a690155e18bc90086f4bc116bc522a717}{}\label{classBasicEnergyHarvesterTestCase_a690155e18bc90086f4bc116bc522a717}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!m\+\_\+energy\+Source@{m\+\_\+energy\+Source}}
\index{m\+\_\+energy\+Source@{m\+\_\+energy\+Source}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+energy\+Source}{m_energySource}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Object\+Factory} Basic\+Energy\+Harvester\+Test\+Case\+::m\+\_\+energy\+Source}\hypertarget{classBasicEnergyHarvesterTestCase_a584587fe08d8a8ba0efe8da4acbb69dc}{}\label{classBasicEnergyHarvesterTestCase_a584587fe08d8a8ba0efe8da4acbb69dc}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!m\+\_\+timeS@{m\+\_\+timeS}}
\index{m\+\_\+timeS@{m\+\_\+timeS}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+timeS}{m_timeS}}]{\setlength{\rightskip}{0pt plus 5cm}double Basic\+Energy\+Harvester\+Test\+Case\+::m\+\_\+timeS}\hypertarget{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}{}\label{classBasicEnergyHarvesterTestCase_a7fb984119deb87b873e2ca42744ac8d5}
\index{Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}!m\+\_\+tolerance@{m\+\_\+tolerance}}
\index{m\+\_\+tolerance@{m\+\_\+tolerance}!Basic\+Energy\+Harvester\+Test\+Case@{Basic\+Energy\+Harvester\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+tolerance}{m_tolerance}}]{\setlength{\rightskip}{0pt plus 5cm}double Basic\+Energy\+Harvester\+Test\+Case\+::m\+\_\+tolerance}\hypertarget{classBasicEnergyHarvesterTestCase_ab99eb52f3d30d0a6bd4355bbea80a2a7}{}\label{classBasicEnergyHarvesterTestCase_ab99eb52f3d30d0a6bd4355bbea80a2a7}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
energy/test/\hyperlink{basic-energy-harvester-test_8cc}{basic-\/energy-\/harvester-\/test.\+cc}\end{DoxyCompactItemize}
