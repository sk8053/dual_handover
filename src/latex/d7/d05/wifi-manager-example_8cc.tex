\hypertarget{wifi-manager-example_8cc}{}\section{wifi/examples/wifi-\/manager-\/example.cc File Reference}
\label{wifi-manager-example_8cc}\index{wifi/examples/wifi-\/manager-\/example.\+cc@{wifi/examples/wifi-\/manager-\/example.\+cc}}
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/wifi-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/stats-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/mobility-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/propagation-\/module.\+h\char`\"{}}\\*
Include dependency graph for wifi-\/manager-\/example.cc\+:
% FIG 0
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structStep}{Step}
\begin{DoxyCompactList}\small\item\em \hyperlink{structStep}{Step} structure. \end{DoxyCompactList}\item 
struct \hyperlink{structStandardInfo}{Standard\+Info}
\begin{DoxyCompactList}\small\item\em \hyperlink{structStandardInfo}{Standard\+Info} structure. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{wifi-manager-example_8cc_a148be26ed75a55a0293248eba33f8193}{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Wifi\+Manager\+Example\char`\"{})
\item 
void \hyperlink{wifi-manager-example_8cc_a58be0453724cdae9cedb709d670d66c6}{Packet\+Rx} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ pkt, const \hyperlink{classns3_1_1Address}{Address} \&addr)
\item 
void \hyperlink{wifi-manager-example_8cc_a480632f18145ef95c5adaac058fc88ce}{Rate\+Change} (uint64\+\_\+t old\+Val, uint64\+\_\+t new\+Val)
\item 
void \hyperlink{wifi-manager-example_8cc_a59051cedbe984ebc1d26de63538eeef6}{Rate\+Change\+Minstrel\+Ht} (uint64\+\_\+t new\+Val, \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} dest)
\item 
void \hyperlink{wifi-manager-example_8cc_adeb3e022073e20a0edcca5f97eec50d9}{Change\+Signal\+And\+Report\+Rate} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1FixedRssLossModel}{Fixed\+Rss\+Loss\+Model} $>$ rss\+Model, struct \hyperlink{structStep}{Step} step, double rss, \hyperlink{classns3_1_1Gnuplot2dDataset}{Gnuplot2d\+Dataset} \&rate\+Dataset, \hyperlink{classns3_1_1Gnuplot2dDataset}{Gnuplot2d\+Dataset} \&actual\+Dataset)
\item 
int \hyperlink{wifi-manager-example_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const double \hyperlink{wifi-manager-example_8cc_a4c0854641eaf06479f9e825c840684d3}{N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz} = -\/174.\+0
\item 
double \hyperlink{wifi-manager-example_8cc_af9f95286ad3d5d533ca9d9b455e70398}{noise\+Dbm} = \hyperlink{wifi-manager-example_8cc_a4c0854641eaf06479f9e825c840684d3}{N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz}
\item 
double \hyperlink{wifi-manager-example_8cc_a76477e4410026bd7e3460fcd9e3f3847}{g\+\_\+interval\+Bytes} = 0
\item 
uint64\+\_\+t \hyperlink{wifi-manager-example_8cc_a15352b730cb23450ffdf71ed0d8d0a7e}{g\+\_\+interval\+Rate} = 0
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!Change\+Signal\+And\+Report\+Rate@{Change\+Signal\+And\+Report\+Rate}}
\index{Change\+Signal\+And\+Report\+Rate@{Change\+Signal\+And\+Report\+Rate}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{Change\+Signal\+And\+Report\+Rate(\+Ptr$<$ Fixed\+Rss\+Loss\+Model $>$ rss\+Model, struct Step step, double rss, Gnuplot2d\+Dataset \&rate\+Dataset, Gnuplot2d\+Dataset \&actual\+Dataset)}{ChangeSignalAndReportRate(Ptr< FixedRssLossModel > rssModel, struct Step step, double rss, Gnuplot2dDataset &rateDataset, Gnuplot2dDataset &actualDataset)}}]{\setlength{\rightskip}{0pt plus 5cm}void Change\+Signal\+And\+Report\+Rate (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Fixed\+Rss\+Loss\+Model} $>$}]{rss\+Model, }
\item[{struct {\bf Step}}]{step, }
\item[{double}]{rss, }
\item[{{\bf Gnuplot2d\+Dataset} \&}]{rate\+Dataset, }
\item[{{\bf Gnuplot2d\+Dataset} \&}]{actual\+Dataset}
\end{DoxyParamCaption}
)}\hypertarget{wifi-manager-example_8cc_adeb3e022073e20a0edcca5f97eec50d9}{}\label{wifi-manager-example_8cc_adeb3e022073e20a0edcca5f97eec50d9}

\begin{DoxyCode}
128 \{
129   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (rssModel << step.\hyperlink{structStep_a54f255b32f86ab9fced0a0002dcb9420}{stepSize} << step.
      \hyperlink{structStep_a9d7cdfbd213343951d23c3c4c61604bd}{stepTime} << rss);
130   \textcolor{keywordtype}{double} \hyperlink{lte__amc_8m_a7543c5e4e80c828b652e0c63e4a6de70}{snr} = rss - \hyperlink{wifi-manager-example_8cc_af9f95286ad3d5d533ca9d9b455e70398}{noiseDbm};
131   rateDataset.\hyperlink{classns3_1_1Gnuplot2dDataset_abd93f7c8fa2d1ed643c09d7fb8d5ef27}{Add} (snr, \hyperlink{wifi-manager-example_8cc_a15352b730cb23450ffdf71ed0d8d0a7e}{g\_intervalRate} / 1000000.0);
132   \textcolor{comment}{// Calculate received rate since last interval}
133   \textcolor{keywordtype}{double} currentRate = ((\hyperlink{wifi-manager-example_8cc_a76477e4410026bd7e3460fcd9e3f3847}{g\_intervalBytes} * 8) / step.\hyperlink{structStep_a9d7cdfbd213343951d23c3c4c61604bd}{stepTime}) / 1e6; \textcolor{comment}{// Mb/s}
134   actualDataset.\hyperlink{classns3_1_1Gnuplot2dDataset_abd93f7c8fa2d1ed643c09d7fb8d5ef27}{Add} (snr, currentRate);
135   rssModel->\hyperlink{classns3_1_1FixedRssLossModel_acf2422ae57b98a4618c8da2b564980b4}{SetRss} (rss - step.\hyperlink{structStep_a54f255b32f86ab9fced0a0002dcb9420}{stepSize});
136   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"At time "} << \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().As (Time::S) << \textcolor{stringliteral}{"; observed rate "} 
      << currentRate << \textcolor{stringliteral}{"; setting new power to "} << rss - step.\hyperlink{structStep_a54f255b32f86ab9fced0a0002dcb9420}{stepSize});
137   \hyperlink{wifi-manager-example_8cc_a76477e4410026bd7e3460fcd9e3f3847}{g\_intervalBytes} = 0;
138   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (step.\hyperlink{structStep_a9d7cdfbd213343951d23c3c4c61604bd}{stepTime}), &
      \hyperlink{wifi-manager-example_8cc_adeb3e022073e20a0edcca5f97eec50d9}{ChangeSignalAndReportRate}, rssModel, step, (rss - step.
      \hyperlink{structStep_a54f255b32f86ab9fced0a0002dcb9420}{stepSize}), rateDataset, actualDataset);
139 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1




Here is the caller graph for this function\+:
% FIG 2


\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!main@{main}}
\index{main@{main}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{wifi-manager-example_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{wifi-manager-example_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
142 \{
143   std::vector <StandardInfo> serverStandards;
144   std::vector <StandardInfo> clientStandards;
145   uint32\_t steps;
146 
147   uint32\_t rtsThreshold = 999999;  \textcolor{comment}{// disabled even for large A-MPDU}
148   uint32\_t maxAmpduSize = 65535;
149   \textcolor{keywordtype}{double} stepSize = 1; \textcolor{comment}{// dBm}
150   \textcolor{keywordtype}{double} stepTime = 1; \textcolor{comment}{// seconds}
151   uint32\_t packetSize = 1024; \textcolor{comment}{// bytes}
152   \textcolor{keywordtype}{bool} broadcast = 0;
153   \textcolor{keywordtype}{int} ap1\_x = 0;
154   \textcolor{keywordtype}{int} ap1\_y = 0;
155   \textcolor{keywordtype}{int} sta1\_x = 5;
156   \textcolor{keywordtype}{int} sta1\_y = 0;
157   uint16\_t serverNss = 1;
158   uint16\_t clientNss = 1;
159   \textcolor{keywordtype}{bool} serverShortGuardInterval = \textcolor{keyword}{false};
160   \textcolor{keywordtype}{bool} clientShortGuardInterval = \textcolor{keyword}{false};
161   uint16\_t serverChannelWidth = 20;
162   uint16\_t clientChannelWidth = 20;
163   std::string wifiManager (\textcolor{stringliteral}{"Ideal"});
164   std::string standard (\textcolor{stringliteral}{"802.11a"});
165   \hyperlink{structStandardInfo}{StandardInfo} serverSelectedStandard;
166   \hyperlink{structStandardInfo}{StandardInfo} clientSelectedStandard;
167 
168   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
169   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"rtsThreshold"}, \textcolor{stringliteral}{"RTS threshold"}, rtsThreshold);
170   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"maxAmpduSize"}, \textcolor{stringliteral}{"Max A-MPDU size"}, maxAmpduSize);
171   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"stepSize"}, \textcolor{stringliteral}{"Power between steps (dBm)"}, stepSize);
172   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"stepTime"}, \textcolor{stringliteral}{"Time on each step (seconds)"}, stepTime);
173   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"broadcast"}, \textcolor{stringliteral}{"Send broadcast instead of unicast"}, broadcast);
174   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"serverChannelWidth"}, \textcolor{stringliteral}{"Set channel width of the server (valid only for 802.11n or
       ac)"}, serverChannelWidth);
175   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"clientChannelWidth"}, \textcolor{stringliteral}{"Set channel width of the client (valid only for 802.11n or
       ac)"}, clientChannelWidth);
176   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"serverNss"}, \textcolor{stringliteral}{"Set nss of the server (valid only for 802.11n or ac)"}, serverNss);
177   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"clientNss"}, \textcolor{stringliteral}{"Set nss of the client (valid only for 802.11n or ac)"}, clientNss);
178   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"serverShortGuardInterval"}, \textcolor{stringliteral}{"Set short guard interval of the server (802.11n/ac)"}, 
      serverShortGuardInterval);
179   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"clientShortGuardInterval"}, \textcolor{stringliteral}{"Set short guard interval of the client (802.11n/ac)"}, 
      clientShortGuardInterval);
180   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"standard"}, \textcolor{stringliteral}{"Set standard (802.11a, 802.11b, 802.11g, 802.11n-5GHz, 802.11n-2.4GHz,
       802.11ac, 802.11-holland, 802.11-10MHz, 802.11-5MHz)"}, standard);
181   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"wifiManager"}, \textcolor{stringliteral}{"Set wifi rate manager (Aarf, Aarfcd, Amrr, Arf, Cara, Ideal,
       Minstrel, MinstrelHt, Onoe, Rraa)"}, wifiManager);
182   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc,argv);
183 
184   \textcolor{keywordflow}{if} (standard == \textcolor{stringliteral}{"802.11b"})
185     \{
186       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverChannelWidth != 22 && serverChannelWidth != 22, \textcolor{stringliteral}{"Invalid
       channel width for standard "} << standard);
187       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverNss != 1, \textcolor{stringliteral}{"Invalid nss for standard "} << standard);
188       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientChannelWidth != 22 && clientChannelWidth != 22, \textcolor{stringliteral}{"Invalid
       channel width for standard "} << standard);
189       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientNss != 1, \textcolor{stringliteral}{"Invalid nss for standard "} << standard);
190     \}
191   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (standard == \textcolor{stringliteral}{"802.11a"} || standard == \textcolor{stringliteral}{"802.11g"})
192     \{
193       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverChannelWidth != 20, \textcolor{stringliteral}{"Invalid channel width for standard "} << 
      standard);
194       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverNss != 1, \textcolor{stringliteral}{"Invalid nss for standard "} << standard);
195       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientChannelWidth != 20, \textcolor{stringliteral}{"Invalid channel width for standard "} << 
      standard);
196       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientNss != 1, \textcolor{stringliteral}{"Invalid nss for standard "} << standard);
197     \}
198   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (standard == \textcolor{stringliteral}{"802.11n-5GHz"} || standard == \textcolor{stringliteral}{"802.11n-2.4GHz"})
199     \{
200       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverChannelWidth != 20 && serverChannelWidth != 40, \textcolor{stringliteral}{"Invalid
       channel width for standard "} << standard);
201       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverNss == 0 || serverNss > 4, \textcolor{stringliteral}{"Invalid nss "} << serverNss << \textcolor{stringliteral}{" for
       standard "} << standard);
202       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientChannelWidth != 20 && clientChannelWidth != 40, \textcolor{stringliteral}{"Invalid
       channel width for standard "} << standard);
203       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientNss == 0 || clientNss > 4, \textcolor{stringliteral}{"Invalid nss "} << clientNss << \textcolor{stringliteral}{" for
       standard "} << standard);
204     \}
205   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (standard == \textcolor{stringliteral}{"802.11ac"})
206     \{
207       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverChannelWidth != 20 && serverChannelWidth != 40 && 
      serverChannelWidth != 80 && serverChannelWidth != 160, \textcolor{stringliteral}{"Invalid channel width for standard "} << standard);
208       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (serverNss == 0 || serverNss > 4, \textcolor{stringliteral}{"Invalid nss "} << serverNss << \textcolor{stringliteral}{" for
       standard "} << standard);
209       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientChannelWidth != 20 && clientChannelWidth != 40 && 
      clientChannelWidth != 80 && clientChannelWidth != 160, \textcolor{stringliteral}{"Invalid channel width for standard "} << standard);
210       \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientNss == 0 || clientNss > 4, \textcolor{stringliteral}{"Invalid nss "} << clientNss << \textcolor{stringliteral}{" for
       standard "} << standard);
211     \}
212 
213   std::string plotName = \textcolor{stringliteral}{"wifi-manager-example-"};
214   std::string dataName = \textcolor{stringliteral}{"wifi-manager-example-"};
215   plotName += wifiManager;
216   dataName += wifiManager;
217   plotName += \textcolor{stringliteral}{"-"};
218   dataName += \textcolor{stringliteral}{"-"};
219   plotName += standard;
220   dataName += standard;
221   \textcolor{keywordflow}{if} (standard == \textcolor{stringliteral}{"802.11n-5GHz"} || standard == \textcolor{stringliteral}{"802.11n-2.4GHz"} || standard == \textcolor{stringliteral}{"802.11ac"})
222     \{
223       plotName += \textcolor{stringliteral}{"-server="};
224       dataName += \textcolor{stringliteral}{"-server="};
225       std::ostringstream oss;
226       std::string gi;
227       \textcolor{keywordflow}{if} (serverShortGuardInterval)
228         \{
229           gi = \textcolor{stringliteral}{"SGI"};
230         \}
231       \textcolor{keywordflow}{else}
232         \{
233           gi = \textcolor{stringliteral}{"LGI"};
234         \}
235       oss << serverChannelWidth << \textcolor{stringliteral}{"MHz\_"} << gi << \textcolor{stringliteral}{"\_"} << serverNss << \textcolor{stringliteral}{"SS"};
236       plotName += oss.str ();
237       dataName += oss.str ();
238       plotName += \textcolor{stringliteral}{"-client="};
239       dataName += \textcolor{stringliteral}{"-client="};
240       oss.str(\textcolor{stringliteral}{""});
241       \textcolor{keywordflow}{if} (clientShortGuardInterval)
242         \{
243           gi = \textcolor{stringliteral}{"SGI"};
244         \}
245       \textcolor{keywordflow}{else}
246         \{
247           gi = \textcolor{stringliteral}{"LGI"};
248         \}
249       oss << clientChannelWidth << \textcolor{stringliteral}{"MHz\_"} << gi << \textcolor{stringliteral}{"\_"} << clientNss << \textcolor{stringliteral}{"SS"};
250       plotName += oss.str ();
251       dataName += oss.str ();
252     \}
253   plotName += \textcolor{stringliteral}{".eps"};
254   dataName += \textcolor{stringliteral}{".plt"};
255   std::ofstream outfile (dataName.c\_str ());
256   \hyperlink{classns3_1_1Gnuplot}{Gnuplot} gnuplot = \hyperlink{classns3_1_1Gnuplot}{Gnuplot} (plotName);
257 
258   \textcolor{comment}{// As channel width increases, scale up plot's yRange value}
259   uint32\_t channelRateFactor = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (clientChannelWidth, serverChannelWidth) / 20;
260   channelRateFactor = channelRateFactor * \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (clientNss, serverNss);
261 
262   \textcolor{comment}{// The first number is channel width, second is minimum SNR, third is maximum}
263   \textcolor{comment}{// SNR, fourth and fifth provide xrange axis limits, and sixth the yaxis}
264   \textcolor{comment}{// maximum}
265   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11a"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a22db1e8022db2c3450414b86c77b11e4}{WIFI\_PHY\_STANDARD\_80211a}, 20, 3, 27, 0, 30, 60));
266   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11b"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a77e1cc9f77a0bce8e2bc82cbef437b5a}{WIFI\_PHY\_STANDARD\_80211b}, 22, -5, 11, -6, 15, 15));
267   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11g"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aeda6d90f260393ce003ec4765d8100af}{WIFI\_PHY\_STANDARD\_80211g}, 20, -5, 27, -6, 30, 60));
268   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11n-5GHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aaabe94a0be4668583c42595437b4a6c0}{WIFI\_PHY\_STANDARD\_80211n\_5GHZ}, serverChannelWidth, 3, 30, 0, 35, 80 * 
      channelRateFactor));
269   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11n-2.4GHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a6e449a5ca14fc7c0eb36064ce04a5192}{WIFI\_PHY\_STANDARD\_80211n\_2\_4GHZ}, serverChannelWidth, 3, 30, 0, 35, 80 * 
      channelRateFactor));
270   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11ac"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a7c078959de635b84fb280a955dcfb27e}{WIFI\_PHY\_STANDARD\_80211ac}, serverChannelWidth, 5, 35, 0, 40, 120 * 
      channelRateFactor));
271   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11-holland"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aca926d77ddca0fc6d8cdcb190b2e520e}{WIFI\_PHY\_STANDARD\_holland}, 20, 3, 27, 0, 30, 60));
272   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11-10MHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aff863c98db467eb76170dc8bbe743de7}{WIFI\_PHY\_STANDARD\_80211\_10MHZ}, 10, 3, 27, 0, 30, 60));
273   serverStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11-5MHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a8311083bdd8ae58e73ab6e81a53fd7be}{WIFI\_PHY\_STANDARD\_80211\_5MHZ}, 5, 3, 27, 0, 30, 60));
274 
275   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11a"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a22db1e8022db2c3450414b86c77b11e4}{WIFI\_PHY\_STANDARD\_80211a}, 20, 3, 27, 0, 30, 60));
276   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11b"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a77e1cc9f77a0bce8e2bc82cbef437b5a}{WIFI\_PHY\_STANDARD\_80211b}, 22, -5, 11, -6, 15, 15));
277   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11g"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aeda6d90f260393ce003ec4765d8100af}{WIFI\_PHY\_STANDARD\_80211g}, 20, -5, 27, -6, 30, 60));
278   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11n-5GHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aaabe94a0be4668583c42595437b4a6c0}{WIFI\_PHY\_STANDARD\_80211n\_5GHZ}, clientChannelWidth, 3, 30, 0, 35, 80 * 
      channelRateFactor));
279   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11n-2.4GHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a6e449a5ca14fc7c0eb36064ce04a5192}{WIFI\_PHY\_STANDARD\_80211n\_2\_4GHZ}, clientChannelWidth, 3, 30, 0, 35, 80 * 
      channelRateFactor));
280   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11ac"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a7c078959de635b84fb280a955dcfb27e}{WIFI\_PHY\_STANDARD\_80211ac}, clientChannelWidth, 5, 35, 0, 40, 120 * 
      channelRateFactor));
281   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11-holland"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aca926d77ddca0fc6d8cdcb190b2e520e}{WIFI\_PHY\_STANDARD\_holland}, 20, 3, 27, 0, 30, 60));
282   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11-10MHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49aff863c98db467eb76170dc8bbe743de7}{WIFI\_PHY\_STANDARD\_80211\_10MHZ}, 10, 3, 27, 0, 30, 60));
283   clientStandards.push\_back (\hyperlink{structStandardInfo}{StandardInfo} (\textcolor{stringliteral}{"802.11-5MHz"}, 
      \hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a8311083bdd8ae58e73ab6e81a53fd7be}{WIFI\_PHY\_STANDARD\_80211\_5MHZ}, 5, 3, 27, 0, 30, 60));
284 
285   \textcolor{keywordflow}{for} (std::vector<StandardInfo>::size\_type \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != serverStandards.size (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
286     \{
287       \textcolor{keywordflow}{if} (standard == serverStandards[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].m\_name)
288         \{
289           serverSelectedStandard = serverStandards[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
290         \}
291     \}
292   \textcolor{keywordflow}{for} (std::vector<StandardInfo>::size\_type \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != clientStandards.size (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
293     \{
294       \textcolor{keywordflow}{if} (standard == clientStandards[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].m\_name)
295         \{
296           clientSelectedStandard = clientStandards[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
297         \}
298     \}
299 
300   \hyperlink{group__fatal_ga979468222aa80366c2c98aa1554f3eec}{NS\_ABORT\_IF} (serverSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} == \textcolor{stringliteral}{"none"});
301   \hyperlink{group__fatal_ga979468222aa80366c2c98aa1554f3eec}{NS\_ABORT\_IF} (clientSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} == \textcolor{stringliteral}{"none"});
302   std::cout << \textcolor{stringliteral}{"Testing "} << serverSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} << \textcolor{stringliteral}{" with "} << wifiManager << \textcolor{stringliteral}{" ..."} << 
      std::endl;
303   \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (clientSelectedStandard.\hyperlink{structStandardInfo_afab2372a0827fa35dfb275bf2a003894}{m\_snrLow} >= clientSelectedStandard.
      \hyperlink{structStandardInfo_a9015b8320c397f26eb0eb0d3758c9efa}{m\_snrHigh}, \textcolor{stringliteral}{"SNR values in wrong order"});
304   steps = std::abs ((\textcolor{keywordtype}{int}) (clientSelectedStandard.\hyperlink{structStandardInfo_a9015b8320c397f26eb0eb0d3758c9efa}{m\_snrHigh} - clientSelectedStandard.
      \hyperlink{structStandardInfo_afab2372a0827fa35dfb275bf2a003894}{m\_snrLow} ) / stepSize) + 1;
305   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Using "} << steps << \textcolor{stringliteral}{" steps for SNR range "} << clientSelectedStandard.
      \hyperlink{structStandardInfo_afab2372a0827fa35dfb275bf2a003894}{m\_snrLow} << \textcolor{stringliteral}{":"} << clientSelectedStandard.\hyperlink{structStandardInfo_a9015b8320c397f26eb0eb0d3758c9efa}{m\_snrHigh});
306   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} clientNode = CreateObject<Node> ();
307   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} serverNode = CreateObject<Node> ();
308 
309   \hyperlink{classns3_1_1WifiHelper}{WifiHelper} wifi;
310   wifi.\hyperlink{classns3_1_1WifiHelper_aa54f3e61527ef8de318d310045bc5dfd}{SetStandard} (serverSelectedStandard.\hyperlink{structStandardInfo_ab7a9f14bfafa7c4a6eb65073bdb28489}{m\_standard});
311   \hyperlink{classns3_1_1YansWifiPhyHelper}{YansWifiPhyHelper} wifiPhy = YansWifiPhyHelper::Default ();
312   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"RxNoiseFigure"}, DoubleValue (0.0));
313   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"EnergyDetectionThreshold"}, DoubleValue (-110.0));
314   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"CcaMode1Threshold"}, DoubleValue (-110.0));
315 
316   \hyperlink{classns3_1_1Ptr}{Ptr<YansWifiChannel>} wifiChannel = CreateObject<YansWifiChannel> ();
317   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantSpeedPropagationDelayModel>} delayModel = 
      CreateObject<ConstantSpeedPropagationDelayModel> ();
318   wifiChannel->\hyperlink{classns3_1_1YansWifiChannel_a51ebdd5a1d897dc46cf9783ac2879b98}{SetPropagationDelayModel} (delayModel);
319   \hyperlink{classns3_1_1Ptr}{Ptr<FixedRssLossModel>} rssLossModel = CreateObject<FixedRssLossModel> ();
320   wifiChannel->\hyperlink{classns3_1_1YansWifiChannel_ad2f92be1fb34be0075141cbb4f779191}{SetPropagationLossModel} (rssLossModel);
321   wifiPhy.\hyperlink{classns3_1_1YansWifiPhyHelper_ad2e9a27587dd4ff320435c93cc2676de}{SetChannel} (wifiChannel);
322 
323   wifi.SetRemoteStationManager (\textcolor{stringliteral}{"ns3::"} + wifiManager + \textcolor{stringliteral}{"WifiManager"}, \textcolor{stringliteral}{"RtsCtsThreshold"}, UintegerValue (
      rtsThreshold));
324 
325   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} serverDevice;
326   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} clientDevice;
327 
328   \hyperlink{classns3_1_1WifiMacHelper}{WifiMacHelper} wifiMac;
329   \textcolor{comment}{// Use Adhoc so we don't get into association issues}
330   wifiMac.\hyperlink{classns3_1_1WifiMacHelper_a382d8df76a1dd7007179d1963b4b6bc6}{SetType} (\textcolor{stringliteral}{"ns3::AdhocWifiMac"},
331                    \textcolor{stringliteral}{"BE\_MaxAmpduSize"}, UintegerValue (maxAmpduSize));
332 
333   serverDevice = wifi.Install (wifiPhy, wifiMac, serverNode);
334   clientDevice = wifi.Install (wifiPhy, wifiMac, clientNode);
335 
336   \textcolor{keywordflow}{if} (wifiManager == \textcolor{stringliteral}{"MinstrelHt"})
337     \{
338       \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (\textcolor{stringliteral}{"
      /NodeList/0/DeviceList/*/$ns3::WifiNetDevice/RemoteStationManager/$ns3::MinstrelHtWifiManager/RateChange"}, \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{wifi-manager-example_8cc_a59051cedbe984ebc1d26de63538eeef6}{RateChangeMinstrelHt}));
339     \}
340   \textcolor{keywordflow}{else}
341     \{
342       \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (\textcolor{stringliteral}{"
      /NodeList/0/DeviceList/*/$ns3::WifiNetDevice/RemoteStationManager/$ns3::"} + wifiManager + \textcolor{stringliteral}{"WifiManager/Rate"}, 
      \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{wifi-manager-example_8cc_a480632f18145ef95c5adaac058fc88ce}{RateChange}));
343     \}
344   \textcolor{comment}{// Configure the mobility.}
345   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
346   \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} positionAlloc = CreateObject<ListPositionAllocator> 
      ();
347   \textcolor{comment}{//Initial position of AP and STA}
348   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (ap1\_x, ap1\_y, 0.0));
349   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Setting initial AP position to "} << \hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (ap1\_x, ap1\_y, 0.0));
350   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (sta1\_x, sta1\_y, 0.0));
351   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Setting initial STA position to "} << \hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (sta1\_x, sta1\_y, 0.0));
352   mobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (positionAlloc);
353   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
354   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (clientNode);
355   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (serverNode);
356 
357   \hyperlink{classns3_1_1Gnuplot2dDataset}{Gnuplot2dDataset} rateDataset (clientSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} + std::string (\textcolor{stringliteral}{"-rate
       selected"}));
358   \hyperlink{classns3_1_1Gnuplot2dDataset}{Gnuplot2dDataset} actualDataset (clientSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} + std::string (\textcolor{stringliteral}{"
      -observed"}));
359   \textcolor{keyword}{struct }\hyperlink{structStep}{Step} step;
360   step.\hyperlink{structStep_a54f255b32f86ab9fced0a0002dcb9420}{stepSize} = \hyperlink{structStep_a54f255b32f86ab9fced0a0002dcb9420}{stepSize};
361   step.stepTime = \hyperlink{structStep_a9d7cdfbd213343951d23c3c4c61604bd}{stepTime};
362 
363   \textcolor{comment}{// Perform post-install configuration from defaults for channel width,}
364   \textcolor{comment}{// guard interval, and nss, if necessary}
365   \textcolor{comment}{// Obtain pointer to the WifiPhy}
366   \hyperlink{classns3_1_1Ptr}{Ptr<NetDevice>} ndClient = clientDevice.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0);
367   \hyperlink{classns3_1_1Ptr}{Ptr<NetDevice>} ndServer = serverDevice.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0);
368   \hyperlink{classns3_1_1Ptr}{Ptr<WifiNetDevice>} wndClient = ndClient->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1WifiNetDevice}{WifiNetDevice}> ();
369   \hyperlink{classns3_1_1Ptr}{Ptr<WifiNetDevice>} wndServer = ndServer->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1WifiNetDevice}{WifiNetDevice}> ();
370   \hyperlink{classns3_1_1Ptr}{Ptr<WifiPhy>} wifiPhyPtrClient = wndClient->\hyperlink{classns3_1_1WifiNetDevice_a6a752f4afd2e28b04c83ba26568efd78}{GetPhy} ();
371   \hyperlink{classns3_1_1Ptr}{Ptr<WifiPhy>} wifiPhyPtrServer = wndServer->GetPhy ();
372   wifiPhyPtrClient->\hyperlink{classns3_1_1WifiPhy_a00b11fc081f04ec36bc814c50861e34f}{SetNumberOfAntennas} (clientNss);
373   wifiPhyPtrClient->SetMaxSupportedTxSpatialStreams (clientNss);
374   wifiPhyPtrClient->SetMaxSupportedRxSpatialStreams (clientNss);
375   wifiPhyPtrServer->\hyperlink{classns3_1_1WifiPhy_a00b11fc081f04ec36bc814c50861e34f}{SetNumberOfAntennas} (serverNss);
376   wifiPhyPtrServer->\hyperlink{classns3_1_1WifiPhy_a4c4529066f8b7aa72ba1c79e59e20ca3}{SetMaxSupportedTxSpatialStreams} (serverNss);
377   wifiPhyPtrServer->\hyperlink{classns3_1_1WifiPhy_a1e4f1ade2676db0ef5b71b7e05c78194}{SetMaxSupportedRxSpatialStreams} (serverNss);
378   \textcolor{comment}{// Only set the channel width and guard interval for HT and VHT modes}
379   \textcolor{keywordflow}{if} (serverSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} == \textcolor{stringliteral}{"802.11n-5GHz"}
380       || serverSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} == \textcolor{stringliteral}{"802.11n-2.4GHz"}
381       || serverSelectedStandard.\hyperlink{structStandardInfo_a101f61fce329acf44c178f191d89bc2b}{m\_name} == \textcolor{stringliteral}{"802.11ac"})
382     \{
383       wifiPhyPtrServer->\hyperlink{classns3_1_1WifiPhy_ad4be164ac9858e525cf6c6194c39e015}{SetChannelWidth} (serverSelectedStandard.
      \hyperlink{structStandardInfo_a5b3709fd42061dfc2a51115978136abc}{m\_width});
384       wifiPhyPtrServer->\hyperlink{classns3_1_1WifiPhy_a3b53079e099f77124695c8d0612fa669}{SetShortGuardInterval} (serverShortGuardInterval);
385       wifiPhyPtrClient->SetChannelWidth (clientSelectedStandard.\hyperlink{structStandardInfo_a5b3709fd42061dfc2a51115978136abc}{m\_width});
386       wifiPhyPtrClient->SetShortGuardInterval (clientShortGuardInterval);
387     \}
388   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Channel width "} << wifiPhyPtrClient->GetChannelWidth () << \textcolor{stringliteral}{" noiseDbm "} << 
      \hyperlink{wifi-manager-example_8cc_af9f95286ad3d5d533ca9d9b455e70398}{noiseDbm});
389   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"NSS "} << wifiPhyPtrClient->GetMaxSupportedTxSpatialStreams ());
390 
391   \textcolor{comment}{// Configure signal and noise, and schedule first iteration}
392   \hyperlink{wifi-manager-example_8cc_af9f95286ad3d5d533ca9d9b455e70398}{noiseDbm} += 10 * log10 (clientSelectedStandard.\hyperlink{structStandardInfo_a5b3709fd42061dfc2a51115978136abc}{m\_width} * 1000000);
393   \textcolor{keywordtype}{double} rssCurrent = (clientSelectedStandard.\hyperlink{structStandardInfo_a9015b8320c397f26eb0eb0d3758c9efa}{m\_snrHigh} + \hyperlink{wifi-manager-example_8cc_af9f95286ad3d5d533ca9d9b455e70398}{noiseDbm});
394   rssLossModel->\hyperlink{classns3_1_1FixedRssLossModel_acf2422ae57b98a4618c8da2b564980b4}{SetRss} (rssCurrent);
395   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Setting initial Rss to "} << rssCurrent);
396   \textcolor{comment}{//Move the STA by stepsSize meters every stepTime seconds}
397   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.5 + stepTime), &
      \hyperlink{wifi-manager-example_8cc_adeb3e022073e20a0edcca5f97eec50d9}{ChangeSignalAndReportRate}, rssLossModel, step, rssCurrent, rateDataset, 
      actualDataset);
398 
399   \hyperlink{classns3_1_1PacketSocketHelper}{PacketSocketHelper} packetSocketHelper;
400   packetSocketHelper.\hyperlink{classns3_1_1PacketSocketHelper_a33f449fee7fd10411949d17feba6d33e}{Install} (serverNode);
401   packetSocketHelper.\hyperlink{classns3_1_1PacketSocketHelper_a33f449fee7fd10411949d17feba6d33e}{Install} (clientNode);
402 
403   \hyperlink{classns3_1_1PacketSocketAddress}{PacketSocketAddress} socketAddr;
404   socketAddr.\hyperlink{classns3_1_1PacketSocketAddress_ad1caa016f4d27c9d5f2c06dbfc53f8a3}{SetSingleDevice} (serverDevice.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetIfIndex ());
405   \textcolor{keywordflow}{if} (broadcast)
406     \{
407       socketAddr.\hyperlink{classns3_1_1PacketSocketAddress_a9452f9410a97e57344e464e25c2ab0f3}{SetPhysicalAddress} (serverDevice.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetBroadcast ());
408     \}
409   \textcolor{keywordflow}{else}
410     \{
411       socketAddr.\hyperlink{classns3_1_1PacketSocketAddress_a9452f9410a97e57344e464e25c2ab0f3}{SetPhysicalAddress} (serverDevice.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetAddress ());
412     \}
413   \textcolor{comment}{// Arbitrary protocol type.}
414   \textcolor{comment}{// Note: PacketSocket doesn't have any L4 multiplexing or demultiplexing}
415   \textcolor{comment}{//       The only mux/demux is based on the protocol field}
416   socketAddr.\hyperlink{classns3_1_1PacketSocketAddress_a9020962e39c238277f3b2f0de605647a}{SetProtocol} (1);
417 
418   \hyperlink{classns3_1_1Ptr}{Ptr<PacketSocketClient>} client = CreateObject<PacketSocketClient> ();
419   client->\hyperlink{classns3_1_1PacketSocketClient_ae400727c451d429358b5c85838b901df}{SetRemote} (socketAddr);
420   client->\hyperlink{classns3_1_1Application_a8360a49748e30c52ffdcc7a305c3cd48}{SetStartTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.5));  \textcolor{comment}{// allow simulation warmup}
421   client->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (0));  \textcolor{comment}{// unlimited}
422   client->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (packetSize));
423 
424   \textcolor{comment}{// Set a maximum rate 10% above the yMax specified for the selected standard}
425   \textcolor{keywordtype}{double} rate = clientSelectedStandard.\hyperlink{structStandardInfo_a7037180b40be174fdb983b9c92084a1f}{m\_yMax} * 1e6 * 1.10;
426   \textcolor{keywordtype}{double} clientInterval = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>} (packetSize) * 8 / rate;
427   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Setting interval to "} << clientInterval << \textcolor{stringliteral}{" sec for rate of "} << rate << \textcolor{stringliteral}{"
       bits/sec"});
428 
429   client->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Interval"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (clientInterval)));
430   clientNode->\hyperlink{classns3_1_1Node_ab98b4fdc4aadc86366b80e8a79a53f47}{AddApplication} (client);
431 
432   \hyperlink{classns3_1_1Ptr}{Ptr<PacketSocketServer>} server = CreateObject<PacketSocketServer> ();
433   server->\hyperlink{classns3_1_1PacketSocketServer_a89207b49054571b480ee1d26934907d3}{SetLocal} (socketAddr);
434   server->\hyperlink{classns3_1_1ObjectBase_a1be45f6fd561e75dcac9dfa81b2b81e4}{TraceConnectWithoutContext} (\textcolor{stringliteral}{"Rx"}, 
      \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{wifi-manager-example_8cc_a58be0453724cdae9cedb709d670d66c6}{PacketRx}));
435   serverNode->AddApplication (server);
436 
437   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} ((steps + 1) * stepTime));
438   Simulator::Run ();
439   Simulator::Destroy ();
440 
441   gnuplot.AddDataset (rateDataset);
442   gnuplot.AddDataset (actualDataset);
443 
444   std::ostringstream xMinStr, xMaxStr, yMaxStr;
445   std::string xRangeStr (\textcolor{stringliteral}{"set xrange ["});
446   xMinStr << clientSelectedStandard.\hyperlink{structStandardInfo_af07b86a8ed5fc63871218325776c77e1}{m\_xMin};
447   xRangeStr.append (xMinStr.str ());
448   xRangeStr.append (\textcolor{stringliteral}{":"});
449   xMaxStr << clientSelectedStandard.\hyperlink{structStandardInfo_a9273620f117082177fb82865c3372e41}{m\_xMax};
450   xRangeStr.append (xMaxStr.str ());
451   xRangeStr.append (\textcolor{stringliteral}{"]"});
452   std::string yRangeStr (\textcolor{stringliteral}{"set yrange [0:"});
453   yMaxStr << clientSelectedStandard.\hyperlink{structStandardInfo_a7037180b40be174fdb983b9c92084a1f}{m\_yMax};
454   yRangeStr.append (yMaxStr.str ());
455   yRangeStr.append (\textcolor{stringliteral}{"]"});
456 
457   std::string \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title} (\textcolor{stringliteral}{"Results for "});
458   \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (standard);
459   \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{" with "});
460   \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (wifiManager);
461   \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{"\(\backslash\)\(\backslash\)n"});
462   \textcolor{keywordflow}{if} (standard == \textcolor{stringliteral}{"802.11n-5GHz"} || standard == \textcolor{stringliteral}{"802.11n-2.4GHz"} || standard == \textcolor{stringliteral}{"802.11ac"})
463     \{
464       std::ostringstream serverWidthStrStr;
465       std::ostringstream serverNssStrStr;
466       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{"server: width="});
467       serverWidthStrStr << serverSelectedStandard.\hyperlink{structStandardInfo_a5b3709fd42061dfc2a51115978136abc}{m\_width};
468       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (serverWidthStrStr.str ());
469       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{"MHz"});
470       \textcolor{keywordflow}{if} (serverShortGuardInterval == \textcolor{keyword}{true})
471         \{
472           \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{" GI=short"});
473         \}
474       \textcolor{keywordflow}{else}
475         \{
476           \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{" GI=long"});
477         \}
478       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{" nss="});
479       serverNssStrStr << serverNss;
480       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (serverNssStrStr.str ());
481       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{"\(\backslash\)\(\backslash\)n"});
482       std::ostringstream clientWidthStrStr;
483       std::ostringstream clientNssStrStr;
484       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{"client: width="});
485       clientWidthStrStr << clientSelectedStandard.\hyperlink{structStandardInfo_a5b3709fd42061dfc2a51115978136abc}{m\_width};
486       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (clientWidthStrStr.str ());
487       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{"MHz"});
488       \textcolor{keywordflow}{if} (clientShortGuardInterval == \textcolor{keyword}{true})
489         \{
490           \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{" GI=short"});
491         \}
492       \textcolor{keywordflow}{else}
493         \{
494           \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{" GI=long"});
495         \}
496       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (\textcolor{stringliteral}{" nss="});
497       clientNssStrStr << clientNss;
498       \hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title}.append (clientNssStrStr.str ());
499     \}
500   gnuplot.SetTerminal (\textcolor{stringliteral}{"postscript eps color enh \(\backslash\)"Times-BoldItalic\(\backslash\)""});
501   gnuplot.SetLegend (\textcolor{stringliteral}{"SNR (dB)"}, \textcolor{stringliteral}{"Rate (Mb/s)"});
502   gnuplot.SetTitle (\hyperlink{lte__link__budget_8m_a5b09b57ee35b13a452f0c089c0709f8b}{title});
503   gnuplot.SetExtra (xRangeStr);
504   gnuplot.AppendExtra (yRangeStr);
505   gnuplot.AppendExtra (\textcolor{stringliteral}{"set key top left"});
506   gnuplot.GenerateOutput (outfile);
507   outfile.close ();
508 
509   \textcolor{keywordflow}{return} 0;
510 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}}
\index{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+N\+E(""Wifi\+Manager\+Example"")}{NS_LOG_COMPONENT_DEFINE("WifiManagerExample")}}]{\setlength{\rightskip}{0pt plus 5cm}N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE (
\begin{DoxyParamCaption}
\item[{\char`\"{}Wifi\+Manager\+Example\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{wifi-manager-example_8cc_a148be26ed75a55a0293248eba33f8193}{}\label{wifi-manager-example_8cc_a148be26ed75a55a0293248eba33f8193}
\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!Packet\+Rx@{Packet\+Rx}}
\index{Packet\+Rx@{Packet\+Rx}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{Packet\+Rx(\+Ptr$<$ const Packet $>$ pkt, const Address \&addr)}{PacketRx(Ptr< const Packet > pkt, const Address &addr)}}]{\setlength{\rightskip}{0pt plus 5cm}void Packet\+Rx (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{pkt, }
\item[{const {\bf Address} \&}]{addr}
\end{DoxyParamCaption}
)}\hypertarget{wifi-manager-example_8cc_a58be0453724cdae9cedb709d670d66c6}{}\label{wifi-manager-example_8cc_a58be0453724cdae9cedb709d670d66c6}

\begin{DoxyCode}
60 \{
61   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Received size "} << pkt->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ());
62   \hyperlink{wifi-manager-example_8cc_a76477e4410026bd7e3460fcd9e3f3847}{g\_intervalBytes} += pkt->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
63 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!Rate\+Change@{Rate\+Change}}
\index{Rate\+Change@{Rate\+Change}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{Rate\+Change(uint64\+\_\+t old\+Val, uint64\+\_\+t new\+Val)}{RateChange(uint64_t oldVal, uint64_t newVal)}}]{\setlength{\rightskip}{0pt plus 5cm}void Rate\+Change (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{old\+Val, }
\item[{uint64\+\_\+t}]{new\+Val}
\end{DoxyParamCaption}
)}\hypertarget{wifi-manager-example_8cc_a480632f18145ef95c5adaac058fc88ce}{}\label{wifi-manager-example_8cc_a480632f18145ef95c5adaac058fc88ce}

\begin{DoxyCode}
67 \{
68   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Change from "} << oldVal << \textcolor{stringliteral}{" to "} << newVal);
69   \hyperlink{wifi-manager-example_8cc_a15352b730cb23450ffdf71ed0d8d0a7e}{g\_intervalRate} = newVal;
70 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6


\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!Rate\+Change\+Minstrel\+Ht@{Rate\+Change\+Minstrel\+Ht}}
\index{Rate\+Change\+Minstrel\+Ht@{Rate\+Change\+Minstrel\+Ht}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{Rate\+Change\+Minstrel\+Ht(uint64\+\_\+t new\+Val, Mac48\+Address dest)}{RateChangeMinstrelHt(uint64_t newVal, Mac48Address dest)}}]{\setlength{\rightskip}{0pt plus 5cm}void Rate\+Change\+Minstrel\+Ht (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{new\+Val, }
\item[{{\bf Mac48\+Address}}]{dest}
\end{DoxyParamCaption}
)}\hypertarget{wifi-manager-example_8cc_a59051cedbe984ebc1d26de63538eeef6}{}\label{wifi-manager-example_8cc_a59051cedbe984ebc1d26de63538eeef6}

\begin{DoxyCode}
74 \{
75   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Change to "} << newVal);
76   \hyperlink{wifi-manager-example_8cc_a15352b730cb23450ffdf71ed0d8d0a7e}{g\_intervalRate} = newVal;
77 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7




\subsection{Variable Documentation}
\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!g\+\_\+interval\+Bytes@{g\+\_\+interval\+Bytes}}
\index{g\+\_\+interval\+Bytes@{g\+\_\+interval\+Bytes}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{g\+\_\+interval\+Bytes}{g_intervalBytes}}]{\setlength{\rightskip}{0pt plus 5cm}double g\+\_\+interval\+Bytes = 0}\hypertarget{wifi-manager-example_8cc_a76477e4410026bd7e3460fcd9e3f3847}{}\label{wifi-manager-example_8cc_a76477e4410026bd7e3460fcd9e3f3847}
\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!g\+\_\+interval\+Rate@{g\+\_\+interval\+Rate}}
\index{g\+\_\+interval\+Rate@{g\+\_\+interval\+Rate}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{g\+\_\+interval\+Rate}{g_intervalRate}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t g\+\_\+interval\+Rate = 0}\hypertarget{wifi-manager-example_8cc_a15352b730cb23450ffdf71ed0d8d0a7e}{}\label{wifi-manager-example_8cc_a15352b730cb23450ffdf71ed0d8d0a7e}
\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz@{N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz}}
\index{N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz@{N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz}{NOISE_DBM_Hz}}]{\setlength{\rightskip}{0pt plus 5cm}const double N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz = -\/174.\+0}\hypertarget{wifi-manager-example_8cc_a4c0854641eaf06479f9e825c840684d3}{}\label{wifi-manager-example_8cc_a4c0854641eaf06479f9e825c840684d3}
\index{wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}!noise\+Dbm@{noise\+Dbm}}
\index{noise\+Dbm@{noise\+Dbm}!wifi-\/manager-\/example.\+cc@{wifi-\/manager-\/example.\+cc}}
\subsubsection[{\texorpdfstring{noise\+Dbm}{noiseDbm}}]{\setlength{\rightskip}{0pt plus 5cm}double noise\+Dbm = {\bf N\+O\+I\+S\+E\+\_\+\+D\+B\+M\+\_\+\+Hz}}\hypertarget{wifi-manager-example_8cc_af9f95286ad3d5d533ca9d9b455e70398}{}\label{wifi-manager-example_8cc_af9f95286ad3d5d533ca9d9b455e70398}
