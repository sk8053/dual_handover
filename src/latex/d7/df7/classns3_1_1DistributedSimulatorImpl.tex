\hypertarget{classns3_1_1DistributedSimulatorImpl}{}\section{ns3\+:\+:Distributed\+Simulator\+Impl Class Reference}
\label{classns3_1_1DistributedSimulatorImpl}\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}


Distributed simulator implementation using lookahead.  




{\ttfamily \#include $<$distributed-\/simulator-\/impl.\+h$>$}



Inheritance diagram for ns3\+:\+:Distributed\+Simulator\+Impl\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Distributed\+Simulator\+Impl\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1DistributedSimulatorImpl_aa3dd6d49e1c354278e075af9ad0bc2cd}{Distributed\+Simulator\+Impl} ()
\item 
\hyperlink{classns3_1_1DistributedSimulatorImpl_a6fa7f1da8f6e0ae2c75d130f1f1f764f}{$\sim$\+Distributed\+Simulator\+Impl} ()
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_a6eaeaca4f82ad8d3b56a94401aa15c8e}{Destroy} ()
\item 
virtual bool \hyperlink{classns3_1_1DistributedSimulatorImpl_a4832655101c40732d4615d78932fb3da}{Is\+Finished} (void) const 
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_af57f3f311e8696c93b2dca475b6eac36}{Stop} (void)
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_ac5c3ff4918441cb0671ecd8d5d54d7df}{Stop} (\hyperlink{classns3_1_1Time}{Time} const \&\hyperlink{mmwave_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay})
\item 
virtual \hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1DistributedSimulatorImpl_a274125ed69833d03e98c2e286daaa5ae}{Schedule} (\hyperlink{classns3_1_1Time}{Time} const \&\hyperlink{mmwave_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}, \hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_a4791d5cfa3ef2ea0e1d347e1253cbced}{Schedule\+With\+Context} (uint32\+\_\+t context, \hyperlink{classns3_1_1Time}{Time} const \&\hyperlink{mmwave_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}, \hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual \hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1DistributedSimulatorImpl_abc8ef391cb69609920caa4eaf9788288}{Schedule\+Now} (\hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual \hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1DistributedSimulatorImpl_ad30415f829c55c48ef2f3e4f5611b671}{Schedule\+Destroy} (\hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_a4dfb40c258496656f8cfd324d124c825}{Remove} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id)
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_a01dbbe5f49399a58cde9959cebeee3ac}{Cancel} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id)
\item 
virtual bool \hyperlink{classns3_1_1DistributedSimulatorImpl_a2f1a2977c37fa67851180aefe3e40830}{Is\+Expired} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id) const 
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_a5a2cd016631eac7f93dba3b08ab0e0dd}{Run} (void)
\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DistributedSimulatorImpl_aa9b73613048f2eaa9ab848b71c43bd2d}{Now} (void) const 
\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DistributedSimulatorImpl_a830e4d9a0d37e7711486b1b494f2ea80}{Get\+Delay\+Left} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id) const 
\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{Get\+Maximum\+Simulation\+Time} (void) const 
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_adfe777ad071af4ff011f75f38b444b0b}{Set\+Maximum\+Look\+Ahead} (const \hyperlink{classns3_1_1Time}{Time} look\+Ahead)
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_ab30dedff30255b2a6ccd71e58010ac6e}{Set\+Scheduler} (\hyperlink{classns3_1_1ObjectFactory}{Object\+Factory} scheduler\+Factory)
\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_a2a3b19743b32474c365f620cdd15e48e}{Get\+System\+Id} (void) const 
\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_a8d7ed9e4a8994de9473d1b9ad2d39418}{Get\+Context} (void) const 
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1DistributedSimulatorImpl_ad6e7fa50059ad6517153e4de7ef84182}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1EventId}{Event\+Id} $>$ \hyperlink{classns3_1_1DistributedSimulatorImpl_aa24afccd74580b3d5903cc258a51944a}{Destroy\+Events}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1DistributedSimulatorImpl_ab2244c8d96f23a9d50b98115c917f993}{Do\+Dispose} (void)
\item 
void \hyperlink{classns3_1_1DistributedSimulatorImpl_a9f0890339d4631f5eeda05ac46cc824f}{Calculate\+Look\+Ahead} (void)
\item 
bool \hyperlink{classns3_1_1DistributedSimulatorImpl_ada1dd28c3da4462ea8a2acd60ff5ad96}{Is\+Local\+Finished} (void) const 
\item 
void \hyperlink{classns3_1_1DistributedSimulatorImpl_a56582f58c7b973e24d4c303bfb639f7c}{Process\+One\+Event} (void)
\item 
uint64\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_a8de6193e6e1d6f6f350bf61e029325d2}{Next\+Ts} (void) const 
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DistributedSimulatorImpl_a47bd05a3f2095f0935ef3ed60ceac4dc}{Next} (void) const 
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1DistributedSimulatorImpl_aa24afccd74580b3d5903cc258a51944a}{Destroy\+Events} \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\+\_\+destroy\+Events}
\item 
bool \hyperlink{classns3_1_1DistributedSimulatorImpl_aeda2f900518205bb35085c6b735f55ad}{m\+\_\+stop}
\item 
bool \hyperlink{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}{m\+\_\+global\+Finished}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Scheduler}{Scheduler} $>$ \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\+\_\+events}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\+\_\+uid}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_af2eeda6115d343a4123bf6d7decdb071}{m\+\_\+current\+Uid}
\item 
uint64\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\+\_\+current\+Ts}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_a30651c5fb4ca5cc15a13417510ca89f4}{m\+\_\+current\+Context}
\item 
int \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\+\_\+unscheduled\+Events}
\item 
\hyperlink{classns3_1_1LbtsMessage}{Lbts\+Message} $\ast$ \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\+\_\+p\+L\+B\+TS}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_a76a61030e685c239cc97d6b61b07fd18}{m\+\_\+my\+Id}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DistributedSimulatorImpl_acc5d9ac05b8d3d9876b327aaabe5607e}{m\+\_\+system\+Count}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\+\_\+granted\+Time}
\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\+\_\+look\+Ahead} = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (-\/1)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Distributed simulator implementation using lookahead. 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Destroy\+Events@{Destroy\+Events}}
\index{Destroy\+Events@{Destroy\+Events}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Destroy\+Events}{DestroyEvents}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<${\bf Event\+Id}$>$ {\bf ns3\+::\+Distributed\+Simulator\+Impl\+::\+Destroy\+Events}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_aa24afccd74580b3d5903cc258a51944a}{}\label{classns3_1_1DistributedSimulatorImpl_aa24afccd74580b3d5903cc258a51944a}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Distributed\+Simulator\+Impl@{Distributed\+Simulator\+Impl}}
\index{Distributed\+Simulator\+Impl@{Distributed\+Simulator\+Impl}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Distributed\+Simulator\+Impl()}{DistributedSimulatorImpl()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Distributed\+Simulator\+Impl\+::\+Distributed\+Simulator\+Impl (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1DistributedSimulatorImpl_aa3dd6d49e1c354278e075af9ad0bc2cd}{}\label{classns3_1_1DistributedSimulatorImpl_aa3dd6d49e1c354278e075af9ad0bc2cd}

\begin{DoxyCode}
93 \{
94   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
95 
96 \textcolor{preprocessor}{#ifdef NS3\_MPI}
97   \hyperlink{classns3_1_1DistributedSimulatorImpl_a76a61030e685c239cc97d6b61b07fd18}{m\_myId} = \hyperlink{classns3_1_1MpiInterface_a7f1f671b55948fb1c8f7eb54f22a9619}{MpiInterface::GetSystemId} ();
98   \hyperlink{classns3_1_1DistributedSimulatorImpl_acc5d9ac05b8d3d9876b327aaabe5607e}{m\_systemCount} = \hyperlink{classns3_1_1MpiInterface_ab35c742e7e7ad3fa07cf0dbb92413c82}{MpiInterface::GetSize} ();
99 
100   \textcolor{comment}{// Allocate the LBTS message buffer}
101   \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS} = \textcolor{keyword}{new} LbtsMessage[\hyperlink{classns3_1_1DistributedSimulatorImpl_acc5d9ac05b8d3d9876b327aaabe5607e}{m\_systemCount}];
102   \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\_grantedTime} = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0);
103 \textcolor{preprocessor}{#else}
104   \hyperlink{unused_8h_a3ba03ad859378e9f01285afb60f0e3ab}{NS\_UNUSED} (\hyperlink{classns3_1_1DistributedSimulatorImpl_acc5d9ac05b8d3d9876b327aaabe5607e}{m\_systemCount});
105   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Can't use distributed simulator without MPI compiled in"});
106 \textcolor{preprocessor}{#endif}
107 
108   \hyperlink{classns3_1_1DistributedSimulatorImpl_aeda2f900518205bb35085c6b735f55ad}{m\_stop} = \textcolor{keyword}{false};
109   \hyperlink{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}{m\_globalFinished} = \textcolor{keyword}{false};
110   \textcolor{comment}{// uids are allocated from 4.}
111   \textcolor{comment}{// uid 0 is "invalid" events}
112   \textcolor{comment}{// uid 1 is "now" events}
113   \textcolor{comment}{// uid 2 is "destroy" events}
114   \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid} = 4;
115   \textcolor{comment}{// before ::Run is entered, the m\_currentUid will be zero}
116   \hyperlink{classns3_1_1DistributedSimulatorImpl_af2eeda6115d343a4123bf6d7decdb071}{m\_currentUid} = 0;
117   \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs} = 0;
118   \hyperlink{classns3_1_1DistributedSimulatorImpl_a30651c5fb4ca5cc15a13417510ca89f4}{m\_currentContext} = \hyperlink{classns3_1_1Simulator_ab25cc4cd782af44b5843ce7258ecde10abaefe68ccc9945956c166aaeea2e986e}{Simulator::NO\_CONTEXT};
119   \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\_unscheduledEvents} = 0;
120   \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events} = 0;
121 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!````~Distributed\+Simulator\+Impl@{$\sim$\+Distributed\+Simulator\+Impl}}
\index{````~Distributed\+Simulator\+Impl@{$\sim$\+Distributed\+Simulator\+Impl}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{$\sim$\+Distributed\+Simulator\+Impl()}{~DistributedSimulatorImpl()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Distributed\+Simulator\+Impl\+::$\sim$\+Distributed\+Simulator\+Impl (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1DistributedSimulatorImpl_a6fa7f1da8f6e0ae2c75d130f1f1f764f}{}\label{classns3_1_1DistributedSimulatorImpl_a6fa7f1da8f6e0ae2c75d130f1f1f764f}

\begin{DoxyCode}
124 \{
125   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
126 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Calculate\+Look\+Ahead@{Calculate\+Look\+Ahead}}
\index{Calculate\+Look\+Ahead@{Calculate\+Look\+Ahead}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Calculate\+Look\+Ahead(void)}{CalculateLookAhead(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Calculate\+Look\+Ahead (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a9f0890339d4631f5eeda05ac46cc824f}{}\label{classns3_1_1DistributedSimulatorImpl_a9f0890339d4631f5eeda05ac46cc824f}

\begin{DoxyCode}
165 \{
166   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
167 
168 \textcolor{preprocessor}{#ifdef NS3\_MPI}
169   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MpiInterface_ab35c742e7e7ad3fa07cf0dbb92413c82}{MpiInterface::GetSize} () <= 1)
170     \{
171       \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0);
172     \}
173   \textcolor{keywordflow}{else}
174     \{
175       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} == \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (-1))
176         \{
177           \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} = \hyperlink{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{GetMaximumSimulationTime} ();
178         \}
179       \textcolor{comment}{// else it was already set by SetLookAhead}
180 
181       NodeContainer \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c} = \hyperlink{classns3_1_1NodeContainer_a687e8f9ceb74d0ce3b06591c9f44c9ed}{NodeContainer::GetGlobal} ();
182       \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1NodeContainer_aa1a9f2d2b09bfef7d066d3974bca2cc4}{NodeContainer::Iterator} iter = c.Begin (); iter != c.End (); ++iter)
183         \{
184           \textcolor{keywordflow}{if} ((*iter)->GetSystemId () != \hyperlink{classns3_1_1MpiInterface_a7f1f671b55948fb1c8f7eb54f22a9619}{MpiInterface::GetSystemId} ())
185             \{
186               \textcolor{keywordflow}{continue};
187             \}
188 
189           \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < (*iter)->GetNDevices (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
190             \{
191               Ptr<NetDevice> localNetDevice = (*iter)->GetDevice (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
192               \textcolor{comment}{// only works for p2p links currently}
193               \textcolor{keywordflow}{if} (!localNetDevice->IsPointToPoint ())
194                 \{
195                   \textcolor{keywordflow}{continue};
196                 \}
197               Ptr<Channel> channel = localNetDevice->GetChannel ();
198               \textcolor{keywordflow}{if} (channel == 0)
199                 \{
200                   \textcolor{keywordflow}{continue};
201                 \}
202 
203               \textcolor{comment}{// grab the adjacent node}
204               Ptr<Node> remoteNode;
205               \textcolor{keywordflow}{if} (channel->GetDevice (0) == localNetDevice)
206                 \{
207                   remoteNode = (channel->GetDevice (1))->GetNode ();
208                 \}
209               \textcolor{keywordflow}{else}
210                 \{
211                   remoteNode = (channel->GetDevice (0))->GetNode ();
212                 \}
213 
214               \textcolor{comment}{// if it's not remote, don't consider it}
215               \textcolor{keywordflow}{if} (remoteNode->GetSystemId () == \hyperlink{classns3_1_1MpiInterface_a7f1f671b55948fb1c8f7eb54f22a9619}{MpiInterface::GetSystemId} ())
216                 \{
217                   \textcolor{keywordflow}{continue};
218                 \}
219 
220               \textcolor{comment}{// compare delay on the channel with current value of}
221               \textcolor{comment}{// m\_lookAhead.  if delay on channel is smaller, make}
222               \textcolor{comment}{// it the new lookAhead.}
223               TimeValue \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay};
224               channel->GetAttribute (\textcolor{stringliteral}{"Delay"}, delay);
225 
226               \textcolor{keywordflow}{if} (delay.Get () < \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead})
227                 \{
228                   \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} = delay.Get ();
229                 \}
230             \}
231         \}
232     \}
233 
234   \textcolor{comment}{// m\_lookAhead is now set}
235   \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\_grantedTime} = \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead};
236 
237   \textcolor{comment}{/*}
238 \textcolor{comment}{   * Compute the maximum inter-task latency and use that value}
239 \textcolor{comment}{   * for tasks with no inter-task links.}
240 \textcolor{comment}{   *}
241 \textcolor{comment}{   * Special processing for edge cases.  For tasks that have no}
242 \textcolor{comment}{   * nodes need to determine a reasonable lookAhead value.  Infinity}
243 \textcolor{comment}{   * would work correctly but introduces a performance issue; tasks}
244 \textcolor{comment}{   * with an infinite lookAhead would execute all their events}
245 \textcolor{comment}{   * before doing an AllGather resulting in very bad load balance}
246 \textcolor{comment}{   * during the first time window.  Since all tasks participate in}
247 \textcolor{comment}{   * the AllGather it is desirable to have all the tasks advance in}
248 \textcolor{comment}{   * simulation time at a similar rate assuming roughly equal events}
249 \textcolor{comment}{   * per unit of simulation time in order to equalize the amount of}
250 \textcolor{comment}{   * work per time window.}
251 \textcolor{comment}{   */}
252   \textcolor{keywordtype}{long} sendbuf;
253   \textcolor{keywordtype}{long} recvbuf;
254 
255   \textcolor{comment}{/* Tasks with no inter-task links do not contribute to max */}
256   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} == \hyperlink{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{GetMaximumSimulationTime} ())
257     \{
258       sendbuf = 0;
259     \}
260   \textcolor{keywordflow}{else}
261     \{
262       sendbuf  = \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead}.\hyperlink{classns3_1_1Time_a8c88e10860be3bc0cfabdbd92df42cff}{GetInteger} ();
263     \}
264 
265   MPI\_Allreduce (&sendbuf, &recvbuf, 1, MPI\_LONG, MPI\_MAX, MPI\_COMM\_WORLD);
266 
267   \textcolor{comment}{/* For nodes that did not compute a lookahead use max from ranks}
268 \textcolor{comment}{   * that did compute a value.  An edge case occurs if all nodes have}
269 \textcolor{comment}{   * no inter-task links (max will be 0 in this case). Use infinity so all tasks}
270 \textcolor{comment}{   * will proceed without synchronization until a single AllGather}
271 \textcolor{comment}{   * occurs when all tasks have finished.}
272 \textcolor{comment}{   */}
273   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} == \hyperlink{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{GetMaximumSimulationTime} () && recvbuf != 0)
274     \{
275       \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} = \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (recvbuf);
276       \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\_grantedTime} = \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead};
277     \}
278 
279 \textcolor{preprocessor}{#else}
280   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Can't use distributed simulator without MPI compiled in"});
281 \textcolor{preprocessor}{#endif}
282 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Cancel@{Cancel}}
\index{Cancel@{Cancel}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Cancel(const Event\+Id \&id)}{Cancel(const EventId &id)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Cancel (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a01dbbe5f49399a58cde9959cebeee3ac}{}\label{classns3_1_1DistributedSimulatorImpl_a01dbbe5f49399a58cde9959cebeee3ac}




Set the cancel bit on this event\+: the event\textquotesingle{}s associated function will not be invoked when it expires.

This method has the same visible effect as the \hyperlink{classns3_1_1Simulator_ae30cacdda6cd0d5d62a8f2097b320506}{ns3\+::\+Simulator\+::\+Remove} method but its algorithmic complexity is much lower\+: it has O(1) complexity. This method has the exact same semantics as \hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{ns3\+::\+Event\+Id\+::\+Cancel}. Note that it is not possible to cancel events which were scheduled for the \char`\"{}destroy\char`\"{} time. Doing so will result in a program error (crash).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & the event to cancel \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1SimulatorImpl_ad117e616c99c915ddac6267a74804807}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
591 \{
592   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1DistributedSimulatorImpl_a2f1a2977c37fa67851180aefe3e40830}{IsExpired} (\textcolor{keywordtype}{id}))
593     \{
594       \textcolor{keywordtype}{id}.PeekEventImpl ()->Cancel ();
595     \}
596 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Destroy@{Destroy}}
\index{Destroy@{Destroy}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Destroy()}{Destroy()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Destroy (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a6eaeaca4f82ad8d3b56a94401aa15c8e}{}\label{classns3_1_1DistributedSimulatorImpl_a6eaeaca4f82ad8d3b56a94401aa15c8e}




Execute the events scheduled with \hyperlink{classns3_1_1DistributedSimulatorImpl_ad30415f829c55c48ef2f3e4f5611b671}{Schedule\+Destroy()}.

This method is typically invoked at the end of a simulation to avoid false-\/positive reports by a leak checker. After this method has been invoked, it is actually possible to restart a new simulation with a set of calls to \hyperlink{classns3_1_1Simulator_a84be982e6d03b62c3dc3303c75a9b909}{Simulator\+::\+Run}, \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator\+::\+Schedule} and \hyperlink{classns3_1_1Simulator_a86dbaef45a15a42365d7d2ae550449f6}{Simulator\+::\+Schedule\+With\+Context}. 

Implements \hyperlink{classns3_1_1SimulatorImpl_a421e634f3a4035941f00e72f367506fa}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
145 \{
146   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
147 
148   \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.empty ())
149     \{
150       Ptr<EventImpl> ev = \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.front ().PeekEventImpl ();
151       \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.pop\_front ();
152       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"handle destroy "} << ev);
153       \textcolor{keywordflow}{if} (!ev->IsCancelled ())
154         \{
155           ev->Invoke ();
156         \}
157     \}
158 
159   \hyperlink{classns3_1_1MpiInterface_a6cc83aa90c7e203219f8aa3889ae44f7}{MpiInterface::Destroy} ();
160 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_ab2244c8d96f23a9d50b98115c917f993}{}\label{classns3_1_1DistributedSimulatorImpl_ab2244c8d96f23a9d50b98115c917f993}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1DistributedSimulatorImpl_ab2244c8d96f23a9d50b98115c917f993}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{ns3\+::\+Object}.


\begin{DoxyCode}
130 \{
131   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
132 
133   \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->IsEmpty ())
134     \{
135       Scheduler::Event next = \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->RemoveNext ();
136       next.impl->Unref ();
137     \}
138   \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events} = 0;
139   \textcolor{keyword}{delete} [] \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS};
140   \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{SimulatorImpl::DoDispose} ();
141 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Get\+Context@{Get\+Context}}
\index{Get\+Context@{Get\+Context}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Context(void) const }{GetContext(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::\+Get\+Context (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a8d7ed9e4a8994de9473d1b9ad2d39418}{}\label{classns3_1_1DistributedSimulatorImpl_a8d7ed9e4a8994de9473d1b9ad2d39418}




Get the current simulation context.

The simulation context is the ns-\/3 notion of a Logical Process. Events in a single context should only modify state associated with that context. Events for objects in other contexts should be scheduled with \hyperlink{classns3_1_1DistributedSimulatorImpl_a4791d5cfa3ef2ea0e1d347e1253cbced}{Schedule\+With\+Context()} to track the context switches. In other words, events in different contexts should be mutually thread safe, by not modify overlapping model state.

In circumstances where the context can\textquotesingle{}t be determined, such as during object initialization, the {\ttfamily enum} value {\ttfamily N\+O\+\_\+\+C\+O\+N\+T\+E\+XT} should be used.

\begin{DoxyReturn}{Returns}
The current simulation context 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a8b66270c97766c0adb997e2535648557}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
642 \{
643   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1DistributedSimulatorImpl_a30651c5fb4ca5cc15a13417510ca89f4}{m\_currentContext};
644 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Get\+Delay\+Left@{Get\+Delay\+Left}}
\index{Get\+Delay\+Left@{Get\+Delay\+Left}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Delay\+Left(const Event\+Id \&id) const }{GetDelayLeft(const EventId &id) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Get\+Delay\+Left (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a830e4d9a0d37e7711486b1b494f2ea80}{}\label{classns3_1_1DistributedSimulatorImpl_a830e4d9a0d37e7711486b1b494f2ea80}




Get the remaining time until this event will execute.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & The event id to analyse. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The delay left until the input event id expires. if the event is not running, this method returns zero. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a0a8e0885c0f98fa3e07ede4bcc79dccb}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
545 \{
546   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a2f1a2977c37fa67851180aefe3e40830}{IsExpired} (\textcolor{keywordtype}{id}))
547     \{
548       \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (0);
549     \}
550   \textcolor{keywordflow}{else}
551     \{
552       \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\textcolor{keywordtype}{id}.GetTs () - \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs});
553     \}
554 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Get\+Maximum\+Simulation\+Time@{Get\+Maximum\+Simulation\+Time}}
\index{Get\+Maximum\+Simulation\+Time@{Get\+Maximum\+Simulation\+Time}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Maximum\+Simulation\+Time(void) const }{GetMaximumSimulationTime(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Get\+Maximum\+Simulation\+Time (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{}\label{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}




Get the maximum representable simulation time.

\begin{DoxyReturn}{Returns}
The maximum simulation time at which an event can be scheduled.
\end{DoxyReturn}
The returned value will always be bigger than or equal to \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator\+::\+Now}. \begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000139}{Todo}]I am fairly certain other compilers use other non-\/standard post-\/fixes to indicate 64 bit constants. \end{DoxyRefDesc}


Implements \hyperlink{classns3_1_1SimulatorImpl_a07b16567e2ec50ab91d5e00b98f31a22}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
634 \{
637   \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (0x7fffffffffffffffLL);
638 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Get\+System\+Id@{Get\+System\+Id}}
\index{Get\+System\+Id@{Get\+System\+Id}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+System\+Id(void) const }{GetSystemId(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::\+Get\+System\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a2a3b19743b32474c365f620cdd15e48e}{}\label{classns3_1_1DistributedSimulatorImpl_a2a3b19743b32474c365f620cdd15e48e}




Get the system id of this simulator.

The system id is the identifier for this simulator instance in a distributed simulation. For M\+PI this is the M\+PI rank. \begin{DoxyReturn}{Returns}
The system id for this simulator. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a16b1ae89947d862b421d98a702bac03b}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
452 \{
453   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1DistributedSimulatorImpl_a76a61030e685c239cc97d6b61b07fd18}{m\_myId};
454 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_ad6e7fa50059ad6517153e4de7ef84182}{}\label{classns3_1_1DistributedSimulatorImpl_ad6e7fa50059ad6517153e4de7ef84182}

\begin{DoxyCode}
83 \{
84   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::DistributedSimulatorImpl"})
85     .SetParent<SimulatorImpl> ()
86     .SetGroupName (\textcolor{stringliteral}{"Mpi"})
87     .AddConstructor<\hyperlink{classns3_1_1DistributedSimulatorImpl_aa3dd6d49e1c354278e075af9ad0bc2cd}{DistributedSimulatorImpl}> ()
88   ;
89   \textcolor{keywordflow}{return} tid;
90 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Is\+Expired@{Is\+Expired}}
\index{Is\+Expired@{Is\+Expired}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Is\+Expired(const Event\+Id \&id) const }{IsExpired(const EventId &id) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Distributed\+Simulator\+Impl\+::\+Is\+Expired (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a2f1a2977c37fa67851180aefe3e40830}{}\label{classns3_1_1DistributedSimulatorImpl_a2f1a2977c37fa67851180aefe3e40830}




Check if an event has already run or been cancelled.

This method has O(1) complexity. Note that it is not possible to test for the expiration of events which were scheduled for the \char`\"{}destroy\char`\"{} time. Doing so will result in a program error (crash). An event is said to \char`\"{}expire\char`\"{} when it starts being scheduled which means that if the code executed by the event calls this function, it will get true.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & The event to test for expiration. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} if the event has expired, false otherwise. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a4b01ac397f5ce86997e9caec087f63d2}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
600 \{
601   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.GetUid () == 2)
602     \{
603       \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.PeekEventImpl () == 0
604           || \textcolor{keywordtype}{id}.PeekEventImpl ()->IsCancelled ())
605         \{
606           \textcolor{keywordflow}{return} \textcolor{keyword}{true};
607         \}
608       \textcolor{comment}{// destroy events.}
609       \textcolor{keywordflow}{for} (DestroyEvents::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
610         \{
611           \textcolor{keywordflow}{if} (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == \textcolor{keywordtype}{id})
612             \{
613               \textcolor{keywordflow}{return} \textcolor{keyword}{false};
614             \}
615         \}
616       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
617     \}
618   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.PeekEventImpl () == 0
619       || \textcolor{keywordtype}{id}.GetTs () < \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs}
620       || (\textcolor{keywordtype}{id}.GetTs () == \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs}
621           && \textcolor{keywordtype}{id}.GetUid () <= \hyperlink{classns3_1_1DistributedSimulatorImpl_af2eeda6115d343a4123bf6d7decdb071}{m\_currentUid})
622       || \textcolor{keywordtype}{id}.PeekEventImpl ()->IsCancelled ())
623     \{
624       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
625     \}
626   \textcolor{keywordflow}{else}
627     \{
628       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
629     \}
630 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Is\+Finished@{Is\+Finished}}
\index{Is\+Finished@{Is\+Finished}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Is\+Finished(void) const }{IsFinished(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Distributed\+Simulator\+Impl\+::\+Is\+Finished (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a4832655101c40732d4615d78932fb3da}{}\label{classns3_1_1DistributedSimulatorImpl_a4832655101c40732d4615d78932fb3da}




Check if the simulation should finish.

Reasons to finish are because there are no more events lefts to be scheduled, or if simulation time has already reached the \char`\"{}stop time\char`\"{} (see \hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator\+::\+Stop()}).

\begin{DoxyReturn}{Returns}
{\ttfamily true} if no more events or stop time reached. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_afc1a8e4781155d6459fb2d25384b332f}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
336 \{
337   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}{m\_globalFinished};
338 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Is\+Local\+Finished@{Is\+Local\+Finished}}
\index{Is\+Local\+Finished@{Is\+Local\+Finished}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Is\+Local\+Finished(void) const }{IsLocalFinished(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Distributed\+Simulator\+Impl\+::\+Is\+Local\+Finished (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_ada1dd28c3da4462ea8a2acd60ff5ad96}{}\label{classns3_1_1DistributedSimulatorImpl_ada1dd28c3da4462ea8a2acd60ff5ad96}

\begin{DoxyCode}
342 \{
343   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->IsEmpty () || \hyperlink{classns3_1_1DistributedSimulatorImpl_aeda2f900518205bb35085c6b735f55ad}{m\_stop};
344 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Next@{Next}}
\index{Next@{Next}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Next(void) const }{Next(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Next (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a47bd05a3f2095f0935ef3ed60ceac4dc}{}\label{classns3_1_1DistributedSimulatorImpl_a47bd05a3f2095f0935ef3ed60ceac4dc}

\begin{DoxyCode}
364 \{
365   \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a8de6193e6e1d6f6f350bf61e029325d2}{NextTs} ());
366 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Next\+Ts@{Next\+Ts}}
\index{Next\+Ts@{Next\+Ts}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Next\+Ts(void) const }{NextTs(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::\+Next\+Ts (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a8de6193e6e1d6f6f350bf61e029325d2}{}\label{classns3_1_1DistributedSimulatorImpl_a8de6193e6e1d6f6f350bf61e029325d2}

\begin{DoxyCode}
348 \{
349   \textcolor{comment}{// If local MPI task is has no more events or stop was called}
350   \textcolor{comment}{// next event time is infinity.}
351   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_ada1dd28c3da4462ea8a2acd60ff5ad96}{IsLocalFinished} ())
352     \{
353       \textcolor{keywordflow}{return} \hyperlink{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{GetMaximumSimulationTime} ().\hyperlink{classns3_1_1Time_a40a7025b73dac7d02f8a4e1e54eaa5b5}{GetTimeStep} ();
354     \}
355   \textcolor{keywordflow}{else}
356     \{
357       Scheduler::Event ev = \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->PeekNext ();
358       \textcolor{keywordflow}{return} ev.key.m\_ts;
359     \}
360 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Now@{Now}}
\index{Now@{Now}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Now(void) const }{Now(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Now (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_aa9b73613048f2eaa9ab848b71c43bd2d}{}\label{classns3_1_1DistributedSimulatorImpl_aa9b73613048f2eaa9ab848b71c43bd2d}




Return the current simulation virtual time.

\begin{DoxyReturn}{Returns}
The current virtual time. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_aa516c50060846adc6fd316e83ef0797c}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
539 \{
540   \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs});
541 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Process\+One\+Event@{Process\+One\+Event}}
\index{Process\+One\+Event@{Process\+One\+Event}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Process\+One\+Event(void)}{ProcessOneEvent(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Process\+One\+Event (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a56582f58c7b973e24d4c303bfb639f7c}{}\label{classns3_1_1DistributedSimulatorImpl_a56582f58c7b973e24d4c303bfb639f7c}

\begin{DoxyCode}
318 \{
319   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
320 
321   Scheduler::Event next = \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->RemoveNext ();
322 
323   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (next.key.m\_ts >= \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs});
324   \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\_unscheduledEvents}--;
325 
326   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"handle "} << next.key.m\_ts);
327   \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs} = next.key.m\_ts;
328   \hyperlink{classns3_1_1DistributedSimulatorImpl_a30651c5fb4ca5cc15a13417510ca89f4}{m\_currentContext} = next.key.m\_context;
329   \hyperlink{classns3_1_1DistributedSimulatorImpl_af2eeda6115d343a4123bf6d7decdb071}{m\_currentUid} = next.key.m\_uid;
330   next.impl->Invoke ();
331   next.impl->Unref ();
332 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Remove@{Remove}}
\index{Remove@{Remove}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Remove(const Event\+Id \&id)}{Remove(const EventId &id)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Remove (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a4dfb40c258496656f8cfd324d124c825}{}\label{classns3_1_1DistributedSimulatorImpl_a4dfb40c258496656f8cfd324d124c825}




Remove an event from the event list.

This method has the same visible effect as the \hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{ns3\+::\+Event\+Id\+::\+Cancel} method but its algorithmic complexity is much higher\+: it has often O(log(n)) complexity, sometimes O(n), sometimes worse. Note that it is not possible to remove events which were scheduled for the \char`\"{}destroy\char`\"{} time. Doing so will result in a program error (crash).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & The event to remove from the list of scheduled events. \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1SimulatorImpl_a6456e1e88119250f07b589419acc775c}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
558 \{
559   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.GetUid () == 2)
560     \{
561       \textcolor{comment}{// destroy events.}
562       \textcolor{keywordflow}{for} (DestroyEvents::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
563         \{
564           \textcolor{keywordflow}{if} (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == \textcolor{keywordtype}{id})
565             \{
566               \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.erase (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
567               \textcolor{keywordflow}{break};
568             \}
569         \}
570       \textcolor{keywordflow}{return};
571     \}
572   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a2f1a2977c37fa67851180aefe3e40830}{IsExpired} (\textcolor{keywordtype}{id}))
573     \{
574       \textcolor{keywordflow}{return};
575     \}
576   Scheduler::Event event;
577   \textcolor{keyword}{event}.impl = \textcolor{keywordtype}{id}.PeekEventImpl ();
578   \textcolor{keyword}{event}.key.m\_ts = \textcolor{keywordtype}{id}.GetTs ();
579   \textcolor{keyword}{event}.key.m\_context = \textcolor{keywordtype}{id}.GetContext ();
580   \textcolor{keyword}{event}.key.m\_uid = \textcolor{keywordtype}{id}.GetUid ();
581   \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->Remove (event);
582   \textcolor{keyword}{event}.impl->Cancel ();
583   \textcolor{comment}{// whenever we remove an event from the event list, we have to unref it.}
584   \textcolor{keyword}{event}.impl->Unref ();
585 
586   \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\_unscheduledEvents}--;
587 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Run@{Run}}
\index{Run@{Run}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Run(void)}{Run(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a5a2cd016631eac7f93dba3b08ab0e0dd}{}\label{classns3_1_1DistributedSimulatorImpl_a5a2cd016631eac7f93dba3b08ab0e0dd}




Run the simulation.

The simulation will run until one of\+:
\begin{DoxyItemize}
\item No events are present anymore
\item The user called \hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator\+::\+Stop}
\item The user called \hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator\+::\+Stop} with a stop time and the expiration time of the next event to be processed is greater than or equal to the stop time. 
\end{DoxyItemize}

Implements \hyperlink{classns3_1_1SimulatorImpl_a4b5de814986948cca3658a84c9d671f6}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
370 \{
371   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
372 
373 \textcolor{preprocessor}{#ifdef NS3\_MPI}
374   \hyperlink{classns3_1_1DistributedSimulatorImpl_a9f0890339d4631f5eeda05ac46cc824f}{CalculateLookAhead} ();
375   \hyperlink{classns3_1_1DistributedSimulatorImpl_aeda2f900518205bb35085c6b735f55ad}{m\_stop} = \textcolor{keyword}{false};
376   \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}{m\_globalFinished})
377     \{
378       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} nextTime = \hyperlink{classns3_1_1DistributedSimulatorImpl_a47bd05a3f2095f0935ef3ed60ceac4dc}{Next} ();
379 
380       \textcolor{comment}{// If local event is beyond grantedTime then need to synchronize}
381       \textcolor{comment}{// with other tasks to determine new time window. If local task}
382       \textcolor{comment}{// is finished then continue to participate in allgather}
383       \textcolor{comment}{// synchronizations with other tasks until all tasks have}
384       \textcolor{comment}{// completed.}
385       \textcolor{keywordflow}{if} (nextTime > \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\_grantedTime} || \hyperlink{classns3_1_1DistributedSimulatorImpl_ada1dd28c3da4462ea8a2acd60ff5ad96}{IsLocalFinished} () )
386         \{
387           \textcolor{comment}{// Can't process next event, calculate a new LBTS}
388           \textcolor{comment}{// First receive any pending messages}
389           \hyperlink{classns3_1_1GrantedTimeWindowMpiInterface_a25a6699dcab1ab2e348e0b5a2c90aa42}{GrantedTimeWindowMpiInterface::ReceiveMessages} ();
390           \textcolor{comment}{// reset next time}
391           nextTime = \hyperlink{classns3_1_1DistributedSimulatorImpl_a47bd05a3f2095f0935ef3ed60ceac4dc}{Next} ();
392           \textcolor{comment}{// And check for send completes}
393           \hyperlink{classns3_1_1GrantedTimeWindowMpiInterface_a517789eabe6a386e850cffb7e4d1a0dc}{GrantedTimeWindowMpiInterface::TestSendComplete} ()
      ;
394           \textcolor{comment}{// Finally calculate the lbts}
395           LbtsMessage lMsg (\hyperlink{classns3_1_1GrantedTimeWindowMpiInterface_a3b4a3753c629cabf580da859d9e23c22}{GrantedTimeWindowMpiInterface::GetRxCount}
       (), \hyperlink{classns3_1_1GrantedTimeWindowMpiInterface_a672feee70ece2b9a40dc60bc796e1c18}{GrantedTimeWindowMpiInterface::GetTxCount} (), 
396                             \hyperlink{classns3_1_1DistributedSimulatorImpl_a76a61030e685c239cc97d6b61b07fd18}{m\_myId}, \hyperlink{classns3_1_1DistributedSimulatorImpl_ada1dd28c3da4462ea8a2acd60ff5ad96}{IsLocalFinished} (), nextTime);
397           \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[\hyperlink{classns3_1_1DistributedSimulatorImpl_a76a61030e685c239cc97d6b61b07fd18}{m\_myId}] = lMsg;
398           MPI\_Allgather (&lMsg, \textcolor{keyword}{sizeof} (LbtsMessage), MPI\_BYTE, \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS},
399                          \textcolor{keyword}{sizeof} (LbtsMessage), MPI\_BYTE, MPI\_COMM\_WORLD);
400           \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} smallestTime = \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[0].\hyperlink{classns3_1_1LbtsMessage_ae55954da6038045d22fc272bb48611b2}{GetSmallestTime} ();
401           \textcolor{comment}{// The totRx and totTx counts insure there are no transient}
402           \textcolor{comment}{// messages;  If totRx != totTx, there are transients,}
403           \textcolor{comment}{// so we don't update the granted time.}
404           uint32\_t totRx = \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[0].\hyperlink{classns3_1_1LbtsMessage_a16e21f1f46e16bbfa67e7aadc26aef99}{GetRxCount} ();
405           uint32\_t totTx = \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[0].\hyperlink{classns3_1_1LbtsMessage_a375b9643d5ab856a7b46d740d7a8b4a0}{GetTxCount} ();
406           \hyperlink{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}{m\_globalFinished} = \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[0].\hyperlink{classns3_1_1LbtsMessage_ac09666d921b4ab6232e0b90090ae1dee}{IsFinished} ();
407 
408           \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 1; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1DistributedSimulatorImpl_acc5d9ac05b8d3d9876b327aaabe5607e}{m\_systemCount}; ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
409             \{
410               \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].GetSmallestTime () < smallestTime)
411                 \{
412                   smallestTime = \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].\hyperlink{classns3_1_1LbtsMessage_ae55954da6038045d22fc272bb48611b2}{GetSmallestTime} ();
413                 \}
414               totRx += \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].\hyperlink{classns3_1_1LbtsMessage_a16e21f1f46e16bbfa67e7aadc26aef99}{GetRxCount} ();
415               totTx += \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].\hyperlink{classns3_1_1LbtsMessage_a375b9643d5ab856a7b46d740d7a8b4a0}{GetTxCount} ();
416               \hyperlink{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}{m\_globalFinished} &= \hyperlink{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{m\_pLBTS}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].\hyperlink{classns3_1_1LbtsMessage_ac09666d921b4ab6232e0b90090ae1dee}{IsFinished} ();
417             \}
418           \textcolor{keywordflow}{if} (totRx == totTx)
419             \{
420               \textcolor{comment}{// If lookahead is infinite then granted time should be as well.}
421               \textcolor{comment}{// Covers the edge case if all the tasks have no inter tasks}
422               \textcolor{comment}{// links, prevents overflow of granted time.}
423               \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} == \hyperlink{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{GetMaximumSimulationTime} ())
424                 \{
425                   \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\_grantedTime} = \hyperlink{classns3_1_1DistributedSimulatorImpl_a09879f4ab9e765716a96b40900be4480}{GetMaximumSimulationTime} ();
426                 \}
427               \textcolor{keywordflow}{else}
428                 \{
429                   \textcolor{comment}{// Overflow is possible here if near end of representable time.}
430                   \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\_grantedTime} = smallestTime + \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead};
431                 \}
432             \}
433         \}
434 
435       \textcolor{comment}{// Execute next event if it is within the current time window.}
436       \textcolor{comment}{// Local task may be completed.}
437       \textcolor{keywordflow}{if} ( (nextTime <= \hyperlink{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{m\_grantedTime}) && (!\hyperlink{classns3_1_1DistributedSimulatorImpl_ada1dd28c3da4462ea8a2acd60ff5ad96}{IsLocalFinished} ()) )
438         \{ \textcolor{comment}{// Safe to process}
439           \hyperlink{classns3_1_1DistributedSimulatorImpl_a56582f58c7b973e24d4c303bfb639f7c}{ProcessOneEvent} ();
440         \}
441     \}
442 
443   \textcolor{comment}{// If the simulator stopped naturally by lack of events, make a}
444   \textcolor{comment}{// consistency test to check that we didn't lose any events along the way.}
445   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (!\hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->IsEmpty () || \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\_unscheduledEvents} == 0);
446 \textcolor{preprocessor}{#else}
447   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Can't use distributed simulator without MPI compiled in"});
448 \textcolor{preprocessor}{#endif}
449 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Schedule@{Schedule}}
\index{Schedule@{Schedule}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule(\+Time const \&delay, Event\+Impl $\ast$event)}{Schedule(Time const &delay, EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Schedule (
\begin{DoxyParamCaption}
\item[{{\bf Time} const \&}]{delay, }
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a274125ed69833d03e98c2e286daaa5ae}{}\label{classns3_1_1DistributedSimulatorImpl_a274125ed69833d03e98c2e286daaa5ae}




Schedule a future event execution (in the same context).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em delay} & Delay until the event expires. \\
\hline
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a24eac97ca7dc0e64162e3596064cfb5c}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
477 \{
478   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep () << event);
479 
480   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} tAbsolute = \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay} + \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs});
481 
482   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (tAbsolute.IsPositive ());
483   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (tAbsolute >= \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs}));
484   Scheduler::Event ev;
485   ev.impl = event;
486   ev.key.m\_ts = \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>} (tAbsolute.GetTimeStep ());
487   ev.key.m\_context = \hyperlink{classns3_1_1DistributedSimulatorImpl_a8d7ed9e4a8994de9473d1b9ad2d39418}{GetContext} ();
488   ev.key.m\_uid = \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid};
489   \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid}++;
490   \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\_unscheduledEvents}++;
491   \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->Insert (ev);
492   \textcolor{keywordflow}{return} EventId (event, ev.key.m\_ts, ev.key.m\_context, ev.key.m\_uid);
493 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Schedule\+Destroy@{Schedule\+Destroy}}
\index{Schedule\+Destroy@{Schedule\+Destroy}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule\+Destroy(\+Event\+Impl $\ast$event)}{ScheduleDestroy(EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Schedule\+Destroy (
\begin{DoxyParamCaption}
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_ad30415f829c55c48ef2f3e4f5611b671}{}\label{classns3_1_1DistributedSimulatorImpl_ad30415f829c55c48ef2f3e4f5611b671}




Schedule an event to run at the end of the simulation, after the \hyperlink{classns3_1_1DistributedSimulatorImpl_af57f3f311e8696c93b2dca475b6eac36}{Stop()} time or condition has been reached.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a04f4a00ed04886ed0b9982038c3ed5f9}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
528 \{
529   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << event);
530 
531   EventId id (Ptr<EventImpl> (event, \textcolor{keyword}{false}), \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs}, 0xffffffff, 2);
532   \hyperlink{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{m\_destroyEvents}.push\_back (\textcolor{keywordtype}{id});
533   \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid}++;
534   \textcolor{keywordflow}{return} id;
535 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Schedule\+Now@{Schedule\+Now}}
\index{Schedule\+Now@{Schedule\+Now}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule\+Now(\+Event\+Impl $\ast$event)}{ScheduleNow(EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Distributed\+Simulator\+Impl\+::\+Schedule\+Now (
\begin{DoxyParamCaption}
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_abc8ef391cb69609920caa4eaf9788288}{}\label{classns3_1_1DistributedSimulatorImpl_abc8ef391cb69609920caa4eaf9788288}




Schedule an event to run at the current virtual time.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a9889e663af5245c5624c35611a9db948}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
512 \{
513   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << event);
514 
515   Scheduler::Event ev;
516   ev.impl = event;
517   ev.key.m\_ts = \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs};
518   ev.key.m\_context = \hyperlink{classns3_1_1DistributedSimulatorImpl_a8d7ed9e4a8994de9473d1b9ad2d39418}{GetContext} ();
519   ev.key.m\_uid = \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid};
520   \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid}++;
521   \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\_unscheduledEvents}++;
522   \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->Insert (ev);
523   \textcolor{keywordflow}{return} EventId (event, ev.key.m\_ts, ev.key.m\_context, ev.key.m\_uid);
524 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Schedule\+With\+Context@{Schedule\+With\+Context}}
\index{Schedule\+With\+Context@{Schedule\+With\+Context}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule\+With\+Context(uint32\+\_\+t context, Time const \&delay, Event\+Impl $\ast$event)}{ScheduleWithContext(uint32_t context, Time const &delay, EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Schedule\+With\+Context (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{context, }
\item[{{\bf Time} const \&}]{delay, }
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a4791d5cfa3ef2ea0e1d347e1253cbced}{}\label{classns3_1_1DistributedSimulatorImpl_a4791d5cfa3ef2ea0e1d347e1253cbced}




Schedule a future event execution (in a different context). This method is thread-\/safe\+: it can be called from any thread.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em delay} & Delay until the event expires. \\
\hline
\mbox{\tt in}  & {\em context} & Event context. \\
\hline
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a75a00f1362af7f641cc1467361201b13}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
497 \{
498   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << context << \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep () << 
      \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs} << event);
499 
500   Scheduler::Event ev;
501   ev.impl = event;
502   ev.key.m\_ts = \hyperlink{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{m\_currentTs} + \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep ();
503   ev.key.m\_context = context;
504   ev.key.m\_uid = \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid};
505   \hyperlink{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{m\_uid}++;
506   \hyperlink{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{m\_unscheduledEvents}++;
507   \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->Insert (ev);
508 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Set\+Maximum\+Look\+Ahead@{Set\+Maximum\+Look\+Ahead}}
\index{Set\+Maximum\+Look\+Ahead@{Set\+Maximum\+Look\+Ahead}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Set\+Maximum\+Look\+Ahead(const Time look\+Ahead)}{SetMaximumLookAhead(const Time lookAhead)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Set\+Maximum\+Look\+Ahead (
\begin{DoxyParamCaption}
\item[{const {\bf Time}}]{look\+Ahead}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_adfe777ad071af4ff011f75f38b444b0b}{}\label{classns3_1_1DistributedSimulatorImpl_adfe777ad071af4ff011f75f38b444b0b}

\begin{DoxyCode}
286 \{
287   \textcolor{keywordflow}{if} (lookAhead > 0)
288     \{
289       \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << lookAhead);
290       \hyperlink{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{m\_lookAhead} = lookAhead;
291     \}
292   \textcolor{keywordflow}{else}
293     \{
294       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"attempted to set look ahead negative: "} << lookAhead);
295     \}
296 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Set\+Scheduler@{Set\+Scheduler}}
\index{Set\+Scheduler@{Set\+Scheduler}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Set\+Scheduler(\+Object\+Factory scheduler\+Factory)}{SetScheduler(ObjectFactory schedulerFactory)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Set\+Scheduler (
\begin{DoxyParamCaption}
\item[{{\bf Object\+Factory}}]{scheduler\+Factory}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_ab30dedff30255b2a6ccd71e58010ac6e}{}\label{classns3_1_1DistributedSimulatorImpl_ab30dedff30255b2a6ccd71e58010ac6e}
Set the \hyperlink{classns3_1_1Scheduler}{Scheduler} to be used to manage the event list.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em scheduler\+Factory} & A new event scheduler factory.\\
\hline
\end{DoxyParams}
The event scheduler can be set at any time\+: the events scheduled in the previous scheduler will be transfered to the new scheduler before we start to use it. 

Implements \hyperlink{classns3_1_1SimulatorImpl_a15cc88b2e2cd711b5ec503ad8ec517dc}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
300 \{
301   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << schedulerFactory);
302 
303   Ptr<Scheduler> scheduler = schedulerFactory.Create<Scheduler> ();
304 
305   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events} != 0)
306     \{
307       \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->IsEmpty ())
308         \{
309           Scheduler::Event next = \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events}->RemoveNext ();
310           scheduler->Insert (next);
311         \}
312     \}
313   \hyperlink{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{m\_events} = scheduler;
314 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16


\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Stop@{Stop}}
\index{Stop@{Stop}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Stop(void)}{Stop(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Stop (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_af57f3f311e8696c93b2dca475b6eac36}{}\label{classns3_1_1DistributedSimulatorImpl_af57f3f311e8696c93b2dca475b6eac36}




Tell the \hyperlink{classns3_1_1Simulator}{Simulator} the calling event should be the last one executed.

If a running event invokes this method, it will be the last event executed by the \hyperlink{classns3_1_1Simulator_a84be982e6d03b62c3dc3303c75a9b909}{Simulator\+::\+Run} method before returning to the caller. 

Implements \hyperlink{classns3_1_1SimulatorImpl_afbdfb2b01d0e62a7f681801f27820611}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
458 \{
459   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
460 
461   \hyperlink{classns3_1_1DistributedSimulatorImpl_aeda2f900518205bb35085c6b735f55ad}{m\_stop} = \textcolor{keyword}{true};
462 \}
\end{DoxyCode}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!Stop@{Stop}}
\index{Stop@{Stop}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Stop(\+Time const \&delay)}{Stop(Time const &delay)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Distributed\+Simulator\+Impl\+::\+Stop (
\begin{DoxyParamCaption}
\item[{{\bf Time} const \&}]{delay}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_ac5c3ff4918441cb0671ecd8d5d54d7df}{}\label{classns3_1_1DistributedSimulatorImpl_ac5c3ff4918441cb0671ecd8d5d54d7df}




Schedule the time delay until the \hyperlink{classns3_1_1Simulator}{Simulator} should stop.

Force the \hyperlink{classns3_1_1Simulator_a84be982e6d03b62c3dc3303c75a9b909}{Simulator\+::\+Run} method to return to the caller when the expiration time of the next event to be processed is greater than or equal to the stop time. The stop time is relative to the current simulation time. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em delay} & The stop time, relative to the current time. \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1SimulatorImpl_a8cd4ff5659b9f06af3da2897a1fea142}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
466 \{
467   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep ());
468 
469   \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (\hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}, &\hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator::Stop});
470 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17




\subsection{Member Data Documentation}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+current\+Context@{m\+\_\+current\+Context}}
\index{m\+\_\+current\+Context@{m\+\_\+current\+Context}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Context}{m_currentContext}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+current\+Context\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a30651c5fb4ca5cc15a13417510ca89f4}{}\label{classns3_1_1DistributedSimulatorImpl_a30651c5fb4ca5cc15a13417510ca89f4}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+current\+Ts@{m\+\_\+current\+Ts}}
\index{m\+\_\+current\+Ts@{m\+\_\+current\+Ts}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Ts}{m_currentTs}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+current\+Ts\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}{}\label{classns3_1_1DistributedSimulatorImpl_a469b43a00af2733d46eff6c1da55f36c}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+current\+Uid@{m\+\_\+current\+Uid}}
\index{m\+\_\+current\+Uid@{m\+\_\+current\+Uid}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Uid}{m_currentUid}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+current\+Uid\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_af2eeda6115d343a4123bf6d7decdb071}{}\label{classns3_1_1DistributedSimulatorImpl_af2eeda6115d343a4123bf6d7decdb071}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+destroy\+Events@{m\+\_\+destroy\+Events}}
\index{m\+\_\+destroy\+Events@{m\+\_\+destroy\+Events}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+destroy\+Events}{m_destroyEvents}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Destroy\+Events} ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+destroy\+Events\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}{}\label{classns3_1_1DistributedSimulatorImpl_a06452ba2e8208fef78ed3ee8a788eb13}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+events@{m\+\_\+events}}
\index{m\+\_\+events@{m\+\_\+events}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+events}{m_events}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Scheduler}$>$ ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+events\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}{}\label{classns3_1_1DistributedSimulatorImpl_a62caa947f3f3c6c79b6d58b6949d2c10}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+global\+Finished@{m\+\_\+global\+Finished}}
\index{m\+\_\+global\+Finished@{m\+\_\+global\+Finished}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+global\+Finished}{m_globalFinished}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+global\+Finished\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}{}\label{classns3_1_1DistributedSimulatorImpl_a90cc2380329f315b75bd414062b04cd8}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+granted\+Time@{m\+\_\+granted\+Time}}
\index{m\+\_\+granted\+Time@{m\+\_\+granted\+Time}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+granted\+Time}{m_grantedTime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+granted\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}{}\label{classns3_1_1DistributedSimulatorImpl_a2b793ea16a0f2e786742813d2bcdc2f4}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+look\+Ahead@{m\+\_\+look\+Ahead}}
\index{m\+\_\+look\+Ahead@{m\+\_\+look\+Ahead}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+look\+Ahead}{m_lookAhead}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+look\+Ahead = {\bf Seconds} (-\/1)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}{}\label{classns3_1_1DistributedSimulatorImpl_af223a2f60c7b91af0b12ba7ba174a47e}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+my\+Id@{m\+\_\+my\+Id}}
\index{m\+\_\+my\+Id@{m\+\_\+my\+Id}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+my\+Id}{m_myId}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+my\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a76a61030e685c239cc97d6b61b07fd18}{}\label{classns3_1_1DistributedSimulatorImpl_a76a61030e685c239cc97d6b61b07fd18}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+p\+L\+B\+TS@{m\+\_\+p\+L\+B\+TS}}
\index{m\+\_\+p\+L\+B\+TS@{m\+\_\+p\+L\+B\+TS}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+p\+L\+B\+TS}{m_pLBTS}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lbts\+Message}$\ast$ ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+p\+L\+B\+TS\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}{}\label{classns3_1_1DistributedSimulatorImpl_a356ad357bd5163fc7c367cdac6b22911}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+stop@{m\+\_\+stop}}
\index{m\+\_\+stop@{m\+\_\+stop}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+stop}{m_stop}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+stop\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_aeda2f900518205bb35085c6b735f55ad}{}\label{classns3_1_1DistributedSimulatorImpl_aeda2f900518205bb35085c6b735f55ad}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+system\+Count@{m\+\_\+system\+Count}}
\index{m\+\_\+system\+Count@{m\+\_\+system\+Count}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+system\+Count}{m_systemCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+system\+Count\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_acc5d9ac05b8d3d9876b327aaabe5607e}{}\label{classns3_1_1DistributedSimulatorImpl_acc5d9ac05b8d3d9876b327aaabe5607e}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+uid@{m\+\_\+uid}}
\index{m\+\_\+uid@{m\+\_\+uid}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+uid}{m_uid}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+uid\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}{}\label{classns3_1_1DistributedSimulatorImpl_a918c24f35d9579a75f064b3a3f81d165}
\index{ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}!m\+\_\+unscheduled\+Events@{m\+\_\+unscheduled\+Events}}
\index{m\+\_\+unscheduled\+Events@{m\+\_\+unscheduled\+Events}!ns3\+::\+Distributed\+Simulator\+Impl@{ns3\+::\+Distributed\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+unscheduled\+Events}{m_unscheduledEvents}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Distributed\+Simulator\+Impl\+::m\+\_\+unscheduled\+Events\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}{}\label{classns3_1_1DistributedSimulatorImpl_ab02d06ce1c42a073c45b5ab0ed8d45d6}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
mpi/model/\hyperlink{distributed-simulator-impl_8h}{distributed-\/simulator-\/impl.\+h}\item 
mpi/model/\hyperlink{distributed-simulator-impl_8cc}{distributed-\/simulator-\/impl.\+cc}\end{DoxyCompactItemize}
