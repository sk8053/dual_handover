\hypertarget{classBug2222TestCase}{}\section{Bug2222\+Test\+Case Class Reference}
\label{classBug2222TestCase}\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}


Inheritance diagram for Bug2222\+Test\+Case\+:
% FIG 0


Collaboration diagram for Bug2222\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classBug2222TestCase_a535dbfdf04ea951ab4adc7f1d6cd632e}{Bug2222\+Test\+Case} ()
\item 
virtual \hyperlink{classBug2222TestCase_aebef44087e2708c96adc6b1f2de91368}{$\sim$\+Bug2222\+Test\+Case} ()
\item 
virtual void \hyperlink{classBug2222TestCase_a5e36f50efb283abb1802a04946d11bd0}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classBug2222TestCase_ae579afd0be5024c19eb04915420b146c}{Populate\+Arp\+Cache} ()
\begin{DoxyCompactList}\small\item\em Populate A\+RP cache function. \end{DoxyCompactList}\item 
void \hyperlink{classBug2222TestCase_a6ccf3e7c5a9de570c50ad848d86f3f9d}{Tx\+Data\+Failed\+Trace} (std\+::string context, \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} adr)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \hyperlink{classBug2222TestCase_a0459c1e5f762d2ef06af67617cb4fb5f}{m\+\_\+count\+Internal\+Collisions}
\begin{DoxyCompactList}\small\item\em count internal collisions \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Make sure that when virtual collision occurs the wifi remote station manager is triggered and the retry counter is increased.

See \{2222\} 

\subsection{Constructor \& Destructor Documentation}
\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}!Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}
\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}!Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}
\subsubsection[{\texorpdfstring{Bug2222\+Test\+Case()}{Bug2222TestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Bug2222\+Test\+Case\+::\+Bug2222\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classBug2222TestCase_a535dbfdf04ea951ab4adc7f1d6cd632e}{}\label{classBug2222TestCase_a535dbfdf04ea951ab4adc7f1d6cd632e}

\begin{DoxyCode}
1054   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Test case for Bug 2222"}),
1055     \hyperlink{classBug2222TestCase_a0459c1e5f762d2ef06af67617cb4fb5f}{m\_countInternalCollisions} (0)
1056 \{
1057 \}
\end{DoxyCode}
\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}!````~Bug2222\+Test\+Case@{$\sim$\+Bug2222\+Test\+Case}}
\index{````~Bug2222\+Test\+Case@{$\sim$\+Bug2222\+Test\+Case}!Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Bug2222\+Test\+Case()}{~Bug2222TestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Bug2222\+Test\+Case\+::$\sim$\+Bug2222\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classBug2222TestCase_aebef44087e2708c96adc6b1f2de91368}{}\label{classBug2222TestCase_aebef44087e2708c96adc6b1f2de91368}

\begin{DoxyCode}
1060 \{
1061 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Bug2222\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classBug2222TestCase_a5e36f50efb283abb1802a04946d11bd0}{}\label{classBug2222TestCase_a5e36f50efb283abb1802a04946d11bd0}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
1072 \{
1073   \hyperlink{classBug2222TestCase_a0459c1e5f762d2ef06af67617cb4fb5f}{m\_countInternalCollisions} = 0;
1074 
1075   \textcolor{comment}{//Generate same backoff for AC\_VI and AC\_VO}
1076   \textcolor{comment}{//The below combination will work}
1077   RngSeedManager::SetSeed (1);
1078   RngSeedManager::SetRun (2);
1079   int64\_t streamNumber = 100;
1080 
1081   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} wifiNodes;
1082   wifiNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (2);
1083 
1084   \hyperlink{classns3_1_1YansWifiChannelHelper}{YansWifiChannelHelper} channel = YansWifiChannelHelper::Default ();
1085   \hyperlink{classns3_1_1YansWifiPhyHelper}{YansWifiPhyHelper} phy = YansWifiPhyHelper::Default ();
1086   phy.\hyperlink{classns3_1_1YansWifiPhyHelper_ad2e9a27587dd4ff320435c93cc2676de}{SetChannel} (channel.\hyperlink{classns3_1_1YansWifiChannelHelper_a0532e292ab9452f3cf630c848708e563}{Create} ());
1087 
1088   \hyperlink{classns3_1_1WifiHelper}{WifiHelper} wifi;
1089   wifi.\hyperlink{classns3_1_1WifiHelper_a3d01b178aeb2de246ab5a3aa5638ce24}{SetRemoteStationManager} (\textcolor{stringliteral}{"ns3::ConstantRateWifiManager"},
1090                                 \textcolor{stringliteral}{"DataMode"}, StringValue (\textcolor{stringliteral}{"OfdmRate54Mbps"}),
1091                                 \textcolor{stringliteral}{"ControlMode"}, StringValue (\textcolor{stringliteral}{"OfdmRate24Mbps"}));
1092   \hyperlink{classns3_1_1WifiMacHelper}{WifiMacHelper} mac;
1093   \hyperlink{classns3_1_1Ssid}{Ssid} ssid = \hyperlink{classns3_1_1Ssid}{Ssid} (\textcolor{stringliteral}{"ns-3-ssid"});
1094   mac.\hyperlink{classns3_1_1WifiMacHelper_a382d8df76a1dd7007179d1963b4b6bc6}{SetType} (\textcolor{stringliteral}{"ns3::AdhocWifiMac"},
1095                \textcolor{stringliteral}{"QosSupported"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
1096 
1097   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} wifiDevices;
1098   wifiDevices = wifi.\hyperlink{classns3_1_1WifiHelper_a451b3d33fa1497c22f06c5451f57a127}{Install} (phy, mac, wifiNodes);
1099 
1100   \textcolor{comment}{// Assign fixed streams to random variables in use}
1101   wifi.\hyperlink{classns3_1_1WifiHelper_ab29bf13f8726c2e0807a583bfea79777}{AssignStreams} (wifiDevices, streamNumber);
1102 
1103   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
1104   \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} positionAlloc = CreateObject<ListPositionAllocator> 
      ();
1105 
1106   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (0.0, 0.0, 0.0));
1107   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (10.0, 0.0, 0.0));
1108   mobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (positionAlloc);
1109 
1110   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
1111   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (wifiNodes);
1112 
1113   \hyperlink{classns3_1_1Ptr}{Ptr<WifiNetDevice>} device1 = DynamicCast<WifiNetDevice> (wifiDevices.
      \hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
1114   \hyperlink{classns3_1_1Ptr}{Ptr<WifiNetDevice>} device2 = DynamicCast<WifiNetDevice> (wifiDevices.
      \hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1));
1115 
1116   \hyperlink{classns3_1_1PacketSocketAddress}{PacketSocketAddress} socket;
1117   socket.\hyperlink{classns3_1_1PacketSocketAddress_ad1caa016f4d27c9d5f2c06dbfc53f8a3}{SetSingleDevice} (device1->\hyperlink{classns3_1_1WifiNetDevice_a6ab6ba34192411ac8203c4da52e5c6cc}{GetIfIndex} ());
1118   socket.SetPhysicalAddress (device2->GetAddress ());
1119   socket.SetProtocol (1);
1120 
1121   \hyperlink{classns3_1_1PacketSocketHelper}{PacketSocketHelper} packetSocket;
1122   packetSocket.\hyperlink{classns3_1_1PacketSocketHelper_a33f449fee7fd10411949d17feba6d33e}{Install} (wifiNodes);
1123 
1124   \hyperlink{classns3_1_1Ptr}{Ptr<PacketSocketClient>} clientLowPriority = CreateObject<PacketSocketClient> ();
1125   clientLowPriority->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (1460));
1126   clientLowPriority->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (1));
1127   clientLowPriority->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Priority"}, UintegerValue (4)); \textcolor{comment}{//AC\_VI}
1128   clientLowPriority->\hyperlink{classns3_1_1PacketSocketClient_ae400727c451d429358b5c85838b901df}{SetRemote} (socket);
1129   wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0)->\hyperlink{classns3_1_1Node_ab98b4fdc4aadc86366b80e8a79a53f47}{AddApplication} (clientLowPriority);
1130   clientLowPriority->\hyperlink{classns3_1_1Application_a8360a49748e30c52ffdcc7a305c3cd48}{SetStartTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
1131   clientLowPriority->\hyperlink{classns3_1_1Application_a732c1fdadf0be176c753a2ce6e27dff9}{SetStopTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2.0));
1132 
1133   \hyperlink{classns3_1_1Ptr}{Ptr<PacketSocketClient>} clientHighPriority = CreateObject<PacketSocketClient> ();
1134   clientHighPriority->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (1460));
1135   clientHighPriority->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (1));
1136   clientHighPriority->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Priority"}, UintegerValue (6)); \textcolor{comment}{//AC\_VO}
1137   clientHighPriority->\hyperlink{classns3_1_1PacketSocketClient_ae400727c451d429358b5c85838b901df}{SetRemote} (socket);
1138   wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0)->\hyperlink{classns3_1_1Node_ab98b4fdc4aadc86366b80e8a79a53f47}{AddApplication} (clientHighPriority);
1139   clientHighPriority->\hyperlink{classns3_1_1Application_a8360a49748e30c52ffdcc7a305c3cd48}{SetStartTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
1140   clientHighPriority->\hyperlink{classns3_1_1Application_a732c1fdadf0be176c753a2ce6e27dff9}{SetStopTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2.0));
1141 
1142   \hyperlink{classns3_1_1Ptr}{Ptr<PacketSocketServer>} server = CreateObject<PacketSocketServer> ();
1143   server->\hyperlink{classns3_1_1PacketSocketServer_a89207b49054571b480ee1d26934907d3}{SetLocal} (socket);
1144   wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1)->\hyperlink{classns3_1_1Node_ab98b4fdc4aadc86366b80e8a79a53f47}{AddApplication} (server);
1145   server->\hyperlink{classns3_1_1Application_a8360a49748e30c52ffdcc7a305c3cd48}{SetStartTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
1146   server->\hyperlink{classns3_1_1Application_a732c1fdadf0be176c753a2ce6e27dff9}{SetStopTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2.0));
1147 
1148   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/*/DeviceList/*/RemoteStationManager/MacTxDataFailed"}, 
      \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classBug2222TestCase_a6ccf3e7c5a9de570c50ad848d86f3f9d}{Bug2222TestCase::TxDataFailedTrace}, \textcolor{keyword}{this}));
1149 
1150   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2.0));
1151   Simulator::Run ();
1152   Simulator::Destroy ();
1153 
1154   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classBug2222TestCase_a0459c1e5f762d2ef06af67617cb4fb5f}{m\_countInternalCollisions}, 1, \textcolor{stringliteral}{"
      unexpected number of internal collisions!"});
1155 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}!Populate\+Arp\+Cache@{Populate\+Arp\+Cache}}
\index{Populate\+Arp\+Cache@{Populate\+Arp\+Cache}!Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}
\subsubsection[{\texorpdfstring{Populate\+Arp\+Cache()}{PopulateArpCache()}}]{\setlength{\rightskip}{0pt plus 5cm}void Bug2222\+Test\+Case\+::\+Populate\+Arp\+Cache (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classBug2222TestCase_ae579afd0be5024c19eb04915420b146c}{}\label{classBug2222TestCase_ae579afd0be5024c19eb04915420b146c}


Populate A\+RP cache function. 

\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}!Tx\+Data\+Failed\+Trace@{Tx\+Data\+Failed\+Trace}}
\index{Tx\+Data\+Failed\+Trace@{Tx\+Data\+Failed\+Trace}!Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}
\subsubsection[{\texorpdfstring{Tx\+Data\+Failed\+Trace(std\+::string context, Mac48\+Address adr)}{TxDataFailedTrace(std::string context, Mac48Address adr)}}]{\setlength{\rightskip}{0pt plus 5cm}void Bug2222\+Test\+Case\+::\+Tx\+Data\+Failed\+Trace (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{{\bf Mac48\+Address}}]{adr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classBug2222TestCase_a6ccf3e7c5a9de570c50ad848d86f3f9d}{}\label{classBug2222TestCase_a6ccf3e7c5a9de570c50ad848d86f3f9d}
Transmit data failed function 
\begin{DoxyParams}{Parameters}
{\em context} & the context \\
\hline
{\em adr} & the M\+AC address \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1065 \{
1066   \textcolor{comment}{//Indicate the long retry counter has been increased in the wifi remote station manager}
1067   \hyperlink{classBug2222TestCase_a0459c1e5f762d2ef06af67617cb4fb5f}{m\_countInternalCollisions}++;
1068 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 3




\subsection{Member Data Documentation}
\index{Bug2222\+Test\+Case@{Bug2222\+Test\+Case}!m\+\_\+count\+Internal\+Collisions@{m\+\_\+count\+Internal\+Collisions}}
\index{m\+\_\+count\+Internal\+Collisions@{m\+\_\+count\+Internal\+Collisions}!Bug2222\+Test\+Case@{Bug2222\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+count\+Internal\+Collisions}{m_countInternalCollisions}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Bug2222\+Test\+Case\+::m\+\_\+count\+Internal\+Collisions\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classBug2222TestCase_a0459c1e5f762d2ef06af67617cb4fb5f}{}\label{classBug2222TestCase_a0459c1e5f762d2ef06af67617cb4fb5f}


count internal collisions 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
wifi/test/\hyperlink{wifi-test_8cc}{wifi-\/test.\+cc}\end{DoxyCompactItemize}
