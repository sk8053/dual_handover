\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr}{}\section{ns3\+:\+:dsr\+:\+:Dsr\+Option\+Rerr Class Reference}
\label{classns3_1_1dsr_1_1DsrOptionRerr}\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}


Dsr Option Route Error.  




{\ttfamily \#include $<$dsr-\/options.\+h$>$}



Inheritance diagram for ns3\+:\+:dsr\+:\+:Dsr\+Option\+Rerr\+:
% FIG 0


Collaboration diagram for ns3\+:\+:dsr\+:\+:Dsr\+Option\+Rerr\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_ad5d229fa56459db61b6c4c2c141c9fdc}{Get\+Instance\+Type\+Id} () const 
\begin{DoxyCompactList}\small\item\em Get the instance type ID. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_ab3f5aa60a1bf1a439ef23ef2463c3a66}{Dsr\+Option\+Rerr} ()
\item 
virtual \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_afaafba278648019ab58f2e7b583080a1}{$\sim$\+Dsr\+Option\+Rerr} ()
\item 
virtual uint8\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_acc0fe1733d9d8ef5d6d409acd9ec9e63}{Get\+Option\+Number} () const 
\begin{DoxyCompactList}\small\item\em Get the option number. \end{DoxyCompactList}\item 
virtual uint8\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a8aa7e565a18c730fcd572017f720cfac}{Process} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ dsrP, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} ipv4\+Address, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} source, \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} const \&ipv4\+Header, uint8\+\_\+t protocol, bool \&is\+Promisc, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} promisc\+Source)
\begin{DoxyCompactList}\small\item\em Process method. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a0384af99022d7c4f59cc5f548990e827}{Do\+Send\+Error} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, \hyperlink{classns3_1_1dsr_1_1DsrOptionRerrUnreachHeader}{Dsr\+Option\+Rerr\+Unreach\+Header} \&rerr, uint32\+\_\+t rerr\+Size, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} ipv4\+Address, uint8\+\_\+t protocol)
\begin{DoxyCompactList}\small\item\em Do Send error message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a9a92dddbabd9aca62d85a34bd7d3a076}{Get\+Type\+Id} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const uint8\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a50ef8ca32520f468cc263e0703c076c0}{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER} = 3
\begin{DoxyCompactList}\small\item\em Dsr Route Error option number. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache}{dsr\+::\+Dsr\+Route\+Cache} $>$ \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a2838243fd731529ca285ca65c02bcf58}{m\+\_\+route\+Cache}
\begin{DoxyCompactList}\small\item\em The route cache. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4}{Ipv4} $>$ \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a03813d39437d7932187ecd0033ac6fd3}{m\+\_\+ipv4}
\begin{DoxyCompactList}\small\item\em The ipv4 layer 3. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Dsr Option Route Error. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!Dsr\+Option\+Rerr@{Dsr\+Option\+Rerr}}
\index{Dsr\+Option\+Rerr@{Dsr\+Option\+Rerr}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{Dsr\+Option\+Rerr()}{DsrOptionRerr()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::\+Dsr\+Option\+Rerr (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_ab3f5aa60a1bf1a439ef23ef2463c3a66}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_ab3f5aa60a1bf1a439ef23ef2463c3a66}

\begin{DoxyCode}
1420 \{
1421   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
1422 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!````~Dsr\+Option\+Rerr@{$\sim$\+Dsr\+Option\+Rerr}}
\index{````~Dsr\+Option\+Rerr@{$\sim$\+Dsr\+Option\+Rerr}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{$\sim$\+Dsr\+Option\+Rerr()}{~DsrOptionRerr()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::$\sim$\+Dsr\+Option\+Rerr (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_afaafba278648019ab58f2e7b583080a1}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_afaafba278648019ab58f2e7b583080a1}

\begin{DoxyCode}
1425 \{
1426   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
1427 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!Do\+Send\+Error@{Do\+Send\+Error}}
\index{Do\+Send\+Error@{Do\+Send\+Error}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{Do\+Send\+Error(\+Ptr$<$ Packet $>$ p, Dsr\+Option\+Rerr\+Unreach\+Header \&rerr, uint32\+\_\+t rerr\+Size, Ipv4\+Address ipv4\+Address, uint8\+\_\+t protocol)}{DoSendError(Ptr< Packet > p, DsrOptionRerrUnreachHeader &rerr, uint32_t rerrSize, Ipv4Address ipv4Address, uint8_t protocol)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::\+Do\+Send\+Error (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{p, }
\item[{{\bf Dsr\+Option\+Rerr\+Unreach\+Header} \&}]{rerr, }
\item[{uint32\+\_\+t}]{rerr\+Size, }
\item[{{\bf Ipv4\+Address}}]{ipv4\+Address, }
\item[{uint8\+\_\+t}]{protocol}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_a0384af99022d7c4f59cc5f548990e827}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_a0384af99022d7c4f59cc5f548990e827}


Do Send error message. 


\begin{DoxyParams}{Parameters}
{\em p} & the packet \\
\hline
{\em rerr} & the \hyperlink{classns3_1_1dsr_1_1DsrOptionRerrUnreachHeader}{Dsr\+Option\+Rerr\+Unreach\+Header} header \\
\hline
{\em rerr\+Size} & the route error header size \\
\hline
{\em ipv4\+Address} & ipv4 address of our own \\
\hline
{\em protocol} & the protocol number of the up layer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the processed size 
\end{DoxyReturn}
to test if the next address is multicast or not 
\begin{DoxyCode}
1509 \{
1510   \textcolor{comment}{// Get the number of routers' address field}
1511   uint8\_t buf[2];
1512   p->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (buf, \textcolor{keyword}{sizeof}(buf));
1513   uint8\_t numberAddress = (buf[1] - 2) / 4;
1514 
1515   \textcolor{comment}{// Here remove the source route header and schedule next hop error transmission}
1516   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The number of addresses "} << (uint32\_t)numberAddress);
1517   DsrOptionSRHeader sourceRoute;
1518   sourceRoute.SetNumberAddress (numberAddress);
1519   p->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (sourceRoute);
1520   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () == 0);
1521   \textcolor{comment}{/*}
1522 \textcolor{comment}{   * Get the node from ip address and the dsr extension object}
1523 \textcolor{comment}{   */}
1524   Ptr<Node> node = \hyperlink{classns3_1_1dsr_1_1DsrOptions_a1a91f820f3d754a477a54bad547ca659}{GetNodeWithAddress} (ipv4Address);
1525   Ptr<dsr::DsrRouting> dsr = node->GetObject<dsr::DsrRouting> ();
1526   \textcolor{comment}{/*}
1527 \textcolor{comment}{   * Get the segments left field and the next address}
1528 \textcolor{comment}{   */}
1529   uint8\_t segmentsLeft = sourceRoute.GetSegmentsLeft ();
1530   uint8\_t length = sourceRoute.GetLength ();
1531   uint8\_t nextAddressIndex;
1532   Ipv4Address nextAddress;
1533   \textcolor{comment}{/*}
1534 \textcolor{comment}{   * Get the route size and the error target address}
1535 \textcolor{comment}{   */}
1536   std::vector<Ipv4Address> nodeList = sourceRoute.GetNodesAddress ();
1537   Ipv4Address targetAddress = nodeList.back ();
1538   \textcolor{comment}{/*}
1539 \textcolor{comment}{   * The total serialized size for both the rerr and source route headers}
1540 \textcolor{comment}{   */}
1541   uint32\_t serializedSize = rerrSize + sourceRoute.GetSerializedSize ();
1542 
1543   \textcolor{keywordflow}{if} (length % 2 != 0)
1544     \{
1545       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Malformed header. Drop!"});
1546       \hyperlink{classns3_1_1dsr_1_1DsrOptions_a176bbc9efb58b6d750c14b9b03c525c4}{m\_dropTrace} (p);
1547       \textcolor{keywordflow}{return} 0;
1548     \}
1549 
1550   \textcolor{keywordflow}{if} (segmentsLeft > numberAddress)
1551     \{
1552       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Malformed header. Drop!"});
1553       \hyperlink{classns3_1_1dsr_1_1DsrOptions_a176bbc9efb58b6d750c14b9b03c525c4}{m\_dropTrace} (p);
1554       \textcolor{keywordflow}{return} 0;
1555     \}
1556   \textcolor{comment}{/*}
1557 \textcolor{comment}{   * When the error packet has reached to the destination}
1558 \textcolor{comment}{   */}
1559   \textcolor{keywordflow}{if} (segmentsLeft == 0 && targetAddress == ipv4Address)
1560     \{
1561       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"This is the destination of the error, send error request"});
1562       dsr->SendErrorRequest (rerr, protocol);
1563       \textcolor{keywordflow}{return} serializedSize;
1564     \}
1565 
1566   \textcolor{comment}{// Get the next Router Address}
1567   DsrOptionSRHeader newSourceRoute;
1568   newSourceRoute.SetSegmentsLeft (segmentsLeft - 1);
1569   nextAddressIndex = numberAddress - segmentsLeft;
1570   nextAddress = sourceRoute.GetNodeAddress (nextAddressIndex);
1571   newSourceRoute.SetSalvage (sourceRoute.GetSalvage ());
1572   newSourceRoute.SetNodesAddress (nodeList);
1573   nextAddress = newSourceRoute.GetNodeAddress (nextAddressIndex);
1574 
1576   \textcolor{keywordflow}{if} (nextAddress.IsMulticast () || targetAddress.IsMulticast ())
1577     \{
1578       \hyperlink{classns3_1_1dsr_1_1DsrOptions_a176bbc9efb58b6d750c14b9b03c525c4}{m\_dropTrace} (p);
1579       \textcolor{keywordflow}{return} serializedSize;
1580     \}
1581 
1582   \textcolor{comment}{// Set the route entry}
1583   \hyperlink{classns3_1_1dsr_1_1DsrOptions_af749b76db4626ae64bc37001a5353b99}{SetRoute} (nextAddress, ipv4Address);
1584   dsr->ForwardErrPacket (rerr, newSourceRoute, nextAddress, protocol, 
      \hyperlink{classns3_1_1dsr_1_1DsrOptions_ae4785209eae1d101cb8bd2d3b392d2ad}{m\_ipv4Route});
1585   \textcolor{keywordflow}{return} serializedSize;
1586 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!Get\+Instance\+Type\+Id@{Get\+Instance\+Type\+Id}}
\index{Get\+Instance\+Type\+Id@{Get\+Instance\+Type\+Id}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{Get\+Instance\+Type\+Id() const }{GetInstanceTypeId() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::\+Get\+Instance\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_ad5d229fa56459db61b6c4c2c141c9fdc}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_ad5d229fa56459db61b6c4c2c141c9fdc}


Get the instance type ID. 

\begin{DoxyReturn}{Returns}
instance type ID 
\end{DoxyReturn}


Reimplemented from \hyperlink{classns3_1_1Object_a51e5994fa4b6eae32d719ad69f8fcbf5}{ns3\+::\+Object}.


\begin{DoxyCode}
1430 \{
1431   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a9a92dddbabd9aca62d85a34bd7d3a076}{GetTypeId} ();
1432 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!Get\+Option\+Number@{Get\+Option\+Number}}
\index{Get\+Option\+Number@{Get\+Option\+Number}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{Get\+Option\+Number() const }{GetOptionNumber() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::\+Get\+Option\+Number (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_acc0fe1733d9d8ef5d6d409acd9ec9e63}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_acc0fe1733d9d8ef5d6d409acd9ec9e63}


Get the option number. 

\begin{DoxyReturn}{Returns}
option number 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1dsr_1_1DsrOptions_a31407523e51950f30c95c89602580fc9}{ns3\+::dsr\+::\+Dsr\+Options}.


\begin{DoxyCode}
1435 \{
1436   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
1437   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a50ef8ca32520f468cc263e0703c076c0}{OPT\_NUMBER};
1438 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id()}{GetTypeId()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_a9a92dddbabd9aca62d85a34bd7d3a076}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_a9a92dddbabd9aca62d85a34bd7d3a076}

\begin{DoxyCode}
1410 \{
1411   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::dsr::DsrOptionRerr"})
1412     .SetParent<\hyperlink{classns3_1_1dsr_1_1DsrOptions_a26f9dda6f030963939c59ef1ab2a74c0}{DsrOptions}> ()
1413     .SetGroupName (\textcolor{stringliteral}{"Dsr"})
1414     .AddConstructor<\hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_ab3f5aa60a1bf1a439ef23ef2463c3a66}{DsrOptionRerr}> ()
1415   ;
1416   \textcolor{keywordflow}{return} tid;
1417 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!Process@{Process}}
\index{Process@{Process}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{Process(\+Ptr$<$ Packet $>$ packet, Ptr$<$ Packet $>$ dsr\+P, Ipv4\+Address ipv4\+Address, Ipv4\+Address source, Ipv4\+Header const \&ipv4\+Header, uint8\+\_\+t protocol, bool \&is\+Promisc, Ipv4\+Address promisc\+Source)}{Process(Ptr< Packet > packet, Ptr< Packet > dsrP, Ipv4Address ipv4Address, Ipv4Address source, Ipv4Header const &ipv4Header, uint8_t protocol, bool &isPromisc, Ipv4Address promiscSource)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::\+Process (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{dsrP, }
\item[{{\bf Ipv4\+Address}}]{ipv4\+Address, }
\item[{{\bf Ipv4\+Address}}]{source, }
\item[{{\bf Ipv4\+Header} const \&}]{ipv4\+Header, }
\item[{uint8\+\_\+t}]{protocol, }
\item[{bool \&}]{is\+Promisc, }
\item[{{\bf Ipv4\+Address}}]{promisc\+Source}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_a8aa7e565a18c730fcd572017f720cfac}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_a8aa7e565a18c730fcd572017f720cfac}


Process method. 

Called from \hyperlink{classns3_1_1dsr_1_1DsrRouting_a4908cdae502d8bdca8a244d4420311e6}{Dsr\+Routing\+::\+Receive}. 
\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em dsrP} & the clean packet with payload \\
\hline
{\em ipv4\+Address} & the I\+Pv4 address \\
\hline
{\em source} & I\+Pv4 address of the source \\
\hline
{\em ipv4\+Header} & the I\+Pv4 header of packet received \\
\hline
{\em protocol} & the protocol number of the up layer \\
\hline
{\em is\+Promisc} & if the packet must be dropped \\
\hline
{\em promisc\+Source} & I\+Pv4 address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the processed size 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000015}{Todo}]This is for the other two error options, not supporting for now \end{DoxyRefDesc}


Implements \hyperlink{classns3_1_1dsr_1_1DsrOptions_ac34fb87a95464f3ea9d82ad12253a5cc}{ns3\+::dsr\+::\+Dsr\+Options}.


\begin{DoxyCode}
1441 \{
1442   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << packet << dsrP << ipv4Address << source << ipv4Header << (
      uint32\_t)protocol << isPromisc);
1443   Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
1444   uint32\_t size = p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
1445   uint8\_t *\hyperlink{topology-example-sim_8cc_a26c65296e316af77b787dc77469bb2a4}{data} = \textcolor{keyword}{new} uint8\_t[size];
1446   p->CopyData (data, size);
1447   uint8\_t errorType = *(data + 2);
1448   \textcolor{comment}{/*}
1449 \textcolor{comment}{   * Get the node from Ip address and get the dsr extension object}
1450 \textcolor{comment}{   */}
1451   Ptr<Node> node = \hyperlink{classns3_1_1dsr_1_1DsrOptions_a1a91f820f3d754a477a54bad547ca659}{GetNodeWithAddress} (ipv4Address);
1452   Ptr<dsr::DsrRouting> dsr = node->GetObject<dsr::DsrRouting> ();
1453   \textcolor{comment}{/*}
1454 \textcolor{comment}{   * The error serialized size}
1455 \textcolor{comment}{   */}
1456   uint32\_t rerrSize;
1457   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The error type value here "} << (uint32\_t)errorType);
1458   \textcolor{keywordflow}{if} (errorType == 1) \textcolor{comment}{// unreachable ip address}
1459     \{
1460       \textcolor{comment}{/*}
1461 \textcolor{comment}{       * Remove the route error header from the packet, and get the error type}
1462 \textcolor{comment}{       */}
1463       DsrOptionRerrUnreachHeader rerrUnreach;
1464       p->RemoveHeader (rerrUnreach);
1465       \textcolor{comment}{/*}
1466 \textcolor{comment}{       * Get the error destination address}
1467 \textcolor{comment}{       */}
1468       Ipv4Address unreachAddress = rerrUnreach.GetUnreachNode ();
1469       Ipv4Address errorSource = rerrUnreach.GetErrorSrc ();
1470 
1471       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The error source is "} <<  rerrUnreach.GetErrorDst () << \textcolor{stringliteral}{"and the
       unreachable node is "} << unreachAddress);
1472       \textcolor{comment}{/*}
1473 \textcolor{comment}{       * Get the serialized size of the rerr header}
1474 \textcolor{comment}{       */}
1475       rerrSize = rerrUnreach.GetSerializedSize ();
1476       \textcolor{comment}{/*}
1477 \textcolor{comment}{       * Delete all the routes including the unreachable node address from the route cache}
1478 \textcolor{comment}{       */}
1479       Ptr<Node> node = \hyperlink{classns3_1_1dsr_1_1DsrOptions_a1a91f820f3d754a477a54bad547ca659}{GetNodeWithAddress} (ipv4Address);
1480       dsr->DeleteAllRoutesIncludeLink (errorSource, unreachAddress, ipv4Address);
1481 
1482       Ptr<Packet> newP = p->Copy ();
1483       uint32\_t serialized = \hyperlink{classns3_1_1dsr_1_1DsrOptionRerr_a0384af99022d7c4f59cc5f548990e827}{DoSendError} (newP, rerrUnreach, rerrSize, ipv4Address, protocol);
1484       \textcolor{keywordflow}{return} serialized;
1485     \}
1486   \textcolor{keywordflow}{else}
1487     \{
1488       \textcolor{comment}{/*}
1489 \textcolor{comment}{       * Two other type of error headers:}
1490 \textcolor{comment}{       * 1. flow state not supported type-specific information}
1491 \textcolor{comment}{       * 2. unsupported option with option number}
1492 \textcolor{comment}{       */}
1493       \textcolor{comment}{/*}
1494 \textcolor{comment}{       * Remove the route error header from the packet, and get the error type}
1495 \textcolor{comment}{       */}
1496       DsrOptionRerrUnsupportHeader rerrUnsupport;
1497       p->RemoveHeader (rerrUnsupport);
1498       rerrSize = rerrUnsupport.GetSerializedSize ();
1499 
1500       \hyperlink{unused_8h_a3ba03ad859378e9f01285afb60f0e3ab}{NS\_UNUSED} (rerrSize);
1502       \textcolor{comment}{// uint32\_t serialized = DoSendError (p, rerrUnsupport, rerrSize, ipv4Address, protocol);}
1503       uint32\_t serialized = 0;
1504       \textcolor{keywordflow}{return} serialized;
1505     \}
1506 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




\subsection{Member Data Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!m\+\_\+ipv4@{m\+\_\+ipv4}}
\index{m\+\_\+ipv4@{m\+\_\+ipv4}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{m\+\_\+ipv4}{m_ipv4}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Ipv4}$>$ ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::m\+\_\+ipv4\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_a03813d39437d7932187ecd0033ac6fd3}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_a03813d39437d7932187ecd0033ac6fd3}


The ipv4 layer 3. 

\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!m\+\_\+route\+Cache@{m\+\_\+route\+Cache}}
\index{m\+\_\+route\+Cache@{m\+\_\+route\+Cache}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{m\+\_\+route\+Cache}{m_routeCache}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf dsr\+::\+Dsr\+Route\+Cache}$>$ ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::m\+\_\+route\+Cache\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_a2838243fd731529ca285ca65c02bcf58}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_a2838243fd731529ca285ca65c02bcf58}


The route cache. 

\index{ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}!O\+P\+T\+\_\+\+N\+U\+M\+B\+ER@{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER}}
\index{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER@{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER}!ns3\+::dsr\+::\+Dsr\+Option\+Rerr@{ns3\+::dsr\+::\+Dsr\+Option\+Rerr}}
\subsubsection[{\texorpdfstring{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER}{OPT_NUMBER}}]{\setlength{\rightskip}{0pt plus 5cm}const uint8\+\_\+t ns3\+::dsr\+::\+Dsr\+Option\+Rerr\+::\+O\+P\+T\+\_\+\+N\+U\+M\+B\+ER = 3\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRerr_a50ef8ca32520f468cc263e0703c076c0}{}\label{classns3_1_1dsr_1_1DsrOptionRerr_a50ef8ca32520f468cc263e0703c076c0}


Dsr Route Error option number. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
dsr/model/\hyperlink{dsr-options_8h}{dsr-\/options.\+h}\item 
dsr/model/\hyperlink{dsr-options_8cc}{dsr-\/options.\+cc}\end{DoxyCompactItemize}
