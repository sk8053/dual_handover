\hypertarget{classLrWpanCcaTestCase}{}\section{Lr\+Wpan\+Cca\+Test\+Case Class Reference}
\label{classLrWpanCcaTestCase}\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}


Lr\+Wpan C\+CA Test.  




Inheritance diagram for Lr\+Wpan\+Cca\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lr\+Wpan\+Cca\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLrWpanCcaTestCase_aeead12010707611f14b0343cbe16d87d}{Lr\+Wpan\+Cca\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLrWpanCcaTestCase_a3e2872a3bd57d754a2bdb613437e18a8}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{classLrWpanCcaTestCase_af740f571b9d8594701c82480c8ff9632}{Plme\+Cca\+Confirm} (\hyperlink{classLrWpanCcaTestCase}{Lr\+Wpan\+Cca\+Test\+Case} $\ast$testcase, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LrWpanNetDevice}{Lr\+Wpan\+Net\+Device} $>$ device, \hyperlink{group__lr-wpan_ga6494269d13d45c511a07b7ccbb1de754}{Lr\+Wpan\+Phy\+Enumeration} status)
\begin{DoxyCompactList}\small\item\em Function called when Plme\+Cca\+Confirm is hit. \end{DoxyCompactList}\item 
static void \hyperlink{classLrWpanCcaTestCase_a23a0238970a4597eb0e6f90cd5a2f5f5}{Phy\+Tx\+Begin} (\hyperlink{classLrWpanCcaTestCase}{Lr\+Wpan\+Cca\+Test\+Case} $\ast$testcase, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LrWpanNetDevice}{Lr\+Wpan\+Net\+Device} $>$ device, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet)
\begin{DoxyCompactList}\small\item\em Function called when Phy\+Tx\+Begin is hit. \end{DoxyCompactList}\item 
static void \hyperlink{classLrWpanCcaTestCase_a10eb0d8851c2e8de313448bb2da6fd30}{Phy\+Tx\+End} (\hyperlink{classLrWpanCcaTestCase}{Lr\+Wpan\+Cca\+Test\+Case} $\ast$testcase, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LrWpanNetDevice}{Lr\+Wpan\+Net\+Device} $>$ device, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet)
\begin{DoxyCompactList}\small\item\em Function called when Phy\+Tx\+End is hit. \end{DoxyCompactList}\item 
static void \hyperlink{classLrWpanCcaTestCase_a7d236bfc6109f581582255227b8dee77}{Phy\+Rx\+Begin} (\hyperlink{classLrWpanCcaTestCase}{Lr\+Wpan\+Cca\+Test\+Case} $\ast$testcase, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LrWpanNetDevice}{Lr\+Wpan\+Net\+Device} $>$ device, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet)
\begin{DoxyCompactList}\small\item\em Function called when Phy\+Rx\+Begin is hit. \end{DoxyCompactList}\item 
static void \hyperlink{classLrWpanCcaTestCase_aed133fe6504b326574ada94b6043abcf}{Phy\+Rx\+End} (\hyperlink{classLrWpanCcaTestCase}{Lr\+Wpan\+Cca\+Test\+Case} $\ast$testcase, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LrWpanNetDevice}{Lr\+Wpan\+Net\+Device} $>$ device, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, double sinr)
\begin{DoxyCompactList}\small\item\em Function called when Phy\+Rx\+End is hit. \end{DoxyCompactList}\item 
static void \hyperlink{classLrWpanCcaTestCase_a302ae211f206663a114fcd5a07752d5c}{Phy\+Rx\+Drop} (\hyperlink{classLrWpanCcaTestCase}{Lr\+Wpan\+Cca\+Test\+Case} $\ast$testcase, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LrWpanNetDevice}{Lr\+Wpan\+Net\+Device} $>$ device, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet)
\begin{DoxyCompactList}\small\item\em Function called when Phy\+Rx\+Drop is hit. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__lr-wpan_ga6494269d13d45c511a07b7ccbb1de754}{Lr\+Wpan\+Phy\+Enumeration} \hyperlink{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{m\+\_\+status}
\begin{DoxyCompactList}\small\item\em P\+HY status. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Lr\+Wpan C\+CA Test. 

\subsection{Constructor \& Destructor Documentation}
\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lr\+Wpan\+Cca\+Test\+Case()}{LrWpanCcaTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lr\+Wpan\+Cca\+Test\+Case\+::\+Lr\+Wpan\+Cca\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classLrWpanCcaTestCase_aeead12010707611f14b0343cbe16d87d}{}\label{classLrWpanCcaTestCase_aeead12010707611f14b0343cbe16d87d}

\begin{DoxyCode}
104   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Test the 802.15.4 clear channel assessment"})
105 \{
106   \hyperlink{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{m\_status} = \hyperlink{group__lr-wpan_gga6494269d13d45c511a07b7ccbb1de754a33aedad985a3e4dd7a0c6790a2c677a0}{IEEE\_802\_15\_4\_PHY\_UNSPECIFIED};
107 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lr\+Wpan\+Cca\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLrWpanCcaTestCase_a3e2872a3bd57d754a2bdb613437e18a8}{}\label{classLrWpanCcaTestCase_a3e2872a3bd57d754a2bdb613437e18a8}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
161 \{
162   \textcolor{comment}{// Tx Power: 0 dBm}
163   \textcolor{comment}{// Receiver Sensitivity: -106.58 dBm}
164   \textcolor{comment}{// CCA channel busy condition: Rx power > -96.58 dBm}
165   \textcolor{comment}{// Log distance reference loss at 1 m distance for channel 11 (2405 MHz): 40.0641 dB}
166   \textcolor{comment}{// Log distance free space path loss exponent: 2}
167 
168   \textcolor{comment}{// Test setup:}
169   \textcolor{comment}{// Start transmission of a short packet from node 0 to node 1 and at the same}
170   \textcolor{comment}{// time a transmission of a large packet from node 2 to node 1.}
171   \textcolor{comment}{// Both transmissions should start without backoff (per configuration) because}
172   \textcolor{comment}{// the CCA on both nodes should detect a free medium.}
173   \textcolor{comment}{// The shorter packet will be received first. After reception of the short}
174   \textcolor{comment}{// packet, which might be destroyed due to interference of the large}
175   \textcolor{comment}{// packet, node 1 will start a CCA. Depending on the distance between node 1}
176   \textcolor{comment}{// and node 2, node 1 should detect a busy medium, because the transmission of}
177   \textcolor{comment}{// the large packet is still in progress. For the above mentioned scenario}
178   \textcolor{comment}{// parameters, the distance for the CCA detecting a busy medium is about}
179   \textcolor{comment}{// 669.5685 m.}
180 
181   \textcolor{comment}{// Enable calculation of FCS in the trailers. Only necessary when interacting with real devices or
       wireshark.}
182   \textcolor{comment}{// GlobalValue::Bind ("ChecksumEnabled", BooleanValue (true));}
183 
184   \textcolor{comment}{// Set the random seed and run number for this test}
185   RngSeedManager::SetSeed (1);
186   RngSeedManager::SetRun (6);
187 
188   \textcolor{comment}{// Create 3 nodes, and a NetDevice for each one}
189   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n0 = CreateObject <Node> ();
190   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n1 = CreateObject <Node> ();
191   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n2 = CreateObject <Node> ();
192 
193   \hyperlink{classns3_1_1Ptr}{Ptr<LrWpanNetDevice>} dev0 = CreateObject<LrWpanNetDevice> ();
194   \hyperlink{classns3_1_1Ptr}{Ptr<LrWpanNetDevice>} dev1 = CreateObject<LrWpanNetDevice> ();
195   \hyperlink{classns3_1_1Ptr}{Ptr<LrWpanNetDevice>} dev2 = CreateObject<LrWpanNetDevice> ();
196 
197   \textcolor{comment}{// Make random variable stream assignment deterministic}
198   dev0->AssignStreams (0);
199   dev1->AssignStreams (10);
200   dev2->AssignStreams (20);
201 
202   dev0->SetAddress (\hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:01"}));
203   dev1->SetAddress (\hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:02"}));
204   dev2->SetAddress (\hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:03"}));
205 
206   \textcolor{comment}{// Each device must be attached to the same channel}
207   \hyperlink{classns3_1_1Ptr}{Ptr<SingleModelSpectrumChannel>} channel = 
      CreateObject<SingleModelSpectrumChannel> ();
208   \hyperlink{classns3_1_1Ptr}{Ptr<LogDistancePropagationLossModel>} propModel = 
      CreateObject<LogDistancePropagationLossModel> ();
209   propModel->SetReference (1.0, 40.0641); \textcolor{comment}{// Reference loss at 1m distance for 2405 MHz (channel 11)}
210   propModel->SetPathLossExponent (2); \textcolor{comment}{// Free space path loss exponent}
211   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantSpeedPropagationDelayModel>} delayModel = 
      CreateObject<ConstantSpeedPropagationDelayModel> ();
212   channel->\hyperlink{classns3_1_1SingleModelSpectrumChannel_a3d8c68e54e0e7659fdf715260d5613ac}{AddPropagationLossModel} (propModel);
213   channel->\hyperlink{classns3_1_1SingleModelSpectrumChannel_afd757c085623596ebf3da8264cfbaa45}{SetPropagationDelayModel} (delayModel);
214 
215   dev0->SetChannel (channel);
216   dev1->SetChannel (channel);
217   dev2->SetChannel (channel);
218 
219   \textcolor{comment}{// To complete configuration, a LrWpanNetDevice must be added to a node}
220   n0->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (dev0);
221   n1->AddDevice (dev1);
222   n2->AddDevice (dev2);
223 
224   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantPositionMobilityModel>} sender0Mobility = 
      CreateObject<ConstantPositionMobilityModel> ();
225   sender0Mobility->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0, 0, 0));
226   dev0->GetPhy ()->SetMobility (sender0Mobility);
227   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantPositionMobilityModel>} sender1Mobility = 
      CreateObject<ConstantPositionMobilityModel> ();
228   sender1Mobility->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0, 669, 0));
229   dev1->GetPhy ()->SetMobility (sender1Mobility);
230   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantPositionMobilityModel>} sender2Mobility = 
      CreateObject<ConstantPositionMobilityModel> ();
231   sender2Mobility->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0, 1338, 0));
232   dev2->GetPhy ()->SetMobility (sender2Mobility);
233 
234   \textcolor{comment}{// Disable the NetDevices queue management.}
235   dev0->GetMac ()->SetMcpsDataConfirmCallback (MakeNullCallback<void, McpsDataConfirmParams> ());
236   dev1->GetMac ()->SetMcpsDataConfirmCallback (MakeNullCallback<void, McpsDataConfirmParams> ());
237   dev2->GetMac ()->SetMcpsDataConfirmCallback (MakeNullCallback<void, McpsDataConfirmParams> ());
238 
239   \textcolor{comment}{// Set the CCA confirm callback.}
240   dev1->GetPhy ()->SetPlmeCcaConfirmCallback (\hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_af740f571b9d8594701c82480c8ff9632}{LrWpanCcaTestCase::PlmeCcaConfirm}, \textcolor{keyword}{this}, dev1));
241 
242   \textcolor{comment}{// Start sending without backoff, if the channel is free.}
243   dev0->GetCsmaCa ()->SetMacMinBE (0);
244   dev2->GetCsmaCa ()->SetMacMinBE (0);
245 
246   \textcolor{comment}{// Connect trace sources.}
247   dev0->GetPhy ()->TraceConnectWithoutContext (\textcolor{stringliteral}{"PhyTxBegin"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_a23a0238970a4597eb0e6f90cd5a2f5f5}{LrWpanCcaTestCase::PhyTxBegin}, \textcolor{keyword}{this}, dev0));
248   dev0->GetPhy ()->TraceConnectWithoutContext (\textcolor{stringliteral}{"PhyTxEnd"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_a10eb0d8851c2e8de313448bb2da6fd30}{LrWpanCcaTestCase::PhyTxEnd}, \textcolor{keyword}{this}, dev0));
249   dev2->GetPhy ()->TraceConnectWithoutContext (\textcolor{stringliteral}{"PhyTxBegin"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_a23a0238970a4597eb0e6f90cd5a2f5f5}{LrWpanCcaTestCase::PhyTxBegin}, \textcolor{keyword}{this}, dev2));
250   dev2->GetPhy ()->TraceConnectWithoutContext (\textcolor{stringliteral}{"PhyTxEnd"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_a10eb0d8851c2e8de313448bb2da6fd30}{LrWpanCcaTestCase::PhyTxEnd}, \textcolor{keyword}{this}, dev2));
251   dev1->GetPhy ()->TraceConnectWithoutContext (\textcolor{stringliteral}{"PhyRxBegin"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_a7d236bfc6109f581582255227b8dee77}{LrWpanCcaTestCase::PhyRxBegin}, \textcolor{keyword}{this}, dev1));
252   dev1->GetPhy ()->TraceConnectWithoutContext (\textcolor{stringliteral}{"PhyRxEnd"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_aed133fe6504b326574ada94b6043abcf}{LrWpanCcaTestCase::PhyRxEnd}, \textcolor{keyword}{this}, dev1));
253   dev1->GetPhy ()->TraceConnectWithoutContext (\textcolor{stringliteral}{"PhyRxDrop"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classLrWpanCcaTestCase_a302ae211f206663a114fcd5a07752d5c}{LrWpanCcaTestCase::PhyRxDrop}, \textcolor{keyword}{this}, dev1));
254 
255   \hyperlink{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{m\_status} = \hyperlink{group__lr-wpan_gga6494269d13d45c511a07b7ccbb1de754a33aedad985a3e4dd7a0c6790a2c677a0}{IEEE\_802\_15\_4\_PHY\_UNSPECIFIED};
256 
257   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} p0 = Create<Packet> (1);  \textcolor{comment}{// 1 byte of dummy data}
258   \hyperlink{structns3_1_1McpsDataRequestParams}{McpsDataRequestParams} params0;
259   params0.\hyperlink{structns3_1_1McpsDataRequestParams_a31f4c281d07cf3b5992d45416bd71309}{m\_srcAddrMode} = \hyperlink{group__lr-wpan_gga9ea4702ab11d5329e1593afebce06bbba7bf58267dde39bdabfeeb5793450c5e3}{SHORT\_ADDR};
260   params0.m\_dstAddrMode = \hyperlink{group__lr-wpan_gga9ea4702ab11d5329e1593afebce06bbba7bf58267dde39bdabfeeb5793450c5e3}{SHORT\_ADDR};
261   params0.m\_dstPanId = 0;
262   params0.m\_dstAddr = \hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:02"});
263   params0.m\_msduHandle = 0;
264   params0.m\_txOptions = \hyperlink{group__lr-wpan_gga74ea891230ebf45d80d69a67266930a4a873c8b896435efcdd1c058668efb88ea}{TX\_OPTION\_NONE};
265   Simulator::ScheduleNow (&LrWpanMac::McpsDataRequest, dev0->GetMac (), params0, p0);
266 
267   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} p1 = Create<Packet> (100);  \textcolor{comment}{// 100 bytes of dummy data}
268   \hyperlink{structns3_1_1McpsDataRequestParams}{McpsDataRequestParams} params1;
269   params1.\hyperlink{structns3_1_1McpsDataRequestParams_a31f4c281d07cf3b5992d45416bd71309}{m\_srcAddrMode} = \hyperlink{group__lr-wpan_gga9ea4702ab11d5329e1593afebce06bbba7bf58267dde39bdabfeeb5793450c5e3}{SHORT\_ADDR};
270   params1.m\_dstAddrMode = \hyperlink{group__lr-wpan_gga9ea4702ab11d5329e1593afebce06bbba7bf58267dde39bdabfeeb5793450c5e3}{SHORT\_ADDR};
271   params1.m\_dstPanId = 0;
272   params1.m\_dstAddr = \hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:02"});
273   params1.m\_msduHandle = 0;
274   params1.m\_txOptions = \hyperlink{group__lr-wpan_gga74ea891230ebf45d80d69a67266930a4a873c8b896435efcdd1c058668efb88ea}{TX\_OPTION\_NONE};
275   Simulator::ScheduleNow (&LrWpanMac::McpsDataRequest, dev2->GetMac (), params1, p1);
276 
277   Simulator::Run ();
278 
279   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{m\_status}, 
      \hyperlink{group__lr-wpan_gga6494269d13d45c511a07b7ccbb1de754a14641e5190b66ec8ec3903218058dc46}{IEEE\_802\_15\_4\_PHY\_BUSY}, \textcolor{stringliteral}{"CCA status BUSY (as expected)"});
280 
281   \hyperlink{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{m\_status} = \hyperlink{group__lr-wpan_gga6494269d13d45c511a07b7ccbb1de754a33aedad985a3e4dd7a0c6790a2c677a0}{IEEE\_802\_15\_4\_PHY\_UNSPECIFIED};
282 
283   sender2Mobility->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0, 1340, 0));
284 
285   Simulator::ScheduleNow (&LrWpanMac::McpsDataRequest, dev0->GetMac (), params0, p0);
286   Simulator::ScheduleNow (&LrWpanMac::McpsDataRequest, dev2->GetMac (), params1, p1);
287 
288   Simulator::Run ();
289 
290   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{m\_status}, 
      \hyperlink{group__lr-wpan_gga6494269d13d45c511a07b7ccbb1de754af3994414efcd2fac7e312ecb9b3ebd70}{IEEE\_802\_15\_4\_PHY\_IDLE}, \textcolor{stringliteral}{"CCA status IDLE (as expected)"});
291 
292   Simulator::Destroy ();
293 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Phy\+Rx\+Begin@{Phy\+Rx\+Begin}}
\index{Phy\+Rx\+Begin@{Phy\+Rx\+Begin}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Phy\+Rx\+Begin(\+Lr\+Wpan\+Cca\+Test\+Case $\ast$testcase, Ptr$<$ Lr\+Wpan\+Net\+Device $>$ device, Ptr$<$ const Packet $>$ packet)}{PhyRxBegin(LrWpanCcaTestCase *testcase, Ptr< LrWpanNetDevice > device, Ptr< const Packet > packet)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lr\+Wpan\+Cca\+Test\+Case\+::\+Phy\+Rx\+Begin (
\begin{DoxyParamCaption}
\item[{{\bf Lr\+Wpan\+Cca\+Test\+Case} $\ast$}]{testcase, }
\item[{{\bf Ptr}$<$ {\bf Lr\+Wpan\+Net\+Device} $>$}]{device, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLrWpanCcaTestCase_a7d236bfc6109f581582255227b8dee77}{}\label{classLrWpanCcaTestCase_a7d236bfc6109f581582255227b8dee77}


Function called when Phy\+Rx\+Begin is hit. 


\begin{DoxyParams}{Parameters}
{\em testcase} & The Test\+Case. \\
\hline
{\em device} & The Lr\+Wpan\+Net\+Device. \\
\hline
{\em packet} & The packet. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
135 \{
136   std::ostringstream os;
137   packet->\hyperlink{classns3_1_1Packet_aa34058a5cdbf94673531f8c4001ab227}{Print} (os);
138   std::cout << std::setiosflags (std::ios::fixed) << std::setprecision (9) << \textcolor{stringliteral}{"["} << 
      \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << \textcolor{stringliteral}{"] "} << device->
      \hyperlink{classns3_1_1LrWpanNetDevice_a1937e69c08baf66ebb5c9d937e52659a}{GetMac} ()->GetShortAddress () << \textcolor{stringliteral}{" PhyRxBegin: "} << os.str () << std::endl;
139 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Phy\+Rx\+Drop@{Phy\+Rx\+Drop}}
\index{Phy\+Rx\+Drop@{Phy\+Rx\+Drop}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Phy\+Rx\+Drop(\+Lr\+Wpan\+Cca\+Test\+Case $\ast$testcase, Ptr$<$ Lr\+Wpan\+Net\+Device $>$ device, Ptr$<$ const Packet $>$ packet)}{PhyRxDrop(LrWpanCcaTestCase *testcase, Ptr< LrWpanNetDevice > device, Ptr< const Packet > packet)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lr\+Wpan\+Cca\+Test\+Case\+::\+Phy\+Rx\+Drop (
\begin{DoxyParamCaption}
\item[{{\bf Lr\+Wpan\+Cca\+Test\+Case} $\ast$}]{testcase, }
\item[{{\bf Ptr}$<$ {\bf Lr\+Wpan\+Net\+Device} $>$}]{device, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLrWpanCcaTestCase_a302ae211f206663a114fcd5a07752d5c}{}\label{classLrWpanCcaTestCase_a302ae211f206663a114fcd5a07752d5c}


Function called when Phy\+Rx\+Drop is hit. 


\begin{DoxyParams}{Parameters}
{\em testcase} & The Test\+Case. \\
\hline
{\em device} & The Lr\+Wpan\+Net\+Device. \\
\hline
{\em packet} & The packet. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
153 \{
154   std::ostringstream os;
155   packet->\hyperlink{classns3_1_1Packet_aa34058a5cdbf94673531f8c4001ab227}{Print} (os);
156   std::cout << std::setiosflags (std::ios::fixed) << std::setprecision (9) << \textcolor{stringliteral}{"["} << 
      \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << \textcolor{stringliteral}{"] "} << device->
      \hyperlink{classns3_1_1LrWpanNetDevice_a1937e69c08baf66ebb5c9d937e52659a}{GetMac} ()->GetShortAddress () << \textcolor{stringliteral}{" PhyRxDrop: "} << os.str () << std::endl;
157 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Phy\+Rx\+End@{Phy\+Rx\+End}}
\index{Phy\+Rx\+End@{Phy\+Rx\+End}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Phy\+Rx\+End(\+Lr\+Wpan\+Cca\+Test\+Case $\ast$testcase, Ptr$<$ Lr\+Wpan\+Net\+Device $>$ device, Ptr$<$ const Packet $>$ packet, double sinr)}{PhyRxEnd(LrWpanCcaTestCase *testcase, Ptr< LrWpanNetDevice > device, Ptr< const Packet > packet, double sinr)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lr\+Wpan\+Cca\+Test\+Case\+::\+Phy\+Rx\+End (
\begin{DoxyParamCaption}
\item[{{\bf Lr\+Wpan\+Cca\+Test\+Case} $\ast$}]{testcase, }
\item[{{\bf Ptr}$<$ {\bf Lr\+Wpan\+Net\+Device} $>$}]{device, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet, }
\item[{double}]{sinr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLrWpanCcaTestCase_aed133fe6504b326574ada94b6043abcf}{}\label{classLrWpanCcaTestCase_aed133fe6504b326574ada94b6043abcf}


Function called when Phy\+Rx\+End is hit. 


\begin{DoxyParams}{Parameters}
{\em testcase} & The Test\+Case. \\
\hline
{\em device} & The Lr\+Wpan\+Net\+Device. \\
\hline
{\em packet} & The packet. \\
\hline
{\em sinr} & The received S\+I\+NR. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
143 \{
144   std::ostringstream os;
145   packet->\hyperlink{classns3_1_1Packet_aa34058a5cdbf94673531f8c4001ab227}{Print} (os);
146   std::cout << std::setiosflags (std::ios::fixed) << std::setprecision (9) << \textcolor{stringliteral}{"["} << 
      \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << \textcolor{stringliteral}{"] "} << device->
      \hyperlink{classns3_1_1LrWpanNetDevice_a1937e69c08baf66ebb5c9d937e52659a}{GetMac} ()->GetShortAddress () << \textcolor{stringliteral}{" PhyRxEnd ("} << sinr << \textcolor{stringliteral}{"): "} << os.str () << std::endl;
147 
148   \textcolor{comment}{// The first packet was received. Now start a CCA, to try to detect the second packet which is still
       being transmitted.}
149   device->\hyperlink{classns3_1_1LrWpanNetDevice_ae5f566c0d7718541c5520ac8508bd140}{GetPhy} ()->PlmeCcaRequest ();
150 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Phy\+Tx\+Begin@{Phy\+Tx\+Begin}}
\index{Phy\+Tx\+Begin@{Phy\+Tx\+Begin}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Phy\+Tx\+Begin(\+Lr\+Wpan\+Cca\+Test\+Case $\ast$testcase, Ptr$<$ Lr\+Wpan\+Net\+Device $>$ device, Ptr$<$ const Packet $>$ packet)}{PhyTxBegin(LrWpanCcaTestCase *testcase, Ptr< LrWpanNetDevice > device, Ptr< const Packet > packet)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lr\+Wpan\+Cca\+Test\+Case\+::\+Phy\+Tx\+Begin (
\begin{DoxyParamCaption}
\item[{{\bf Lr\+Wpan\+Cca\+Test\+Case} $\ast$}]{testcase, }
\item[{{\bf Ptr}$<$ {\bf Lr\+Wpan\+Net\+Device} $>$}]{device, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLrWpanCcaTestCase_a23a0238970a4597eb0e6f90cd5a2f5f5}{}\label{classLrWpanCcaTestCase_a23a0238970a4597eb0e6f90cd5a2f5f5}


Function called when Phy\+Tx\+Begin is hit. 


\begin{DoxyParams}{Parameters}
{\em testcase} & The Test\+Case. \\
\hline
{\em device} & The Lr\+Wpan\+Net\+Device. \\
\hline
{\em packet} & The packet. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
119 \{
120   std::ostringstream os;
121   packet->\hyperlink{classns3_1_1Packet_aa34058a5cdbf94673531f8c4001ab227}{Print} (os);
122   std::cout << std::setiosflags (std::ios::fixed) << std::setprecision (9) << \textcolor{stringliteral}{"["} << 
      \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << \textcolor{stringliteral}{"] "} << device->
      \hyperlink{classns3_1_1LrWpanNetDevice_a1937e69c08baf66ebb5c9d937e52659a}{GetMac} ()->GetShortAddress () << \textcolor{stringliteral}{" PhyTxBegin: "} << os.str () << std::endl;
123 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Phy\+Tx\+End@{Phy\+Tx\+End}}
\index{Phy\+Tx\+End@{Phy\+Tx\+End}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Phy\+Tx\+End(\+Lr\+Wpan\+Cca\+Test\+Case $\ast$testcase, Ptr$<$ Lr\+Wpan\+Net\+Device $>$ device, Ptr$<$ const Packet $>$ packet)}{PhyTxEnd(LrWpanCcaTestCase *testcase, Ptr< LrWpanNetDevice > device, Ptr< const Packet > packet)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lr\+Wpan\+Cca\+Test\+Case\+::\+Phy\+Tx\+End (
\begin{DoxyParamCaption}
\item[{{\bf Lr\+Wpan\+Cca\+Test\+Case} $\ast$}]{testcase, }
\item[{{\bf Ptr}$<$ {\bf Lr\+Wpan\+Net\+Device} $>$}]{device, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLrWpanCcaTestCase_a10eb0d8851c2e8de313448bb2da6fd30}{}\label{classLrWpanCcaTestCase_a10eb0d8851c2e8de313448bb2da6fd30}


Function called when Phy\+Tx\+End is hit. 


\begin{DoxyParams}{Parameters}
{\em testcase} & The Test\+Case. \\
\hline
{\em device} & The Lr\+Wpan\+Net\+Device. \\
\hline
{\em packet} & The packet. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
127 \{
128   std::ostringstream os;
129   packet->\hyperlink{classns3_1_1Packet_aa34058a5cdbf94673531f8c4001ab227}{Print} (os);
130   std::cout << std::setiosflags (std::ios::fixed) << std::setprecision (9) << \textcolor{stringliteral}{"["} << 
      \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << \textcolor{stringliteral}{"] "} << device->
      \hyperlink{classns3_1_1LrWpanNetDevice_a1937e69c08baf66ebb5c9d937e52659a}{GetMac} ()->GetShortAddress () << \textcolor{stringliteral}{" PhyTxEnd: "} << os.str () << std::endl;
131 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!Plme\+Cca\+Confirm@{Plme\+Cca\+Confirm}}
\index{Plme\+Cca\+Confirm@{Plme\+Cca\+Confirm}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{Plme\+Cca\+Confirm(\+Lr\+Wpan\+Cca\+Test\+Case $\ast$testcase, Ptr$<$ Lr\+Wpan\+Net\+Device $>$ device, Lr\+Wpan\+Phy\+Enumeration status)}{PlmeCcaConfirm(LrWpanCcaTestCase *testcase, Ptr< LrWpanNetDevice > device, LrWpanPhyEnumeration status)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lr\+Wpan\+Cca\+Test\+Case\+::\+Plme\+Cca\+Confirm (
\begin{DoxyParamCaption}
\item[{{\bf Lr\+Wpan\+Cca\+Test\+Case} $\ast$}]{testcase, }
\item[{{\bf Ptr}$<$ {\bf Lr\+Wpan\+Net\+Device} $>$}]{device, }
\item[{{\bf Lr\+Wpan\+Phy\+Enumeration}}]{status}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLrWpanCcaTestCase_af740f571b9d8594701c82480c8ff9632}{}\label{classLrWpanCcaTestCase_af740f571b9d8594701c82480c8ff9632}


Function called when Plme\+Cca\+Confirm is hit. 


\begin{DoxyParams}{Parameters}
{\em testcase} & The Test\+Case. \\
\hline
{\em device} & The Lr\+Wpan\+Net\+Device. \\
\hline
{\em status} & The device status. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
111 \{
112   std::cout << std::setiosflags (std::ios::fixed) << std::setprecision (9) << \textcolor{stringliteral}{"["} << 
      \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << \textcolor{stringliteral}{"] "} << device->
      \hyperlink{classns3_1_1LrWpanNetDevice_a1937e69c08baf66ebb5c9d937e52659a}{GetMac} ()->GetShortAddress () << \textcolor{stringliteral}{" PlmeCcaConfirm: "} << LrWpanHelper::LrWpanPhyEnumerationPrinter (
      status) << std::endl;
113 
114   testcase->\hyperlink{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{m\_status} = status;
115 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14




\subsection{Member Data Documentation}
\index{Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}!m\+\_\+status@{m\+\_\+status}}
\index{m\+\_\+status@{m\+\_\+status}!Lr\+Wpan\+Cca\+Test\+Case@{Lr\+Wpan\+Cca\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+status}{m_status}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lr\+Wpan\+Phy\+Enumeration} Lr\+Wpan\+Cca\+Test\+Case\+::m\+\_\+status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}{}\label{classLrWpanCcaTestCase_adbf2d30b281bb65318deaef492ceecd3}


P\+HY status. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lr-\/wpan/test/\hyperlink{lr-wpan-cca-test_8cc}{lr-\/wpan-\/cca-\/test.\+cc}\end{DoxyCompactItemize}
