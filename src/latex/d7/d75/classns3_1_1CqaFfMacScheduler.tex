\hypertarget{classns3_1_1CqaFfMacScheduler}{}\section{ns3\+:\+:Cqa\+Ff\+Mac\+Scheduler Class Reference}
\label{classns3_1_1CqaFfMacScheduler}\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}


Implements the S\+C\+H\+ED S\+AP and C\+S\+C\+H\+ED S\+AP for the \hyperlink{classns3_1_1Channel}{Channel} and QoS Aware \hyperlink{classns3_1_1Scheduler}{Scheduler}.  




{\ttfamily \#include $<$cqa-\/ff-\/mac-\/scheduler.\+h$>$}



Inheritance diagram for ns3\+:\+:Cqa\+Ff\+Mac\+Scheduler\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Cqa\+Ff\+Mac\+Scheduler\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1CqaFfMacScheduler_ad7df3a4ee9e26114dad4d8b9572be9f8}{Cqa\+Ff\+Mac\+Scheduler} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1CqaFfMacScheduler_a56477bfe75cb8023f4c723209f7dcf46}{$\sim$\+Cqa\+Ff\+Mac\+Scheduler} ()
\item 
virtual void \hyperlink{classns3_1_1CqaFfMacScheduler_af41d8f0979c15b4766c2e1ac955ab0b9}{Do\+Dispose} (void)
\item 
virtual void \hyperlink{classns3_1_1CqaFfMacScheduler_abf9edc89587cd146800984e6af00093f}{Set\+Ff\+Mac\+Csched\+Sap\+User} (\hyperlink{classns3_1_1FfMacCschedSapUser}{Ff\+Mac\+Csched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual void \hyperlink{classns3_1_1CqaFfMacScheduler_a359c2f26a02581e76c24e96401c7dd6a}{Set\+Ff\+Mac\+Sched\+Sap\+User} (\hyperlink{classns3_1_1FfMacSchedSapUser}{Ff\+Mac\+Sched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1FfMacCschedSapProvider}{Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_a10a557a588e6e800ba70881fc6200af8}{Get\+Ff\+Mac\+Csched\+Sap\+Provider} ()
\item 
virtual \hyperlink{classns3_1_1FfMacSchedSapProvider}{Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_ac477bb0942f3059310a3d78e34ad8ccf}{Get\+Ff\+Mac\+Sched\+Sap\+Provider} ()
\item 
virtual void \hyperlink{classns3_1_1CqaFfMacScheduler_a6d95a5cdb82a3ad621f9dc6719f8cec2}{Set\+Lte\+Ffr\+Sap\+Provider} (\hyperlink{classns3_1_1LteFfrSapProvider}{Lte\+Ffr\+Sap\+Provider} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1LteFfrSapUser}{Lte\+Ffr\+Sap\+User} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_ad4e60ee95b33ea19869da62cd29ef812}{Get\+Lte\+Ffr\+Sap\+User} ()
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_afe30372c616909013b09657941963551}{Transmission\+Mode\+Configuration\+Update} (uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1CqaFfMacScheduler_a283a8f6415c2a72bee0c63a330b15a3a}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a2baaf97ccfa2c61ea0761b3f3156fcaf}{Do\+Csched\+Cell\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a87deba0774b914a98cc179253c10da15}{Do\+Csched\+Ue\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a6a28f32273a0046fd219cdcc63613694}{Do\+Csched\+Lc\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_af82b12caa82df26b9d39b878c4e3ded8}{Do\+Csched\+Lc\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_aae2f80d2e010528426bae473f49295a3}{Do\+Csched\+Ue\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_ae92a0b05ed5cc7320099e6b338d8284b}{Do\+Sched\+Dl\+Rlc\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRlcBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a93e71dd49a5d0645c1d5c3022c5a52f7}{Do\+Sched\+Dl\+Paging\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlPagingBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_aa83daba99d153e3e4d01c5dc3d13ff74}{Do\+Sched\+Dl\+Mac\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlMacBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a3840f199996b4470ce8d9b19bf435c5d}{Do\+Sched\+Dl\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a717445fd1e213a2bab582564b5f7c76b}{Do\+Sched\+Dl\+Rach\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRachInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a5e84cafeffef7ddd619cca27ba5e8449}{Do\+Sched\+Dl\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a8f3fcee098da3381bf6383f876d80da9}{Do\+Sched\+Ul\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a4d05d53b8919349eaf5399f0a0049cf1}{Do\+Sched\+Ul\+Noise\+Interference\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlNoiseInterferenceReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a14bd70c9b3bf629d64194171bdc00ce1}{Do\+Sched\+Ul\+Sr\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlSrInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_acbcb167996fa60addf6405660eb8858b}{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlMacCtrlInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a99136625091e1b531f939cb18f780689}{Do\+Sched\+Ul\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
int \hyperlink{classns3_1_1CqaFfMacScheduler_a1b57c878252b51347adcbbe5ca92f8c9}{Get\+Rbg\+Size} (int dlbandwidth)
\item 
int \hyperlink{classns3_1_1CqaFfMacScheduler_a53e0105147913d9c9800f8bb3d172676}{Lc\+Active\+Per\+Flow} (uint16\+\_\+t rnti)
\item 
double \hyperlink{classns3_1_1CqaFfMacScheduler_ad0d681a7fa2872f539e63c511485ae0e}{Estimate\+Ul\+Sinr} (uint16\+\_\+t rnti, uint16\+\_\+t rb)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a2ea59028a05346722f37ccd70cafb248}{Refresh\+Dl\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_ad121d8c53a2aa28532e4ce32682d0dd2}{Refresh\+Ul\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a47bf71ec85b1dda1003d06dccf1bde70}{Update\+Dl\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)
\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a6a8ace20f79d661b0c8fc97dae918298}{Update\+Ul\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint16\+\_\+t size)
\item 
uint8\+\_\+t \hyperlink{classns3_1_1CqaFfMacScheduler_a4aa696a41a5da8bea142e3a83d2880f3}{Update\+Harq\+Process\+Id} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Update and return a new process Id for the R\+N\+TI specified. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1CqaFfMacScheduler_a166f5717872f7d411d168869881a4518}{Harq\+Process\+Availability} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Return the availability of free process for the R\+N\+TI specified. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1CqaFfMacScheduler_a09c54657692d4e9d6c57185b1f16ad14}{Refresh\+Harq\+Processes} ()
\begin{DoxyCompactList}\small\item\em Refresh H\+A\+RQ processes according to the timers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LteAmc}{Lte\+Amc} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\+\_\+amc}
\item 
std\+::map$<$ \hyperlink{structns3_1_1LteFlowId__t}{Lte\+Flow\+Id\+\_\+t}, \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRlcBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\+\_\+rlc\+Buffer\+Req}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1CqasFlowPerf__t}{Cqas\+Flow\+Perf\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\+\_\+flow\+Stats\+Dl}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1CqasFlowPerf__t}{Cqas\+Flow\+Perf\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\+\_\+flow\+Stats\+Ul}
\item 
std\+::map$<$ \hyperlink{structns3_1_1LteFlowId__t}{Lte\+Flow\+Id\+\_\+t}, struct \hyperlink{structns3_1_1LogicalChannelConfigListElement__s}{Logical\+Channel\+Config\+List\+Element\+\_\+s} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\+\_\+ue\+Logical\+Channels\+Config\+List}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{m\+\_\+p10\+Cqi\+Rxed}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}{m\+\_\+p10\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1SbMeasResult__s}{Sb\+Meas\+Result\+\_\+s} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\+\_\+a30\+Cqi\+Rxed}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}{m\+\_\+a30\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ uint16\+\_\+t $>$ $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}{m\+\_\+allocation\+Maps}
\item 
std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ double $>$ $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\+\_\+ue\+Cqi}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\+\_\+ue\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\+\_\+ce\+Bsr\+Rxed}
\item 
\hyperlink{classns3_1_1FfMacCschedSapUser}{Ff\+Mac\+Csched\+Sap\+User} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_a66b7628e6f04aa658ff04050221243b9}{m\+\_\+csched\+Sap\+User}
\item 
\hyperlink{classns3_1_1FfMacSchedSapUser}{Ff\+Mac\+Sched\+Sap\+User} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}{m\+\_\+sched\+Sap\+User}
\item 
\hyperlink{classns3_1_1FfMacCschedSapProvider}{Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_a04e8005367e22a36fb264a71382c2ac1}{m\+\_\+csched\+Sap\+Provider}
\item 
\hyperlink{classns3_1_1FfMacSchedSapProvider}{Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_ac139d5e64c1bdd47b31e3f8ae1633ebc}{m\+\_\+sched\+Sap\+Provider}
\item 
\hyperlink{classns3_1_1LteFfrSapUser}{Lte\+Ffr\+Sap\+User} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_a68b05ba68f164a5acf308ce7dd18e57c}{m\+\_\+ffr\+Sap\+User}
\item 
\hyperlink{classns3_1_1LteFfrSapProvider}{Lte\+Ffr\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\+\_\+ffr\+Sap\+Provider}
\item 
\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\+\_\+csched\+Cell\+Config}
\item 
double \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\+\_\+time\+Window}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\+\_\+next\+Rnti\+Ul}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\+\_\+cqi\+Timers\+Threshold}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{m\+\_\+ues\+Tx\+Mode}
\item 
bool \hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\+\_\+harq\+On}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{m\+\_\+dl\+Harq\+Current\+Process\+Id}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a457b3571b67ff17d042e9894e90e2ce2}{Dl\+Harq\+Processes\+Status\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\+\_\+dl\+Harq\+Processes\+Status}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a39413ade536de4b1c82d6c0074cc703e}{Dl\+Harq\+Processes\+Timer\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\+\_\+dl\+Harq\+Processes\+Timer}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_af25599bf8f9f564075c005759c9af18c}{Dl\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a4c0cbd1e72f1c667f8b5879655f13210}{Dl\+Harq\+Rlc\+Pdu\+List\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}
\item 
std\+::vector$<$ \hyperlink{structns3_1_1DlInfoListElement__s}{Dl\+Info\+List\+Element\+\_\+s} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\+\_\+dl\+Info\+List\+Buffered}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\+\_\+ul\+Harq\+Current\+Process\+Id}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_af765c4daaafe4ea4809c1041fc196629}{Ul\+Harq\+Processes\+Status\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\+\_\+ul\+Harq\+Processes\+Status}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a042cbd6bf67e73911cba35b8c070223d}{Ul\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}
\item 
std\+::vector$<$ struct \hyperlink{structns3_1_1RachListElement__s}{Rach\+List\+Element\+\_\+s} $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a8acbb79b06264ecc897614a20f77a3ad}{m\+\_\+rach\+List}
\item 
std\+::vector$<$ uint16\+\_\+t $>$ \hyperlink{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{m\+\_\+rach\+Allocation\+Map}
\item 
uint8\+\_\+t \hyperlink{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{m\+\_\+ul\+Grant\+Mcs}
\item 
std\+::string \hyperlink{classns3_1_1CqaFfMacScheduler_aed5322f441dd060a332fe6e34c0d7d7c}{m\+\_\+\+Cqa\+Metric}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1CqaFfMacScheduler_a98a42d2ed30c27404f079a56e9dfddc1}{Cqa\+Scheduler\+Member\+Csched\+Sap\+Provider}
\item 
class \hyperlink{classns3_1_1CqaFfMacScheduler_ae6872e0ddfeba723210e403d58b41ee0}{Cqa\+Scheduler\+Member\+Sched\+Sap\+Provider}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Implements the S\+C\+H\+ED S\+AP and C\+S\+C\+H\+ED S\+AP for the \hyperlink{classns3_1_1Channel}{Channel} and QoS Aware \hyperlink{classns3_1_1Scheduler}{Scheduler}. 

This class implements the interface defined by the \hyperlink{classns3_1_1FfMacScheduler}{Ff\+Mac\+Scheduler} abstract class 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Cqa\+Ff\+Mac\+Scheduler@{Cqa\+Ff\+Mac\+Scheduler}}
\index{Cqa\+Ff\+Mac\+Scheduler@{Cqa\+Ff\+Mac\+Scheduler}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Cqa\+Ff\+Mac\+Scheduler()}{CqaFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Cqa\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1CqaFfMacScheduler_ad7df3a4ee9e26114dad4d8b9572be9f8}{}\label{classns3_1_1CqaFfMacScheduler_ad7df3a4ee9e26114dad4d8b9572be9f8}


Constructor. 

Creates the M\+AC \hyperlink{classns3_1_1Scheduler}{Scheduler} interface implementation 
\begin{DoxyCode}
265   :   \hyperlink{classns3_1_1CqaFfMacScheduler_a66b7628e6f04aa658ff04050221243b9}{m\_cschedSapUser} (0),
266     \hyperlink{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}{m\_schedSapUser} (0),
267     \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow} (99.0),
268     \hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl} (0)
269 \{
270   \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc} = CreateObject <LteAmc> ();
271   \hyperlink{classns3_1_1CqaFfMacScheduler_a04e8005367e22a36fb264a71382c2ac1}{m\_cschedSapProvider} = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a98a42d2ed30c27404f079a56e9dfddc1}{CqaSchedulerMemberCschedSapProvider} (\textcolor{keyword}{this});
272   \hyperlink{classns3_1_1CqaFfMacScheduler_ac139d5e64c1bdd47b31e3f8ae1633ebc}{m\_schedSapProvider} = \textcolor{keyword}{new} \hyperlink{classns3_1_1CqaFfMacScheduler_ae6872e0ddfeba723210e403d58b41ee0}{CqaSchedulerMemberSchedSapProvider}
       (\textcolor{keyword}{this});
273   \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider} = 0;
274   \hyperlink{classns3_1_1CqaFfMacScheduler_a68b05ba68f164a5acf308ce7dd18e57c}{m\_ffrSapUser} = \textcolor{keyword}{new} MemberLteFfrSapUser<CqaFfMacScheduler> (\textcolor{keyword}{this});
275 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!````~Cqa\+Ff\+Mac\+Scheduler@{$\sim$\+Cqa\+Ff\+Mac\+Scheduler}}
\index{````~Cqa\+Ff\+Mac\+Scheduler@{$\sim$\+Cqa\+Ff\+Mac\+Scheduler}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{$\sim$\+Cqa\+Ff\+Mac\+Scheduler()}{~CqaFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::$\sim$\+Cqa\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a56477bfe75cb8023f4c723209f7dcf46}{}\label{classns3_1_1CqaFfMacScheduler_a56477bfe75cb8023f4c723209f7dcf46}
Destructor 
\begin{DoxyCode}
278 \{
279   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
280 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}}
\index{Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Cell\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters \&params)}{DoCschedCellConfigReq(const struct FfMacCschedSapProvider::CschedCellConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Cell\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a2baaf97ccfa2c61ea0761b3f3156fcaf}{}\label{classns3_1_1CqaFfMacScheduler_a2baaf97ccfa2c61ea0761b3f3156fcaf}

\begin{DoxyCode}
369 \{
370   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
371   \textcolor{comment}{// Read the subset of parameters used}
372   \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig} = params;
373   \hyperlink{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
374   FfMacCschedSapUser::CschedUeConfigCnfParameters cnf;
375   cnf.m\_result = \hyperlink{namespacens3_a7acf2b7f9e0781dfe43a6bc54d6ecd07a4e8f5e8f6e514152d0a9fbd6b1607fd0}{SUCCESS};
376   \hyperlink{classns3_1_1CqaFfMacScheduler_a66b7628e6f04aa658ff04050221243b9}{m\_cschedSapUser}->\hyperlink{classns3_1_1FfMacCschedSapUser_aecc852478a4ba7e4cd868dae75e01b68}{CschedUeConfigCnf} (cnf);
377   \textcolor{keywordflow}{return};
378 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}}
\index{Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters \&params)}{DoCschedLcConfigReq(const struct FfMacCschedSapProvider::CschedLcConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a6a28f32273a0046fd219cdcc63613694}{}\label{classns3_1_1CqaFfMacScheduler_a6a28f32273a0046fd219cdcc63613694}

\begin{DoxyCode}
421 \{
422   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" New LC, rnti: "}  << params.m\_rnti);
423 
424   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{stringliteral}{"LC configuration. Number of LCs:"}<<params.m\_logicalChannelConfigList.
      size ());
425 
426   \textcolor{comment}{// m\_reconfigureFlat indicates if this is a reconfiguration or new UE is added, table  4.1.5 in LTE MAC
       scheduler specification}
427   \textcolor{keywordflow}{if} (params.m\_reconfigureFlag)
428     \{
429       std::vector <struct LogicalChannelConfigListElement\_s>::const\_iterator lcit;
430 
431       \textcolor{keywordflow}{for}(lcit = params.m\_logicalChannelConfigList.begin (); lcit!= params.m\_logicalChannelConfigList.end (
      ); lcit++)
432         \{
433           LteFlowId\_t flowid = LteFlowId\_t (params.m\_rnti,lcit->m\_logicalChannelIdentity);
434 
435           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.find (flowid) == 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.end ())
436             \{
437               \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"UE logical channels can not be reconfigured because it was not
       configured before."});
438             \}
439           \textcolor{keywordflow}{else}
440             \{
441               \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.find (flowid)->second = *lcit;
442             \}
443         \}
444 
445     \}    \textcolor{comment}{// else new UE is added}
446   \textcolor{keywordflow}{else}
447     \{
448       std::vector <struct LogicalChannelConfigListElement\_s>::const\_iterator lcit;
449 
450       \textcolor{keywordflow}{for} (lcit = params.m\_logicalChannelConfigList.begin (); lcit != params.m\_logicalChannelConfigList.end
       (); lcit++)
451         \{
452           LteFlowId\_t flowId = LteFlowId\_t (params.m\_rnti,lcit->m\_logicalChannelIdentity);
453           \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.insert (std::pair<LteFlowId\_t,
       LogicalChannelConfigListElement\_s>(flowId,*lcit));
454         \}
455     \}
456 
457 
458   std::map <uint16\_t, CqasFlowPerf\_t>::iterator it;
459 
460   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_logicalChannelConfigList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
461     \{
462       it = \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.find (params.m\_rnti);
463 
464       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.end ())
465         \{
466           \textcolor{keywordtype}{double} tbrDlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabGuaranteedBitrateDl / 8;   \textcolor{comment}{
      // byte/s}
467           \textcolor{keywordtype}{double} tbrUlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabGuaranteedBitrateUl / 8;   \textcolor{comment}{
      // byte/s}
468 
469           CqasFlowPerf\_t flowStatsDl;
470           flowStatsDl.flowStart = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
471           flowStatsDl.totalBytesTransmitted = 0;
472           flowStatsDl.lastTtiBytesTransmitted = 0;
473           flowStatsDl.lastAveragedThroughput = 1;
474           flowStatsDl.secondLastAveragedThroughput = 1;
475           flowStatsDl.targetThroughput = tbrDlInBytes;
476           \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.insert (std::pair<uint16\_t, CqasFlowPerf\_t> (params.m\_rnti, 
      flowStatsDl));
477           CqasFlowPerf\_t flowStatsUl;
478           flowStatsUl.flowStart = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
479           flowStatsUl.totalBytesTransmitted = 0;
480           flowStatsUl.lastTtiBytesTransmitted = 0;
481           flowStatsUl.lastAveragedThroughput = 1;
482           flowStatsUl.secondLastAveragedThroughput = 1;
483           flowStatsUl.targetThroughput = tbrUlInBytes;
484           \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\_flowStatsUl}.insert (std::pair<uint16\_t, CqasFlowPerf\_t> (params.m\_rnti, 
      flowStatsUl));
485         \}
486       \textcolor{keywordflow}{else}
487         \{
488           \textcolor{comment}{// update GBR from UeManager::SetupDataRadioBearer ()}
489           \textcolor{keywordtype}{double} tbrDlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabGuaranteedBitrateDl / 8;   \textcolor{comment}{
      // byte/s}
490           \textcolor{keywordtype}{double} tbrUlInBytes = params.m\_logicalChannelConfigList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_eRabGuaranteedBitrateUl / 8;   \textcolor{comment}{
      // byte/s}
491           \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}[(*it).first].targetThroughput = tbrDlInBytes;
492           \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\_flowStatsUl}[(*it).first].targetThroughput = tbrUlInBytes;
493 
494         \}
495     \}
496 
497   \textcolor{keywordflow}{return};
498 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}}
\index{Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters \&params)}{DoCschedLcReleaseReq(const struct FfMacCschedSapProvider::CschedLcReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_af82b12caa82df26b9d39b878c4e3ded8}{}\label{classns3_1_1CqaFfMacScheduler_af82b12caa82df26b9d39b878c4e3ded8}

\begin{DoxyCode}
502 \{
503   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
504   std::vector <uint8\_t>::const\_iterator it;
505 
506   \textcolor{keywordflow}{for} (it = params.m\_logicalChannelIdentity.begin (); it != params.m\_logicalChannelIdentity.end (); it++)
507     \{
508       LteFlowId\_t flowId = LteFlowId\_t (params.m\_rnti, *it);
509 
510       \textcolor{comment}{// find the logical channel with the same Logical Channel Identity in the current list, release it}
511       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.find (flowId)!= 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.end ())
512         \{
513           \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.erase (flowId);
514         \}
515       \textcolor{keywordflow}{else}
516         \{
517           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Logical channels cannot be released because it can not be found in
       the list of active LCs"});
518         \}
519     \}
520         
521   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_logicalChannelIdentity.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
522     \{
523       std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.begin ();
524       std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator temp;
525       \textcolor{keywordflow}{while} (it!=\hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end ())
526         \{
527           \textcolor{keywordflow}{if} (((*it).first.m\_rnti == params.m\_rnti) && ((*it).first.m\_lcId == params.
      m\_logicalChannelIdentity.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})))
528             \{
529               temp = it;
530               it++;
531               \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.erase (temp);
532             \}
533           \textcolor{keywordflow}{else}
534             \{
535               it++;
536             \}
537         \}
538     \}
539   \textcolor{keywordflow}{return};
540 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}}
\index{Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters \&params)}{DoCschedUeConfigReq(const struct FfMacCschedSapProvider::CschedUeConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a87deba0774b914a98cc179253c10da15}{}\label{classns3_1_1CqaFfMacScheduler_a87deba0774b914a98cc179253c10da15}

\begin{DoxyCode}
382 \{
383   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << params.m\_rnti << \textcolor{stringliteral}{" txMode "} << (uint16\_t)params.
      m\_transmissionMode);
384   std::map <uint16\_t,uint8\_t>::iterator it = \hyperlink{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{m\_uesTxMode}.find (params.m\_rnti);
385   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{m\_uesTxMode}.end ())
386     \{
387       \hyperlink{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{m\_uesTxMode}.insert (std::pair <uint16\_t, uint8\_t> (params.m\_rnti, params.
      m\_transmissionMode));
388       \textcolor{comment}{// generate HARQ buffers}
389       \hyperlink{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{m\_dlHarqCurrentProcessId}.insert (std::pair <uint16\_t,uint8\_t > (params.m\_rnti
      , 0));
390       \hyperlink{namespacens3_a457b3571b67ff17d042e9894e90e2ce2}{DlHarqProcessesStatus\_t} dlHarqPrcStatus;
391       dlHarqPrcStatus.resize (8,0);
392       \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.insert (std::pair <uint16\_t, DlHarqProcessesStatus\_t> 
      (params.m\_rnti, dlHarqPrcStatus));
393       \hyperlink{namespacens3_a39413ade536de4b1c82d6c0074cc703e}{DlHarqProcessesTimer\_t} dlHarqProcessesTimer;
394       dlHarqProcessesTimer.resize (8,0);
395       \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.insert (std::pair <uint16\_t, DlHarqProcessesTimer\_t> (
      params.m\_rnti, dlHarqProcessesTimer));
396       \hyperlink{namespacens3_af25599bf8f9f564075c005759c9af18c}{DlHarqProcessesDciBuffer\_t} dlHarqdci;
397       dlHarqdci.resize (8);
398       \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\_dlHarqProcessesDciBuffer}.insert (std::pair <uint16\_t,
       DlHarqProcessesDciBuffer\_t> (params.m\_rnti, dlHarqdci));
399       \hyperlink{namespacens3_a4c0cbd1e72f1c667f8b5879655f13210}{DlHarqRlcPduListBuffer\_t} dlHarqRlcPdu;
400       dlHarqRlcPdu.resize (2);
401       dlHarqRlcPdu.at (0).resize (8);
402       dlHarqRlcPdu.at (1).resize (8);
403       \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.insert (std::pair <uint16\_t,
       DlHarqRlcPduListBuffer\_t> (params.m\_rnti, dlHarqRlcPdu));
404       \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.insert (std::pair <uint16\_t,uint8\_t > (params.m\_rnti
      , 0));
405       \hyperlink{namespacens3_af765c4daaafe4ea4809c1041fc196629}{UlHarqProcessesStatus\_t} ulHarqPrcStatus;
406       ulHarqPrcStatus.resize (8,0);
407       \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\_ulHarqProcessesStatus}.insert (std::pair <uint16\_t, UlHarqProcessesStatus\_t> 
      (params.m\_rnti, ulHarqPrcStatus));
408       \hyperlink{namespacens3_a042cbd6bf67e73911cba35b8c070223d}{UlHarqProcessesDciBuffer\_t} ulHarqdci;
409       ulHarqdci.resize (8);
410       \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.insert (std::pair <uint16\_t,
       UlHarqProcessesDciBuffer\_t> (params.m\_rnti, ulHarqdci));
411     \}
412   \textcolor{keywordflow}{else}
413     \{
414       (*it).second = params.m\_transmissionMode;
415     \}
416   \textcolor{keywordflow}{return};
417 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}}
\index{Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters \&params)}{DoCschedUeReleaseReq(const struct FfMacCschedSapProvider::CschedUeReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_aae2f80d2e010528426bae473f49295a3}{}\label{classns3_1_1CqaFfMacScheduler_aae2f80d2e010528426bae473f49295a3}

\begin{DoxyCode}
544 \{
545   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
546 
547   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}=0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{ff-mac-common_8h_a7c5f9089622a954046da0233f8170d7b}{MAX\_LC\_LIST}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
548     \{
549       LteFlowId\_t flowId = LteFlowId\_t (params.m\_rnti,\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
550       \textcolor{comment}{// find the logical channel with the same Logical Channel Identity in the current list, release it}
551       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.find (flowId)!= 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.end ())
552         \{
553           \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.erase (flowId);
554         \}
555     \}
556 
557   \hyperlink{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{m\_uesTxMode}.erase (params.m\_rnti);
558   \hyperlink{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{m\_dlHarqCurrentProcessId}.erase (params.m\_rnti);
559   \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.erase  (params.m\_rnti);
560   \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.erase (params.m\_rnti);
561   \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\_dlHarqProcessesDciBuffer}.erase  (params.m\_rnti);
562   \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.erase  (params.m\_rnti);
563   \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.erase  (params.m\_rnti);
564   \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\_ulHarqProcessesStatus}.erase  (params.m\_rnti);
565   \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.erase  (params.m\_rnti);
566   \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.erase  (params.m\_rnti);
567   \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\_flowStatsUl}.erase  (params.m\_rnti);
568   \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.erase (params.m\_rnti);
569   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.begin ();
570   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator temp;
571   \textcolor{keywordflow}{while} (it!=\hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end ())
572     \{
573       \textcolor{keywordflow}{if} ((*it).first.m\_rnti == params.m\_rnti)
574         \{
575           temp = it;
576           it++;
577           \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.erase (temp);
578         \}
579       \textcolor{keywordflow}{else}
580         \{
581           it++;
582         \}
583     \}
584   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl} == params.m\_rnti)
585     \{
586       \hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl} = 0;
587     \}
588 
589   \textcolor{keywordflow}{return};
590 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_af41d8f0979c15b4766c2e1ac955ab0b9}{}\label{classns3_1_1CqaFfMacScheduler_af41d8f0979c15b4766c2e1ac955ab0b9}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1CqaFfMacScheduler_af41d8f0979c15b4766c2e1ac955ab0b9}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1FfMacScheduler_a771411e455992b81d8399681779debd9}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
284 \{
285   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
286   \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\_dlHarqProcessesDciBuffer}.clear ();
287   \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.clear ();
288   \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.clear ();
289   \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.clear ();
290   \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.clear ();
291   \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\_ulHarqProcessesStatus}.clear ();
292   \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.clear ();
293   \textcolor{keyword}{delete} \hyperlink{classns3_1_1CqaFfMacScheduler_a04e8005367e22a36fb264a71382c2ac1}{m\_cschedSapProvider};
294   \textcolor{keyword}{delete} \hyperlink{classns3_1_1CqaFfMacScheduler_ac139d5e64c1bdd47b31e3f8ae1633ebc}{m\_schedSapProvider};
295   \textcolor{keyword}{delete} \hyperlink{classns3_1_1CqaFfMacScheduler_a68b05ba68f164a5acf308ce7dd18e57c}{m\_ffrSapUser};
296 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedDlCqiInfoReq(const struct FfMacSchedSapProvider::SchedDlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a5e84cafeffef7ddd619cca27ba5e8449}{}\label{classns3_1_1CqaFfMacScheduler_a5e84cafeffef7ddd619cca27ba5e8449}

\begin{DoxyCode}
1762 \{
1763   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1764   \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a9b28572b241707f364405a269f79dbd8}{ReportDlCqiInfo} (params);
1765 
1766   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_cqiList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1767     \{
1768       \textcolor{keywordflow}{if} ( params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_cqiType == \hyperlink{structns3_1_1CqiListElement__s_a8f1bd827fd9842e7c07e39265d88299aa9db5a80433fbf06a4c98935e28ad26e8}{CqiListElement\_s::P10} )
1769         \{
1770           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"wideband CQI "} <<  (uint32\_t) params.m\_cqiList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0) << \textcolor{stringliteral}{" reported"});
1771           std::map <uint16\_t,uint8\_t>::iterator it;
1772           uint16\_t rnti = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1773           it = \hyperlink{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{m\_p10CqiRxed}.find (rnti);
1774           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{m\_p10CqiRxed}.end ())
1775             \{
1776               \textcolor{comment}{// create the new entry}
1777               \hyperlink{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{m\_p10CqiRxed}.insert ( std::pair<uint16\_t, uint8\_t > (rnti, params.m\_cqiList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0)) ); \textcolor{comment}{// only codeword 0 at this stage (SISO)}
1778               \textcolor{comment}{// generate correspondent timer}
1779               \hyperlink{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}{m\_p10CqiTimers}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold}));
1780             \}
1781           \textcolor{keywordflow}{else}
1782             \{
1783               \textcolor{comment}{// update the CQI value and refresh correspondent timer}
1784               (*it).second = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0);
1785               \textcolor{comment}{// update correspondent timer}
1786               std::map <uint16\_t,uint32\_t>::iterator itTimers;
1787               itTimers = \hyperlink{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}{m\_p10CqiTimers}.find (rnti);
1788               (*itTimers).second = \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold};
1789             \}
1790         \}
1791       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_cqiType == \hyperlink{structns3_1_1CqiListElement__s_a8f1bd827fd9842e7c07e39265d88299aab9a9d64494e36c89d7932a00edb056a7}{CqiListElement\_s::A30} )
1792         \{
1793           \textcolor{comment}{// subband CQI reporting high layer configured}
1794           std::map <uint16\_t,SbMeasResult\_s>::iterator it;
1795           uint16\_t rnti = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1796           it = \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.find (rnti);
1797           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.end ())
1798             \{
1799               \textcolor{comment}{// create the new entry}
1800               \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.insert ( std::pair<uint16\_t, SbMeasResult\_s > (rnti, params.
      m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbMeasResult) );
1801               \hyperlink{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}{m\_a30CqiTimers}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold}));
1802             \}
1803           \textcolor{keywordflow}{else}
1804             \{
1805               \textcolor{comment}{// update the CQI value and refresh correspondent timer}
1806               (*it).second = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbMeasResult;
1807               std::map <uint16\_t,uint32\_t>::iterator itTimers;
1808               itTimers = \hyperlink{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}{m\_a30CqiTimers}.find (rnti);
1809               (*itTimers).second = \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold};
1810             \}
1811         \}
1812       \textcolor{keywordflow}{else}
1813         \{
1814           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" CQI type unknown"});
1815         \}
1816     \}
1817 
1818   \textcolor{keywordflow}{return};
1819 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Mac\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters \&params)}{DoSchedDlMacBufferReq(const struct FfMacSchedSapProvider::SchedDlMacBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Mac\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_aa83daba99d153e3e4d01c5dc3d13ff74}{}\label{classns3_1_1CqaFfMacScheduler_aa83daba99d153e3e4d01c5dc3d13ff74}

\begin{DoxyCode}
627 \{
628   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
629   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"method not implemented"});
630   \textcolor{keywordflow}{return};
631 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Paging\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters \&params)}{DoSchedDlPagingBufferReq(const struct FfMacSchedSapProvider::SchedDlPagingBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Paging\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a93e71dd49a5d0645c1d5c3022c5a52f7}{}\label{classns3_1_1CqaFfMacScheduler_a93e71dd49a5d0645c1d5c3022c5a52f7}

\begin{DoxyCode}
619 \{
620   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
621   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"method not implemented"});
622   \textcolor{keywordflow}{return};
623 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}}
\index{Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rach\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters \&params)}{DoSchedDlRachInfoReq(const struct FfMacSchedSapProvider::SchedDlRachInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rach\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a717445fd1e213a2bab582564b5f7c76b}{}\label{classns3_1_1CqaFfMacScheduler_a717445fd1e213a2bab582564b5f7c76b}

\begin{DoxyCode}
1752 \{
1753   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1754 
1755   \hyperlink{classns3_1_1CqaFfMacScheduler_a8acbb79b06264ecc897614a20f77a3ad}{m\_rachList} = params.m\_rachList;
1756 
1757   \textcolor{keywordflow}{return};
1758 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rlc\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters \&params)}{DoSchedDlRlcBufferReq(const struct FfMacSchedSapProvider::SchedDlRlcBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rlc\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ae92a0b05ed5cc7320099e6b338d8284b}{}\label{classns3_1_1CqaFfMacScheduler_ae92a0b05ed5cc7320099e6b338d8284b}

\begin{DoxyCode}
595 \{
596   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << params.m\_rnti << (uint32\_t) params.m\_logicalChannelIdentity);
597   \textcolor{comment}{// API generated by RLC for updating RLC parameters on a LC (tx and retx queues)}
598 
599   std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
600 
601   LteFlowId\_t flow (params.m\_rnti, params.m\_logicalChannelIdentity);
602 
603   it =  \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.find (flow);
604 
605   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end ())
606     \{
607       \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.insert (std::pair <LteFlowId\_t,
       FfMacSchedSapProvider::SchedDlRlcBufferReqParameters> (flow, params));
608     \}
609   \textcolor{keywordflow}{else}
610     \{
611       (*it).second = params;
612     \}
613 
614   \textcolor{keywordflow}{return};
615 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}}
\index{Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters \&params)}{DoSchedDlTriggerReq(const struct FfMacSchedSapProvider::SchedDlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a3840f199996b4470ce8d9b19bf435c5d}{}\label{classns3_1_1CqaFfMacScheduler_a3840f199996b4470ce8d9b19bf435c5d}

\begin{DoxyCode}
780 \{
781   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{" subframe no. "} << (0
      xF & params.m\_sfnSf));
782   \textcolor{comment}{// API generated by RLC for triggering the scheduling of a DL subframe}
783   \textcolor{comment}{// evaluate the relative channel quality indicator for each UE per each RBG}
784   \textcolor{comment}{// (since we are using allocation type 0 the small unit of allocation is RBG)}
785   \textcolor{comment}{// Resource allocation type 0 (see sec 7.1.6.1 of 36.213)}
786 
787   \hyperlink{classns3_1_1CqaFfMacScheduler_a2ea59028a05346722f37ccd70cafb248}{RefreshDlCqiMaps} ();
788 
789   \textcolor{keywordtype}{int} rbgSize = \hyperlink{classns3_1_1CqaFfMacScheduler_a1b57c878252b51347adcbbe5ca92f8c9}{GetRbgSize} (\hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth});
790   \textcolor{keywordtype}{int} numberOfRBGs = \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth} / rbgSize;
791   std::map <uint16\_t, std::multimap <uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc> > allocationMapPerRntiPerLCId;
792   std::map <uint16\_t, std::multimap <uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc> >::iterator itMap;
793   allocationMapPerRntiPerLCId.clear ();
794   bool(*key\_function\_pointer\_groups)(int,int) = \hyperlink{namespacens3_af9e1b18e690a42c20297a79e60269ea7}{CqaGroupDescComparator};
795   \hyperlink{namespacens3_a92550c655e7599f3bc33c3ce363efc7a}{t\_map\_HOLgroupToUEs} map\_GBRHOLgroupToUE (key\_function\_pointer\_groups);
796   \hyperlink{namespacens3_a92550c655e7599f3bc33c3ce363efc7a}{t\_map\_HOLgroupToUEs} map\_nonGBRHOLgroupToUE (key\_function\_pointer\_groups);
797   \textcolor{keywordtype}{int} grouping\_parameter = 1000;
798   \textcolor{keywordtype}{double} tolerance = 1.1;
799   std::map<LteFlowId\_t,int> UEtoHOL;
800   std::vector <bool> rbgMap;  \textcolor{comment}{// global RBGs map}
801   uint16\_t rbgAllocatedNum = 0;
802   std::set <uint16\_t> rntiAllocated;
803   rbgMap.resize (\hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth} / rbgSize, \textcolor{keyword}{false});
804 
805   rbgMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_ad60306dae43b74dc25b65f81d6587a24}{GetAvailableDlRbg} ();
806   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = rbgMap.begin (); it != rbgMap.end (); it++)
807     \{
808       \textcolor{keywordflow}{if} ((*it) == true )
809         \{
810           rbgAllocatedNum++;
811         \}
812     \}
813 
814   FfMacSchedSapUser::SchedDlConfigIndParameters ret;
815 
816   \textcolor{comment}{//   update UL HARQ proc id}
817   std::map <uint16\_t, uint8\_t>::iterator itProcId;
818   \textcolor{keywordflow}{for} (itProcId = \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.begin (); itProcId != 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.end (); itProcId++)
819     \{
820       (*itProcId).second = ((*itProcId).second + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
821     \}
822 
823 
824   \textcolor{comment}{// RACH Allocation}
825   uint16\_t rbAllocatedNum = 0;
826   std::vector <bool> ulRbMap;
827   ulRbMap.resize (\hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, \textcolor{keyword}{false});
828   ulRbMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_aafd23b22a27ec83e03d54795c122d175}{GetAvailableUlRbg} ();
829   uint8\_t maxContinuousUlBandwidth = 0;
830   uint8\_t tmpMinBandwidth = 0;
831   uint16\_t ffrRbStartOffset = 0;
832   uint16\_t tmpFfrRbStartOffset = 0;
833   uint16\_t index = 0;
834 
835   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = ulRbMap.begin (); it != ulRbMap.end (); it++)
836     \{
837       \textcolor{keywordflow}{if} ((*it) == true )
838         \{
839           rbAllocatedNum++;
840           \textcolor{keywordflow}{if} (tmpMinBandwidth > maxContinuousUlBandwidth)
841             \{
842               maxContinuousUlBandwidth = tmpMinBandwidth;
843               ffrRbStartOffset = tmpFfrRbStartOffset;
844             \}
845           tmpMinBandwidth = 0;
846         \}
847       \textcolor{keywordflow}{else}
848         \{
849           \textcolor{keywordflow}{if} (tmpMinBandwidth == 0)
850             \{
851               tmpFfrRbStartOffset = index;
852             \}
853           tmpMinBandwidth++;
854         \}
855       index++;
856     \}
857 
858   \textcolor{keywordflow}{if} (tmpMinBandwidth > maxContinuousUlBandwidth)
859     \{
860       maxContinuousUlBandwidth = tmpMinBandwidth;
861       ffrRbStartOffset = tmpFfrRbStartOffset;
862     \}
863 
864   \hyperlink{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
865   uint16\_t rbStart = 0;
866   rbStart = ffrRbStartOffset;
867   std::vector <struct RachListElement\_s>::iterator itRach;
868   \textcolor{keywordflow}{for} (itRach = \hyperlink{classns3_1_1CqaFfMacScheduler_a8acbb79b06264ecc897614a20f77a3ad}{m\_rachList}.begin (); itRach != \hyperlink{classns3_1_1CqaFfMacScheduler_a8acbb79b06264ecc897614a20f77a3ad}{m\_rachList}.end (); itRach++)
869     \{
870       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetTbSizeFromMcs (\hyperlink{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{m\_ulGrantMcs}, 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) > (*itRach).m\_estimatedSize, \textcolor{stringliteral}{" Default UL
       Grant MCS does not allow to send RACH messages"});
871       BuildRarListElement\_s newRar;
872       newRar.m\_rnti = (*itRach).m\_rnti;
873       \textcolor{comment}{// DL-RACH Allocation}
874       \textcolor{comment}{// Ideal: no needs of configuring m\_dci}
875       \textcolor{comment}{// UL-RACH Allocation}
876       newRar.m\_grant.m\_rnti = newRar.m\_rnti;
877       newRar.m\_grant.m\_mcs = \hyperlink{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{m\_ulGrantMcs};
878       uint16\_t rbLen = 1;
879       uint16\_t tbSizeBits = 0;
880       \textcolor{comment}{// find lowest TB size that fits UL grant estimated size}
881       \textcolor{keywordflow}{while} ((tbSizeBits < (*itRach).m\_estimatedSize) && (rbStart + rbLen < (ffrRbStartOffset + 
      maxContinuousUlBandwidth)))
882         \{
883           rbLen++;
884           tbSizeBits = \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetTbSizeFromMcs (\hyperlink{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{m\_ulGrantMcs}, rbLen);
885         \}
886       \textcolor{keywordflow}{if} (tbSizeBits < (*itRach).m\_estimatedSize)
887         \{
888           \textcolor{comment}{// no more allocation space: finish allocation}
889           \textcolor{keywordflow}{break};
890         \}
891       newRar.m\_grant.m\_rbStart = rbStart;
892       newRar.m\_grant.m\_rbLen = rbLen;
893       newRar.m\_grant.m\_tbSize = tbSizeBits / 8;
894       newRar.m\_grant.m\_hopping = \textcolor{keyword}{false};
895       newRar.m\_grant.m\_tpc = 0;
896       newRar.m\_grant.m\_cqiRequest = \textcolor{keyword}{false};
897       newRar.m\_grant.m\_ulDelay = \textcolor{keyword}{false};
898       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL grant allocated to RNTI "} << (*itRach).m\_rnti << \textcolor{stringliteral}{" rbStart "} << 
      rbStart << \textcolor{stringliteral}{" rbLen "} << rbLen << \textcolor{stringliteral}{" MCS "} << \hyperlink{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{m\_ulGrantMcs} << \textcolor{stringliteral}{" tbSize "} << newRar.m\_grant.
      m\_tbSize);
899       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < rbStart + rbLen; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
900         \{
901           \hyperlink{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{m\_rachAllocationMap}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = (*itRach).m\_rnti;
902         \}
903       
904       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\_harqOn} == \textcolor{keyword}{true})
905         \{
906           \textcolor{comment}{// generate UL-DCI for HARQ retransmissions}
907           UlDciListElement\_s uldci;
908           uldci.m\_rnti = newRar.m\_rnti;
909           uldci.m\_rbLen = rbLen;
910           uldci.m\_rbStart = rbStart;
911           uldci.m\_mcs = \hyperlink{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{m\_ulGrantMcs};
912           uldci.m\_tbSize = tbSizeBits / 8;
913           uldci.m\_ndi = 1;
914           uldci.m\_cceIndex = 0;
915           uldci.m\_aggrLevel = 1;
916           uldci.m\_ueTxAntennaSelection = 3; \textcolor{comment}{// antenna selection OFF}
917           uldci.m\_hopping = \textcolor{keyword}{false};
918           uldci.m\_n2Dmrs = 0;
919           uldci.m\_tpc = 0; \textcolor{comment}{// no power control}
920           uldci.m\_cqiRequest = \textcolor{keyword}{false}; \textcolor{comment}{// only period CQI at this stage}
921           uldci.m\_ulIndex = 0; \textcolor{comment}{// TDD parameter}
922           uldci.m\_dai = 1; \textcolor{comment}{// TDD parameter}
923           uldci.m\_freqHopping = 0;
924           uldci.m\_pdcchPowerOffset = 0; \textcolor{comment}{// not used}
925 
926           uint8\_t harqId = 0;
927           std::map <uint16\_t, uint8\_t>::iterator itProcId;
928           itProcId = \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.find (uldci.m\_rnti);
929           \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.end ())
930             \{
931               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << uldci.m\_rnti);
932             \}
933           harqId = (*itProcId).second;
934           std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.find (uldci.m\_rnti);
935           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.end ())
936             \{
937               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in UL DCI HARQ buffer for RNTI "} << 
      uldci.m\_rnti);
938             \}
939           (*itDci).second.at (harqId) = uldci;
940         \}
941       
942       rbStart = rbStart + rbLen;
943       ret.m\_buildRarList.push\_back (newRar);
944     \}
945   \hyperlink{classns3_1_1CqaFfMacScheduler_a8acbb79b06264ecc897614a20f77a3ad}{m\_rachList}.clear ();
946 
947 
948   \textcolor{comment}{// Process DL HARQ feedback}
949   \hyperlink{classns3_1_1CqaFfMacScheduler_a09c54657692d4e9d6c57185b1f16ad14}{RefreshHarqProcesses} ();
950   \textcolor{comment}{// retrieve past HARQ retx buffered}
951   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.size () > 0)
952     \{
953       \textcolor{keywordflow}{if} (params.m\_dlInfoList.size () > 0)
954         \{
955           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Received DL-HARQ feedback"});
956           \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.insert (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.end (),
       params.m\_dlInfoList.begin (), params.m\_dlInfoList.end ());
957         \}
958     \}
959   \textcolor{keywordflow}{else}
960     \{
961       \textcolor{keywordflow}{if} (params.m\_dlInfoList.size () > 0)
962         \{
963           \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered} = params.m\_dlInfoList;
964         \}
965     \}
966   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\_harqOn} == \textcolor{keyword}{false})
967     \{
968       \textcolor{comment}{// Ignore HARQ feedback}
969       \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.clear ();
970     \}
971   std::vector <struct DlInfoListElement\_s> dlInfoListUntxed;
972   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
973     \{
974       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find (
      \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
975       \textcolor{keywordflow}{if} (itRnti != rntiAllocated.end ())
976         \{
977           \textcolor{comment}{// RNTI already allocated for retx}
978           \textcolor{keywordflow}{continue};
979         \}
980       uint8\_t nLayers = \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.size ();
981       std::vector <bool> retx;
982       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Processing DLHARQ feedback"});
983       \textcolor{keywordflow}{if} (nLayers == 1)
984         \{
985           retx.push\_back (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (0) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
986           retx.push\_back (\textcolor{keyword}{false});
987         \}
988       \textcolor{keywordflow}{else}
989         \{
990           retx.push\_back (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (0) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
991           retx.push\_back (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (1) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
992         \}
993       \textcolor{keywordflow}{if} (retx.at (0) || retx.at (1))
994         \{
995           \textcolor{comment}{// retrieve HARQ process information}
996           uint16\_t rnti = \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
997           uint8\_t harqId = \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId;
998           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ retx RNTI "} << rnti << \textcolor{stringliteral}{" harqId "} << (uint16\_t)harqId);
999           std::map <uint16\_t, DlHarqProcessesDciBuffer\_t>::iterator itHarq = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\_dlHarqProcessesDciBuffer}.find (rnti);
1000           \textcolor{keywordflow}{if} (itHarq == \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\_dlHarqProcessesDciBuffer}.end ())
1001             \{
1002               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << rnti);
1003             \}
1004 
1005           DlDciListElement\_s dci = (*itHarq).second.at (harqId);
1006           \textcolor{keywordtype}{int} rv = 0;
1007           \textcolor{keywordflow}{if} (dci.m\_rv.size () == 1)
1008             \{
1009               rv = dci.m\_rv.at (0);
1010             \}
1011           \textcolor{keywordflow}{else}
1012             \{
1013               rv = (dci.m\_rv.at (0) > dci.m\_rv.at (1) ? dci.m\_rv.at (0) : dci.m\_rv.at (1));
1014             \}
1015 
1016           \textcolor{keywordflow}{if} (rv == 3)
1017             \{
1018               \textcolor{comment}{// maximum number of retx reached -> drop process}
1019               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Maximum number of retransmissions reached -> drop process"});
1020               std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator it = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.find (rnti);
1021               \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.end ())
1022                 \{
1023                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1024                 \}
1025               (*it).second.at (harqId) = 0;
1026               std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.find (rnti);
1027               \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
1028                 \{
1029                   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << 
      \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1030                 \}
1031               \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.size (); k++)
1032                 \{
1033                   (*itRlcPdu).second.at (k).at (harqId).clear ();
1034                 \}
1035               \textcolor{keywordflow}{continue};
1036             \}
1037           \textcolor{comment}{// check the feasibility of retransmitting on the same RBGs}
1038           \textcolor{comment}{// translate the DCI to Spectrum framework}
1039           std::vector <int> dciRbg;
1040           uint32\_t mask = 0x1;
1041           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Original RBGs "} << dci.m\_rbBitmap << \textcolor{stringliteral}{" rnti "} << dci.m\_rnti);
1042           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 32; j++)
1043             \{
1044               \textcolor{keywordflow}{if} (((dci.m\_rbBitmap & mask) >> j) == 1)
1045                 \{
1046                   dciRbg.push\_back (j);
1047                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t"} << j);
1048                 \}
1049               mask = (mask << 1);
1050             \}
1051           \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
1052           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < dciRbg.size (); j++)
1053             \{
1054               \textcolor{keywordflow}{if} (rbgMap.at (dciRbg.at (j)) == \textcolor{keyword}{true})
1055                 \{
1056                   free = \textcolor{keyword}{false};
1057                   \textcolor{keywordflow}{break};
1058                 \}
1059             \}
1060           \textcolor{keywordflow}{if} (free)
1061             \{
1062               \textcolor{comment}{// use the same RBGs for the retx}
1063               \textcolor{comment}{// reserve RBGs}
1064               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < dciRbg.size (); j++)
1065                 \{
1066                   rbgMap.at (dciRbg.at (j)) = \textcolor{keyword}{true};
1067                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"RBG "} << dciRbg.at (j) << \textcolor{stringliteral}{" assigned"});
1068                   rbgAllocatedNum++;
1069                 \}
1070 
1071               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Send retx in the same RBGs"});
1072             \}
1073           \textcolor{keywordflow}{else}
1074             \{
1075               \textcolor{comment}{// find RBGs for sending HARQ retx}
1076               uint8\_t j = 0;
1077               uint8\_t rbgId = (dciRbg.at (dciRbg.size () - 1) + 1) % numberOfRBGs;
1078               uint8\_t startRbg = dciRbg.at (dciRbg.size () - 1);
1079               std::vector <bool> rbgMapCopy = rbgMap;
1080               \textcolor{keywordflow}{while} ((j < dciRbg.size ())&&(startRbg != rbgId))
1081                 \{
1082                   \textcolor{keywordflow}{if} (rbgMapCopy.at (rbgId) == \textcolor{keyword}{false})
1083                     \{
1084                       rbgMapCopy.at (rbgId) = \textcolor{keyword}{true};
1085                       dciRbg.at (j) = rbgId;
1086                       j++;
1087                     \}
1088                   rbgId = (rbgId + 1) % numberOfRBGs;
1089                 \}
1090               \textcolor{keywordflow}{if} (j == dciRbg.size ())
1091                 \{
1092                   \textcolor{comment}{// find new RBGs -> update DCI map}
1093                   uint32\_t rbgMask = 0;
1094                   \textcolor{keywordflow}{for} (uint16\_t k = 0; k < dciRbg.size (); k++)
1095                     \{
1096                       rbgMask = rbgMask + (0x1 << dciRbg.at (k));
1097                       rbgAllocatedNum++;
1098                     \}
1099                   dci.m\_rbBitmap = rbgMask;
1100                   rbgMap = rbgMapCopy;
1101                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Move retx in RBGs "} << dciRbg.size ());
1102                 \}
1103               \textcolor{keywordflow}{else}
1104                 \{
1105                   \textcolor{comment}{// HARQ retx cannot be performed on this TTI -> store it}
1106                   dlInfoListUntxed.push\_back (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
1107                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" No resource for this retx -> buffer it"});
1108                 \}
1109             \}
1110           \textcolor{comment}{// retrieve RLC PDU list for retx TBsize and update DCI}
1111           BuildDataListElement\_s newEl;
1112           std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.find (rnti);
1113           \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
1114             \{
1115               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << rnti);
1116             \}
1117           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayers; j++)
1118             \{
1119               \textcolor{keywordflow}{if} (retx.at (j))
1120                 \{
1121                   \textcolor{keywordflow}{if} (j >= dci.m\_ndi.size ())
1122                     \{
1123                       \textcolor{comment}{// for avoiding errors in MIMO transient phases}
1124                       dci.m\_ndi.push\_back (0);
1125                       dci.m\_rv.push\_back (0);
1126                       dci.m\_mcs.push\_back (0);
1127                       dci.m\_tbsSize.push\_back (0);
1128                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" no txed (MIMO
       transition)"});
1129                     \}
1130                   \textcolor{keywordflow}{else}
1131                     \{
1132                       dci.m\_ndi.at (j) = 0;
1133                       dci.m\_rv.at (j)++;
1134                       (*itHarq).second.at (harqId).m\_rv.at (j)++;
1135                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" RV "} << (uint16\_t)dci.
      m\_rv.at (j));
1136                     \}
1137                 \}
1138               \textcolor{keywordflow}{else}
1139                 \{
1140                   \textcolor{comment}{// empty TB of layer j}
1141                   dci.m\_ndi.at (j) = 0;
1142                   dci.m\_rv.at (j) = 0;
1143                   dci.m\_mcs.at (j) = 0;
1144                   dci.m\_tbsSize.at (j) = 0;
1145                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" no retx"});
1146                 \}
1147             \}
1148           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.at (0).at (dci.m\_harqProcess).size (); k++)
1149             \{
1150               std::vector <struct RlcPduListElement\_s> rlcPduListPerLc;
1151               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayers; j++)
1152                 \{
1153                   \textcolor{keywordflow}{if} (retx.at (j))
1154                     \{
1155                       \textcolor{keywordflow}{if} (j < dci.m\_ndi.size ())
1156                         \{
1157                           rlcPduListPerLc.push\_back ((*itRlcPdu).second.at (j).at (dci.m\_harqProcess).at (k
      ));
1158                         \}
1159                     \}
1160                 \}
1161 
1162               \textcolor{keywordflow}{if} (rlcPduListPerLc.size () > 0)
1163                 \{
1164                   newEl.m\_rlcPduList.push\_back (rlcPduListPerLc);
1165                 \}
1166             \}
1167           newEl.m\_rnti = rnti;
1168           newEl.m\_dci = dci;
1169           (*itHarq).second.at (harqId).m\_rv = dci.m\_rv;
1170           \textcolor{comment}{// refresh timer}
1171           std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itHarqTimer = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.find (rnti);
1172           \textcolor{keywordflow}{if} (itHarqTimer== \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.end ())
1173             \{
1174               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find HARQ timer for RNTI "} << (uint16\_t)rnti);
1175             \}
1176           (*itHarqTimer).second.at (harqId) = 0;
1177           ret.m\_buildDataList.push\_back (newEl);
1178           rntiAllocated.insert (rnti);
1179         \}
1180       \textcolor{keywordflow}{else}
1181         \{
1182           \textcolor{comment}{// update HARQ process status}
1183           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ received ACK for UE "} << 
      \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1184           std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator it = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.find (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1185           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.end ())
1186             \{
1187               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << 
      \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1188             \}
1189           (*it).second.at (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId) = 0;
1190           std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.find (
      \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1191           \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
1192             \{
1193               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << 
      \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1194             \}
1195           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.size (); k++)
1196             \{
1197               (*itRlcPdu).second.at (k).at (\hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId).clear ();
1198             \}
1199         \}
1200     \}
1201   \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered}.clear ();
1202   \hyperlink{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{m\_dlInfoListBuffered} = dlInfoListUntxed;
1203         
1204         
1205   std::map <LteFlowId\_t,struct LogicalChannelConfigListElement\_s>::iterator itLogicalChannels;
1206         
1207   \textcolor{keywordflow}{for} (itLogicalChannels = \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.begin (); 
      itLogicalChannels != \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.end (); itLogicalChannels++)
1208     \{
1209       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find (itLogicalChannels->first.m\_rnti);
1210       \textcolor{keywordflow}{if} ((itRnti != rntiAllocated.end ())||(!\hyperlink{classns3_1_1CqaFfMacScheduler_a166f5717872f7d411d168869881a4518}{HarqProcessAvailability} (
      itLogicalChannels->first.m\_rnti)))
1211         \{
1212           \textcolor{comment}{// UE already allocated for HARQ or without HARQ process available -> drop it}
1213           \textcolor{keywordflow}{if} (itRnti != rntiAllocated.end ())
1214             \{
1215               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI discared for HARQ tx"} << (uint16\_t)(
      itLogicalChannels->first.m\_rnti));
1216             \}
1217           \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1CqaFfMacScheduler_a166f5717872f7d411d168869881a4518}{HarqProcessAvailability} (itLogicalChannels->first.m\_rnti))
1218             \{
1219               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI discared for HARQ id"} << (uint16\_t)(
      itLogicalChannels->first.m\_rnti));
1220             \}
1221           \textcolor{keywordflow}{continue};
1222         \}
1223 
1224 
1225       std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator itRlcBufferReq
       = \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.find (itLogicalChannels->first);
1226       \textcolor{keywordflow}{if} (itRlcBufferReq==\hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end ())
1227         \textcolor{keywordflow}{continue};
1228 
1229       \textcolor{keywordtype}{int} \hyperlink{namespacevisualizer_1_1higcontainer_aa6ad2b76790275bfce7783429beaa23f}{group} = -1;
1230       \textcolor{keywordtype}{int} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay} = 0;
1231 
1232       \textcolor{keywordflow}{if} (itRlcBufferReq->second.m\_rlcRetransmissionQueueSize > 0)
1233         \{
1234           delay = itRlcBufferReq->second.m\_rlcRetransmissionHolDelay;
1235           group = delay/grouping\_parameter;
1236         \}
1237       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}  (itRlcBufferReq->second.m\_rlcTransmissionQueueSize > 0)
1238         \{
1239           delay = itRlcBufferReq->second.m\_rlcTransmissionQueueHolDelay;
1240           group = delay/grouping\_parameter;
1241         \}
1242       \textcolor{keywordflow}{else}
1243         \{
1244           \textcolor{keywordflow}{continue};
1245         \}
1246 
1247       UEtoHOL.insert (std::pair<LteFlowId\_t,int>(itLogicalChannels->first,delay));
1248 
1249       \textcolor{keywordflow}{if} (itLogicalChannels->second.m\_qosBearerType == itLogicalChannels->second.QBT\_NON\_GBR )
1250         \{
1251           \textcolor{keywordflow}{if} (map\_nonGBRHOLgroupToUE.count (group)==0)
1252             \{
1253               std::set<LteFlowId\_t> v;
1254               v.insert (itRlcBufferReq->first);
1255               map\_nonGBRHOLgroupToUE.insert (std::pair<\textcolor{keywordtype}{int},std::set<LteFlowId\_t> >(group,v));
1256             \}
1257           \textcolor{keywordflow}{else}
1258             \{
1259               map\_nonGBRHOLgroupToUE.find (group)->second.insert (itRlcBufferReq->first);
1260             \}
1261         \}
1262       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (itLogicalChannels->second.m\_qosBearerType == itLogicalChannels->second.QBT\_GBR) \{
1263           \textcolor{keywordflow}{if} (map\_GBRHOLgroupToUE.count (group)==0)
1264             \{
1265               std::set<LteFlowId\_t> v;
1266               v.insert (itRlcBufferReq->first);
1267               map\_GBRHOLgroupToUE.insert (std::pair<\textcolor{keywordtype}{int},std::set<LteFlowId\_t> >(group,v));
1268             \}
1269           \textcolor{keywordflow}{else}
1270             \{
1271               map\_GBRHOLgroupToUE.find (group)->second.insert (itRlcBufferReq->first);
1272             \}
1273         \}
1274     \};
1275 
1276 
1277   \textcolor{comment}{// Prepare data for the scheduling mechanism}
1278   \textcolor{comment}{// map: UE, to the amount of traffic they have to transfer}
1279   std::map<LteFlowId\_t, int> UeToAmountOfDataToTransfer;
1280   \textcolor{comment}{//Initialize the map per UE, how much resources is already assigned to the user}
1281   std::map<LteFlowId\_t, int> UeToAmountOfAssignedResources;
1282   \textcolor{comment}{// prepare values to calculate FF metric, this metric will be the same for all flows(logical channels)
       that belong to the same RNTI}
1283   std::map < uint16\_t, uint8\_t > sbCqiSum;
1284 
1285   \textcolor{keywordflow}{for}( std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator itrbr = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.begin ();
1286        itrbr!=\hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end (); itrbr++)
1287     \{
1288 
1289       LteFlowId\_t flowId = itrbr->first;                \textcolor{comment}{// Prepare data for the scheduling mechanism}
1290       \textcolor{comment}{// map: UE, to the amount of traffic they have to transfer}
1291       \textcolor{keywordtype}{int} amountOfDataToTransfer =  8*((int)\hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.find (flowId)->second.
      m\_rlcRetransmissionQueueSize +
1292                                        (int)\hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.find (flowId)->second.
      m\_rlcTransmissionQueueSize);
1293 
1294       UeToAmountOfDataToTransfer.insert (std::pair<LteFlowId\_t,int>(flowId,amountOfDataToTransfer));
1295       UeToAmountOfAssignedResources.insert (std::pair<LteFlowId\_t,int>(flowId,0));
1296 
1297       uint8\_t sum = 0;
1298       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numberOfRBGs; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1299         \{
1300           std::map <uint16\_t,SbMeasResult\_s>::iterator itCqi;
1301           itCqi = \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.find ((*itrbr).first.m\_rnti);
1302           std::map <uint16\_t,uint8\_t>::iterator itTxMode;
1303           itTxMode = \hyperlink{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{m\_uesTxMode}.find ((*itrbr).first.m\_rnti);
1304           \textcolor{keywordflow}{if} (itTxMode == \hyperlink{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{m\_uesTxMode}.end ())
1305             \{
1306               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Transmission Mode info on user "} << (*itrbr).first.m\_rnti);
1307             \}
1308           \textcolor{keywordtype}{int} nLayer = \hyperlink{classns3_1_1TransmissionModesLayers_a31f608b7bfaa77440fe4cb85ad035329}{TransmissionModesLayers::TxMode2LayerNum} (
      (*itTxMode).second);
1309           std::vector <uint8\_t> sbCqis;
1310           \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.end ())
1311             \{
1312               \textcolor{keywordflow}{for} (uint8\_t k = 0; k < nLayer; k++)
1313                 \{
1314                   sbCqis.push\_back (1);                        \textcolor{comment}{// start with lowest value}
1315                 \}
1316             \}
1317           \textcolor{keywordflow}{else}
1318             \{
1319               sbCqis = (*itCqi).second.m\_higherLayerSelected.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbCqi;
1320             \}
1321 
1322           uint8\_t cqi1 = sbCqis.at (0);
1323           uint8\_t cqi2 = 1;
1324           \textcolor{keywordflow}{if} (sbCqis.size () > 1)
1325             \{
1326               cqi2 = sbCqis.at (1);
1327             \}
1328 
1329           uint8\_t sbCqi;
1330           \textcolor{keywordflow}{if} ((cqi1 > 0)||(cqi2 > 0))               \textcolor{comment}{// CQI == 0 means "out of range" (see table 7.2.3-1 of
       36.213)}
1331             \{
1332               \textcolor{keywordflow}{for} (uint8\_t k = 0; k < nLayer; k++)
1333                 \{
1334                   \textcolor{keywordflow}{if} (sbCqis.size () > k)
1335                     \{
1336                       sbCqi = sbCqis.at (k);
1337                     \}
1338                   \textcolor{keywordflow}{else}
1339                     \{
1340                       \textcolor{comment}{// no info on this subband}
1341                       sbCqi = 0;
1342                     \}
1343                   sum += sbCqi;
1344                 \}
1345             \}               \textcolor{comment}{// end if cqi}
1346         \}        \textcolor{comment}{// end of rbgNum}
1347 
1348       sbCqiSum.insert (std::pair<uint16\_t, uint8\_t> ((*itrbr).first.m\_rnti, sum));
1349     \}
1350 
1351   \textcolor{comment}{// availableRBGs - set that contains indexes of available resource block groups}
1352   std::set<int> availableRBGs;
1353   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <  numberOfRBGs; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1354     \{
1355       \textcolor{keywordflow}{if} (rbgMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) == \textcolor{keyword}{false})
1356         \{
1357           availableRBGs.insert (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1358         \}
1359     \}
1360 
1361   \hyperlink{namespacens3_afe18eb1d0bcd25c77f1dcb8cf7648b32}{t\_it\_HOLgroupToUEs} itGBRgroups = map\_GBRHOLgroupToUE.begin ();
1362   \hyperlink{namespacens3_afe18eb1d0bcd25c77f1dcb8cf7648b32}{t\_it\_HOLgroupToUEs} itnonGBRgroups = map\_nonGBRHOLgroupToUE.begin ();
1363 
1364 
1365 
1366   \textcolor{comment}{// while there are more resources available, loop through the users that are grouped by HOL value}
1367   \textcolor{keywordflow}{while} (availableRBGs.size ()>0)
1368     \{
1369       std::set<LteFlowId\_t> vUEs;
1370       \hyperlink{namespacens3_afe18eb1d0bcd25c77f1dcb8cf7648b32}{t\_it\_HOLgroupToUEs} itCurrentGroup;
1371 
1372       \textcolor{keywordflow}{if} (itGBRgroups!=map\_GBRHOLgroupToUE.end ())
1373         \{
1374           itCurrentGroup=itGBRgroups;
1375           itGBRgroups++;
1376         \}
1377       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (itnonGBRgroups!=map\_nonGBRHOLgroupToUE.end ())                  \textcolor{comment}{// if there are no more
       flows with retransmission queue start to scheduler flows with transmission queue}
1378         \{
1379           itCurrentGroup=itnonGBRgroups;
1380           itnonGBRgroups++;
1381         \}
1382       \textcolor{keywordflow}{else}
1383         \{
1384           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Available RBGs:"}<< availableRBGs.size ()<<\textcolor{stringliteral}{"but no users"});
1385           \textcolor{keywordflow}{break};
1386         \}
1387 
1388       \textcolor{keywordflow}{while} (availableRBGs.size ()>0 and itCurrentGroup->second.size ()>0)
1389         \{
1390           \textcolor{keywordtype}{bool} currentRBchecked = \textcolor{keyword}{false};
1391           \textcolor{keywordtype}{int} currentRB = *(availableRBGs.begin ());
1392           std::map<LteFlowId\_t, CQI\_value> UeToCQIValue;
1393           std::map<LteFlowId\_t, double > UeToCoitaMetric;
1394           std::map<LteFlowId\_t, bool> UeHasReachedGBR;
1395           \textcolor{keywordtype}{double} maximumValueMetric = 0;
1396           LteFlowId\_t userWithMaximumMetric;
1397           UeToCQIValue.clear ();
1398           UeToCoitaMetric.clear ();
1399 
1400           \textcolor{comment}{// Iterate through the users and calculate which user will use the best of the current resource
       bloc.end()k and assign to that user.}
1401           \textcolor{keywordflow}{for} (std::set<LteFlowId\_t>::iterator it=itCurrentGroup->second.begin (); it!=itCurrentGroup->
      second.end (); it++)
1402             \{
1403               LteFlowId\_t flowId = *it;
1404               uint8\_t cqi\_value = 1;                           \textcolor{comment}{//higher better, maximum is 15}
1405               \textcolor{keywordtype}{double} coita\_metric = 1;
1406               \textcolor{keywordtype}{double} coita\_sum = 0;
1407               \textcolor{keywordtype}{double} metric = 0;
1408               uint8\_t worstCQIAmongRBGsAllocatedForThisUser = 15;
1409               \textcolor{keywordtype}{int} numberOfRBGAllocatedForThisUser = 0;
1410               LogicalChannelConfigListElement\_s lc = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{m\_ueLogicalChannelsConfigList}.find (flowId)->second;
1411               std::map <uint16\_t,SbMeasResult\_s>::iterator itRntiCQIsMap = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.find (flowId.m\_rnti);
1412 
1413               std::map <uint16\_t, CqasFlowPerf\_t>::iterator itStats;
1414 
1415               \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a91f4de3c794d2a32fae5bcfafd88b6fa}{IsDlRbgAvailableForUe} (currentRB,
       flowId.m\_rnti)) == \textcolor{keyword}{false})
1416                 \{
1417                   \textcolor{keywordflow}{continue};
1418                 \}
1419 
1420               \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.find (flowId.m\_rnti) == 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.end ())
1421                 \{
1422                   \textcolor{keywordflow}{continue};                               \textcolor{comment}{// TO DO:  check if this should be logged and
       how.}
1423                 \}
1424               currentRBchecked = \textcolor{keyword}{true};
1425 
1426               itStats = \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.find (flowId.m\_rnti);
1427               \textcolor{keywordtype}{double} tbr\_weight = (*itStats).second.targetThroughput / (*itStats).second.
      lastAveragedThroughput;
1428               \textcolor{keywordflow}{if} (tbr\_weight < 1.0)
1429                 tbr\_weight = 1.0;
1430 
1431               \textcolor{keywordflow}{if} (itRntiCQIsMap != \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.end ())
1432                 \{
1433                   \textcolor{keywordflow}{for}(std::set<int>::iterator it=availableRBGs.begin (); it!=availableRBGs.end (); it++)
1434                     \{
1435                       \textcolor{keywordflow}{try}
1436                         \{
1437                           \textcolor{keywordtype}{int} val = (itRntiCQIsMap->second.m\_higherLayerSelected.at (*it).m\_sbCqi.at (0));
1438                           \textcolor{keywordflow}{if} (val==0)
1439                             val=1;                                             \textcolor{comment}{//if no info, use minimum}
1440                           \textcolor{keywordflow}{if} (*it == currentRB)
1441                             cqi\_value = val;
1442                           coita\_sum+=val;
1443 
1444                         \}
1445                       \textcolor{keywordflow}{catch}(std::out\_of\_range&)
1446                         \{
1447                           coita\_sum+=1;                                      \textcolor{comment}{//if no info on channel use
       the worst cqi}
1448                           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"No CQI for lcId:"}<<flowId.m\_lcId<<\textcolor{stringliteral}{" rnti:"}<<flowId.
      m\_rnti<<\textcolor{stringliteral}{" at subband:"}<<currentRB);
1449                           \textcolor{comment}{//std::cout<<"\(\backslash\)n No CQI for lcId:.....................................";}
1450                         \}
1451                     \}
1452                   coita\_metric =cqi\_value/coita\_sum;
1453                   UeToCQIValue.insert (std::pair<LteFlowId\_t,CQI\_value>(flowId,cqi\_value));
1454                   UeToCoitaMetric.insert (std::pair<LteFlowId\_t, double>(flowId,coita\_metric));
1455                 \}
1456 
1457               \textcolor{keywordflow}{if} (allocationMapPerRntiPerLCId.find (flowId.m\_rnti)==allocationMapPerRntiPerLCId.end ())
1458                 \{
1459                   worstCQIAmongRBGsAllocatedForThisUser=cqi\_value;
1460                 \}
1461               \textcolor{keywordflow}{else} \{
1462 
1463                   numberOfRBGAllocatedForThisUser = (allocationMapPerRntiPerLCId.find (flowId.m\_rnti)->
      second.size ());
1464 
1465                   \textcolor{keywordflow}{for} (std::multimap <uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc>::iterator itRBG = 
      allocationMapPerRntiPerLCId.find (flowId.m\_rnti)->second.begin ();
1466                        itRBG!=allocationMapPerRntiPerLCId.find (flowId.m\_rnti)->second.end (); itRBG++)
1467                     \{
1468                       qos\_rb\_and\_CQI\_assigned\_to\_lc e = itRBG->second;
1469                       \textcolor{keywordflow}{if} (e.cqi\_value\_for\_lc < worstCQIAmongRBGsAllocatedForThisUser)
1470                         worstCQIAmongRBGsAllocatedForThisUser=e.cqi\_value\_for\_lc;
1471                     \}
1472 
1473                   \textcolor{keywordflow}{if} (cqi\_value < worstCQIAmongRBGsAllocatedForThisUser)
1474                     \{
1475                       worstCQIAmongRBGsAllocatedForThisUser=cqi\_value;
1476                     \}
1477                 \}
1478 
1479               \textcolor{keywordtype}{int} mcsForThisUser = \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetMcsFromCqi (worstCQIAmongRBGsAllocatedForThisUser);
1480               \textcolor{keywordtype}{int} tbSize = \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetTbSizeFromMcs (mcsForThisUser, (numberOfRBGAllocatedForThisUser+1
      ) * rbgSize)/8;                           \textcolor{comment}{// similar to calculation of TB size (size of TB in bytes
       according to table 7.1.7.2.1-1 of 36.213)}
1481 
1482 
1483               \textcolor{keywordtype}{double} achievableRate = (( \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetTbSizeFromMcs (mcsForThisUser, rbgSize)/ 8) / 0.001
      );
1484               \textcolor{keywordtype}{double} pf\_weight = achievableRate / (*itStats).second.secondLastAveragedThroughput;
1485 
1486               UeToAmountOfAssignedResources.find (flowId)->second = tbSize;
1487               FfMacSchedSapProvider::SchedDlRlcBufferReqParameters lcBufferInfo = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.find (flowId)->second;
1488 
1489               \textcolor{keywordflow}{if} (UeToAmountOfDataToTransfer.find (flowId)->second - UeToAmountOfAssignedResources.find (
      flowId)->second < 0)
1490                 \{
1491                   UeHasReachedGBR.insert (std::pair<LteFlowId\_t,bool>(flowId,\textcolor{keyword}{false}));
1492                 \}
1493 
1494               \textcolor{keywordtype}{double} bitRateWithNewRBG = 0;
1495 
1496               \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.find (flowId.m\_rnti)!= 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.end ())                         \textcolor{comment}{// there are some statistics\{}
1497                 \{
1498                   bitRateWithNewRBG = (1.0 - (1.0 / \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow})) * (
      \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.find (flowId.m\_rnti)->second.lastAveragedThroughput) + ((1.0 / 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow}) * (double)(tbSize*1000));
1499                 \}
1500               \textcolor{keywordflow}{else}
1501                 \{
1502                   bitRateWithNewRBG = (1.0 / \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow}) * (\textcolor{keywordtype}{double})(tbSize*1000);
1503                 \}
1504 
1505               \textcolor{keywordflow}{if}(bitRateWithNewRBG > lc.m\_eRabGuaranteedBitrateDl)
1506                 \{
1507                   UeHasReachedGBR.insert (std::pair<LteFlowId\_t,bool>(flowId,\textcolor{keyword}{true}));
1508                 \}
1509               \textcolor{keywordflow}{else}
1510                 \{
1511                   UeHasReachedGBR.insert (std::pair<LteFlowId\_t,bool>(flowId,\textcolor{keyword}{false}));
1512                 \}
1513 
1514               \textcolor{keywordtype}{int} hol = UEtoHOL.find (flowId)->second;
1515 
1516               \textcolor{keywordflow}{if} (hol==0)
1517                 hol=1;
1518 
1519               \textcolor{keywordflow}{if} ( \hyperlink{classns3_1_1CqaFfMacScheduler_aed5322f441dd060a332fe6e34c0d7d7c}{m\_CqaMetric}.compare (\textcolor{stringliteral}{"CqaFf"}) == 0)
1520                 \{
1521                   metric = coita\_metric*tbr\_weight*hol;
1522                 \}
1523               \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_aed5322f441dd060a332fe6e34c0d7d7c}{m\_CqaMetric}.compare (\textcolor{stringliteral}{"CqaPf"}) == 0)
1524                 \{
1525                   metric = tbr\_weight*pf\_weight*hol;
1526                 \}
1527               \textcolor{keywordflow}{else}
1528                 \{
1529                   metric = 1;
1530                 \}
1531 
1532               \textcolor{keywordflow}{if} (metric >= maximumValueMetric)
1533                 \{
1534                   maximumValueMetric = metric;
1535                   userWithMaximumMetric = flowId;
1536                 \}
1537             \}
1538 
1539           \textcolor{keywordflow}{if} (!currentRBchecked)
1540             \{
1541               \textcolor{comment}{// erase current RBG from the list of available RBG}
1542               availableRBGs.erase (currentRB);
1543               \textcolor{keywordflow}{continue};
1544             \}
1545 
1546           qos\_rb\_and\_CQI\_assigned\_to\_lc \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
1547           s.cqi\_value\_for\_lc = UeToCQIValue.find (userWithMaximumMetric)->second;
1548           s.resource\_block\_index = currentRB;
1549 
1550           itMap = allocationMapPerRntiPerLCId.find (userWithMaximumMetric.m\_rnti);
1551 
1552           \textcolor{keywordflow}{if} (itMap == allocationMapPerRntiPerLCId.end ())
1553             \{
1554               std::multimap <uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc> tempMap;
1555               tempMap.insert (std::pair<uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc> (userWithMaximumMetric.
      m\_lcId,s));
1556               allocationMapPerRntiPerLCId.insert (std::pair <uint16\_t, std::multimap
       <uint8\_t,qos\_rb\_and\_CQI\_assigned\_to\_lc> > (userWithMaximumMetric.m\_rnti, tempMap));
1557             \}
1558           \textcolor{keywordflow}{else}
1559             \{
1560               itMap->second.insert (std::pair<uint8\_t,qos\_rb\_and\_CQI\_assigned\_to\_lc> (userWithMaximumMetric
      .m\_lcId,s));
1561             \}
1562 
1563           \textcolor{comment}{// erase current RBG from the list of available RBG}
1564           availableRBGs.erase (currentRB);
1565 
1566           \textcolor{keywordflow}{if} (UeToAmountOfDataToTransfer.find (userWithMaximumMetric)->second <= 
      UeToAmountOfAssignedResources.find (userWithMaximumMetric)->second*tolerance)
1567           \textcolor{comment}{//||(UeHasReachedGBR.find(userWithMaximumMetric)->second == true))}
1568             \{
1569               itCurrentGroup->second.erase (userWithMaximumMetric);
1570             \}
1571 
1572         \}                 \textcolor{comment}{// while there are more users in current group}
1573     \}             \textcolor{comment}{// while there are more groups of users}
1574 
1575 
1576   \textcolor{comment}{// reset TTI stats of users}
1577   std::map <uint16\_t, CqasFlowPerf\_t>::iterator itStats;
1578   \textcolor{keywordflow}{for} (itStats = \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.begin (); itStats != \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.end (); itStats
      ++)
1579     \{
1580       (*itStats).second.lastTtiBytesTransmitted = 0;
1581     \}
1582 
1583   \textcolor{comment}{// 3) Creating the correspondent DCIs (Generate the transmission opportunities by grouping the RBGs of
       the same RNTI)}
1584   \textcolor{comment}{//FfMacSchedSapUser::SchedDlConfigIndParameters ret;}
1585   itMap = allocationMapPerRntiPerLCId.begin ();
1586   \textcolor{keywordtype}{int} counter = 0;
1587   std::map<uint16\_t, double> m\_rnti\_per\_ratio;
1588 
1589   \textcolor{keywordflow}{while} (itMap != allocationMapPerRntiPerLCId.end ())
1590     \{
1591       \textcolor{comment}{// create new BuildDataListElement\_s for this LC}
1592       BuildDataListElement\_s newEl;
1593       newEl.m\_rnti = (*itMap).first;
1594       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Scheduled RNTI:"}<<newEl.m\_rnti);
1595       \textcolor{comment}{// create the DlDciListElement\_s}
1596       DlDciListElement\_s newDci;
1597       std::vector <struct RlcPduListElement\_s> newRlcPduLe;
1598       newDci.m\_rnti = (*itMap).first;
1599       newDci.m\_harqProcess = \hyperlink{classns3_1_1CqaFfMacScheduler_a4aa696a41a5da8bea142e3a83d2880f3}{UpdateHarqProcessId} ((*itMap).first);
1600       uint16\_t lcActives = \hyperlink{classns3_1_1CqaFfMacScheduler_a53e0105147913d9c9800f8bb3d172676}{LcActivePerFlow} (itMap->first);
1601       \textcolor{keywordflow}{if} (lcActives==0)           \textcolor{comment}{// if there is still no buffer report information on any flow}
1602         lcActives = 1;
1603       \textcolor{comment}{// NS\_LOG\_DEBUG (this << "Allocate user " << newEl.m\_rnti << " rbg " << lcActives);}
1604       uint16\_t RgbPerRnti = (*itMap).second.size ();
1605       \textcolor{keywordtype}{double} doubleRBgPerRnti = RgbPerRnti;
1606       \textcolor{keywordtype}{double} doubleRbgNum = numberOfRBGs;
1607       \textcolor{keywordtype}{double} rrRatio = doubleRBgPerRnti/doubleRbgNum;
1608       m\_rnti\_per\_ratio.insert (std::pair<uint16\_t,double>((*itMap).first,rrRatio));
1609       std::map <uint16\_t,SbMeasResult\_s>::iterator itCqi;
1610       itCqi = \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.find ((*itMap).first);
1611       uint8\_t worstCqi = 15;
1612 
1613       \textcolor{comment}{// assign the worst value of CQI that user experienced on any of its subbands}
1614       \textcolor{keywordflow}{for} ( std::multimap <uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc> ::iterator it = (*itMap).second.begin ()
      ; it != (*itMap).second.end (); it++)
1615         \{
1616           \textcolor{keywordflow}{if} (it->second.cqi\_value\_for\_lc<worstCqi)
1617             \{
1618               worstCqi = it->second.cqi\_value\_for\_lc;
1619             \}
1620           counter++;
1621         \}
1622 
1623       newDci.m\_mcs.push\_back (\hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetMcsFromCqi (worstCqi));
1624       \textcolor{keywordtype}{int} tbSize = (\hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetTbSizeFromMcs (newDci.m\_mcs.at (0), RgbPerRnti * rbgSize) / 8);         
        \textcolor{comment}{// (size of TB in bytes according to table 7.1.7.2.1-1 of 36.213)}
1625       newDci.m\_tbsSize.push\_back (tbSize);
1626       newDci.m\_resAlloc = 0;            \textcolor{comment}{// only allocation type 0 at this stage}
1627       newDci.m\_rbBitmap = 0;    \textcolor{comment}{// TBD (32 bit bitmap see 7.1.6 of 36.213)}
1628       uint32\_t rbgMask = 0;
1629       std::multimap <uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc> ::iterator itRBGsPerRNTI;
1630       \textcolor{keywordflow}{for} ( itRBGsPerRNTI = (*itMap).second.begin (); itRBGsPerRNTI != (*itMap).second.end (); 
      itRBGsPerRNTI++)
1631         \{
1632           rbgMask = rbgMask + (0x1 << itRBGsPerRNTI->second.resource\_block\_index);
1633         \}
1634       newDci.m\_rbBitmap = rbgMask;   \textcolor{comment}{// (32 bit bitmap see 7.1.6 of 36.213)}
1635       \textcolor{comment}{// NOTE: In this first version of CqaFfMacScheduler, it is assumed one flow per user.}
1636       \textcolor{comment}{// create the rlc PDUs -> equally divide resources among active LCs}
1637       std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator itBufReq;
1638       \textcolor{keywordflow}{for} (itBufReq = \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.begin (); itBufReq != 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end (); itBufReq++)
1639         \{
1640           \textcolor{keywordflow}{if} (((*itBufReq).first.m\_rnti == (*itMap).first)
1641               && (((*itBufReq).second.m\_rlcTransmissionQueueSize > 0)
1642                   || ((*itBufReq).second.m\_rlcRetransmissionQueueSize > 0)
1643                   || ((*itBufReq).second.m\_rlcStatusPduSize > 0) ))
1644             \{
1645               std::vector <struct RlcPduListElement\_s> newRlcPduLe;
1646               \textcolor{comment}{//for (uint8\_t j = 0; j < nLayer; j++)}
1647               \textcolor{comment}{//\{}
1648               RlcPduListElement\_s newRlcEl;
1649               newRlcEl.m\_logicalChannelIdentity = (*itBufReq).first.m\_lcId;
1650               \textcolor{comment}{// newRlcEl.m\_size = newDci.m\_tbsSize.at (j) / lcActives;}
1651               newRlcEl.m\_size = tbSize / lcActives;
1652               \textcolor{comment}{// NS\_LOG\_INFO (this << " LCID " << (uint32\_t) newRlcEl.m\_logicalChannelIdentity << " size "
       << newRlcEl.m\_size << " layer " << (uint16\_t)j);}
1653               newRlcPduLe.push\_back (newRlcEl);
1654               \hyperlink{classns3_1_1CqaFfMacScheduler_a47bf71ec85b1dda1003d06dccf1bde70}{UpdateDlRlcBufferInfo} (newDci.m\_rnti, newRlcEl.m\_logicalChannelIdentity,
       newRlcEl.m\_size);
1655               \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\_harqOn} == \textcolor{keyword}{true})
1656                 \{
1657                   \textcolor{comment}{// store RLC PDU list for HARQ}
1658                   std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.find ((*itMap).first);
1659                   \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{m\_dlHarqProcessesRlcPduListBuffer}.end ()
      )
1660                     \{
1661                       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} <<
       (*itMap).first);
1662                     \}
1663                   \textcolor{keywordtype}{int} j=0;
1664                   (*itRlcPdu).second.at (j).at (newDci.m\_harqProcess).push\_back (newRlcEl);
1665                 \}
1666               \textcolor{comment}{// \}}
1667               newEl.m\_rlcPduList.push\_back (newRlcPduLe);
1668             \}
1669           \textcolor{keywordflow}{if} ((*itBufReq).first.m\_rnti > (*itMap).first)
1670             \{
1671               \textcolor{keywordflow}{break};
1672             \}
1673         \}
1674       \textcolor{comment}{// for (uint8\_t j = 0; j < nLayer; j++)}
1675       \textcolor{comment}{// \{}
1676       newDci.m\_ndi.push\_back (1);
1677       newDci.m\_rv.push\_back (0);
1678       \textcolor{comment}{//\}}
1679 
1680       newDci.m\_tpc = \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a0021d72c12fdaddd3817ef0eb5a7cd4e}{GetTpc} ((*itMap).first);
1681 
1682       newEl.m\_dci = newDci;
1683 
1684       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\_harqOn} == \textcolor{keyword}{true})
1685         \{
1686           \textcolor{comment}{// store DCI for HARQ}
1687           std::map <uint16\_t, DlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\_dlHarqProcessesDciBuffer}.find (newEl.m\_rnti);
1688           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{m\_dlHarqProcessesDciBuffer}.end ())
1689             \{
1690               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in DCI HARQ buffer for RNTI "} << 
      newEl.m\_rnti);
1691             \}
1692           (*itDci).second.at (newDci.m\_harqProcess) = newDci;
1693           \textcolor{comment}{// refresh timer}
1694           std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itHarqTimer =  
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.find (newEl.m\_rnti);
1695           \textcolor{keywordflow}{if} (itHarqTimer== \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.end ())
1696             \{
1697               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find HARQ timer for RNTI "} << (uint16\_t)newEl.m\_rnti
      );
1698             \}
1699           (*itHarqTimer).second.at (newDci.m\_harqProcess) = 0;
1700         \}
1701 
1702       \textcolor{comment}{// ...more parameters -> ingored in this version}
1703 
1704       ret.m\_buildDataList.push\_back (newEl);
1705       \textcolor{comment}{// update UE stats}
1706       std::map <uint16\_t, CqasFlowPerf\_t>::iterator it;
1707       it = \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.find ((*itMap).first);
1708       \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.end ())
1709         \{
1710           (*it).second.lastTtiBytesTransmitted = tbSize;
1711         \}
1712       \textcolor{keywordflow}{else}
1713         \{
1714           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" No Stats for this allocated UE"});
1715         \}
1716 
1717       itMap++;
1718     \} \textcolor{comment}{// end while allocation}
1719   ret.m\_nrOfPdcchOfdmSymbols = 1;   \textcolor{comment}{// TODO: check correct value according the DCIs txed}
1720 
1721   \textcolor{comment}{// update UEs stats}
1722   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Update UEs statistics"});
1723   \textcolor{keywordflow}{for} (itStats = \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.begin (); itStats != \hyperlink{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{m\_flowStatsDl}.end (); itStats
      ++)
1724     \{
1725       \textcolor{keywordflow}{if} (allocationMapPerRntiPerLCId.find (itStats->first)!= allocationMapPerRntiPerLCId.end ())
1726         \{
1727           (*itStats).second.secondLastAveragedThroughput = ((1.0 - (1 / 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow})) * (*itStats).second.secondLastAveragedThroughput) + ((1 / 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow}) * (double)((*itStats).second.lastTtiBytesTransmitted / 0.001));
1728         \}
1729 
1730       (*itStats).second.totalBytesTransmitted += (*itStats).second.lastTtiBytesTransmitted;
1731       \textcolor{comment}{// update average throughput (see eq. 12.3 of Sec 12.3.1.2 of LTE  The UMTS Long Term Evolution, Ed
       Wiley)}
1732       (*itStats).second.lastAveragedThroughput = ((1.0 - (1.0 / \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow})) * (*itStats).
      second.lastAveragedThroughput) + ((1.0 / \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow}) * (double)((*itStats).second.
      lastTtiBytesTransmitted / 0.001));
1733       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE total bytes "} << (*itStats).second.totalBytesTransmitted);
1734       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE average throughput "} << (*itStats).second.lastAveragedThroughput
      );
1735       (*itStats).second.lastTtiBytesTransmitted = 0;
1736     \}
1737 
1738   \hyperlink{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a28f8484af5a32a45ee6c0e51770d83f7}{SchedDlConfigInd} (ret);
1739 
1740   \textcolor{keywordtype}{int} count\_allocated\_resource\_blocks = 0;
1741   \textcolor{keywordflow}{for} (std::map <uint16\_t, std::multimap <uint8\_t, qos\_rb\_and\_CQI\_assigned\_to\_lc> >::iterator itMap = 
      allocationMapPerRntiPerLCId.begin (); itMap!=allocationMapPerRntiPerLCId.end (); itMap++)
1742     \{
1743       count\_allocated\_resource\_blocks+=itMap->second.size ();
1744     \}
1745   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Allocated RBs:"} << count\_allocated\_resource\_blocks);
1746 
1747   \textcolor{keywordflow}{return};
1748 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15




Here is the caller graph for this function\+:
% FIG 16


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedUlCqiInfoReq(const struct FfMacSchedSapProvider::SchedUlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a99136625091e1b531f939cb18f780689}{}\label{classns3_1_1CqaFfMacScheduler_a99136625091e1b531f939cb18f780689}

\begin{DoxyCode}
2322 \{
2323   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2324 \textcolor{comment}{// retrieve the allocation for this subframe}
2325   \textcolor{keywordflow}{switch} (\hyperlink{classns3_1_1FfMacScheduler_adae16e66a1c4231da80a1221297442cf}{m\_ulCqiFilter})
2326     \{
2327     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52af2e0df473ba2c8f9cb131cb760591aed}{FfMacScheduler::SRS\_UL\_CQI}:
2328       \{
2329         \textcolor{comment}{// filter all the CQIs that are not SRS based}
2330         \textcolor{keywordflow}{if} (params.m\_ulCqi.m\_type != \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af4b6dba4243636562c910c4d4761dd7e}{UlCqi\_s::SRS})
2331           \{
2332             \textcolor{keywordflow}{return};
2333           \}
2334       \}
2335       \textcolor{keywordflow}{break};
2336     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52a4a833bc779439b15bd904e1dd8eaa563}{FfMacScheduler::PUSCH\_UL\_CQI}:
2337       \{
2338         \textcolor{comment}{// filter all the CQIs that are not SRS based}
2339         \textcolor{keywordflow}{if} (params.m\_ulCqi.m\_type != \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a9716b20a3095c473ae3fde1eb5d0bb63}{UlCqi\_s::PUSCH})
2340           \{
2341             \textcolor{keywordflow}{return};
2342           \}
2343       \}
2344     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52a84059a597c72335f0a5963c3efcbda71}{FfMacScheduler::ALL\_UL\_CQI}:
2345       \textcolor{keywordflow}{break};
2346 
2347     \textcolor{keywordflow}{default}:
2348       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unknown UL CQI type"});
2349     \}
2350 
2351   \textcolor{keywordflow}{switch} (params.m\_ulCqi.m\_type)
2352     \{
2353     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a9716b20a3095c473ae3fde1eb5d0bb63}{UlCqi\_s::PUSCH}:
2354       \{
2355         std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap;
2356         std::map <uint16\_t, std::vector <double> >::iterator itCqi;
2357         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Collect PUSCH CQIs of Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{"
       subframe no. "} << (0xF & params.m\_sfnSf));
2358         itMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}{m\_allocationMaps}.find (params.m\_sfnSf);
2359         \textcolor{keywordflow}{if} (itMap == \hyperlink{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}{m\_allocationMaps}.end ())
2360           \{
2361             \textcolor{keywordflow}{return};
2362           \}
2363         \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < (*itMap).second.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2364           \{
2365             \textcolor{comment}{// convert from fixed point notation Sxxxxxxxxxxx.xxx to double}
2366             \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2367             itCqi = \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.find ((*itMap).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2368             \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.end ())
2369               \{
2370                 \textcolor{comment}{// create a new entry}
2371                 std::vector <double> newCqi;
2372                 \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2373                   \{
2374                     \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == j)
2375                       \{
2376                         newCqi.push\_back (sinr);
2377                       \}
2378                     \textcolor{keywordflow}{else}
2379                       \{
2380                         \textcolor{comment}{// initialize with NO\_SINR value.}
2381                         newCqi.push\_back (\hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR});
2382                       \}
2383 
2384                   \}
2385                 \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.insert (std::pair <uint16\_t, std::vector <double> > ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), newCqi));
2386                 \textcolor{comment}{// generate correspondent timer}
2387                 \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\_ueCqiTimers}.insert (std::pair <uint16\_t, uint32\_t > ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold}));
2388               \}
2389             \textcolor{keywordflow}{else}
2390               \{
2391                 \textcolor{comment}{// update the value}
2392                 (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = sinr;
2393                 \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << (*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) << \textcolor{stringliteral}{" RB "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" SINR "} << sinr);
2394                 \textcolor{comment}{// update correspondent timer}
2395                 std::map <uint16\_t, uint32\_t>::iterator itTimers;
2396                 itTimers = \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\_ueCqiTimers}.find ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2397                 (*itTimers).second = \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold};
2398 
2399               \}
2400 
2401           \}
2402         \textcolor{comment}{// remove obsolete info on allocation}
2403         \hyperlink{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}{m\_allocationMaps}.erase (itMap);
2404       \}
2405       \textcolor{keywordflow}{break};
2406     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af4b6dba4243636562c910c4d4761dd7e}{UlCqi\_s::SRS}:
2407       \{
2408         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Collect SRS CQIs of Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{"
       subframe no. "} << (0xF & params.m\_sfnSf));
2409         \textcolor{comment}{// get the RNTI from vendor specific parameters}
2410         uint16\_t rnti = 0;
2411         \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (params.m\_vendorSpecificList.size () > 0);
2412         \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_vendorSpecificList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2413           \{
2414             \textcolor{keywordflow}{if} (params.m\_vendorSpecificList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_type == \hyperlink{lte-vendor-specific-parameters_8h_a3b5e6e766032ab4a8e374a1cfd237a26}{SRS\_CQI\_RNTI\_VSP})
2415               \{
2416                 Ptr<SrsCqiRntiVsp> vsp = DynamicCast<SrsCqiRntiVsp> (params.m\_vendorSpecificList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_value);
2417                 rnti = vsp->GetRnti ();
2418               \}
2419           \}
2420         std::map <uint16\_t, std::vector <double> >::iterator itCqi;
2421         itCqi = \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.find (rnti);
2422         \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.end ())
2423           \{
2424             \textcolor{comment}{// create a new entry}
2425             std::vector <double> newCqi;
2426             \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2427               \{
2428                 \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (j));
2429                 newCqi.push\_back (sinr);
2430                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" new SRS-CQI for RB  "} << j << \textcolor{stringliteral}{" value
       "} << sinr);
2431 
2432               \}
2433             \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.insert (std::pair <uint16\_t, std::vector <double> > (rnti, newCqi));
2434             \textcolor{comment}{// generate correspondent timer}
2435             \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\_ueCqiTimers}.insert (std::pair <uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold}));
2436           \}
2437         \textcolor{keywordflow}{else}
2438           \{
2439             \textcolor{comment}{// update the values}
2440             \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2441               \{
2442                 \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (j));
2443                 (*itCqi).second.at (j) = sinr;
2444                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" update SRS-CQI for RB  "} << j << \textcolor{stringliteral}{"
       value "} << sinr);
2445               \}
2446             \textcolor{comment}{// update correspondent timer}
2447             std::map <uint16\_t, uint32\_t>::iterator itTimers;
2448             itTimers = \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\_ueCqiTimers}.find (rnti);
2449             (*itTimers).second = \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold};
2450 
2451           \}
2452 
2453 
2454       \}
2455       \textcolor{keywordflow}{break};
2456     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a05ca6554bc6fcd96a0a51fbaa8e794c7}{UlCqi\_s::PUCCH\_1}:
2457     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a35664b4bda6f1cd6acfe9edc84c7571d}{UlCqi\_s::PUCCH\_2}:
2458     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af93f36792cb1eed08f6119e4abfe58e8}{UlCqi\_s::PRACH}:
2459       \{
2460         \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"PfFfMacScheduler supports only PUSCH and SRS UL-CQIs"});
2461       \}
2462       \textcolor{keywordflow}{break};
2463     \textcolor{keywordflow}{default}:
2464       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unknown type of UL-CQI"});
2465     \}
2466   \textcolor{keywordflow}{return};
2467 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17




Here is the caller graph for this function\+:
% FIG 18


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}}
\index{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters \&params)}{DoSchedUlMacCtrlInfoReq(const struct FfMacSchedSapProvider::SchedUlMacCtrlInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_acbcb167996fa60addf6405660eb8858b}{}\label{classns3_1_1CqaFfMacScheduler_acbcb167996fa60addf6405660eb8858b}

\begin{DoxyCode}
2278 \{
2279   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2280 
2281   std::map <uint16\_t,uint32\_t>::iterator it;
2282 
2283   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_macCeList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2284     \{
2285       \textcolor{keywordflow}{if} ( params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_macCeType == \hyperlink{structns3_1_1MacCeListElement__s_a270a6526dfc7da02e9dc91823c290f6bac50796b01160b1825ec34efa1ad9f051}{MacCeListElement\_s::BSR} )
2286         \{
2287           \textcolor{comment}{// buffer status report}
2288           \textcolor{comment}{// note that this scheduler does not differentiate the}
2289           \textcolor{comment}{// allocation according to which LCGs have more/less bytes}
2290           \textcolor{comment}{// to send.}
2291           \textcolor{comment}{// Hence the BSR of different LCGs are just summed up to get}
2292           \textcolor{comment}{// a total queue size that is used for allocation purposes.}
2293 
2294           uint32\_t buffer = 0;
2295           \textcolor{keywordflow}{for} (uint8\_t lcg = 0; lcg < 4; ++lcg)
2296             \{
2297               uint8\_t bsrId = params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_macCeValue.m\_bufferStatus.at (lcg);
2298               buffer += \hyperlink{classns3_1_1BufferSizeLevelBsr_a67fc905f267ed8ac5a617fe229699122}{BufferSizeLevelBsr::BsrId2BufferSize} (bsrId);
2299             \}
2300 
2301           uint16\_t rnti = params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
2302           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"RNTI="} << rnti << \textcolor{stringliteral}{" buffer="} << buffer);
2303           it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.find (rnti);
2304           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end ())
2305             \{
2306               \textcolor{comment}{// create the new entry}
2307               \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, buffer));
2308             \}
2309           \textcolor{keywordflow}{else}
2310             \{
2311               \textcolor{comment}{// update the buffer size value}
2312               (*it).second = buffer;
2313             \}
2314         \}
2315     \}
2316 
2317   \textcolor{keywordflow}{return};
2318 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19




Here is the caller graph for this function\+:
% FIG 20


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}}
\index{Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Noise\+Interference\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters \&params)}{DoSchedUlNoiseInterferenceReq(const struct FfMacSchedSapProvider::SchedUlNoiseInterferenceReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Noise\+Interference\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a4d05d53b8919349eaf5399f0a0049cf1}{}\label{classns3_1_1CqaFfMacScheduler_a4d05d53b8919349eaf5399f0a0049cf1}

\begin{DoxyCode}
2264 \{
2265   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2266   \textcolor{keywordflow}{return};
2267 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 21


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}}
\index{Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Sr\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters \&params)}{DoSchedUlSrInfoReq(const struct FfMacSchedSapProvider::SchedUlSrInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Sr\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a14bd70c9b3bf629d64194171bdc00ce1}{}\label{classns3_1_1CqaFfMacScheduler_a14bd70c9b3bf629d64194171bdc00ce1}

\begin{DoxyCode}
2271 \{
2272   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2273   \textcolor{keywordflow}{return};
2274 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 22


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}}
\index{Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters \&params)}{DoSchedUlTriggerReq(const struct FfMacSchedSapProvider::SchedUlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a8f3fcee098da3381bf6383f876d80da9}{}\label{classns3_1_1CqaFfMacScheduler_a8f3fcee098da3381bf6383f876d80da9}

\begin{DoxyCode}
1855 \{
1856   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL - Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{" subframe no. "} 
      << (0xF & params.m\_sfnSf) << \textcolor{stringliteral}{" size "} << params.m\_ulInfoList.size ());
1857 
1858   \hyperlink{classns3_1_1CqaFfMacScheduler_ad121d8c53a2aa28532e4ce32682d0dd2}{RefreshUlCqiMaps} ();
1859   \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a14e6bcaf7db6afcb42f75122717313b1}{ReportUlCqiInfo} (\hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi});
1860 
1861   \textcolor{comment}{// Generate RBs map}
1862   FfMacSchedSapUser::SchedUlConfigIndParameters ret;
1863   std::vector <bool> rbMap;
1864   uint16\_t rbAllocatedNum = 0;
1865   std::set <uint16\_t> rntiAllocated;
1866   std::vector <uint16\_t> rbgAllocationMap;
1867   \textcolor{comment}{// update with RACH allocation map}
1868   rbgAllocationMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{m\_rachAllocationMap};
1869   \textcolor{comment}{//rbgAllocationMap.resize (m\_cschedCellConfig.m\_ulBandwidth, 0);}
1870   \hyperlink{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{m\_rachAllocationMap}.clear ();
1871   \hyperlink{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
1872 
1873   rbMap.resize (\hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, \textcolor{keyword}{false});
1874 
1875   rbMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_aafd23b22a27ec83e03d54795c122d175}{GetAvailableUlRbg} ();
1876 
1877   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = rbMap.begin (); it != rbMap.end (); it++)
1878     \{
1879       \textcolor{keywordflow}{if} ((*it) == true )
1880         \{
1881           rbAllocatedNum++;
1882         \}
1883     \}
1884 
1885   uint8\_t minContinuousUlBandwidth = \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->
      \hyperlink{classns3_1_1LteFfrSapProvider_a78c8a0c801d8a7d4f2e853f5138fd577}{GetMinContinuousUlBandwidth} ();
1886   uint8\_t ffrUlBandwidth = \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocatedNum
      ;
1887 
1888   \textcolor{comment}{// remove RACH allocation}
1889   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1890     \{
1891       \textcolor{keywordflow}{if} (rbgAllocationMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) != 0)
1892         \{
1893           rbMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = \textcolor{keyword}{true};
1894           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Allocated for RACH "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1895         \}
1896     \}
1897 
1898 
1899   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\_harqOn} == \textcolor{keyword}{true})
1900     \{
1901       \textcolor{comment}{//   Process UL HARQ feedback}
1902       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_ulInfoList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1903         \{
1904           \textcolor{keywordflow}{if} (params.m\_ulInfoList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_receptionStatus == 
      \hyperlink{structns3_1_1UlInfoListElement__s_a2a4dff5145d25c81086660e991db6f61a98aed738fd24811d3461668e394a53c8}{UlInfoListElement\_s::NotOk})
1905             \{
1906               \textcolor{comment}{// retx correspondent block: retrieve the UL-DCI}
1907               uint16\_t rnti = params.m\_ulInfoList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1908               std::map <uint16\_t, uint8\_t>::iterator itProcId = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.find (rnti);
1909               \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.end ())
1910                 \{
1911                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1912                 \}
1913               uint8\_t harqId = (uint8\_t)((*itProcId).second - \hyperlink{lte-common_8h_a275321ee206f130c3ddc81fcdaa13cfd}{HARQ\_PERIOD}) % 
      \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
1914               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-HARQ retx RNTI "} << rnti << \textcolor{stringliteral}{" harqId "} << (uint16\_t)
      harqId << \textcolor{stringliteral}{" i "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" size "}  << params.m\_ulInfoList.size ());
1915               std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itHarq = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.find (rnti);
1916               \textcolor{keywordflow}{if} (itHarq == \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.end ())
1917                 \{
1918                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1919                   \textcolor{keywordflow}{continue};
1920                 \}
1921               UlDciListElement\_s dci = (*itHarq).second.at (harqId);
1922               std::map <uint16\_t, UlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\_ulHarqProcessesStatus}.find (rnti);
1923               \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\_ulHarqProcessesStatus}.end ())
1924                 \{
1925                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1926                 \}
1927               \textcolor{keywordflow}{if} ((*itStat).second.at (harqId) >= 3)
1928                 \{
1929                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Max number of retransmissions reached (UL)-> drop process"});
1930                   \textcolor{keywordflow}{continue};
1931                 \}
1932               \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
1933 
1934               \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = dci.m\_rbStart; j < dci.m\_rbStart + dci.m\_rbLen; j++)
1935                 \{
1936                   \textcolor{keywordflow}{if} (rbMap.at (j) == \textcolor{keyword}{true})
1937                     \{
1938                       free = \textcolor{keyword}{false};
1939                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" BUSY "} << j);
1940                     \}
1941                 \}
1942               \textcolor{keywordflow}{if} (free)
1943                 \{
1944                   \textcolor{comment}{// retx on the same RBs}
1945                   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = dci.m\_rbStart; j < dci.m\_rbStart + dci.m\_rbLen; j++)
1946                     \{
1947                       rbMap.at (j) = \textcolor{keyword}{true};
1948                       rbgAllocationMap.at (j) = dci.m\_rnti;
1949                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tRB "} << j);
1950                       rbAllocatedNum++;
1951                     \}
1952                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Send retx in the same RBs "} << (uint16\_t)dci.m\_rbStart 
      << \textcolor{stringliteral}{" to "} << dci.m\_rbStart + dci.m\_rbLen << \textcolor{stringliteral}{" RV "} << (*itStat).second.at (harqId) + 1);
1953                 \}
1954               \textcolor{keywordflow}{else}
1955                 \{
1956                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Cannot allocate retx due to RACH allocations for UE "} << rnti);
1957                   \textcolor{keywordflow}{continue};
1958                 \}
1959               dci.m\_ndi = 0;
1960               \textcolor{comment}{// Update HARQ buffers with new HarqId}
1961               (*itStat).second.at ((*itProcId).second) = (*itStat).second.at (harqId) + 1;
1962               (*itStat).second.at (harqId) = 0;
1963               (*itHarq).second.at ((*itProcId).second) = dci;
1964               ret.m\_dciList.push\_back (dci);
1965               rntiAllocated.insert (dci.m\_rnti);
1966             \}
1967           \textcolor{keywordflow}{else}
1968             \{
1969               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ-ACK feedback from RNTI "} << params.m\_ulInfoList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1970             \}
1971         \}
1972     \}
1973 
1974   std::map <uint16\_t,uint32\_t>::iterator it;
1975   \textcolor{keywordtype}{int} nflows = 0;
1976 
1977   \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.begin (); it != \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end (); it++)
1978     \{
1979       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
1980       \textcolor{comment}{// select UEs with queues not empty and not yet allocated for HARQ}
1981       \textcolor{keywordflow}{if} (((*it).second > 0)&&(itRnti == rntiAllocated.end ()))
1982         \{
1983           nflows++;
1984         \}
1985     \}
1986 
1987   \textcolor{keywordflow}{if} (nflows == 0)
1988     \{
1989       \textcolor{keywordflow}{if} (ret.m\_dciList.size () > 0)
1990         \{
1991           \hyperlink{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}{m\_allocationMaps}.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.
      m\_sfnSf, rbgAllocationMap));
1992           \hyperlink{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a1b89636256701a84d990db7db8aea874}{SchedUlConfigInd} (ret);
1993         \}
1994 
1995       \textcolor{keywordflow}{return};  \textcolor{comment}{// no flows to be scheduled}
1996     \}
1997 
1998 
1999   \textcolor{comment}{// Divide the remaining resources equally among the active users starting from the subsequent one served
       last scheduling trigger}
2000   uint16\_t tempRbPerFlow = (ffrUlBandwidth) / (nflows + rntiAllocated.size ());
2001   uint16\_t rbPerFlow = (minContinuousUlBandwidth < tempRbPerFlow) ? minContinuousUlBandwidth : 
      tempRbPerFlow;
2002 
2003   \textcolor{keywordflow}{if} (rbPerFlow < 3)
2004     \{
2005       rbPerFlow = 3;  \textcolor{comment}{// at least 3 rbg per flow (till available resource) to ensure TxOpportunity >= 7
       bytes}
2006     \}
2007   \textcolor{keywordtype}{int} rbAllocated = 0;
2008 
2009   std::map <uint16\_t, CqasFlowPerf\_t>::iterator itStats;
2010   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl} != 0)
2011     \{
2012       \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.begin (); it != \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end (); it++)
2013         \{
2014           \textcolor{keywordflow}{if} ((*it).first == \hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl})
2015             \{
2016               \textcolor{keywordflow}{break};
2017             \}
2018         \}
2019       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end ())
2020         \{
2021           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" no user found"});
2022         \}
2023     \}
2024   \textcolor{keywordflow}{else}
2025     \{
2026       it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.begin ();
2027       \hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl} = (*it).first;
2028     \}
2029   \textcolor{keywordflow}{do}
2030     \{
2031       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
2032       \textcolor{keywordflow}{if} ((itRnti != rntiAllocated.end ())||((*it).second == 0))
2033         \{
2034           \textcolor{comment}{// UE already allocated for UL-HARQ -> skip it}
2035           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE already allocated in HARQ -> discared, RNTI "} << (*it).
      first);
2036           it++;
2037           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end ())
2038             \{
2039               \textcolor{comment}{// restart from the first}
2040               it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.begin ();
2041             \}
2042           \textcolor{keywordflow}{continue};
2043         \}
2044       \textcolor{keywordflow}{if} (rbAllocated + rbPerFlow - 1 > \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth})
2045         \{
2046           \textcolor{comment}{// limit to physical resources last resource assignment}
2047           rbPerFlow = \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocated;
2048           \textcolor{comment}{// at least 3 rbg per flow to ensure TxOpportunity >= 7 bytes}
2049           \textcolor{keywordflow}{if} (rbPerFlow < 3)
2050             \{
2051               \textcolor{comment}{// terminate allocation}
2052               rbPerFlow = 0;
2053             \}
2054         \}
2055 
2056       rbAllocated = 0;
2057       UlDciListElement\_s uldci;
2058       uldci.m\_rnti = (*it).first;
2059       uldci.m\_rbLen = rbPerFlow;
2060       \textcolor{keywordtype}{bool} allocated = \textcolor{keyword}{false};
2061       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RB Allocated "} << rbAllocated << \textcolor{stringliteral}{" rbPerFlow "} << rbPerFlow << \textcolor{stringliteral}{"
       flows "} << nflows);
2062       \textcolor{keywordflow}{while} ((!allocated)&&((rbAllocated + rbPerFlow - \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) < 1) && (rbPerFlow != 0))
2063         \{
2064           \textcolor{comment}{// check availability}
2065           \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
2066           \textcolor{keywordflow}{for} (uint16\_t j = rbAllocated; j < rbAllocated + rbPerFlow; j++)
2067             \{
2068               \textcolor{keywordflow}{if} (rbMap.at (j) == \textcolor{keyword}{true})
2069                 \{
2070                   free = \textcolor{keyword}{false};
2071                   \textcolor{keywordflow}{break};
2072                 \}
2073               \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a3ef80840549b8ea3d50d2cef8a9866e2}{IsUlRbgAvailableForUe} (j, (*it).
      first)) == \textcolor{keyword}{false})
2074                 \{
2075                   free = \textcolor{keyword}{false};
2076                   \textcolor{keywordflow}{break};
2077                 \}
2078             \}
2079           \textcolor{keywordflow}{if} (free)
2080             \{
2081                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"RNTI: "}<< (*it).first<< \textcolor{stringliteral}{" RB Allocated "} << rbAllocated 
      << \textcolor{stringliteral}{" rbPerFlow "} << rbPerFlow << \textcolor{stringliteral}{" flows "} << nflows);
2082               uldci.m\_rbStart = rbAllocated;
2083 
2084               \textcolor{keywordflow}{for} (uint16\_t j = rbAllocated; j < rbAllocated + rbPerFlow; j++)
2085                 \{
2086                   rbMap.at (j) = \textcolor{keyword}{true};
2087                   \textcolor{comment}{// store info on allocation for managing ul-cqi interpretation}
2088                   rbgAllocationMap.at (j) = (*it).first;
2089                 \}
2090               rbAllocated += rbPerFlow;
2091               allocated = \textcolor{keyword}{true};
2092               \textcolor{keywordflow}{break};
2093             \}
2094           rbAllocated++;
2095           \textcolor{keywordflow}{if} (rbAllocated + rbPerFlow - 1 > \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth})
2096             \{
2097               \textcolor{comment}{// limit to physical resources last resource assignment}
2098               rbPerFlow = \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocated;
2099               \textcolor{comment}{// at least 3 rbg per flow to ensure TxOpportunity >= 7 bytes}
2100               \textcolor{keywordflow}{if} (rbPerFlow < 3)
2101                 \{
2102                   \textcolor{comment}{// terminate allocation}
2103                   rbPerFlow = 0;
2104                 \}
2105             \}
2106         \}
2107       \textcolor{keywordflow}{if} (!allocated)
2108         \{
2109           \textcolor{comment}{// unable to allocate new resource: finish scheduling}
2110 \textcolor{comment}{//          m\_nextRntiUl = (*it).first;}
2111 \textcolor{comment}{//          if (ret.m\_dciList.size () > 0)}
2112 \textcolor{comment}{//            \{}
2113 \textcolor{comment}{//              m\_schedSapUser->SchedUlConfigInd (ret);}
2114 \textcolor{comment}{//            \}}
2115 \textcolor{comment}{//          m\_allocationMaps.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.m\_sfnSf,
       rbgAllocationMap));}
2116 \textcolor{comment}{//          return;}
2117           \textcolor{keywordflow}{break};
2118         \}
2119 
2120 
2121 
2122       std::map <uint16\_t, std::vector <double> >::iterator itCqi = \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.find ((*it).first);
2123       \textcolor{keywordtype}{int} cqi = 0;
2124       \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.end ())
2125         \{
2126           \textcolor{comment}{// no cqi info about this UE}
2127           uldci.m\_mcs = 0; \textcolor{comment}{// MCS 0 -> UL-AMC TBD}
2128         \}
2129       \textcolor{keywordflow}{else}
2130         \{
2131           \textcolor{comment}{// take the lowest CQI value (worst RB)}
2132           \textcolor{keywordtype}{double} minSinr = (*itCqi).second.at (uldci.m\_rbStart);
2133           \textcolor{keywordflow}{if} (minSinr == \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
2134             \{
2135               minSinr = \hyperlink{classns3_1_1CqaFfMacScheduler_ad0d681a7fa2872f539e63c511485ae0e}{EstimateUlSinr} ((*it).first, uldci.m\_rbStart);
2136             \}
2137           \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = uldci.m\_rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < uldci.m\_rbStart + uldci.m\_rbLen; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2138             \{
2139               \textcolor{keywordtype}{double} sinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
2140               \textcolor{keywordflow}{if} (sinr == \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
2141                 \{
2142                   sinr = \hyperlink{classns3_1_1CqaFfMacScheduler_ad0d681a7fa2872f539e63c511485ae0e}{EstimateUlSinr} ((*it).first, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
2143                 \}
2144               \textcolor{keywordflow}{if} ((*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) < minSinr)
2145                 \{
2146                   minSinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
2147                 \}
2148             \}
2149 
2150           \textcolor{comment}{// translate SINR -> cqi: WILD ACK: same as DL}
2151           \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = log2 ( 1 + (
2152                               std::pow (10, minSinr / 10 )  /
2153                               ( (-std::log (5.0 * 0.00005 )) / 1.5) ));
2154           cqi = \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetCqiFromSpectralEfficiency (s);
2155           \textcolor{keywordflow}{if} (cqi == 0)
2156             \{
2157               it++;
2158               \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end ())
2159                 \{
2160                   \textcolor{comment}{// restart from the first}
2161                   it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.begin ();
2162                 \}
2163               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE discared for CQI=0, RNTI "} << uldci.m\_rnti);
2164               \textcolor{comment}{// remove UE from allocation map}
2165               \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = uldci.m\_rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < uldci.m\_rbStart + uldci.m\_rbLen; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2166                 \{
2167                   rbgAllocationMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
2168                 \}
2169               \textcolor{keywordflow}{continue}; \textcolor{comment}{// CQI == 0 means "out of range" (see table 7.2.3-1 of 36.213)}
2170             \}
2171           uldci.m\_mcs = \hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetMcsFromCqi (cqi);
2172         \}
2173 
2174       uldci.m\_tbSize = (\hyperlink{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{m\_amc}->GetTbSizeFromMcs (uldci.m\_mcs, rbPerFlow) / 8);
2175       \hyperlink{classns3_1_1CqaFfMacScheduler_a6a8ace20f79d661b0c8fc97dae918298}{UpdateUlRlcBufferInfo} (uldci.m\_rnti, uldci.m\_tbSize);
2176       uldci.m\_ndi = 1;
2177       uldci.m\_cceIndex = 0;
2178       uldci.m\_aggrLevel = 1;
2179       uldci.m\_ueTxAntennaSelection = 3; \textcolor{comment}{// antenna selection OFF}
2180       uldci.m\_hopping = \textcolor{keyword}{false};
2181       uldci.m\_n2Dmrs = 0;
2182       uldci.m\_tpc = 0; \textcolor{comment}{// no power control}
2183       uldci.m\_cqiRequest = \textcolor{keyword}{false}; \textcolor{comment}{// only period CQI at this stage}
2184       uldci.m\_ulIndex = 0; \textcolor{comment}{// TDD parameter}
2185       uldci.m\_dai = 1; \textcolor{comment}{// TDD parameter}
2186       uldci.m\_freqHopping = 0;
2187       uldci.m\_pdcchPowerOffset = 0; \textcolor{comment}{// not used}
2188       ret.m\_dciList.push\_back (uldci);
2189       \textcolor{comment}{// store DCI for HARQ\_PERIOD}
2190       uint8\_t harqId = 0;
2191       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\_harqOn} == \textcolor{keyword}{true})
2192         \{
2193           std::map <uint16\_t, uint8\_t>::iterator itProcId;
2194           itProcId = \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.find (uldci.m\_rnti);
2195           \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{m\_ulHarqCurrentProcessId}.end ())
2196             \{
2197               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << uldci.m\_rnti);
2198             \}
2199           harqId = (*itProcId).second;
2200           std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.find (uldci.m\_rnti);
2201           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{m\_ulHarqProcessesDciBuffer}.end ())
2202             \{
2203               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in UL DCI HARQ buffer for RNTI "} << 
      uldci.m\_rnti);
2204             \}
2205           (*itDci).second.at (harqId) = uldci;
2206           \textcolor{comment}{// Update HARQ process status (RV 0)}
2207           std::map <uint16\_t, UlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\_ulHarqProcessesStatus}.find (uldci.m\_rnti);
2208           \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{m\_ulHarqProcessesStatus}.end ())
2209             \{
2210               \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << uldci.
      m\_rnti);
2211             \}
2212           (*itStat).second.at (harqId) = 0;
2213         \}
2214 
2215       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE Allocation RNTI "} << (*it).first << \textcolor{stringliteral}{" startPRB "} << (uint32\_t)
      uldci.m\_rbStart << \textcolor{stringliteral}{" nPRB "} << (uint32\_t)uldci.m\_rbLen << \textcolor{stringliteral}{" CQI "} << cqi << \textcolor{stringliteral}{" MCS "} << (uint32\_t)uldci.m\_mcs 
      << \textcolor{stringliteral}{" TBsize "} << uldci.m\_tbSize << \textcolor{stringliteral}{" RbAlloc "} << rbAllocated << \textcolor{stringliteral}{" harqId "} << (uint16\_t)harqId);
2216 
2217       \textcolor{comment}{// update TTI  UE stats}
2218       itStats = \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\_flowStatsUl}.find ((*it).first);
2219       \textcolor{keywordflow}{if} (itStats != \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\_flowStatsUl}.end ())
2220         \{
2221           (*itStats).second.lastTtiBytesTransmitted =  uldci.m\_tbSize;
2222         \}
2223       \textcolor{keywordflow}{else}
2224         \{
2225           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" No Stats for this allocated UE"});
2226         \}
2227 
2228 
2229       it++;
2230       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end ())
2231         \{
2232           \textcolor{comment}{// restart from the first}
2233           it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.begin ();
2234         \}
2235       \textcolor{keywordflow}{if} ((rbAllocated == \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) || (rbPerFlow ==
       0))
2236         \{
2237           \textcolor{comment}{// Stop allocation: no more PRBs}
2238           \hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl} = (*it).first;
2239           \textcolor{keywordflow}{break};
2240         \}
2241     \}
2242   \textcolor{keywordflow}{while} (((*it).first != \hyperlink{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{m\_nextRntiUl})&&(rbPerFlow!=0));
2243 
2244 
2245   \textcolor{comment}{// Update global UE stats}
2246   \textcolor{comment}{// update UEs stats}
2247   \textcolor{keywordflow}{for} (itStats = \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\_flowStatsUl}.begin (); itStats != \hyperlink{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{m\_flowStatsUl}.end (); itStats
      ++)
2248     \{
2249       (*itStats).second.totalBytesTransmitted += (*itStats).second.lastTtiBytesTransmitted;
2250       \textcolor{comment}{// update average throughput (see eq. 12.3 of Sec 12.3.1.2 of LTE  The UMTS Long Term Evolution, Ed
       Wiley)}
2251       (*itStats).second.lastAveragedThroughput = ((1.0 - (1.0 / \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow})) * (*itStats).
      second.lastAveragedThroughput) + ((1.0 / \hyperlink{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{m\_timeWindow}) * (double)((*itStats).second.
      lastTtiBytesTransmitted / 0.001));
2252       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE total bytes "} << (*itStats).second.totalBytesTransmitted);
2253       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE average throughput "} << (*itStats).second.lastAveragedThroughput
      );
2254       (*itStats).second.lastTtiBytesTransmitted = 0;
2255     \}
2256   \hyperlink{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}{m\_allocationMaps}.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.m\_sfnSf, 
      rbgAllocationMap));
2257   \hyperlink{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a1b89636256701a84d990db7db8aea874}{SchedUlConfigInd} (ret);
2258 
2259   \textcolor{keywordflow}{return};
2260 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23




Here is the caller graph for this function\+:
% FIG 24


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}}
\index{Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Estimate\+Ul\+Sinr(uint16\+\_\+t rnti, uint16\+\_\+t rb)}{EstimateUlSinr(uint16_t rnti, uint16_t rb)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Estimate\+Ul\+Sinr (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{rb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ad0d681a7fa2872f539e63c511485ae0e}{}\label{classns3_1_1CqaFfMacScheduler_ad0d681a7fa2872f539e63c511485ae0e}

\begin{DoxyCode}
1824 \{
1825   std::map <uint16\_t, std::vector <double> >::iterator itCqi = \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.find (rnti);
1826   \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.end ())
1827     \{
1828       \textcolor{comment}{// no cqi info about this UE}
1829       \textcolor{keywordflow}{return} (\hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR});
1830 
1831     \}
1832   \textcolor{keywordflow}{else}
1833     \{
1834       \textcolor{comment}{// take the average SINR value among the available}
1835       \textcolor{keywordtype}{double} sinrSum = 0;
1836       \textcolor{keywordtype}{int} sinrNum = 0;
1837       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1838         \{
1839           \textcolor{keywordtype}{double} sinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1840           \textcolor{keywordflow}{if} (sinr != \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
1841             \{
1842               sinrSum += sinr;
1843               sinrNum++;
1844             \}
1845         \}
1846       \textcolor{keywordtype}{double} estimatedSinr = (sinrNum > 0) ? (sinrSum / sinrNum) : DBL\_MAX;
1847       \textcolor{comment}{// store the value}
1848       (*itCqi).second.at (rb) = estimatedSinr;
1849       \textcolor{keywordflow}{return} (estimatedSinr);
1850     \}
1851 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 25


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Csched\+Sap\+Provider()}{GetFfMacCschedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Csched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a10a557a588e6e800ba70881fc6200af8}{}\label{classns3_1_1CqaFfMacScheduler_a10a557a588e6e800ba70881fc6200af8}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Csched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a458388c88c892d32e2d7a48883947379}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
345 \{
346   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1CqaFfMacScheduler_a04e8005367e22a36fb264a71382c2ac1}{m\_cschedSapProvider};
347 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Sched\+Sap\+Provider()}{GetFfMacSchedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Sched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ac477bb0942f3059310a3d78e34ad8ccf}{}\label{classns3_1_1CqaFfMacScheduler_ac477bb0942f3059310a3d78e34ad8ccf}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Sched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_ad3a2aca6f1c01fbddf88bfbf19cc07a4}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
351 \{
352   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1CqaFfMacScheduler_ac139d5e64c1bdd47b31e3f8ae1633ebc}{m\_schedSapProvider};
353 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}}
\index{Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Lte\+Ffr\+Sap\+User()}{GetLteFfrSapUser()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+User} $\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Get\+Lte\+Ffr\+Sap\+User (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ad4e60ee95b33ea19869da62cd29ef812}{}\label{classns3_1_1CqaFfMacScheduler_ad4e60ee95b33ea19869da62cd29ef812}
\begin{DoxyReturn}{Returns}
the User part of the Lte\+Ffr\+Sap provided by the Ffr\+Algorithm 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a32fe62051fd6ac175116417df11e6c4e}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
363 \{
364   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1CqaFfMacScheduler_a68b05ba68f164a5acf308ce7dd18e57c}{m\_ffrSapUser};
365 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Get\+Rbg\+Size@{Get\+Rbg\+Size}}
\index{Get\+Rbg\+Size@{Get\+Rbg\+Size}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Rbg\+Size(int dlbandwidth)}{GetRbgSize(int dlbandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Get\+Rbg\+Size (
\begin{DoxyParamCaption}
\item[{int}]{dlbandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a1b57c878252b51347adcbbe5ca92f8c9}{}\label{classns3_1_1CqaFfMacScheduler_a1b57c878252b51347adcbbe5ca92f8c9}

\begin{DoxyCode}
635 \{
636   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 4; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
637     \{
638       \textcolor{keywordflow}{if} (dlbandwidth < \hyperlink{namespacens3_acd63ca84485c877e5e3ac826c76403c8}{CqaType0AllocationRbg}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}])
639         \{
640           \textcolor{keywordflow}{return} (i + 1);
641         \}
642     \}
643 
644   \textcolor{keywordflow}{return} (-1);
645 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 26


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a283a8f6415c2a72bee0c63a330b15a3a}{}\label{classns3_1_1CqaFfMacScheduler_a283a8f6415c2a72bee0c63a330b15a3a}

\begin{DoxyCode}
300 \{
301   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::CqaFfMacScheduler"})
302     .SetParent<\hyperlink{classns3_1_1FfMacScheduler_aa4c8ce28dbba2c19ff3328533c444045}{FfMacScheduler}> ()
303     .SetGroupName(\textcolor{stringliteral}{"Lte"})
304     .AddConstructor<\hyperlink{classns3_1_1CqaFfMacScheduler_ad7df3a4ee9e26114dad4d8b9572be9f8}{CqaFfMacScheduler}>()
305     .AddAttribute (\textcolor{stringliteral}{"CqiTimerThreshold"},
306                    \textcolor{stringliteral}{"The number of TTIs a CQI is valid (default 1000 - 1 sec.)"},
307                    UintegerValue (1000),
308                    MakeUintegerAccessor (&
      \hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{CqaFfMacScheduler::m\_cqiTimersThreshold}),
309                    MakeUintegerChecker<uint32\_t> ())
310     .AddAttribute (\textcolor{stringliteral}{"CqaMetric"},
311                    \textcolor{stringliteral}{"CqaFfMacScheduler metric type that can be: CqaFf, CqaPf"},
312                    StringValue (\textcolor{stringliteral}{"CqaFf"}),
313                    MakeStringAccessor (&\hyperlink{classns3_1_1CqaFfMacScheduler_aed5322f441dd060a332fe6e34c0d7d7c}{CqaFfMacScheduler::m\_CqaMetric}),
314                    MakeStringChecker ())
315     .AddAttribute (\textcolor{stringliteral}{"HarqEnabled"},
316                    \textcolor{stringliteral}{"Activate/Deactivate the HARQ [by default is active]."},
317                    BooleanValue (\textcolor{keyword}{true}),
318                    MakeBooleanAccessor (&\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{CqaFfMacScheduler::m\_harqOn}),
319                    MakeBooleanChecker ())
320     .AddAttribute (\textcolor{stringliteral}{"UlGrantMcs"},
321                    \textcolor{stringliteral}{"The MCS of the UL grant, must be [0..15] (default 0)"},
322                    UintegerValue (0),
323                    MakeUintegerAccessor (&\hyperlink{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{CqaFfMacScheduler::m\_ulGrantMcs}),
324                    MakeUintegerChecker<uint8\_t> ())
325   ;
326   \textcolor{keywordflow}{return} tid;
327 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Harq\+Process\+Availability@{Harq\+Process\+Availability}}
\index{Harq\+Process\+Availability@{Harq\+Process\+Availability}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Harq\+Process\+Availability(uint16\+\_\+t rnti)}{HarqProcessAvailability(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Harq\+Process\+Availability (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a166f5717872f7d411d168869881a4518}{}\label{classns3_1_1CqaFfMacScheduler_a166f5717872f7d411d168869881a4518}


Return the availability of free process for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}

\begin{DoxyCode}
673 \{
674   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti);
675 
676   std::map <uint16\_t, uint8\_t>::iterator it = \hyperlink{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{m\_dlHarqCurrentProcessId}.find (rnti);
677   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{m\_dlHarqCurrentProcessId}.end ())
678     \{
679       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id found for this RNTI "} << rnti);
680     \}
681   std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.find (rnti);
682   \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.end ())
683     \{
684       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Statusfound for this RNTI "} << rnti);
685     \}
686   uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = (*it).second;
687   \textcolor{keywordflow}{do}
688     \{
689       i = (i + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
690     \}
691   \textcolor{keywordflow}{while} ( ((*itStat).second.at (i) != 0)&&(i != (*it).second));
692   \textcolor{keywordflow}{if} ((*itStat).second.at (i) == 0)
693     \{
694       \textcolor{keywordflow}{return} (\textcolor{keyword}{true});
695     \}
696   \textcolor{keywordflow}{else}
697     \{
698       \textcolor{keywordflow}{return} (\textcolor{keyword}{false}); \textcolor{comment}{// return a not valid harq proc id}
699     \}
700 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 28


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}}
\index{Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Lc\+Active\+Per\+Flow(uint16\+\_\+t rnti)}{LcActivePerFlow(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Lc\+Active\+Per\+Flow (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a53e0105147913d9c9800f8bb3d172676}{}\label{classns3_1_1CqaFfMacScheduler_a53e0105147913d9c9800f8bb3d172676}

\begin{DoxyCode}
650 \{
651   std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
652   \textcolor{keywordtype}{int} lcActive = 0;
653   \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.begin (); it != \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end (); it++)
654     \{
655       \textcolor{keywordflow}{if} (((*it).first.m\_rnti == rnti) && (((*it).second.m\_rlcTransmissionQueueSize > 0)
656                                            || ((*it).second.m\_rlcRetransmissionQueueSize > 0)
657                                            || ((*it).second.m\_rlcStatusPduSize > 0) ))
658         \{
659           lcActive++;
660         \}
661       \textcolor{keywordflow}{if} ((*it).first.m\_rnti > rnti)
662         \{
663           \textcolor{keywordflow}{break};
664         \}
665     \}
666   \textcolor{keywordflow}{return} (lcActive);
667 
668 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 29


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}}
\index{Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Dl\+Cqi\+Maps(void)}{RefreshDlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Refresh\+Dl\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a2ea59028a05346722f37ccd70cafb248}{}\label{classns3_1_1CqaFfMacScheduler_a2ea59028a05346722f37ccd70cafb248}

\begin{DoxyCode}
2471 \{
2472   \textcolor{comment}{// refresh DL CQI P01 Map}
2473   std::map <uint16\_t,uint32\_t>::iterator itP10 = \hyperlink{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}{m\_p10CqiTimers}.begin ();
2474   \textcolor{keywordflow}{while} (itP10 != \hyperlink{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}{m\_p10CqiTimers}.end ())
2475     \{
2476       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" P10-CQI for user "} << (*itP10).first << \textcolor{stringliteral}{" is "} << (uint32\_t)
      (*itP10).second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold});
2477       \textcolor{keywordflow}{if} ((*itP10).second == 0)
2478         \{
2479           \textcolor{comment}{// delete correspondent entries}
2480           std::map <uint16\_t,uint8\_t>::iterator itMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{m\_p10CqiRxed}.find ((*itP10).first);
2481           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{m\_p10CqiRxed}.end (), \textcolor{stringliteral}{" Does not find CQI report
       for user "} << (*itP10).first);
2482           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" P10-CQI expired for user "} << (*itP10).first);
2483           \hyperlink{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{m\_p10CqiRxed}.erase (itMap);
2484           std::map <uint16\_t,uint32\_t>::iterator temp = itP10;
2485           itP10++;
2486           \hyperlink{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}{m\_p10CqiTimers}.erase (temp);
2487         \}
2488       \textcolor{keywordflow}{else}
2489         \{
2490           (*itP10).second--;
2491           itP10++;
2492         \}
2493     \}
2494 
2495   \textcolor{comment}{// refresh DL CQI A30 Map}
2496   std::map <uint16\_t,uint32\_t>::iterator itA30 = \hyperlink{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}{m\_a30CqiTimers}.begin ();
2497   \textcolor{keywordflow}{while} (itA30 != \hyperlink{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}{m\_a30CqiTimers}.end ())
2498     \{
2499       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" A30-CQI for user "} << (*itA30).first << \textcolor{stringliteral}{" is "} << (uint32\_t)
      (*itA30).second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold});
2500       \textcolor{keywordflow}{if} ((*itA30).second == 0)
2501         \{
2502           \textcolor{comment}{// delete correspondent entries}
2503           std::map <uint16\_t,SbMeasResult\_s>::iterator itMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.find ((*itA30).
      first);
2504           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.end (), \textcolor{stringliteral}{" Does not find CQI report
       for user "} << (*itA30).first);
2505           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" A30-CQI expired for user "} << (*itA30).first);
2506           \hyperlink{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{m\_a30CqiRxed}.erase (itMap);
2507           std::map <uint16\_t,uint32\_t>::iterator temp = itA30;
2508           itA30++;
2509           \hyperlink{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}{m\_a30CqiTimers}.erase (temp);
2510         \}
2511       \textcolor{keywordflow}{else}
2512         \{
2513           (*itA30).second--;
2514           itA30++;
2515         \}
2516     \}
2517 
2518   \textcolor{keywordflow}{return};
2519 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 30


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}}
\index{Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Harq\+Processes()}{RefreshHarqProcesses()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Refresh\+Harq\+Processes (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a09c54657692d4e9d6c57185b1f16ad14}{}\label{classns3_1_1CqaFfMacScheduler_a09c54657692d4e9d6c57185b1f16ad14}


Refresh H\+A\+RQ processes according to the timers. 


\begin{DoxyCode}
747 \{
748   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
749 
750   std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itTimers;
751   \textcolor{keywordflow}{for} (itTimers = \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.begin (); itTimers != 
      \hyperlink{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{m\_dlHarqProcessesTimer}.end (); itTimers++)
752     \{
753       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
754         \{
755           \textcolor{keywordflow}{if} ((*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) == \hyperlink{cqa-ff-mac-scheduler_8h_add9e0c4889dc1b5b25686480b31ad166}{HARQ\_DL\_TIMEOUT})
756             \{
757               \textcolor{comment}{// reset HARQ process}
758 
759               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Reset HARQ proc "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" for RNTI "} << (*itTimers).
      first);
760               std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.find ((*itTimers).first);
761               \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.end ())
762                 \{
763                   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Status found for this RNTI "} << (*itTimers).
      first);
764                 \}
765               (*itStat).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
766               (*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
767             \}
768           \textcolor{keywordflow}{else}
769             \{
770               (*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})++;
771             \}
772         \}
773     \}
774 
775 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 31


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}}
\index{Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Ul\+Cqi\+Maps(void)}{RefreshUlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Refresh\+Ul\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ad121d8c53a2aa28532e4ce32682d0dd2}{}\label{classns3_1_1CqaFfMacScheduler_ad121d8c53a2aa28532e4ce32682d0dd2}

\begin{DoxyCode}
2524 \{
2525   \textcolor{comment}{// refresh UL CQI  Map}
2526   std::map <uint16\_t,uint32\_t>::iterator itUl = \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\_ueCqiTimers}.begin ();
2527   \textcolor{keywordflow}{while} (itUl != \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\_ueCqiTimers}.end ())
2528     \{
2529       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-CQI for user "} << (*itUl).first << \textcolor{stringliteral}{" is "} << (uint32\_t)(*itUl).
      second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{m\_cqiTimersThreshold});
2530       \textcolor{keywordflow}{if} ((*itUl).second == 0)
2531         \{
2532           \textcolor{comment}{// delete correspondent entries}
2533           std::map <uint16\_t, std::vector <double> >::iterator itMap = \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.find ((*itUl).first);
2534           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.end (), \textcolor{stringliteral}{" Does not find CQI report for user "}
       << (*itUl).first);
2535           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-CQI exired for user "} << (*itUl).first);
2536           (*itMap).second.clear ();
2537           \hyperlink{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{m\_ueCqi}.erase (itMap);
2538           std::map <uint16\_t,uint32\_t>::iterator temp = itUl;
2539           itUl++;
2540           \hyperlink{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{m\_ueCqiTimers}.erase (temp);
2541         \}
2542       \textcolor{keywordflow}{else}
2543         \{
2544           (*itUl).second--;
2545           itUl++;
2546         \}
2547     \}
2548 
2549   \textcolor{keywordflow}{return};
2550 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 32


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Csched\+Sap\+User(\+Ff\+Mac\+Csched\+Sap\+User $\ast$s)}{SetFfMacCschedSapUser(FfMacCschedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Csched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Csched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_abf9edc89587cd146800984e6af00093f}{}\label{classns3_1_1CqaFfMacScheduler_abf9edc89587cd146800984e6af00093f}
set the user part of the Ff\+Mac\+Csched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a3984d8478223218fd4432a9f9ead328b}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
333 \{
334   \hyperlink{classns3_1_1CqaFfMacScheduler_a66b7628e6f04aa658ff04050221243b9}{m\_cschedSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
335 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Sched\+Sap\+User(\+Ff\+Mac\+Sched\+Sap\+User $\ast$s)}{SetFfMacSchedSapUser(FfMacSchedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Sched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Sched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a359c2f26a02581e76c24e96401c7dd6a}{}\label{classns3_1_1CqaFfMacScheduler_a359c2f26a02581e76c24e96401c7dd6a}
set the user part of the Ff\+Mac\+Sched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_aa45093350c367b9a33263d5b6eecee34}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
339 \{
340   \hyperlink{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}{m\_schedSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
341 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}}
\index{Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Lte\+Ffr\+Sap\+Provider(\+Lte\+Ffr\+Sap\+Provider $\ast$s)}{SetLteFfrSapProvider(LteFfrSapProvider *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Set\+Lte\+Ffr\+Sap\+Provider (
\begin{DoxyParamCaption}
\item[{{\bf Lte\+Ffr\+Sap\+Provider} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a6d95a5cdb82a3ad621f9dc6719f8cec2}{}\label{classns3_1_1CqaFfMacScheduler_a6d95a5cdb82a3ad621f9dc6719f8cec2}
Set the Provider part of the Lte\+Ffr\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a2b3a1635ada88804f035984277371926}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
357 \{
358   \hyperlink{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{m\_ffrSapProvider} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
359 \}
\end{DoxyCode}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}}
\index{Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Transmission\+Mode\+Configuration\+Update(uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)}{TransmissionModeConfigurationUpdate(uint16_t rnti, uint8_t txMode)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Transmission\+Mode\+Configuration\+Update (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{tx\+Mode}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1CqaFfMacScheduler_afe30372c616909013b09657941963551}{}\label{classns3_1_1CqaFfMacScheduler_afe30372c616909013b09657941963551}

\begin{DoxyCode}
2631 \{
2632   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" txMode "} << (uint16\_t)txMode);
2633   FfMacCschedSapUser::CschedUeConfigUpdateIndParameters params;
2634   params.m\_rnti = rnti;
2635   params.m\_transmissionMode = txMode;
2636   \hyperlink{classns3_1_1CqaFfMacScheduler_a66b7628e6f04aa658ff04050221243b9}{m\_cschedSapUser}->\hyperlink{classns3_1_1FfMacCschedSapUser_a63f3fa5bac0cc7234a17c3241bff6a04}{CschedUeConfigUpdateInd} (params);
2637 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 33


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}}
\index{Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Dl\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)}{UpdateDlRlcBufferInfo(uint16_t rnti, uint8_t lcid, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Update\+Dl\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{lcid, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a47bf71ec85b1dda1003d06dccf1bde70}{}\label{classns3_1_1CqaFfMacScheduler_a47bf71ec85b1dda1003d06dccf1bde70}

\begin{DoxyCode}
2554 \{
2555   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
2556   LteFlowId\_t flow (rnti, lcid);
2557   it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.find (flow);
2558   \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{m\_rlcBufferReq}.end ())
2559     \{
2560       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE "} << rnti << \textcolor{stringliteral}{" LC "} << (uint16\_t)lcid << \textcolor{stringliteral}{" txqueue "} << (*it).
      second.m\_rlcTransmissionQueueSize << \textcolor{stringliteral}{" retxqueue "} << (*it).second.m\_rlcRetransmissionQueueSize << \textcolor{stringliteral}{" status "} 
      << (*it).second.m\_rlcStatusPduSize << \textcolor{stringliteral}{" decrease "} << size);
2561       \textcolor{comment}{// Update queues: RLC tx order Status, ReTx, Tx}
2562       \textcolor{comment}{// Update status queue}
2563       \textcolor{keywordflow}{if} (((*it).second.m\_rlcStatusPduSize > 0) && (size >= (*it).second.m\_rlcStatusPduSize))
2564         \{
2565           (*it).second.m\_rlcStatusPduSize = 0;
2566         \}
2567       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (((*it).second.m\_rlcRetransmissionQueueSize > 0) && (size >= (*it).second.
      m\_rlcRetransmissionQueueSize))
2568         \{
2569           (*it).second.m\_rlcRetransmissionQueueSize = 0;
2570         \}
2571       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((*it).second.m\_rlcTransmissionQueueSize > 0)
2572         \{
2573           uint32\_t rlcOverhead;
2574           \textcolor{keywordflow}{if} (lcid == 1)
2575             \{
2576               \textcolor{comment}{// for SRB1 (using RLC AM) it's better to}
2577               \textcolor{comment}{// overestimate RLC overhead rather than}
2578               \textcolor{comment}{// underestimate it and risk unneeded}
2579               \textcolor{comment}{// segmentation which increases delay }
2580               rlcOverhead = 4;
2581             \}
2582           \textcolor{keywordflow}{else}
2583             \{
2584               \textcolor{comment}{// minimum RLC overhead due to header}
2585               rlcOverhead = 2;
2586             \}
2587           \textcolor{comment}{// update transmission queue}
2588           \textcolor{keywordflow}{if} ((*it).second.m\_rlcTransmissionQueueSize <= size - rlcOverhead)
2589             \{
2590               (*it).second.m\_rlcTransmissionQueueSize = 0;
2591             \}
2592           \textcolor{keywordflow}{else}
2593             \{
2594               (*it).second.m\_rlcTransmissionQueueSize -= size - rlcOverhead;
2595             \}
2596         \}
2597     \}
2598   \textcolor{keywordflow}{else}
2599     \{
2600       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Does not find DL RLC Buffer Report of UE "} << rnti);
2601     \}
2602 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 34


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}}
\index{Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Harq\+Process\+Id(uint16\+\_\+t rnti)}{UpdateHarqProcessId(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Update\+Harq\+Process\+Id (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a4aa696a41a5da8bea142e3a83d2880f3}{}\label{classns3_1_1CqaFfMacScheduler_a4aa696a41a5da8bea142e3a83d2880f3}


Update and return a new process Id for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}

\begin{DoxyCode}
706 \{
707   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti);
708 
709   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{m\_harqOn} == \textcolor{keyword}{false})
710     \{
711       \textcolor{keywordflow}{return} (0);
712     \}
713 
714 
715   std::map <uint16\_t, uint8\_t>::iterator it = \hyperlink{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{m\_dlHarqCurrentProcessId}.find (rnti);
716   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{m\_dlHarqCurrentProcessId}.end ())
717     \{
718       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id found for this RNTI "} << rnti);
719     \}
720   std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.find (rnti);
721   \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{m\_dlHarqProcessesStatus}.end ())
722     \{
723       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Statusfound for this RNTI "} << rnti);
724     \}
725   uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = (*it).second;
726   \textcolor{keywordflow}{do}
727     \{
728       i = (i + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
729     \}
730   \textcolor{keywordflow}{while} ( ((*itStat).second.at (i) != 0)&&(i != (*it).second));
731   \textcolor{keywordflow}{if} ((*itStat).second.at (i) == 0)
732     \{
733       (*it).second = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
734       (*itStat).second.at (i) = 1;
735     \}
736   \textcolor{keywordflow}{else}
737     \{
738       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No HARQ process available for RNTI "} << rnti << \textcolor{stringliteral}{" check before update
       with HarqProcessAvailability"});
739     \}
740 
741   \textcolor{keywordflow}{return} ((*it).second);
742 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 35


\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}}
\index{Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Ul\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint16\+\_\+t size)}{UpdateUlRlcBufferInfo(uint16_t rnti, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::\+Update\+Ul\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a6a8ace20f79d661b0c8fc97dae918298}{}\label{classns3_1_1CqaFfMacScheduler_a6a8ace20f79d661b0c8fc97dae918298}

\begin{DoxyCode}
2606 \{
2607 
2608   size = size - 2; \textcolor{comment}{// remove the minimum RLC overhead}
2609   std::map <uint16\_t,uint32\_t>::iterator it = \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.find (rnti);
2610   \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{m\_ceBsrRxed}.end ())
2611     \{
2612       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE "} << rnti << \textcolor{stringliteral}{" size "} << size << \textcolor{stringliteral}{" BSR "} << (*it).second);
2613       \textcolor{keywordflow}{if} ((*it).second >= size)
2614         \{
2615           (*it).second -= size;
2616         \}
2617       \textcolor{keywordflow}{else}
2618         \{
2619           (*it).second = 0;
2620         \}
2621     \}
2622   \textcolor{keywordflow}{else}
2623     \{
2624       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Does not find BSR report info of UE "} << rnti);
2625     \}
2626 
2627 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 36




\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Cqa\+Scheduler\+Member\+Csched\+Sap\+Provider@{Cqa\+Scheduler\+Member\+Csched\+Sap\+Provider}}
\index{Cqa\+Scheduler\+Member\+Csched\+Sap\+Provider@{Cqa\+Scheduler\+Member\+Csched\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Cqa\+Scheduler\+Member\+Csched\+Sap\+Provider}{CqaSchedulerMemberCschedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Cqa\+Scheduler\+Member\+Csched\+Sap\+Provider}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a98a42d2ed30c27404f079a56e9dfddc1}{}\label{classns3_1_1CqaFfMacScheduler_a98a42d2ed30c27404f079a56e9dfddc1}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!Cqa\+Scheduler\+Member\+Sched\+Sap\+Provider@{Cqa\+Scheduler\+Member\+Sched\+Sap\+Provider}}
\index{Cqa\+Scheduler\+Member\+Sched\+Sap\+Provider@{Cqa\+Scheduler\+Member\+Sched\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Cqa\+Scheduler\+Member\+Sched\+Sap\+Provider}{CqaSchedulerMemberSchedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Cqa\+Scheduler\+Member\+Sched\+Sap\+Provider}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ae6872e0ddfeba723210e403d58b41ee0}{}\label{classns3_1_1CqaFfMacScheduler_ae6872e0ddfeba723210e403d58b41ee0}


\subsection{Member Data Documentation}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+a30\+Cqi\+Rxed@{m\+\_\+a30\+Cqi\+Rxed}}
\index{m\+\_\+a30\+Cqi\+Rxed@{m\+\_\+a30\+Cqi\+Rxed}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+a30\+Cqi\+Rxed}{m_a30CqiRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,{\bf Sb\+Meas\+Result\+\_\+s}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+a30\+Cqi\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}{}\label{classns3_1_1CqaFfMacScheduler_a6894c40af99f8d6c6fdb201e7363fde9}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+a30\+Cqi\+Timers@{m\+\_\+a30\+Cqi\+Timers}}
\index{m\+\_\+a30\+Cqi\+Timers@{m\+\_\+a30\+Cqi\+Timers}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+a30\+Cqi\+Timers}{m_a30CqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+a30\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}{}\label{classns3_1_1CqaFfMacScheduler_ab6b356ca3bc799a5a1a51b7c687d87e4}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+allocation\+Maps@{m\+\_\+allocation\+Maps}}
\index{m\+\_\+allocation\+Maps@{m\+\_\+allocation\+Maps}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+allocation\+Maps}{m_allocationMaps}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, std\+::vector $<$uint16\+\_\+t$>$ $>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+allocation\+Maps\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}{}\label{classns3_1_1CqaFfMacScheduler_a3b02c0d7a89f3ed393066ba9bfda6210}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+amc@{m\+\_\+amc}}
\index{m\+\_\+amc@{m\+\_\+amc}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+amc}{m_amc}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Lte\+Amc}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+amc\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}{}\label{classns3_1_1CqaFfMacScheduler_aa32ec6c7683816a4afdb922f73c0fdc6}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ce\+Bsr\+Rxed@{m\+\_\+ce\+Bsr\+Rxed}}
\index{m\+\_\+ce\+Bsr\+Rxed@{m\+\_\+ce\+Bsr\+Rxed}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ce\+Bsr\+Rxed}{m_ceBsrRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ce\+Bsr\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}{}\label{classns3_1_1CqaFfMacScheduler_ae2ec92c28a8adb7f5d63d658fd1e3949}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+\+Cqa\+Metric@{m\+\_\+\+Cqa\+Metric}}
\index{m\+\_\+\+Cqa\+Metric@{m\+\_\+\+Cqa\+Metric}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+\+Cqa\+Metric}{m_CqaMetric}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+\+Cqa\+Metric\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_aed5322f441dd060a332fe6e34c0d7d7c}{}\label{classns3_1_1CqaFfMacScheduler_aed5322f441dd060a332fe6e34c0d7d7c}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+cqi\+Timers\+Threshold@{m\+\_\+cqi\+Timers\+Threshold}}
\index{m\+\_\+cqi\+Timers\+Threshold@{m\+\_\+cqi\+Timers\+Threshold}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+cqi\+Timers\+Threshold}{m_cqiTimersThreshold}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+cqi\+Timers\+Threshold\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}{}\label{classns3_1_1CqaFfMacScheduler_ab2ea609b39ce10062f2bdd8027dd6edd}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Cell\+Config@{m\+\_\+csched\+Cell\+Config}}
\index{m\+\_\+csched\+Cell\+Config@{m\+\_\+csched\+Cell\+Config}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Cell\+Config}{m_cschedCellConfig}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Cell\+Config\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}{}\label{classns3_1_1CqaFfMacScheduler_ad5dc768ca3a3c71671fd64de7de8ec00}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Sap\+Provider@{m\+\_\+csched\+Sap\+Provider}}
\index{m\+\_\+csched\+Sap\+Provider@{m\+\_\+csched\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Sap\+Provider}{m_cschedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider}$\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a04e8005367e22a36fb264a71382c2ac1}{}\label{classns3_1_1CqaFfMacScheduler_a04e8005367e22a36fb264a71382c2ac1}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Sap\+User@{m\+\_\+csched\+Sap\+User}}
\index{m\+\_\+csched\+Sap\+User@{m\+\_\+csched\+Sap\+User}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Sap\+User}{m_cschedSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+User}$\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a66b7628e6f04aa658ff04050221243b9}{}\label{classns3_1_1CqaFfMacScheduler_a66b7628e6f04aa658ff04050221243b9}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Current\+Process\+Id@{m\+\_\+dl\+Harq\+Current\+Process\+Id}}
\index{m\+\_\+dl\+Harq\+Current\+Process\+Id@{m\+\_\+dl\+Harq\+Current\+Process\+Id}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Current\+Process\+Id}{m_dlHarqCurrentProcessId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, uint8\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Current\+Process\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}{}\label{classns3_1_1CqaFfMacScheduler_a1fc0136a3398fb51805a2a91e40d820e}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}}
\index{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}{m_dlHarqProcessesDciBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Dci\+Buffer\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}{}\label{classns3_1_1CqaFfMacScheduler_a4de0e4833545b31fcb31f77492a34380}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}}
\index{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}{m_dlHarqProcessesRlcPduListBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Rlc\+Pdu\+List\+Buffer\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}{}\label{classns3_1_1CqaFfMacScheduler_a019cbb20e91d699a8c7e26fb8d69ff4e}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Status@{m\+\_\+dl\+Harq\+Processes\+Status}}
\index{m\+\_\+dl\+Harq\+Processes\+Status@{m\+\_\+dl\+Harq\+Processes\+Status}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Status}{m_dlHarqProcessesStatus}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Status\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}{}\label{classns3_1_1CqaFfMacScheduler_ad68bd0730def22b00204de5f3a8fb109}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Timer@{m\+\_\+dl\+Harq\+Processes\+Timer}}
\index{m\+\_\+dl\+Harq\+Processes\+Timer@{m\+\_\+dl\+Harq\+Processes\+Timer}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Timer}{m_dlHarqProcessesTimer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Timer\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Timer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}{}\label{classns3_1_1CqaFfMacScheduler_a2e130ab374b4770c3544495ba593f023}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Info\+List\+Buffered@{m\+\_\+dl\+Info\+List\+Buffered}}
\index{m\+\_\+dl\+Info\+List\+Buffered@{m\+\_\+dl\+Info\+List\+Buffered}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Info\+List\+Buffered}{m_dlInfoListBuffered}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Dl\+Info\+List\+Element\+\_\+s}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Info\+List\+Buffered\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}{}\label{classns3_1_1CqaFfMacScheduler_aabc929a8c1c30338a5fa0826bb7cd2b8}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ffr\+Sap\+Provider@{m\+\_\+ffr\+Sap\+Provider}}
\index{m\+\_\+ffr\+Sap\+Provider@{m\+\_\+ffr\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ffr\+Sap\+Provider}{m_ffrSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+Provider}$\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ffr\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}{}\label{classns3_1_1CqaFfMacScheduler_a47eeb31f5d284b045d6deba40ac3e108}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ffr\+Sap\+User@{m\+\_\+ffr\+Sap\+User}}
\index{m\+\_\+ffr\+Sap\+User@{m\+\_\+ffr\+Sap\+User}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ffr\+Sap\+User}{m_ffrSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+User}$\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ffr\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a68b05ba68f164a5acf308ce7dd18e57c}{}\label{classns3_1_1CqaFfMacScheduler_a68b05ba68f164a5acf308ce7dd18e57c}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+flow\+Stats\+Dl@{m\+\_\+flow\+Stats\+Dl}}
\index{m\+\_\+flow\+Stats\+Dl@{m\+\_\+flow\+Stats\+Dl}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+flow\+Stats\+Dl}{m_flowStatsDl}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Cqas\+Flow\+Perf\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+flow\+Stats\+Dl\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}{}\label{classns3_1_1CqaFfMacScheduler_a1cf6c47e55cbcfb9c28b17c242bde972}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+flow\+Stats\+Ul@{m\+\_\+flow\+Stats\+Ul}}
\index{m\+\_\+flow\+Stats\+Ul@{m\+\_\+flow\+Stats\+Ul}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+flow\+Stats\+Ul}{m_flowStatsUl}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Cqas\+Flow\+Perf\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+flow\+Stats\+Ul\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}{}\label{classns3_1_1CqaFfMacScheduler_ab5815a4876dc296d83b3d2d633418312}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+harq\+On@{m\+\_\+harq\+On}}
\index{m\+\_\+harq\+On@{m\+\_\+harq\+On}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+harq\+On}{m_harqOn}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+harq\+On\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}{}\label{classns3_1_1CqaFfMacScheduler_afcb424ab57ad0d96293a7970c0b55dcf}
m\+\_\+harq\+On when false inhibit te H\+A\+RQ mechanisms (by default active) \index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+next\+Rnti\+Ul@{m\+\_\+next\+Rnti\+Ul}}
\index{m\+\_\+next\+Rnti\+Ul@{m\+\_\+next\+Rnti\+Ul}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+next\+Rnti\+Ul}{m_nextRntiUl}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+next\+Rnti\+Ul\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}{}\label{classns3_1_1CqaFfMacScheduler_adc4185e06ef2d451669d3b1b4f0d7760}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+p10\+Cqi\+Rxed@{m\+\_\+p10\+Cqi\+Rxed}}
\index{m\+\_\+p10\+Cqi\+Rxed@{m\+\_\+p10\+Cqi\+Rxed}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+p10\+Cqi\+Rxed}{m_p10CqiRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint8\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+p10\+Cqi\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}{}\label{classns3_1_1CqaFfMacScheduler_a05d86455f13e9c54ef7b7be87d74bf62}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+p10\+Cqi\+Timers@{m\+\_\+p10\+Cqi\+Timers}}
\index{m\+\_\+p10\+Cqi\+Timers@{m\+\_\+p10\+Cqi\+Timers}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+p10\+Cqi\+Timers}{m_p10CqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+p10\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}{}\label{classns3_1_1CqaFfMacScheduler_a3ca7ca5692a1cc661ac68052dc595948}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+rach\+Allocation\+Map@{m\+\_\+rach\+Allocation\+Map}}
\index{m\+\_\+rach\+Allocation\+Map@{m\+\_\+rach\+Allocation\+Map}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rach\+Allocation\+Map}{m_rachAllocationMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$uint16\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+rach\+Allocation\+Map\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}{}\label{classns3_1_1CqaFfMacScheduler_a813fe1147a11b3b5c34d9a345535a920}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+rach\+List@{m\+\_\+rach\+List}}
\index{m\+\_\+rach\+List@{m\+\_\+rach\+List}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rach\+List}{m_rachList}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$struct {\bf Rach\+List\+Element\+\_\+s}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+rach\+List\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a8acbb79b06264ecc897614a20f77a3ad}{}\label{classns3_1_1CqaFfMacScheduler_a8acbb79b06264ecc897614a20f77a3ad}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+rlc\+Buffer\+Req@{m\+\_\+rlc\+Buffer\+Req}}
\index{m\+\_\+rlc\+Buffer\+Req@{m\+\_\+rlc\+Buffer\+Req}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rlc\+Buffer\+Req}{m_rlcBufferReq}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Lte\+Flow\+Id\+\_\+t}, {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+rlc\+Buffer\+Req\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}{}\label{classns3_1_1CqaFfMacScheduler_ae9f6c7fc32e6dd08573470c70d827610}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+sched\+Sap\+Provider@{m\+\_\+sched\+Sap\+Provider}}
\index{m\+\_\+sched\+Sap\+Provider@{m\+\_\+sched\+Sap\+Provider}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+sched\+Sap\+Provider}{m_schedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+Provider}$\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+sched\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ac139d5e64c1bdd47b31e3f8ae1633ebc}{}\label{classns3_1_1CqaFfMacScheduler_ac139d5e64c1bdd47b31e3f8ae1633ebc}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+sched\+Sap\+User@{m\+\_\+sched\+Sap\+User}}
\index{m\+\_\+sched\+Sap\+User@{m\+\_\+sched\+Sap\+User}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+sched\+Sap\+User}{m_schedSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+User}$\ast$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+sched\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}{}\label{classns3_1_1CqaFfMacScheduler_a42f4b19ce093643c5fa8202ac18ec569}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+time\+Window@{m\+\_\+time\+Window}}
\index{m\+\_\+time\+Window@{m\+\_\+time\+Window}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+time\+Window}{m_timeWindow}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+time\+Window\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}{}\label{classns3_1_1CqaFfMacScheduler_a2e6951b5a91130305fe3d835bca0f33d}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ue\+Cqi@{m\+\_\+ue\+Cqi}}
\index{m\+\_\+ue\+Cqi@{m\+\_\+ue\+Cqi}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ue\+Cqi}{m_ueCqi}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, std\+::vector $<$double$>$ $>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ue\+Cqi\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}{}\label{classns3_1_1CqaFfMacScheduler_a263024e4342a26bfc2fabd0697da8641}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ue\+Cqi\+Timers@{m\+\_\+ue\+Cqi\+Timers}}
\index{m\+\_\+ue\+Cqi\+Timers@{m\+\_\+ue\+Cqi\+Timers}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ue\+Cqi\+Timers}{m_ueCqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, uint32\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ue\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}{}\label{classns3_1_1CqaFfMacScheduler_a3393d690f2b1d2a41e428b87318b15e1}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ue\+Logical\+Channels\+Config\+List@{m\+\_\+ue\+Logical\+Channels\+Config\+List}}
\index{m\+\_\+ue\+Logical\+Channels\+Config\+List@{m\+\_\+ue\+Logical\+Channels\+Config\+List}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ue\+Logical\+Channels\+Config\+List}{m_ueLogicalChannelsConfigList}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Lte\+Flow\+Id\+\_\+t},struct {\bf Logical\+Channel\+Config\+List\+Element\+\_\+s}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ue\+Logical\+Channels\+Config\+List\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}{}\label{classns3_1_1CqaFfMacScheduler_a2e7fafcc959bf531979bc041782ac5b1}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ues\+Tx\+Mode@{m\+\_\+ues\+Tx\+Mode}}
\index{m\+\_\+ues\+Tx\+Mode@{m\+\_\+ues\+Tx\+Mode}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ues\+Tx\+Mode}{m_uesTxMode}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t,uint8\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ues\+Tx\+Mode\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}{}\label{classns3_1_1CqaFfMacScheduler_ac556c4275bc3c2c078fd5856069ba0ca}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Grant\+Mcs@{m\+\_\+ul\+Grant\+Mcs}}
\index{m\+\_\+ul\+Grant\+Mcs@{m\+\_\+ul\+Grant\+Mcs}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Grant\+Mcs}{m_ulGrantMcs}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Grant\+Mcs\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}{}\label{classns3_1_1CqaFfMacScheduler_a6ecc5189910f7224f44baf74d8fa8684}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Current\+Process\+Id@{m\+\_\+ul\+Harq\+Current\+Process\+Id}}
\index{m\+\_\+ul\+Harq\+Current\+Process\+Id@{m\+\_\+ul\+Harq\+Current\+Process\+Id}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Current\+Process\+Id}{m_ulHarqCurrentProcessId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, uint8\+\_\+t$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Current\+Process\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}{}\label{classns3_1_1CqaFfMacScheduler_a55974c35f8b783bb902ae8676fb6ff10}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}}
\index{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}{m_ulHarqProcessesDciBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Ul\+Harq\+Processes\+Dci\+Buffer\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}{}\label{classns3_1_1CqaFfMacScheduler_a9af9c203c1b5fc43336988caf2294562}
\index{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Processes\+Status@{m\+\_\+ul\+Harq\+Processes\+Status}}
\index{m\+\_\+ul\+Harq\+Processes\+Status@{m\+\_\+ul\+Harq\+Processes\+Status}!ns3\+::\+Cqa\+Ff\+Mac\+Scheduler@{ns3\+::\+Cqa\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Processes\+Status}{m_ulHarqProcessesStatus}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint16\+\_\+t, {\bf Ul\+Harq\+Processes\+Status\+\_\+t}$>$ ns3\+::\+Cqa\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Processes\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}{}\label{classns3_1_1CqaFfMacScheduler_a6dd8ea014c55132578f7c050e726f856}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/model/\hyperlink{cqa-ff-mac-scheduler_8h}{cqa-\/ff-\/mac-\/scheduler.\+h}\item 
lte/model/\hyperlink{cqa-ff-mac-scheduler_8cc}{cqa-\/ff-\/mac-\/scheduler.\+cc}\end{DoxyCompactItemize}
