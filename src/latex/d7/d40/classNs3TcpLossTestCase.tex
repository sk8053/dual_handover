\hypertarget{classNs3TcpLossTestCase}{}\section{Ns3\+Tcp\+Loss\+Test\+Case Class Reference}
\label{classNs3TcpLossTestCase}\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}


Inheritance diagram for Ns3\+Tcp\+Loss\+Test\+Case\+:
% FIG 0


Collaboration diagram for Ns3\+Tcp\+Loss\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classNs3TcpLossTestCase_ae57e3b847f2071e616327a3038a25f90}{Ns3\+Tcp\+Loss\+Test\+Case} ()
\item 
\hyperlink{classNs3TcpLossTestCase_a0d64199faef844c06846d80c2193b92a}{Ns3\+Tcp\+Loss\+Test\+Case} (std\+::string tcp\+Model, uint32\+\_\+t test\+Case)
\item 
virtual \hyperlink{classNs3TcpLossTestCase_acc85b9650c965a82e9ebd58400d9d718}{$\sim$\+Ns3\+Tcp\+Loss\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classNs3TcpLossTestCase_a08237ed89cdb33439db0d70432dc773a}{Do\+Setup} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classNs3TcpLossTestCase_aa6494c8b5df42627efd9625374b2eeeb}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classNs3TcpLossTestCase_aec944c7c89b90381e63893e48ae3fd49}{Do\+Teardown} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classNs3TcpLossTestCase_ae9d29d3511ccbdbd60805872294ae8ce}{Ipv4\+L3\+Tx} (std\+::string context, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4}{Ipv4} $>$ ipv4, uint32\+\_\+t interface)
\item 
void \hyperlink{classNs3TcpLossTestCase_a00c3bb7a787ad770c7d7c10c9e7ad660}{Cwnd\+Tracer} (uint32\+\_\+t oldval, uint32\+\_\+t newval)
\item 
void \hyperlink{classNs3TcpLossTestCase_ad1c2e8c2cf5e35baa4d8860c9d941af8}{Write\+Until\+Buffer\+Full} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ local\+Socket, uint32\+\_\+t tx\+Space)
\item 
void \hyperlink{classNs3TcpLossTestCase_a4a1869d1f22376be8825bab6cb172e30}{Start\+Flow} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ local\+Socket, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} serv\+Address, uint16\+\_\+t serv\+Port)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1OutputStreamWrapper}{Output\+Stream\+Wrapper} $>$ \hyperlink{classNs3TcpLossTestCase_a8fa59eac8a25ec3d0b394e8b27ddc7c5}{m\+\_\+osw}
\item 
std\+::string \hyperlink{classNs3TcpLossTestCase_ae05885e96d3f3f935e6ddfcb3f534407}{m\+\_\+pcap\+Filename}
\item 
\hyperlink{classns3_1_1PcapFile}{Pcap\+File} \hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\+\_\+pcap\+File}
\item 
uint32\+\_\+t \hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\+\_\+test\+Case}
\item 
uint32\+\_\+t \hyperlink{classNs3TcpLossTestCase_ac06e95861fbb4ed79486d76a752a83d9}{m\+\_\+total\+Tx\+Bytes}
\item 
uint32\+\_\+t \hyperlink{classNs3TcpLossTestCase_a3ddd820ce273cb02ec0d500da76a88e2}{m\+\_\+current\+Tx\+Bytes}
\item 
bool \hyperlink{classNs3TcpLossTestCase_a6b4ff8445b57a44939392bb79b00d963}{m\+\_\+write\+Vectors}
\item 
bool \hyperlink{classNs3TcpLossTestCase_a8fe8477271a2be320b5111feeea6a9e8}{m\+\_\+write\+Results}
\item 
bool \hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\+\_\+write\+Logging}
\item 
bool \hyperlink{classNs3TcpLossTestCase_afdd4755f5e27da04bf3385eab1068495}{m\+\_\+need\+To\+Close}
\item 
std\+::string \hyperlink{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}{m\+\_\+tcp\+Model}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ns3\+Tcp\+Loss\+Test\+Case()}{Ns3TcpLossTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Ns3\+Tcp\+Loss\+Test\+Case\+::\+Ns3\+Tcp\+Loss\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classNs3TcpLossTestCase_ae57e3b847f2071e616327a3038a25f90}{}\label{classNs3TcpLossTestCase_ae57e3b847f2071e616327a3038a25f90}

\begin{DoxyCode}
103   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check the operation of the TCP state machine for several cases"}),
104     \hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\_testCase} (0),
105     \hyperlink{classNs3TcpLossTestCase_ac06e95861fbb4ed79486d76a752a83d9}{m\_totalTxBytes} (200000),
106     \hyperlink{classNs3TcpLossTestCase_a3ddd820ce273cb02ec0d500da76a88e2}{m\_currentTxBytes} (0),
107     \hyperlink{classNs3TcpLossTestCase_a6b4ff8445b57a44939392bb79b00d963}{m\_writeVectors} (\hyperlink{ns3tcp-loss-test-suite_8cc_a6829179e1fbdbc03f407d65a63c07153}{WRITE\_VECTORS}),
108     \hyperlink{classNs3TcpLossTestCase_a8fe8477271a2be320b5111feeea6a9e8}{m\_writeResults} (\hyperlink{ns3tcp-loss-test-suite_8cc_a9ba71edaadfde927e9912e6b37a37f39}{WRITE\_PCAP}),
109     \hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging} (\hyperlink{ns3tcp-loss-test-suite_8cc_ad6baebe9f475ef91ab29a12e30e30e7b}{WRITE\_LOGGING}),
110     \hyperlink{classNs3TcpLossTestCase_afdd4755f5e27da04bf3385eab1068495}{m\_needToClose} (\textcolor{keyword}{true}),
111     \hyperlink{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}{m\_tcpModel} (\textcolor{stringliteral}{"ns3::TcpWestwood"})
112 \{
113 \}
\end{DoxyCode}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ns3\+Tcp\+Loss\+Test\+Case(std\+::string tcp\+Model, uint32\+\_\+t test\+Case)}{Ns3TcpLossTestCase(std::string tcpModel, uint32_t testCase)}}]{\setlength{\rightskip}{0pt plus 5cm}Ns3\+Tcp\+Loss\+Test\+Case\+::\+Ns3\+Tcp\+Loss\+Test\+Case (
\begin{DoxyParamCaption}
\item[{std\+::string}]{tcp\+Model, }
\item[{uint32\+\_\+t}]{test\+Case}
\end{DoxyParamCaption}
)}\hypertarget{classNs3TcpLossTestCase_a0d64199faef844c06846d80c2193b92a}{}\label{classNs3TcpLossTestCase_a0d64199faef844c06846d80c2193b92a}

\begin{DoxyCode}
116   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check the behaviour of TCP upon packet losses"}),
117     \hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\_testCase} (testCase),
118     \hyperlink{classNs3TcpLossTestCase_ac06e95861fbb4ed79486d76a752a83d9}{m\_totalTxBytes} (200000),
119     \hyperlink{classNs3TcpLossTestCase_a3ddd820ce273cb02ec0d500da76a88e2}{m\_currentTxBytes} (0),
120     \hyperlink{classNs3TcpLossTestCase_a6b4ff8445b57a44939392bb79b00d963}{m\_writeVectors} (\hyperlink{ns3tcp-loss-test-suite_8cc_a6829179e1fbdbc03f407d65a63c07153}{WRITE\_VECTORS}),
121     \hyperlink{classNs3TcpLossTestCase_a8fe8477271a2be320b5111feeea6a9e8}{m\_writeResults} (\hyperlink{ns3tcp-loss-test-suite_8cc_a9ba71edaadfde927e9912e6b37a37f39}{WRITE\_PCAP}),
122     \hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging} (\hyperlink{ns3tcp-loss-test-suite_8cc_ad6baebe9f475ef91ab29a12e30e30e7b}{WRITE\_LOGGING}),
123     \hyperlink{classNs3TcpLossTestCase_afdd4755f5e27da04bf3385eab1068495}{m\_needToClose} (\textcolor{keyword}{true}),
124     \hyperlink{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}{m\_tcpModel} (tcpModel)
125 \{
126 \}
\end{DoxyCode}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!````~Ns3\+Tcp\+Loss\+Test\+Case@{$\sim$\+Ns3\+Tcp\+Loss\+Test\+Case}}
\index{````~Ns3\+Tcp\+Loss\+Test\+Case@{$\sim$\+Ns3\+Tcp\+Loss\+Test\+Case}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Ns3\+Tcp\+Loss\+Test\+Case()}{~Ns3TcpLossTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual Ns3\+Tcp\+Loss\+Test\+Case\+::$\sim$\+Ns3\+Tcp\+Loss\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpLossTestCase_acc85b9650c965a82e9ebd58400d9d718}{}\label{classNs3TcpLossTestCase_acc85b9650c965a82e9ebd58400d9d718}

\begin{DoxyCode}
73   \{
74   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Cwnd\+Tracer@{Cwnd\+Tracer}}
\index{Cwnd\+Tracer@{Cwnd\+Tracer}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Cwnd\+Tracer(uint32\+\_\+t oldval, uint32\+\_\+t newval)}{CwndTracer(uint32_t oldval, uint32_t newval)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Loss\+Test\+Case\+::\+Cwnd\+Tracer (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{oldval, }
\item[{uint32\+\_\+t}]{newval}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a00c3bb7a787ad770c7d7c10c9e7ad660}{}\label{classNs3TcpLossTestCase_a00c3bb7a787ad770c7d7c10c9e7ad660}

\begin{DoxyCode}
227 \{
228   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging})
229     \{
230       *(\hyperlink{classNs3TcpLossTestCase_a8fa59eac8a25ec3d0b394e8b27ddc7c5}{m\_osw}->\hyperlink{classns3_1_1OutputStreamWrapper_a0cf30a4188ab6fdae2b2ab74db11acc2}{GetStream} ()) << \textcolor{stringliteral}{"Moving cwnd from "} << oldval << \textcolor{stringliteral}{" to "} << newval
231                              << \textcolor{stringliteral}{" at time "} << \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().
      \hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} ()
232                              << \textcolor{stringliteral}{" seconds"} << std::endl;
233     \}
234 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Loss\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpLossTestCase_aa6494c8b5df42627efd9625374b2eeeb}{}\label{classNs3TcpLossTestCase_aa6494c8b5df42627efd9625374b2eeeb}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
296 \{
297   \textcolor{comment}{// Network topology}
298   \textcolor{comment}{//}
299   \textcolor{comment}{//           8Mb/s, 0.1ms       0.8Mb/s, 100ms}
300   \textcolor{comment}{//       s1-----------------r1-----------------k1}
301   \textcolor{comment}{//}
302   \textcolor{comment}{// Example corresponding to simulations in the paper "Simulation-based}
303   \textcolor{comment}{// Comparisons of Tahoe, Reno, and SACK TCP}
304 
305   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocketBase::Sack"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
306 
307   std::ostringstream tcpModel;
308   tcpModel << \textcolor{stringliteral}{"ns3::Tcp"} << \hyperlink{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}{m\_tcpModel};
309   \textcolor{keywordflow}{if} (m\_tcpModel.compare (\textcolor{stringliteral}{"WestwoodPlus"}) == 0)
310     \{
311       \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpL4Protocol::SocketType"},
312                           TypeIdValue (TcpWestwood::GetTypeId ()));
313       \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpWestwood::ProtocolType"},
314                           \hyperlink{classns3_1_1EnumValue}{EnumValue} (TcpWestwood::WESTWOODPLUS));
315     \}
316   \textcolor{keywordflow}{else}
317     \{
318       \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpL4Protocol::SocketType"},
319                           StringValue (tcpModel.str ()));
320     \}
321 
322   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocket::SegmentSize"}, UintegerValue (1000));
323   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocket::DelAckCount"}, UintegerValue (1));
324   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocketBase::Timestamp"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
325 
326   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging})
327     \{
328       \hyperlink{namespacens3_aef610a7dcaaa6c20499283526b538582}{LogComponentEnableAll} (\hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba0dd332264f60317e9a365095e80037d1}{LOG\_PREFIX\_FUNC});
329       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"Ns3TcpLossTest"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba022b1237a4fd1b08d034471df3c58586}{LOG\_LEVEL\_ALL});
330       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"ErrorModel"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbabc85ae851e992c4d8577705c712061ef}{LOG\_LEVEL\_DEBUG});
331       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"TcpWestwood"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba022b1237a4fd1b08d034471df3c58586}{LOG\_LEVEL\_ALL});
332       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"TcpCongestionOps"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbae36aedc880de94fd5a5b53bb9fe65628}{LOG\_LEVEL\_INFO});
333       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"TcpSocketBase"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbae36aedc880de94fd5a5b53bb9fe65628}{LOG\_LEVEL\_INFO});
334     \}
335 
337   \textcolor{comment}{// Topology construction}
338   \textcolor{comment}{//}
339 
340   \textcolor{comment}{// Create three nodes: s1, r1, and k1}
341   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} s1r1;
342   s1r1.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (2);
343 
344   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} r1k1;
345   r1k1.\hyperlink{classns3_1_1NodeContainer_aa60b3a0e70f2fb324e16ffcf8bf31fcb}{Add} (s1r1.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
346   r1k1.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
347 
348   \textcolor{comment}{// Set up TCP/IP stack to all nodes (and create loopback device at device 0)}
349   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
350   internet.\hyperlink{classns3_1_1InternetStackHelper_a6cfa73782fd4071c4cfbd73ebf1bbb44}{InstallAll} ();
351 
352   \textcolor{comment}{// Connect the nodes}
353   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} p2p;
354   p2p.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (\hyperlink{classns3_1_1DataRate}{DataRate} (8000000)));
355   p2p.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0001)));
356   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} dev0 = p2p.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (s1r1);
357   p2p.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (\hyperlink{classns3_1_1DataRate}{DataRate} (800000)));
358   p2p.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.1)));
359   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} dev1 = p2p.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (r1k1);
360 
361   \textcolor{comment}{// Add IP addresses to each network interfaces}
362   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4;
363   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.3.0"}, \textcolor{stringliteral}{"255.255.255.0"});
364   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (dev0);
365   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.2.0"}, \textcolor{stringliteral}{"255.255.255.0"});
366   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ipInterfs = ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (dev1);
367 
368   \textcolor{comment}{// Set up routes to all nodes}
369   Ipv4GlobalRoutingHelper::PopulateRoutingTables ();
370 
372   \textcolor{comment}{// Send 20000 (totalTxBytes) bytes from node s1 to node k1}
373   \textcolor{comment}{//}
374 
375   \textcolor{comment}{// Create a packet sink to receive packets on node k1}
376   uint16\_t servPort = 50000; \textcolor{comment}{// Destination port number}
377   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} sink (\textcolor{stringliteral}{"ns3::TcpSocketFactory"},
378                          \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), servPort));
379   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} apps = sink.Install (r1k1.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
380   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0));
381   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (100.0));
382 
383   \textcolor{comment}{// Create a data source to send packets on node s0.}
384   \textcolor{comment}{// Instead of full application, here use the socket directly by}
385   \textcolor{comment}{// registering callbacks in function StarFlow().}
386   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} localSocket = Socket::CreateSocket (s1r1.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0), TcpSocketFactory::GetTypeId (
      ));
387   localSocket->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} ();
388   Simulator::ScheduleNow (&\hyperlink{classNs3TcpLossTestCase_a4a1869d1f22376be8825bab6cb172e30}{Ns3TcpLossTestCase::StartFlow},
389                           \textcolor{keyword}{this},
390                           localSocket,
391                           ipInterfs.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (1),
392                           servPort);
393 
394   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/0/$ns3::Ipv4L3Protocol/Tx"},
395                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classNs3TcpLossTestCase_ae9d29d3511ccbdbd60805872294ae8ce}{Ns3TcpLossTestCase::Ipv4L3Tx}, \textcolor{keyword}{
      this}));
396 
397   \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext}
398     (\textcolor{stringliteral}{"/NodeList/0/$ns3::TcpL4Protocol/SocketList/0/CongestionWindow"},
399     \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classNs3TcpLossTestCase_a00c3bb7a787ad770c7d7c10c9e7ad660}{Ns3TcpLossTestCase::CwndTracer}, \textcolor{keyword}{this}));
400 
402   \textcolor{comment}{// Set up loss model at node k1}
403   \textcolor{comment}{//}
404   std::list<uint32\_t> sampleList;
405   \textcolor{keywordflow}{switch} (\hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\_testCase})
406     \{
407     \textcolor{keywordflow}{case} 0:
408       \textcolor{keywordflow}{break};
409     \textcolor{keywordflow}{case} 1:
410       \textcolor{comment}{// Force a loss for 15th data packet. TCP cwnd will be at 14 segments}
411       \textcolor{comment}{// (14000 bytes) when duplicate acknowledgments start to come.}
412       sampleList.push\_back (16);
413       \textcolor{keywordflow}{break};
414     \textcolor{keywordflow}{case} 2:
415       sampleList.push\_back (16);
416       sampleList.push\_back (17);
417       \textcolor{keywordflow}{break};
418     \textcolor{keywordflow}{case} 3:
419       sampleList.push\_back (16);
420       sampleList.push\_back (17);
421       sampleList.push\_back (18);
422       \textcolor{keywordflow}{break};
423     \textcolor{keywordflow}{case} 4:
424       sampleList.push\_back (16);
425       sampleList.push\_back (17);
426       sampleList.push\_back (18);
427       sampleList.push\_back (19);
428       \textcolor{keywordflow}{break};
429     \textcolor{keywordflow}{default}:
430       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Program fatal error: loss value "} << 
      \hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\_testCase} << \textcolor{stringliteral}{" not supported."});
431       \textcolor{keywordflow}{break};
432     \}
433 
434   \hyperlink{classns3_1_1Ptr}{Ptr<ReceiveListErrorModel>} pem = CreateObject<ReceiveListErrorModel> ();
435   pem->\hyperlink{classns3_1_1ReceiveListErrorModel_ae710ec96d43c47bedb5d941351a4d809}{SetList} (sampleList);
436   dev1.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1)->SetAttribute (\textcolor{stringliteral}{"ReceiveErrorModel"}, \hyperlink{classns3_1_1PointerValue}{PointerValue} (pem));
437 
438   \textcolor{comment}{// One can toggle the comment for the following line on or off to see the}
439   \textcolor{comment}{// effects of finite send buffer modelling.  One can also change the size of}
440   \textcolor{comment}{// that buffer.}
441   \textcolor{comment}{// localSocket->SetAttribute("SndBufSize", UintegerValue(4096));}
442 
443   std::ostringstream oss;
444   oss << \textcolor{stringliteral}{"tcp-loss-"} << m\_tcpModel << \hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\_testCase} << \textcolor{stringliteral}{"-test-case"};
445   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a8fe8477271a2be320b5111feeea6a9e8}{m\_writeResults})
446     \{
447       p2p.\hyperlink{classns3_1_1PcapHelperForDevice_a4ab183a2512120200d4a0e5d8ececd49}{EnablePcapAll} (oss.str ());
448       p2p.\hyperlink{classns3_1_1AsciiTraceHelperForDevice_a63e57c878526c732924e14c1e52cca8b}{EnableAsciiAll} (oss.str ());
449     \}
450 
451   std::ostringstream oss2;
452   oss2 << \textcolor{stringliteral}{"src/test/ns3tcp/Tcp"} << m\_tcpModel << \textcolor{stringliteral}{"."} << m\_testCase << \textcolor{stringliteral}{".log"};
453   \hyperlink{classns3_1_1AsciiTraceHelper}{AsciiTraceHelper} ascii;
454   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging})
455     \{
456       \hyperlink{classNs3TcpLossTestCase_a8fa59eac8a25ec3d0b394e8b27ddc7c5}{m\_osw} = ascii.\hyperlink{classns3_1_1AsciiTraceHelper_a44960bf2ca32835024eaedd26d1c4f94}{CreateFileStream} (oss2.str ());
457       *(\hyperlink{classNs3TcpLossTestCase_a8fa59eac8a25ec3d0b394e8b27ddc7c5}{m\_osw}->\hyperlink{classns3_1_1OutputStreamWrapper_a0cf30a4188ab6fdae2b2ab74db11acc2}{GetStream} ()) << std::setprecision (9) << std::fixed;
458       p2p.\hyperlink{classns3_1_1AsciiTraceHelperForDevice_a63e57c878526c732924e14c1e52cca8b}{EnableAsciiAll} (\hyperlink{classNs3TcpLossTestCase_a8fa59eac8a25ec3d0b394e8b27ddc7c5}{m\_osw});
459     \}
460 
461   \textcolor{comment}{// Finally, set up the simulator to run.  The 1000 second hard limit is a}
462   \textcolor{comment}{// failsafe in case some change above causes the simulation to never end}
463   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1000));
464   Simulator::Run ();
465   Simulator::Destroy ();
466 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Do\+Setup@{Do\+Setup}}
\index{Do\+Setup@{Do\+Setup}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Setup(void)}{DoSetup(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Loss\+Test\+Case\+::\+Do\+Setup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpLossTestCase_a08237ed89cdb33439db0d70432dc773a}{}\label{classNs3TcpLossTestCase_a08237ed89cdb33439db0d70432dc773a}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test setup before Do\+Run is invoked. 

Reimplemented from \hyperlink{classns3_1_1TestCase_a4a7e32ad32a10a508910815cd38e9177}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
130 \{
131   \textcolor{comment}{//}
132   \textcolor{comment}{// We expect there to be a file called ns3tcp-state-response-vectors.pcap in}
133   \textcolor{comment}{// the data directory}
134   \textcolor{comment}{//}
135   std::ostringstream oss;
136   oss << \textcolor{stringliteral}{"ns3tcp-loss-"} << \hyperlink{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}{m\_tcpModel} << \hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\_testCase} << \textcolor{stringliteral}{"-response-vectors.pcap"};
137   \hyperlink{classNs3TcpLossTestCase_ae05885e96d3f3f935e6ddfcb3f534407}{m\_pcapFilename} = \hyperlink{classns3_1_1TestCase_a3e4d216ff392a43418f26bb3e5b0f16d}{CreateDataDirFilename} (oss.str ());
138 
139   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a6b4ff8445b57a44939392bb79b00d963}{m\_writeVectors})
140     \{
141       \hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classNs3TcpLossTestCase_ae05885e96d3f3f935e6ddfcb3f534407}{m\_pcapFilename}, std::ios::out | std::ios::binary);
142       \hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a80c8adea1baa66e3f730df2927b0fc9b}{Init} (\hyperlink{ns3tcp-loss-test-suite_8cc_a1d33ea10cde9143eb9b36be021f3739e}{PCAP\_LINK\_TYPE}, \hyperlink{ns3tcp-loss-test-suite_8cc_ae9a6b49b98d0c7917dda456f6771d2e1}{PCAP\_SNAPLEN});
143     \}
144   \textcolor{keywordflow}{else}
145     \{
146       \hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classNs3TcpLossTestCase_ae05885e96d3f3f935e6ddfcb3f534407}{m\_pcapFilename}, std::ios::in | std::ios::binary);
147       \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} (\hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\_pcapFile}.
      \hyperlink{classns3_1_1PcapFile_aa3795e9a87e7a4151fb4d30747eaa072}{GetDataLinkType} () == \hyperlink{ns3tcp-loss-test-suite_8cc_a1d33ea10cde9143eb9b36be021f3739e}{PCAP\_LINK\_TYPE},
148                            \textcolor{stringliteral}{"Wrong response vectors in directory: opening "} <<
149                            \hyperlink{classNs3TcpLossTestCase_ae05885e96d3f3f935e6ddfcb3f534407}{m\_pcapFilename});
150     \}
151 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Do\+Teardown@{Do\+Teardown}}
\index{Do\+Teardown@{Do\+Teardown}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Teardown(void)}{DoTeardown(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Loss\+Test\+Case\+::\+Do\+Teardown (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpLossTestCase_aec944c7c89b90381e63893e48ae3fd49}{}\label{classNs3TcpLossTestCase_aec944c7c89b90381e63893e48ae3fd49}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test teardown 

Reimplemented from \hyperlink{classns3_1_1TestCase_a8917f1604e28d312a8086f76291e3c46}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
155 \{
156   \hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_ad3b6c28d464742ee1fa3a64628339a5b}{Close} ();
157 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Ipv4\+L3\+Tx@{Ipv4\+L3\+Tx}}
\index{Ipv4\+L3\+Tx@{Ipv4\+L3\+Tx}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ipv4\+L3\+Tx(std\+::string context, Ptr$<$ const Packet $>$ packet, Ptr$<$ Ipv4 $>$ ipv4, uint32\+\_\+t interface)}{Ipv4L3Tx(std::string context, Ptr< const Packet > packet, Ptr< Ipv4 > ipv4, uint32_t interface)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Loss\+Test\+Case\+::\+Ipv4\+L3\+Tx (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet, }
\item[{{\bf Ptr}$<$ {\bf Ipv4} $>$}]{ipv4, }
\item[{uint32\+\_\+t}]{interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_ae9d29d3511ccbdbd60805872294ae8ce}{}\label{classNs3TcpLossTestCase_ae9d29d3511ccbdbd60805872294ae8ce}

\begin{DoxyCode}
161 \{
162   \textcolor{comment}{//}
163   \textcolor{comment}{// We're not testing IP so remove and toss the header.  In order to do this,}
164   \textcolor{comment}{// though, we need to copy the packet since we have a const version.}
165   \textcolor{comment}{//}
166   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} received = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
167   \hyperlink{classns3_1_1Ipv4Header}{Ipv4Header} ipHeader;
168   received->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (ipHeader);
169 
170   \textcolor{comment}{//}
171   \textcolor{comment}{// What is left is the TCP header and any data that may be sent.  We aren't}
172   \textcolor{comment}{// sending any TCP data, so we expect what remains is only TCP header, which}
173   \textcolor{comment}{// is a small thing to save.}
174   \textcolor{comment}{//}
175   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a6b4ff8445b57a44939392bb79b00d963}{m\_writeVectors})
176     \{
177       \textcolor{comment}{//}
178       \textcolor{comment}{// Save the TCP under test response for later testing.}
179       \textcolor{comment}{//}
180       \hyperlink{classns3_1_1Time}{Time} tNow = \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ();
181       int64\_t tMicroSeconds = tNow.\hyperlink{classns3_1_1Time_a2542b9273c336da11fcaf54e8bc6e4c8}{GetMicroSeconds} ();
182 
183 
184       \hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a3920f5bae95ca0021875e6e9c2630ccf}{Write} (uint32\_t (tMicroSeconds / 1000000),
185                         uint32\_t (tMicroSeconds % 1000000),
186                         received);
187     \}
188   \textcolor{keywordflow}{else}
189     \{
190       \textcolor{comment}{//}
191       \textcolor{comment}{// Read the TCP under test expected response from the expected vector}
192       \textcolor{comment}{// file and see if it still does the right thing.}
193       \textcolor{comment}{//}
194       uint8\_t expectedBuffer[\hyperlink{ns3tcp-loss-test-suite_8cc_ae9a6b49b98d0c7917dda456f6771d2e1}{PCAP\_SNAPLEN}];
195       uint32\_t tsSec, tsUsec, inclLen, origLen, readLen;
196       \hyperlink{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a18c5045735408fe45a8cbc9e6b34a4fb}{Read} (expectedBuffer, \textcolor{keyword}{sizeof}(expectedBuffer), tsSec, tsUsec, inclLen, 
      origLen, readLen);
197 
198       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"read "} << readLen << \textcolor{stringliteral}{" bytes"});
199 
200       uint8\_t *actual = \textcolor{keyword}{new} uint8\_t[readLen];
201       received->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (actual, readLen);
202 
203       \textcolor{keywordtype}{int} result = memcmp (actual, expectedBuffer, readLen);
204 
205       \hyperlink{classns3_1_1TcpHeader}{TcpHeader} expectedHeader, receivedHeader;
206       \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} expected = Create<Packet> (expectedBuffer, readLen);
207 
208       expected->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (expectedHeader);
209       received->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (receivedHeader);
210 
211       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Expected "} << expectedHeader << \textcolor{stringliteral}{" received: "} << receivedHeader);
212 
213       \textcolor{keyword}{delete} [] actual;
214 
215       \textcolor{comment}{//}
216       \textcolor{comment}{// Avoid streams of errors -- only report the first.}
217       \textcolor{comment}{//}
218       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TestCase_a76d97c8d3aadccc6231e50d863cde388}{IsStatusSuccess} ())
219         \{
220           \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (result, 0, \textcolor{stringliteral}{"Expected data comparison error: "} << 
      \hyperlink{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}{m\_tcpModel} << \textcolor{stringliteral}{"-"} << \hyperlink{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{m\_testCase});
221         \}
222     \}
223 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Start\+Flow@{Start\+Flow}}
\index{Start\+Flow@{Start\+Flow}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Start\+Flow(\+Ptr$<$ Socket $>$ local\+Socket, Ipv4\+Address serv\+Address, uint16\+\_\+t serv\+Port)}{StartFlow(Ptr< Socket > localSocket, Ipv4Address servAddress, uint16_t servPort)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Loss\+Test\+Case\+::\+Start\+Flow (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{local\+Socket, }
\item[{{\bf Ipv4\+Address}}]{serv\+Address, }
\item[{uint16\+\_\+t}]{serv\+Port}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a4a1869d1f22376be8825bab6cb172e30}{}\label{classNs3TcpLossTestCase_a4a1869d1f22376be8825bab6cb172e30}

\begin{DoxyCode}
278 \{
279   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging})
280     \{
281       std::clog << \textcolor{stringliteral}{"Starting flow at time "}
282                 <<  \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << std::endl;
283     \}
284   localSocket->\hyperlink{classns3_1_1Socket_a97f08aaf37b8fd7d4b5cad4dfdd4022a}{Connect} (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (servAddress, servPort)); \textcolor{comment}{// connect}
285 
286   \textcolor{comment}{// tell the tcp implementation to call WriteUntilBufferFull again}
287   \textcolor{comment}{// if we blocked and new tx buffer space becomes available}
288   localSocket->\hyperlink{classns3_1_1Socket_a85ff5c8cc7d242823f301b49264c68a4}{SetSendCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback}
289                                   (&\hyperlink{classNs3TcpLossTestCase_ad1c2e8c2cf5e35baa4d8860c9d941af8}{Ns3TcpLossTestCase::WriteUntilBufferFull}
      ,
290                                   \textcolor{keyword}{this}));
291   \hyperlink{classNs3TcpLossTestCase_ad1c2e8c2cf5e35baa4d8860c9d941af8}{WriteUntilBufferFull} (localSocket, localSocket->
      \hyperlink{classns3_1_1Socket_ae7cf62e3acf44106bfa1d40eaeaec151}{GetTxAvailable} ());
292 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!Write\+Until\+Buffer\+Full@{Write\+Until\+Buffer\+Full}}
\index{Write\+Until\+Buffer\+Full@{Write\+Until\+Buffer\+Full}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{Write\+Until\+Buffer\+Full(\+Ptr$<$ Socket $>$ local\+Socket, uint32\+\_\+t tx\+Space)}{WriteUntilBufferFull(Ptr< Socket > localSocket, uint32_t txSpace)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Loss\+Test\+Case\+::\+Write\+Until\+Buffer\+Full (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{local\+Socket, }
\item[{uint32\+\_\+t}]{tx\+Space}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_ad1c2e8c2cf5e35baa4d8860c9d941af8}{}\label{classNs3TcpLossTestCase_ad1c2e8c2cf5e35baa4d8860c9d941af8}

\begin{DoxyCode}
240 \{
241   \textcolor{keywordflow}{while} (\hyperlink{classNs3TcpLossTestCase_a3ddd820ce273cb02ec0d500da76a88e2}{m\_currentTxBytes} < \hyperlink{classNs3TcpLossTestCase_ac06e95861fbb4ed79486d76a752a83d9}{m\_totalTxBytes})
242     \{
243       uint32\_t left = \hyperlink{classNs3TcpLossTestCase_ac06e95861fbb4ed79486d76a752a83d9}{m\_totalTxBytes} - \hyperlink{classNs3TcpLossTestCase_a3ddd820ce273cb02ec0d500da76a88e2}{m\_currentTxBytes};
244       uint32\_t dataOffset = m\_currentTxBytes % 1040;
245       uint32\_t toWrite = 1040 - dataOffset;
246       uint32\_t txAvail = localSocket->\hyperlink{classns3_1_1Socket_ae7cf62e3acf44106bfa1d40eaeaec151}{GetTxAvailable} ();
247       toWrite = \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (toWrite, left);
248       toWrite = \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (toWrite, txAvail);
249       \textcolor{keywordflow}{if} (txAvail == 0)
250         \{
251           \textcolor{keywordflow}{return};
252         \}
253       \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging})
254         \{
255           std::clog << \textcolor{stringliteral}{"Submitting "} << toWrite
256                     << \textcolor{stringliteral}{" bytes to TCP socket"} << std::endl;
257         \}
258       \textcolor{keywordtype}{int} amountSent = localSocket->\hyperlink{classns3_1_1Socket_a036901c8f485fe5b6eab93b7f2ec289d}{Send} (0, toWrite, 0);
259       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (amountSent > 0);  \textcolor{comment}{// Given GetTxAvailable() non-zero, amountSent should not be
       zero}
260       m\_currentTxBytes += amountSent;
261     \}
262   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_afdd4755f5e27da04bf3385eab1068495}{m\_needToClose})
263     \{
264       \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{m\_writeLogging})
265         \{
266           std::clog << \textcolor{stringliteral}{"Close socket at "}
267                     <<  \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} () << std::endl;
268         \}
269       localSocket->\hyperlink{classns3_1_1Socket_abdac6e2498c5aa2963ef361d4200ddf3}{Close} ();
270       \hyperlink{classNs3TcpLossTestCase_afdd4755f5e27da04bf3385eab1068495}{m\_needToClose} = \textcolor{keyword}{false};
271     \}
272 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12




\subsection{Member Data Documentation}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+current\+Tx\+Bytes@{m\+\_\+current\+Tx\+Bytes}}
\index{m\+\_\+current\+Tx\+Bytes@{m\+\_\+current\+Tx\+Bytes}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Tx\+Bytes}{m_currentTxBytes}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+current\+Tx\+Bytes\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a3ddd820ce273cb02ec0d500da76a88e2}{}\label{classNs3TcpLossTestCase_a3ddd820ce273cb02ec0d500da76a88e2}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+need\+To\+Close@{m\+\_\+need\+To\+Close}}
\index{m\+\_\+need\+To\+Close@{m\+\_\+need\+To\+Close}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+need\+To\+Close}{m_needToClose}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+need\+To\+Close\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_afdd4755f5e27da04bf3385eab1068495}{}\label{classNs3TcpLossTestCase_afdd4755f5e27da04bf3385eab1068495}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+osw@{m\+\_\+osw}}
\index{m\+\_\+osw@{m\+\_\+osw}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+osw}{m_osw}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Output\+Stream\+Wrapper}$>$ Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+osw\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a8fa59eac8a25ec3d0b394e8b27ddc7c5}{}\label{classNs3TcpLossTestCase_a8fa59eac8a25ec3d0b394e8b27ddc7c5}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+pcap\+File@{m\+\_\+pcap\+File}}
\index{m\+\_\+pcap\+File@{m\+\_\+pcap\+File}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+pcap\+File}{m_pcapFile}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pcap\+File} Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+pcap\+File\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}{}\label{classNs3TcpLossTestCase_a6a02dbbf853025b7fe39393c1e1195ae}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+pcap\+Filename@{m\+\_\+pcap\+Filename}}
\index{m\+\_\+pcap\+Filename@{m\+\_\+pcap\+Filename}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+pcap\+Filename}{m_pcapFilename}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+pcap\+Filename\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_ae05885e96d3f3f935e6ddfcb3f534407}{}\label{classNs3TcpLossTestCase_ae05885e96d3f3f935e6ddfcb3f534407}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+tcp\+Model@{m\+\_\+tcp\+Model}}
\index{m\+\_\+tcp\+Model@{m\+\_\+tcp\+Model}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+tcp\+Model}{m_tcpModel}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+tcp\+Model\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}{}\label{classNs3TcpLossTestCase_afbac387ba94a6b5cd8760f688bab5008}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+test\+Case@{m\+\_\+test\+Case}}
\index{m\+\_\+test\+Case@{m\+\_\+test\+Case}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+test\+Case}{m_testCase}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+test\+Case\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}{}\label{classNs3TcpLossTestCase_a7a8850910d9da65bebe441babd05f979}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+total\+Tx\+Bytes@{m\+\_\+total\+Tx\+Bytes}}
\index{m\+\_\+total\+Tx\+Bytes@{m\+\_\+total\+Tx\+Bytes}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+total\+Tx\+Bytes}{m_totalTxBytes}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+total\+Tx\+Bytes\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_ac06e95861fbb4ed79486d76a752a83d9}{}\label{classNs3TcpLossTestCase_ac06e95861fbb4ed79486d76a752a83d9}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+write\+Logging@{m\+\_\+write\+Logging}}
\index{m\+\_\+write\+Logging@{m\+\_\+write\+Logging}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Logging}{m_writeLogging}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+write\+Logging\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}{}\label{classNs3TcpLossTestCase_a997665c1cf58a436a45b9e27766dd006}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+write\+Results@{m\+\_\+write\+Results}}
\index{m\+\_\+write\+Results@{m\+\_\+write\+Results}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Results}{m_writeResults}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+write\+Results\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a8fe8477271a2be320b5111feeea6a9e8}{}\label{classNs3TcpLossTestCase_a8fe8477271a2be320b5111feeea6a9e8}
\index{Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}!m\+\_\+write\+Vectors@{m\+\_\+write\+Vectors}}
\index{m\+\_\+write\+Vectors@{m\+\_\+write\+Vectors}!Ns3\+Tcp\+Loss\+Test\+Case@{Ns3\+Tcp\+Loss\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Vectors}{m_writeVectors}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+Loss\+Test\+Case\+::m\+\_\+write\+Vectors\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpLossTestCase_a6b4ff8445b57a44939392bb79b00d963}{}\label{classNs3TcpLossTestCase_a6b4ff8445b57a44939392bb79b00d963}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/ns3tcp/\hyperlink{ns3tcp-loss-test-suite_8cc}{ns3tcp-\/loss-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
