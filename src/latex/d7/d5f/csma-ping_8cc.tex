\hypertarget{csma-ping_8cc}{}\section{csma/examples/csma-\/ping.cc File Reference}
\label{csma-ping_8cc}\index{csma/examples/csma-\/ping.\+cc@{csma/examples/csma-\/ping.\+cc}}
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$fstream$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$cassert$>$}\\*
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/csma-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/applications-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/apps-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/module.\+h\char`\"{}}\\*
Include dependency graph for csma-\/ping.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{csma-ping_8cc_a00c95334e83a2ce34e1f2124c886b328}{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Csma\+Ping\+Example\char`\"{})
\item 
static void \hyperlink{csma-ping_8cc_ab5a3a26cb523a53ed19ba80dcbb97d11}{Sink\+Rx} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1Address}{Address} \&ad)
\item 
static void \hyperlink{csma-ping_8cc_a1a49f760c7e3da367b3406515d2a3ef9}{Ping\+Rtt} (std\+::string context, \hyperlink{classns3_1_1Time}{Time} rtt)
\item 
int \hyperlink{csma-ping_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{csma-\/ping.\+cc@{csma-\/ping.\+cc}!main@{main}}
\index{main@{main}!csma-\/ping.\+cc@{csma-\/ping.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{csma-ping_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{csma-ping_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
54 \{
55 
56   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
57   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc, argv);
58 
59   \textcolor{comment}{// Here, we will explicitly create four nodes.}
60   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create nodes."});
61   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c};
62   c.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (4);
63 
64   \textcolor{comment}{// connect all our nodes to a shared channel.}
65   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Build Topology."});
66   \hyperlink{classns3_1_1CsmaHelper}{CsmaHelper} csma;
67   csma.\hyperlink{classns3_1_1CsmaHelper_a886d900b2fe44433e0b81752dea7e7f1}{SetChannelAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (
      \hyperlink{classns3_1_1DataRate}{DataRate} (5000000)));
68   csma.\hyperlink{classns3_1_1CsmaHelper_a886d900b2fe44433e0b81752dea7e7f1}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (2)));
69   csma.\hyperlink{classns3_1_1CsmaHelper_a741c31b2526e3570cc62c9d7d9667ca9}{SetDeviceAttribute} (\textcolor{stringliteral}{"EncapsulationMode"}, StringValue (\textcolor{stringliteral}{"Llc"}));
70   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} devs = csma.\hyperlink{classns3_1_1CsmaHelper_af79a91372595230b0817200270ab84e7}{Install} (c);
71 
72   \textcolor{comment}{// add an ip stack to all nodes.}
73   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Add ip stack."});
74   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} ipStack;
75   ipStack.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (c);
76 
77   \textcolor{comment}{// assign ip addresses}
78   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Assign ip addresses."});
79   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ip;
80   ip.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"192.168.1.0"}, \textcolor{stringliteral}{"255.255.255.0"});
81   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} addresses = ip.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (devs);
82 
83   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create Source"});
84   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::Ipv4RawSocketImpl::Protocol"}, StringValue (\textcolor{stringliteral}{"2"}));
85   \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} dst = \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (addresses.
      \hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (3));
86   \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} onoff = \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} (\textcolor{stringliteral}{"ns3::Ipv4RawSocketFactory"}, dst);
87   onoff.SetConstantRate (\hyperlink{classns3_1_1DataRate}{DataRate} (15000));
88   onoff.SetAttribute (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (1200));
89 
90 
91   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} apps = onoff.Install (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0));
92   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
93   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
94 
95   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create Sink."});
96   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} sink = \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} (\textcolor{stringliteral}{"ns3::Ipv4RawSocketFactory"}, 
      dst);
97   apps = sink.\hyperlink{classns3_1_1PacketSinkHelper_a394059adb24348dd366ce703fc39bbdd}{Install} (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (3));
98   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0));
99   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (11.0));
100 
101   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create pinger"});
102   \hyperlink{classns3_1_1V4PingHelper}{V4PingHelper} ping = \hyperlink{classns3_1_1V4PingHelper}{V4PingHelper} (addresses.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (2));
103   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} pingers;
104   pingers.\hyperlink{classns3_1_1NodeContainer_aa60b3a0e70f2fb324e16ffcf8bf31fcb}{Add} (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0));
105   pingers.Add (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
106   pingers.Add (c.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (3));
107   apps = ping.\hyperlink{classns3_1_1V4PingHelper_acde0d28b8c6d3f5666432bc499a9bb79}{Install} (pingers);
108   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2.0));
109   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (5.0));
110 
111   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Configure Tracing."});
112   \textcolor{comment}{// first, pcap tracing in non-promiscuous mode}
113   csma.\hyperlink{classns3_1_1PcapHelperForDevice_a4ab183a2512120200d4a0e5d8ececd49}{EnablePcapAll} (\textcolor{stringliteral}{"csma-ping"}, \textcolor{keyword}{false});
114 
115   \textcolor{comment}{// then, print what the packet sink receives.}
116   \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (\textcolor{stringliteral}{"
      /NodeList/3/ApplicationList/0/$ns3::PacketSink/Rx"}, 
117                                  \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{csma-ping_8cc_ab5a3a26cb523a53ed19ba80dcbb97d11}{SinkRx}));
118   \textcolor{comment}{// finally, print the ping rtts.}
119   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/*/ApplicationList/*/$ns3::V4Ping/Rtt"},
120                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{csma-ping_8cc_a1a49f760c7e3da367b3406515d2a3ef9}{PingRtt}));
121 
122   Packet::EnablePrinting ();
123 
124 
125   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Run Simulation."});
126   Simulator::Run ();
127   Simulator::Destroy ();
128   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Done."});
129 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{csma-\/ping.\+cc@{csma-\/ping.\+cc}!N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}}
\index{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}!csma-\/ping.\+cc@{csma-\/ping.\+cc}}
\subsubsection[{\texorpdfstring{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+N\+E(""Csma\+Ping\+Example"")}{NS_LOG_COMPONENT_DEFINE("CsmaPingExample")}}]{\setlength{\rightskip}{0pt plus 5cm}N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE (
\begin{DoxyParamCaption}
\item[{\char`\"{}Csma\+Ping\+Example\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{csma-ping_8cc_a00c95334e83a2ce34e1f2124c886b328}{}\label{csma-ping_8cc_a00c95334e83a2ce34e1f2124c886b328}
\index{csma-\/ping.\+cc@{csma-\/ping.\+cc}!Ping\+Rtt@{Ping\+Rtt}}
\index{Ping\+Rtt@{Ping\+Rtt}!csma-\/ping.\+cc@{csma-\/ping.\+cc}}
\subsubsection[{\texorpdfstring{Ping\+Rtt(std\+::string context, Time rtt)}{PingRtt(std::string context, Time rtt)}}]{\setlength{\rightskip}{0pt plus 5cm}static void Ping\+Rtt (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{{\bf Time}}]{rtt}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{csma-ping_8cc_a1a49f760c7e3da367b3406515d2a3ef9}{}\label{csma-ping_8cc_a1a49f760c7e3da367b3406515d2a3ef9}

\begin{DoxyCode}
48 \{
49   \textcolor{comment}{//std::cout << context << " " << rtt << std::endl;}
50 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 2


\index{csma-\/ping.\+cc@{csma-\/ping.\+cc}!Sink\+Rx@{Sink\+Rx}}
\index{Sink\+Rx@{Sink\+Rx}!csma-\/ping.\+cc@{csma-\/ping.\+cc}}
\subsubsection[{\texorpdfstring{Sink\+Rx(\+Ptr$<$ const Packet $>$ p, const Address \&ad)}{SinkRx(Ptr< const Packet > p, const Address &ad)}}]{\setlength{\rightskip}{0pt plus 5cm}static void Sink\+Rx (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{p, }
\item[{const {\bf Address} \&}]{ad}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{csma-ping_8cc_ab5a3a26cb523a53ed19ba80dcbb97d11}{}\label{csma-ping_8cc_ab5a3a26cb523a53ed19ba80dcbb97d11}

\begin{DoxyCode}
43 \{
44   \textcolor{comment}{//std::cout << *p << std::endl;}
45 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 3


