\hypertarget{classns3_1_1WifiSpectrumValueHelper}{}\section{ns3\+:\+:Wifi\+Spectrum\+Value\+Helper Class Reference}
\label{classns3_1_1WifiSpectrumValueHelper}\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}


{\ttfamily \#include $<$wifi-\/spectrum-\/value-\/helper.\+h$>$}



Collaboration diagram for ns3\+:\+:Wifi\+Spectrum\+Value\+Helper\+:
% FIG 0
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{classns3_1_1WifiSpectrumValueHelper_a09aa51538e1b82c261e0b3f08fbdd802}{$\sim$\+Wifi\+Spectrum\+Value\+Helper} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumModel}{Spectrum\+Model} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{Get\+Spectrum\+Model} (uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double band\+Bandwidth, uint8\+\_\+t guard\+Bandwidth)
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_ac55866cbe19f3c45c3f985da5fe351f0}{Create\+Dsss\+Tx\+Power\+Spectral\+Density} (uint32\+\_\+t center\+Frequency, double tx\+PowerW, uint8\+\_\+t guard\+Bandwidth)
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_a32a14869505db7683618793e0dfd98a8}{Create\+Ofdm\+Tx\+Power\+Spectral\+Density} (uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double tx\+PowerW, uint8\+\_\+t guard\+Bandwidth)
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_aa665281a873f271a23891864ea1e1051}{Create\+Ht\+Ofdm\+Tx\+Power\+Spectral\+Density} (uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double tx\+PowerW, uint8\+\_\+t guard\+Bandwidth)
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_a35c32f78f5e62a70691a2d0472f8d6d9}{Create\+He\+Ofdm\+Tx\+Power\+Spectral\+Density} (uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double tx\+PowerW, uint8\+\_\+t guard\+Bandwidth)
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_ada5070aac3bdad3c9847bbc3e8e37fa5}{Create\+Noise\+Power\+Spectral\+Density} (uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double band\+Bandwidth, double noise\+Figure, uint8\+\_\+t guard\+Bandwidth)
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_a38762118c46d925371f0a14200fbdc6a}{Create\+Noise\+Power\+Spectral\+Density} (double noise\+Figure, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumModel}{Spectrum\+Model} $>$ spectrum\+Model)
\item 
static \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1WifiSpectrumValueHelper_a1d613cc1d50378be01db8b715928c8d1}{Create\+Rf\+Filter} (uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double band\+Bandwidth, uint8\+\_\+t guard\+Bandwidth)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class defines all functions to create a spectrum model for Wi-\/\+Fi based on a a spectral model aligned with an O\+F\+DM subcarrier spacing of 312.\+5 K\+Hz (model also reused for D\+S\+SS modulations) 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!````~Wifi\+Spectrum\+Value\+Helper@{$\sim$\+Wifi\+Spectrum\+Value\+Helper}}
\index{````~Wifi\+Spectrum\+Value\+Helper@{$\sim$\+Wifi\+Spectrum\+Value\+Helper}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{$\sim$\+Wifi\+Spectrum\+Value\+Helper()}{~WifiSpectrumValueHelper()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::$\sim$\+Wifi\+Spectrum\+Value\+Helper (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_a09aa51538e1b82c261e0b3f08fbdd802}{}\label{classns3_1_1WifiSpectrumValueHelper_a09aa51538e1b82c261e0b3f08fbdd802}
Destructor 
\begin{DoxyCode}
572 \{
573 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Create\+Dsss\+Tx\+Power\+Spectral\+Density@{Create\+Dsss\+Tx\+Power\+Spectral\+Density}}
\index{Create\+Dsss\+Tx\+Power\+Spectral\+Density@{Create\+Dsss\+Tx\+Power\+Spectral\+Density}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Dsss\+Tx\+Power\+Spectral\+Density(uint32\+\_\+t center\+Frequency, double tx\+Power\+W, uint8\+\_\+t guard\+Bandwidth)}{CreateDsssTxPowerSpectralDensity(uint32_t centerFrequency, double txPowerW, uint8_t guardBandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Create\+Dsss\+Tx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{center\+Frequency, }
\item[{double}]{tx\+PowerW, }
\item[{uint8\+\_\+t}]{guard\+Bandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_ac55866cbe19f3c45c3f985da5fe351f0}{}\label{classns3_1_1WifiSpectrumValueHelper_ac55866cbe19f3c45c3f985da5fe351f0}
Create a transmit power spectral density corresponding to D\+S\+SS

The center frequency typically corresponds to 802.\+11b channel center frequencies but is not restricted to those frequencies.


\begin{DoxyParams}{Parameters}
{\em center\+Frequency} & center frequency (M\+Hz) \\
\hline
{\em tx\+PowerW} & transmit power (W) to allocate \\
\hline
{\em guard\+Bandwidth} & width of the guard band (M\+Hz) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a newly allocated \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} representing the D\+S\+SS Transmit Power Spectral Density in W/\+Hz 
\end{DoxyReturn}

\begin{DoxyCode}
120 \{
121   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (centerFrequency << txPowerW << (uint16\_t)guardBandwidth);
122   uint8\_t channelWidth = 22;  \textcolor{comment}{// DSSS channels are 22 MHz wide}
123   \textcolor{keywordtype}{double} bandBandwidth = 312500;
124   Ptr<SpectrumValue> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c} = Create<SpectrumValue> (\hyperlink{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{GetSpectrumModel} (centerFrequency, 
      channelWidth, bandBandwidth, guardBandwidth));
125   Values::iterator vit = c->ValuesBegin ();
126   Bands::const\_iterator bit = c->ConstBandsBegin ();
127   uint32\_t nGuardBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((2 * guardBandwidth * 1e6) / bandBandwidth) + 0.5);
128   uint32\_t nAllocatedBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((channelWidth * 1e6) / bandBandwidth) + 0.5);
129   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (c->GetSpectrumModel ()->GetNumBands () == (nAllocatedBands + nGuardBands + 1));
130   \textcolor{comment}{// Evenly spread power across 22 MHz}
131   \textcolor{keywordtype}{double} txPowerPerBand = txPowerW / nAllocatedBands;
132   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
133     \{
134       \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= (nGuardBands / 2)) && (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= ((nGuardBands / 2) + nAllocatedBands - 1)))
135         \{
136           *vit = txPowerPerBand / (bit->fh - bit->fl);
137         \}
138     \}
139   \textcolor{keywordflow}{return} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c};
140 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1




Here is the caller graph for this function\+:
% FIG 2


\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Create\+He\+Ofdm\+Tx\+Power\+Spectral\+Density@{Create\+He\+Ofdm\+Tx\+Power\+Spectral\+Density}}
\index{Create\+He\+Ofdm\+Tx\+Power\+Spectral\+Density@{Create\+He\+Ofdm\+Tx\+Power\+Spectral\+Density}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+He\+Ofdm\+Tx\+Power\+Spectral\+Density(uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double tx\+Power\+W, uint8\+\_\+t guard\+Bandwidth)}{CreateHeOfdmTxPowerSpectralDensity(uint32_t centerFrequency, uint8_t channelWidth, double txPowerW, uint8_t guardBandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Create\+He\+Ofdm\+Tx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{center\+Frequency, }
\item[{uint8\+\_\+t}]{channel\+Width, }
\item[{double}]{tx\+PowerW, }
\item[{uint8\+\_\+t}]{guard\+Bandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_a35c32f78f5e62a70691a2d0472f8d6d9}{}\label{classns3_1_1WifiSpectrumValueHelper_a35c32f78f5e62a70691a2d0472f8d6d9}
Create a transmit power spectral density corresponding to O\+F\+DM High Efficiency (HE) (802.\+11ax). \hyperlink{classns3_1_1Channel}{Channel} width may vary between 20, 40, 80, and 160 M\+Hz.


\begin{DoxyParams}{Parameters}
{\em center\+Frequency} & center frequency (M\+Hz) \\
\hline
{\em channel\+Width} & channel width (M\+Hz) \\
\hline
{\em tx\+PowerW} & transmit power (W) to allocate \\
\hline
{\em guard\+Bandwidth} & width of the guard band (M\+Hz) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a newly allocated \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} representing the HE O\+F\+DM Transmit Power Spectral Density in W/\+Hz for each Band 
\end{DoxyReturn}

\begin{DoxyCode}
383 \{
384   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (centerFrequency << (uint16\_t)channelWidth << txPowerW << (uint16\_t)
      guardBandwidth);
385   \textcolor{keywordtype}{double} bandBandwidth = 78125;
386   Ptr<SpectrumValue> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c} = Create<SpectrumValue> (\hyperlink{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{GetSpectrumModel} (centerFrequency, 
      channelWidth, bandBandwidth, guardBandwidth));
387   Values::iterator vit = c->ValuesBegin ();
388   Bands::const\_iterator bit = c->ConstBandsBegin ();
389   uint32\_t nGuardBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((2 * guardBandwidth * 1e6) / bandBandwidth) + 0.5);
390   uint32\_t nAllocatedBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((channelWidth * 1e6) / bandBandwidth) + 0.5);
391   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (c->GetSpectrumModel ()->GetNumBands () == (nAllocatedBands + nGuardBands + 1)
      , \textcolor{stringliteral}{"Unexpected number of bands "} << c->GetSpectrumModel ()->GetNumBands ());
392   \textcolor{keywordtype}{double} txPowerPerBand;
393   uint32\_t start1;
394   uint32\_t stop1;
395   uint32\_t start2;
396   uint32\_t stop2;
397   uint32\_t start3;
398   uint32\_t stop3;
399   uint32\_t start4;
400   uint32\_t stop4;
401   \textcolor{keywordflow}{switch} (channelWidth)
402     \{
403     \textcolor{keywordflow}{case} 20:
404       \textcolor{comment}{// 242 subcarriers (234 data + 8 pilot)}
405       txPowerPerBand = txPowerW / 242;
406       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
407       \textcolor{comment}{// skip the guard band and 11 subbands, then place power in 121 subbands, then}
408       \textcolor{comment}{// skip 3 DC, then place power in 121 subbands, then skip}
409       \textcolor{comment}{// the final 11 subbands and the guard band.}
410       start1 = (nGuardBands / 2) + 12;
411       stop1 = start1 + 121 - 1;
412       start2 = stop1 + 4;
413       stop2 = start2 + 121 - 1;
414       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
415         \{
416           \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start1 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop1) || (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start2 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop2))
417             \{
418               *vit = txPowerPerBand / (bit->fh - bit->fl);
419             \}
420           \textcolor{keywordflow}{else}
421             \{
422               *vit = 0;
423             \}
424         \}
425       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
426                     \textcolor{stringliteral}{" and "} << start2 << \textcolor{stringliteral}{"-"} << stop2);
427       \textcolor{keywordflow}{break};
428     \textcolor{keywordflow}{case} 40:
429       \textcolor{comment}{// 484 subcarriers (468 data + 16 pilot)}
430       txPowerPerBand = txPowerW / 484;
431       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
432       \textcolor{comment}{// skip the guard band and 11 subbands, then place power in 242 subbands, then}
433       \textcolor{comment}{// skip 5 DC, then place power in 242 subbands, then skip}
434       \textcolor{comment}{// the final 11 subbands and the guard band.}
435       start1 = (nGuardBands / 2) + 12;
436       stop1 = start1 + 242 - 1;
437       start2 = stop1 + 6;
438       stop2 = start2 + 242 - 1;
439       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
440         \{
441           \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start1 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop1) || (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start2 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop2))
442             \{
443               *vit = txPowerPerBand / (bit->fh - bit->fl);
444             \}
445           \textcolor{keywordflow}{else}
446             \{
447               *vit = 0;
448             \}
449         \}
450       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
451                     \textcolor{stringliteral}{" and "} << start2 << \textcolor{stringliteral}{"-"} << stop2);
452       \textcolor{keywordflow}{break};
453     \textcolor{keywordflow}{case} 80:
454       \textcolor{comment}{// 996 subcarriers (980 data + 16 pilot)}
455       txPowerPerBand = txPowerW / 996;
456       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
457       \textcolor{comment}{// skip the guard band and 11 subbands, then place power in 498 subbands, then}
458       \textcolor{comment}{// skip 5 DC, then place power in 498 subbands, then skip}
459       \textcolor{comment}{// the final 11 subbands and the guard band.}
460       start1 = (nGuardBands / 2) + 12;
461       stop1 = start1 + 498 - 1;
462       start2 = stop1 + 6;
463       stop2 = start2 + 498 - 1;
464       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
465         \{
466           \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start1 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop1) || (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start2 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop2))
467             \{
468               *vit = txPowerPerBand / (bit->fh - bit->fl);
469             \}
470           \textcolor{keywordflow}{else}
471             \{
472               *vit = 0;
473             \}
474         \}
475       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
476                     \textcolor{stringliteral}{" and "} << start2 << \textcolor{stringliteral}{"-"} << stop2);
477       \textcolor{keywordflow}{break};
478     \textcolor{keywordflow}{case} 160:
479       \textcolor{comment}{// 2 x 996 subcarriers (2 x 80 MHZ bands)}
480       txPowerPerBand = txPowerW / (2 * 996);
481       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
482       start1 = (nGuardBands / 2) + 12;
483       stop1 = start1 + 498 - 1;
484       start2 = stop1 + 6;
485       stop2 = start2 + 498 - 1;
486       start3 = stop2 + (2 * 12);
487       stop3 = start3 + 498 - 1;
488       start4 = stop3 + 6;
489       stop4 = start4 + 498 - 1;
490       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
491         \{
492           \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start1 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop1) || (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start2 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop2) ||
493               (i >= start3 && i <= stop3) || (i >= start4 && i <= stop4))
494             \{
495               *vit = txPowerPerBand / (bit->fh - bit->fl);
496             \}
497           \textcolor{keywordflow}{else}
498             \{
499               *vit = 0;
500             \}
501         \}
502       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
503                     \textcolor{stringliteral}{", "} << start2 << \textcolor{stringliteral}{"-"} << stop2 <<
504                     \textcolor{stringliteral}{", "} << start3 << \textcolor{stringliteral}{"-"} << stop3 <<
505                     \textcolor{stringliteral}{", "} << start4 << \textcolor{stringliteral}{"-"} << stop4);
506       \textcolor{keywordflow}{break};
507     \textcolor{keywordflow}{default}:
508       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"ChannelWidth "} << channelWidth << \textcolor{stringliteral}{" unsupported"});
509       \textcolor{keywordflow}{break};
510     \}
511   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Integrated power "} << \hyperlink{namespacens3_a3dd3817567502f8bc77b04e47134c070}{Integral} (*c));
512   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (std::abs (txPowerW - \hyperlink{namespacens3_a3dd3817567502f8bc77b04e47134c070}{Integral} (*c)) < 1e-6, \textcolor{stringliteral}{"Power allocation failed"}
      );
513   \textcolor{keywordflow}{return} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c};
514 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Create\+Ht\+Ofdm\+Tx\+Power\+Spectral\+Density@{Create\+Ht\+Ofdm\+Tx\+Power\+Spectral\+Density}}
\index{Create\+Ht\+Ofdm\+Tx\+Power\+Spectral\+Density@{Create\+Ht\+Ofdm\+Tx\+Power\+Spectral\+Density}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Ht\+Ofdm\+Tx\+Power\+Spectral\+Density(uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double tx\+Power\+W, uint8\+\_\+t guard\+Bandwidth)}{CreateHtOfdmTxPowerSpectralDensity(uint32_t centerFrequency, uint8_t channelWidth, double txPowerW, uint8_t guardBandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Create\+Ht\+Ofdm\+Tx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{center\+Frequency, }
\item[{uint8\+\_\+t}]{channel\+Width, }
\item[{double}]{tx\+PowerW, }
\item[{uint8\+\_\+t}]{guard\+Bandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_aa665281a873f271a23891864ea1e1051}{}\label{classns3_1_1WifiSpectrumValueHelper_aa665281a873f271a23891864ea1e1051}
Create a transmit power spectral density corresponding to O\+F\+DM High Throughput (HT) (802.\+11n/ac). \hyperlink{classns3_1_1Channel}{Channel} width may vary between 20, 40, 80, and 160 M\+Hz.


\begin{DoxyParams}{Parameters}
{\em center\+Frequency} & center frequency (M\+Hz) \\
\hline
{\em channel\+Width} & channel width (M\+Hz) \\
\hline
{\em tx\+PowerW} & transmit power (W) to allocate \\
\hline
{\em guard\+Bandwidth} & width of the guard band (M\+Hz) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a newly allocated \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} representing the HT O\+F\+DM Transmit Power Spectral Density in W/\+Hz for each Band 
\end{DoxyReturn}

\begin{DoxyCode}
215 \{
216   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (centerFrequency << (uint16\_t)channelWidth << txPowerW << (uint16\_t)
      guardBandwidth);
217   \textcolor{keywordtype}{double} bandBandwidth = 312500;
218   Ptr<SpectrumValue> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c} = Create<SpectrumValue> (\hyperlink{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{GetSpectrumModel} (centerFrequency, 
      channelWidth, bandBandwidth, guardBandwidth));
219   Values::iterator vit = c->ValuesBegin ();
220   Bands::const\_iterator bit = c->ConstBandsBegin ();
221   uint32\_t nGuardBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((2 * guardBandwidth * 1e6) / bandBandwidth) + 0.5);
222   uint32\_t nAllocatedBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((channelWidth * 1e6) / bandBandwidth) + 0.5);
223   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (c->GetSpectrumModel ()->GetNumBands () == (nAllocatedBands + nGuardBands + 1)
      , \textcolor{stringliteral}{"Unexpected number of bands "} << c->GetSpectrumModel ()->GetNumBands ());
224   \textcolor{keywordtype}{double} txPowerPerBand;
225   \textcolor{comment}{// skip the guard band and 4 subbands, then place power in 28 subbands, then}
226   \textcolor{comment}{// skip the center subband, then place power in 28 subbands, then skip}
227   \textcolor{comment}{// the final 4 subbands and the guard band.}
228   \textcolor{comment}{// Repeat for each 20 MHz band.}
229   uint32\_t start1 = (nGuardBands / 2) + 4;
230   uint32\_t stop1 = start1 + 28 - 1;
231   uint32\_t start2 = stop1 + 2;
232   uint32\_t stop2 = start2 + 28 - 1;
233   uint32\_t start3 = stop2 + (2 * 4);
234   uint32\_t stop3 = start3 + 28 - 1;
235   uint32\_t start4 = stop3 + 2;
236   uint32\_t stop4 = start4 + 28 - 1;
237   uint32\_t start5 = stop4 + (2 * 4);
238   uint32\_t stop5 = start5 + 28 - 1;
239   uint32\_t start6 = stop5 + 2;
240   uint32\_t stop6 = start6 + 28 - 1;
241   uint32\_t start7 = stop6 + (2 * 4);
242   uint32\_t stop7 = start7 + 28 - 1;
243   uint32\_t start8 = stop7 + 2;
244   uint32\_t stop8 = start8 + 28 - 1;
245   uint32\_t start9 = stop8 + (2 * 4);
246   uint32\_t stop9 = start9 + 28 - 1;
247   uint32\_t start10 = stop9 + 2;
248   uint32\_t stop10 = start10 + 28 - 1;
249   uint32\_t start11 = stop10 + (2 * 4);
250   uint32\_t stop11 = start11 + 28 - 1;
251   uint32\_t start12 = stop11 + 2;
252   uint32\_t stop12 = start12 + 28 - 1;
253   uint32\_t start13 = stop12 + (2 * 4);
254   uint32\_t stop13 = start13 + 28 - 1;
255   uint32\_t start14 = stop13 + 2;
256   uint32\_t stop14 = start14 + 28 - 1;
257   uint32\_t start15 = stop14 + (2 * 4);
258   uint32\_t stop15 = start15 + 28 - 1;
259   uint32\_t start16 = stop15 + 2;
260   uint32\_t stop16 = start16 + 28 - 1;
261   \textcolor{keywordflow}{switch} (channelWidth)
262     \{
263     \textcolor{keywordflow}{case} 20:
264       \textcolor{comment}{// 56 subcarriers (52 data + 4 pilot)}
265       txPowerPerBand = txPowerW / 56;
266       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
267       start1 = (nGuardBands / 2) + 4;
268       stop1 = start1 + 28 - 1;
269       start2 = stop1 + 2;
270       stop2 = start2 + 28 - 1;
271       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
272         \{
273           \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start1 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop1) || (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start2 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop2))
274             \{
275               *vit = txPowerPerBand / (bit->fh - bit->fl);
276             \}
277           \textcolor{keywordflow}{else}
278             \{
279               *vit = 0;
280             \}
281         \}
282       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
283                     \textcolor{stringliteral}{" and "} << start2 << \textcolor{stringliteral}{"-"} << stop2);
284       \textcolor{keywordflow}{break};
285     \textcolor{keywordflow}{case} 40:
286       \textcolor{comment}{// 112 subcarriers (104 data + 8 pilot) }
287       \textcolor{comment}{// possible alternative:  114 subcarriers (108 data + 6 pilot)}
288       txPowerPerBand = txPowerW / 112;
289       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
290       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
291         \{
292           \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start1 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop1) || (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start2 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop2) ||
293               (i >= start3 && i <= stop3) || (i >= start4 && i <= stop4))
294             \{
295               *vit = txPowerPerBand / (bit->fh - bit->fl);
296             \}
297           \textcolor{keywordflow}{else}
298             \{
299               *vit = 0;
300             \}
301         \}
302       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
303                     \textcolor{stringliteral}{", "} << start2 << \textcolor{stringliteral}{"-"} << stop2 <<
304                     \textcolor{stringliteral}{", "} << start3 << \textcolor{stringliteral}{"-"} << stop3 <<
305                     \textcolor{stringliteral}{", "} << start4 << \textcolor{stringliteral}{"-"} << stop4);
306       \textcolor{keywordflow}{break};
307     \textcolor{keywordflow}{case} 80:
308       \textcolor{comment}{// 224 subcarriers (208 data + 16 pilot) }
309       \textcolor{comment}{// possible alternative:  242 subcarriers (234 data + 8 pilot)}
310       txPowerPerBand = txPowerW / 224;
311       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
312       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < c->GetSpectrumModel ()->GetNumBands (); i++, vit++, bit++)
313         \{
314           \textcolor{keywordflow}{if} ((i >= start1 && i <= stop1) || (i >= start2 && i <= stop2) ||
315               (i >= start3 && i <= stop3) || (i >= start4 && i <= stop4) ||
316               (i >= start5 && i <= stop5) || (i >= start6 && i <= stop6) ||
317               (i >= start7 && i <= stop7) || (i >= start8 && i <= stop8))
318             \{
319               *vit = txPowerPerBand / (bit->fh - bit->fl);
320             \}
321           \textcolor{keywordflow}{else}
322             \{
323               *vit = 0;
324             \}
325         \}
326       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
327                     \textcolor{stringliteral}{", "} << start2 << \textcolor{stringliteral}{"-"} << stop2 <<
328                     \textcolor{stringliteral}{", "} << start3 << \textcolor{stringliteral}{"-"} << stop3 <<
329                     \textcolor{stringliteral}{", "} << start4 << \textcolor{stringliteral}{"-"} << stop4 <<
330                     \textcolor{stringliteral}{", "} << start5 << \textcolor{stringliteral}{"-"} << stop5 <<
331                     \textcolor{stringliteral}{", "} << start6 << \textcolor{stringliteral}{"-"} << stop6 <<
332                     \textcolor{stringliteral}{", "} << start7 << \textcolor{stringliteral}{"-"} << stop7 <<
333                     \textcolor{stringliteral}{", "} << start8 << \textcolor{stringliteral}{"-"} << stop8);
334       \textcolor{keywordflow}{break};
335     \textcolor{keywordflow}{case} 160:
336       \textcolor{comment}{// 448 subcarriers (416 data + 32 pilot)}
337       \textcolor{comment}{// possible alternative:  484 subcarriers (468 data + 16 pilot)}
338       txPowerPerBand = txPowerW / 448;
339       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
340       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < c->GetSpectrumModel ()->GetNumBands (); i++, vit++, bit++)
341         \{
342           \textcolor{keywordflow}{if} ((i >= start1 && i <= stop1) || (i >= start2 && i <= stop2) ||
343               (i >= start3 && i <= stop3) || (i >= start4 && i <= stop4) ||
344               (i >= start5 && i <= stop5) || (i >= start6 && i <= stop6) ||
345               (i >= start7 && i <= stop7) || (i >= start8 && i <= stop8) ||
346               (i >= start9 && i <= stop9) || (i >= start10 && i <= stop10) ||
347               (i >= start11 && i <= stop11) || (i >= start12 && i <= stop12) ||
348               (i >= start13 && i <= stop13) || (i >= start14 && i <= stop14) ||
349               (i >= start15 && i <= stop15) || (i >= start16 && i <= stop16))
350             \{
351               *vit = txPowerPerBand / (bit->fh - bit->fl);
352             \}
353           \textcolor{keywordflow}{else}
354             \{
355               *vit = 0;
356             \}
357         \}
358       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 <<
359                     \textcolor{stringliteral}{", "} << start2 << \textcolor{stringliteral}{"-"} << stop2 <<
360                     \textcolor{stringliteral}{", "} << start3 << \textcolor{stringliteral}{"-"} << stop3 <<
361                     \textcolor{stringliteral}{", "} << start4 << \textcolor{stringliteral}{"-"} << stop4 <<
362                     \textcolor{stringliteral}{", "} << start5 << \textcolor{stringliteral}{"-"} << stop5 <<
363                     \textcolor{stringliteral}{", "} << start6 << \textcolor{stringliteral}{"-"} << stop6 <<
364                     \textcolor{stringliteral}{", "} << start7 << \textcolor{stringliteral}{"-"} << stop7 <<
365                     \textcolor{stringliteral}{", "} << start8 << \textcolor{stringliteral}{"-"} << stop8 <<
366                     \textcolor{stringliteral}{", "} << start9 << \textcolor{stringliteral}{"-"} << stop9 <<
367                     \textcolor{stringliteral}{", "} << start10 << \textcolor{stringliteral}{"-"} << stop10 <<
368                     \textcolor{stringliteral}{", "} << start11 << \textcolor{stringliteral}{"-"} << stop11 <<
369                     \textcolor{stringliteral}{", "} << start12 << \textcolor{stringliteral}{"-"} << stop12 <<
370                     \textcolor{stringliteral}{", "} << start13 << \textcolor{stringliteral}{"-"} << stop13 <<
371                     \textcolor{stringliteral}{", "} << start14 << \textcolor{stringliteral}{"-"} << stop14 <<
372                     \textcolor{stringliteral}{", "} << start15 << \textcolor{stringliteral}{"-"} << stop15 <<
373                     \textcolor{stringliteral}{", "} << start16 << \textcolor{stringliteral}{"-"} << stop16);
374       \textcolor{keywordflow}{break};
375     \}
376   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Integrated power "} << \hyperlink{namespacens3_a3dd3817567502f8bc77b04e47134c070}{Integral} (*c));
377   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (std::abs (txPowerW - \hyperlink{namespacens3_a3dd3817567502f8bc77b04e47134c070}{Integral} (*c)) < 1e-6, \textcolor{stringliteral}{"Power allocation failed"}
      );
378   \textcolor{keywordflow}{return} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c};
379 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Create\+Noise\+Power\+Spectral\+Density@{Create\+Noise\+Power\+Spectral\+Density}}
\index{Create\+Noise\+Power\+Spectral\+Density@{Create\+Noise\+Power\+Spectral\+Density}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Noise\+Power\+Spectral\+Density(uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double band\+Bandwidth, double noise\+Figure, uint8\+\_\+t guard\+Bandwidth)}{CreateNoisePowerSpectralDensity(uint32_t centerFrequency, uint8_t channelWidth, double bandBandwidth, double noiseFigure, uint8_t guardBandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Create\+Noise\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{center\+Frequency, }
\item[{uint8\+\_\+t}]{channel\+Width, }
\item[{double}]{band\+Bandwidth, }
\item[{double}]{noise\+Figure, }
\item[{uint8\+\_\+t}]{guard\+Bandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_ada5070aac3bdad3c9847bbc3e8e37fa5}{}\label{classns3_1_1WifiSpectrumValueHelper_ada5070aac3bdad3c9847bbc3e8e37fa5}
Create a power spectral density corresponding to the noise


\begin{DoxyParams}{Parameters}
{\em center\+Frequency} & center frequency (M\+Hz) \\
\hline
{\em channel\+Width} & channel width (M\+Hz) \\
\hline
{\em band\+Bandwidth} & width of each band (Hz) \\
\hline
{\em noise\+Figure} & the noise figure in dB w.\+r.\+t. a reference temperature of 290K \\
\hline
{\em guard\+Bandwidth} & width of the guard band (M\+Hz) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a newly allocated \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} representing the noise Power Spectral Density in W/\+Hz for each Band 
\end{DoxyReturn}

\begin{DoxyCode}
518 \{
519   Ptr<SpectrumModel> model = \hyperlink{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{GetSpectrumModel} (centerFrequency, channelWidth, bandBandwidth
      , guardBandwidth);
520   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1WifiSpectrumValueHelper_ada5070aac3bdad3c9847bbc3e8e37fa5}{CreateNoisePowerSpectralDensity} (noiseFigure, model);
521 \}
\end{DoxyCode}
\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Create\+Noise\+Power\+Spectral\+Density@{Create\+Noise\+Power\+Spectral\+Density}}
\index{Create\+Noise\+Power\+Spectral\+Density@{Create\+Noise\+Power\+Spectral\+Density}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Noise\+Power\+Spectral\+Density(double noise\+Figure, Ptr$<$ Spectrum\+Model $>$ spectrum\+Model)}{CreateNoisePowerSpectralDensity(double noiseFigure, Ptr< SpectrumModel > spectrumModel)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Create\+Noise\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{double}]{noise\+Figure, }
\item[{{\bf Ptr}$<$ {\bf Spectrum\+Model} $>$}]{spectrum\+Model}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_a38762118c46d925371f0a14200fbdc6a}{}\label{classns3_1_1WifiSpectrumValueHelper_a38762118c46d925371f0a14200fbdc6a}
Create a thermal noise power spectral density


\begin{DoxyParams}{Parameters}
{\em noise\+Figure} & the noise figure \\
\hline
{\em spectrum\+Model} & the spectrum model \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a newly allocated \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} representing the noise Power Spectral Density in W/\+Hz corresponding to thermal noise, for each Band 
\end{DoxyReturn}

\begin{DoxyCode}
525 \{
526   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (noiseFigureDb << spectrumModel);
527 
528   \textcolor{comment}{// see "LTE - From theory to practice"}
529   \textcolor{comment}{// Section 22.4.4.2 Thermal Noise and Receiver Noise Figure}
530   \textcolor{keyword}{const} \textcolor{keywordtype}{double} kT\_dBm\_Hz = -174.0;  \textcolor{comment}{// dBm/Hz}
531   \textcolor{keywordtype}{double} kT\_W\_Hz = std::pow (10.0, (kT\_dBm\_Hz - 30) / 10.0);
532   \textcolor{keywordtype}{double} noiseFigureLinear = std::pow (10.0, noiseFigureDb / 10.0);
533   \textcolor{keywordtype}{double} noisePowerSpectralDensity =  kT\_W\_Hz * noiseFigureLinear;
534 
535   Ptr<SpectrumValue> noisePsd = Create <SpectrumValue> (spectrumModel);
536   (*noisePsd) = noisePowerSpectralDensity;
537   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"NoisePowerSpectralDensity has integrated power of "} << 
      \hyperlink{namespacens3_a3dd3817567502f8bc77b04e47134c070}{Integral} (*noisePsd));
538   \textcolor{keywordflow}{return} noisePsd;
539 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Create\+Ofdm\+Tx\+Power\+Spectral\+Density@{Create\+Ofdm\+Tx\+Power\+Spectral\+Density}}
\index{Create\+Ofdm\+Tx\+Power\+Spectral\+Density@{Create\+Ofdm\+Tx\+Power\+Spectral\+Density}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Ofdm\+Tx\+Power\+Spectral\+Density(uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double tx\+Power\+W, uint8\+\_\+t guard\+Bandwidth)}{CreateOfdmTxPowerSpectralDensity(uint32_t centerFrequency, uint8_t channelWidth, double txPowerW, uint8_t guardBandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Create\+Ofdm\+Tx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{center\+Frequency, }
\item[{uint8\+\_\+t}]{channel\+Width, }
\item[{double}]{tx\+PowerW, }
\item[{uint8\+\_\+t}]{guard\+Bandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_a32a14869505db7683618793e0dfd98a8}{}\label{classns3_1_1WifiSpectrumValueHelper_a32a14869505db7683618793e0dfd98a8}
Create a transmit power spectral density corresponding to O\+F\+DM (802.\+11a/g). \hyperlink{classns3_1_1Channel}{Channel} width may vary between 20, 10, and 5 M\+Hz.


\begin{DoxyParams}{Parameters}
{\em center\+Frequency} & center frequency (M\+Hz) \\
\hline
{\em channel\+Width} & channel width (M\+Hz) \\
\hline
{\em tx\+PowerW} & transmit power (W) to allocate \\
\hline
{\em guard\+Bandwidth} & width of the guard band (M\+Hz) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a newly allocated \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} representing the O\+F\+DM Transmit Power Spectral Density in W/\+Hz for each Band 
\end{DoxyReturn}

\begin{DoxyCode}
144 \{
145   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (centerFrequency << (uint16\_t)channelWidth << txPowerW << (uint16\_t)
      guardBandwidth);
146   \textcolor{keywordtype}{double} bandBandwidth = 312500;
147   Ptr<SpectrumValue> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c} = Create<SpectrumValue> (\hyperlink{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{GetSpectrumModel} (centerFrequency, 
      channelWidth, bandBandwidth, guardBandwidth));
148   uint32\_t nGuardBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((2 * guardBandwidth * 1e6) / bandBandwidth) + 0.5);
149   uint32\_t nAllocatedBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(((channelWidth * 1e6) / bandBandwidth) + 0.5);
150   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (c->GetSpectrumModel ()->GetNumBands () == (nAllocatedBands + nGuardBands + 1)
      , \textcolor{stringliteral}{"Unexpected number of bands "} << c->GetSpectrumModel ()->GetNumBands ());
151   \textcolor{keywordtype}{double} txPowerPerBand = 0;
152   uint32\_t start1 = 0;
153   uint32\_t stop1 = 0;
154   uint32\_t start2 = 0;
155   uint32\_t stop2 = 0;
156   \textcolor{keywordflow}{switch} (channelWidth)
157     \{
158     \textcolor{keywordflow}{case} 20:
159     \textcolor{keywordflow}{default}:
160       \textcolor{comment}{// 52 subcarriers (48 data + 4 pilot)}
161       \textcolor{comment}{// skip guard band and 6 subbands, then place power in 26 subbands, then}
162       \textcolor{comment}{// skip the center subband, then place power in 26 subbands, then skip}
163       \textcolor{comment}{// the final 6 subbands and the guard band.}
164       txPowerPerBand = txPowerW / 52;
165       start1 = (nGuardBands / 2) + 6;
166       stop1 = start1 + 26 - 1;
167       start2 = stop1 + 2;
168       stop2 = start2 + 26 - 1;
169       \textcolor{keywordflow}{break};
170     \textcolor{keywordflow}{case} 10:
171       \textcolor{comment}{// 28 subcarriers (24 data + 4 pilot)}
172       \textcolor{comment}{// skip guard band and 2 subbands, then place power in 14 subbands, then}
173       \textcolor{comment}{// skip the center subband, then place power in 14 subbands, then skip}
174       \textcolor{comment}{// the final 2 subbands and the guard band.}
175       txPowerPerBand = txPowerW / 28;
176       start1 = (nGuardBands / 2) + 2;
177       stop1 = start1 + 14 - 1;
178       start2 = stop1 + 2;
179       stop2 = start2 + 14 - 1;
180       \textcolor{keywordflow}{break};
181     \textcolor{keywordflow}{case} 5:
182       \textcolor{comment}{// 16 subcarriers (12 data + 4 pilot)}
183       \textcolor{comment}{// skip guard band and 2 subbands, then place power in 8 subbands, then}
184       \textcolor{comment}{// skip the center subband, then place power in 8 subbands, then skip}
185       \textcolor{comment}{// the final 2 subbands and the guard.}
186       txPowerPerBand = txPowerW / 16;
187       start1 = (nGuardBands / 2) + 2;
188       stop1 = start1 + 8 - 1;
189       start2 = stop1 + 2;
190       stop2 = start2 + 8 - 1;
191       \textcolor{keywordflow}{break};
192     \}
193   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Power per band "} << txPowerPerBand);
194   Values::iterator vit = c->ValuesBegin ();
195   Bands::const\_iterator bit = c->ConstBandsBegin ();
196   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < c->GetSpectrumModel ()->GetNumBands (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
197     \{
198       \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start1 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop1) || (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} >= start2 && \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= stop2))
199         \{
200           *vit = txPowerPerBand / (bit->fh - bit->fl);
201         \}
202       \textcolor{keywordflow}{else}
203         \{
204           *vit = 0;
205         \}
206     \}
207   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added signal power to subbands "} << start1 << \textcolor{stringliteral}{"-"} << stop1 << \textcolor{stringliteral}{" and "} << 
      start2 << \textcolor{stringliteral}{"-"} << stop2);
208   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Integrated power "} << \hyperlink{namespacens3_a3dd3817567502f8bc77b04e47134c070}{Integral} (*c));
209   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (std::abs (txPowerW - \hyperlink{namespacens3_a3dd3817567502f8bc77b04e47134c070}{Integral} (*c)) < 1e-6, \textcolor{stringliteral}{"Power allocation failed"}
      );
210   \textcolor{keywordflow}{return} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c};
211 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Create\+Rf\+Filter@{Create\+Rf\+Filter}}
\index{Create\+Rf\+Filter@{Create\+Rf\+Filter}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Rf\+Filter(uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double band\+Bandwidth, uint8\+\_\+t guard\+Bandwidth)}{CreateRfFilter(uint32_t centerFrequency, uint8_t channelWidth, double bandBandwidth, uint8_t guardBandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Create\+Rf\+Filter (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{center\+Frequency, }
\item[{uint8\+\_\+t}]{channel\+Width, }
\item[{double}]{band\+Bandwidth, }
\item[{uint8\+\_\+t}]{guard\+Bandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_a1d613cc1d50378be01db8b715928c8d1}{}\label{classns3_1_1WifiSpectrumValueHelper_a1d613cc1d50378be01db8b715928c8d1}
Create a spectral density corresponding to the RF filter


\begin{DoxyParams}{Parameters}
{\em center\+Frequency} & center frequency (M\+Hz) \\
\hline
{\em channel\+Width} & channel width (M\+Hz) \\
\hline
{\em band\+Bandwidth} & width of each band (Hz) \\
\hline
{\em guard\+Bandwidth} & width of the guard band (M\+Hz)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} representing the RF filter applied to an received power spectral density 
\end{DoxyReturn}

\begin{DoxyCode}
543 \{
544   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (centerFrequency << (uint16\_t)channelWidth << bandGranularity << (uint16\_t
      )guardBandwidth);
545   Ptr<SpectrumValue> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c} = Create <SpectrumValue> (\hyperlink{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{GetSpectrumModel} (centerFrequency, 
      channelWidth, bandGranularity, guardBandwidth));
546   \textcolor{keywordtype}{size\_t} numBands = c->GetSpectrumModel ()->GetNumBands ();
547   Bands::const\_iterator bit = c->ConstBandsBegin ();
548   Values::iterator vit = c->ValuesBegin ();
549   uint32\_t bandBandwidth = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>} (bandGranularity);
550   \textcolor{keywordtype}{size\_t} numBandsInFilter = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>} (channelWidth * 1e6 / bandBandwidth); 
551   \textcolor{keywordflow}{if} (channelWidth % bandBandwidth != 0)
552     \{
553       numBandsInFilter += 1;
554     \}
555   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Num bands in filter: "} << numBandsInFilter);
556   \textcolor{comment}{// Set the value of the filter to 1 for the center-most numBandsInFilter}
557   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} ((numBandsInFilter % 2 == 1) && (numBands % 2 == 1), \textcolor{stringliteral}{"Should have odd number
       of bands"});
558   \textcolor{keywordtype}{size\_t} startIndex = (numBands - numBandsInFilter) / 2;
559   vit += startIndex;
560   bit += startIndex;
561   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = startIndex; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < startIndex + numBandsInFilter; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++, vit++, bit++)
562     \{
563       *vit = 1;
564     \}
565   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Added subbands "} << startIndex << \textcolor{stringliteral}{" to "} << startIndex + numBandsInFilter << \textcolor{stringliteral}{"
       to filter"});
566   \textcolor{keywordflow}{return} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ae0323a9039add2978bf5b49550572c7c}{c};
567 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10




Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}!Get\+Spectrum\+Model@{Get\+Spectrum\+Model}}
\index{Get\+Spectrum\+Model@{Get\+Spectrum\+Model}!ns3\+::\+Wifi\+Spectrum\+Value\+Helper@{ns3\+::\+Wifi\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Get\+Spectrum\+Model(uint32\+\_\+t center\+Frequency, uint8\+\_\+t channel\+Width, double band\+Bandwidth, uint8\+\_\+t guard\+Bandwidth)}{GetSpectrumModel(uint32_t centerFrequency, uint8_t channelWidth, double bandBandwidth, uint8_t guardBandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Model} $>$ ns3\+::\+Wifi\+Spectrum\+Value\+Helper\+::\+Get\+Spectrum\+Model (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{center\+Frequency, }
\item[{uint8\+\_\+t}]{channel\+Width, }
\item[{double}]{band\+Bandwidth, }
\item[{uint8\+\_\+t}]{guard\+Bandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}{}\label{classns3_1_1WifiSpectrumValueHelper_a09b58fb2741ff1a78ae6d952ad08b1bb}
Return a \hyperlink{classns3_1_1SpectrumModel}{Spectrum\+Model} instance corresponding to the center frequency and channel width. The model includes +/-\/ 10 M\+Hz of guard bands (i.\+e. the model will span (channel\+Width + 20) M\+Hz of bandwidth).


\begin{DoxyParams}{Parameters}
{\em center\+Frequency} & center frequency (M\+Hz) \\
\hline
{\em channel\+Width} & channel width (M\+Hz) \\
\hline
{\em band\+Bandwidth} & width of each band (Hz) \\
\hline
{\em guard\+Bandwidth} & width of the guard band (M\+Hz)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the static \hyperlink{classns3_1_1SpectrumModel}{Spectrum\+Model} instance corresponding to the given carrier frequency and channel width configuration. 
\end{DoxyReturn}

\begin{DoxyCode}
70 \{
71   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (centerFrequency << (uint16\_t)channelWidth << bandBandwidth << (uint16\_t)
      guardBandwidth);
72   Ptr<SpectrumModel> ret;
73   WifiSpectrumModelId key (centerFrequency, channelWidth);
74   std::map<WifiSpectrumModelId, Ptr<SpectrumModel> >::iterator it = 
      \hyperlink{namespacens3_a973157d1ac2cfc5e6b3d60be8a7d721d}{g\_wifiSpectrumModelMap}.find (key);
75   \textcolor{keywordflow}{if} (it != \hyperlink{namespacens3_a973157d1ac2cfc5e6b3d60be8a7d721d}{g\_wifiSpectrumModelMap}.end ())
76     \{
77       ret = it->second;
78     \}
79   \textcolor{keywordflow}{else}
80     \{
81       \hyperlink{namespacens3_a46ac9188e5cf43bd5292f7b67451246e}{Bands} bands;
82       \textcolor{keywordtype}{double} centerFrequencyHz = centerFrequency * 1e6;
83       \textcolor{keywordtype}{double} bandwidth = (channelWidth + (2 * guardBandwidth)) * 1e6;
84       \textcolor{comment}{// For OFDM, the center subcarrier is null (at center frequency)}
85       uint32\_t numBands = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>} ((bandwidth / bandBandwidth) + 0.5);
86       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (numBands > 0);
87       \textcolor{keywordflow}{if} (numBands % 2 == 0)
88         \{
89           \textcolor{comment}{// round up to the nearest odd number of subbands so that bands}
90           \textcolor{comment}{// are symmetric around center frequency}
91           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Total bandwidth evenly divided by 312.5 KHz"});
92           numBands += 1;    
93         \}
94       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (numBands % 2 == 1, \textcolor{stringliteral}{"Number of bands should be odd"});
95       \textcolor{comment}{// lay down numBands/2 bands symmetrically around center frequency}
96       \textcolor{comment}{// and place an additional band at center frequency}
97       \textcolor{keywordtype}{double} startingFrequencyHz = centerFrequencyHz - (numBands/2 * bandBandwidth) - bandBandwidth/2;
98       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numBands; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
99         \{
100           BandInfo info;
101           \textcolor{keywordtype}{double} \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f} = startingFrequencyHz + (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} * bandBandwidth);
102           info.fl = \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f};
103           f += bandBandwidth/2;
104           info.fc = \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f};
105           f += bandBandwidth/2;
106           info.fh = \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f};
107           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"creating band "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" ("} << info.fl << \textcolor{stringliteral}{":"} << info.fc << \textcolor{stringliteral}{":"} << 
      info.fh << \textcolor{stringliteral}{")"});
108           bands.push\_back (info);
109         \}
110       ret = Create<SpectrumModel> (bands);
111       \hyperlink{namespacens3_a973157d1ac2cfc5e6b3d60be8a7d721d}{g\_wifiSpectrumModelMap}.insert (std::pair<WifiSpectrumModelId, 
      Ptr<SpectrumModel> > (key, ret));
112     \}
113   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"returning SpectrumModel::GetUid () == "} << ret->GetUid ());
114   \textcolor{keywordflow}{return} ret;
115 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12




Here is the caller graph for this function\+:
% FIG 13




The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
spectrum/model/\hyperlink{wifi-spectrum-value-helper_8h}{wifi-\/spectrum-\/value-\/helper.\+h}\item 
spectrum/model/\hyperlink{wifi-spectrum-value-helper_8cc}{wifi-\/spectrum-\/value-\/helper.\+cc}\end{DoxyCompactItemize}
