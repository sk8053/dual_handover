\hypertarget{classns3_1_1BsmApplication}{}\section{ns3\+:\+:Bsm\+Application Class Reference}
\label{classns3_1_1BsmApplication}\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}


The \hyperlink{classns3_1_1BsmApplication}{Bsm\+Application} class sends and receives the I\+E\+EE 1609 W\+A\+VE (Wireless Access in Vehicular Environments) Basic Safety Messages (B\+S\+Ms) and uses the \hyperlink{classns3_1_1WaveBsmStats}{Wave\+Bsm\+Stats} class to manage statistics about B\+S\+Ms transmitted and received The B\+SM is a $\sim$200-\/byte packet that is generally broadcast from every vehicle at a nominal rate of 10 Hz.  




{\ttfamily \#include $<$bsm-\/application.\+h$>$}



Inheritance diagram for ns3\+:\+:Bsm\+Application\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Bsm\+Application\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1BsmApplication_abeda43427b8d9eb81af7e489a203adb4}{Bsm\+Application} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1BsmApplication_ac7038861350100b4b07b8fe0a1b1166f}{$\sim$\+Bsm\+Application} ()
\item 
void \hyperlink{classns3_1_1BsmApplication_a9de57dd437287d1d76007cb7d496981f}{Setup} (\hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4\+Interface\+Container} \&\hyperlink{lte__uplink__power__control_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}, int node\+Id, \hyperlink{classns3_1_1Time}{Time} total\+Time, uint32\+\_\+t wave\+Packet\+Size, \hyperlink{classns3_1_1Time}{Time} wave\+Interval, double gps\+Accuracy\+Ns, std\+::vector$<$ double $>$ ranges\+Sq, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WaveBsmStats}{Wave\+Bsm\+Stats} $>$ wave\+Bsm\+Stats, std\+::vector$<$ int $>$ $\ast$nodes\+Moving, int mode, \hyperlink{classns3_1_1Time}{Time} tx\+Delay)
\begin{DoxyCompactList}\small\item\em Setup B\+SM generation parameters for a node. \end{DoxyCompactList}\item 
int64\+\_\+t \hyperlink{classns3_1_1BsmApplication_a1c30b47f101a56a5eca9bd77134f08e9}{Assign\+Streams} (int64\+\_\+t stream\+Index)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1BsmApplication_a70150473fba93a7988d1edd41ab153df}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{classns3_1_1BsmApplication_a93a6ddc889084ac867d99cfe94e092d2}{wave\+Port} = 9080
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1BsmApplication_ac3e2c412d85bd266a9da9bf56c6e418a}{Do\+Dispose} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1BsmApplication_a2caf2e381d781dfde58e39f19a220523}{Start\+Application} (void)
\begin{DoxyCompactList}\small\item\em Called at time specified by Start. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1BsmApplication_a704b500c0ca87cc950a90e1544e9bbcd}{Stop\+Application} (void)
\begin{DoxyCompactList}\small\item\em Called at time specified by Stop. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BsmApplication_a22a009e7512e5df69dd9b81f96d15f51}{Generate\+Wave\+Traffic} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket, uint32\+\_\+t pkt\+Size, uint32\+\_\+t pkt\+Count, \hyperlink{classns3_1_1Time}{Time} pkt\+Interval, uint32\+\_\+t sending\+Node\+Id)
\begin{DoxyCompactList}\small\item\em Creates and transmits a W\+A\+VE B\+SM packet. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BsmApplication_a554561257f6be190892532b80e7eeb81}{Receive\+Wave\+Packet} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Receive a W\+A\+VE B\+SM packet. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BsmApplication_ac70236a81b0967274fd55884f4935741}{Handle\+Received\+Bsm\+Packet} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ tx\+Node, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ rx\+Node)
\begin{DoxyCompactList}\small\item\em Handle the receipt of a W\+A\+VE B\+SM packet from sender to receiver. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ \hyperlink{classns3_1_1BsmApplication_a3007f596cbc6078a237ad4f4c7c3c743}{Get\+Node} (int id)
\begin{DoxyCompactList}\small\item\em Get the node for the desired id. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ \hyperlink{classns3_1_1BsmApplication_a0db360e7cd84744a0e4b85a351b13659}{Get\+Net\+Device} (int id)
\begin{DoxyCompactList}\small\item\em Get the net device for the desired id. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WaveBsmStats}{Wave\+Bsm\+Stats} $>$ \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\+\_\+wave\+Bsm\+Stats}
\item 
std\+::vector$<$ double $>$ \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\+\_\+tx\+Safety\+Ranges\+Sq}
\begin{DoxyCompactList}\small\item\em tx safety range squared, for optimization \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1BsmApplication_a0f53d0889462a50b4982657ca6db083d}{m\+\_\+\+Total\+Sim\+Time}
\begin{DoxyCompactList}\small\item\em total sim time \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1BsmApplication_a039fd69a7586ab2632da57b666e523bc}{m\+\_\+wave\+Packet\+Size}
\begin{DoxyCompactList}\small\item\em bytes \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1BsmApplication_a35b423a2b33caa0f5455450e6775bde4}{m\+\_\+num\+Wave\+Packets}
\begin{DoxyCompactList}\small\item\em number of wave packets \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1BsmApplication_a99c61fbd55f10fd1e1e349739fadb178}{m\+\_\+wave\+Interval}
\begin{DoxyCompactList}\small\item\em wave interval \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1BsmApplication_a4c66027982c4d715a89e568ce5424eca}{m\+\_\+gps\+Accuracy\+Ns}
\begin{DoxyCompactList}\small\item\em G\+PS accuracy. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4\+Interface\+Container} $\ast$ \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\+\_\+adhoc\+Tx\+Interfaces}
\begin{DoxyCompactList}\small\item\em transmit interfaces \end{DoxyCompactList}\item 
std\+::vector$<$ int $>$ $\ast$ \hyperlink{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}{m\+\_\+nodes\+Moving}
\begin{DoxyCompactList}\small\item\em nodes moving \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1UniformRandomVariable}{Uniform\+Random\+Variable} $>$ \hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\+\_\+unirv}
\begin{DoxyCompactList}\small\item\em random variable \end{DoxyCompactList}\item 
int \hyperlink{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}{m\+\_\+node\+Id}
\item 
int \hyperlink{classns3_1_1BsmApplication_a752ca9febaa0e054d095240671dfc9f2}{m\+\_\+ch\+Access\+Mode}
\begin{DoxyCompactList}\small\item\em W\+A\+VE channel access mode. 0=continuous P\+HY; 1=channel-\/switching. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1BsmApplication_a30f0fb812b58a1bf98ec17129283dcb8}{m\+\_\+tx\+Max\+Delay}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1BsmApplication_a9fcac2779174fb7abfb6bcadf8c66f83}{m\+\_\+prev\+Tx\+Delay}
\begin{DoxyCompactList}\small\item\em prevous transmit delay \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
The \hyperlink{classns3_1_1BsmApplication}{Bsm\+Application} class sends and receives the I\+E\+EE 1609 W\+A\+VE (Wireless Access in Vehicular Environments) Basic Safety Messages (B\+S\+Ms) and uses the \hyperlink{classns3_1_1WaveBsmStats}{Wave\+Bsm\+Stats} class to manage statistics about B\+S\+Ms transmitted and received The B\+SM is a $\sim$200-\/byte packet that is generally broadcast from every vehicle at a nominal rate of 10 Hz. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Bsm\+Application@{Bsm\+Application}}
\index{Bsm\+Application@{Bsm\+Application}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Bsm\+Application()}{BsmApplication()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Bsm\+Application\+::\+Bsm\+Application (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BsmApplication_abeda43427b8d9eb81af7e489a203adb4}{}\label{classns3_1_1BsmApplication_abeda43427b8d9eb81af7e489a203adb4}


Constructor. 

\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}

\begin{DoxyCode}
51   : \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats} (0),
52     \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq} (),
53     \hyperlink{classns3_1_1BsmApplication_a0f53d0889462a50b4982657ca6db083d}{m\_TotalSimTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10)),
54     \hyperlink{classns3_1_1BsmApplication_a039fd69a7586ab2632da57b666e523bc}{m\_wavePacketSize} (200),
55     \hyperlink{classns3_1_1BsmApplication_a35b423a2b33caa0f5455450e6775bde4}{m\_numWavePackets} (1),
56     \hyperlink{classns3_1_1BsmApplication_a99c61fbd55f10fd1e1e349739fadb178}{m\_waveInterval} (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (100)),
57     \hyperlink{classns3_1_1BsmApplication_a4c66027982c4d715a89e568ce5424eca}{m\_gpsAccuracyNs} (10000),
58     \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\_adhocTxInterfaces} (0),
59     \hyperlink{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}{m\_nodesMoving} (0),
60     \hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\_unirv} (0),
61     \hyperlink{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}{m\_nodeId} (0),
62     \hyperlink{classns3_1_1BsmApplication_a752ca9febaa0e054d095240671dfc9f2}{m\_chAccessMode} (0),
63     \hyperlink{classns3_1_1BsmApplication_a30f0fb812b58a1bf98ec17129283dcb8}{m\_txMaxDelay} (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (10)),
64     \hyperlink{classns3_1_1BsmApplication_a9fcac2779174fb7abfb6bcadf8c66f83}{m\_prevTxDelay} (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (0))
65 \{
66   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
67 \}
\end{DoxyCode}
\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!````~Bsm\+Application@{$\sim$\+Bsm\+Application}}
\index{````~Bsm\+Application@{$\sim$\+Bsm\+Application}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{$\sim$\+Bsm\+Application()}{~BsmApplication()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Bsm\+Application\+::$\sim$\+Bsm\+Application (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1BsmApplication_ac7038861350100b4b07b8fe0a1b1166f}{}\label{classns3_1_1BsmApplication_ac7038861350100b4b07b8fe0a1b1166f}

\begin{DoxyCode}
70 \{
71   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
72 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Assign\+Streams@{Assign\+Streams}}
\index{Assign\+Streams@{Assign\+Streams}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Assign\+Streams(int64\+\_\+t stream\+Index)}{AssignStreams(int64_t streamIndex)}}]{\setlength{\rightskip}{0pt plus 5cm}int64\+\_\+t ns3\+::\+Bsm\+Application\+::\+Assign\+Streams (
\begin{DoxyParamCaption}
\item[{int64\+\_\+t}]{stream\+Index}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BsmApplication_a1c30b47f101a56a5eca9bd77134f08e9}{}\label{classns3_1_1BsmApplication_a1c30b47f101a56a5eca9bd77134f08e9}
Assign a fixed random variable stream number to the random variables used by this model. Return the number of streams (possibly zero) that have been assigned. The Install() method should have previously been called by the user.


\begin{DoxyParams}{Parameters}
{\em stream\+Index} & first stream index to use \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of stream indices assigned by this helper 
\end{DoxyReturn}

\begin{DoxyCode}
377 \{
378   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
379 
380   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\_unirv});  \textcolor{comment}{// should be set by Setup() prevoiusly}
381   \hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\_unirv}->\hyperlink{classns3_1_1RandomVariableStream_add11aaf975607746b7e271d300659a94}{SetStream} (streamIndex);
382 
383   \textcolor{keywordflow}{return} 1;
384 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Bsm\+Application\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1BsmApplication_ac3e2c412d85bd266a9da9bf56c6e418a}{}\label{classns3_1_1BsmApplication_ac3e2c412d85bd266a9da9bf56c6e418a}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1BsmApplication_ac3e2c412d85bd266a9da9bf56c6e418a}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1Application_a89f6c9454532d62600251872bede6d04}{ns3\+::\+Application}.


\begin{DoxyCode}
76 \{
77   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
78 
79   \textcolor{comment}{// chain up}
80   \hyperlink{classns3_1_1Application_a89f6c9454532d62600251872bede6d04}{Application::DoDispose} ();
81 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Generate\+Wave\+Traffic@{Generate\+Wave\+Traffic}}
\index{Generate\+Wave\+Traffic@{Generate\+Wave\+Traffic}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Generate\+Wave\+Traffic(\+Ptr$<$ Socket $>$ socket, uint32\+\_\+t pkt\+Size, uint32\+\_\+t pkt\+Count, Time pkt\+Interval, uint32\+\_\+t sending\+Node\+Id)}{GenerateWaveTraffic(Ptr< Socket > socket, uint32_t pktSize, uint32_t pktCount, Time pktInterval, uint32_t sendingNodeId)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Bsm\+Application\+::\+Generate\+Wave\+Traffic (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket, }
\item[{uint32\+\_\+t}]{pkt\+Size, }
\item[{uint32\+\_\+t}]{pkt\+Count, }
\item[{{\bf Time}}]{pkt\+Interval, }
\item[{uint32\+\_\+t}]{sending\+Node\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a22a009e7512e5df69dd9b81f96d15f51}{}\label{classns3_1_1BsmApplication_a22a009e7512e5df69dd9b81f96d15f51}


Creates and transmits a W\+A\+VE B\+SM packet. 


\begin{DoxyParams}{Parameters}
{\em socket} & socket to use for transmission \\
\hline
{\em pkt\+Size} & the size, in bytes, of the W\+A\+VE B\+SM packet \\
\hline
{\em pkt\+Count} & the number of remaining W\+A\+VE B\+SM packets to be transmitted \\
\hline
{\em pkt\+Interval} & the interval, in seconds, until the next packet should be transmitted \\
\hline
{\em sending\+Node\+Id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}

\begin{DoxyCode}
226 \{
227   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
228 
229   \textcolor{comment}{// more packets to send?}
230   \textcolor{keywordflow}{if} (pktCount > 0)
231     \{
232       \textcolor{comment}{// for now, we cannot tell if each node has}
233       \textcolor{comment}{// started mobility.  so, as an optimization}
234       \textcolor{comment}{// only send if  this node is moving}
235       \textcolor{comment}{// if not, then skip}
236       \textcolor{keywordtype}{int} txNodeId = sendingNodeId;
237       Ptr<Node> txNode = \hyperlink{classns3_1_1Application_a664b15088389bec8e35b35742138f097}{GetNode} (txNodeId);
238       Ptr<MobilityModel> txPosition = txNode->GetObject<MobilityModel> ();
239       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (txPosition != 0);
240 
241       \textcolor{keywordtype}{int} senderMoving = \hyperlink{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}{m\_nodesMoving}->at (txNodeId);
242       \textcolor{keywordflow}{if} (senderMoving != 0)
243         \{
244           \textcolor{comment}{// send it!}
245           socket->\hyperlink{classns3_1_1Socket_a036901c8f485fe5b6eab93b7f2ec289d}{Send} (Create<Packet> (pktSize));
246           \textcolor{comment}{// count it}
247           \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats}->IncTxPktCount ();
248           \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats}->IncTxByteCount (pktSize);
249           \textcolor{keywordtype}{int} wavePktsSent = \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats}->GetTxPktCount ();
250           \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats}->GetLogging () != 0) && ((wavePktsSent % 1000) == 0))
251             \{
252               \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND} (\textcolor{stringliteral}{"Sending WAVE pkt # "} << wavePktsSent );
253             \}
254 
255           \textcolor{comment}{// find other nodes within range that would be}
256           \textcolor{comment}{// expected to receive this broadbast}
257           \textcolor{keywordtype}{int} nRxNodes = \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\_adhocTxInterfaces}->\hyperlink{classns3_1_1Ipv4InterfaceContainer_a8d565289d84cd90ef806d0f86e6235f9}{GetN} ();
258           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nRxNodes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
259             \{
260               Ptr<Node> rxNode = \hyperlink{classns3_1_1Application_a664b15088389bec8e35b35742138f097}{GetNode} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
261               \textcolor{keywordtype}{int} rxNodeId = rxNode->GetId ();
262 
263               \textcolor{keywordflow}{if} (rxNodeId != txNodeId)
264                 \{
265                   Ptr<MobilityModel> rxPosition = rxNode->GetObject<MobilityModel> ();
266                   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (rxPosition != 0);
267                   \textcolor{comment}{// confirm that the receiving node}
268                   \textcolor{comment}{// has also started moving in the scenario}
269                   \textcolor{comment}{// if it has not started moving, then}
270                   \textcolor{comment}{// it is not a candidate to receive a packet}
271                   \textcolor{keywordtype}{int} receiverMoving = \hyperlink{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}{m\_nodesMoving}->at (rxNodeId);
272                   \textcolor{keywordflow}{if} (receiverMoving == 1)
273                     \{
274                       \textcolor{keywordtype}{double} distSq = \hyperlink{classns3_1_1MobilityHelper_a4471ab3605ba031e02ee90fc43bf8c5d}{MobilityHelper::GetDistanceSquaredBetween}
       (txNode, rxNode);
275                       \textcolor{keywordflow}{if} (distSq > 0.0)
276                         \{
277                           \textcolor{comment}{// dest node within range?}
278                           \textcolor{keywordtype}{int} rangeCount = \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq}.size ();
279                           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index = 1; index <= rangeCount; index++)
280                             \{
281                               \textcolor{keywordflow}{if} (distSq <= \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq}[index - 1])
282                                 \{
283                                   \textcolor{comment}{// we should expect dest node to receive broadcast pkt}
284                                   \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats}->IncExpectedRxPktCount (index);
285                                 \}
286                             \}
287                         \}
288                     \}
289                 \}
290             \}
291         \}
292 
293       \textcolor{comment}{// every BSM must be scheduled with a tx time delay}
294       \textcolor{comment}{// of +/- (5) ms.  See comments in StartApplication().}
295       \textcolor{comment}{// we handle this as a tx delay of [0..10] ms}
296       \textcolor{comment}{// from the start of the pktInterval boundary}
297       uint32\_t d\_ns = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>} (\hyperlink{classns3_1_1BsmApplication_a30f0fb812b58a1bf98ec17129283dcb8}{m\_txMaxDelay}.\hyperlink{classns3_1_1Time_a8c88e10860be3bc0cfabdbd92df42cff}{GetInteger} ());
298       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} txDelay = \hyperlink{group__timecivil_ga281d64bcb4dad96267d83c7688ec433f}{NanoSeconds} (\hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\_unirv}->\hyperlink{classns3_1_1RandomVariableStream_a66cd94e6305ce7f000f1a9ff0fcb9aef}{GetInteger} (0, d\_ns));
299 
300       \textcolor{comment}{// do not want the tx delay to be cumulative, so}
301       \textcolor{comment}{// deduct the previous delay value.  thus we adjust}
302       \textcolor{comment}{// to schedule the next event at the next pktInterval,}
303       \textcolor{comment}{// plus some new [0..10] ms tx delay}
304       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} txTime = pktInterval - \hyperlink{classns3_1_1BsmApplication_a9fcac2779174fb7abfb6bcadf8c66f83}{m\_prevTxDelay} + txDelay;
305       \hyperlink{classns3_1_1BsmApplication_a9fcac2779174fb7abfb6bcadf8c66f83}{m\_prevTxDelay} = txDelay;
306 
307       \hyperlink{classns3_1_1Simulator_a86dbaef45a15a42365d7d2ae550449f6}{Simulator::ScheduleWithContext} (socket->
      \hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (),
308                                       txTime, &
      \hyperlink{classns3_1_1BsmApplication_a22a009e7512e5df69dd9b81f96d15f51}{BsmApplication::GenerateWaveTraffic}, \textcolor{keyword}{this},
309                                       socket, pktSize, pktCount - 1, pktInterval,  socket->
      \hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} ());
310     \}
311   \textcolor{keywordflow}{else}
312     \{
313       socket->Close ();
314     \}
315 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Get\+Net\+Device@{Get\+Net\+Device}}
\index{Get\+Net\+Device@{Get\+Net\+Device}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Get\+Net\+Device(int id)}{GetNetDevice(int id)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Net\+Device} $>$ ns3\+::\+Bsm\+Application\+::\+Get\+Net\+Device (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a0db360e7cd84744a0e4b85a351b13659}{}\label{classns3_1_1BsmApplication_a0db360e7cd84744a0e4b85a351b13659}


Get the net device for the desired id. 


\begin{DoxyParams}{Parameters}
{\em id} & the id of the desired net device \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ptr to the desired net device 
\end{DoxyReturn}

\begin{DoxyCode}
400 \{
401   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
402 
403   std::pair<Ptr<Ipv4>, uint32\_t> \textcolor{keyword}{interface }= \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\_adhocTxInterfaces}->Get (id);
404   Ptr<Ipv4> pp = interface.first;
405   Ptr<NetDevice> device = pp->GetObject<NetDevice> ();
406 
407   \textcolor{keywordflow}{return} device;
408 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Get\+Node@{Get\+Node}}
\index{Get\+Node@{Get\+Node}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Get\+Node(int id)}{GetNode(int id)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Node} $>$ ns3\+::\+Bsm\+Application\+::\+Get\+Node (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a3007f596cbc6078a237ad4f4c7c3c743}{}\label{classns3_1_1BsmApplication_a3007f596cbc6078a237ad4f4c7c3c743}


Get the node for the desired id. 


\begin{DoxyParams}{Parameters}
{\em id} & the id of the desired node \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ptr to the desired node 
\end{DoxyReturn}

\begin{DoxyCode}
388 \{
389   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
390 
391   std::pair<Ptr<Ipv4>, uint32\_t> \textcolor{keyword}{interface }= \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\_adhocTxInterfaces}->Get (id);
392   Ptr<Ipv4> pp = interface.first;
393   Ptr<Node> node = pp->GetObject<Node> ();
394 
395   \textcolor{keywordflow}{return} node;
396 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Bsm\+Application\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1BsmApplication_a70150473fba93a7988d1edd41ab153df}{}\label{classns3_1_1BsmApplication_a70150473fba93a7988d1edd41ab153df}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
41 \{
42   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::BsmApplication"})
43     .SetParent<\hyperlink{classns3_1_1Application_acd261926c72b02cdb48fc7f8838ee173}{Application}> ()
44     .SetGroupName (\textcolor{stringliteral}{"Wave"})
45     .AddConstructor<\hyperlink{classns3_1_1BsmApplication_abeda43427b8d9eb81af7e489a203adb4}{BsmApplication}> ()
46     ;
47   \textcolor{keywordflow}{return} tid;
48 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Handle\+Received\+Bsm\+Packet@{Handle\+Received\+Bsm\+Packet}}
\index{Handle\+Received\+Bsm\+Packet@{Handle\+Received\+Bsm\+Packet}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Handle\+Received\+Bsm\+Packet(\+Ptr$<$ Node $>$ tx\+Node, Ptr$<$ Node $>$ rx\+Node)}{HandleReceivedBsmPacket(Ptr< Node > txNode, Ptr< Node > rxNode)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Bsm\+Application\+::\+Handle\+Received\+Bsm\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{tx\+Node, }
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{rx\+Node}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_ac70236a81b0967274fd55884f4935741}{}\label{classns3_1_1BsmApplication_ac70236a81b0967274fd55884f4935741}


Handle the receipt of a W\+A\+VE B\+SM packet from sender to receiver. 


\begin{DoxyParams}{Parameters}
{\em tx\+Node} & the sending node \\
\hline
{\em rx\+Node} & the receiving node \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}

\begin{DoxyCode}
345 \{
346   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
347 
348   \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats}->IncRxPktCount ();
349 
350   Ptr<MobilityModel> rxPosition = rxNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<MobilityModel> ();
351   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (rxPosition != 0);
352   \textcolor{comment}{// confirm that the receiving node}
353   \textcolor{comment}{// has also started moving in the scenario}
354   \textcolor{comment}{// if it has not started moving, then}
355   \textcolor{comment}{// it is not a candidate to receive a packet}
356   \textcolor{keywordtype}{int} rxNodeId = rxNode->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} ();
357   \textcolor{keywordtype}{int} receiverMoving = \hyperlink{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}{m\_nodesMoving}->at (rxNodeId);
358   \textcolor{keywordflow}{if} (receiverMoving == 1)
359     \{
360       \textcolor{keywordtype}{double} rxDistSq = \hyperlink{classns3_1_1MobilityHelper_a4471ab3605ba031e02ee90fc43bf8c5d}{MobilityHelper::GetDistanceSquaredBetween} 
      (rxNode, txNode);
361       \textcolor{keywordflow}{if} (rxDistSq > 0.0)
362         \{
363           \textcolor{keywordtype}{int} rangeCount = \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq}.size ();
364           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index = 1; index <= rangeCount; index++)
365             \{
366               \textcolor{keywordflow}{if} (rxDistSq <= \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq}[index - 1])
367                 \{
368                   \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats}->IncRxPktInRangeCount (index);
369                 \}
370             \}
371         \}
372     \}
373 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Receive\+Wave\+Packet@{Receive\+Wave\+Packet}}
\index{Receive\+Wave\+Packet@{Receive\+Wave\+Packet}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Receive\+Wave\+Packet(\+Ptr$<$ Socket $>$ socket)}{ReceiveWavePacket(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Bsm\+Application\+::\+Receive\+Wave\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a554561257f6be190892532b80e7eeb81}{}\label{classns3_1_1BsmApplication_a554561257f6be190892532b80e7eeb81}


Receive a W\+A\+VE B\+SM packet. 


\begin{DoxyParams}{Parameters}
{\em socket} & the receiving socket \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}

\begin{DoxyCode}
318 \{
319   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
320 
321   Ptr<Packet> packet;
322   Address senderAddr;
323   \textcolor{keywordflow}{while} ((packet = socket->\hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{RecvFrom} (senderAddr)))
324     \{
325       Ptr<Node> rxNode = socket->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ();
326 
327       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1InetSocketAddress_a9426766e34e928ce5dbdbeb9563a10df}{InetSocketAddress::IsMatchingType} (senderAddr))
328         \{
329           InetSocketAddress addr = \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (senderAddr
      );
330           \textcolor{keywordtype}{int} \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes} = \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\_adhocTxInterfaces}->\hyperlink{classns3_1_1Ipv4InterfaceContainer_a8d565289d84cd90ef806d0f86e6235f9}{GetN} ();
331           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
332             \{
333               \textcolor{keywordflow}{if} (addr.GetIpv4 () == \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\_adhocTxInterfaces}->
      \hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) )
334                 \{
335                   Ptr<Node> txNode = \hyperlink{classns3_1_1Application_a664b15088389bec8e35b35742138f097}{GetNode} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
336                   \hyperlink{classns3_1_1BsmApplication_ac70236a81b0967274fd55884f4935741}{HandleReceivedBsmPacket} (txNode, rxNode);
337                 \}
338             \}
339         \}
340     \}
341 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Setup@{Setup}}
\index{Setup@{Setup}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Setup(\+Ipv4\+Interface\+Container \&i, int node\+Id, Time total\+Time, uint32\+\_\+t wave\+Packet\+Size, Time wave\+Interval, double gps\+Accuracy\+Ns, std\+::vector$<$ double $>$ ranges\+Sq, Ptr$<$ Wave\+Bsm\+Stats $>$ wave\+Bsm\+Stats, std\+::vector$<$ int $>$ $\ast$nodes\+Moving, int mode, Time tx\+Delay)}{Setup(Ipv4InterfaceContainer &i, int nodeId, Time totalTime, uint32_t wavePacketSize, Time waveInterval, double gpsAccuracyNs, std::vector< double > rangesSq, Ptr< WaveBsmStats > waveBsmStats, std::vector< int > *nodesMoving, int mode, Time txDelay)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Bsm\+Application\+::\+Setup (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Interface\+Container} \&}]{i, }
\item[{int}]{node\+Id, }
\item[{{\bf Time}}]{total\+Time, }
\item[{uint32\+\_\+t}]{wave\+Packet\+Size, }
\item[{{\bf Time}}]{wave\+Interval, }
\item[{double}]{gps\+Accuracy\+Ns, }
\item[{std\+::vector$<$ double $>$}]{ranges\+Sq, }
\item[{{\bf Ptr}$<$ {\bf Wave\+Bsm\+Stats} $>$}]{wave\+Bsm\+Stats, }
\item[{std\+::vector$<$ int $>$ $\ast$}]{nodes\+Moving, }
\item[{int}]{mode, }
\item[{{\bf Time}}]{tx\+Delay}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BsmApplication_a9de57dd437287d1d76007cb7d496981f}{}\label{classns3_1_1BsmApplication_a9de57dd437287d1d76007cb7d496981f}


Setup B\+SM generation parameters for a node. 


\begin{DoxyParams}{Parameters}
{\em i} & I\+Pv4 interface container \\
\hline
{\em node\+Id} & identifier of the node (index into container) \\
\hline
{\em total\+Time} & total amount of time that B\+SM packets should be transmitted \\
\hline
{\em wave\+Packet\+Size} & the size, in bytes, of a W\+A\+VE B\+SM \\
\hline
{\em wave\+Interval} & the time, in seconds, between each W\+A\+VE B\+SM transmission, typically 10 Hz (0.\+1 second) \\
\hline
{\em gps\+Accuracy\+Ns} & the timing synchronization accuracy of G\+PS time, in nanoseconds. G\+PS time-\/sync is $\sim$40-\/100 ns. Universally synchronized time among all vehicles will result in all vehicles transmitting safety messages simultaneously, leading to excessive wireless collisions. \\
\hline
{\em ranges\+Sq} & the expected transmission range, in m $^\wedge$ 2. \\
\hline
{\em wave\+Bsm\+Stats} & class for W\+A\+VE B\+SM statistics \\
\hline
{\em nodes\+Moving} & of whether or not node(s) are moving \\
\hline
{\em mode} & \\
\hline
{\em tx\+Delay} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}

\begin{DoxyCode}
195 \{
196   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
197 
198   \hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\_unirv} = CreateObject<UniformRandomVariable> ();
199 
200   \hyperlink{classns3_1_1BsmApplication_a0f53d0889462a50b4982657ca6db083d}{m\_TotalSimTime} = totalTime;
201   \hyperlink{classns3_1_1BsmApplication_a039fd69a7586ab2632da57b666e523bc}{m\_wavePacketSize} = wavePacketSize;
202   \hyperlink{classns3_1_1BsmApplication_a99c61fbd55f10fd1e1e349739fadb178}{m\_waveInterval} = waveInterval;
203   \hyperlink{classns3_1_1BsmApplication_a4c66027982c4d715a89e568ce5424eca}{m\_gpsAccuracyNs} = gpsAccuracyNs;
204   \textcolor{keywordtype}{int} size = rangesSq.size ();
205   \hyperlink{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{m\_waveBsmStats} = waveBsmStats;
206   \hyperlink{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}{m\_nodesMoving} = nodesMoving;
207   \hyperlink{classns3_1_1BsmApplication_a752ca9febaa0e054d095240671dfc9f2}{m\_chAccessMode} = chAccessMode;
208   \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq}.clear ();
209   \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq}.resize (size, 0);
210 
211   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index = 0; index < size; index++)
212     \{
213       \textcolor{comment}{// stored as square of value, for optimization}
214       \hyperlink{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{m\_txSafetyRangesSq}[index] = rangesSq[index];
215     \}
216 
217   \hyperlink{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{m\_adhocTxInterfaces} = &\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
218   \hyperlink{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}{m\_nodeId} = nodeId;
219   \hyperlink{classns3_1_1BsmApplication_a30f0fb812b58a1bf98ec17129283dcb8}{m\_txMaxDelay} = txMaxDelay;
220 \}
\end{DoxyCode}
\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Start\+Application@{Start\+Application}}
\index{Start\+Application@{Start\+Application}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Start\+Application(void)}{StartApplication(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Bsm\+Application\+::\+Start\+Application (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1BsmApplication_a2caf2e381d781dfde58e39f19a220523}{}\label{classns3_1_1BsmApplication_a2caf2e381d781dfde58e39f19a220523}


Called at time specified by Start. 



Reimplemented from \hyperlink{classns3_1_1Application_a3405dd01508beacce8ed6e3a20bdf05a}{ns3\+::\+Application}.


\begin{DoxyCode}
85 \{
86   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
87 
88   \textcolor{comment}{// setup generation of WAVE BSM messages}
89   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} waveInterPacketInterval = \hyperlink{classns3_1_1BsmApplication_a99c61fbd55f10fd1e1e349739fadb178}{m\_waveInterval};
90 
91   \textcolor{comment}{// BSMs are not transmitted for the first second}
92   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} startTime = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0);
93   \textcolor{comment}{// total length of time transmitting WAVE packets}
94   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} totalTxTime = \hyperlink{classns3_1_1BsmApplication_a0f53d0889462a50b4982657ca6db083d}{m\_TotalSimTime} - startTime;
95   \textcolor{comment}{// total WAVE packets needing to be sent}
96   \hyperlink{classns3_1_1BsmApplication_a35b423a2b33caa0f5455450e6775bde4}{m\_numWavePackets} = (uint32\_t) (totalTxTime.GetDouble () / 
      \hyperlink{classns3_1_1BsmApplication_a99c61fbd55f10fd1e1e349739fadb178}{m\_waveInterval}.\hyperlink{classns3_1_1Time_a303bcdd30438760a958b4eee799c83e8}{GetDouble} ());
97 
98   TypeId tid = \hyperlink{classns3_1_1TypeId_a119cf99c20931fdc294602cd360b180e}{TypeId::LookupByName} (\textcolor{stringliteral}{"ns3::UdpSocketFactory"});
99 
100   \textcolor{comment}{// every node broadcasts WAVE BSM to potentially all other nodes}
101   Ptr<Socket> recvSink = \hyperlink{classns3_1_1Socket_ad448a62bb50ad3dbac59c879a885a8d2}{Socket::CreateSocket} (\hyperlink{classns3_1_1Application_a664b15088389bec8e35b35742138f097}{GetNode} (
      \hyperlink{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}{m\_nodeId}), tid);
102   recvSink->SetRecvCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1BsmApplication_a554561257f6be190892532b80e7eeb81}{BsmApplication::ReceiveWavePacket}, \textcolor{keyword}{this}));
103   InetSocketAddress local = InetSocketAddress (\hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} (), 
      \hyperlink{classns3_1_1BsmApplication_a93a6ddc889084ac867d99cfe94e092d2}{wavePort});
104   recvSink->Bind (local);
105   recvSink->BindToNetDevice (\hyperlink{classns3_1_1BsmApplication_a0db360e7cd84744a0e4b85a351b13659}{GetNetDevice} (\hyperlink{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}{m\_nodeId}));
106   recvSink->SetAllowBroadcast (\textcolor{keyword}{true});
107 
108   \textcolor{comment}{// dest is broadcast address}
109   InetSocketAddress remote = InetSocketAddress (Ipv4Address (\textcolor{stringliteral}{"255.255.255.255"}), 
      \hyperlink{classns3_1_1BsmApplication_a93a6ddc889084ac867d99cfe94e092d2}{wavePort});
110   recvSink->Connect (remote);
111 
112   \textcolor{comment}{// Transmission start time for each BSM:}
113   \textcolor{comment}{// We assume that the start transmission time}
114   \textcolor{comment}{// for the first packet will be on a ns-3 time}
115   \textcolor{comment}{// "Second" boundary - e.g., 1.0 s.}
116   \textcolor{comment}{// However, the actual transmit time must reflect}
117   \textcolor{comment}{// additional effects of 1) clock drift and}
118   \textcolor{comment}{// 2) transmit delay requirements.}
119   \textcolor{comment}{// 1) Clock drift - clocks are not perfectly}
120   \textcolor{comment}{// synchronized across all nodes.  In a VANET}
121   \textcolor{comment}{// we assume all nodes sync to GPS time, which}
122   \textcolor{comment}{// itself is assumed  accurate to, say, 40-100 ns.}
123   \textcolor{comment}{// Thus, the start transmission time must be adjusted}
124   \textcolor{comment}{// by some value, t\_drift.}
125   \textcolor{comment}{// 2) Transmit delay requirements - The US}
126   \textcolor{comment}{// minimum performance requirements for V2V}
127   \textcolor{comment}{// BSM transmission expect a random delay of}
128   \textcolor{comment}{// +/- 5 ms, to avoid simultanous transmissions}
129   \textcolor{comment}{// by all vehicles congesting the channel.  Thus,}
130   \textcolor{comment}{// we need to adjust the start trasmission time by}
131   \textcolor{comment}{// some value, t\_tx\_delay.}
132   \textcolor{comment}{// Therefore, the actual transmit time should be:}
133   \textcolor{comment}{// t\_start = t\_time + t\_drift + t\_tx\_delay}
134   \textcolor{comment}{// t\_drift is always added to t\_time.}
135   \textcolor{comment}{// t\_tx\_delay is supposed to be +/- 5ms, but if we}
136   \textcolor{comment}{// allow negative numbers the time could drift to a value}
137   \textcolor{comment}{// BEFORE the interval start time (i.e., at 100 ms}
138   \textcolor{comment}{// boundaries, we do not want to drift into the}
139   \textcolor{comment}{// previous interval, such as at 95 ms.  Instead,}
140   \textcolor{comment}{// we always want to be at the 100 ms interval boundary,}
141   \textcolor{comment}{// plus [0..10] ms tx delay.}
142   \textcolor{comment}{// Thus, the average t\_tx\_delay will be}
143   \textcolor{comment}{// within the desired range of [0..10] ms of}
144   \textcolor{comment}{// (t\_time + t\_drift)}
145 
146   \textcolor{comment}{// WAVE devices sync to GPS time}
147   \textcolor{comment}{// and all devices would like to begin broadcasting}
148   \textcolor{comment}{// their safety messages immediately at the start of}
149   \textcolor{comment}{// the CCH interval.  However, if all do so, then}
150   \textcolor{comment}{// significant collisions occur.  Thus, we assume there}
151   \textcolor{comment}{// is some GPS sync accuracy on GPS devices,}
152   \textcolor{comment}{// typically 40-100 ns.}
153   \textcolor{comment}{// Get a uniformly random number for GPS sync accuracy, in ns.}
154   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} tDrift = \hyperlink{group__timecivil_ga281d64bcb4dad96267d83c7688ec433f}{NanoSeconds} (\hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\_unirv}->\hyperlink{classns3_1_1RandomVariableStream_a66cd94e6305ce7f000f1a9ff0fcb9aef}{GetInteger} (0, 
      \hyperlink{classns3_1_1BsmApplication_a4c66027982c4d715a89e568ce5424eca}{m\_gpsAccuracyNs}));
155 
156   \textcolor{comment}{// When transmitting at a default rate of 10 Hz,}
157   \textcolor{comment}{// the subsystem shall transmit every 100 ms +/-}
158   \textcolor{comment}{// a random value between 0 and 5 ms. [MPR-BSMTX-TXTIM-002]}
159   \textcolor{comment}{// Source: CAMP Vehicle Safety Communications 4 Consortium}
160   \textcolor{comment}{// On-board Minimum Performance Requirements}
161   \textcolor{comment}{// for V2V Safety Systems Version 1.0, December 17, 2014}
162   \textcolor{comment}{// max transmit delay (default 10ms)}
163   \textcolor{comment}{// get value for transmit delay, as number of ns}
164   uint32\_t d\_ns = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>} (\hyperlink{classns3_1_1BsmApplication_a30f0fb812b58a1bf98ec17129283dcb8}{m\_txMaxDelay}.\hyperlink{classns3_1_1Time_a8c88e10860be3bc0cfabdbd92df42cff}{GetInteger} ());
165   \textcolor{comment}{// convert random tx delay to ns-3 time}
166   \textcolor{comment}{// see note above regarding centering tx delay}
167   \textcolor{comment}{// offset by 5ms + a random value.}
168   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} txDelay = \hyperlink{group__timecivil_ga281d64bcb4dad96267d83c7688ec433f}{NanoSeconds} (\hyperlink{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{m\_unirv}->\hyperlink{classns3_1_1RandomVariableStream_a66cd94e6305ce7f000f1a9ff0fcb9aef}{GetInteger} (0, d\_ns));
169   \hyperlink{classns3_1_1BsmApplication_a9fcac2779174fb7abfb6bcadf8c66f83}{m\_prevTxDelay} = txDelay;
170 
171   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} txTime = startTime + tDrift + txDelay;
172   \textcolor{comment}{// schedule transmission of first packet}
173   \hyperlink{classns3_1_1Simulator_a86dbaef45a15a42365d7d2ae550449f6}{Simulator::ScheduleWithContext} (recvSink->GetNode ()->GetId (),
174                                   txTime, &\hyperlink{classns3_1_1BsmApplication_a22a009e7512e5df69dd9b81f96d15f51}{BsmApplication::GenerateWaveTraffic}
      , \textcolor{keyword}{this},
175                                   recvSink, \hyperlink{classns3_1_1BsmApplication_a039fd69a7586ab2632da57b666e523bc}{m\_wavePacketSize}, 
      \hyperlink{classns3_1_1BsmApplication_a35b423a2b33caa0f5455450e6775bde4}{m\_numWavePackets}, waveInterPacketInterval, \hyperlink{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}{m\_nodeId});
176 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13


\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!Stop\+Application@{Stop\+Application}}
\index{Stop\+Application@{Stop\+Application}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{Stop\+Application(void)}{StopApplication(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Bsm\+Application\+::\+Stop\+Application (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1BsmApplication_a704b500c0ca87cc950a90e1544e9bbcd}{}\label{classns3_1_1BsmApplication_a704b500c0ca87cc950a90e1544e9bbcd}


Called at time specified by Stop. 



Reimplemented from \hyperlink{classns3_1_1Application_aea844f3c114b1faf8de1faf5127ea8b4}{ns3\+::\+Application}.


\begin{DoxyCode}
179 \{
180   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
181 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+adhoc\+Tx\+Interfaces@{m\+\_\+adhoc\+Tx\+Interfaces}}
\index{m\+\_\+adhoc\+Tx\+Interfaces@{m\+\_\+adhoc\+Tx\+Interfaces}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+adhoc\+Tx\+Interfaces}{m_adhocTxInterfaces}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+Interface\+Container}$\ast$ ns3\+::\+Bsm\+Application\+::m\+\_\+adhoc\+Tx\+Interfaces\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}{}\label{classns3_1_1BsmApplication_a0eecb4df76f2dd46564c5f0b14260e3b}


transmit interfaces 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+ch\+Access\+Mode@{m\+\_\+ch\+Access\+Mode}}
\index{m\+\_\+ch\+Access\+Mode@{m\+\_\+ch\+Access\+Mode}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+ch\+Access\+Mode}{m_chAccessMode}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Bsm\+Application\+::m\+\_\+ch\+Access\+Mode\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a752ca9febaa0e054d095240671dfc9f2}{}\label{classns3_1_1BsmApplication_a752ca9febaa0e054d095240671dfc9f2}


W\+A\+VE channel access mode. 0=continuous P\+HY; 1=channel-\/switching. 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+gps\+Accuracy\+Ns@{m\+\_\+gps\+Accuracy\+Ns}}
\index{m\+\_\+gps\+Accuracy\+Ns@{m\+\_\+gps\+Accuracy\+Ns}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+gps\+Accuracy\+Ns}{m_gpsAccuracyNs}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Bsm\+Application\+::m\+\_\+gps\+Accuracy\+Ns\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a4c66027982c4d715a89e568ce5424eca}{}\label{classns3_1_1BsmApplication_a4c66027982c4d715a89e568ce5424eca}


G\+PS accuracy. 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+node\+Id@{m\+\_\+node\+Id}}
\index{m\+\_\+node\+Id@{m\+\_\+node\+Id}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+node\+Id}{m_nodeId}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Bsm\+Application\+::m\+\_\+node\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}{}\label{classns3_1_1BsmApplication_aa94eecd18ffb201c13f58329781b77b6}
node ID \index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+nodes\+Moving@{m\+\_\+nodes\+Moving}}
\index{m\+\_\+nodes\+Moving@{m\+\_\+nodes\+Moving}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+nodes\+Moving}{m_nodesMoving}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$int$>$$\ast$ ns3\+::\+Bsm\+Application\+::m\+\_\+nodes\+Moving\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}{}\label{classns3_1_1BsmApplication_a573c92bdce7e395c9509e3b856d8fa6c}


nodes moving 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+num\+Wave\+Packets@{m\+\_\+num\+Wave\+Packets}}
\index{m\+\_\+num\+Wave\+Packets@{m\+\_\+num\+Wave\+Packets}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+num\+Wave\+Packets}{m_numWavePackets}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Bsm\+Application\+::m\+\_\+num\+Wave\+Packets\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a35b423a2b33caa0f5455450e6775bde4}{}\label{classns3_1_1BsmApplication_a35b423a2b33caa0f5455450e6775bde4}


number of wave packets 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+prev\+Tx\+Delay@{m\+\_\+prev\+Tx\+Delay}}
\index{m\+\_\+prev\+Tx\+Delay@{m\+\_\+prev\+Tx\+Delay}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+prev\+Tx\+Delay}{m_prevTxDelay}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Bsm\+Application\+::m\+\_\+prev\+Tx\+Delay\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a9fcac2779174fb7abfb6bcadf8c66f83}{}\label{classns3_1_1BsmApplication_a9fcac2779174fb7abfb6bcadf8c66f83}


prevous transmit delay 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+\+Total\+Sim\+Time@{m\+\_\+\+Total\+Sim\+Time}}
\index{m\+\_\+\+Total\+Sim\+Time@{m\+\_\+\+Total\+Sim\+Time}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+\+Total\+Sim\+Time}{m_TotalSimTime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Bsm\+Application\+::m\+\_\+\+Total\+Sim\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a0f53d0889462a50b4982657ca6db083d}{}\label{classns3_1_1BsmApplication_a0f53d0889462a50b4982657ca6db083d}


total sim time 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+tx\+Max\+Delay@{m\+\_\+tx\+Max\+Delay}}
\index{m\+\_\+tx\+Max\+Delay@{m\+\_\+tx\+Max\+Delay}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+tx\+Max\+Delay}{m_txMaxDelay}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Bsm\+Application\+::m\+\_\+tx\+Max\+Delay\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a30f0fb812b58a1bf98ec17129283dcb8}{}\label{classns3_1_1BsmApplication_a30f0fb812b58a1bf98ec17129283dcb8}
When transmitting at a default rate of 10 Hz, the subsystem shall transmit every 100 ms +/-\/ a random value between 0 and 5 ms. \mbox{[}M\+P\+R-\/\+B\+S\+M\+T\+X-\/\+T\+X\+T\+I\+M-\/002\mbox{]} Source\+: C\+A\+MP Vehicle Safety Communications 4 Consortium On-\/board Minimum Performance Requirements for V2V Safety Systems Version 1.\+0, December 17, 2014 max transmit delay (default 10ms) \index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+tx\+Safety\+Ranges\+Sq@{m\+\_\+tx\+Safety\+Ranges\+Sq}}
\index{m\+\_\+tx\+Safety\+Ranges\+Sq@{m\+\_\+tx\+Safety\+Ranges\+Sq}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+tx\+Safety\+Ranges\+Sq}{m_txSafetyRangesSq}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ ns3\+::\+Bsm\+Application\+::m\+\_\+tx\+Safety\+Ranges\+Sq\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}{}\label{classns3_1_1BsmApplication_a2e160b9460506f5d689f9a397504e13b}


tx safety range squared, for optimization 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+unirv@{m\+\_\+unirv}}
\index{m\+\_\+unirv@{m\+\_\+unirv}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+unirv}{m_unirv}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Uniform\+Random\+Variable}$>$ ns3\+::\+Bsm\+Application\+::m\+\_\+unirv\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}{}\label{classns3_1_1BsmApplication_a8c6f7e06af51ef84b38358397b2d3cdc}


random variable 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+wave\+Bsm\+Stats@{m\+\_\+wave\+Bsm\+Stats}}
\index{m\+\_\+wave\+Bsm\+Stats@{m\+\_\+wave\+Bsm\+Stats}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+wave\+Bsm\+Stats}{m_waveBsmStats}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Wave\+Bsm\+Stats}$>$ ns3\+::\+Bsm\+Application\+::m\+\_\+wave\+Bsm\+Stats\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}{}\label{classns3_1_1BsmApplication_afc424d5340ea34ee3099625627b8c036}
B\+SM stats \index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+wave\+Interval@{m\+\_\+wave\+Interval}}
\index{m\+\_\+wave\+Interval@{m\+\_\+wave\+Interval}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+wave\+Interval}{m_waveInterval}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Bsm\+Application\+::m\+\_\+wave\+Interval\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a99c61fbd55f10fd1e1e349739fadb178}{}\label{classns3_1_1BsmApplication_a99c61fbd55f10fd1e1e349739fadb178}


wave interval 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!m\+\_\+wave\+Packet\+Size@{m\+\_\+wave\+Packet\+Size}}
\index{m\+\_\+wave\+Packet\+Size@{m\+\_\+wave\+Packet\+Size}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{m\+\_\+wave\+Packet\+Size}{m_wavePacketSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Bsm\+Application\+::m\+\_\+wave\+Packet\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BsmApplication_a039fd69a7586ab2632da57b666e523bc}{}\label{classns3_1_1BsmApplication_a039fd69a7586ab2632da57b666e523bc}


bytes 

\index{ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}!wave\+Port@{wave\+Port}}
\index{wave\+Port@{wave\+Port}!ns3\+::\+Bsm\+Application@{ns3\+::\+Bsm\+Application}}
\subsubsection[{\texorpdfstring{wave\+Port}{wavePort}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Bsm\+Application\+::wave\+Port = 9080\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1BsmApplication_a93a6ddc889084ac867d99cfe94e092d2}{}\label{classns3_1_1BsmApplication_a93a6ddc889084ac867d99cfe94e092d2}
(Arbitrary) port number that is used to create a socket for transmitting W\+A\+VE B\+S\+Ms. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
wave/model/\hyperlink{bsm-application_8h}{bsm-\/application.\+h}\item 
wave/model/\hyperlink{bsm-application_8cc}{bsm-\/application.\+cc}\end{DoxyCompactItemize}
