\hypertarget{classns3_1_1PacketSink}{}\section{ns3\+:\+:Packet\+Sink Class Reference}
\label{classns3_1_1PacketSink}\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}


Receive and consume traffic generated to an IP address and port.  




{\ttfamily \#include $<$packet-\/sink.\+h$>$}



Inheritance diagram for ns3\+:\+:Packet\+Sink\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Packet\+Sink\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1PacketSink_af7575e499def16f611c8678c2f3ff084}{Packet\+Sink} ()
\item 
virtual \hyperlink{classns3_1_1PacketSink_af3dbfb8f7ffb163e0b0241798a8abb1e}{$\sim$\+Packet\+Sink} ()
\item 
uint64\+\_\+t \hyperlink{classns3_1_1PacketSink_a11e7c4cc4a3c1e16e9abbb2cd3a12334}{Get\+Total\+Rx} () const 
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ \hyperlink{classns3_1_1PacketSink_a8da15152b90590e91aa2013628f73a45}{Get\+Listening\+Socket} (void) const 
\item 
\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ $>$ \hyperlink{classns3_1_1PacketSink_a0402d1351db6f28268c4128b0233bb8a}{Get\+Accepted\+Sockets} (void) const 
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1PacketSink_a1e48dd11e1375c234e0276b00919900e}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1PacketSink_a00aee3d4e6a589e9e17a2c75f7e0c710}{Do\+Dispose} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1PacketSink_a45449bbaa6fb20caed62418f029d79d6}{Start\+Application} (void)
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Application}{Application} specific startup code. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1PacketSink_a622558c6115057d0d425657242843dd2}{Stop\+Application} (void)
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Application}{Application} specific shutdown code. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1PacketSink_a6bffa1d7397f8aa2588a19686301de55}{Handle\+Read} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Handle a packet received by the application. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1PacketSink_a74ea2fb5fda8a63020c6453258a1cd2f}{Handle\+Accept} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket, const \hyperlink{classns3_1_1Address}{Address} \&\hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from})
\begin{DoxyCompactList}\small\item\em Handle an incoming connection. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1PacketSink_ae897d6540d02dbbfc1283fefe6bb9748}{Handle\+Peer\+Close} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Handle an connection close. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1PacketSink_a892849e8ad986f4ef44dfd29fb6b9445}{Handle\+Peer\+Error} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Handle an connection error. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\+\_\+socket}
\begin{DoxyCompactList}\small\item\em Listening socket. \end{DoxyCompactList}\item 
\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ $>$ \hyperlink{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{m\+\_\+socket\+List}
\begin{DoxyCompactList}\small\item\em the accepted sockets \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Address}{Address} \hyperlink{classns3_1_1PacketSink_a3d7ac204fd89eb95de0247caff3db927}{m\+\_\+local}
\begin{DoxyCompactList}\small\item\em Local address to bind to. \end{DoxyCompactList}\item 
uint64\+\_\+t \hyperlink{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}{m\+\_\+total\+Rx}
\begin{DoxyCompactList}\small\item\em Total bytes received. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1PacketSink_a1988cd4eb565f1e5ac6fd21beedf0563}{m\+\_\+tid}
\begin{DoxyCompactList}\small\item\em Protocol \hyperlink{classns3_1_1TypeId}{Type\+Id}. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$, const \hyperlink{classns3_1_1Address}{Address} \& $>$ \hyperlink{classns3_1_1PacketSink_a8a0294426cf001db7827f4e39c46eb6e}{m\+\_\+rx\+Trace}
\begin{DoxyCompactList}\small\item\em Traced \hyperlink{classns3_1_1Callback}{Callback}\+: received packets, source address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Receive and consume traffic generated to an IP address and port. 

This application was written to complement \hyperlink{classns3_1_1OnOffApplication}{On\+Off\+Application}, but it is more general so a \hyperlink{classns3_1_1PacketSink}{Packet\+Sink} name was selected. Functionally it is important to use in multicast situations, so that reception of the layer-\/2 multicast frames of interest are enabled, but it is also useful for unicast as an example of how you can write something simple to receive packets at the application layer. Also, if an IP stack generates I\+C\+MP Port Unreachable errors, receiving applications will be needed.

The constructor specifies the \hyperlink{classns3_1_1Address}{Address} (IP address and port) and the transport protocol to use. A virtual Receive () method is installed as a callback on the receiving socket. By default, when logging is enabled, it prints out the size of packets and their address. A tracing source to Receive() is also available. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Packet\+Sink@{Packet\+Sink}}
\index{Packet\+Sink@{Packet\+Sink}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Packet\+Sink()}{PacketSink()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Packet\+Sink\+::\+Packet\+Sink (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PacketSink_af7575e499def16f611c8678c2f3ff084}{}\label{classns3_1_1PacketSink_af7575e499def16f611c8678c2f3ff084}

\begin{DoxyCode}
67 \{
68   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
69   \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket} = 0;
70   \hyperlink{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}{m\_totalRx} = 0;
71 \}
\end{DoxyCode}
\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!````~Packet\+Sink@{$\sim$\+Packet\+Sink}}
\index{````~Packet\+Sink@{$\sim$\+Packet\+Sink}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{$\sim$\+Packet\+Sink()}{~PacketSink()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Packet\+Sink\+::$\sim$\+Packet\+Sink (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PacketSink_af3dbfb8f7ffb163e0b0241798a8abb1e}{}\label{classns3_1_1PacketSink_af3dbfb8f7ffb163e0b0241798a8abb1e}

\begin{DoxyCode}
74 \{
75   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
76 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Packet\+Sink\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1PacketSink_a00aee3d4e6a589e9e17a2c75f7e0c710}{}\label{classns3_1_1PacketSink_a00aee3d4e6a589e9e17a2c75f7e0c710}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1PacketSink_a00aee3d4e6a589e9e17a2c75f7e0c710}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1Application_a89f6c9454532d62600251872bede6d04}{ns3\+::\+Application}.


\begin{DoxyCode}
99 \{
100   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
101   \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket} = 0;
102   \hyperlink{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{m\_socketList}.clear ();
103 
104   \textcolor{comment}{// chain up}
105   \hyperlink{classns3_1_1Application_a89f6c9454532d62600251872bede6d04}{Application::DoDispose} ();
106 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Get\+Accepted\+Sockets@{Get\+Accepted\+Sockets}}
\index{Get\+Accepted\+Sockets@{Get\+Accepted\+Sockets}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Get\+Accepted\+Sockets(void) const }{GetAcceptedSockets(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std\+::list}$<$ {\bf Ptr}$<$ {\bf Socket} $>$ $>$ ns3\+::\+Packet\+Sink\+::\+Get\+Accepted\+Sockets (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1PacketSink_a0402d1351db6f28268c4128b0233bb8a}{}\label{classns3_1_1PacketSink_a0402d1351db6f28268c4128b0233bb8a}
\begin{DoxyReturn}{Returns}
list of pointers to accepted sockets 
\end{DoxyReturn}

\begin{DoxyCode}
93 \{
94   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
95   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{m\_socketList};
96 \}
\end{DoxyCode}
\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Get\+Listening\+Socket@{Get\+Listening\+Socket}}
\index{Get\+Listening\+Socket@{Get\+Listening\+Socket}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Get\+Listening\+Socket(void) const }{GetListeningSocket(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Socket} $>$ ns3\+::\+Packet\+Sink\+::\+Get\+Listening\+Socket (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1PacketSink_a8da15152b90590e91aa2013628f73a45}{}\label{classns3_1_1PacketSink_a8da15152b90590e91aa2013628f73a45}
\begin{DoxyReturn}{Returns}
pointer to listening socket 
\end{DoxyReturn}

\begin{DoxyCode}
86 \{
87   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
88   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket};
89 \}
\end{DoxyCode}
\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Get\+Total\+Rx@{Get\+Total\+Rx}}
\index{Get\+Total\+Rx@{Get\+Total\+Rx}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Get\+Total\+Rx() const }{GetTotalRx() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Packet\+Sink\+::\+Get\+Total\+Rx (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1PacketSink_a11e7c4cc4a3c1e16e9abbb2cd3a12334}{}\label{classns3_1_1PacketSink_a11e7c4cc4a3c1e16e9abbb2cd3a12334}
\begin{DoxyReturn}{Returns}
the total bytes received in this sink app 
\end{DoxyReturn}

\begin{DoxyCode}
79 \{
80   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
81   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}{m\_totalRx};
82 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Packet\+Sink\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1PacketSink_a1e48dd11e1375c234e0276b00919900e}{}\label{classns3_1_1PacketSink_a1e48dd11e1375c234e0276b00919900e}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
43 \{
44   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::PacketSink"})
45     .SetParent<\hyperlink{classns3_1_1Application_acd261926c72b02cdb48fc7f8838ee173}{Application}> ()
46     .SetGroupName(\textcolor{stringliteral}{"Applications"})
47     .AddConstructor<\hyperlink{classns3_1_1PacketSink_af7575e499def16f611c8678c2f3ff084}{PacketSink}> ()
48     .AddAttribute (\textcolor{stringliteral}{"Local"},
49                    \textcolor{stringliteral}{"The Address on which to Bind the rx socket."},
50                    AddressValue (),
51                    MakeAddressAccessor (&\hyperlink{classns3_1_1PacketSink_a3d7ac204fd89eb95de0247caff3db927}{PacketSink::m\_local}),
52                    MakeAddressChecker ())
53     .AddAttribute (\textcolor{stringliteral}{"Protocol"},
54                    \textcolor{stringliteral}{"The type id of the protocol to use for the rx socket."},
55                    TypeIdValue (\hyperlink{classns3_1_1UdpSocketFactory_ad5b47e944de8861e3dc2b6de1ccbdf5b}{UdpSocketFactory::GetTypeId} ()),
56                    MakeTypeIdAccessor (&\hyperlink{classns3_1_1PacketSink_a1988cd4eb565f1e5ac6fd21beedf0563}{PacketSink::m\_tid}),
57                    MakeTypeIdChecker ())
58     .AddTraceSource (\textcolor{stringliteral}{"Rx"},
59                      \textcolor{stringliteral}{"A packet has been received"},
60                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1PacketSink_a8a0294426cf001db7827f4e39c46eb6e}{PacketSink::m\_rxTrace}),
61                      \textcolor{stringliteral}{"ns3::Packet::AddressTracedCallback"})
62   ;
63   \textcolor{keywordflow}{return} tid;
64 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Handle\+Accept@{Handle\+Accept}}
\index{Handle\+Accept@{Handle\+Accept}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Handle\+Accept(\+Ptr$<$ Socket $>$ socket, const Address \&from)}{HandleAccept(Ptr< Socket > socket, const Address &from)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Packet\+Sink\+::\+Handle\+Accept (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket, }
\item[{const {\bf Address} \&}]{from}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_a74ea2fb5fda8a63020c6453258a1cd2f}{}\label{classns3_1_1PacketSink_a74ea2fb5fda8a63020c6453258a1cd2f}


Handle an incoming connection. 


\begin{DoxyParams}{Parameters}
{\em socket} & the incoming connection socket \\
\hline
{\em from} & the address the connection is from \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
210 \{
211   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} << \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from});
212   \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s}->SetRecvCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classns3_1_1PacketSink_a6bffa1d7397f8aa2588a19686301de55}{PacketSink::HandleRead}, \textcolor{keyword}{this}));
213   \hyperlink{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{m\_socketList}.push\_back (\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
214 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Handle\+Peer\+Close@{Handle\+Peer\+Close}}
\index{Handle\+Peer\+Close@{Handle\+Peer\+Close}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Handle\+Peer\+Close(\+Ptr$<$ Socket $>$ socket)}{HandlePeerClose(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Packet\+Sink\+::\+Handle\+Peer\+Close (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_ae897d6540d02dbbfc1283fefe6bb9748}{}\label{classns3_1_1PacketSink_ae897d6540d02dbbfc1283fefe6bb9748}


Handle an connection close. 


\begin{DoxyParams}{Parameters}
{\em socket} & the connected socket \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
199 \{
200   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << socket);
201 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Handle\+Peer\+Error@{Handle\+Peer\+Error}}
\index{Handle\+Peer\+Error@{Handle\+Peer\+Error}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Handle\+Peer\+Error(\+Ptr$<$ Socket $>$ socket)}{HandlePeerError(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Packet\+Sink\+::\+Handle\+Peer\+Error (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_a892849e8ad986f4ef44dfd29fb6b9445}{}\label{classns3_1_1PacketSink_a892849e8ad986f4ef44dfd29fb6b9445}


Handle an connection error. 


\begin{DoxyParams}{Parameters}
{\em socket} & the connected socket \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
204 \{
205   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << socket);
206 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Handle\+Read@{Handle\+Read}}
\index{Handle\+Read@{Handle\+Read}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Handle\+Read(\+Ptr$<$ Socket $>$ socket)}{HandleRead(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Packet\+Sink\+::\+Handle\+Read (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_a6bffa1d7397f8aa2588a19686301de55}{}\label{classns3_1_1PacketSink_a6bffa1d7397f8aa2588a19686301de55}


Handle a packet received by the application. 


\begin{DoxyParams}{Parameters}
{\em socket} & the receiving socket \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
164 \{
165   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << socket);
166   Ptr<Packet> packet;
167   Address \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from};
168   \textcolor{keywordflow}{while} ((packet = socket->\hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{RecvFrom} (from)))
169     \{
170       \textcolor{keywordflow}{if} (packet->GetSize () == 0)
171         \{ \textcolor{comment}{//EOF}
172           \textcolor{keywordflow}{break};
173         \}
174       \hyperlink{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}{m\_totalRx} += packet->GetSize ();
175       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1InetSocketAddress_a9426766e34e928ce5dbdbeb9563a10df}{InetSocketAddress::IsMatchingType} (from))
176         \{
177           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"At time "} << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds ()
178                        << \textcolor{stringliteral}{"s packet sink received "}
179                        <<  packet->GetSize () << \textcolor{stringliteral}{" bytes from "}
180                        << \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom}(from).
      \hyperlink{classns3_1_1InetSocketAddress_a925d5288448467062884ce0363a63658}{GetIpv4} ()
181                        << \textcolor{stringliteral}{" port "} << \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (from).
      \hyperlink{classns3_1_1InetSocketAddress_ac1d62cfd1075b36df273b382c5bd3e14}{GetPort} ()
182                        << \textcolor{stringliteral}{" total Rx "} << \hyperlink{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}{m\_totalRx} << \textcolor{stringliteral}{" bytes"});
183         \}
184       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Inet6SocketAddress_a4d928c54affbfb530a12076d6d7e0540}{Inet6SocketAddress::IsMatchingType} (from))
185         \{
186           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"At time "} << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds ()
187                        << \textcolor{stringliteral}{"s packet sink received "}
188                        <<  packet->GetSize () << \textcolor{stringliteral}{" bytes from "}
189                        << \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom}(from).
      \hyperlink{classns3_1_1Inet6SocketAddress_a19c83458e1e61d5accd19bec5afb254e}{GetIpv6} ()
190                        << \textcolor{stringliteral}{" port "} << \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (from)
      .\hyperlink{classns3_1_1Inet6SocketAddress_a62a2ada36d9dfac670979a03c01a698c}{GetPort} ()
191                        << \textcolor{stringliteral}{" total Rx "} << \hyperlink{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}{m\_totalRx} << \textcolor{stringliteral}{" bytes"});
192         \}
193       \hyperlink{classns3_1_1PacketSink_a8a0294426cf001db7827f4e39c46eb6e}{m\_rxTrace} (packet, from);
194     \}
195 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Start\+Application@{Start\+Application}}
\index{Start\+Application@{Start\+Application}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Start\+Application(void)}{StartApplication(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Packet\+Sink\+::\+Start\+Application (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1PacketSink_a45449bbaa6fb20caed62418f029d79d6}{}\label{classns3_1_1PacketSink_a45449bbaa6fb20caed62418f029d79d6}


\hyperlink{classns3_1_1Application}{Application} specific startup code. 

The Start\+Application method is called at the start time specified by Start This method should be overridden by all or most application subclasses. 

Reimplemented from \hyperlink{classns3_1_1Application_a3405dd01508beacce8ed6e3a20bdf05a}{ns3\+::\+Application}.


\begin{DoxyCode}
111 \{
112   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
113   \textcolor{comment}{// Create the socket if not already}
114   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket})
115     \{
116       \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket} = \hyperlink{classns3_1_1Socket_ad448a62bb50ad3dbac59c879a885a8d2}{Socket::CreateSocket} (\hyperlink{classns3_1_1Application_a664b15088389bec8e35b35742138f097}{GetNode} (), 
      \hyperlink{classns3_1_1PacketSink_a1988cd4eb565f1e5ac6fd21beedf0563}{m\_tid});
117       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (\hyperlink{classns3_1_1PacketSink_a3d7ac204fd89eb95de0247caff3db927}{m\_local}) == -1)
118         \{
119           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Failed to bind socket"});
120         \}
121       \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_a6b3529a32632cf1a56debf5f79e56c54}{Listen} ();
122       \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_a8186c87627fa3ece326d8f1c822d7f95}{ShutdownSend} ();
123       \textcolor{keywordflow}{if} (\hyperlink{namespacens3_1_1addressUtils_a2806342189d7bd73179d40bbf81bdb41}{addressUtils::IsMulticast} (\hyperlink{classns3_1_1PacketSink_a3d7ac204fd89eb95de0247caff3db927}{m\_local}))
124         \{
125           Ptr<UdpSocket> udpSocket = DynamicCast<UdpSocket> (\hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket});
126           \textcolor{keywordflow}{if} (udpSocket)
127             \{
128               \textcolor{comment}{// equivalent to setsockopt (MCAST\_JOIN\_GROUP)}
129               udpSocket->MulticastJoinGroup (0, \hyperlink{classns3_1_1PacketSink_a3d7ac204fd89eb95de0247caff3db927}{m\_local});
130             \}
131           \textcolor{keywordflow}{else}
132             \{
133               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Error: joining multicast on a non-UDP socket"});
134             \}
135         \}
136     \}
137 
138   \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1PacketSink_a6bffa1d7397f8aa2588a19686301de55}{PacketSink::HandleRead}, \textcolor{keyword}{this}));
139   \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_a408532e435c63166e6ccc337c0cea871}{SetAcceptCallback} (
140     \hyperlink{group__makenullcallback_ga7e3cd6816f63ea9112c04b0086c2c65a}{MakeNullCallback}<\textcolor{keywordtype}{bool}, Ptr<Socket>, \textcolor{keyword}{const} Address &> (),
141     \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classns3_1_1PacketSink_a74ea2fb5fda8a63020c6453258a1cd2f}{PacketSink::HandleAccept}, \textcolor{keyword}{this}));
142   \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_acac93d69d477332371fe83397ed8beeb}{SetCloseCallbacks} (
143     \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classns3_1_1PacketSink_ae897d6540d02dbbfc1283fefe6bb9748}{PacketSink::HandlePeerClose}, \textcolor{keyword}{this}),
144     \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classns3_1_1PacketSink_a892849e8ad986f4ef44dfd29fb6b9445}{PacketSink::HandlePeerError}, \textcolor{keyword}{this}));
145 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11


\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!Stop\+Application@{Stop\+Application}}
\index{Stop\+Application@{Stop\+Application}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{Stop\+Application(void)}{StopApplication(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Packet\+Sink\+::\+Stop\+Application (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1PacketSink_a622558c6115057d0d425657242843dd2}{}\label{classns3_1_1PacketSink_a622558c6115057d0d425657242843dd2}


\hyperlink{classns3_1_1Application}{Application} specific shutdown code. 

The Stop\+Application method is called at the stop time specified by Stop This method should be overridden by all or most application subclasses. 

Reimplemented from \hyperlink{classns3_1_1Application_aea844f3c114b1faf8de1faf5127ea8b4}{ns3\+::\+Application}.


\begin{DoxyCode}
148 \{
149   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
150   \textcolor{keywordflow}{while}(!\hyperlink{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{m\_socketList}.empty ()) \textcolor{comment}{//these are accepted sockets, close them}
151     \{
152       Ptr<Socket> acceptedSocket = \hyperlink{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{m\_socketList}.front ();
153       \hyperlink{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{m\_socketList}.pop\_front ();
154       acceptedSocket->Close ();
155     \}
156   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}) 
157     \{
158       \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_abdac6e2498c5aa2963ef361d4200ddf3}{Close} ();
159       \hyperlink{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{m\_socket}->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makenullcallback_ga7e3cd6816f63ea9112c04b0086c2c65a}{MakeNullCallback}<\textcolor{keywordtype}{void}, Ptr<Socket> 
      > ());
160     \}
161 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12




\subsection{Member Data Documentation}
\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!m\+\_\+local@{m\+\_\+local}}
\index{m\+\_\+local@{m\+\_\+local}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{m\+\_\+local}{m_local}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Address} ns3\+::\+Packet\+Sink\+::m\+\_\+local\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_a3d7ac204fd89eb95de0247caff3db927}{}\label{classns3_1_1PacketSink_a3d7ac204fd89eb95de0247caff3db927}


Local address to bind to. 

\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!m\+\_\+rx\+Trace@{m\+\_\+rx\+Trace}}
\index{m\+\_\+rx\+Trace@{m\+\_\+rx\+Trace}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{m\+\_\+rx\+Trace}{m_rxTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<${\bf Ptr}$<$const {\bf Packet}$>$, const {\bf Address} \&$>$ ns3\+::\+Packet\+Sink\+::m\+\_\+rx\+Trace\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_a8a0294426cf001db7827f4e39c46eb6e}{}\label{classns3_1_1PacketSink_a8a0294426cf001db7827f4e39c46eb6e}


Traced \hyperlink{classns3_1_1Callback}{Callback}\+: received packets, source address. 

\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!m\+\_\+socket@{m\+\_\+socket}}
\index{m\+\_\+socket@{m\+\_\+socket}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{m\+\_\+socket}{m_socket}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Socket}$>$ ns3\+::\+Packet\+Sink\+::m\+\_\+socket\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}{}\label{classns3_1_1PacketSink_aeb02446587fb10cf429a39dcccb89ed0}


Listening socket. 

\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!m\+\_\+socket\+List@{m\+\_\+socket\+List}}
\index{m\+\_\+socket\+List@{m\+\_\+socket\+List}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{m\+\_\+socket\+List}{m_socketList}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std\+::list}$<${\bf Ptr}$<${\bf Socket}$>$ $>$ ns3\+::\+Packet\+Sink\+::m\+\_\+socket\+List\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}{}\label{classns3_1_1PacketSink_a510c28b6f2397952196b759a237404e9}


the accepted sockets 

\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!m\+\_\+tid@{m\+\_\+tid}}
\index{m\+\_\+tid@{m\+\_\+tid}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{m\+\_\+tid}{m_tid}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Packet\+Sink\+::m\+\_\+tid\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_a1988cd4eb565f1e5ac6fd21beedf0563}{}\label{classns3_1_1PacketSink_a1988cd4eb565f1e5ac6fd21beedf0563}


Protocol \hyperlink{classns3_1_1TypeId}{Type\+Id}. 

\index{ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}!m\+\_\+total\+Rx@{m\+\_\+total\+Rx}}
\index{m\+\_\+total\+Rx@{m\+\_\+total\+Rx}!ns3\+::\+Packet\+Sink@{ns3\+::\+Packet\+Sink}}
\subsubsection[{\texorpdfstring{m\+\_\+total\+Rx}{m_totalRx}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Packet\+Sink\+::m\+\_\+total\+Rx\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}{}\label{classns3_1_1PacketSink_aa0e0c557f09ac820ca13b5a500600bd1}


Total bytes received. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
applications/model/\hyperlink{packet-sink_8h}{packet-\/sink.\+h}\item 
applications/model/\hyperlink{packet-sink_8cc}{packet-\/sink.\+cc}\end{DoxyCompactItemize}
