\hypertarget{classns3_1_1BSSchedulerRtps}{}\section{ns3\+:\+:B\+S\+Scheduler\+Rtps Class Reference}
\label{classns3_1_1BSSchedulerRtps}\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}


This class implements a simple downlink scheduler for rt\+PS flows.  




{\ttfamily \#include $<$bs-\/scheduler-\/rtps.\+h$>$}



Inheritance diagram for ns3\+:\+:B\+S\+Scheduler\+Rtps\+:
% FIG 0


Collaboration diagram for ns3\+:\+:B\+S\+Scheduler\+Rtps\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1BSSchedulerRtps_acf23bbe9a781385523b2349c676c1f7e}{B\+S\+Scheduler\+Rtps} ()
\item 
\hyperlink{classns3_1_1BSSchedulerRtps_a78b27370d8624a84be9d1bb037b80036}{B\+S\+Scheduler\+Rtps} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1BaseStationNetDevice}{Base\+Station\+Net\+Device} $>$ bs)
\item 
\hyperlink{classns3_1_1BSSchedulerRtps_a948fd5099730f9b677ebd4fd0642927c}{$\sim$\+B\+S\+Scheduler\+Rtps} (void)
\item 
\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ std\+::pair$<$ \hyperlink{classns3_1_1OfdmDlMapIe}{Ofdm\+Dl\+Map\+Ie} $\ast$, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PacketBurst}{Packet\+Burst} $>$ $>$ $>$ $\ast$ \hyperlink{classns3_1_1BSSchedulerRtps_a9c228dcf18263a21911a05d2fb147db0}{Get\+Downlink\+Bursts} (void) const 
\begin{DoxyCompactList}\small\item\em This function returns all the downlink bursts scheduled for the next downlink sub-\/frame. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{Add\+Downlink\+Burst} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ connection, uint8\+\_\+t diuc, \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{Wimax\+Phy\+::\+Modulation\+Type} modulation\+Type, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PacketBurst}{Packet\+Burst} $>$ burst)
\begin{DoxyCompactList}\small\item\em This function adds a downlink burst to the list of downlink bursts scheduled for the next downlink sub-\/frame. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_a311c9c524b1a898c72afa35a9d7ac0dc}{Schedule} (void)
\begin{DoxyCompactList}\small\item\em Schedule function. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1BSSchedulerRtps_aeea01c34ea087a03188d0ae8d07f57ae}{Select\+I\+Rand\+B\+C\+Connection} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ \&connection)
\begin{DoxyCompactList}\small\item\em Check for IR and Broadcast connections that have packets to transmit. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1BSSchedulerRtps_a9c66335cafc7834a3b0de47df0f69913}{Select\+Menagement\+Connection} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ \&connection)
\begin{DoxyCompactList}\small\item\em Check for Basic and Primary connections that have packets to transmit. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1BSSchedulerRtps_ac9e83b101579949c8e044920fe35a533}{Select\+U\+G\+S\+Connection} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ \&connection)
\begin{DoxyCompactList}\small\item\em Check for U\+GS connections that have packets to transmit. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1BSSchedulerRtps_a6253d8d6989392c373a6aa5bd59176fc}{Select\+R\+T\+P\+S\+Connection} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ \&connection)
\begin{DoxyCompactList}\small\item\em Check for rt\+PS connections that have packets to transmit. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1BSSchedulerRtps_a75902c5d51c9a9088553e51bc918fa97}{Select\+N\+R\+T\+P\+S\+Connection} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ \&connection)
\begin{DoxyCompactList}\small\item\em Check for nrt\+PS connections that have packets to transmit. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1BSSchedulerRtps_ada0902fd806be05be27b260cb960f9cc}{Select\+B\+E\+Connection} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ \&connection)
\begin{DoxyCompactList}\small\item\em Check for BE connections that have packets to transmit. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1BSSchedulerRtps_a082c11be23b996ed560dcb76ce8db3a2}{Select\+Connection} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WimaxConnection}{Wimax\+Connection} $>$ \&connection)
\begin{DoxyCompactList}\small\item\em Selects a connection from the list of connections having packets to be sent . \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_ad041a6417c9cf0ddc40116ac877015ab}{B\+S\+Scheduler\+Broadcast\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em schedules the broadcast connections \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_aa679d00c7063da179a3d2401e4a37f8e}{B\+S\+Scheduler\+Initial\+Ranging\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em schedules the IR connections \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_a9245c54c83bcde5e7178dacbbfc745c6}{B\+S\+Scheduler\+Basic\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em schedules the basic connections \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_a2bd7697f2451b3fa6865c858e7c2556f}{B\+S\+Scheduler\+Primary\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em schedules the primary connection \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_a71243a521e00bd88f39b681a0f14ed91}{B\+S\+Scheduler\+U\+G\+S\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em schedules the U\+GS connection \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_acb75718835482da98c9b7eafc756dc4c}{B\+S\+Scheduler\+R\+T\+P\+S\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em Downlink \hyperlink{classns3_1_1Scheduler}{Scheduler} for rt\+PS connections. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_ae148375221d20545e3f54ac024c933c4}{B\+S\+Scheduler\+N\+R\+T\+P\+S\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em schedules the N\+R\+T\+PS connections \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1BSSchedulerRtps_a74fd827556c1b6f8b58ecdb2720a36d5}{B\+S\+Scheduler\+B\+E\+Connection} (uint32\+\_\+t \&available\+Symbols)
\begin{DoxyCompactList}\small\item\em schedules the BE connection \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PacketBurst}{Packet\+Burst} $>$ \hyperlink{classns3_1_1BSSchedulerRtps_a638694f9cafedabeaf7027951a66cc04}{Create\+Ugs\+Burst} (\hyperlink{classns3_1_1ServiceFlow}{Service\+Flow} $\ast$service\+Flow, \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{Wimax\+Phy\+::\+Modulation\+Type} modulation\+Type, uint32\+\_\+t available\+Symbols)
\begin{DoxyCompactList}\small\item\em Creates a downlink U\+GS burst. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1BSSchedulerRtps_af72d432e566999dae12237842c07f7e0}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ std\+::pair$<$ \hyperlink{classns3_1_1OfdmDlMapIe}{Ofdm\+Dl\+Map\+Ie} $\ast$, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PacketBurst}{Packet\+Burst} $>$ $>$ $>$ $\ast$ \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\+\_\+downlink\+Bursts}
\begin{DoxyCompactList}\small\item\em down link bursts \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
This class implements a simple downlink scheduler for rt\+PS flows. 

The D\+L-\/rt\+P\+S-\/\+Scheduler assigns the available bandwidth the service flows in the following order\+: IR Connections, Broadcast Connections, Basic and Primary Connections, U\+GS Connections, rt\+PS Connections, nrt\+PS Connections, BE Connections. The IR, Broadcast and Basic/\+Primary Connections must transmit all packet in the queue. The U\+GS flows can transmit the quota of date equal to the \char`\"{}\+Grant Size\char`\"{} (that is one of service flows QoS parameters) according to their requested Max\+Latency (another QoS parameter). All rt\+PS flows are able to transmit all packet in the queue according to the available bandwidth. The bandwidth saturation control has been implemented to redistribute the effective available bandwidth to all rt\+PS flows that have at least one packet to transmit. The remaining bandwidth is allocated to rnt\+PS and BE Connections. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+Rtps@{B\+S\+Scheduler\+Rtps}}
\index{B\+S\+Scheduler\+Rtps@{B\+S\+Scheduler\+Rtps}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+Rtps()}{BSSchedulerRtps()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+Rtps (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_acf23bbe9a781385523b2349c676c1f7e}{}\label{classns3_1_1BSSchedulerRtps_acf23bbe9a781385523b2349c676c1f7e}

\begin{DoxyCode}
58   : \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts} (\textcolor{keyword}{new} \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std::list}<std::pair<OfdmDlMapIe*, Ptr<PacketBurst> > > (
      ))
59 \{
60   \hyperlink{classns3_1_1BSScheduler_a64cd43d547d218965cfe03892bdda4f0}{SetBs} (0);
61 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+Rtps@{B\+S\+Scheduler\+Rtps}}
\index{B\+S\+Scheduler\+Rtps@{B\+S\+Scheduler\+Rtps}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+Rtps(\+Ptr$<$ Base\+Station\+Net\+Device $>$ bs)}{BSSchedulerRtps(Ptr< BaseStationNetDevice > bs)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+Rtps (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Base\+Station\+Net\+Device} $>$}]{bs}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a78b27370d8624a84be9d1bb037b80036}{}\label{classns3_1_1BSSchedulerRtps_a78b27370d8624a84be9d1bb037b80036}
Constructor


\begin{DoxyParams}{Parameters}
{\em bs} & base station device \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
64   : \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts} (\textcolor{keyword}{new} \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std::list}<std::pair<OfdmDlMapIe*, Ptr<PacketBurst> > > (
      ))
65 \{
66   \textcolor{comment}{// m\_downlinkBursts is filled by AddDownlinkBurst and emptied by}
67   \textcolor{comment}{// wimax-bs-net-device::sendBurst and wimax-ss-net-device::sendBurst}
68   \hyperlink{classns3_1_1BSScheduler_a64cd43d547d218965cfe03892bdda4f0}{SetBs} (bs);
69 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!````~B\+S\+Scheduler\+Rtps@{$\sim$\+B\+S\+Scheduler\+Rtps}}
\index{````~B\+S\+Scheduler\+Rtps@{$\sim$\+B\+S\+Scheduler\+Rtps}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{$\sim$\+B\+S\+Scheduler\+Rtps(void)}{~BSSchedulerRtps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+B\+S\+Scheduler\+Rtps\+::$\sim$\+B\+S\+Scheduler\+Rtps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a948fd5099730f9b677ebd4fd0642927c}{}\label{classns3_1_1BSSchedulerRtps_a948fd5099730f9b677ebd4fd0642927c}

\begin{DoxyCode}
72 \{
73 
74   std::list<std::pair<OfdmDlMapIe*, Ptr<PacketBurst> > > *downlinkBursts = 
      \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts};
75   std::pair<OfdmDlMapIe*, Ptr<PacketBurst> > pair;
76   \textcolor{keywordflow}{while} (downlinkBursts->size ())
77     \{
78       pair = downlinkBursts->front ();
79       pair.second = 0;
80       \textcolor{keyword}{delete} pair.first;
81     \}
82 
83   \hyperlink{classns3_1_1BSScheduler_a64cd43d547d218965cfe03892bdda4f0}{SetBs} (0);
84   \textcolor{keyword}{delete} \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts};
85   \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts} = 0;
86 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




\subsection{Member Function Documentation}
\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Add\+Downlink\+Burst@{Add\+Downlink\+Burst}}
\index{Add\+Downlink\+Burst@{Add\+Downlink\+Burst}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Add\+Downlink\+Burst(\+Ptr$<$ const Wimax\+Connection $>$ connection, uint8\+\_\+t diuc, Wimax\+Phy\+::\+Modulation\+Type modulation\+Type, Ptr$<$ Packet\+Burst $>$ burst)}{AddDownlinkBurst(Ptr< const WimaxConnection > connection, uint8_t diuc, WimaxPhy::ModulationType modulationType, Ptr< PacketBurst > burst)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Add\+Downlink\+Burst (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Wimax\+Connection} $>$}]{connection, }
\item[{uint8\+\_\+t}]{diuc, }
\item[{{\bf Wimax\+Phy\+::\+Modulation\+Type}}]{modulation\+Type, }
\item[{{\bf Ptr}$<$ {\bf Packet\+Burst} $>$}]{burst}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{}\label{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}


This function adds a downlink burst to the list of downlink bursts scheduled for the next downlink sub-\/frame. 


\begin{DoxyParams}{Parameters}
{\em connection} & a pointer to connection in wich the burst will be sent \\
\hline
{\em diuc} & downlink iuc \\
\hline
{\em modulation\+Type} & the modulation type of the burst \\
\hline
{\em burst} & the downlink burst to add to the downlink sub frame \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1BSScheduler_aa36179c8d9bcfcbd4de08bdccb6e904d}{ns3\+::\+B\+S\+Scheduler}.


\begin{DoxyCode}
99 \{
100   OfdmDlMapIe *dlMapIe = \textcolor{keyword}{new} OfdmDlMapIe ();
101   dlMapIe->SetCid (connection->GetCid ());
102   dlMapIe->SetDiuc (diuc);
103 
104   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"BS scheduler, burst size: "} << burst->GetSize () << \textcolor{stringliteral}{" bytes"} << \textcolor{stringliteral}{", pkts: "} << 
      burst->GetNPackets ()
105                                             << \textcolor{stringliteral}{", connection: "} << connection->GetTypeStr () << \textcolor{stringliteral}{", CID: "}
106                                             << connection->GetCid ());
107   \textcolor{keywordflow}{if} (connection->GetType () == \hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa46fbed56841c3bf471aa84de022edf87}{Cid::TRANSPORT})
108     \{
109       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{", SFID: "} << connection->GetServiceFlow ()->GetSfid () << \textcolor{stringliteral}{", service: "}
110                               << connection->GetServiceFlow ()->GetSchedulingTypeStr ());
111     \}
112   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{", modulation: "} << modulationType << \textcolor{stringliteral}{", DIUC: "} << (uint32\_t) diuc);
113 
114   \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts}->push\_back (std::make\_pair (dlMapIe, burst));
115 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+Basic\+Connection@{B\+S\+Scheduler\+Basic\+Connection}}
\index{B\+S\+Scheduler\+Basic\+Connection@{B\+S\+Scheduler\+Basic\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+Basic\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerBasicConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+Basic\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a9245c54c83bcde5e7178dacbbfc745c6}{}\label{classns3_1_1BSSchedulerRtps_a9245c54c83bcde5e7178dacbbfc745c6}


schedules the basic connections 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & the remaining free O\+F\+DM symbols in the current subframe \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
312 \{
313   Ptr<WimaxConnection> connection;
314   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType = 
      \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755faaef0b78541d9b66d4e85780131e665028}{WimaxPhy::MODULATION\_TYPE\_BPSK\_12};
315   uint8\_t diuc = \hyperlink{classns3_1_1OfdmDlBurstProfile_a4769c73985bf918ecd21180081471a00a7551a9c00acee92830f4d780803de0c0}{OfdmDlBurstProfile::DIUC\_BURST\_PROFILE\_1};
316   uint32\_t nrSymbolsRequired = 0;
317   GenericMacHeader hdr;
318   Ptr<Packet> packet;
319   Ptr<PacketBurst> burst = Create<PacketBurst> ();
320 
321   std::vector<Ptr<WimaxConnection> >::const\_iterator iter;
322   std::vector<Ptr<WimaxConnection> > connections;
323 
324   connections = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetConnectionManager ()->GetConnections (
      \hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa68b82b5b38abe3f2b40e5e3d950ac746}{Cid::BASIC});
325   \textcolor{keywordflow}{for} (iter = connections.begin (); iter != connections.end (); ++iter)
326     \{
327       \textcolor{keywordflow}{while} ((*iter)->HasPackets () && availableSymbols > 0)
328         \{
329           connection = *iter;
330 
331           modulationType = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetSSManager ()->GetSSRecord (connection->GetCid ())->
      GetModulationType ();
332           diuc = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBurstProfileManager ()->GetBurstProfile (modulationType,
333                                                                        
      \hyperlink{classns3_1_1WimaxNetDevice_a194b6cf7eb59582328eb2531dc9ed884a5873dae7c36e21d904ae2d6922835e89}{WimaxNetDevice::DIRECTION\_DOWNLINK});
334 
335           packet = connection->GetQueue ()->Peek (hdr);
336           nrSymbolsRequired = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (packet->GetSize (), modulationType);
337 
338           \textcolor{comment}{// PIRO: check for fragmentation}
339           \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
340               && !\hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, modulationType)
      )
341             \{
342               \textcolor{keywordflow}{break};
343             \}
344           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
345                    && \hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, 
      modulationType))
346             \{
347               uint32\_t availableByte = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->
348                 GetNrBytes (availableSymbols, modulationType);
349               packet = connection->Dequeue (\hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC}
      , availableByte);
350             \}
351           \textcolor{keywordflow}{else}
352             \{
353               packet = connection->Dequeue ();
354             \}
355 
356           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (hdr.GetCid () == connection->GetCid (),
357                          \textcolor{stringliteral}{"Base station: Error while scheduling basic connection: header CID != connection
       CID"});
358           burst->AddPacket (packet);
359           availableSymbols -= nrSymbolsRequired;
360         \}
361       \textcolor{keywordflow}{if} (burst->GetNPackets () != 0)
362         \{
363           \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (connection, diuc, modulationType, burst);
364           burst = Create<PacketBurst> ();
365         \}
366     \}
367 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+B\+E\+Connection@{B\+S\+Scheduler\+B\+E\+Connection}}
\index{B\+S\+Scheduler\+B\+E\+Connection@{B\+S\+Scheduler\+B\+E\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+B\+E\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerBEConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+B\+E\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a74fd827556c1b6f8b58ecdb2720a36d5}{}\label{classns3_1_1BSSchedulerRtps_a74fd827556c1b6f8b58ecdb2720a36d5}


schedules the BE connection 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & the remaining free O\+F\+DM symbols in the current subframe \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
678 \{
679   Ptr<WimaxConnection> connection;
680   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType = 
      \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755faaef0b78541d9b66d4e85780131e665028}{WimaxPhy::MODULATION\_TYPE\_BPSK\_12};
681   uint8\_t diuc = 0;
682   uint32\_t nrSymbolsRequired = 0;
683   GenericMacHeader hdr;
684   Ptr<Packet> packet;
685   Ptr<PacketBurst> burst = Create<PacketBurst> ();
686 
687   std::vector<ServiceFlow*>::iterator iter;
688   std::vector<ServiceFlow*> serviceFlows;
689 
690   serviceFlows = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetServiceFlowManager ()->GetServiceFlows (
      \hyperlink{classns3_1_1ServiceFlow_a7990ba10be1e098328fd1e6382a26235af93a8bd8fce654e688f957f6f362e5c7}{ServiceFlow::SF\_TYPE\_BE});
691   \textcolor{keywordflow}{for} (iter = serviceFlows.begin (); iter != serviceFlows.end (); ++iter)
692     \{
693       connection = (*iter)->GetConnection ();
694 
695       \textcolor{keywordflow}{while} ((*iter)->HasPackets () && availableSymbols > 0)
696         \{
697           \textcolor{keywordflow}{if} (connection->GetType () == \hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa4d3bf31623ed09b9755d86bdfa345a4a}{Cid::MULTICAST})
698             \{
699               modulationType = connection->GetServiceFlow ()->GetModulation ();
700             \}
701           \textcolor{keywordflow}{else}
702             \{
703               modulationType = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetSSManager ()->GetSSRecord (connection->GetCid ())->
      GetModulationType ();
704             \}
705           diuc = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBurstProfileManager ()->GetBurstProfile (modulationType,
706                                                                        
      \hyperlink{classns3_1_1WimaxNetDevice_a194b6cf7eb59582328eb2531dc9ed884a5873dae7c36e21d904ae2d6922835e89}{WimaxNetDevice::DIRECTION\_DOWNLINK});
707 
708           packet = connection->GetQueue ()->Peek (hdr);
709           nrSymbolsRequired = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (packet->GetSize (), modulationType);
710 
711           \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired)
712             \{
713               \textcolor{keywordflow}{break};
714             \}
715 
716           packet = connection->Dequeue ();
717           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (hdr.GetCid () == connection->GetCid (),
718                          \textcolor{stringliteral}{"Base station: Error while scheduling BE connection: header CID != connection CID"}
      );
719           burst->AddPacket (packet);
720           availableSymbols -= nrSymbolsRequired;
721         \}
722       \textcolor{keywordflow}{if} (burst->GetNPackets () != 0)
723         \{
724           \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (connection, diuc, modulationType, burst);
725           burst = Create<PacketBurst> ();
726         \}
727     \}
728 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+Broadcast\+Connection@{B\+S\+Scheduler\+Broadcast\+Connection}}
\index{B\+S\+Scheduler\+Broadcast\+Connection@{B\+S\+Scheduler\+Broadcast\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+Broadcast\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerBroadcastConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+Broadcast\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_ad041a6417c9cf0ddc40116ac877015ab}{}\label{classns3_1_1BSSchedulerRtps_ad041a6417c9cf0ddc40116ac877015ab}


schedules the broadcast connections 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & the remaining free O\+F\+DM symbols in the current subframe \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
217 \{
218   Ptr<WimaxConnection> connection;
219   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType = 
      \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755faaef0b78541d9b66d4e85780131e665028}{WimaxPhy::MODULATION\_TYPE\_BPSK\_12};
220   uint8\_t diuc = \hyperlink{classns3_1_1OfdmDlBurstProfile_a4769c73985bf918ecd21180081471a00a7551a9c00acee92830f4d780803de0c0}{OfdmDlBurstProfile::DIUC\_BURST\_PROFILE\_1};
221   uint32\_t nrSymbolsRequired = 0;
222   GenericMacHeader hdr;
223   Ptr<Packet> packet;
224   Ptr<PacketBurst> burst = Create<PacketBurst> ();
225 
226   \textcolor{keywordflow}{while} (\hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBroadcastConnection ()->HasPackets () && availableSymbols > 0)
227     \{
228       connection = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBroadcastConnection ();
229 
230       packet = connection->GetQueue ()->Peek (hdr);
231       nrSymbolsRequired = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (packet->GetSize (), modulationType);
232 
233       \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
234           && !\hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, modulationType))
235         \{
236           \textcolor{keywordflow}{break};
237         \}
238       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
239                && \hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, modulationType)
      )
240         \{
241           uint32\_t availableByte = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->
242             GetNrBytes (availableSymbols, modulationType);
243           packet = connection->Dequeue (\hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC}
      ,
244                                         availableByte);
245         \}
246       \textcolor{keywordflow}{else}
247         \{
248           packet = connection->Dequeue ();
249         \}
250 
251       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (hdr.GetCid ().GetIdentifier () == connection->GetCid (),
252                      \textcolor{stringliteral}{"Base station: Error while scheduling broadcast connection: header CID != connection
       CID"});
253       burst->AddPacket (packet);
254       availableSymbols -= nrSymbolsRequired;
255     \}
256   \textcolor{keywordflow}{if} (burst->GetNPackets () != 0)
257     \{
258       \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (connection, diuc, modulationType, burst);
259     \}
260 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+Initial\+Ranging\+Connection@{B\+S\+Scheduler\+Initial\+Ranging\+Connection}}
\index{B\+S\+Scheduler\+Initial\+Ranging\+Connection@{B\+S\+Scheduler\+Initial\+Ranging\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+Initial\+Ranging\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerInitialRangingConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+Initial\+Ranging\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_aa679d00c7063da179a3d2401e4a37f8e}{}\label{classns3_1_1BSSchedulerRtps_aa679d00c7063da179a3d2401e4a37f8e}


schedules the IR connections 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & the remaining free O\+F\+DM symbols in the current subframe \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
264 \{
265   Ptr<WimaxConnection> connection;
266   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType = 
      \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755faaef0b78541d9b66d4e85780131e665028}{WimaxPhy::MODULATION\_TYPE\_BPSK\_12};
267   uint8\_t diuc = \hyperlink{classns3_1_1OfdmDlBurstProfile_a4769c73985bf918ecd21180081471a00a7551a9c00acee92830f4d780803de0c0}{OfdmDlBurstProfile::DIUC\_BURST\_PROFILE\_1};
268   uint32\_t nrSymbolsRequired = 0;
269   GenericMacHeader hdr;
270   Ptr<Packet> packet;
271   Ptr<PacketBurst> burst = Create<PacketBurst> ();
272 
273   \textcolor{keywordflow}{while} (\hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetInitialRangingConnection ()->HasPackets () && availableSymbols > 0)
274     \{
275       connection = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetInitialRangingConnection ();
276 
277       packet = connection->GetQueue ()->Peek (hdr);
278       nrSymbolsRequired = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (packet->GetSize (), modulationType);
279 
280       \textcolor{comment}{// PIRO: check for fragmentation}
281       \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
282           && !\hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, modulationType))
283         \{
284           \textcolor{keywordflow}{break};
285         \}
286       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
287                && \hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, modulationType)
      )
288         \{
289           uint32\_t availableByte = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->
290             GetNrBytes (availableSymbols, modulationType);
291           packet = connection->Dequeue (\hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC}
      ,
292                                         availableByte);
293         \}
294       \textcolor{keywordflow}{else}
295         \{
296           packet = connection->Dequeue ();
297         \}
298 
299       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (hdr.GetCid () == connection->GetCid (),
300                      \textcolor{stringliteral}{"Base station: Error while scheduling initial ranging connection: header CID !=
       connection CID"});
301       burst->AddPacket (packet);
302       availableSymbols -= nrSymbolsRequired;
303     \}
304   \textcolor{keywordflow}{if} (burst->GetNPackets ())
305     \{
306       \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (connection, diuc, modulationType, burst);
307     \}
308 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+N\+R\+T\+P\+S\+Connection@{B\+S\+Scheduler\+N\+R\+T\+P\+S\+Connection}}
\index{B\+S\+Scheduler\+N\+R\+T\+P\+S\+Connection@{B\+S\+Scheduler\+N\+R\+T\+P\+S\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+N\+R\+T\+P\+S\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerNRTPSConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+N\+R\+T\+P\+S\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_ae148375221d20545e3f54ac024c933c4}{}\label{classns3_1_1BSSchedulerRtps_ae148375221d20545e3f54ac024c933c4}


schedules the N\+R\+T\+PS connections 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & the remaining free O\+F\+DM symbols in the current subframe \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
623 \{
624   Ptr<WimaxConnection> connection;
625   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType = 
      \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755faaef0b78541d9b66d4e85780131e665028}{WimaxPhy::MODULATION\_TYPE\_BPSK\_12};
626   uint8\_t diuc = 0;
627   uint32\_t nrSymbolsRequired = 0;
628   GenericMacHeader hdr;
629   Ptr<Packet> packet;
630   Ptr<PacketBurst> burst = Create<PacketBurst> ();
631 
632   std::vector<ServiceFlow*>::iterator iter;
633   std::vector<ServiceFlow*> serviceFlows;
634 
635   serviceFlows = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetServiceFlowManager ()->GetServiceFlows (
      \hyperlink{classns3_1_1ServiceFlow_a7990ba10be1e098328fd1e6382a26235a7f8577f851a9f01d159442a3a3fcdf48}{ServiceFlow::SF\_TYPE\_NRTPS});
636   \textcolor{keywordflow}{for} (iter = serviceFlows.begin (); iter != serviceFlows.end (); ++iter)
637     \{
638       connection = (*iter)->GetConnection ();
639 
640       \textcolor{keywordflow}{while} ((*iter)->HasPackets () && availableSymbols > 0)
641         \{
642           \textcolor{keywordflow}{if} (connection->GetType () == \hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa4d3bf31623ed09b9755d86bdfa345a4a}{Cid::MULTICAST})
643             \{
644               modulationType = connection->GetServiceFlow ()->GetModulation ();
645             \}
646           \textcolor{keywordflow}{else}
647             \{
648               modulationType = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetSSManager ()->GetSSRecord (connection->GetCid ())->
      GetModulationType ();
649             \}
650 
651           diuc = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBurstProfileManager ()->GetBurstProfile (modulationType,
652                                                                        
      \hyperlink{classns3_1_1WimaxNetDevice_a194b6cf7eb59582328eb2531dc9ed884a5873dae7c36e21d904ae2d6922835e89}{WimaxNetDevice::DIRECTION\_DOWNLINK});
653 
654           packet = connection->GetQueue ()->Peek (hdr);
655           nrSymbolsRequired = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (packet->GetSize (), modulationType);
656 
657           \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired)
658             \{
659               \textcolor{keywordflow}{break};
660             \}
661 
662           packet = connection->Dequeue ();
663           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (hdr.GetCid () == connection->GetCid (),
664                          \textcolor{stringliteral}{"Base station: Error while scheduling NRTPs connection: header CID != connection
       CID"});
665           burst->AddPacket (packet);
666           availableSymbols -= nrSymbolsRequired;
667         \}
668       \textcolor{keywordflow}{if} (burst->GetNPackets () != 0)
669         \{
670           \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (connection, diuc, modulationType, burst);
671           burst = Create<PacketBurst> ();
672         \}
673     \}
674 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15




Here is the caller graph for this function\+:
% FIG 16


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+Primary\+Connection@{B\+S\+Scheduler\+Primary\+Connection}}
\index{B\+S\+Scheduler\+Primary\+Connection@{B\+S\+Scheduler\+Primary\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+Primary\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerPrimaryConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+Primary\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a2bd7697f2451b3fa6865c858e7c2556f}{}\label{classns3_1_1BSSchedulerRtps_a2bd7697f2451b3fa6865c858e7c2556f}


schedules the primary connection 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & the remaining free O\+F\+DM symbols in the current subframe \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
371 \{
372   Ptr<WimaxConnection> connection;
373   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType = 
      \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755faaef0b78541d9b66d4e85780131e665028}{WimaxPhy::MODULATION\_TYPE\_BPSK\_12};
374   uint8\_t diuc = 0;
375   uint32\_t nrSymbolsRequired = 0;
376   GenericMacHeader hdr;
377   Ptr<Packet> packet;
378   Ptr<PacketBurst> burst = Create<PacketBurst> ();
379 
380   std::vector<Ptr<WimaxConnection> >::const\_iterator iter;
381   std::vector<Ptr<WimaxConnection> > connections;
382 
383   connections = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetConnectionManager ()->GetConnections (
      \hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa0ffb28b79686aa37c614c868e330418b}{Cid::PRIMARY});
384   \textcolor{keywordflow}{for} (iter = connections.begin (); iter != connections.end (); ++iter)
385     \{
386       \textcolor{keywordflow}{while} ((*iter)->HasPackets () && availableSymbols > 0)
387         \{
388           connection = *iter;
389 
390           modulationType = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetSSManager ()->GetSSRecord (connection->GetCid ())->
      GetModulationType ();
391           diuc = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBurstProfileManager ()->GetBurstProfile (modulationType,
392                                                                        
      \hyperlink{classns3_1_1WimaxNetDevice_a194b6cf7eb59582328eb2531dc9ed884a5873dae7c36e21d904ae2d6922835e89}{WimaxNetDevice::DIRECTION\_DOWNLINK});
393 
394           packet = connection->GetQueue ()->Peek (hdr);
395           nrSymbolsRequired = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (packet->GetSize (), modulationType);
396 
397           \textcolor{comment}{// PIRO: check for fragmentation}
398           \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
399               && !\hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, modulationType)
      )
400             \{
401               \textcolor{keywordflow}{break};
402             \}
403           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired
404                    && \hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection, availableSymbols, 
      modulationType))
405             \{
406               uint32\_t availableByte = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->
407                 GetNrBytes (availableSymbols, modulationType);
408               packet = connection->Dequeue (\hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC}
      , availableByte);
409             \}
410           \textcolor{keywordflow}{else}
411             \{
412               packet = connection->Dequeue ();
413             \}
414 
415           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (hdr.GetCid () == connection->GetCid (),
416                          \textcolor{stringliteral}{"Base station: Error while scheduling primary connection: header CID != connection
       CID"});
417           burst->AddPacket (packet);
418           availableSymbols -= nrSymbolsRequired;
419         \}
420       \textcolor{keywordflow}{if} (burst->GetNPackets () != 0)
421         \{
422           \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (connection, diuc, modulationType, burst);
423         \}
424     \}
425 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17




Here is the caller graph for this function\+:
% FIG 18


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+R\+T\+P\+S\+Connection@{B\+S\+Scheduler\+R\+T\+P\+S\+Connection}}
\index{B\+S\+Scheduler\+R\+T\+P\+S\+Connection@{B\+S\+Scheduler\+R\+T\+P\+S\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+R\+T\+P\+S\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerRTPSConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+R\+T\+P\+S\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_acb75718835482da98c9b7eafc756dc4c}{}\label{classns3_1_1BSSchedulerRtps_acb75718835482da98c9b7eafc756dc4c}


Downlink \hyperlink{classns3_1_1Scheduler}{Scheduler} for rt\+PS connections. 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & available symbols for rt\+PS flows\\
\hline
\end{DoxyParams}
This method represent the DL \hyperlink{classns3_1_1Scheduler}{Scheduler} for rt\+PS connections. The scheduler is designed to serve all rt\+PS connections that have at least one packet to transmit, every DL Subframe. To each rt\+PS connections are allocated, at the beginning, the bandwidth to transmit a quota of data equal to the queue length. If the sum of all pre-\/allocated bandwidth exceed the available symbols for rt\+PS connections, the \hyperlink{classns3_1_1Channel}{Channel} Saturation Control function is called to redistribute the available bandwidth. 
\begin{DoxyCode}
486 \{
487 
488   Ptr<WimaxConnection> connection;
489   GenericMacHeader hdr;
490   Ptr<Packet> packet;
491   Ptr<PacketBurst> burst = Create<PacketBurst> ();
492 
493   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} currentTime = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
494 
495   std::vector<Ptr<WimaxConnection> >::const\_iterator iter;
496   std::vector<Ptr<WimaxConnection> > connections;
497   std::vector<ServiceFlow*>::iterator iter2;
498   ServiceFlowRecord *serviceFlowRecord;
499   std::vector<ServiceFlow*> serviceFlows;
500 
501   uint32\_t symbolsRequired[100];
502   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType\_[100];
503   uint8\_t diuc\_[100];
504   Ptr<WimaxConnection> rtPSConnection[100];
505   uint32\_t dataToSend;
506   uint32\_t totSymbolsRequired = 0;
507   \textcolor{keywordtype}{int} nbConnection = 0;
508 
509   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tDL Scheduler for rtPS flows \(\backslash\)n"} << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tavailableSymbols = "} << 
      availableSymbols);
510 
511   serviceFlows = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetServiceFlowManager ()->GetServiceFlows (
      \hyperlink{classns3_1_1ServiceFlow_a7990ba10be1e098328fd1e6382a26235a0e98ff713b932a029acad7e5b24bbf55}{ServiceFlow::SF\_TYPE\_RTPS});
512   nbConnection = 0;
513   \textcolor{keywordflow}{for} (iter2 = serviceFlows.begin (); iter2 != serviceFlows.end (); ++iter2)
514     \{
515       \textcolor{comment}{// DL RTPS Scheduler works for all rtPS connection that have packets to transmitt!!!}
516       serviceFlowRecord = (*iter2)->GetRecord ();
517 
518       \textcolor{keywordflow}{if} ((*iter2)->HasPackets ())
519         \{
520           currentTime = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
521           serviceFlowRecord->SetDlTimeStamp (currentTime);
522           rtPSConnection[nbConnection] = (*iter2)->GetConnection ();
523           \textcolor{keywordflow}{if} (rtPSConnection[nbConnection]->GetType () == \hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa4d3bf31623ed09b9755d86bdfa345a4a}{Cid::MULTICAST})
524             \{
525               modulationType\_[nbConnection] = rtPSConnection[nbConnection]->GetServiceFlow ()->
      GetModulation ();
526             \}
527           \textcolor{keywordflow}{else}
528             \{
529               modulationType\_[nbConnection]
530                 = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetSSManager ()->GetSSRecord (rtPSConnection[nbConnection]->GetCid ())->
      GetModulationType ();
531             \}
532           diuc\_[nbConnection]
533             = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBurstProfileManager ()->GetBurstProfile (modulationType\_[nbConnection],
534                                                                     
      \hyperlink{classns3_1_1WimaxNetDevice_a194b6cf7eb59582328eb2531dc9ed884a5873dae7c36e21d904ae2d6922835e89}{WimaxNetDevice::DIRECTION\_DOWNLINK});
535 
536           dataToSend = rtPSConnection[nbConnection]->GetQueue ()->GetQueueLengthWithMACOverhead ();
537           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tRTPS DL Scheduler for CID = "} << rtPSConnection[nbConnection]->
      GetCid ()
538                                                           << \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t\(\backslash\)t\(\backslash\)t dataToSend = "} << dataToSend);
539 
540           symbolsRequired[nbConnection] = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (dataToSend,
541                                                                              modulationType\_[nbConnection])
      ;
542 
543           totSymbolsRequired += symbolsRequired[nbConnection];
544           nbConnection++;
545         \}
546     \}
547 
548   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)ttotSymbolsRequired = "} << totSymbolsRequired);
549 
550   \textcolor{comment}{// Channel Saturation}
551   \textcolor{keywordflow}{while} (totSymbolsRequired > availableSymbols)
552     \{
553       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tDL Channel Saturation: totSymbolsRequired > availableSymbols\_rtPS"});
554       \textcolor{keywordtype}{double} delta = double(availableSymbols) / double(totSymbolsRequired);
555       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tdelta = "} << delta);
556       totSymbolsRequired = 0;
557       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nbConnection; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
558         \{
559           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tprevious symbolsRequired["} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{"] = "} << symbolsRequired[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]);
560           symbolsRequired[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}] = (uint32\_t) std::floor (symbolsRequired[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}] * delta);
561           totSymbolsRequired += symbolsRequired[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
562           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tnew symbolsRequired["} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{"] = "} << symbolsRequired[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]);
563         \}
564       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)ttotSymbolsRequired = "} << totSymbolsRequired);
565     \}
566 
567   \textcolor{comment}{// Downlink Bandwidth Allocation}
568   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nbConnection; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
569     \{
570 
571       packet = rtPSConnection[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]->GetQueue ()->Peek (hdr);
572       uint32\_t symbolsForPacketTransmission = 0;
573       burst = Create<PacketBurst> ();
574       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tCID = "} << rtPSConnection[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]->GetCid () << \textcolor{stringliteral}{" assignedSymbols = "} << 
      symbolsRequired[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]);
575 
576       \textcolor{keywordflow}{while} (symbolsRequired[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}] > 0)
577         \{
578           symbolsForPacketTransmission = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()
579             ->GetNrSymbols (rtPSConnection[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]->GetQueue ()
580                             ->GetFirstPacketRequiredByte (
      \hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC}),
581                             modulationType\_[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]);
582 
583           \textcolor{comment}{// PIRO: check for fragmentation}
584           \textcolor{keywordflow}{if} (symbolsForPacketTransmission > symbolsRequired[i]
585               && !\hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (rtPSConnection[i],
586                                          symbolsRequired[i],
587                                          modulationType\_[i]))
588             \{
589               \textcolor{keywordflow}{break};
590             \}
591           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (symbolsForPacketTransmission > symbolsRequired[i]
592                    && \hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (rtPSConnection[i],
593                                              symbolsRequired[i],
594                                              modulationType\_[i]))
595             \{
596               uint32\_t availableByte = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->
597                 GetNrBytes (symbolsRequired[i], modulationType\_[i]);
598               packet = rtPSConnection[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]->Dequeue (
      \hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC}, availableByte);
599               symbolsRequired[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}] = 0;
600             \}
601           \textcolor{keywordflow}{else}
602             \{
603               packet = rtPSConnection[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]->Dequeue ();
604               symbolsRequired[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}] -= symbolsForPacketTransmission;
605             \}
606 
607           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (hdr.GetCid () == rtPSConnection[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]->GetCid (),
608                          \textcolor{stringliteral}{"Base station: Error while scheduling RTPs connection: header CID != connection
       CID"});
609           burst->AddPacket (packet);
610         \}
611 
612       \textcolor{keywordflow}{if} (burst->GetNPackets () != 0)
613         \{
614           \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (rtPSConnection[i], diuc\_[i], modulationType\_[i], burst);
615         \}
616     \}
617 
618   availableSymbols -= totSymbolsRequired;
619 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19




Here is the caller graph for this function\+:
% FIG 20


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!B\+S\+Scheduler\+U\+G\+S\+Connection@{B\+S\+Scheduler\+U\+G\+S\+Connection}}
\index{B\+S\+Scheduler\+U\+G\+S\+Connection@{B\+S\+Scheduler\+U\+G\+S\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{B\+S\+Scheduler\+U\+G\+S\+Connection(uint32\+\_\+t \&available\+Symbols)}{BSSchedulerUGSConnection(uint32_t &availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+B\+S\+Scheduler\+U\+G\+S\+Connection (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t \&}]{available\+Symbols}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a71243a521e00bd88f39b681a0f14ed91}{}\label{classns3_1_1BSSchedulerRtps_a71243a521e00bd88f39b681a0f14ed91}


schedules the U\+GS connection 


\begin{DoxyParams}{Parameters}
{\em available\+Symbols} & the remaining free O\+F\+DM symbols in the current subframe \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
429 \{
430   Ptr<WimaxConnection> connection;
431   \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755fa}{WimaxPhy::ModulationType} modulationType = 
      \hyperlink{classns3_1_1WimaxPhy_a044c5d8a48ca992c39c2a946f6e755faaef0b78541d9b66d4e85780131e665028}{WimaxPhy::MODULATION\_TYPE\_BPSK\_12};
432   uint8\_t diuc;
433   uint32\_t nrSymbolsRequired = 0;
434   GenericMacHeader hdr;
435   Ptr<Packet> packet;
436   Ptr<PacketBurst> burst = Create<PacketBurst> ();
437 
438   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} currentTime = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
439 
440   std::vector<ServiceFlow*>::iterator iter;
441   ServiceFlowRecord *serviceFlowRecord;
442   std::vector<ServiceFlow*> serviceFlows;
443 
444   serviceFlows = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetServiceFlowManager ()->GetServiceFlows (
      \hyperlink{classns3_1_1ServiceFlow_a7990ba10be1e098328fd1e6382a26235a969e0b62fa12fef1dbb23913744ed594}{ServiceFlow::SF\_TYPE\_UGS});
445   \textcolor{keywordflow}{for} (iter = serviceFlows.begin (); iter != serviceFlows.end (); ++iter)
446     \{
447       serviceFlowRecord = (*iter)->GetRecord ();
448       \textcolor{comment}{// if latency would exceed in case grant is allocated in next frame then allocate in current frame}
449       \textcolor{keywordflow}{if} ((*iter)->HasPackets () && ((currentTime - serviceFlowRecord->GetDlTimeStamp ())
450                                      + \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetFrameDuration ()) > 
      \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} ((*iter)->GetMaximumLatency ()))
451         \{
452           connection = (*iter)->GetConnection ();
453           \textcolor{keywordflow}{if} (connection->GetType () == \hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa4d3bf31623ed09b9755d86bdfa345a4a}{Cid::MULTICAST})
454             \{
455               modulationType = connection->GetServiceFlow ()->GetModulation ();
456             \}
457           \textcolor{keywordflow}{else}
458             \{
459               modulationType = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetSSManager ()->GetSSRecord (connection->GetCid ())->
      GetModulationType ();
460             \}
461           diuc = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBurstProfileManager ()->GetBurstProfile (modulationType,
462                                                                        
      \hyperlink{classns3_1_1WimaxNetDevice_a194b6cf7eb59582328eb2531dc9ed884a5873dae7c36e21d904ae2d6922835e89}{WimaxNetDevice::DIRECTION\_DOWNLINK});
463 
464           nrSymbolsRequired = connection->GetServiceFlow ()->GetRecord ()->GetGrantSize ();
465 
466           \textcolor{comment}{// Packet fragmentation for UGS connections has not been implemented yet!}
467           \textcolor{keywordflow}{if} (availableSymbols > nrSymbolsRequired)
468             \{
469               availableSymbols -= nrSymbolsRequired;
470               burst = \hyperlink{classns3_1_1BSSchedulerRtps_a638694f9cafedabeaf7027951a66cc04}{CreateUgsBurst} (connection->GetServiceFlow (), modulationType, 
      nrSymbolsRequired);
471               \textcolor{keywordflow}{if} (burst->GetNPackets () != 0)
472                 \{
473                   \hyperlink{classns3_1_1BSSchedulerRtps_ab58c3772737a8fcd20ec05680253b087}{AddDownlinkBurst} (connection, diuc, modulationType, burst);
474                   currentTime = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
475                   serviceFlowRecord->SetDlTimeStamp (currentTime);
476                   burst = Create<PacketBurst> ();
477                 \}
478             \}
479         \}
480     \}
481 
482 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21




Here is the caller graph for this function\+:
% FIG 22


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Create\+Ugs\+Burst@{Create\+Ugs\+Burst}}
\index{Create\+Ugs\+Burst@{Create\+Ugs\+Burst}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Create\+Ugs\+Burst(\+Service\+Flow $\ast$service\+Flow, Wimax\+Phy\+::\+Modulation\+Type modulation\+Type, uint32\+\_\+t available\+Symbols)}{CreateUgsBurst(ServiceFlow *serviceFlow, WimaxPhy::ModulationType modulationType, uint32_t availableSymbols)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Packet\+Burst} $>$ ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Create\+Ugs\+Burst (
\begin{DoxyParamCaption}
\item[{{\bf Service\+Flow} $\ast$}]{service\+Flow, }
\item[{{\bf Wimax\+Phy\+::\+Modulation\+Type}}]{modulation\+Type, }
\item[{uint32\+\_\+t}]{available\+Symbols}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1BSSchedulerRtps_a638694f9cafedabeaf7027951a66cc04}{}\label{classns3_1_1BSSchedulerRtps_a638694f9cafedabeaf7027951a66cc04}


Creates a downlink U\+GS burst. 


\begin{DoxyParams}{Parameters}
{\em service\+Flow} & the service flow of the burst \\
\hline
{\em modulation\+Type} & the modulation type to be used for the burst \\
\hline
{\em available\+Symbols} & maximum number of O\+F\+DM symbols to be used by the burst \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a Burst (list of packets) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1BSScheduler_acc1ddc62e1c09c2800eb933462efe5b2}{ns3\+::\+B\+S\+Scheduler}.


\begin{DoxyCode}
173 \{
174   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} timeStamp;
175   GenericMacHeader hdr;
176   Ptr<Packet> packet;
177   Ptr<PacketBurst> burst = Create<PacketBurst> ();
178   uint32\_t nrSymbolsRequired = 0;
179 
180   \textcolor{comment}{// serviceFlow->CleanUpQueue ();}
181   Ptr<WimaxConnection> connection = serviceFlow->GetConnection ();
182   \textcolor{keywordflow}{while} (serviceFlow->HasPackets ())
183     \{
184       uint32\_t FirstPacketSize = connection->GetQueue ()->GetFirstPacketRequiredByte (
      \hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC});
185       nrSymbolsRequired = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrSymbols (FirstPacketSize,modulationType);
186       \textcolor{keywordflow}{if} (availableSymbols < nrSymbolsRequired && \hyperlink{classns3_1_1BSScheduler_aedd94450afdda0371fae56e05624bfaf}{CheckForFragmentation} (connection,
187                                                                          availableSymbols,
188                                                                          modulationType))
189         \{
190           uint32\_t availableByte = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetPhy ()->GetNrBytes (availableSymbols, modulationType);
191           packet = connection->Dequeue (\hyperlink{classns3_1_1MacHeaderType_a54d8fc8bc93a2b7865627965cdd31c20a48fe5b2f20cadf78008c71469b518403}{MacHeaderType::HEADER\_TYPE\_GENERIC}
      , availableByte);
192           availableSymbols = 0;
193         \}
194       \textcolor{keywordflow}{else}
195         \{
196           packet = connection->Dequeue ();
197           availableSymbols -= nrSymbolsRequired;
198         \}
199       burst->AddPacket (packet);
200       \textcolor{keywordflow}{if} (availableSymbols <= 0)
201         \{
202           \textcolor{keywordflow}{break};
203         \}
204     \}
205   \textcolor{keywordflow}{return} burst;
206 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23




Here is the caller graph for this function\+:
% FIG 24


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Get\+Downlink\+Bursts@{Get\+Downlink\+Bursts}}
\index{Get\+Downlink\+Bursts@{Get\+Downlink\+Bursts}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Get\+Downlink\+Bursts(void) const }{GetDownlinkBursts(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std\+::list}$<$ std\+::pair$<$ {\bf Ofdm\+Dl\+Map\+Ie} $\ast$, {\bf Ptr}$<$ {\bf Packet\+Burst} $>$ $>$ $>$ $\ast$ ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Get\+Downlink\+Bursts (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1BSSchedulerRtps_a9c228dcf18263a21911a05d2fb147db0}{}\label{classns3_1_1BSSchedulerRtps_a9c228dcf18263a21911a05d2fb147db0}


This function returns all the downlink bursts scheduled for the next downlink sub-\/frame. 

\begin{DoxyReturn}{Returns}
all the downlink bursts scheduled for the next downlink sub-\/frame 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1BSScheduler_aa6ac8560e2e7d0e59a9a011f3845cf51}{ns3\+::\+B\+S\+Scheduler}.


\begin{DoxyCode}
90 \{
91   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts};
92 \}
\end{DoxyCode}
\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1BSSchedulerRtps_af72d432e566999dae12237842c07f7e0}{}\label{classns3_1_1BSSchedulerRtps_af72d432e566999dae12237842c07f7e0}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
48 \{
49   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::BSSchedulerRtps"})
50     .SetParent<\hyperlink{classns3_1_1BSScheduler_ac7707cac4a7ad79e52777a4f557a38b8}{BSScheduler}> ()
51     .SetGroupName(\textcolor{stringliteral}{"Wimax"})
52     .AddConstructor<\hyperlink{classns3_1_1BSSchedulerRtps_acf23bbe9a781385523b2349c676c1f7e}{BSSchedulerRtps}> ()
53     ;
54   \textcolor{keywordflow}{return} tid;
55 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 25


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Schedule@{Schedule}}
\index{Schedule@{Schedule}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Schedule(void)}{Schedule(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Schedule (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1BSSchedulerRtps_a311c9c524b1a898c72afa35a9d7ac0dc}{}\label{classns3_1_1BSSchedulerRtps_a311c9c524b1a898c72afa35a9d7ac0dc}


Schedule function. 

A Down\+Link \hyperlink{classns3_1_1Scheduler}{Scheduler} for rt\+PS Flows.

The DL \hyperlink{classns3_1_1Scheduler}{Scheduler} assigns the available bandwidth in the following order\+:
\begin{DoxyItemize}
\item IR Connections
\item Broadcast Connections
\item Basic and Primary Connections
\item U\+GS Connections
\item rt\+PS Connections
\item nrt\+PS Connections
\item BE Connections All rt\+PS flows that have packets in the queue can transmit at least one packet, according to the available bandwidth. 
\end{DoxyItemize}

Implements \hyperlink{classns3_1_1BSScheduler_aa7d20dff6d4b4f18cb328b448bb7226f}{ns3\+::\+B\+S\+Scheduler}.


\begin{DoxyCode}
133 \{
134 
135   uint32\_t availableSymbols = \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetNrDlSymbols ();
136 
137   \hyperlink{classns3_1_1BSSchedulerRtps_ad041a6417c9cf0ddc40116ac877015ab}{BSSchedulerBroadcastConnection} (availableSymbols);
138 
139   \hyperlink{classns3_1_1BSSchedulerRtps_aa679d00c7063da179a3d2401e4a37f8e}{BSSchedulerInitialRangingConnection} (availableSymbols);
140 
141   \hyperlink{classns3_1_1BSSchedulerRtps_a9245c54c83bcde5e7178dacbbfc745c6}{BSSchedulerBasicConnection} (availableSymbols);
142 
143   \hyperlink{classns3_1_1BSSchedulerRtps_a2bd7697f2451b3fa6865c858e7c2556f}{BSSchedulerPrimaryConnection} (availableSymbols);
144 
145   \hyperlink{classns3_1_1BSSchedulerRtps_a71243a521e00bd88f39b681a0f14ed91}{BSSchedulerUGSConnection} (availableSymbols);
146 
147   \hyperlink{classns3_1_1BSSchedulerRtps_acb75718835482da98c9b7eafc756dc4c}{BSSchedulerRTPSConnection} (availableSymbols);
148 
149   \hyperlink{classns3_1_1BSSchedulerRtps_ae148375221d20545e3f54ac024c933c4}{BSSchedulerNRTPSConnection} (availableSymbols);
150 
151   \hyperlink{classns3_1_1BSSchedulerRtps_a74fd827556c1b6f8b58ecdb2720a36d5}{BSSchedulerBEConnection} (availableSymbols);
152 
153   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts}->size ())
154     \{
155       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"BS scheduler, number of bursts: "} << 
      \hyperlink{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{m\_downlinkBursts}->size () << \textcolor{stringliteral}{", symbols left: "}
156                                                        << availableSymbols << std::endl << \textcolor{stringliteral}{"BS scheduler,
       queues:"} << \textcolor{stringliteral}{" IR "}
157                                                        << \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetInitialRangingConnection ()->
      GetQueue ()->GetSize ()
158                                                        << \textcolor{stringliteral}{" broadcast "}
159                                                        << \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetBroadcastConnection ()->
      GetQueue ()->GetSize ()
160                                                        << \textcolor{stringliteral}{" basic "}
161                                                        << \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetConnectionManager ()->
      GetNPackets (\hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa68b82b5b38abe3f2b40e5e3d950ac746}{Cid::BASIC}, \hyperlink{classns3_1_1ServiceFlow_a7990ba10be1e098328fd1e6382a26235a1c9639853c5529ae013feddcae94a4c6}{ServiceFlow::SF\_TYPE\_NONE})
162                                                        << \textcolor{stringliteral}{" primary "}
163                                                        << \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetConnectionManager ()->
      GetNPackets (\hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa0ffb28b79686aa37c614c868e330418b}{Cid::PRIMARY}, \hyperlink{classns3_1_1ServiceFlow_a7990ba10be1e098328fd1e6382a26235a1c9639853c5529ae013feddcae94a4c6}{ServiceFlow::SF\_TYPE\_NONE})
164                                                        << \textcolor{stringliteral}{" transport "}
165                                                        << \hyperlink{classns3_1_1BSScheduler_a8b09065ac8f74cb35446af55128e41c7}{GetBs} ()->GetConnectionManager ()->
      GetNPackets (\hyperlink{classns3_1_1Cid_a10b8f92080ca5790e65a0bfa2f557e0aa46fbed56841c3bf471aa84de022edf87}{Cid::TRANSPORT}, \hyperlink{classns3_1_1ServiceFlow_a7990ba10be1e098328fd1e6382a26235aaf7e58e43027cc9d351cd100a9d6dee3}{ServiceFlow::SF\_TYPE\_ALL}));
166     \}
167 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 26


\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Select\+B\+E\+Connection@{Select\+B\+E\+Connection}}
\index{Select\+B\+E\+Connection@{Select\+B\+E\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Select\+B\+E\+Connection(\+Ptr$<$ Wimax\+Connection $>$ \&connection)}{SelectBEConnection(Ptr< WimaxConnection > &connection)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Select\+B\+E\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wimax\+Connection} $>$ \&}]{connection}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_ada0902fd806be05be27b260cb960f9cc}{}\label{classns3_1_1BSSchedulerRtps_ada0902fd806be05be27b260cb960f9cc}


Check for BE connections that have packets to transmit. 

\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Select\+Connection@{Select\+Connection}}
\index{Select\+Connection@{Select\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Select\+Connection(\+Ptr$<$ Wimax\+Connection $>$ \&connection)}{SelectConnection(Ptr< WimaxConnection > &connection)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Select\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wimax\+Connection} $>$ \&}]{connection}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1BSSchedulerRtps_a082c11be23b996ed560dcb76ce8db3a2}{}\label{classns3_1_1BSSchedulerRtps_a082c11be23b996ed560dcb76ce8db3a2}


Selects a connection from the list of connections having packets to be sent . 


\begin{DoxyParams}{Parameters}
{\em connection} & will point to a connection that have packets to be sent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
false if no connection has packets to be sent, true otherwise 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1BSScheduler_a6e5f509fe55afd1500909c980e17f4fa}{ns3\+::\+B\+S\+Scheduler}.


\begin{DoxyCode}
211 \{
212   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
213 \}
\end{DoxyCode}
\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Select\+I\+Rand\+B\+C\+Connection@{Select\+I\+Rand\+B\+C\+Connection}}
\index{Select\+I\+Rand\+B\+C\+Connection@{Select\+I\+Rand\+B\+C\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Select\+I\+Rand\+B\+C\+Connection(\+Ptr$<$ Wimax\+Connection $>$ \&connection)}{SelectIRandBCConnection(Ptr< WimaxConnection > &connection)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Select\+I\+Rand\+B\+C\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wimax\+Connection} $>$ \&}]{connection}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_aeea01c34ea087a03188d0ae8d07f57ae}{}\label{classns3_1_1BSSchedulerRtps_aeea01c34ea087a03188d0ae8d07f57ae}


Check for IR and Broadcast connections that have packets to transmit. 


\begin{DoxyParams}{Parameters}
{\em connection} & will point to a initial ranging or broadcast connection wich have packets to transmit \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
false if no initial ranging or broadcast connection has packets to transmit, true otherwise 
\end{DoxyReturn}
\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Select\+Menagement\+Connection@{Select\+Menagement\+Connection}}
\index{Select\+Menagement\+Connection@{Select\+Menagement\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Select\+Menagement\+Connection(\+Ptr$<$ Wimax\+Connection $>$ \&connection)}{SelectMenagementConnection(Ptr< WimaxConnection > &connection)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Select\+Menagement\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wimax\+Connection} $>$ \&}]{connection}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a9c66335cafc7834a3b0de47df0f69913}{}\label{classns3_1_1BSSchedulerRtps_a9c66335cafc7834a3b0de47df0f69913}


Check for Basic and Primary connections that have packets to transmit. 


\begin{DoxyParams}{Parameters}
{\em connection} & will point to a basic or primary connection wich have packets to transmit \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
false if no basic or primary connection has packets to transmit, true otherwise 
\end{DoxyReturn}
\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Select\+N\+R\+T\+P\+S\+Connection@{Select\+N\+R\+T\+P\+S\+Connection}}
\index{Select\+N\+R\+T\+P\+S\+Connection@{Select\+N\+R\+T\+P\+S\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Select\+N\+R\+T\+P\+S\+Connection(\+Ptr$<$ Wimax\+Connection $>$ \&connection)}{SelectNRTPSConnection(Ptr< WimaxConnection > &connection)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Select\+N\+R\+T\+P\+S\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wimax\+Connection} $>$ \&}]{connection}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a75902c5d51c9a9088553e51bc918fa97}{}\label{classns3_1_1BSSchedulerRtps_a75902c5d51c9a9088553e51bc918fa97}


Check for nrt\+PS connections that have packets to transmit. 

\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Select\+R\+T\+P\+S\+Connection@{Select\+R\+T\+P\+S\+Connection}}
\index{Select\+R\+T\+P\+S\+Connection@{Select\+R\+T\+P\+S\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Select\+R\+T\+P\+S\+Connection(\+Ptr$<$ Wimax\+Connection $>$ \&connection)}{SelectRTPSConnection(Ptr< WimaxConnection > &connection)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Select\+R\+T\+P\+S\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wimax\+Connection} $>$ \&}]{connection}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_a6253d8d6989392c373a6aa5bd59176fc}{}\label{classns3_1_1BSSchedulerRtps_a6253d8d6989392c373a6aa5bd59176fc}


Check for rt\+PS connections that have packets to transmit. 

\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!Select\+U\+G\+S\+Connection@{Select\+U\+G\+S\+Connection}}
\index{Select\+U\+G\+S\+Connection@{Select\+U\+G\+S\+Connection}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{Select\+U\+G\+S\+Connection(\+Ptr$<$ Wimax\+Connection $>$ \&connection)}{SelectUGSConnection(Ptr< WimaxConnection > &connection)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+B\+S\+Scheduler\+Rtps\+::\+Select\+U\+G\+S\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wimax\+Connection} $>$ \&}]{connection}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1BSSchedulerRtps_ac9e83b101579949c8e044920fe35a533}{}\label{classns3_1_1BSSchedulerRtps_ac9e83b101579949c8e044920fe35a533}


Check for U\+GS connections that have packets to transmit. 

The method return the U\+GS connection that have packets to transmits, according to the Max\+Latency specifications. 
\begin{DoxyParams}{Parameters}
{\em connection} & will point to a connection that have packets to be sent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if successful 
\end{DoxyReturn}


\subsection{Member Data Documentation}
\index{ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}!m\+\_\+downlink\+Bursts@{m\+\_\+downlink\+Bursts}}
\index{m\+\_\+downlink\+Bursts@{m\+\_\+downlink\+Bursts}!ns3\+::\+B\+S\+Scheduler\+Rtps@{ns3\+::\+B\+S\+Scheduler\+Rtps}}
\subsubsection[{\texorpdfstring{m\+\_\+downlink\+Bursts}{m_downlinkBursts}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std\+::list}$<$std\+::pair$<${\bf Ofdm\+Dl\+Map\+Ie}$\ast$, {\bf Ptr}$<${\bf Packet\+Burst}$>$ $>$ $>$$\ast$ ns3\+::\+B\+S\+Scheduler\+Rtps\+::m\+\_\+downlink\+Bursts\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}{}\label{classns3_1_1BSSchedulerRtps_afd2e36f0462940e88519935b9df6a6ca}


down link bursts 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
wimax/model/\hyperlink{bs-scheduler-rtps_8h}{bs-\/scheduler-\/rtps.\+h}\item 
wimax/model/\hyperlink{bs-scheduler-rtps_8cc}{bs-\/scheduler-\/rtps.\+cc}\end{DoxyCompactItemize}
