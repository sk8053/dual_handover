\hypertarget{classns3_1_1MacRxMiddle}{}\section{ns3\+:\+:Mac\+Rx\+Middle Class Reference}
\label{classns3_1_1MacRxMiddle}\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}


{\ttfamily \#include $<$mac-\/rx-\/middle.\+h$>$}



Collaboration diagram for ns3\+:\+:Mac\+Rx\+Middle\+:
% FIG 0
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$, const \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} $\ast$ $>$ \hyperlink{classns3_1_1MacRxMiddle_ad1a3ee168f7826b71385af2cec382c81}{Forward\+Up\+Callback}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MacRxMiddle_ad5e9444715075c030d217fda0c6a106f}{Mac\+Rx\+Middle} ()
\item 
\hyperlink{classns3_1_1MacRxMiddle_ac2fdebcc15760fd5ee01420d5cc76002}{$\sim$\+Mac\+Rx\+Middle} ()
\item 
void \hyperlink{classns3_1_1MacRxMiddle_a0ad2ae4b6ac935309311eae2997bd9b8}{Set\+Forward\+Callback} (\hyperlink{classns3_1_1MacRxMiddle_ad1a3ee168f7826b71385af2cec382c81}{Forward\+Up\+Callback} callback)
\item 
void \hyperlink{classns3_1_1MacRxMiddle_a924ddb6f8cea2daa6701325c7422dc59}{Receive} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} $\ast$hdr)
\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::map$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address}, \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} $\ast$, std\+::less$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} $>$ $>$ \hyperlink{classns3_1_1MacRxMiddle_a6263189b2a22e164f77f0a9d58d035cc}{Originators}
\item 
typedef std\+::map$<$ std\+::pair$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address}, uint8\+\_\+t $>$, \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} $\ast$, std\+::less$<$ std\+::pair$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address}, uint8\+\_\+t $>$ $>$ $>$ \hyperlink{classns3_1_1MacRxMiddle_a77bf81590cbfd7edc9557dbf4621150b}{Qos\+Originators}
\item 
typedef std\+::map$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address}, \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} $\ast$, std\+::less$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} $>$ $>$\+::iterator \hyperlink{classns3_1_1MacRxMiddle_a51c8afc428c943f9992af8eeabd981d7}{OriginatorsI}
\item 
typedef std\+::map$<$ std\+::pair$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address}, uint8\+\_\+t $>$, \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} $\ast$, std\+::less$<$ std\+::pair$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address}, uint8\+\_\+t $>$ $>$ $>$\+::iterator \hyperlink{classns3_1_1MacRxMiddle_a745fb5bcb19538de87c29e223d1d6abc}{Qos\+OriginatorsI}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} $\ast$ \hyperlink{classns3_1_1MacRxMiddle_ac7ff36607c9fa9f207d70bd1c7f14bc7}{Lookup} (const \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} $\ast$hdr)
\item 
bool \hyperlink{classns3_1_1MacRxMiddle_adef5584d8c8059e842a4bce9c4321b88}{Is\+Duplicate} (const \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} $\ast$hdr, \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} $\ast$originator) const 
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classns3_1_1MacRxMiddle_ae595f60963be22a3e28975572f3e0707}{Handle\+Fragments} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} $\ast$hdr, \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} $\ast$originator)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MacRxMiddle_a6263189b2a22e164f77f0a9d58d035cc}{Originators} \hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\+\_\+originator\+Status}
\begin{DoxyCompactList}\small\item\em originator status \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1MacRxMiddle_a77bf81590cbfd7edc9557dbf4621150b}{Qos\+Originators} \hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\+\_\+qos\+Originator\+Status}
\begin{DoxyCompactList}\small\item\em Q\+OS originator status. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1MacRxMiddle_ad1a3ee168f7826b71385af2cec382c81}{Forward\+Up\+Callback} \hyperlink{classns3_1_1MacRxMiddle_aba181a02e2199e5d4093d9ce51646f94}{m\+\_\+callback}
\begin{DoxyCompactList}\small\item\em forward up callback \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1MacRxMiddle_a02ab2c173942e033b1552bdf29bd2e96}{Mac\+Rx\+Middle\+Test}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class handles duplicate detection and recomposition of fragments. 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Forward\+Up\+Callback@{Forward\+Up\+Callback}}
\index{Forward\+Up\+Callback@{Forward\+Up\+Callback}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Forward\+Up\+Callback}{ForwardUpCallback}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf Callback}$<$void, {\bf Ptr}$<${\bf Packet}$>$, const {\bf Wifi\+Mac\+Header}$\ast$$>$ {\bf ns3\+::\+Mac\+Rx\+Middle\+::\+Forward\+Up\+Callback}}\hypertarget{classns3_1_1MacRxMiddle_ad1a3ee168f7826b71385af2cec382c81}{}\label{classns3_1_1MacRxMiddle_ad1a3ee168f7826b71385af2cec382c81}
typedef for callback \index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Originators@{Originators}}
\index{Originators@{Originators}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Originators}{Originators}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::map$<${\bf Mac48\+Address}, {\bf Originator\+Rx\+Status} $\ast$, std\+::less$<${\bf Mac48\+Address}$>$ $>$ {\bf ns3\+::\+Mac\+Rx\+Middle\+::\+Originators}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_a6263189b2a22e164f77f0a9d58d035cc}{}\label{classns3_1_1MacRxMiddle_a6263189b2a22e164f77f0a9d58d035cc}
typedef for a map between address and \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} \index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!OriginatorsI@{OriginatorsI}}
\index{OriginatorsI@{OriginatorsI}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{OriginatorsI}{OriginatorsI}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::map$<${\bf Mac48\+Address}, {\bf Originator\+Rx\+Status} $\ast$, std\+::less$<${\bf Mac48\+Address}$>$ $>$\+::iterator {\bf ns3\+::\+Mac\+Rx\+Middle\+::\+OriginatorsI}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_a51c8afc428c943f9992af8eeabd981d7}{}\label{classns3_1_1MacRxMiddle_a51c8afc428c943f9992af8eeabd981d7}
typedef for an interator for Originators \index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Qos\+Originators@{Qos\+Originators}}
\index{Qos\+Originators@{Qos\+Originators}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Qos\+Originators}{QosOriginators}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::map$<$std\+::pair$<${\bf Mac48\+Address}, uint8\+\_\+t$>$, {\bf Originator\+Rx\+Status} $\ast$, std\+::less$<$std\+::pair$<${\bf Mac48\+Address},uint8\+\_\+t$>$ $>$ $>$ {\bf ns3\+::\+Mac\+Rx\+Middle\+::\+Qos\+Originators}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_a77bf81590cbfd7edc9557dbf4621150b}{}\label{classns3_1_1MacRxMiddle_a77bf81590cbfd7edc9557dbf4621150b}
typedef for a map between address, \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status}, and Traffic ID \index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Qos\+OriginatorsI@{Qos\+OriginatorsI}}
\index{Qos\+OriginatorsI@{Qos\+OriginatorsI}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Qos\+OriginatorsI}{QosOriginatorsI}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::map$<$std\+::pair$<${\bf Mac48\+Address}, uint8\+\_\+t$>$, {\bf Originator\+Rx\+Status} $\ast$, std\+::less$<$std\+::pair$<${\bf Mac48\+Address},uint8\+\_\+t$>$ $>$ $>$\+::iterator {\bf ns3\+::\+Mac\+Rx\+Middle\+::\+Qos\+OriginatorsI}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_a745fb5bcb19538de87c29e223d1d6abc}{}\label{classns3_1_1MacRxMiddle_a745fb5bcb19538de87c29e223d1d6abc}
typedef for an interator for Qos\+Originators 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Mac\+Rx\+Middle@{Mac\+Rx\+Middle}}
\index{Mac\+Rx\+Middle@{Mac\+Rx\+Middle}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Mac\+Rx\+Middle()}{MacRxMiddle()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mac\+Rx\+Middle\+::\+Mac\+Rx\+Middle (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacRxMiddle_ad5e9444715075c030d217fda0c6a106f}{}\label{classns3_1_1MacRxMiddle_ad5e9444715075c030d217fda0c6a106f}

\begin{DoxyCode}
161 \{
162   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
163 \}
\end{DoxyCode}
\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!````~Mac\+Rx\+Middle@{$\sim$\+Mac\+Rx\+Middle}}
\index{````~Mac\+Rx\+Middle@{$\sim$\+Mac\+Rx\+Middle}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{$\sim$\+Mac\+Rx\+Middle()}{~MacRxMiddle()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mac\+Rx\+Middle\+::$\sim$\+Mac\+Rx\+Middle (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacRxMiddle_ac2fdebcc15760fd5ee01420d5cc76002}{}\label{classns3_1_1MacRxMiddle_ac2fdebcc15760fd5ee01420d5cc76002}

\begin{DoxyCode}
166 \{
167   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
168   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1MacRxMiddle_a51c8afc428c943f9992af8eeabd981d7}{OriginatorsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\_originatorStatus}.begin ();
169        \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\_originatorStatus}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
170     \{
171       \textcolor{keyword}{delete} (*i).second;
172     \}
173   \hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\_originatorStatus}.erase (\hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\_originatorStatus}.begin (),
174                             \hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\_originatorStatus}.end ());
175   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1MacRxMiddle_a745fb5bcb19538de87c29e223d1d6abc}{QosOriginatorsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\_qosOriginatorStatus}.begin ();
176        \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\_qosOriginatorStatus}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
177     \{
178       \textcolor{keyword}{delete} (*i).second;
179     \}
180   \hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\_qosOriginatorStatus}.erase (\hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\_qosOriginatorStatus}.begin (),
181                                \hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\_qosOriginatorStatus}.end ());
182 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Handle\+Fragments@{Handle\+Fragments}}
\index{Handle\+Fragments@{Handle\+Fragments}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Handle\+Fragments(\+Ptr$<$ Packet $>$ packet, const Wifi\+Mac\+Header $\ast$hdr, Originator\+Rx\+Status $\ast$originator)}{HandleFragments(Ptr< Packet > packet, const WifiMacHeader *hdr, OriginatorRxStatus *originator)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Packet} $>$ ns3\+::\+Mac\+Rx\+Middle\+::\+Handle\+Fragments (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Wifi\+Mac\+Header} $\ast$}]{hdr, }
\item[{{\bf Originator\+Rx\+Status} $\ast$}]{originator}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_ae595f60963be22a3e28975572f3e0707}{}\label{classns3_1_1MacRxMiddle_ae595f60963be22a3e28975572f3e0707}
Check if the received packet is a fragment and handle it appropriately. If the packet is not a fragment, the method returns the packet. If the packet is a fragment (not the last fragment), the method initiates de-\/fragmentation process and return 0. If the packet is the last fragment, the method tries to re-\/construct the full packet and return the packet if success.


\begin{DoxyParams}{Parameters}
{\em packet} & \\
\hline
{\em hdr} & \\
\hline
{\em originator} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a packet if the packet is successfully reassembled (or not a fragment), 0 if we failed to reassemble the packet (e.\+g. missing fragments/out-\/of-\/order). 
\end{DoxyReturn}

\begin{DoxyCode}
241 \{
242   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (packet << hdr << originator);
243   \textcolor{keywordflow}{if} (originator->IsDeFragmenting ())
244     \{
245       \textcolor{keywordflow}{if} (hdr->IsMoreFragments ())
246         \{
247           \textcolor{keywordflow}{if} (originator->IsNextFragment (hdr->GetSequenceControl ()))
248             \{
249               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"accumulate fragment seq="} << hdr->GetSequenceNumber () <<
250                             \textcolor{stringliteral}{", frag="} << hdr->GetFragmentNumber () <<
251                             \textcolor{stringliteral}{", size="} << packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ());
252               originator->AccumulateFragment (packet);
253               originator->SetSequenceControl (hdr->GetSequenceControl ());
254             \}
255           \textcolor{keywordflow}{else}
256             \{
257               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"non-ordered fragment"});
258             \}
259           \textcolor{keywordflow}{return} 0;
260         \}
261       \textcolor{keywordflow}{else}
262         \{
263           \textcolor{keywordflow}{if} (originator->IsNextFragment (hdr->GetSequenceControl ()))
264             \{
265               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"accumulate last fragment seq="} << hdr->GetSequenceNumber () <<
266                             \textcolor{stringliteral}{", frag="} << hdr->GetFragmentNumber () <<
267                             \textcolor{stringliteral}{", size="} << hdr->GetSize ());
268               Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = originator->AccumulateLastFragment (packet);
269               originator->SetSequenceControl (hdr->GetSequenceControl ());
270               \textcolor{keywordflow}{return} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p};
271             \}
272           \textcolor{keywordflow}{else}
273             \{
274               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"non-ordered fragment"});
275               \textcolor{keywordflow}{return} 0;
276             \}
277         \}
278     \}
279   \textcolor{keywordflow}{else}
280     \{
281       \textcolor{keywordflow}{if} (hdr->IsMoreFragments ())
282         \{
283           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"accumulate first fragment seq="} << hdr->GetSequenceNumber () <<
284                         \textcolor{stringliteral}{", frag="} << hdr->GetFragmentNumber () <<
285                         \textcolor{stringliteral}{", size="} << packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ());
286           originator->AccumulateFirstFragment (packet);
287           originator->SetSequenceControl (hdr->GetSequenceControl ());
288           \textcolor{keywordflow}{return} 0;
289         \}
290       \textcolor{keywordflow}{else}
291         \{
292           \textcolor{keywordflow}{return} packet;
293         \}
294     \}
295 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Is\+Duplicate@{Is\+Duplicate}}
\index{Is\+Duplicate@{Is\+Duplicate}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Is\+Duplicate(const Wifi\+Mac\+Header $\ast$hdr, Originator\+Rx\+Status $\ast$originator) const }{IsDuplicate(const WifiMacHeader *hdr, OriginatorRxStatus *originator) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Mac\+Rx\+Middle\+::\+Is\+Duplicate (
\begin{DoxyParamCaption}
\item[{const {\bf Wifi\+Mac\+Header} $\ast$}]{hdr, }
\item[{{\bf Originator\+Rx\+Status} $\ast$}]{originator}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_adef5584d8c8059e842a4bce9c4321b88}{}\label{classns3_1_1MacRxMiddle_adef5584d8c8059e842a4bce9c4321b88}
Check if we have already received the packet from the sender before (by looking at the sequence control field).


\begin{DoxyParams}{Parameters}
{\em hdr} & \\
\hline
{\em originator} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if we already received the packet previously, false otherwise 
\end{DoxyReturn}

\begin{DoxyCode}
228 \{
229   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (hdr << originator);
230   \textcolor{keywordflow}{if} (hdr->IsRetry ()
231       && originator->GetLastSequenceControl () == hdr->GetSequenceControl ())
232     \{
233       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
234     \}
235   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
236 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Lookup@{Lookup}}
\index{Lookup@{Lookup}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Lookup(const Wifi\+Mac\+Header $\ast$hdr)}{Lookup(const WifiMacHeader *hdr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Originator\+Rx\+Status} $\ast$ ns3\+::\+Mac\+Rx\+Middle\+::\+Lookup (
\begin{DoxyParamCaption}
\item[{const {\bf Wifi\+Mac\+Header} $\ast$}]{hdr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_ac7ff36607c9fa9f207d70bd1c7f14bc7}{}\label{classns3_1_1MacRxMiddle_ac7ff36607c9fa9f207d70bd1c7f14bc7}
Look up for \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} associated with the sender address (by looking at A\+D\+D\+R2 field in the header). The method creates a new \hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} if one is not already presented.


\begin{DoxyParams}{Parameters}
{\em hdr} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classns3_1_1OriginatorRxStatus}{Originator\+Rx\+Status} 
\end{DoxyReturn}

\begin{DoxyCode}
193 \{
194   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (hdr);
195   OriginatorRxStatus *originator;
196   Mac48Address source = hdr->GetAddr2 ();
197   \textcolor{keywordflow}{if} (hdr->IsQosData ()
198       && !hdr->GetAddr2 ().IsGroup ())
199     \{
200       \textcolor{comment}{/* only for qos data non-broadcast frames */}
201       originator = \hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\_qosOriginatorStatus}[std::make\_pair (source, hdr->GetQosTid ())];
202       \textcolor{keywordflow}{if} (originator == 0)
203         \{
204           originator = \textcolor{keyword}{new} OriginatorRxStatus ();
205           \hyperlink{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{m\_qosOriginatorStatus}[std::make\_pair (source, hdr->GetQosTid ())] = 
      originator;
206         \}
207     \}
208   \textcolor{keywordflow}{else}
209     \{
210       \textcolor{comment}{/* - management frames}
211 \textcolor{comment}{       * - qos data broadcast frames}
212 \textcolor{comment}{       * - nqos data frames}
213 \textcolor{comment}{       * see section 7.1.3.4.1}
214 \textcolor{comment}{       */}
215       originator = \hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\_originatorStatus}[source];
216       \textcolor{keywordflow}{if} (originator == 0)
217         \{
218           originator = \textcolor{keyword}{new} OriginatorRxStatus ();
219           \hyperlink{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{m\_originatorStatus}[source] = originator;
220         \}
221     \}
222   \textcolor{keywordflow}{return} originator;
223 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Receive@{Receive}}
\index{Receive@{Receive}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Receive(\+Ptr$<$ Packet $>$ packet, const Wifi\+Mac\+Header $\ast$hdr)}{Receive(Ptr< Packet > packet, const WifiMacHeader *hdr)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Rx\+Middle\+::\+Receive (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Wifi\+Mac\+Header} $\ast$}]{hdr}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacRxMiddle_a924ddb6f8cea2daa6701325c7422dc59}{}\label{classns3_1_1MacRxMiddle_a924ddb6f8cea2daa6701325c7422dc59}
Receive a packet.


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em hdr} & M\+AC header \\
\hline
\end{DoxyParams}
The check below is really uneeded because it can fail in a lot of normal cases. Specifically, it is possible for sequence numbers to loop back to zero once they reach 0xfff0 and to go up to 0xf7f0 in which case the check below will report the two sequence numbers to not have the correct order relationship. So, this check cannot be used to discard old duplicate frames. It is thus here only for documentation purposes.
\begin{DoxyCode}
299 \{
300   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (packet << hdr);
301   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (hdr->IsData () || hdr->IsMgt ());
302   OriginatorRxStatus *originator = \hyperlink{classns3_1_1MacRxMiddle_ac7ff36607c9fa9f207d70bd1c7f14bc7}{Lookup} (hdr);
312   \textcolor{keywordflow}{if} (!(\hyperlink{group__network_gaf266f5a4c5719a6897638f91ced3b5af}{SequenceNumber16} (originator->GetLastSequenceControl ()) < 
      \hyperlink{group__network_gaf266f5a4c5719a6897638f91ced3b5af}{SequenceNumber16} (hdr->GetSequenceControl ())))
313     \{
314       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Sequence numbers have looped back. last recorded="} << originator->
      GetLastSequenceControl () <<
315                     \textcolor{stringliteral}{" currently seen="} << hdr->GetSequenceControl ());
316     \}
317   \textcolor{comment}{//filter duplicates.}
318   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MacRxMiddle_adef5584d8c8059e842a4bce9c4321b88}{IsDuplicate} (hdr, originator))
319     \{
320       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"duplicate from="} << hdr->GetAddr2 () <<
321                     \textcolor{stringliteral}{", seq="} << hdr->GetSequenceNumber () <<
322                     \textcolor{stringliteral}{", frag="} << hdr->GetFragmentNumber ());
323       \textcolor{keywordflow}{return};
324     \}
325   Ptr<Packet> agregate = \hyperlink{classns3_1_1MacRxMiddle_ae595f60963be22a3e28975572f3e0707}{HandleFragments} (packet, hdr, originator);
326   \textcolor{keywordflow}{if} (agregate == 0)
327     \{
328       \textcolor{keywordflow}{return};
329     \}
330   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"forwarding data from="} << hdr->GetAddr2 () <<
331                 \textcolor{stringliteral}{", seq="} << hdr->GetSequenceNumber () <<
332                 \textcolor{stringliteral}{", frag="} << hdr->GetFragmentNumber ());
333   \textcolor{keywordflow}{if} (!hdr->GetAddr1 ().IsGroup ())
334     \{
335       originator->SetSequenceControl (hdr->GetSequenceControl ());
336     \}
337   \hyperlink{classns3_1_1MacRxMiddle_aba181a02e2199e5d4093d9ce51646f94}{m\_callback} (agregate, hdr);
338 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Set\+Forward\+Callback@{Set\+Forward\+Callback}}
\index{Set\+Forward\+Callback@{Set\+Forward\+Callback}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Set\+Forward\+Callback(\+Forward\+Up\+Callback callback)}{SetForwardCallback(ForwardUpCallback callback)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mac\+Rx\+Middle\+::\+Set\+Forward\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Forward\+Up\+Callback}}]{callback}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacRxMiddle_a0ad2ae4b6ac935309311eae2997bd9b8}{}\label{classns3_1_1MacRxMiddle_a0ad2ae4b6ac935309311eae2997bd9b8}
Set a callback to forward the packet up.


\begin{DoxyParams}{Parameters}
{\em callback} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
186 \{
187   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
188   \hyperlink{classns3_1_1MacRxMiddle_aba181a02e2199e5d4093d9ce51646f94}{m\_callback} = callback;
189 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6




\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!Mac\+Rx\+Middle\+Test@{Mac\+Rx\+Middle\+Test}}
\index{Mac\+Rx\+Middle\+Test@{Mac\+Rx\+Middle\+Test}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{Mac\+Rx\+Middle\+Test}{MacRxMiddleTest}}]{\setlength{\rightskip}{0pt plus 5cm}friend class Mac\+Rx\+Middle\+Test\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1MacRxMiddle_a02ab2c173942e033b1552bdf29bd2e96}{}\label{classns3_1_1MacRxMiddle_a02ab2c173942e033b1552bdf29bd2e96}


\subsection{Member Data Documentation}
\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!m\+\_\+callback@{m\+\_\+callback}}
\index{m\+\_\+callback@{m\+\_\+callback}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{m\+\_\+callback}{m_callback}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Forward\+Up\+Callback} ns3\+::\+Mac\+Rx\+Middle\+::m\+\_\+callback\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_aba181a02e2199e5d4093d9ce51646f94}{}\label{classns3_1_1MacRxMiddle_aba181a02e2199e5d4093d9ce51646f94}


forward up callback 

\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!m\+\_\+originator\+Status@{m\+\_\+originator\+Status}}
\index{m\+\_\+originator\+Status@{m\+\_\+originator\+Status}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{m\+\_\+originator\+Status}{m_originatorStatus}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Originators} ns3\+::\+Mac\+Rx\+Middle\+::m\+\_\+originator\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}{}\label{classns3_1_1MacRxMiddle_a1938c454885267867365a04ae45a1fcb}


originator status 

\index{ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}!m\+\_\+qos\+Originator\+Status@{m\+\_\+qos\+Originator\+Status}}
\index{m\+\_\+qos\+Originator\+Status@{m\+\_\+qos\+Originator\+Status}!ns3\+::\+Mac\+Rx\+Middle@{ns3\+::\+Mac\+Rx\+Middle}}
\subsubsection[{\texorpdfstring{m\+\_\+qos\+Originator\+Status}{m_qosOriginatorStatus}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Qos\+Originators} ns3\+::\+Mac\+Rx\+Middle\+::m\+\_\+qos\+Originator\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}{}\label{classns3_1_1MacRxMiddle_a80a0db4db3281d8bffc08cf5f989ab6e}


Q\+OS originator status. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
wifi/model/\hyperlink{mac-rx-middle_8h}{mac-\/rx-\/middle.\+h}\item 
wifi/model/\hyperlink{mac-rx-middle_8cc}{mac-\/rx-\/middle.\+cc}\end{DoxyCompactItemize}
