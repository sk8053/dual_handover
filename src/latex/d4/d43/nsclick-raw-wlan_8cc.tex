\hypertarget{nsclick-raw-wlan_8cc}{}\section{click/examples/nsclick-\/raw-\/wlan.cc File Reference}
\label{nsclick-raw-wlan_8cc}\index{click/examples/nsclick-\/raw-\/wlan.\+cc@{click/examples/nsclick-\/raw-\/wlan.\+cc}}
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/applications-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/wifi-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/click-\/internet-\/stack-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/log.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/mobility-\/helper.\+h\char`\"{}}\\*
Include dependency graph for nsclick-\/raw-\/wlan.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{nsclick-raw-wlan_8cc_a80dc0d980be124d8d5c4ee0b7943bfae}{Receive\+Packet} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\item 
int \hyperlink{nsclick-raw-wlan_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{nsclick-\/raw-\/wlan.\+cc@{nsclick-\/raw-\/wlan.\+cc}!main@{main}}
\index{main@{main}!nsclick-\/raw-\/wlan.\+cc@{nsclick-\/raw-\/wlan.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{nsclick-raw-wlan_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{nsclick-raw-wlan_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
45 \{
46 \textcolor{preprocessor}{#ifdef NS3\_CLICK}
47   \textcolor{keywordtype}{double} rss = -80;
48   std::string clickConfigFolder = \textcolor{stringliteral}{"src/click/examples"};
49 
50   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
51   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"clickConfigFolder"}, \textcolor{stringliteral}{"Base folder for click configuration files"}, clickConfigFolder
      );
52   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc, argv);
53 
54   \textcolor{comment}{// Setup nodes}
55   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} wifiNodes;
56   wifiNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (2);
57 
58   \textcolor{comment}{// Get Wifi devices installed on both nodes.}
59   \textcolor{comment}{// Adapted from examples/wireless/wifi-simple-adhoc.cc}
60   std::string phyMode (\textcolor{stringliteral}{"DsssRate1Mbps"});
61 
62   \textcolor{comment}{// disable fragmentation for frames below 2200 bytes}
63   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::WifiRemoteStationManager::FragmentationThreshold"}, 
      StringValue (\textcolor{stringliteral}{"2200"}));
64   \textcolor{comment}{// turn off RTS/CTS for frames below 2200 bytes}
65   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::WifiRemoteStationManager::RtsCtsThreshold"}, StringValue (\textcolor{stringliteral}{"
      2200"}));
66   \textcolor{comment}{// Fix non-unicast data rate to be the same as that of unicast}
67   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::WifiRemoteStationManager::NonUnicastMode"},
68                       StringValue (phyMode));
69 
70   \hyperlink{classns3_1_1WifiHelper}{WifiHelper} wifi;
71   wifi.\hyperlink{classns3_1_1WifiHelper_aa54f3e61527ef8de318d310045bc5dfd}{SetStandard} (\hyperlink{group__wifi_gga1299834f4e1c615af3ca738033b76a49a77e1cc9f77a0bce8e2bc82cbef437b5a}{WIFI\_PHY\_STANDARD\_80211b});
72 
73   \hyperlink{classns3_1_1YansWifiPhyHelper}{YansWifiPhyHelper} wifiPhy =  YansWifiPhyHelper::Default ();
74   \textcolor{comment}{// This is one parameter that matters when using FixedRssLossModel}
75   \textcolor{comment}{// set it to zero; otherwise, gain will be added}
76   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_a2527d6d7b29f717fd7436166c5f05f1a}{Set} (\textcolor{stringliteral}{"RxGain"}, DoubleValue (0) );
77   \textcolor{comment}{// ns-3 supports RadioTap and Prism tracing extensions for 802.11b}
78   wifiPhy.\hyperlink{classns3_1_1WifiPhyHelper_ae4b90e90f6e78a19c1b7fdf08b270218}{SetPcapDataLinkType} (YansWifiPhyHelper::DLT\_IEEE802\_11\_RADIO);
79 
80   \hyperlink{classns3_1_1YansWifiChannelHelper}{YansWifiChannelHelper} wifiChannel;
81   wifiChannel.\hyperlink{classns3_1_1YansWifiChannelHelper_a6b452ba53ccaee6ca000cc72ed9ea0fa}{SetPropagationDelay} (\textcolor{stringliteral}{"ns3::ConstantSpeedPropagationDelayModel"});
82   \textcolor{comment}{// The below FixedRssLossModel will cause the rss to be fixed regardless}
83   \textcolor{comment}{// of the distance between the two stations, and the transmit power}
84   wifiChannel.\hyperlink{classns3_1_1YansWifiChannelHelper_a71c64d54e148b43698c65736e1c77156}{AddPropagationLoss} (\textcolor{stringliteral}{"ns3::FixedRssLossModel"},\textcolor{stringliteral}{"Rss"},DoubleValue (rss));
85   wifiPhy.\hyperlink{classns3_1_1YansWifiPhyHelper_ad2e9a27587dd4ff320435c93cc2676de}{SetChannel} (wifiChannel.\hyperlink{classns3_1_1YansWifiChannelHelper_a0532e292ab9452f3cf630c848708e563}{Create} ());
86 
87   \textcolor{comment}{// Add an upper mac and disable rate control}
88   \hyperlink{classns3_1_1WifiMacHelper}{WifiMacHelper} wifiMac;
89   wifi.\hyperlink{classns3_1_1WifiHelper_a3d01b178aeb2de246ab5a3aa5638ce24}{SetRemoteStationManager} (\textcolor{stringliteral}{"ns3::ConstantRateWifiManager"},
90                                 \textcolor{stringliteral}{"DataMode"},StringValue (phyMode),
91                                 \textcolor{stringliteral}{"ControlMode"},StringValue (phyMode));
92   \textcolor{comment}{// Set it to adhoc mode}
93   wifiMac.\hyperlink{classns3_1_1WifiMacHelper_a382d8df76a1dd7007179d1963b4b6bc6}{SetType} (\textcolor{stringliteral}{"ns3::AdhocWifiMac"});
94   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} wifiDevices = wifi.\hyperlink{classns3_1_1WifiHelper_a451b3d33fa1497c22f06c5451f57a127}{Install} (wifiPhy, wifiMac, wifiNodes);
95 
96   \textcolor{comment}{// Setup mobility models}
97   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
98   \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} positionAlloc = CreateObject<ListPositionAllocator> 
      ();
99   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (0.0, 0.0, 0.0));
100   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (5.0, 0.0, 0.0));
101   mobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (positionAlloc);
102   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
103   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (wifiNodes);
104 
105   \textcolor{comment}{// Install normal internet stack on node B}
106   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
107   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
108 
109   \textcolor{comment}{// Install Click on node A}
110   ClickInternetStackHelper clickinternet;
111   clickinternet.SetClickFile (wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0), clickConfigFolder + \textcolor{stringliteral}{"
      /nsclick-wifi-single-interface.click"});
112   clickinternet.SetRoutingTableElement (wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0), \textcolor{stringliteral}{"rt"});
113   clickinternet.Install (wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0));
114 
115   \textcolor{comment}{// Configure IP addresses}
116   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4;
117   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"172.16.1.0"}, \textcolor{stringliteral}{"255.255.255.0"});
118   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (wifiDevices);
119 
120   \textcolor{comment}{// Setup traffic application and sockets}
121   \hyperlink{classns3_1_1Address}{Address} LocalAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), 50000));
122   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} packetSinkHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, LocalAddress);
123   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} recvapp = packetSinkHelper.Install (wifiNodes.
      \hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
124   recvapp.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (5.0));
125   recvapp.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
126 
127   \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} onOffHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, \hyperlink{classns3_1_1Address}{Address} ());
128   onOffHelper.SetAttribute (\textcolor{stringliteral}{"OnTime"}, StringValue (\textcolor{stringliteral}{"ns3::ConstantRandomVariable[Constant=1]"}));
129   onOffHelper.SetAttribute (\textcolor{stringliteral}{"OffTime"}, StringValue (\textcolor{stringliteral}{"ns3::ConstantRandomVariable[Constant=0]"}));
130 
131   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} appcont;
132 
133   AddressValue remoteAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"172.16.1.2"}), 50
      000));
134   onOffHelper.SetAttribute (\textcolor{stringliteral}{"Remote"}, remoteAddress);
135   appcont.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (onOffHelper.Install (wifiNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0)));
136 
137   appcont.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (5.0));
138   appcont.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
139 
140   \textcolor{comment}{// For tracing}
141   wifiPhy.\hyperlink{classns3_1_1PcapHelperForDevice_a74866def9a881aa9d5c5be1225a26722}{EnablePcap} (\textcolor{stringliteral}{"nsclick-raw-wlan"}, wifiDevices);
142 
143   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (20.0));
144   Simulator::Run ();
145 
146   Simulator::Destroy ();
147   \textcolor{keywordflow}{return} 0;
148 \textcolor{preprocessor}{#else}
149   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Can't use ns-3-click without NSCLICK compiled in"});
150 \textcolor{preprocessor}{#endif}
151 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{nsclick-\/raw-\/wlan.\+cc@{nsclick-\/raw-\/wlan.\+cc}!Receive\+Packet@{Receive\+Packet}}
\index{Receive\+Packet@{Receive\+Packet}!nsclick-\/raw-\/wlan.\+cc@{nsclick-\/raw-\/wlan.\+cc}}
\subsubsection[{\texorpdfstring{Receive\+Packet(\+Ptr$<$ Socket $>$ socket)}{ReceivePacket(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Receive\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{nsclick-raw-wlan_8cc_a80dc0d980be124d8d5c4ee0b7943bfae}{}\label{nsclick-raw-wlan_8cc_a80dc0d980be124d8d5c4ee0b7943bfae}

\begin{DoxyCode}
40 \{
41   \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND} (\textcolor{stringliteral}{"Received one packet!"});
42 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 2


