\hypertarget{classns3_1_1TcpSocketSmallAcks}{}\section{ns3\+:\+:Tcp\+Socket\+Small\+Acks Class Reference}
\label{classns3_1_1TcpSocketSmallAcks}\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}


A T\+CP socket which sends A\+C\+Ks smaller than the segment received.  




{\ttfamily \#include $<$tcp-\/general-\/test.\+h$>$}



Inheritance diagram for ns3\+:\+:Tcp\+Socket\+Small\+Acks\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Tcp\+Socket\+Small\+Acks\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1TcpSocketSmallAcks_a75637ce40a78bbed084b5ac83ceb13f4}{Tcp\+Socket\+Small\+Acks} ()
\item 
\hyperlink{classns3_1_1TcpSocketSmallAcks_abf2305247f05ac4884f3c3f5ffa068ac}{Tcp\+Socket\+Small\+Acks} (const \hyperlink{classns3_1_1TcpSocketSmallAcks}{Tcp\+Socket\+Small\+Acks} \&other)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketSmallAcks_ada016a112c4f8b2f7502474a1df21d7d}{Set\+Bytes\+To\+Ack} (uint32\+\_\+t bytes)
\begin{DoxyCompactList}\small\item\em Set the bytes to be A\+C\+Ked. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1TcpSocketSmallAcks_a5cf28115e514e3a1421ddf2f8cb86de6}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1TcpSocketSmallAcks_aa1b40c84003225f76661534dfa82634b}{Send\+Empty\+Packet} (uint8\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em Send a empty packet that carries a flag, e.\+g., A\+CK. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} $>$ \hyperlink{classns3_1_1TcpSocketSmallAcks_a945f1256f9e850886f13746d8c703f36}{Fork} (void)
\begin{DoxyCompactList}\small\item\em Call Copy\+Object$<$$>$ to clone me. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{m\+\_\+bytes\+To\+Ack}
\begin{DoxyCompactList}\small\item\em Number of bytes to be A\+C\+Ked. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\+\_\+bytes\+Left\+To\+Be\+Acked}
\begin{DoxyCompactList}\small\item\em Number of bytes to be A\+C\+Ked left. \end{DoxyCompactList}\item 
\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\+\_\+last\+Acked\+Seq}
\begin{DoxyCompactList}\small\item\em Last sequence number A\+C\+Ked. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A T\+CP socket which sends A\+C\+Ks smaller than the segment received. 

Usually, a T\+CP socket which receives the sequence number \char`\"{}x\char`\"{} replies with an A\+CK to \char`\"{}x+1\char`\"{}. What happen if a malicious socket sends smaller A\+C\+Ks (e.\+g. two A\+C\+Ks, one for \char`\"{}x/2\char`\"{}, and the other for \char`\"{}x+1\char`\"{}) ? A T\+CP implementation should avoid to artificially increase the congestion window, thinking of having A\+C\+Ked 2 segments instead of 1.

Set the number of bytes that should be acked in each A\+CK packet with Set\+Bytes\+To\+Ack.

\begin{DoxySeeAlso}{See also}
\hyperlink{classTcpSlowStartAttackerTest}{Tcp\+Slow\+Start\+Attacker\+Test} 
\end{DoxySeeAlso}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!Tcp\+Socket\+Small\+Acks@{Tcp\+Socket\+Small\+Acks}}
\index{Tcp\+Socket\+Small\+Acks@{Tcp\+Socket\+Small\+Acks}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{Tcp\+Socket\+Small\+Acks()}{TcpSocketSmallAcks()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Tcp\+Socket\+Small\+Acks\+::\+Tcp\+Socket\+Small\+Acks (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_a75637ce40a78bbed084b5ac83ceb13f4}{}\label{classns3_1_1TcpSocketSmallAcks_a75637ce40a78bbed084b5ac83ceb13f4}

\begin{DoxyCode}
176     : \hyperlink{classns3_1_1TcpSocketMsgBase_a867bfe6808ac466eb5b3e6449b04eea1}{TcpSocketMsgBase} (),
177       \hyperlink{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{m\_bytesToAck} (125),
178       \hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked} (0),
179       \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\_lastAckedSeq} (1)
180   \{
181   \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!Tcp\+Socket\+Small\+Acks@{Tcp\+Socket\+Small\+Acks}}
\index{Tcp\+Socket\+Small\+Acks@{Tcp\+Socket\+Small\+Acks}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{Tcp\+Socket\+Small\+Acks(const Tcp\+Socket\+Small\+Acks \&other)}{TcpSocketSmallAcks(const TcpSocketSmallAcks &other)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Tcp\+Socket\+Small\+Acks\+::\+Tcp\+Socket\+Small\+Acks (
\begin{DoxyParamCaption}
\item[{const {\bf Tcp\+Socket\+Small\+Acks} \&}]{other}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_abf2305247f05ac4884f3c3f5ffa068ac}{}\label{classns3_1_1TcpSocketSmallAcks_abf2305247f05ac4884f3c3f5ffa068ac}


Constructor. 


\begin{DoxyParams}{Parameters}
{\em other} & The object to copy from. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
188     : \hyperlink{classns3_1_1TcpSocketMsgBase_a867bfe6808ac466eb5b3e6449b04eea1}{TcpSocketMsgBase} (other),
189       \hyperlink{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{m\_bytesToAck} (other.m\_bytesToAck),
190       \hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked} (other.m\_bytesLeftToBeAcked),
191       \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\_lastAckedSeq} (other.m\_lastAckedSeq)
192   \{
193   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!Fork@{Fork}}
\index{Fork@{Fork}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{Fork(void)}{Fork(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Tcp\+Socket\+Base} $>$ Tcp\+Socket\+Small\+Acks\+::\+Fork (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_a945f1256f9e850886f13746d8c703f36}{}\label{classns3_1_1TcpSocketSmallAcks_a945f1256f9e850886f13746d8c703f36}


Call Copy\+Object$<$$>$ to clone me. 

\begin{DoxyReturn}{Returns}
a copy of the socket 
\end{DoxyReturn}


Reimplemented from \hyperlink{classns3_1_1TcpSocketMsgBase_a58a2f5803ece6745c5d79d710d01f8ee}{ns3\+::\+Tcp\+Socket\+Msg\+Base}.


\begin{DoxyCode}
1203 \{
1204   \textcolor{keywordflow}{return} CopyObject<TcpSocketSmallAcks> (\textcolor{keyword}{this});
1205 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} Tcp\+Socket\+Small\+Acks\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_a5cf28115e514e3a1421ddf2f8cb86de6}{}\label{classns3_1_1TcpSocketSmallAcks_a5cf28115e514e3a1421ddf2f8cb86de6}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
1030 \{
1031   \textcolor{keyword}{static} \hyperlink{classns3_1_1TypeId}{TypeId} tid = \hyperlink{classns3_1_1TypeId}{TypeId} (\textcolor{stringliteral}{"ns3::TcpSocketSmallAcks"})
1032     .\hyperlink{classns3_1_1TypeId_abaaca67ab7d2471067e7c275df0f7309}{SetParent}<\hyperlink{classns3_1_1TcpSocketMsgBase}{TcpSocketMsgBase}> ()
1033     .SetGroupName (\textcolor{stringliteral}{"Internet"})
1034     .AddConstructor<\hyperlink{classns3_1_1TcpSocketSmallAcks}{TcpSocketSmallAcks}> ()
1035   ;
1036   \textcolor{keywordflow}{return} tid;
1037 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!Send\+Empty\+Packet@{Send\+Empty\+Packet}}
\index{Send\+Empty\+Packet@{Send\+Empty\+Packet}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{Send\+Empty\+Packet(uint8\+\_\+t flags)}{SendEmptyPacket(uint8_t flags)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Socket\+Small\+Acks\+::\+Send\+Empty\+Packet (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_aa1b40c84003225f76661534dfa82634b}{}\label{classns3_1_1TcpSocketSmallAcks_aa1b40c84003225f76661534dfa82634b}


Send a empty packet that carries a flag, e.\+g., A\+CK. 


\begin{DoxyParams}{Parameters}
{\em flags} & the packet\textquotesingle{}s flags \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{ns3\+::\+Tcp\+Socket\+Base}.


\begin{DoxyCode}
1048 \{
1049   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = Create<Packet> ();
1050   \hyperlink{classns3_1_1TcpHeader}{TcpHeader} header;
1051   \hyperlink{classns3_1_1SequenceNumber}{SequenceNumber32} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence};
1052 
1053   \textcolor{comment}{/*}
1054 \textcolor{comment}{   * Add tags for each socket option.}
1055 \textcolor{comment}{   * Note that currently the socket adds both IPv4 tag and IPv6 tag}
1056 \textcolor{comment}{   * if both options are set. Once the packet got to layer three, only}
1057 \textcolor{comment}{   * the corresponding tags will be read.}
1058 \textcolor{comment}{   */}
1059   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_a95bd4732074d3d26d4a6949fc3499ccb}{GetIpTos} ())
1060     \{
1061       \hyperlink{classns3_1_1SocketIpTosTag}{SocketIpTosTag} ipTosTag;
1062       ipTosTag.\hyperlink{classns3_1_1SocketIpTosTag_a9cd4bdabf70e52ebd36062461c743cd7}{SetTos} (\hyperlink{classns3_1_1Socket_a95bd4732074d3d26d4a6949fc3499ccb}{GetIpTos} ());
1063       p->\hyperlink{classns3_1_1Packet_a7400b8655852f5271c5957250d0141af}{AddPacketTag} (ipTosTag);
1064     \}
1065 
1066   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_a83858f6116bcdabecf1b63b37514ec8d}{IsManualIpv6Tclass} ())
1067     \{
1068       \hyperlink{classns3_1_1SocketIpv6TclassTag}{SocketIpv6TclassTag} ipTclassTag;
1069       ipTclassTag.\hyperlink{classns3_1_1SocketIpv6TclassTag_aee319e224e59778f2195f7b3819aa40f}{SetTclass} (\hyperlink{classns3_1_1Socket_aed62162f0b5f322b1fa23b7350c3c2ce}{GetIpv6Tclass} ());
1070       p->\hyperlink{classns3_1_1Packet_a7400b8655852f5271c5957250d0141af}{AddPacketTag} (ipTclassTag);
1071     \}
1072 
1073   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_afbbd0ecd7cda631cafc80eda33aa0b2c}{IsManualIpTtl} ())
1074     \{
1075       \hyperlink{classns3_1_1SocketIpTtlTag}{SocketIpTtlTag} ipTtlTag;
1076       ipTtlTag.\hyperlink{classns3_1_1SocketIpTtlTag_a48f236b4dde3533b9ab16372cf6c5237}{SetTtl} (\hyperlink{classns3_1_1Socket_adf6420d12b8a0b6a20e46c37fe48830d}{GetIpTtl} ());
1077       p->\hyperlink{classns3_1_1Packet_a7400b8655852f5271c5957250d0141af}{AddPacketTag} (ipTtlTag);
1078     \}
1079 
1080   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_af537e44bad2f67bffe7ef6c1c86c2459}{IsManualIpv6HopLimit} ())
1081     \{
1082       \hyperlink{classns3_1_1SocketIpv6HopLimitTag}{SocketIpv6HopLimitTag} ipHopLimitTag;
1083       ipHopLimitTag.\hyperlink{classns3_1_1SocketIpv6HopLimitTag_a788df60ac4c987e997e15ba8cb691b60}{SetHopLimit} (\hyperlink{classns3_1_1Socket_ad78033887757bda28f40f4ab1f0620d0}{GetIpv6HopLimit} ());
1084       p->\hyperlink{classns3_1_1Packet_a7400b8655852f5271c5957250d0141af}{AddPacketTag} (ipHopLimitTag);
1085     \}
1086 
1087   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0 && \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} == 0)
1088     \{
1089       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Failed to send empty packet due to null endpoint"});
1090       \textcolor{keywordflow}{return};
1091     \}
1092   \textcolor{keywordflow}{if} (flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN})
1093     \{
1094       flags |= \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK};
1095     \}
1096   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK} || 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING})
1097     \{
1098       ++\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
1099     \}
1100 
1101   \textcolor{keywordtype}{bool} hasSyn = flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN};
1102   \textcolor{keywordtype}{bool} hasFin = flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN};
1103   \textcolor{keywordtype}{bool} isAck = flags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK};
1104 
1105   header.SetFlags (flags);
1106   header.SetSequenceNumber (s);
1107 
1108   \textcolor{comment}{// Actual division in small acks.}
1109   \textcolor{keywordflow}{if} (hasSyn || hasFin)
1110     \{
1111       header.SetAckNumber (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ());
1112     \}
1113   \textcolor{keywordflow}{else}
1114     \{
1115       \hyperlink{classns3_1_1SequenceNumber}{SequenceNumber32} ackSeq;
1116 
1117       ackSeq = \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\_lastAckedSeq} + \hyperlink{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{m\_bytesToAck};
1118 
1119       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked} == 0 && \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () > 
      \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\_lastAckedSeq})
1120         \{
1121           \hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked} = \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ().GetValue () - 
      1 - \hyperlink{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{m\_bytesToAck};
1122         \}
1123       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked} > 0 && \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () > 
      \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\_lastAckedSeq})
1124         \{
1125           \hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked} -= \hyperlink{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{m\_bytesToAck};
1126         \}
1127 
1128       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Acking up to "} << ackSeq << \textcolor{stringliteral}{" remaining bytes: "} << 
      \hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked});
1129 
1130       header.SetAckNumber (ackSeq);
1131       \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\_lastAckedSeq} = ackSeq;
1132     \}
1133 
1134   \textcolor{comment}{// end of division in small acks}
1135 
1136   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
1137     \{
1138       header.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aab137f64770abf94f0b8a81217a0b106}{GetLocalPort} ());
1139       header.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0954ccf4be313b3a2992894ae2baf1c6}{GetPeerPort} ());
1140     \}
1141   \textcolor{keywordflow}{else}
1142     \{
1143       header.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a39a9fd4aa85a8ecbbf2d6c84d589080b}{GetLocalPort} ());
1144       header.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_ac200f6b424104280ec1e55a415ed96fd}{GetPeerPort} ());
1145     \}
1146   \hyperlink{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}{AddOptions} (header);
1147   header.SetWindowSize (\hyperlink{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{AdvertisedWindowSize} ());
1148 
1149   \textcolor{comment}{// RFC 6298, clause 2.4}
1150   \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} = \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (\hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetEstimate () + \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (\hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity}, 
      \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetVariation () * 4), \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto});
1151 
1152   \textcolor{keywordflow}{if} (hasSyn)
1153     \{
1154       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} == 0)
1155         \{ \textcolor{comment}{// No more connection retries, give up}
1156           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Connection failed."});
1157           \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->Reset (); \textcolor{comment}{//According to recommendation -> RFC 6298}
1158           \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
1159           \textcolor{keywordflow}{return};
1160         \}
1161       \textcolor{keywordflow}{else}
1162         \{ \textcolor{comment}{// Exponential backoff of connection time out}
1163           \textcolor{keywordtype}{int} backoffCount = 0x1 << (\hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries} - \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount});
1164           \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} = \hyperlink{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{m\_cnTimeout} * backoffCount;
1165           \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount}--;
1166         \}
1167     \}
1168   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
1169     \{
1170       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, header, \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_ae08283e26ace5880c3172ea5d803b6f8}{GetLocalAddress} (),
1171                          \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
1172     \}
1173   \textcolor{keywordflow}{else}
1174     \{
1175       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, header, \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a1972cd26240d42cd75f93e12d9182976}{GetLocalAddress} (),
1176                          \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
1177     \}
1178 
1179   \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{m\_txTrace} (p, header, \textcolor{keyword}{this});
1180 
1181   \textcolor{keywordflow}{if} (flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
1182     \{ \textcolor{comment}{// If sending an ACK, cancel the delay ACK as well}
1183       \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
1184       \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = 0;
1185     \}
1186   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a5c30c92e7c1c34b4e8505cc07ed71b02}{IsExpired} () && (hasSyn || hasFin) && !isAck )
1187     \{ \textcolor{comment}{// Retransmit SYN / SYN+ACK / FIN / FIN+ACK to guard against lost}
1188       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Schedule retransmission timeout at time "}
1189                     << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds () << \textcolor{stringliteral}{" to expire at time "}
1190                     << (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ()).GetSeconds ());
1191       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (\hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}, &
      \hyperlink{classns3_1_1TcpSocketSmallAcks_aa1b40c84003225f76661534dfa82634b}{TcpSocketSmallAcks::SendEmptyPacket}, \textcolor{keyword}{this}, flags);
1192     \}
1193 
1194   \textcolor{comment}{// send another ACK if bytes remain}
1195   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{m\_bytesLeftToBeAcked} > 0 && \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () > 
      \hyperlink{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{m\_lastAckedSeq})
1196     \{
1197       \hyperlink{classns3_1_1TcpSocketSmallAcks_aa1b40c84003225f76661534dfa82634b}{SendEmptyPacket} (flags);
1198     \}
1199 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!Set\+Bytes\+To\+Ack@{Set\+Bytes\+To\+Ack}}
\index{Set\+Bytes\+To\+Ack@{Set\+Bytes\+To\+Ack}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{Set\+Bytes\+To\+Ack(uint32\+\_\+t bytes)}{SetBytesToAck(uint32_t bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Small\+Acks\+::\+Set\+Bytes\+To\+Ack (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{bytes}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_ada016a112c4f8b2f7502474a1df21d7d}{}\label{classns3_1_1TcpSocketSmallAcks_ada016a112c4f8b2f7502474a1df21d7d}


Set the bytes to be A\+C\+Ked. 


\begin{DoxyParams}{Parameters}
{\em bytes} & The number of bytes. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
200   \{
201     \hyperlink{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{m\_bytesToAck} = bytes;
202   \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5




\subsection{Member Data Documentation}
\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!m\+\_\+bytes\+Left\+To\+Be\+Acked@{m\+\_\+bytes\+Left\+To\+Be\+Acked}}
\index{m\+\_\+bytes\+Left\+To\+Be\+Acked@{m\+\_\+bytes\+Left\+To\+Be\+Acked}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{m\+\_\+bytes\+Left\+To\+Be\+Acked}{m_bytesLeftToBeAcked}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Small\+Acks\+::m\+\_\+bytes\+Left\+To\+Be\+Acked\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}{}\label{classns3_1_1TcpSocketSmallAcks_ad2e2f67059d57638e853931260d60a77}


Number of bytes to be A\+C\+Ked left. 

\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!m\+\_\+bytes\+To\+Ack@{m\+\_\+bytes\+To\+Ack}}
\index{m\+\_\+bytes\+To\+Ack@{m\+\_\+bytes\+To\+Ack}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{m\+\_\+bytes\+To\+Ack}{m_bytesToAck}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Small\+Acks\+::m\+\_\+bytes\+To\+Ack\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}{}\label{classns3_1_1TcpSocketSmallAcks_a936e4af4cfc9c1f108511c65cfe675be}


Number of bytes to be A\+C\+Ked. 

\index{ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}!m\+\_\+last\+Acked\+Seq@{m\+\_\+last\+Acked\+Seq}}
\index{m\+\_\+last\+Acked\+Seq@{m\+\_\+last\+Acked\+Seq}!ns3\+::\+Tcp\+Socket\+Small\+Acks@{ns3\+::\+Tcp\+Socket\+Small\+Acks}}
\subsubsection[{\texorpdfstring{m\+\_\+last\+Acked\+Seq}{m_lastAckedSeq}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sequence\+Number32} ns3\+::\+Tcp\+Socket\+Small\+Acks\+::m\+\_\+last\+Acked\+Seq\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}{}\label{classns3_1_1TcpSocketSmallAcks_a7e45496712cf340a50b856f580a88561}


Last sequence number A\+C\+Ked. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{tcp-general-test_8h}{tcp-\/general-\/test.\+h}\item 
internet/test/\hyperlink{tcp-general-test_8cc}{tcp-\/general-\/test.\+cc}\end{DoxyCompactItemize}
