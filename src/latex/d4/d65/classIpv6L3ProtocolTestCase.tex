\hypertarget{classIpv6L3ProtocolTestCase}{}\section{Ipv6\+L3\+Protocol\+Test\+Case Class Reference}
\label{classIpv6L3ProtocolTestCase}\index{Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}}


I\+Pv6 Test.  




Inheritance diagram for Ipv6\+L3\+Protocol\+Test\+Case\+:
% FIG 0


Collaboration diagram for Ipv6\+L3\+Protocol\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classIpv6L3ProtocolTestCase_a3ab9dd63315a0827f199ed863ea311be}{Ipv6\+L3\+Protocol\+Test\+Case} ()
\item 
virtual \hyperlink{classIpv6L3ProtocolTestCase_aad4a4562846abcbf0e1cda35106039a9}{$\sim$\+Ipv6\+L3\+Protocol\+Test\+Case} ()
\item 
virtual void \hyperlink{classIpv6L3ProtocolTestCase_ac052c03e25689da8fed383146b988a7e}{Do\+Run} ()
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
I\+Pv6 Test. 

\subsection{Constructor \& Destructor Documentation}
\index{Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}!Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}}
\index{Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}!Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ipv6\+L3\+Protocol\+Test\+Case()}{Ipv6L3ProtocolTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Ipv6\+L3\+Protocol\+Test\+Case\+::\+Ipv6\+L3\+Protocol\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6L3ProtocolTestCase_a3ab9dd63315a0827f199ed863ea311be}{}\label{classIpv6L3ProtocolTestCase_a3ab9dd63315a0827f199ed863ea311be}

\begin{DoxyCode}
50                                                 :
51   \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Verify the IPv6 layer 3 protocol"})
52 \{
53 \}
\end{DoxyCode}
\index{Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}!````~Ipv6\+L3\+Protocol\+Test\+Case@{$\sim$\+Ipv6\+L3\+Protocol\+Test\+Case}}
\index{````~Ipv6\+L3\+Protocol\+Test\+Case@{$\sim$\+Ipv6\+L3\+Protocol\+Test\+Case}!Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Ipv6\+L3\+Protocol\+Test\+Case()}{~Ipv6L3ProtocolTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Ipv6\+L3\+Protocol\+Test\+Case\+::$\sim$\+Ipv6\+L3\+Protocol\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classIpv6L3ProtocolTestCase_aad4a4562846abcbf0e1cda35106039a9}{}\label{classIpv6L3ProtocolTestCase_aad4a4562846abcbf0e1cda35106039a9}

\begin{DoxyCode}
56 \{
57 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Ipv6\+L3\+Protocol\+Test\+Case@{Ipv6\+L3\+Protocol\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run()}{DoRun()}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+L3\+Protocol\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classIpv6L3ProtocolTestCase_ac052c03e25689da8fed383146b988a7e}{}\label{classIpv6L3ProtocolTestCase_ac052c03e25689da8fed383146b988a7e}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
61 \{
62   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} node = CreateObject<Node> ();
63   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6L3Protocol>} ipv6 = CreateObject<Ipv6L3Protocol> ();
64   \hyperlink{classns3_1_1Ptr}{Ptr<Icmpv6L4Protocol>} icmpv6 = CreateObject<Icmpv6L4Protocol> ();
65   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6Interface>} \textcolor{keyword}{interface }= \hyperlink{group__object_gad1d36559be10afa72c3656fd8598c1e2}{CreateObject}<
      \hyperlink{classns3_1_1Ipv6Interface}{Ipv6Interface}> ();
66   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6Interface>} interface2 = CreateObject<Ipv6Interface> ();
67   \hyperlink{classns3_1_1Ptr}{Ptr<SimpleNetDevice>} device = CreateObject<SimpleNetDevice> ();
68   \hyperlink{classns3_1_1Ptr}{Ptr<SimpleNetDevice>} device2 = CreateObject<SimpleNetDevice> ();
69   uint32\_t index = 0;
70 
71   \textcolor{comment}{/* init */}
72   icmpv6->SetAttribute (\textcolor{stringliteral}{"DAD"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
73   node->\hyperlink{classns3_1_1Object_a79dd435d300f3deca814553f561a2922}{AggregateObject} (ipv6);
74   node->\hyperlink{classns3_1_1Object_a79dd435d300f3deca814553f561a2922}{AggregateObject} (icmpv6);
75   ipv6->Insert (icmpv6);
76 
77   \textcolor{comment}{/* first real interface (loopback is also installed) */}
78   node->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (device);
79   interface->SetDevice (device);
80   interface->SetNode (node);
81   index = ipv6->AddIpv6Interface (interface);
82   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (index, 1,\textcolor{stringliteral}{"The index is not 1??"});
83 
84   \textcolor{comment}{/* second interface */}
85   node->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (device2);
86   interface2->SetDevice (device2);
87   interface2->SetNode (node);
88   index = ipv6->AddIpv6Interface (interface2);
89   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (index, 2, \textcolor{stringliteral}{"The index is not 2??"});
90 
91   \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ifaceAddr = interface->GetLinkLocalAddress ();
92   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (ifaceAddr.\hyperlink{classns3_1_1Ipv6InterfaceAddress_a80d4caacff72bddc3045a5929519e107}{GetAddress} ().
      \hyperlink{classns3_1_1Ipv6Address_a881c3e796e2afdbd49b2ec630ada1126}{IsLinkLocal} (), \textcolor{keyword}{true},
93                          \textcolor{stringliteral}{"Should be link local??"});
94 
95   interface->SetUp ();
96   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (interface->GetNAddresses (), 1,
97                          \textcolor{stringliteral}{"interface has always a link-local address"}); \textcolor{comment}{/* interface has always a link-local
       address */}
98 
99   interface2->SetUp ();
100 
101   \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ifaceAddr1 = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (
102       \textcolor{stringliteral}{"2001:1234:5678:9000::1"}, \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
103   interface->AddAddress (ifaceAddr1);
104   \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ifaceAddr2 = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (
105       \textcolor{stringliteral}{"2001:ffff:5678:9000::1"}, \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
106   interface->AddAddress (ifaceAddr2);
107 
108   \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ifaceAddr3 = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (
109       \textcolor{stringliteral}{"2001:ffff:5678:9001::2"}, \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
110   interface2->AddAddress (ifaceAddr3);
111 
112   uint32\_t num = interface->GetNAddresses ();
113   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 3, \textcolor{stringliteral}{"Number of addresses should be 3??"}); \textcolor{comment}{/* 2 global
       addresses + link-local ones */}
114 
115   num = interface2->GetNAddresses ();
116   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 2, \textcolor{stringliteral}{"1 global addresses + link-local ones"}); \textcolor{comment}{/* 1 global
       addresses + link-local ones */}
117 
118   interface->RemoveAddress (2);
119   num = interface->GetNAddresses ();
120   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 2, \textcolor{stringliteral}{"Number of addresses should be 2??"});
121 
122   \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} output = interface->\hyperlink{classns3_1_1Ipv6InterfaceAddress_a80d4caacff72bddc3045a5929519e107}{GetAddress} (1);
123   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (ifaceAddr1, output,
124                          \textcolor{stringliteral}{"Should be the interface address 1?"});
125 
126   index = ipv6->GetInterfaceForPrefix (\textcolor{stringliteral}{"2001:1234:5678:9000::0"},
127                                        \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
128   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (index, 1, \textcolor{stringliteral}{"We should get one address??"}); \textcolor{comment}{/* link-local
       address is always index 0 */}
129 
130   index = ipv6->GetInterfaceForAddress (\textcolor{stringliteral}{"2001:ffff:5678:9001::2"});
131   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (index, 2, \textcolor{stringliteral}{"Number of addresses should be 2??"});
132 
133   index = ipv6->GetInterfaceForAddress (\textcolor{stringliteral}{"2001:ffff:5678:9000::1"}); \textcolor{comment}{/* address we just remove */}
134   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (index, (uint32\_t) -1, \textcolor{stringliteral}{"Address should not be found??"});
135 
136   \textcolor{comment}{/* Test Ipv6Interface()::RemoveAddress(address) */}
137   output = interface->RemoveAddress (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:1234:5678:9000::1"}));
138   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (ifaceAddr1, output, \textcolor{stringliteral}{"Wrong Interface Address Removed??"});
139   num = interface->GetNAddresses ();
140   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 1, \textcolor{stringliteral}{"Number of addresses should be 1??"});
141   
142   \textcolor{comment}{/* Remove a non-existent Address */}
143   output = interface->RemoveAddress (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:1234:5678:9000::1"}));
144   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (), output, 
145                          \textcolor{stringliteral}{"Removed non-existent address??"});
146   num = interface->GetNAddresses ();
147   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 1, \textcolor{stringliteral}{"Number of addresses should be 1??"});
148 
149   \textcolor{comment}{/* Remove a loopback Address */}
150   output = interface->RemoveAddress (Ipv6Address::GetLoopback ());
151   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (), output, 
152                          \textcolor{stringliteral}{"Able to remove loopback address??"});
153   num = interface->GetNAddresses ();
154   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 1, \textcolor{stringliteral}{"Number of addresses should be 1??"});
155 
156   \textcolor{comment}{/* Test Ipv6Address::RemoveAddress(index, addresss) */}
157   index = ipv6->GetInterfaceForAddress (\textcolor{stringliteral}{"2001:ffff:5678:9001::2"});
158   \textcolor{keywordtype}{bool} result = ipv6->RemoveAddress (index, \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} 
159                                      (\textcolor{stringliteral}{"2001:ffff:5678:9001::2"}));
160   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, \textcolor{keyword}{true}, \textcolor{stringliteral}{"Unable to remove Address??"});
161   num = interface2->GetNAddresses ();
162   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 1, \textcolor{stringliteral}{"Number of addresses should be 1??"});
163 
164   \textcolor{comment}{/* Remove a non-existent Address */}
165   result = ipv6->RemoveAddress (index, \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address}  
166                                 (\textcolor{stringliteral}{"2001:ffff:5678:9001::2"}));
167   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, \textcolor{keyword}{false}, \textcolor{stringliteral}{"Removed Non-existent address??"});
168   num = interface2->GetNAddresses ();
169   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 1, \textcolor{stringliteral}{"Number of addresses should be 1??"});
170  
171   \textcolor{comment}{/* Remove a loopback Address */}
172   result = ipv6->RemoveAddress (index, Ipv6Address::GetLoopback ());
173   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, \textcolor{keyword}{false}, \textcolor{stringliteral}{"Able to remove loopback address??"});
174   num = interface2->GetNAddresses ();
175   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (num, 1, \textcolor{stringliteral}{"Number of addresses should be 1??"});
176 
177   Simulator::Destroy ();
178 \} \textcolor{comment}{//end DoRun}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{ipv6-test_8cc}{ipv6-\/test.\+cc}\end{DoxyCompactItemize}
