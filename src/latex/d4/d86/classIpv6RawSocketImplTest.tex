\hypertarget{classIpv6RawSocketImplTest}{}\section{Ipv6\+Raw\+Socket\+Impl\+Test Class Reference}
\label{classIpv6RawSocketImplTest}\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}


I\+Pv6 R\+AW Socket Test.  




Inheritance diagram for Ipv6\+Raw\+Socket\+Impl\+Test\+:
% FIG 0


Collaboration diagram for Ipv6\+Raw\+Socket\+Impl\+Test\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classIpv6RawSocketImplTest_a38877abe88d646fe0c8fd155a481049c}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
\hyperlink{classIpv6RawSocketImplTest_aabb80f5aadc451342228357cfbce5d15}{Ipv6\+Raw\+Socket\+Impl\+Test} ()
\item 
void \hyperlink{classIpv6RawSocketImplTest_abf0a788efa750b5d930cc243765680fb}{Receive\+Packet} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1Address}{Address} \&\hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from})
\begin{DoxyCompactList}\small\item\em Receive data. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6RawSocketImplTest_a679afb66b4c30f78c1b7dd691c8ba5f1}{Receive\+Packet2} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1Address}{Address} \&\hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from})
\begin{DoxyCompactList}\small\item\em Receive data. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6RawSocketImplTest_ab85b8a9527dd2f7653cf5431620ff52d}{Receive\+Pkt} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Receive data. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6RawSocketImplTest_a73518b969e0e8a02bdc0bdd8edb07842}{Receive\+Pkt2} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Receive data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classIpv6RawSocketImplTest_a8740040a2cbd85d22d3bcfd2f68f9215}{Do\+Send\+Data} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket, std\+::string to)
\begin{DoxyCompactList}\small\item\em Send data. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6RawSocketImplTest_adc52ab615ef78fee05ac8783d94ce799}{Send\+Data} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket, std\+::string to)
\begin{DoxyCompactList}\small\item\em Send data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\+\_\+received\+Packet}
\begin{DoxyCompactList}\small\item\em Received packet (1). \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\+\_\+received\+Packet2}
\begin{DoxyCompactList}\small\item\em Received packet (2). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
I\+Pv6 R\+AW Socket Test. 

\subsection{Constructor \& Destructor Documentation}
\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Ipv6\+Raw\+Socket\+Impl\+Test()}{Ipv6RawSocketImplTest()}}]{\setlength{\rightskip}{0pt plus 5cm}Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Ipv6\+Raw\+Socket\+Impl\+Test (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6RawSocketImplTest_aabb80f5aadc451342228357cfbce5d15}{}\label{classIpv6RawSocketImplTest_aabb80f5aadc451342228357cfbce5d15}

\begin{DoxyCode}
111   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Ipv6 Raw socket implementation"}) 
112 \{
113 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classIpv6RawSocketImplTest_a38877abe88d646fe0c8fd155a481049c}{}\label{classIpv6RawSocketImplTest_a38877abe88d646fe0c8fd155a481049c}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
168 \{
169   \textcolor{comment}{// Create topology}
170 
171   \textcolor{comment}{// Receiver Node}
172   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} rxNode = CreateObject<Node> ();
173   \textcolor{comment}{// Sender Node}
174   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} txNode = CreateObject<Node> ();
175 
176   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes} (rxNode, txNode);
177 
178   \hyperlink{classns3_1_1SimpleNetDeviceHelper}{SimpleNetDeviceHelper} helperChannel1;
179   helperChannel1.\hyperlink{classns3_1_1SimpleNetDeviceHelper_a474460ba6942d4933f443a97df7d4716}{SetNetDevicePointToPointMode} (\textcolor{keyword}{true});
180   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} net1 = helperChannel1.\hyperlink{classns3_1_1SimpleNetDeviceHelper_a35bed9cee32d306362d3e24dfeef4513}{Install} (
      \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes});
181 
182   \hyperlink{classns3_1_1SimpleNetDeviceHelper}{SimpleNetDeviceHelper} helperChannel2;
183   helperChannel2.\hyperlink{classns3_1_1SimpleNetDeviceHelper_a474460ba6942d4933f443a97df7d4716}{SetNetDevicePointToPointMode} (\textcolor{keyword}{true});
184   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} net2 = helperChannel2.\hyperlink{classns3_1_1SimpleNetDeviceHelper_a35bed9cee32d306362d3e24dfeef4513}{Install} (
      \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes});
185 
186   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internetv6;
187   internetv6.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (\hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes});
188 
189   txNode->GetObject<\hyperlink{classns3_1_1Icmpv6L4Protocol}{Icmpv6L4Protocol}> ()->SetAttribute (\textcolor{stringliteral}{"DAD"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
190   rxNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Icmpv6L4Protocol}{Icmpv6L4Protocol}> ()->SetAttribute (\textcolor{stringliteral}{"DAD"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
191 
192   \hyperlink{classns3_1_1Ipv6AddressHelper}{Ipv6AddressHelper} ipv6helper;
193   \hyperlink{classns3_1_1Ipv6InterfaceContainer}{Ipv6InterfaceContainer} iic1 = ipv6helper.AssignWithoutAddress (net1);
194   \hyperlink{classns3_1_1Ipv6InterfaceContainer}{Ipv6InterfaceContainer} iic2 = ipv6helper.AssignWithoutAddress (net2);
195 
196   \hyperlink{classns3_1_1Ptr}{Ptr<NetDevice>} device;
197   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6>} ipv6;
198   int32\_t ifIndex;
199   \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ipv6Addr;
200 
201   ipv6 = rxNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv6}{Ipv6}> ();
202   device = net1.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0);
203   ifIndex = ipv6->\hyperlink{classns3_1_1Ipv6_a3337dc6ce66612b0fa9b57f7f0338745}{GetInterfaceForDevice} (device);
204   ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:db8::1"}), 
      \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
205   ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (ifIndex, ipv6Addr);
206 
207   device = net2.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0);
208   ifIndex = ipv6->\hyperlink{classns3_1_1Ipv6_a3337dc6ce66612b0fa9b57f7f0338745}{GetInterfaceForDevice} (device);
209   ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:db8:1::3"}), 
      \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
210   ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (ifIndex, ipv6Addr);
211 
212   ipv6 = txNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv6}{Ipv6}> ();
213   device = net1.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1);
214   ifIndex = ipv6->\hyperlink{classns3_1_1Ipv6_a3337dc6ce66612b0fa9b57f7f0338745}{GetInterfaceForDevice} (device);
215   ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:db8::2"}), 
      \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
216   ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (ifIndex, ipv6Addr);
217 
218   device = net2.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1);
219   ifIndex = ipv6->\hyperlink{classns3_1_1Ipv6_a3337dc6ce66612b0fa9b57f7f0338745}{GetInterfaceForDevice} (device);
220   ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:db8:1::4"}), 
      \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
221   ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (ifIndex, ipv6Addr);
222 
223   \textcolor{comment}{// Create the Ipv6 Raw sockets}
224   \hyperlink{classns3_1_1Ptr}{Ptr<SocketFactory>} rxSocketFactory = rxNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1Ipv6RawSocketFactory}{Ipv6RawSocketFactory}> ();
225   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} rxSocket = rxSocketFactory->\hyperlink{classns3_1_1SocketFactory_a97351e6e7860503a4912042530449f62}{CreateSocket} ();
226   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (rxSocket->Bind (\hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (
      Ipv6Address::GetAny (), 0)), 0, \textcolor{stringliteral}{"trivial"});
227   rxSocket->SetAttribute (\textcolor{stringliteral}{"Protocol"}, UintegerValue (Ipv6Header::IPV6\_ICMPV6));
228   rxSocket->SetRecvCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classIpv6RawSocketImplTest_ab85b8a9527dd2f7653cf5431620ff52d}{Ipv6RawSocketImplTest::ReceivePkt}, \textcolor{keyword}{this}));
229 
230   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} rxSocket2 = rxSocketFactory->\hyperlink{classns3_1_1SocketFactory_a97351e6e7860503a4912042530449f62}{CreateSocket} ();
231   rxSocket2->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classIpv6RawSocketImplTest_a73518b969e0e8a02bdc0bdd8edb07842}{Ipv6RawSocketImplTest::ReceivePkt2}, \textcolor{keyword}{this}));
232   rxSocket2->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Protocol"}, UintegerValue (Ipv6Header::IPV6\_ICMPV6));
233   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (rxSocket2->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (
      \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:db8:1::3"}), 0)), 0, \textcolor{stringliteral}{"trivial"});
234 
235   \hyperlink{classns3_1_1Ptr}{Ptr<SocketFactory>} txSocketFactory = txNode->GetObject<
      \hyperlink{classns3_1_1Ipv6RawSocketFactory}{Ipv6RawSocketFactory}> ();
236   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} txSocket = txSocketFactory->\hyperlink{classns3_1_1Socket_ad448a62bb50ad3dbac59c879a885a8d2}{CreateSocket} ();
237   txSocket->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Protocol"}, UintegerValue (Ipv6Header::IPV6\_ICMPV6));
238 
239   \textcolor{comment}{// ------ Now the tests ------------}
240 
241   \textcolor{comment}{// Unicast test}
242   \hyperlink{classIpv6RawSocketImplTest_adc52ab615ef78fee05ac8783d94ce799}{SendData} (txSocket, \textcolor{stringliteral}{"2001:db8::1"});
243   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket}->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} (), 163, \textcolor{stringliteral}{"recv: 2001:db8::1"});
244   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2}->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} (), 0, \textcolor{stringliteral}{"second interface should not receive it"});
245 
246   \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket}->\hyperlink{classns3_1_1Packet_a083f54c9db31aeff30551a9e20fcda42}{RemoveAllByteTags} ();
247   \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2}->\hyperlink{classns3_1_1Packet_a083f54c9db31aeff30551a9e20fcda42}{RemoveAllByteTags} ();
248 
249   \textcolor{comment}{// Simple Link-local multicast test}
250   txSocket->Bind (\hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:db8::2"}), 0));
251   \hyperlink{classIpv6RawSocketImplTest_adc52ab615ef78fee05ac8783d94ce799}{SendData} (txSocket, \textcolor{stringliteral}{"ff02::1"});
252   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket}->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} (), 163, \textcolor{stringliteral}{"recv: ff02::1"});
253   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2}->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} (), 0, \textcolor{stringliteral}{"second socket should not receive it (it is bound specifically to the second
       interface's address"});
254 
255   \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket}->\hyperlink{classns3_1_1Packet_a083f54c9db31aeff30551a9e20fcda42}{RemoveAllByteTags} ();
256   \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2}->\hyperlink{classns3_1_1Packet_a083f54c9db31aeff30551a9e20fcda42}{RemoveAllByteTags} ();
257 
258   \textcolor{comment}{// Broadcast test with multiple receiving sockets}
259 
260   \textcolor{comment}{// When receiving broadcast packets, all sockets sockets bound to}
261   \textcolor{comment}{// the address/port should receive a copy of the same packet -- if}
262   \textcolor{comment}{// the socket address matches.}
263   rxSocket2->\hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose} ();
264   rxSocket2 = rxSocketFactory->\hyperlink{classns3_1_1SocketFactory_a97351e6e7860503a4912042530449f62}{CreateSocket} ();
265   rxSocket2->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classIpv6RawSocketImplTest_a73518b969e0e8a02bdc0bdd8edb07842}{Ipv6RawSocketImplTest::ReceivePkt2}, \textcolor{keyword}{this}));
266   rxSocket2->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"Protocol"}, UintegerValue (Ipv6Header::IPV6\_ICMPV6));
267   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (rxSocket2->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (
      \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (Ipv6Address::GetAny (), 0)), 0, \textcolor{stringliteral}{"trivial"});
268 
269   \hyperlink{classIpv6RawSocketImplTest_adc52ab615ef78fee05ac8783d94ce799}{SendData} (txSocket, \textcolor{stringliteral}{"ff02::1"});
270   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket}->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} (), 163, \textcolor{stringliteral}{"recv: ff02::1"});
271   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (\hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2}->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} (), 163, \textcolor{stringliteral}{"recv: ff02::1"});
272 
273   \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket} = 0;
274   \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2} = 0;
275 
276   \textcolor{comment}{// Simple getpeername tests}
277 
278   \hyperlink{classns3_1_1Address}{Address} peerAddress;
279   \textcolor{keywordtype}{int} err = txSocket->GetPeerName (peerAddress);
280   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (err, -1, \textcolor{stringliteral}{"socket GetPeerName() should fail when socket is not
       connected"});
281   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (txSocket->GetErrno (), Socket::ERROR\_NOTCONN, \textcolor{stringliteral}{"socket error
       code should be ERROR\_NOTCONN"});
282 
283   \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} peer (\textcolor{stringliteral}{"2001:db8::1"}, 1234);
284   err = txSocket->Connect (peer);
285   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (err, 0, \textcolor{stringliteral}{"socket Connect() should succeed"});
286 
287   err = txSocket->GetPeerName (peerAddress);
288   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (err, 0, \textcolor{stringliteral}{"socket GetPeerName() should succeed when socket is
       connected"});
289   peer.SetPort (0);
290   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (peerAddress, peer, \textcolor{stringliteral}{"address from socket GetPeerName() should
       equal the connected address"});
291 
292   Simulator::Destroy ();
293 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Do\+Send\+Data@{Do\+Send\+Data}}
\index{Do\+Send\+Data@{Do\+Send\+Data}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Do\+Send\+Data(\+Ptr$<$ Socket $>$ socket, std\+::string to)}{DoSendData(Ptr< Socket > socket, std::string to)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Do\+Send\+Data (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket, }
\item[{std\+::string}]{to}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6RawSocketImplTest_a8740040a2cbd85d22d3bcfd2f68f9215}{}\label{classIpv6RawSocketImplTest_a8740040a2cbd85d22d3bcfd2f68f9215}


Send data. 


\begin{DoxyParams}{Parameters}
{\em socket} & The sending socket. \\
\hline
{\em to} & Destination address. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
150 \{
151   \hyperlink{classns3_1_1Address}{Address} realTo = \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (to.c\_str ()), 0);
152   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (socket->\hyperlink{classns3_1_1Socket_af898fce6a58e0dbba23c1c6de1d4220e}{SendTo} (Create<Packet> (123), 0, realTo),
153                          123, to);
154 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Receive\+Packet@{Receive\+Packet}}
\index{Receive\+Packet@{Receive\+Packet}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Receive\+Packet(\+Ptr$<$ Socket $>$ socket, Ptr$<$ Packet $>$ packet, const Address \&from)}{ReceivePacket(Ptr< Socket > socket, Ptr< Packet > packet, const Address &from)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Receive\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket, }
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Address} \&}]{from}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6RawSocketImplTest_abf0a788efa750b5d930cc243765680fb}{}\label{classIpv6RawSocketImplTest_abf0a788efa750b5d930cc243765680fb}


Receive data. 


\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
{\em packet} & The received packet. \\
\hline
{\em from} & The sender. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
116 \{
117   \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket} = packet;
118 \}
\end{DoxyCode}
\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Receive\+Packet2@{Receive\+Packet2}}
\index{Receive\+Packet2@{Receive\+Packet2}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Receive\+Packet2(\+Ptr$<$ Socket $>$ socket, Ptr$<$ Packet $>$ packet, const Address \&from)}{ReceivePacket2(Ptr< Socket > socket, Ptr< Packet > packet, const Address &from)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Receive\+Packet2 (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket, }
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Address} \&}]{from}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6RawSocketImplTest_a679afb66b4c30f78c1b7dd691c8ba5f1}{}\label{classIpv6RawSocketImplTest_a679afb66b4c30f78c1b7dd691c8ba5f1}


Receive data. 


\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
{\em packet} & The received packet. \\
\hline
{\em from} & The sender. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
121 \{
122   \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2} = packet;
123 \}
\end{DoxyCode}
\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Receive\+Pkt@{Receive\+Pkt}}
\index{Receive\+Pkt@{Receive\+Pkt}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Receive\+Pkt(\+Ptr$<$ Socket $>$ socket)}{ReceivePkt(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Receive\+Pkt (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6RawSocketImplTest_ab85b8a9527dd2f7653cf5431620ff52d}{}\label{classIpv6RawSocketImplTest_ab85b8a9527dd2f7653cf5431620ff52d}


Receive data. 


\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
126 \{
127   uint32\_t availableData;
128   availableData = socket->\hyperlink{classns3_1_1Socket_ad35d8931e53ae0754ee864acb1cecd0e}{GetRxAvailable} ();
129   \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket} = socket->\hyperlink{classns3_1_1Socket_a8949b1f844aae563446f2f4c5be8827a}{Recv} (2, MSG\_PEEK);
130   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () == 2);
131   \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket} = socket->\hyperlink{classns3_1_1Socket_a8949b1f844aae563446f2f4c5be8827a}{Recv} (
      \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::numeric\_limits<uint32\_t>::max} (), 0);
132   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (availableData == m\_receivedPacket->GetSize ());
133 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Receive\+Pkt2@{Receive\+Pkt2}}
\index{Receive\+Pkt2@{Receive\+Pkt2}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Receive\+Pkt2(\+Ptr$<$ Socket $>$ socket)}{ReceivePkt2(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Receive\+Pkt2 (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6RawSocketImplTest_a73518b969e0e8a02bdc0bdd8edb07842}{}\label{classIpv6RawSocketImplTest_a73518b969e0e8a02bdc0bdd8edb07842}


Receive data. 


\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
136 \{
137   uint32\_t availableData;
138   \hyperlink{classns3_1_1Address}{Address} addr;
139   availableData = socket->\hyperlink{classns3_1_1Socket_ad35d8931e53ae0754ee864acb1cecd0e}{GetRxAvailable} ();
140   \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2} = socket->\hyperlink{classns3_1_1Socket_a8949b1f844aae563446f2f4c5be8827a}{Recv} (2, MSG\_PEEK);
141   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () == 2);
142   \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2} = socket->\hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{RecvFrom} (
      \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::numeric\_limits<uint32\_t>::max} (), 0, addr);
143   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (availableData == m\_receivedPacket2->GetSize ());
144   \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} v6addr = Inet6SocketAddress::ConvertFrom (addr);
145   \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (v6addr.GetIpv6 (), \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:db8::2"}), \textcolor{stringliteral}{"
      recvfrom"});
146 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!Send\+Data@{Send\+Data}}
\index{Send\+Data@{Send\+Data}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{Send\+Data(\+Ptr$<$ Socket $>$ socket, std\+::string to)}{SendData(Ptr< Socket > socket, std::string to)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Raw\+Socket\+Impl\+Test\+::\+Send\+Data (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket, }
\item[{std\+::string}]{to}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6RawSocketImplTest_adc52ab615ef78fee05ac8783d94ce799}{}\label{classIpv6RawSocketImplTest_adc52ab615ef78fee05ac8783d94ce799}


Send data. 


\begin{DoxyParams}{Parameters}
{\em socket} & The sending socket. \\
\hline
{\em to} & Destination address. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
158 \{
159   \hyperlink{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{m\_receivedPacket} = Create<Packet> ();
160   \hyperlink{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{m\_receivedPacket2} = Create<Packet> ();
161   Simulator::ScheduleWithContext (socket->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), 
      \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
162                                   &\hyperlink{classIpv6RawSocketImplTest_a8740040a2cbd85d22d3bcfd2f68f9215}{Ipv6RawSocketImplTest::DoSendData}, \textcolor{keyword}{this}
      , socket, to);
163   Simulator::Run ();
164 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10




\subsection{Member Data Documentation}
\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!m\+\_\+received\+Packet@{m\+\_\+received\+Packet}}
\index{m\+\_\+received\+Packet@{m\+\_\+received\+Packet}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+received\+Packet}{m_receivedPacket}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Ipv6\+Raw\+Socket\+Impl\+Test\+::m\+\_\+received\+Packet\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}{}\label{classIpv6RawSocketImplTest_a57057bfb5f48de92165d7c3dfb8ff7ea}


Received packet (1). 

\index{Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}!m\+\_\+received\+Packet2@{m\+\_\+received\+Packet2}}
\index{m\+\_\+received\+Packet2@{m\+\_\+received\+Packet2}!Ipv6\+Raw\+Socket\+Impl\+Test@{Ipv6\+Raw\+Socket\+Impl\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+received\+Packet2}{m_receivedPacket2}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Ipv6\+Raw\+Socket\+Impl\+Test\+::m\+\_\+received\+Packet2\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}{}\label{classIpv6RawSocketImplTest_a1b23c24c9271e6874968546857829676}


Received packet (2). 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{ipv6-raw-test_8cc}{ipv6-\/raw-\/test.\+cc}\end{DoxyCompactItemize}
