\hypertarget{classNs3TcpStateTestCase}{}\section{Ns3\+Tcp\+State\+Test\+Case Class Reference}
\label{classNs3TcpStateTestCase}\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}


Inheritance diagram for Ns3\+Tcp\+State\+Test\+Case\+:
% FIG 0


Collaboration diagram for Ns3\+Tcp\+State\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classNs3TcpStateTestCase_a53bef084935ac68e6ad79bbfcfd23b43}{Ns3\+Tcp\+State\+Test\+Case} ()
\item 
\hyperlink{classNs3TcpStateTestCase_a42b399bcfe622283ce02556f7a69f786}{Ns3\+Tcp\+State\+Test\+Case} (uint32\+\_\+t test\+Case)
\item 
virtual \hyperlink{classNs3TcpStateTestCase_a8a16a1d79df85cb99dbcd157aeb62245}{$\sim$\+Ns3\+Tcp\+State\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classNs3TcpStateTestCase_ab40bcdfe18d73d1d52edf573894ce112}{Do\+Setup} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classNs3TcpStateTestCase_a62dd7855d89e540bf08e8ac2e9febf9f}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classNs3TcpStateTestCase_a80c9b357d0d42b443efe4feb204c9846}{Do\+Teardown} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classNs3TcpStateTestCase_a35f15c824c1f3ac84ad6e0b1a984a39d}{Ipv4\+L3\+Tx} (std\+::string context, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4}{Ipv4} $>$ ipv4, uint32\+\_\+t interface)
\item 
void \hyperlink{classNs3TcpStateTestCase_a89479df985ad5aba35cc35cbcf8feefe}{Ipv4\+L3\+Rx} (std\+::string context, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4}{Ipv4} $>$ ipv4, uint32\+\_\+t interface)
\item 
void \hyperlink{classNs3TcpStateTestCase_ab52f727ef7454eae1f4a6a5a491c019a}{Write\+Until\+Buffer\+Full} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ local\+Socket, uint32\+\_\+t tx\+Space)
\item 
void \hyperlink{classNs3TcpStateTestCase_a27240502909a83e4ca4895a96986ea98}{Start\+Flow} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ local\+Socket, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} serv\+Address, uint16\+\_\+t serv\+Port)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}{m\+\_\+pcap\+Filename}
\item 
\hyperlink{classns3_1_1PcapFile}{Pcap\+File} \hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\+\_\+pcap\+File}
\item 
uint32\+\_\+t \hyperlink{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{m\+\_\+test\+Case}
\item 
uint32\+\_\+t \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\+\_\+total\+Tx\+Bytes}
\item 
uint32\+\_\+t \hyperlink{classNs3TcpStateTestCase_a3d9f4df7a47644ec378929c7ed936fbd}{m\+\_\+current\+Tx\+Bytes}
\item 
bool \hyperlink{classNs3TcpStateTestCase_a0d2e59069324c4c41e805c543a8f1255}{m\+\_\+write\+Vectors}
\item 
bool \hyperlink{classNs3TcpStateTestCase_aebae71fa01360a4e38a656828d5bd466}{m\+\_\+write\+Results}
\item 
bool \hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\+\_\+write\+Logging}
\item 
bool \hyperlink{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{m\+\_\+need\+To\+Close}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ns3\+Tcp\+State\+Test\+Case()}{Ns3TcpStateTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Ns3\+Tcp\+State\+Test\+Case\+::\+Ns3\+Tcp\+State\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classNs3TcpStateTestCase_a53bef084935ac68e6ad79bbfcfd23b43}{}\label{classNs3TcpStateTestCase_a53bef084935ac68e6ad79bbfcfd23b43}

\begin{DoxyCode}
103   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check the operation of the TCP state machine for several cases"}),
104     \hyperlink{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{m\_testCase} (0),
105     \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} (20000),
106     \hyperlink{classNs3TcpStateTestCase_a3d9f4df7a47644ec378929c7ed936fbd}{m\_currentTxBytes} (0),
107     \hyperlink{classNs3TcpStateTestCase_a0d2e59069324c4c41e805c543a8f1255}{m\_writeVectors} (\hyperlink{ns3tcp-state-test-suite_8cc_a6829179e1fbdbc03f407d65a63c07153}{WRITE\_VECTORS}),
108     \hyperlink{classNs3TcpStateTestCase_aebae71fa01360a4e38a656828d5bd466}{m\_writeResults} (\hyperlink{ns3tcp-state-test-suite_8cc_a9ba71edaadfde927e9912e6b37a37f39}{WRITE\_PCAP}),
109     \hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\_writeLogging} (\hyperlink{ns3tcp-state-test-suite_8cc_ad6baebe9f475ef91ab29a12e30e30e7b}{WRITE\_LOGGING}),
110     \hyperlink{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{m\_needToClose} (\textcolor{keyword}{true})
111 \{
112 \}
\end{DoxyCode}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ns3\+Tcp\+State\+Test\+Case(uint32\+\_\+t test\+Case)}{Ns3TcpStateTestCase(uint32_t testCase)}}]{\setlength{\rightskip}{0pt plus 5cm}Ns3\+Tcp\+State\+Test\+Case\+::\+Ns3\+Tcp\+State\+Test\+Case (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{test\+Case}
\end{DoxyParamCaption}
)}\hypertarget{classNs3TcpStateTestCase_a42b399bcfe622283ce02556f7a69f786}{}\label{classNs3TcpStateTestCase_a42b399bcfe622283ce02556f7a69f786}

\begin{DoxyCode}
115   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check the operation of the TCP state machine for several cases"}),
116     \hyperlink{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{m\_testCase} (testCase),
117     \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} (20000),
118     \hyperlink{classNs3TcpStateTestCase_a3d9f4df7a47644ec378929c7ed936fbd}{m\_currentTxBytes} (0),
119     \hyperlink{classNs3TcpStateTestCase_a0d2e59069324c4c41e805c543a8f1255}{m\_writeVectors} (\hyperlink{ns3tcp-state-test-suite_8cc_a6829179e1fbdbc03f407d65a63c07153}{WRITE\_VECTORS}),
120     \hyperlink{classNs3TcpStateTestCase_aebae71fa01360a4e38a656828d5bd466}{m\_writeResults} (\hyperlink{ns3tcp-state-test-suite_8cc_a9ba71edaadfde927e9912e6b37a37f39}{WRITE\_PCAP}),
121     \hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\_writeLogging} (\hyperlink{ns3tcp-state-test-suite_8cc_ad6baebe9f475ef91ab29a12e30e30e7b}{WRITE\_LOGGING}),
122     \hyperlink{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{m\_needToClose} (\textcolor{keyword}{true})
123 \{
124 \}
\end{DoxyCode}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!````~Ns3\+Tcp\+State\+Test\+Case@{$\sim$\+Ns3\+Tcp\+State\+Test\+Case}}
\index{````~Ns3\+Tcp\+State\+Test\+Case@{$\sim$\+Ns3\+Tcp\+State\+Test\+Case}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Ns3\+Tcp\+State\+Test\+Case()}{~Ns3TcpStateTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual Ns3\+Tcp\+State\+Test\+Case\+::$\sim$\+Ns3\+Tcp\+State\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpStateTestCase_a8a16a1d79df85cb99dbcd157aeb62245}{}\label{classNs3TcpStateTestCase_a8a16a1d79df85cb99dbcd157aeb62245}

\begin{DoxyCode}
75   \{
76   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+State\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpStateTestCase_a62dd7855d89e540bf08e8ac2e9febf9f}{}\label{classNs3TcpStateTestCase_a62dd7855d89e540bf08e8ac2e9febf9f}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
298 \{
299   \textcolor{comment}{// Network topology}
300   \textcolor{comment}{//}
301   \textcolor{comment}{//           10Mb/s, 0.1ms      10Mb/s, 0.1ms}
302   \textcolor{comment}{//       n0-----------------n1-----------------n2}
303 
304   std::string tcpModel (\textcolor{stringliteral}{"ns3::TcpNewReno"});
305 
306   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocketBase::Sack"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
307   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpL4Protocol::SocketType"}, StringValue (tcpModel));
308   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocket::SegmentSize"}, UintegerValue (1000));
309   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocket::DelAckCount"}, UintegerValue (1));
310   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::QueueBase::MaxPackets"}, UintegerValue (20));
311   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TcpSocketBase::Timestamp"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
312 
313   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\_writeLogging})
314     \{
315       \hyperlink{namespacens3_aef610a7dcaaa6c20499283526b538582}{LogComponentEnableAll} (\hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba0dd332264f60317e9a365095e80037d1}{LOG\_PREFIX\_FUNC});
316       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"ErrorModel"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbabc85ae851e992c4d8577705c712061ef}{LOG\_LEVEL\_DEBUG});
317       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"Ns3TcpStateTest"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbabc85ae851e992c4d8577705c712061ef}{LOG\_LEVEL\_DEBUG});
318       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"TcpCongestionOps"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbae36aedc880de94fd5a5b53bb9fe65628}{LOG\_LEVEL\_INFO});
319       \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"TcpSocketBase"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbae36aedc880de94fd5a5b53bb9fe65628}{LOG\_LEVEL\_INFO});
320     \}
321 
323   \textcolor{comment}{// Topology construction}
324   \textcolor{comment}{//}
325 
326   \textcolor{comment}{// Create three nodes}
327   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} n0n1;
328   n0n1.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (2);
329 
330   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} \hyperlink{adaptive-red-tests_8cc_a68f69f65725cbe7529e8b594708b8fc0}{n1n2};
331   n1n2.\hyperlink{classns3_1_1NodeContainer_aa60b3a0e70f2fb324e16ffcf8bf31fcb}{Add} (n0n1.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
332   n1n2.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
333 
334   \textcolor{comment}{// Set up TCP/IP stack to all nodes (and create loopback device at device 0)}
335   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
336   internet.\hyperlink{classns3_1_1InternetStackHelper_a6cfa73782fd4071c4cfbd73ebf1bbb44}{InstallAll} ();
337 
338   \textcolor{comment}{// Connect the nodes}
339   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} p2p;
340   p2p.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (\hyperlink{classns3_1_1DataRate}{DataRate} (1000000)));
341   p2p.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0001)));
342   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} dev0 = p2p.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (n0n1);
343   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} dev1 = p2p.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (n1n2);
344 
345   \textcolor{comment}{// Add IP addresses to each network interfaces}
346   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4;
347   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.3.0"}, \textcolor{stringliteral}{"255.255.255.0"});
348   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (dev0);
349   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.2.0"}, \textcolor{stringliteral}{"255.255.255.0"});
350   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ipInterfs = ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (dev1);
351 
352   \textcolor{comment}{// Set up routes to all nodes}
353   Ipv4GlobalRoutingHelper::PopulateRoutingTables ();
354 
356   \textcolor{comment}{// A flow from node n0 to node n2}
357   \textcolor{comment}{//}
358 
359   \textcolor{comment}{// Create a packet sink to receive packets on node n2}
360   uint16\_t servPort = 50000; \textcolor{comment}{// Destination port number}
361   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} sink (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), servPort));
362   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} sinkApps = sink.Install (n1n2.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
363   sinkApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0));
364   sinkApps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (100.0));
365 
366   \textcolor{comment}{// Create a data source to send packets on node n0}
367   \textcolor{comment}{// Instead of full application, here use the socket directly by}
368   \textcolor{comment}{// registering callbacks in function StarFlow().}
369   \hyperlink{classns3_1_1Ptr}{Ptr<Socket>} localSocket = Socket::CreateSocket (n0n1.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0),
370                                                   TcpSocketFactory::GetTypeId ());
371   localSocket->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} ();
372   Simulator::ScheduleNow (&\hyperlink{classNs3TcpStateTestCase_a27240502909a83e4ca4895a96986ea98}{Ns3TcpStateTestCase::StartFlow}, \textcolor{keyword}{this},
373                           localSocket, ipInterfs.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (1), servPort);
374 
375   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/0/$ns3::Ipv4L3Protocol/Tx"},
376                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classNs3TcpStateTestCase_a35f15c824c1f3ac84ad6e0b1a984a39d}{Ns3TcpStateTestCase::Ipv4L3Tx}, \textcolor{keyword}{
      this}));
377 
378   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/0/$ns3::Ipv4L3Protocol/Rx"},
379                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classNs3TcpStateTestCase_a89479df985ad5aba35cc35cbcf8feefe}{Ns3TcpStateTestCase::Ipv4L3Rx}, \textcolor{keyword}{
      this}));
380 
382   \textcolor{comment}{// Set up different test cases: Lost model at node n1, different file size}
383   \textcolor{comment}{//}
384 
385   std::list<uint32\_t> dropListN0;
386   std::list<uint32\_t> dropListN1;
387   std::string caseDescription;
388   \textcolor{keywordflow}{switch} (\hyperlink{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{m\_testCase})
389     \{
390     \textcolor{keywordflow}{case} 0:
391       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 1000;
392       caseDescription = \textcolor{stringliteral}{"Verify connection establishment"};
393       \textcolor{keywordflow}{break};
394     \textcolor{keywordflow}{case} 1:
395       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 100 * 1000;
396       caseDescription = \textcolor{stringliteral}{"Verify a bigger (100 pkts) transfer: Sliding window operation, etc."};
397       \textcolor{keywordflow}{break};
398     \textcolor{keywordflow}{case} 2:
399       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 1000;
400       caseDescription = \textcolor{stringliteral}{"Survive a SYN lost"};
401       dropListN0.push\_back (0);
402       \textcolor{keywordflow}{break};
403     \textcolor{keywordflow}{case} 3:
404       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 2000;
405       caseDescription = \textcolor{stringliteral}{"Survive a SYN+ACK lost"};
406       dropListN1.push\_back (0);
407       \textcolor{keywordflow}{break};
408     \textcolor{keywordflow}{case} 4:
409       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 2000;
410       caseDescription = \textcolor{stringliteral}{"Survive a ACK (last packet in 3-way handshake) lost"};
411       dropListN0.push\_back (1);
412       \textcolor{keywordflow}{break};
413     \textcolor{keywordflow}{case} 5:
414       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 0;
415       caseDescription = \textcolor{stringliteral}{"Immediate FIN upon SYN\_RCVD"};
416       \hyperlink{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{m\_needToClose} = \textcolor{keyword}{false};
417       dropListN0.push\_back (1); \textcolor{comment}{// Hide the ACK in 3WHS}
418       Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.002), &Socket::Close, localSocket);
419       \textcolor{keywordflow}{break};
420     \textcolor{keywordflow}{case} 6:
421       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 5000;
422       caseDescription = \textcolor{stringliteral}{"Simulated simultaneous close"};
423       dropListN1.push\_back (5); \textcolor{comment}{// Hide the ACK-to-FIN from n2}
424       \textcolor{keywordflow}{break};
425     \textcolor{keywordflow}{case} 7:
426       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 5000;
427       caseDescription = \textcolor{stringliteral}{"FIN check 1: Loss of initiator's FIN. Wait until app close"};
428       \hyperlink{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{m\_needToClose} = \textcolor{keyword}{false};
429       dropListN0.push\_back (7); \textcolor{comment}{// Hide the FIN from n0}
430       Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.04), &Socket::Close, localSocket);
431       \textcolor{keywordflow}{break};
432     \textcolor{keywordflow}{case} 8:
433       \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} = 5000;
434       caseDescription = \textcolor{stringliteral}{"FIN check 2: Loss responder's FIN. FIN will be resent after last ack timeout"};
435       dropListN1.push\_back (6); \textcolor{comment}{// Hide the FIN from n2}
436       \textcolor{keywordflow}{break};
437     \textcolor{keywordflow}{default}:
438       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Program fatal error: specified test case not supported: "}
439                       << \hyperlink{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{m\_testCase});
440       \textcolor{keywordflow}{break};
441     \}
442 
443   \hyperlink{classns3_1_1Ptr}{Ptr<ReceiveListErrorModel>} errN0 = CreateObject<ReceiveListErrorModel> ();
444   errN0->\hyperlink{classns3_1_1ReceiveListErrorModel_ae710ec96d43c47bedb5d941351a4d809}{SetList} (dropListN0);
445   dev0.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1)->SetAttribute (\textcolor{stringliteral}{"ReceiveErrorModel"}, \hyperlink{classns3_1_1PointerValue}{PointerValue} (errN0));
446 
447   \hyperlink{classns3_1_1Ptr}{Ptr<ReceiveListErrorModel>} errN1 = CreateObject<ReceiveListErrorModel> ();
448   errN1->\hyperlink{classns3_1_1ReceiveListErrorModel_ae710ec96d43c47bedb5d941351a4d809}{SetList} (dropListN1);
449   dev1.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->SetAttribute (\textcolor{stringliteral}{"ReceiveErrorModel"}, \hyperlink{classns3_1_1PointerValue}{PointerValue} (errN1));
450 
451   std::ostringstream oss;
452   oss << \textcolor{stringliteral}{"tcp-state"} << \hyperlink{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{m\_testCase} << \textcolor{stringliteral}{"-test-case"};
453   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_aebae71fa01360a4e38a656828d5bd466}{m\_writeResults})
454     \{
455       p2p.\hyperlink{classns3_1_1PcapHelperForDevice_a4ab183a2512120200d4a0e5d8ececd49}{EnablePcapAll} (oss.str ());
456       p2p.\hyperlink{classns3_1_1AsciiTraceHelperForDevice_a63e57c878526c732924e14c1e52cca8b}{EnableAsciiAll} (oss.str ());
457     \}
458 
459   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\_writeLogging})
460     \{
461       \hyperlink{classns3_1_1Ptr}{Ptr<OutputStreamWrapper>} osw = Create<OutputStreamWrapper> (&std::clog);
462       *(osw->\hyperlink{classns3_1_1OutputStreamWrapper_a0cf30a4188ab6fdae2b2ab74db11acc2}{GetStream} ()) << std::setprecision (9) << std::fixed;
463       p2p.\hyperlink{classns3_1_1AsciiTraceHelperForDevice_a63e57c878526c732924e14c1e52cca8b}{EnableAsciiAll} (osw);
464 
465       std::clog << std::endl << \textcolor{stringliteral}{"Running TCP test-case "} << m\_testCase << \textcolor{stringliteral}{": "}
466                 << caseDescription << std::endl;
467     \}
468 
469   \textcolor{comment}{// Finally, set up the simulator to run.  The 1000 second hard limit is a}
470   \textcolor{comment}{// failsafe in case some change above causes the simulation to never end}
471   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1000));
472   Simulator::Run ();
473   Simulator::Destroy ();
474 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Do\+Setup@{Do\+Setup}}
\index{Do\+Setup@{Do\+Setup}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Setup(void)}{DoSetup(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+State\+Test\+Case\+::\+Do\+Setup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpStateTestCase_ab40bcdfe18d73d1d52edf573894ce112}{}\label{classNs3TcpStateTestCase_ab40bcdfe18d73d1d52edf573894ce112}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test setup before Do\+Run is invoked. 

Reimplemented from \hyperlink{classns3_1_1TestCase_a4a7e32ad32a10a508910815cd38e9177}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
128 \{
129   \textcolor{comment}{//}
130   \textcolor{comment}{// We expect there to be a file called ns3tcp-state-response-vectors.pcap in}
131   \textcolor{comment}{// the data directory}
132   \textcolor{comment}{//}
133   std::ostringstream oss;
134   oss << \textcolor{stringliteral}{"ns3tcp-state"} << \hyperlink{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{m\_testCase} << \textcolor{stringliteral}{"-response-vectors.pcap"};
135   \hyperlink{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}{m\_pcapFilename} = \hyperlink{classns3_1_1TestCase_a3e4d216ff392a43418f26bb3e5b0f16d}{CreateDataDirFilename} (oss.str ());
136   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"m\_pcapFilename="} << \hyperlink{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}{m\_pcapFilename});
137 
138   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_a0d2e59069324c4c41e805c543a8f1255}{m\_writeVectors})
139     \{
140       \hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}{m\_pcapFilename}, std::ios::out | std::ios::binary);
141       \hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a80c8adea1baa66e3f730df2927b0fc9b}{Init} (\hyperlink{ns3tcp-state-test-suite_8cc_a1d33ea10cde9143eb9b36be021f3739e}{PCAP\_LINK\_TYPE}, \hyperlink{ns3tcp-state-test-suite_8cc_ae9a6b49b98d0c7917dda456f6771d2e1}{PCAP\_SNAPLEN});
142     \}
143   \textcolor{keywordflow}{else}
144     \{
145       \hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}{m\_pcapFilename}, std::ios::in | std::ios::binary);
146       \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} (\hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\_pcapFile}.
      \hyperlink{classns3_1_1PcapFile_aa3795e9a87e7a4151fb4d30747eaa072}{GetDataLinkType} () == \hyperlink{ns3tcp-state-test-suite_8cc_a1d33ea10cde9143eb9b36be021f3739e}{PCAP\_LINK\_TYPE},
147                            \textcolor{stringliteral}{"Wrong response vectors in directory: opening "} <<
148                            \hyperlink{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}{m\_pcapFilename});
149     \}
150 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Do\+Teardown@{Do\+Teardown}}
\index{Do\+Teardown@{Do\+Teardown}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Teardown(void)}{DoTeardown(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+State\+Test\+Case\+::\+Do\+Teardown (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpStateTestCase_a80c9b357d0d42b443efe4feb204c9846}{}\label{classNs3TcpStateTestCase_a80c9b357d0d42b443efe4feb204c9846}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test teardown 

Reimplemented from \hyperlink{classns3_1_1TestCase_a8917f1604e28d312a8086f76291e3c46}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
154 \{
155   \hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_ad3b6c28d464742ee1fa3a64628339a5b}{Close} ();
156 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Ipv4\+L3\+Rx@{Ipv4\+L3\+Rx}}
\index{Ipv4\+L3\+Rx@{Ipv4\+L3\+Rx}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ipv4\+L3\+Rx(std\+::string context, Ptr$<$ const Packet $>$ packet, Ptr$<$ Ipv4 $>$ ipv4, uint32\+\_\+t interface)}{Ipv4L3Rx(std::string context, Ptr< const Packet > packet, Ptr< Ipv4 > ipv4, uint32_t interface)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+State\+Test\+Case\+::\+Ipv4\+L3\+Rx (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet, }
\item[{{\bf Ptr}$<$ {\bf Ipv4} $>$}]{ipv4, }
\item[{uint32\+\_\+t}]{interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a89479df985ad5aba35cc35cbcf8feefe}{}\label{classNs3TcpStateTestCase_a89479df985ad5aba35cc35cbcf8feefe}

\begin{DoxyCode}
160 \{
161   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} received = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
162   \hyperlink{classns3_1_1Ipv4Header}{Ipv4Header} ipHeader;
163   \hyperlink{classns3_1_1TcpHeader}{TcpHeader} tcpHeader;
164   received->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (ipHeader);
165   received->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (tcpHeader);
166 
167   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Received: "} << tcpHeader);
168 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Ipv4\+L3\+Tx@{Ipv4\+L3\+Tx}}
\index{Ipv4\+L3\+Tx@{Ipv4\+L3\+Tx}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ipv4\+L3\+Tx(std\+::string context, Ptr$<$ const Packet $>$ packet, Ptr$<$ Ipv4 $>$ ipv4, uint32\+\_\+t interface)}{Ipv4L3Tx(std::string context, Ptr< const Packet > packet, Ptr< Ipv4 > ipv4, uint32_t interface)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+State\+Test\+Case\+::\+Ipv4\+L3\+Tx (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet, }
\item[{{\bf Ptr}$<$ {\bf Ipv4} $>$}]{ipv4, }
\item[{uint32\+\_\+t}]{interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a35f15c824c1f3ac84ad6e0b1a984a39d}{}\label{classNs3TcpStateTestCase_a35f15c824c1f3ac84ad6e0b1a984a39d}

\begin{DoxyCode}
172 \{
173   \textcolor{comment}{//}
174   \textcolor{comment}{// We're not testing IP so remove and toss the header.  In order to do this,}
175   \textcolor{comment}{// though, we need to copy the packet since we have a const version.}
176   \textcolor{comment}{//}
177   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} received = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
178   \hyperlink{classns3_1_1Ipv4Header}{Ipv4Header} ipHeader;
179   received->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (ipHeader);
180 
181   \textcolor{comment}{//}
182   \textcolor{comment}{// What is left is the TCP header and any data that may be sent.  We aren't}
183   \textcolor{comment}{// sending any TCP data, so we expect what remains is only TCP header, which}
184   \textcolor{comment}{// is a small thing to save.}
185   \textcolor{comment}{//}
186   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_a0d2e59069324c4c41e805c543a8f1255}{m\_writeVectors})
187     \{
188       \textcolor{comment}{//}
189       \textcolor{comment}{// Save the TCP under test response for later testing.}
190       \textcolor{comment}{//}
191       \hyperlink{classns3_1_1Time}{Time} tNow = \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ();
192       int64\_t tMicroSeconds = tNow.\hyperlink{classns3_1_1Time_a2542b9273c336da11fcaf54e8bc6e4c8}{GetMicroSeconds} ();
193 
194       \hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a3920f5bae95ca0021875e6e9c2630ccf}{Write} (uint32\_t (tMicroSeconds / 1000000),
195                         uint32\_t (tMicroSeconds % 1000000),
196                         received);
197     \}
198   \textcolor{keywordflow}{else}
199     \{
200       \textcolor{comment}{//}
201       \textcolor{comment}{// Read the TCP under test expected response from the expected vector}
202       \textcolor{comment}{// file and see if it still does the right thing.}
203       \textcolor{comment}{//}
204       uint8\_t expectedBuffer[\hyperlink{ns3tcp-state-test-suite_8cc_ae9a6b49b98d0c7917dda456f6771d2e1}{PCAP\_SNAPLEN}];
205       uint32\_t tsSec, tsUsec, inclLen, origLen, readLen;
206       \hyperlink{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a18c5045735408fe45a8cbc9e6b34a4fb}{Read} (expectedBuffer, \textcolor{keyword}{sizeof}(expectedBuffer), tsSec, tsUsec, inclLen, 
      origLen, readLen);
207 
208       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"read "} << readLen << \textcolor{stringliteral}{" bytes"});
209 
210       uint8\_t *actual = \textcolor{keyword}{new} uint8\_t[readLen];
211       received->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (actual, readLen);
212 
213       \textcolor{keywordtype}{int} result = memcmp (actual, expectedBuffer, readLen);
214 
215       \hyperlink{classns3_1_1TcpHeader}{TcpHeader} expectedHeader, receivedHeader;
216       \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} expected = Create<Packet> (expectedBuffer, readLen);
217 
218       expected->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (expectedHeader);
219       received->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (receivedHeader);
220 
221       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Expected "} << expectedHeader << \textcolor{stringliteral}{" received: "} << receivedHeader);
222 
223       \textcolor{keyword}{delete} [] actual;
224 
225       \textcolor{comment}{//}
226       \textcolor{comment}{// Avoid streams of errors -- only report the first.}
227       \textcolor{comment}{//}
228       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TestCase_a76d97c8d3aadccc6231e50d863cde388}{IsStatusSuccess} ())
229         \{
230           \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (result, 0, \textcolor{stringliteral}{"Expected data comparison error"});
231         \}
232     \}
233 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Start\+Flow@{Start\+Flow}}
\index{Start\+Flow@{Start\+Flow}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Start\+Flow(\+Ptr$<$ Socket $>$ local\+Socket, Ipv4\+Address serv\+Address, uint16\+\_\+t serv\+Port)}{StartFlow(Ptr< Socket > localSocket, Ipv4Address servAddress, uint16_t servPort)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+State\+Test\+Case\+::\+Start\+Flow (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{local\+Socket, }
\item[{{\bf Ipv4\+Address}}]{serv\+Address, }
\item[{uint16\+\_\+t}]{serv\+Port}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a27240502909a83e4ca4895a96986ea98}{}\label{classNs3TcpStateTestCase_a27240502909a83e4ca4895a96986ea98}

\begin{DoxyCode}
278 \{
279   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\_writeLogging})
280     \{
281       std::clog << \textcolor{stringliteral}{"Starting flow at time "}
282                 <<  \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} ()
283                 << std::endl;
284     \}
285 
286   localSocket->\hyperlink{classns3_1_1Socket_a97f08aaf37b8fd7d4b5cad4dfdd4022a}{Connect} (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (servAddress, servPort)); \textcolor{comment}{// connect}
287 
288   \textcolor{comment}{// tell the tcp implementation to call WriteUntilBufferFull again}
289   \textcolor{comment}{// if we blocked and new tx buffer space becomes available}
290   localSocket->\hyperlink{classns3_1_1Socket_a85ff5c8cc7d242823f301b49264c68a4}{SetSendCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback}
291                                   (&\hyperlink{classNs3TcpStateTestCase_ab52f727ef7454eae1f4a6a5a491c019a}{Ns3TcpStateTestCase::WriteUntilBufferFull}
      ,
292                                   \textcolor{keyword}{this}));
293   \hyperlink{classNs3TcpStateTestCase_ab52f727ef7454eae1f4a6a5a491c019a}{WriteUntilBufferFull} (localSocket, localSocket->
      \hyperlink{classns3_1_1Socket_ae7cf62e3acf44106bfa1d40eaeaec151}{GetTxAvailable} ());
294 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!Write\+Until\+Buffer\+Full@{Write\+Until\+Buffer\+Full}}
\index{Write\+Until\+Buffer\+Full@{Write\+Until\+Buffer\+Full}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{Write\+Until\+Buffer\+Full(\+Ptr$<$ Socket $>$ local\+Socket, uint32\+\_\+t tx\+Space)}{WriteUntilBufferFull(Ptr< Socket > localSocket, uint32_t txSpace)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+State\+Test\+Case\+::\+Write\+Until\+Buffer\+Full (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{local\+Socket, }
\item[{uint32\+\_\+t}]{tx\+Space}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_ab52f727ef7454eae1f4a6a5a491c019a}{}\label{classNs3TcpStateTestCase_ab52f727ef7454eae1f4a6a5a491c019a}

\begin{DoxyCode}
239 \{
240   \textcolor{keywordflow}{while} (\hyperlink{classNs3TcpStateTestCase_a3d9f4df7a47644ec378929c7ed936fbd}{m\_currentTxBytes} < \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes})
241     \{
242       uint32\_t left = \hyperlink{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{m\_totalTxBytes} - \hyperlink{classNs3TcpStateTestCase_a3d9f4df7a47644ec378929c7ed936fbd}{m\_currentTxBytes};
243       uint32\_t dataOffset = m\_currentTxBytes % 1040;
244       uint32\_t toWrite = 1040 - dataOffset;
245       uint32\_t txAvail = localSocket->\hyperlink{classns3_1_1Socket_ae7cf62e3acf44106bfa1d40eaeaec151}{GetTxAvailable} ();
246       toWrite = \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (toWrite, left);
247       toWrite = \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (toWrite, txAvail);
248       \textcolor{keywordflow}{if} (txAvail == 0)
249         \{
250           \textcolor{keywordflow}{return};
251         \}
252       \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\_writeLogging})
253         \{
254           std::clog << \textcolor{stringliteral}{"Submitting "}
255                     << toWrite << \textcolor{stringliteral}{" bytes to TCP socket"} << std::endl;
256         \}
257       \textcolor{keywordtype}{int} amountSent = localSocket->\hyperlink{classns3_1_1Socket_a036901c8f485fe5b6eab93b7f2ec289d}{Send} (0, toWrite, 0);
258       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (amountSent > 0);  \textcolor{comment}{// Given GetTxAvailable() non-zero, amountSent should not be
       zero}
259       m\_currentTxBytes += amountSent;
260     \}
261   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{m\_needToClose})
262     \{
263       \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{m\_writeLogging})
264         \{
265           std::clog << \textcolor{stringliteral}{"Close socket at "}
266                     <<  \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} ()
267                     << std::endl;
268         \}
269       localSocket->\hyperlink{classns3_1_1Socket_abdac6e2498c5aa2963ef361d4200ddf3}{Close} ();
270       \hyperlink{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{m\_needToClose} = \textcolor{keyword}{false};
271     \}
272 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12




\subsection{Member Data Documentation}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+current\+Tx\+Bytes@{m\+\_\+current\+Tx\+Bytes}}
\index{m\+\_\+current\+Tx\+Bytes@{m\+\_\+current\+Tx\+Bytes}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Tx\+Bytes}{m_currentTxBytes}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+current\+Tx\+Bytes\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a3d9f4df7a47644ec378929c7ed936fbd}{}\label{classNs3TcpStateTestCase_a3d9f4df7a47644ec378929c7ed936fbd}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+need\+To\+Close@{m\+\_\+need\+To\+Close}}
\index{m\+\_\+need\+To\+Close@{m\+\_\+need\+To\+Close}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+need\+To\+Close}{m_needToClose}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+need\+To\+Close\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}{}\label{classNs3TcpStateTestCase_adcda588067de3d43d150c5358b883455}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+pcap\+File@{m\+\_\+pcap\+File}}
\index{m\+\_\+pcap\+File@{m\+\_\+pcap\+File}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+pcap\+File}{m_pcapFile}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pcap\+File} Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+pcap\+File\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}{}\label{classNs3TcpStateTestCase_ada8803204d6270de2fe3ae0b9758f3a9}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+pcap\+Filename@{m\+\_\+pcap\+Filename}}
\index{m\+\_\+pcap\+Filename@{m\+\_\+pcap\+Filename}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+pcap\+Filename}{m_pcapFilename}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+pcap\+Filename\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}{}\label{classNs3TcpStateTestCase_a5a9d1d225250b63b23d65a7b8f9f877e}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+test\+Case@{m\+\_\+test\+Case}}
\index{m\+\_\+test\+Case@{m\+\_\+test\+Case}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+test\+Case}{m_testCase}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+test\+Case\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}{}\label{classNs3TcpStateTestCase_af1ec330b601d913a2fcafce1a4bd799e}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+total\+Tx\+Bytes@{m\+\_\+total\+Tx\+Bytes}}
\index{m\+\_\+total\+Tx\+Bytes@{m\+\_\+total\+Tx\+Bytes}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+total\+Tx\+Bytes}{m_totalTxBytes}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+total\+Tx\+Bytes\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}{}\label{classNs3TcpStateTestCase_a360461d408b9c3b88e025e9fb760a92c}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+write\+Logging@{m\+\_\+write\+Logging}}
\index{m\+\_\+write\+Logging@{m\+\_\+write\+Logging}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Logging}{m_writeLogging}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+write\+Logging\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}{}\label{classNs3TcpStateTestCase_a738c5da39e4cbbbfdc5f789675c9405a}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+write\+Results@{m\+\_\+write\+Results}}
\index{m\+\_\+write\+Results@{m\+\_\+write\+Results}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Results}{m_writeResults}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+write\+Results\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_aebae71fa01360a4e38a656828d5bd466}{}\label{classNs3TcpStateTestCase_aebae71fa01360a4e38a656828d5bd466}
\index{Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}!m\+\_\+write\+Vectors@{m\+\_\+write\+Vectors}}
\index{m\+\_\+write\+Vectors@{m\+\_\+write\+Vectors}!Ns3\+Tcp\+State\+Test\+Case@{Ns3\+Tcp\+State\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Vectors}{m_writeVectors}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+State\+Test\+Case\+::m\+\_\+write\+Vectors\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpStateTestCase_a0d2e59069324c4c41e805c543a8f1255}{}\label{classNs3TcpStateTestCase_a0d2e59069324c4c41e805c543a8f1255}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/ns3tcp/\hyperlink{ns3tcp-state-test-suite_8cc}{ns3tcp-\/state-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
