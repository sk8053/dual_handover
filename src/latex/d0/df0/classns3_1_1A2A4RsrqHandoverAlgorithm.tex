\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm}{}\section{ns3\+:\+:A2\+A4\+Rsrq\+Handover\+Algorithm Class Reference}
\label{classns3_1_1A2A4RsrqHandoverAlgorithm}\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}


Handover algorithm implementation based on R\+S\+RQ measurements, Event A2 and Event A4.  




{\ttfamily \#include $<$a2-\/a4-\/rsrq-\/handover-\/algorithm.\+h$>$}



Inheritance diagram for ns3\+:\+:A2\+A4\+Rsrq\+Handover\+Algorithm\+:
% FIG 0


Collaboration diagram for ns3\+:\+:A2\+A4\+Rsrq\+Handover\+Algorithm\+:
% FIG 1
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_1_1UeMeasure}{Ue\+Measure}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a4ddb6f19752cdf9b5db9d98ec0888a5c}{A2\+A4\+Rsrq\+Handover\+Algorithm} ()
\begin{DoxyCompactList}\small\item\em Creates an A2-\/\+A4-\/\+R\+S\+RQ handover algorithm instance. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab199f6eec6267db06ed58a162eb68a1d}{$\sim$\+A2\+A4\+Rsrq\+Handover\+Algorithm} ()
\item 
virtual void \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_aa0800422eef0bbf24cd4a38991973fe0}{Set\+Lte\+Handover\+Management\+Sap\+User} (\hyperlink{classns3_1_1LteHandoverManagementSapUser}{Lte\+Handover\+Management\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\begin{DoxyCompactList}\small\item\em Set the \char`\"{}user\char`\"{} part of the Handover Management S\+AP interface that this handover algorithm instance will interact with. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1LteHandoverManagementSapProvider}{Lte\+Handover\+Management\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_accacf1f5305c5d210dc41c64f0ae1f6a}{Get\+Lte\+Handover\+Management\+Sap\+Provider} ()
\begin{DoxyCompactList}\small\item\em Export the \char`\"{}provider\char`\"{} part of the Handover Management S\+AP interface. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a0185c791e561824abf4506ee551375dd}{Get\+Type\+Id} ()
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a47e9fb10c8dacf9d2b6cae95a3fe1a5c}{Do\+Initialize} ()
\item 
virtual void \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a3da521192195d0401eb49c275ca70174}{Do\+Dispose} ()
\item 
void \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a49d20f578c2853426103a532e9f862ec}{Do\+Report\+Ue\+Meas} (uint16\+\_\+t rnti, \hyperlink{structns3_1_1LteRrcSap_1_1MeasResults}{Lte\+Rrc\+Sap\+::\+Meas\+Results} meas\+Results)
\begin{DoxyCompactList}\small\item\em Implementation of \hyperlink{classns3_1_1LteHandoverManagementSapProvider_a5daca6a055e4f8794f7f1e8ba1077b15}{Lte\+Handover\+Management\+Sap\+Provider\+::\+Report\+Ue\+Meas}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::map$<$ uint16\+\_\+t, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_1_1UeMeasure}{Ue\+Measure} $>$ $>$ \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a36b466ab32bda84bd5a6c0843608ab2a}{Measurement\+Row\+\_\+t}
\item 
typedef std\+::map$<$ uint16\+\_\+t, \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a36b466ab32bda84bd5a6c0843608ab2a}{Measurement\+Row\+\_\+t} $>$ \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a27c0f07941cacc1c54a799a27ea7821c}{Measurement\+Table\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a95414290544e888109dd5cbb5c022512}{Evaluate\+Handover} (uint16\+\_\+t rnti, uint8\+\_\+t serving\+Cell\+Rsrq)
\item 
bool \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a6d9106afebe16783ac637e9672a2fae1}{Is\+Valid\+Neighbour} (uint16\+\_\+t cell\+Id)
\item 
void \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a789156746868d391bf23b1b185a3e328}{Update\+Neighbour\+Measurements} (uint16\+\_\+t rnti, uint16\+\_\+t cell\+Id, uint8\+\_\+t rsrq)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ac52e42e6ee41a0faffdcbc75ff7e2e02}{m\+\_\+a2\+Meas\+Id}
\begin{DoxyCompactList}\small\item\em The expected measurement identity for A2 measurements. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acad13d470305131b7cfa66f5feb0f0bf}{m\+\_\+a4\+Meas\+Id}
\begin{DoxyCompactList}\small\item\em The expected measurement identity for A4 measurements. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a27c0f07941cacc1c54a799a27ea7821c}{Measurement\+Table\+\_\+t} \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{m\+\_\+neighbour\+Cell\+Measures}
\begin{DoxyCompactList}\small\item\em Table of measurement reports from all U\+Es. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}{m\+\_\+serving\+Cell\+Threshold}
\item 
uint8\+\_\+t \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_afe15ce0bd178565ef3f42d83ada4428b}{m\+\_\+neighbour\+Cell\+Offset}
\item 
\hyperlink{classns3_1_1LteHandoverManagementSapUser}{Lte\+Handover\+Management\+Sap\+User} $\ast$ \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}{m\+\_\+handover\+Management\+Sap\+User}
\begin{DoxyCompactList}\small\item\em Interface to the e\+NodeB R\+RC instance. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1LteHandoverManagementSapProvider}{Lte\+Handover\+Management\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a5c2d8213a131a7d934c2b5ef4907597b}{m\+\_\+handover\+Management\+Sap\+Provider}
\begin{DoxyCompactList}\small\item\em Receive A\+PI calls from the e\+NodeB R\+RC instance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a19b73e89b335cae4f61749f6146e7a8f}{Member\+Lte\+Handover\+Management\+Sap\+Provider$<$ A2\+A4\+Rsrq\+Handover\+Algorithm $>$}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Handover algorithm implementation based on R\+S\+RQ measurements, Event A2 and Event A4. 

Handover decision made by this algorithm is primarily based on Event A2 measurements (serving cell\textquotesingle{}s R\+S\+RQ becomes worse than threshold). When the event is triggered, the first condition of handover is fulfilled.

Event A4 measurements (neighbour cell\textquotesingle{}s R\+S\+RQ becomes better than threshold) are used to detect neighbouring cells and their respective R\+S\+RQ. When a neighbouring cell\textquotesingle{}s R\+S\+RQ is higher than the serving cell\textquotesingle{}s R\+S\+RQ by a certain offset, then the second condition of handover is fulfilled.

When the first and second conditions above are fulfilled, the algorithm informs the e\+NodeB R\+RC to trigger a handover.

The threshold for Event A2 can be configured in the {\ttfamily Serving\+Cell\+Threshold} attribute. The offset used in the second condition can also be configured by setting the {\ttfamily Neighbour\+Cell\+Offset} attribute.

The following code snippet is an example of using and configuring the handover algorithm in a simulation program\+: \begin{DoxyVerb}Ptr<LteHelper> lteHelper = CreateObject<LteHelper> ();

NodeContainer enbNodes;
// configure the nodes here...

lteHelper->SetHandoverAlgorithmType ("ns3::A2A4RsrqHandoverAlgorithm");
lteHelper->SetHandoverAlgorithmAttribute ("ServingCellThreshold",
                                          UintegerValue (30));
lteHelper->SetHandoverAlgorithmAttribute ("NeighbourCellOffset",
                                          UintegerValue (1));
NetDeviceContainer enbLteDevs = lteHelper->InstallEnbDevice (enbNodes);
\end{DoxyVerb}


\begin{DoxyNote}{Note}
Setting the handover algorithm type and attributes after the call to \hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{Lte\+Helper\+::\+Install\+Enb\+Device} does not have any effect to the devices that have already been installed. 
\end{DoxyNote}


\subsection{Member Typedef Documentation}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Measurement\+Row\+\_\+t@{Measurement\+Row\+\_\+t}}
\index{Measurement\+Row\+\_\+t@{Measurement\+Row\+\_\+t}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Measurement\+Row\+\_\+t}{MeasurementRow_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::map$<$uint16\+\_\+t, {\bf Ptr}$<${\bf Ue\+Measure}$>$ $>$ {\bf ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Measurement\+Row\+\_\+t}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a36b466ab32bda84bd5a6c0843608ab2a}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a36b466ab32bda84bd5a6c0843608ab2a}
Measurements reported by a UE for several cells. The structure is a map indexed by the cell ID. \index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Measurement\+Table\+\_\+t@{Measurement\+Table\+\_\+t}}
\index{Measurement\+Table\+\_\+t@{Measurement\+Table\+\_\+t}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Measurement\+Table\+\_\+t}{MeasurementTable_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::map$<$uint16\+\_\+t, {\bf Measurement\+Row\+\_\+t}$>$ {\bf ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Measurement\+Table\+\_\+t}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a27c0f07941cacc1c54a799a27ea7821c}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a27c0f07941cacc1c54a799a27ea7821c}
Measurements reported by several U\+Es. The structure is a map indexed by the R\+N\+TI of the UE. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!A2\+A4\+Rsrq\+Handover\+Algorithm@{A2\+A4\+Rsrq\+Handover\+Algorithm}}
\index{A2\+A4\+Rsrq\+Handover\+Algorithm@{A2\+A4\+Rsrq\+Handover\+Algorithm}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{A2\+A4\+Rsrq\+Handover\+Algorithm()}{A2A4RsrqHandoverAlgorithm()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a4ddb6f19752cdf9b5db9d98ec0888a5c}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a4ddb6f19752cdf9b5db9d98ec0888a5c}


Creates an A2-\/\+A4-\/\+R\+S\+RQ handover algorithm instance. 


\begin{DoxyCode}
45   : \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ac52e42e6ee41a0faffdcbc75ff7e2e02}{m\_a2MeasId} (0),
46     \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acad13d470305131b7cfa66f5feb0f0bf}{m\_a4MeasId} (0),
47     \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}{m\_servingCellThreshold} (30),
48     \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_afe15ce0bd178565ef3f42d83ada4428b}{m\_neighbourCellOffset} (1),
49     \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}{m\_handoverManagementSapUser} (0)
50 \{
51   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
52   \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a5c2d8213a131a7d934c2b5ef4907597b}{m\_handoverManagementSapProvider} = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a19b73e89b335cae4f61749f6146e7a8f}{MemberLteHandoverManagementSapProvider<A2A4RsrqHandoverAlgorithm>}
       (\textcolor{keyword}{this});
53 \}
\end{DoxyCode}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!````~A2\+A4\+Rsrq\+Handover\+Algorithm@{$\sim$\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\index{````~A2\+A4\+Rsrq\+Handover\+Algorithm@{$\sim$\+A2\+A4\+Rsrq\+Handover\+Algorithm}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{$\sim$\+A2\+A4\+Rsrq\+Handover\+Algorithm()}{~A2A4RsrqHandoverAlgorithm()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::$\sim$\+A2\+A4\+Rsrq\+Handover\+Algorithm (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_ab199f6eec6267db06ed58a162eb68a1d}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_ab199f6eec6267db06ed58a162eb68a1d}

\begin{DoxyCode}
57 \{
58   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
59 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Do\+Dispose()}{DoDispose()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a3da521192195d0401eb49c275ca70174}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a3da521192195d0401eb49c275ca70174}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a3da521192195d0401eb49c275ca70174}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1LteHandoverAlgorithm_acb41503e8dd1313690d0da69f9eba564}{ns3\+::\+Lte\+Handover\+Algorithm}.


\begin{DoxyCode}
136 \{
137   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
138   \textcolor{keyword}{delete} \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a5c2d8213a131a7d934c2b5ef4907597b}{m\_handoverManagementSapProvider};
139 \}
\end{DoxyCode}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Do\+Initialize@{Do\+Initialize}}
\index{Do\+Initialize@{Do\+Initialize}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Do\+Initialize()}{DoInitialize()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Do\+Initialize (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a47e9fb10c8dacf9d2b6cae95a3fe1a5c}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a47e9fb10c8dacf9d2b6cae95a3fe1a5c}
\hyperlink{classns3_1_1Object_af4411cb29971772fcd09203474a95078}{Initialize()} implementation.

This method is called only once by \hyperlink{classns3_1_1Object_af4411cb29971772fcd09203474a95078}{Initialize()}. If the user calls \hyperlink{classns3_1_1Object_af4411cb29971772fcd09203474a95078}{Initialize()} multiple times, \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a47e9fb10c8dacf9d2b6cae95a3fe1a5c}{Do\+Initialize()} is called only the first time.

Subclasses are expected to override this method and chain up to their parent\textquotesingle{}s implementation once they are done. It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} and \hyperlink{classns3_1_1Object_a79dd435d300f3deca814553f561a2922}{Aggregate\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1Object_af8482a521433409fb5c7f749398c9dbe}{ns3\+::\+Object}.


\begin{DoxyCode}
107 \{
108   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
109 
110   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" requesting Event A2 measurements"}
111                      << \textcolor{stringliteral}{" (threshold="} << (uint16\_t) \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}{m\_servingCellThreshold} << \textcolor{stringliteral}{")"});
112   LteRrcSap::ReportConfigEutra reportConfigA2;
113   reportConfigA2.eventId = \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra_ab8152dc095987f60bee2e9115046902fa11aae7a908ccf8a73b5aeed0cd8be53e}{LteRrcSap::ReportConfigEutra::EVENT\_A2};
114   reportConfigA2.threshold1.choice = \hyperlink{structns3_1_1LteRrcSap_1_1ThresholdEutra_ad3ed2704b836132980dd2e97cb03822ca6e8bda2b99825f09f53388c29b6402b4}{LteRrcSap::ThresholdEutra::THRESHOLD\_RSRQ}
      ;
115   reportConfigA2.threshold1.range = \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}{m\_servingCellThreshold};
116   reportConfigA2.triggerQuantity = \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra_a82343ddf526faba0483431ea5882a3efaa4e09cb3c7154d7ab732115a2647325f}{LteRrcSap::ReportConfigEutra::RSRQ};
117   reportConfigA2.reportInterval = \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra_aa04b2781a844eb212d59762829e41d31a7426f1e7502aa2b643e3723b2ca5caaf}{LteRrcSap::ReportConfigEutra::MS240};
118   \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ac52e42e6ee41a0faffdcbc75ff7e2e02}{m\_a2MeasId} = \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}{m\_handoverManagementSapUser}->
      \hyperlink{classns3_1_1LteHandoverManagementSapUser_a80f34ec0e586b42547210c1741b4f980}{AddUeMeasReportConfigForHandover} (reportConfigA2);
119 
120   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" requesting Event A4 measurements"}
121                      << \textcolor{stringliteral}{" (threshold=0)"});
122   LteRrcSap::ReportConfigEutra reportConfigA4;
123   reportConfigA4.eventId = \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra_ab8152dc095987f60bee2e9115046902fa6b8e5f5e5eea05c9441816bd32aaf6c0}{LteRrcSap::ReportConfigEutra::EVENT\_A4};
124   reportConfigA4.threshold1.choice = \hyperlink{structns3_1_1LteRrcSap_1_1ThresholdEutra_ad3ed2704b836132980dd2e97cb03822ca6e8bda2b99825f09f53388c29b6402b4}{LteRrcSap::ThresholdEutra::THRESHOLD\_RSRQ}
      ;
125   reportConfigA4.threshold1.range = 0; \textcolor{comment}{// intentionally very low threshold}
126   reportConfigA4.triggerQuantity = \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra_a82343ddf526faba0483431ea5882a3efaa4e09cb3c7154d7ab732115a2647325f}{LteRrcSap::ReportConfigEutra::RSRQ};
127   reportConfigA4.reportInterval = \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra_aa04b2781a844eb212d59762829e41d31a62abaecf01626941b93ca2792987c8df}{LteRrcSap::ReportConfigEutra::MS480};
128   \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acad13d470305131b7cfa66f5feb0f0bf}{m\_a4MeasId} = \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}{m\_handoverManagementSapUser}->
      \hyperlink{classns3_1_1LteHandoverManagementSapUser_a80f34ec0e586b42547210c1741b4f980}{AddUeMeasReportConfigForHandover} (reportConfigA4);
129 
130   \hyperlink{classns3_1_1Object_af8482a521433409fb5c7f749398c9dbe}{LteHandoverAlgorithm::DoInitialize} ();
131 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Do\+Report\+Ue\+Meas@{Do\+Report\+Ue\+Meas}}
\index{Do\+Report\+Ue\+Meas@{Do\+Report\+Ue\+Meas}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Do\+Report\+Ue\+Meas(uint16\+\_\+t rnti, Lte\+Rrc\+Sap\+::\+Meas\+Results meas\+Results)}{DoReportUeMeas(uint16_t rnti, LteRrcSap::MeasResults measResults)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Do\+Report\+Ue\+Meas (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{{\bf Lte\+Rrc\+Sap\+::\+Meas\+Results}}]{meas\+Results}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a49d20f578c2853426103a532e9f862ec}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a49d20f578c2853426103a532e9f862ec}


Implementation of \hyperlink{classns3_1_1LteHandoverManagementSapProvider_a5daca6a055e4f8794f7f1e8ba1077b15}{Lte\+Handover\+Management\+Sap\+Provider\+::\+Report\+Ue\+Meas}. 


\begin{DoxyParams}{Parameters}
{\em rnti} & Radio Network Temporary Identity, an integer identifying the UE where the report originates from \\
\hline
{\em meas\+Results} & a single report of one measurement identity \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1LteHandoverAlgorithm_a6ff069477dd5902b2e564e5cf88bac64}{ns3\+::\+Lte\+Handover\+Algorithm}.


\begin{DoxyCode}
145 \{
146   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti << (uint16\_t) measResults.measId);
147 
148   \textcolor{keywordflow}{if} (measResults.measId == \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ac52e42e6ee41a0faffdcbc75ff7e2e02}{m\_a2MeasId})
149     \{
150       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (measResults.rsrqResult <= 
      \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}{m\_servingCellThreshold},
151                      \textcolor{stringliteral}{"Invalid UE measurement report"});
152       \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a95414290544e888109dd5cbb5c022512}{EvaluateHandover} (rnti, measResults.rsrqResult);
153     \}
154   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (measResults.measId == \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acad13d470305131b7cfa66f5feb0f0bf}{m\_a4MeasId})
155     \{
156       \textcolor{keywordflow}{if} (measResults.haveMeasResultNeighCells
157           && !measResults.measResultListEutra.empty ())
158         \{
159           \textcolor{keywordflow}{for} (std::list <LteRrcSap::MeasResultEutra>::iterator it = measResults.measResultListEutra.begin 
      ();
160                it != measResults.measResultListEutra.end ();
161                ++it)
162             \{
163               \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (it->haveRsrqResult == \textcolor{keyword}{true},
164                              \textcolor{stringliteral}{"RSRQ measurement is missing from cellId "} << it->physCellId);
165               \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a789156746868d391bf23b1b185a3e328}{UpdateNeighbourMeasurements} (rnti, it->physCellId, it->rsrqResult)
      ;
166             \}
167         \}
168       \textcolor{keywordflow}{else}
169         \{
170           \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Event A4 received without measurement results from neighbouring
       cells"});
171         \}
172     \}
173   \textcolor{keywordflow}{else}
174     \{
175       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Ignoring measId "} << (uint16\_t) measResults.measId);
176     \}
177 
178 \} \textcolor{comment}{// end of DoReportUeMeas}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Evaluate\+Handover@{Evaluate\+Handover}}
\index{Evaluate\+Handover@{Evaluate\+Handover}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Evaluate\+Handover(uint16\+\_\+t rnti, uint8\+\_\+t serving\+Cell\+Rsrq)}{EvaluateHandover(uint16_t rnti, uint8_t servingCellRsrq)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Evaluate\+Handover (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{serving\+Cell\+Rsrq}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a95414290544e888109dd5cbb5c022512}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a95414290544e888109dd5cbb5c022512}
Called when Event A2 is detected, then trigger a handover if needed.


\begin{DoxyParams}{Parameters}
{\em rnti} & The R\+N\+TI of the UE who reported the event. \\
\hline
{\em serving\+Cell\+Rsrq} & The R\+S\+RQ of this cell as reported by the UE. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
184 \{
185   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti << (uint16\_t) servingCellRsrq);
186 
187   MeasurementTable\_t::iterator it1;
188   it1 = \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{m\_neighbourCellMeasures}.find (rnti);
189 
190   \textcolor{keywordflow}{if} (it1 == \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{m\_neighbourCellMeasures}.end ())
191     \{
192       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Skipping handover evaluation for RNTI "} << rnti << \textcolor{stringliteral}{" because neighbour cells
       information is not found"});
193     \}
194   \textcolor{keywordflow}{else}
195     \{
196       \textcolor{comment}{// Find the best neighbour cell (eNB)}
197       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Number of neighbour cells = "} << it1->second.size ());
198       uint16\_t bestNeighbourCellId = 0;
199       uint8\_t bestNeighbourRsrq = 0;
200       MeasurementRow\_t::iterator it2;
201       \textcolor{keywordflow}{for} (it2 = it1->second.begin (); it2 != it1->second.end (); ++it2)
202         \{
203           \textcolor{keywordflow}{if} ((it2->second->m\_rsrq > bestNeighbourRsrq)
204               && \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a6d9106afebe16783ac637e9672a2fae1}{IsValidNeighbour} (it2->first))
205             \{
206               bestNeighbourCellId = it2->first;
207               bestNeighbourRsrq = it2->second->m\_rsrq;
208             \}
209         \}
210 
211       \textcolor{comment}{// Trigger Handover, if needed}
212       \textcolor{keywordflow}{if} (bestNeighbourCellId > 0)
213         \{
214           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Best neighbour cellId "} << bestNeighbourCellId);
215 
216           \textcolor{keywordflow}{if} ((bestNeighbourRsrq - servingCellRsrq) >= \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_afe15ce0bd178565ef3f42d83ada4428b}{m\_neighbourCellOffset})
217             \{
218               \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Trigger Handover to cellId "} << bestNeighbourCellId);
219               \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"target cell RSRQ "} << (uint16\_t) bestNeighbourRsrq);
220               \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"serving cell RSRQ "} << (uint16\_t) servingCellRsrq);
221 
222               \textcolor{comment}{// Inform eNodeB RRC about handover}
223               \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}{m\_handoverManagementSapUser}->
      \hyperlink{classns3_1_1LteHandoverManagementSapUser_aade75e474e4f748ce9ef2e12101c5c42}{TriggerHandover} (rnti,
224                                                             bestNeighbourCellId);
225             \}
226         \}
227 
228     \} \textcolor{comment}{// end of else of if (it1 == m\_neighbourCellMeasures.end ())}
229 
230 \} \textcolor{comment}{// end of EvaluateMeasurementReport}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Get\+Lte\+Handover\+Management\+Sap\+Provider@{Get\+Lte\+Handover\+Management\+Sap\+Provider}}
\index{Get\+Lte\+Handover\+Management\+Sap\+Provider@{Get\+Lte\+Handover\+Management\+Sap\+Provider}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Get\+Lte\+Handover\+Management\+Sap\+Provider()}{GetLteHandoverManagementSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Handover\+Management\+Sap\+Provider} $\ast$ ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Get\+Lte\+Handover\+Management\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_accacf1f5305c5d210dc41c64f0ae1f6a}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_accacf1f5305c5d210dc41c64f0ae1f6a}


Export the \char`\"{}provider\char`\"{} part of the Handover Management S\+AP interface. 

\begin{DoxyReturn}{Returns}
the reference to the \char`\"{}provider\char`\"{} part of the interface, typically to be kept by an \hyperlink{classns3_1_1LteEnbRrc}{Lte\+Enb\+Rrc} instance 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1LteHandoverAlgorithm_a271711fe4849bc28077905a21d2cadba}{ns3\+::\+Lte\+Handover\+Algorithm}.


\begin{DoxyCode}
99 \{
100   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
101   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a5c2d8213a131a7d934c2b5ef4907597b}{m\_handoverManagementSapProvider};
102 \}
\end{DoxyCode}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id()}{GetTypeId()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a0185c791e561824abf4506ee551375dd}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a0185c791e561824abf4506ee551375dd}

\begin{DoxyCode}
64 \{
65   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::A2A4RsrqHandoverAlgorithm"})
66     .SetParent<\hyperlink{classns3_1_1LteHandoverAlgorithm_acb457c6d2a93677efd36a65376ce31fc}{LteHandoverAlgorithm}> ()
67     .SetGroupName(\textcolor{stringliteral}{"Lte"})
68     .AddConstructor<\hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a4ddb6f19752cdf9b5db9d98ec0888a5c}{A2A4RsrqHandoverAlgorithm}> ()
69     .AddAttribute (\textcolor{stringliteral}{"ServingCellThreshold"},
70                    \textcolor{stringliteral}{"If the RSRQ of the serving cell is worse than this "}
71                    \textcolor{stringliteral}{"threshold, neighbour cells are consider for handover. "}
72                    \textcolor{stringliteral}{"Expressed in quantized range of [0..34] as per Section "}
73                    \textcolor{stringliteral}{"9.1.7 of 3GPP TS 36.133."},
74                    UintegerValue (30),
75                    MakeUintegerAccessor (&
      \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}{A2A4RsrqHandoverAlgorithm::m\_servingCellThreshold}),
76                    MakeUintegerChecker<uint8\_t> (0, 34))
77     .AddAttribute (\textcolor{stringliteral}{"NeighbourCellOffset"},
78                    \textcolor{stringliteral}{"Minimum offset between the serving and the best neighbour "}
79                    \textcolor{stringliteral}{"cell to trigger the handover. Expressed in quantized "}
80                    \textcolor{stringliteral}{"range of [0..34] as per Section 9.1.7 of 3GPP TS 36.133."},
81                    UintegerValue (1),
82                    MakeUintegerAccessor (&
      \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_afe15ce0bd178565ef3f42d83ada4428b}{A2A4RsrqHandoverAlgorithm::m\_neighbourCellOffset}),
83                    MakeUintegerChecker<uint8\_t> ())
84   ;
85   \textcolor{keywordflow}{return} tid;
86 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Is\+Valid\+Neighbour@{Is\+Valid\+Neighbour}}
\index{Is\+Valid\+Neighbour@{Is\+Valid\+Neighbour}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Is\+Valid\+Neighbour(uint16\+\_\+t cell\+Id)}{IsValidNeighbour(uint16_t cellId)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Is\+Valid\+Neighbour (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{cell\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a6d9106afebe16783ac637e9672a2fae1}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a6d9106afebe16783ac637e9672a2fae1}
Determines if a neighbour cell is a valid destination for handover. Currently always return true.


\begin{DoxyParams}{Parameters}
{\em cell\+Id} & The cell ID of the neighbour cell. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the cell is a valid destination for handover. 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000071}{Todo}]In the future, this function can be expanded to validate whether the neighbour cell is a valid target cell, e.\+g., taking into account the N\+RT in A\+NR and whether it is a C\+SG cell with closed access. \end{DoxyRefDesc}

\begin{DoxyCode}
235 \{
236   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << cellId);
237 
244   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
245 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Set\+Lte\+Handover\+Management\+Sap\+User@{Set\+Lte\+Handover\+Management\+Sap\+User}}
\index{Set\+Lte\+Handover\+Management\+Sap\+User@{Set\+Lte\+Handover\+Management\+Sap\+User}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Set\+Lte\+Handover\+Management\+Sap\+User(\+Lte\+Handover\+Management\+Sap\+User $\ast$s)}{SetLteHandoverManagementSapUser(LteHandoverManagementSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Set\+Lte\+Handover\+Management\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Lte\+Handover\+Management\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_aa0800422eef0bbf24cd4a38991973fe0}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_aa0800422eef0bbf24cd4a38991973fe0}


Set the \char`\"{}user\char`\"{} part of the Handover Management S\+AP interface that this handover algorithm instance will interact with. 


\begin{DoxyParams}{Parameters}
{\em s} & a reference to the \char`\"{}user\char`\"{} part of the interface, typically a member of an \hyperlink{classns3_1_1LteEnbRrc}{Lte\+Enb\+Rrc} instance \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1LteHandoverAlgorithm_a3e5a5f7f7f69291ea38778a21fbe8f47}{ns3\+::\+Lte\+Handover\+Algorithm}.


\begin{DoxyCode}
91 \{
92   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
93   \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}{m\_handoverManagementSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
94 \}
\end{DoxyCode}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Update\+Neighbour\+Measurements@{Update\+Neighbour\+Measurements}}
\index{Update\+Neighbour\+Measurements@{Update\+Neighbour\+Measurements}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Update\+Neighbour\+Measurements(uint16\+\_\+t rnti, uint16\+\_\+t cell\+Id, uint8\+\_\+t rsrq)}{UpdateNeighbourMeasurements(uint16_t rnti, uint16_t cellId, uint8_t rsrq)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::\+Update\+Neighbour\+Measurements (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{cell\+Id, }
\item[{uint8\+\_\+t}]{rsrq}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a789156746868d391bf23b1b185a3e328}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a789156746868d391bf23b1b185a3e328}
Called when Event A4 is reported, then update the measurements table. If the R\+N\+TI and/or cell ID is not found in the table, a corresponding entry will be created. Only the latest measurements are stored in the table.


\begin{DoxyParams}{Parameters}
{\em rnti} & The R\+N\+TI of the UE who reported the event. \\
\hline
{\em cell\+Id} & The cell ID of the measured cell. \\
\hline
{\em rsrq} & The R\+S\+RQ of the cell as measured by the UE. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
252 \{
253   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti << cellId << (uint16\_t) rsrq);
254   MeasurementTable\_t::iterator it1;
255   it1 = \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{m\_neighbourCellMeasures}.find (rnti);
256 
257   \textcolor{keywordflow}{if} (it1 == \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{m\_neighbourCellMeasures}.end ())
258     \{
259       \textcolor{comment}{// insert a new UE entry}
260       \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_a36b466ab32bda84bd5a6c0843608ab2a}{MeasurementRow\_t} row;
261       std::pair<MeasurementTable\_t::iterator, bool> ret;
262       ret = \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{m\_neighbourCellMeasures}.insert (std::pair<uint16\_t, MeasurementRow\_t> (
      rnti, row));
263       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ret.second);
264       it1 = ret.first;
265     \}
266 
267   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (it1 != \hyperlink{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{m\_neighbourCellMeasures}.end ());
268   Ptr<UeMeasure> neighbourCellMeasures;
269   std::map<uint16\_t, Ptr<UeMeasure> >::iterator it2;
270   it2 = it1->second.find (cellId);
271 
272   \textcolor{keywordflow}{if} (it2 != it1->second.end ())
273     \{
274       neighbourCellMeasures = it2->second;
275       neighbourCellMeasures->m\_cellId = cellId;
276       neighbourCellMeasures->m\_rsrp = 0;
277       neighbourCellMeasures->m\_rsrq = rsrq;
278     \}
279   \textcolor{keywordflow}{else}
280     \{
281       \textcolor{comment}{// insert a new cell entry}
282       neighbourCellMeasures = Create<UeMeasure> ();
283       neighbourCellMeasures->m\_cellId = cellId;
284       neighbourCellMeasures->m\_rsrp = 0;
285       neighbourCellMeasures->m\_rsrq = rsrq;
286       it1->second[cellId] = neighbourCellMeasures;
287     \}
288 
289 \} \textcolor{comment}{// end of UpdateNeighbourMeasurements}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8




\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!Member\+Lte\+Handover\+Management\+Sap\+Provider$<$ A2\+A4\+Rsrq\+Handover\+Algorithm $>$@{Member\+Lte\+Handover\+Management\+Sap\+Provider$<$ A2\+A4\+Rsrq\+Handover\+Algorithm $>$}}
\index{Member\+Lte\+Handover\+Management\+Sap\+Provider$<$ A2\+A4\+Rsrq\+Handover\+Algorithm $>$@{Member\+Lte\+Handover\+Management\+Sap\+Provider$<$ A2\+A4\+Rsrq\+Handover\+Algorithm $>$}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{Member\+Lte\+Handover\+Management\+Sap\+Provider$<$ A2\+A4\+Rsrq\+Handover\+Algorithm $>$}{MemberLteHandoverManagementSapProvider< A2A4RsrqHandoverAlgorithm >}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Member\+Lte\+Handover\+Management\+Sap\+Provider}$<$ {\bf A2\+A4\+Rsrq\+Handover\+Algorithm} $>$\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a19b73e89b335cae4f61749f6146e7a8f}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a19b73e89b335cae4f61749f6146e7a8f}


\subsection{Member Data Documentation}
\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!m\+\_\+a2\+Meas\+Id@{m\+\_\+a2\+Meas\+Id}}
\index{m\+\_\+a2\+Meas\+Id@{m\+\_\+a2\+Meas\+Id}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{m\+\_\+a2\+Meas\+Id}{m_a2MeasId}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::m\+\_\+a2\+Meas\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_ac52e42e6ee41a0faffdcbc75ff7e2e02}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_ac52e42e6ee41a0faffdcbc75ff7e2e02}


The expected measurement identity for A2 measurements. 

\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!m\+\_\+a4\+Meas\+Id@{m\+\_\+a4\+Meas\+Id}}
\index{m\+\_\+a4\+Meas\+Id@{m\+\_\+a4\+Meas\+Id}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{m\+\_\+a4\+Meas\+Id}{m_a4MeasId}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::m\+\_\+a4\+Meas\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_acad13d470305131b7cfa66f5feb0f0bf}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_acad13d470305131b7cfa66f5feb0f0bf}


The expected measurement identity for A4 measurements. 

\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!m\+\_\+handover\+Management\+Sap\+Provider@{m\+\_\+handover\+Management\+Sap\+Provider}}
\index{m\+\_\+handover\+Management\+Sap\+Provider@{m\+\_\+handover\+Management\+Sap\+Provider}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{m\+\_\+handover\+Management\+Sap\+Provider}{m_handoverManagementSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Handover\+Management\+Sap\+Provider}$\ast$ ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::m\+\_\+handover\+Management\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a5c2d8213a131a7d934c2b5ef4907597b}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a5c2d8213a131a7d934c2b5ef4907597b}


Receive A\+PI calls from the e\+NodeB R\+RC instance. 

\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!m\+\_\+handover\+Management\+Sap\+User@{m\+\_\+handover\+Management\+Sap\+User}}
\index{m\+\_\+handover\+Management\+Sap\+User@{m\+\_\+handover\+Management\+Sap\+User}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{m\+\_\+handover\+Management\+Sap\+User}{m_handoverManagementSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Handover\+Management\+Sap\+User}$\ast$ ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::m\+\_\+handover\+Management\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_a117b9e0cb1751dc8b2b96532c2915679}


Interface to the e\+NodeB R\+RC instance. 

\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!m\+\_\+neighbour\+Cell\+Measures@{m\+\_\+neighbour\+Cell\+Measures}}
\index{m\+\_\+neighbour\+Cell\+Measures@{m\+\_\+neighbour\+Cell\+Measures}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{m\+\_\+neighbour\+Cell\+Measures}{m_neighbourCellMeasures}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Measurement\+Table\+\_\+t} ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::m\+\_\+neighbour\+Cell\+Measures\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_ab02d6372aec766c1d6e7611111456fa4}


Table of measurement reports from all U\+Es. 

\index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!m\+\_\+neighbour\+Cell\+Offset@{m\+\_\+neighbour\+Cell\+Offset}}
\index{m\+\_\+neighbour\+Cell\+Offset@{m\+\_\+neighbour\+Cell\+Offset}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{m\+\_\+neighbour\+Cell\+Offset}{m_neighbourCellOffset}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::m\+\_\+neighbour\+Cell\+Offset\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_afe15ce0bd178565ef3f42d83ada4428b}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_afe15ce0bd178565ef3f42d83ada4428b}
The {\ttfamily Neighbour\+Cell\+Offset} attribute. Minimum offset between the serving and the best neighbour cell to trigger the handover. Expressed in quantized range of \mbox{[}0..34\mbox{]} as per Section 9.\+1.\+7 of 3\+G\+PP TS 36.\+133. \index{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}!m\+\_\+serving\+Cell\+Threshold@{m\+\_\+serving\+Cell\+Threshold}}
\index{m\+\_\+serving\+Cell\+Threshold@{m\+\_\+serving\+Cell\+Threshold}!ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm@{ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm}}
\subsubsection[{\texorpdfstring{m\+\_\+serving\+Cell\+Threshold}{m_servingCellThreshold}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+A2\+A4\+Rsrq\+Handover\+Algorithm\+::m\+\_\+serving\+Cell\+Threshold\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}{}\label{classns3_1_1A2A4RsrqHandoverAlgorithm_acb5609bb57548a7cd9fe92fbef4dd99b}
The {\ttfamily Serving\+Cell\+Threshold} attribute. If the R\+S\+RQ of the serving cell is worse than this threshold, neighbour cells are consider for handover. Expressed in quantized range of \mbox{[}0..34\mbox{]} as per Section 9.\+1.\+7 of 3\+G\+PP TS 36.\+133. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/model/\hyperlink{a2-a4-rsrq-handover-algorithm_8h}{a2-\/a4-\/rsrq-\/handover-\/algorithm.\+h}\item 
lte/model/\hyperlink{a2-a4-rsrq-handover-algorithm_8cc}{a2-\/a4-\/rsrq-\/handover-\/algorithm.\+cc}\end{DoxyCompactItemize}
