\hypertarget{classLenaDataPhyErrorModelTestCase}{}\section{Lena\+Data\+Phy\+Error\+Model\+Test\+Case Class Reference}
\label{classLenaDataPhyErrorModelTestCase}\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}


{\ttfamily \#include $<$lte-\/test-\/phy-\/error-\/model.\+h$>$}



Inheritance diagram for Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLenaDataPhyErrorModelTestCase_a1ab39f50c546e5131a7b2f8496ccdc49}{Lena\+Data\+Phy\+Error\+Model\+Test\+Case} (uint16\+\_\+t n\+User, uint16\+\_\+t dist, double bler\+Ref, uint16\+\_\+t tolerance\+Rx\+Packets, \hyperlink{classns3_1_1Time}{Time} stats\+Start\+Time, uint32\+\_\+t rng\+Run)
\item 
virtual \hyperlink{classLenaDataPhyErrorModelTestCase_ae5e08c13d9ca0b1f9f273c58ef9efcc7}{$\sim$\+Lena\+Data\+Phy\+Error\+Model\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLenaDataPhyErrorModelTestCase_a363738c5b8d73b6b3398dc526faf7792}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::string \hyperlink{classLenaDataPhyErrorModelTestCase_a31d5f8d7e34775fd382a1c2cde0292ed}{Build\+Name\+String} (uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint32\+\_\+t rng\+Run)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \hyperlink{classLenaDataPhyErrorModelTestCase_a7d8a550f6403ea7a365759bbbffbacb4}{m\+\_\+n\+User}
\item 
uint16\+\_\+t \hyperlink{classLenaDataPhyErrorModelTestCase_af0a143c87cace37877df80a6a04ba765}{m\+\_\+dist}
\item 
double \hyperlink{classLenaDataPhyErrorModelTestCase_ae71840486376fab393228e5cd12b46ca}{m\+\_\+bler\+Ref}
\item 
uint16\+\_\+t \hyperlink{classLenaDataPhyErrorModelTestCase_aee9e59c87518a69c4a4e9359af2bbc96}{m\+\_\+tolerance\+Rx\+Packets}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classLenaDataPhyErrorModelTestCase_aeff30e1e43b3bcda6fab63889dbe0996}{m\+\_\+stats\+Start\+Time}
\begin{DoxyCompactList}\small\item\em Extra time in the beginning of simulation to allow R\+RC connection establishment + S\+RS. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classLenaDataPhyErrorModelTestCase_a6735963eff8c54a2551a0f7c0f951a8d}{m\+\_\+rng\+Run}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
This system test program creates different test cases with a single e\+NB and several U\+Es, all having the same Radio Bearer specification. In each test case, the U\+Es see the same S\+I\+NR from the e\+NB; different test cases are implemented obtained by using different S\+I\+NR values and different numbers of U\+Es. The test consists on ... 

\subsection{Constructor \& Destructor Documentation}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lena\+Data\+Phy\+Error\+Model\+Test\+Case(uint16\+\_\+t n\+User, uint16\+\_\+t dist, double bler\+Ref, uint16\+\_\+t tolerance\+Rx\+Packets, Time stats\+Start\+Time, uint32\+\_\+t rng\+Run)}{LenaDataPhyErrorModelTestCase(uint16_t nUser, uint16_t dist, double blerRef, uint16_t toleranceRxPackets, Time statsStartTime, uint32_t rngRun)}}]{\setlength{\rightskip}{0pt plus 5cm}Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::\+Lena\+Data\+Phy\+Error\+Model\+Test\+Case (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{n\+User, }
\item[{uint16\+\_\+t}]{dist, }
\item[{double}]{bler\+Ref, }
\item[{uint16\+\_\+t}]{tolerance\+Rx\+Packets, }
\item[{{\bf Time}}]{stats\+Start\+Time, }
\item[{uint32\+\_\+t}]{rng\+Run}
\end{DoxyParamCaption}
)}\hypertarget{classLenaDataPhyErrorModelTestCase_a1ab39f50c546e5131a7b2f8496ccdc49}{}\label{classLenaDataPhyErrorModelTestCase_a1ab39f50c546e5131a7b2f8496ccdc49}

\begin{DoxyCode}
145   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{classLenaDataPhyErrorModelTestCase_a31d5f8d7e34775fd382a1c2cde0292ed}{BuildNameString} (nUser, dist, rngRun)),
146     \hyperlink{classLenaDataPhyErrorModelTestCase_a7d8a550f6403ea7a365759bbbffbacb4}{m\_nUser} (nUser),
147     \hyperlink{classLenaDataPhyErrorModelTestCase_af0a143c87cace37877df80a6a04ba765}{m\_dist} (dist),
148     \hyperlink{classLenaDataPhyErrorModelTestCase_ae71840486376fab393228e5cd12b46ca}{m\_blerRef} (blerRef),
149     \hyperlink{classLenaDataPhyErrorModelTestCase_aee9e59c87518a69c4a4e9359af2bbc96}{m\_toleranceRxPackets} (toleranceRxPackets),
150     \hyperlink{classLenaDataPhyErrorModelTestCase_aeff30e1e43b3bcda6fab63889dbe0996}{m\_statsStartTime} (statsStartTime),
151     \hyperlink{classLenaDataPhyErrorModelTestCase_a6735963eff8c54a2551a0f7c0f951a8d}{m\_rngRun} (rngRun)
152 \{
153 \}
\end{DoxyCode}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!````~Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{$\sim$\+Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\index{````~Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{$\sim$\+Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Lena\+Data\+Phy\+Error\+Model\+Test\+Case()}{~LenaDataPhyErrorModelTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::$\sim$\+Lena\+Data\+Phy\+Error\+Model\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classLenaDataPhyErrorModelTestCase_ae5e08c13d9ca0b1f9f273c58ef9efcc7}{}\label{classLenaDataPhyErrorModelTestCase_ae5e08c13d9ca0b1f9f273c58ef9efcc7}

\begin{DoxyCode}
156 \{
157 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!Build\+Name\+String@{Build\+Name\+String}}
\index{Build\+Name\+String@{Build\+Name\+String}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Build\+Name\+String(uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint32\+\_\+t rng\+Run)}{BuildNameString(uint16_t nUser, uint16_t dist, uint32_t rngRun)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::\+Build\+Name\+String (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{n\+User, }
\item[{uint16\+\_\+t}]{dist, }
\item[{uint32\+\_\+t}]{rng\+Run}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLenaDataPhyErrorModelTestCase_a31d5f8d7e34775fd382a1c2cde0292ed}{}\label{classLenaDataPhyErrorModelTestCase_a31d5f8d7e34775fd382a1c2cde0292ed}

\begin{DoxyCode}
136 \{
137   std::ostringstream oss;
138   oss << \textcolor{stringliteral}{"DataPhyErrorModel "} <<  nUser << \textcolor{stringliteral}{" UEs, distance "} << dist << \textcolor{stringliteral}{" m, RngRun "} << rngRun;
139   \textcolor{keywordflow}{return} oss.str ();
140 \}
\end{DoxyCode}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLenaDataPhyErrorModelTestCase_a363738c5b8d73b6b3398dc526faf7792}{}\label{classLenaDataPhyErrorModelTestCase_a363738c5b8d73b6b3398dc526faf7792}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
161 \{
162   
163   \textcolor{keywordtype}{double} \hyperlink{lte__cqi__generation_8m_a197619a3539acfc577325d6e41b6ce95}{ber} = 0.03;
164   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteAmc::Ber"}, DoubleValue (ber));
165   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteAmc::AmcModel"}, \hyperlink{classns3_1_1EnumValue}{EnumValue} (LteAmc::PiroEW2010));
166   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::CtrlErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
167   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::DataErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
168   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::RrFfMacScheduler::HarqEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
169   \hyperlink{group__config_ga0e12663a7bd119b65d0a219a578f2a3c}{Config::SetGlobal} (\textcolor{stringliteral}{"RngRun"}, IntegerValue (\hyperlink{classLenaDataPhyErrorModelTestCase_a6735963eff8c54a2551a0f7c0f951a8d}{m\_rngRun}));
170 
171   \textcolor{comment}{//Disable Uplink Power Control}
172   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteUePhy::EnableUplinkPowerControl"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
173 
174   \textcolor{comment}{/*}
175 \textcolor{comment}{   * Initialize Simulation Scenario: 1 eNB and m\_nUser UEs}
176 \textcolor{comment}{   */}
177 
178   int64\_t stream = 1;
179   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lena = CreateObject<LteHelper> ();
180   
181   \textcolor{comment}{// Create Nodes: eNodeB and UE}
182   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
183   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
184   enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
185   ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (\hyperlink{classLenaDataPhyErrorModelTestCase_a7d8a550f6403ea7a365759bbbffbacb4}{m\_nUser});
186 
187   \textcolor{comment}{// Install Mobility Model}
188   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
189   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
190   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (enbNodes);
191   BuildingsHelper::Install (enbNodes);
192   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
193   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (ueNodes);
194   BuildingsHelper::Install (ueNodes);
195   
196   \textcolor{comment}{// remove random shadowing component}
197   lena->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PathlossModel"}, StringValue (\textcolor{stringliteral}{"ns3::HybridBuildingsPropagationLossModel"})
      );
198   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaOutdoor"}, DoubleValue (0.0));
199   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaIndoor"}, DoubleValue (0.0));
200   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaExtWalls"}, DoubleValue (0.0));
201 
202   \textcolor{comment}{// Create Devices and install them in the Nodes (eNB and UE)}
203   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbDevs;
204   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueDevs;
205   lena->\hyperlink{classns3_1_1LteHelper_a8f86e55b8b80a81732c4b2df00fb25d5}{SetSchedulerType} (\textcolor{stringliteral}{"ns3::RrFfMacScheduler"});
206   lena->\hyperlink{classns3_1_1LteHelper_a38f8c7f4592b31c0f3dedb53e7909742}{SetSchedulerAttribute} (\textcolor{stringliteral}{"UlCqiFilter"}, \hyperlink{classns3_1_1EnumValue}{EnumValue} (
      FfMacScheduler::PUSCH\_UL\_CQI));
207   
208   enbDevs = lena->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbNodes);
209   stream += lena->\hyperlink{classns3_1_1LteHelper_ae90d941582aa49a1b28c9301ece35b07}{AssignStreams} (enbDevs, stream);
210   ueDevs = lena->\hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ueNodes);
211   stream += lena->\hyperlink{classns3_1_1LteHelper_ae90d941582aa49a1b28c9301ece35b07}{AssignStreams} (ueDevs, stream);
212 
213   \textcolor{comment}{// Attach a UE to a eNB}
214   lena->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueDevs, enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
215 
216   \textcolor{comment}{// Activate an EPS bearer}
217   \textcolor{keyword}{enum} \hyperlink{structns3_1_1EpsBearer_aecf0c67109c5eb4ec0b07226fff5885e}{EpsBearer::Qci} q = EpsBearer::GBR\_CONV\_VOICE;
218   \hyperlink{structns3_1_1EpsBearer}{EpsBearer} bearer (q);
219   lena->\hyperlink{classns3_1_1LteHelper_ac896e16cf162e4beeaa292d39ab1b700}{ActivateDataRadioBearer} (ueDevs, bearer);
220   
221 
222   \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbNetDevice>} lteEnbDev = enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetObject<
      \hyperlink{classns3_1_1LteEnbNetDevice}{LteEnbNetDevice}> ();
223   \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbPhy>} enbPhy = lteEnbDev->\hyperlink{classns3_1_1LteEnbNetDevice_a58db72130e0740f16a5e03b22e4a10a4}{GetPhy} ();
224   enbPhy->SetAttribute (\textcolor{stringliteral}{"TxPower"}, DoubleValue (43.0));
225   enbPhy->SetAttribute (\textcolor{stringliteral}{"NoiseFigure"}, DoubleValue (5.0));
226   \textcolor{comment}{// place the HeNB over the default rooftop level (20 mt.)}
227   \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} mm = enbNodes.Get (0)->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1MobilityModel}{MobilityModel}> ();
228   mm->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0.0, 0.0, 30.0));
229 
230   \textcolor{comment}{// Set UEs' position and power}
231   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classLenaDataPhyErrorModelTestCase_a7d8a550f6403ea7a365759bbbffbacb4}{m\_nUser}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
232     \{
233       \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} mm = ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1MobilityModel}{MobilityModel}> ();
234       mm->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (\hyperlink{classLenaDataPhyErrorModelTestCase_af0a143c87cace37877df80a6a04ba765}{m\_dist}, 0.0, 1.0));
235       \hyperlink{classns3_1_1Ptr}{Ptr<LteUeNetDevice>} lteUeDev = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->GetObject<
      \hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ();
236       \hyperlink{classns3_1_1Ptr}{Ptr<LteUePhy>} uePhy = lteUeDev->\hyperlink{classns3_1_1LteUeNetDevice_a2a9940a1e457a8bf3dae87fed4199c7a}{GetPhy} ();
237       uePhy->SetAttribute (\textcolor{stringliteral}{"TxPower"}, DoubleValue (23.0));
238       uePhy->SetAttribute (\textcolor{stringliteral}{"NoiseFigure"}, DoubleValue (9.0));
239     \}
240     
241   \hyperlink{classns3_1_1Time}{Time} statsDuration = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0);
242   Simulator::Stop (\hyperlink{classLenaDataPhyErrorModelTestCase_aeff30e1e43b3bcda6fab63889dbe0996}{m\_statsStartTime} + statsDuration - \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0001));
243 
244   lena->\hyperlink{classns3_1_1LteHelper_abadfdd04d30b261e9b6f0846b4784928}{EnableRlcTraces} ();
245   \hyperlink{classns3_1_1Ptr}{Ptr<RadioBearerStatsCalculator>} rlcStats = lena->
      \hyperlink{classns3_1_1LteHelper_a6eb438ccf69642e3863adea4991fa2ca}{GetRlcStats} ();
246   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"StartTime"}, TimeValue (\hyperlink{classLenaDataPhyErrorModelTestCase_aeff30e1e43b3bcda6fab63889dbe0996}{m\_statsStartTime}));
247   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"EpochDuration"}, TimeValue (statsDuration));
248 
249   Simulator::Run ();
250 
251   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tTest downlink data shared channels (PDSCH)"});
252   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Test with "} << m\_nUser << \textcolor{stringliteral}{" user(s) at distance "} << 
      \hyperlink{classLenaDataPhyErrorModelTestCase_af0a143c87cace37877df80a6a04ba765}{m\_dist} << \textcolor{stringliteral}{" expected BLER "} << \hyperlink{classLenaDataPhyErrorModelTestCase_ae71840486376fab393228e5cd12b46ca}{m\_blerRef});
253   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classLenaDataPhyErrorModelTestCase_a7d8a550f6403ea7a365759bbbffbacb4}{m\_nUser}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
254     \{
255       \textcolor{comment}{// get the imsi}
256       uint64\_t imsi = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->GetObject<\hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ()->GetImsi ();
257       uint8\_t lcId = 3;
258 
259       \textcolor{keywordtype}{double} dlRxPackets = rlcStats->\hyperlink{classns3_1_1RadioBearerStatsCalculator_a164d36dc82ed7dae2f4d748da502589a}{GetDlRxPackets} (imsi, lcId);
260       \textcolor{keywordtype}{double} dlTxPackets = rlcStats->\hyperlink{classns3_1_1RadioBearerStatsCalculator_a55f9b9c664e1389ad9edf704e385299c}{GetDlTxPackets} (imsi, lcId);
261       \textcolor{keywordtype}{double} dlBler =  1.0 - (dlRxPackets/dlTxPackets);
262       \textcolor{keywordtype}{double} expectedDlRxPackets = dlTxPackets -dlTxPackets*\hyperlink{classLenaDataPhyErrorModelTestCase_ae71840486376fab393228e5cd12b46ca}{m\_blerRef};
263       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tUser "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" imsi "} << imsi << \textcolor{stringliteral}{" DOWNLINK"}
264                    << \textcolor{stringliteral}{" pkts rx "} << dlRxPackets << \textcolor{stringliteral}{" tx "} << dlTxPackets
265                    << \textcolor{stringliteral}{" BLER "} << dlBler << \textcolor{stringliteral}{" Err "} << std::fabs (m\_blerRef - dlBler)
266                    << \textcolor{stringliteral}{" expected rx "} << expectedDlRxPackets
267                    << \textcolor{stringliteral}{" difference "} << std::abs (expectedDlRxPackets - dlRxPackets)
268                    << \textcolor{stringliteral}{" tolerance "} << \hyperlink{classLenaDataPhyErrorModelTestCase_aee9e59c87518a69c4a4e9359af2bbc96}{m\_toleranceRxPackets});
269       \hyperlink{unused_8h_a3ba03ad859378e9f01285afb60f0e3ab}{NS\_UNUSED} (dlBler);
270 
271       \textcolor{comment}{// sanity check for whether the tx packets reported by the stats are correct}
272       \textcolor{comment}{// we expect one packet per TTI}
273       \textcolor{keywordtype}{double} expectedDlTxPackets = statsDuration.\hyperlink{classns3_1_1Time_aba3428a8b6c4c8d9014ce44145081f34}{GetMilliSeconds} ();
274       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (dlTxPackets, expectedDlTxPackets, 
      expectedDlTxPackets * 0.005, 
275                                  \textcolor{stringliteral}{" too different DL TX packets reported"});
276 
277       \textcolor{comment}{// this is the main test condition: check that the RX packets are within the expected range}
278       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (dlRxPackets, expectedDlRxPackets, 
      \hyperlink{classLenaDataPhyErrorModelTestCase_aee9e59c87518a69c4a4e9359af2bbc96}{m\_toleranceRxPackets}, 
279                                  \textcolor{stringliteral}{" too different DL RX packets reported"});
280     \}
281 
282 
283   Simulator::Destroy ();
284 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+bler\+Ref@{m\+\_\+bler\+Ref}}
\index{m\+\_\+bler\+Ref@{m\+\_\+bler\+Ref}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+bler\+Ref}{m_blerRef}}]{\setlength{\rightskip}{0pt plus 5cm}double Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+bler\+Ref\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDataPhyErrorModelTestCase_ae71840486376fab393228e5cd12b46ca}{}\label{classLenaDataPhyErrorModelTestCase_ae71840486376fab393228e5cd12b46ca}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+dist@{m\+\_\+dist}}
\index{m\+\_\+dist@{m\+\_\+dist}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+dist}{m_dist}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+dist\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDataPhyErrorModelTestCase_af0a143c87cace37877df80a6a04ba765}{}\label{classLenaDataPhyErrorModelTestCase_af0a143c87cace37877df80a6a04ba765}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+n\+User@{m\+\_\+n\+User}}
\index{m\+\_\+n\+User@{m\+\_\+n\+User}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+n\+User}{m_nUser}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+n\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDataPhyErrorModelTestCase_a7d8a550f6403ea7a365759bbbffbacb4}{}\label{classLenaDataPhyErrorModelTestCase_a7d8a550f6403ea7a365759bbbffbacb4}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+rng\+Run@{m\+\_\+rng\+Run}}
\index{m\+\_\+rng\+Run@{m\+\_\+rng\+Run}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+rng\+Run}{m_rngRun}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+rng\+Run\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDataPhyErrorModelTestCase_a6735963eff8c54a2551a0f7c0f951a8d}{}\label{classLenaDataPhyErrorModelTestCase_a6735963eff8c54a2551a0f7c0f951a8d}
\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+stats\+Start\+Time@{m\+\_\+stats\+Start\+Time}}
\index{m\+\_\+stats\+Start\+Time@{m\+\_\+stats\+Start\+Time}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+stats\+Start\+Time}{m_statsStartTime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+stats\+Start\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDataPhyErrorModelTestCase_aeff30e1e43b3bcda6fab63889dbe0996}{}\label{classLenaDataPhyErrorModelTestCase_aeff30e1e43b3bcda6fab63889dbe0996}


Extra time in the beginning of simulation to allow R\+RC connection establishment + S\+RS. 

\index{Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+tolerance\+Rx\+Packets@{m\+\_\+tolerance\+Rx\+Packets}}
\index{m\+\_\+tolerance\+Rx\+Packets@{m\+\_\+tolerance\+Rx\+Packets}!Lena\+Data\+Phy\+Error\+Model\+Test\+Case@{Lena\+Data\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+tolerance\+Rx\+Packets}{m_toleranceRxPackets}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Data\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+tolerance\+Rx\+Packets\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDataPhyErrorModelTestCase_aee9e59c87518a69c4a4e9359af2bbc96}{}\label{classLenaDataPhyErrorModelTestCase_aee9e59c87518a69c4a4e9359af2bbc96}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/test/\hyperlink{lte-test-phy-error-model_8h}{lte-\/test-\/phy-\/error-\/model.\+h}\item 
lte/test/\hyperlink{lte-test-phy-error-model_8cc}{lte-\/test-\/phy-\/error-\/model.\+cc}\end{DoxyCompactItemize}
