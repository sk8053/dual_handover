\hypertarget{classns3_1_1Ipv4FlowProbe}{}\section{ns3\+:\+:Ipv4\+Flow\+Probe Class Reference}
\label{classns3_1_1Ipv4FlowProbe}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}


Class that monitors flows at the I\+Pv4 layer of a \hyperlink{classns3_1_1Node}{Node}.  




{\ttfamily \#include $<$ipv4-\/flow-\/probe.\+h$>$}



Inheritance diagram for ns3\+:\+:Ipv4\+Flow\+Probe\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Ipv4\+Flow\+Probe\+:
% FIG 1
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179}{Drop\+Reason} \{ \\*
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a788583a6bda127b650efb4ad2f194dfa}{D\+R\+O\+P\+\_\+\+N\+O\+\_\+\+R\+O\+U\+TE} = 0, 
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a17b6754e3723d8983e17dfee84f2edd4}{D\+R\+O\+P\+\_\+\+T\+T\+L\+\_\+\+E\+X\+P\+I\+RE}, 
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0f8cc3d4cdef6bd11db276991ba5be83}{D\+R\+O\+P\+\_\+\+B\+A\+D\+\_\+\+C\+H\+E\+C\+K\+S\+UM}, 
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ae1b5d1b2d1f85fdb346e70c3d4cdc66d}{D\+R\+O\+P\+\_\+\+Q\+U\+E\+UE}, 
\\*
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac8adea45ab950ee1313a91b4d69fd6a7}{D\+R\+O\+P\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+D\+I\+SC}, 
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a70419383e53bbcc568c10c69f5084f6f}{D\+R\+O\+P\+\_\+\+I\+N\+T\+E\+R\+F\+A\+C\+E\+\_\+\+D\+O\+WN}, 
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0a724e0ab6697453a260527f3a7a6893}{D\+R\+O\+P\+\_\+\+R\+O\+U\+T\+E\+\_\+\+E\+R\+R\+OR}, 
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179adf9598ecb45c5ef84c3bd0a54f6143bb}{D\+R\+O\+P\+\_\+\+F\+R\+A\+G\+M\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+UT}, 
\\*
\hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac35ddf87d8b17302be103ec557e26c04}{D\+R\+O\+P\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+R\+E\+A\+S\+ON}
 \}\begin{DoxyCompactList}\small\item\em enumeration of possible reasons why a packet may be dropped \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ipv4FlowProbe_ac22ef10899500d98945fc8140fab1cb4}{Ipv4\+Flow\+Probe} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1FlowMonitor}{Flow\+Monitor} $>$ monitor, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4FlowClassifier}{Ipv4\+Flow\+Classifier} $>$ \hyperlink{design_8txt_af9e6b398b148789960232a87c72a107e}{classifier}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ node)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Ipv4FlowProbe_a8e784aef14c48ab4f5dd309c973440d1}{$\sim$\+Ipv4\+Flow\+Probe} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1Ipv4FlowProbe_a3f4be32333ce5e20e22db10cafd98446}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1Ipv4FlowProbe_ae8bcb5588329db049f1c04191fec4d70}{Do\+Dispose} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1Ipv4FlowProbe_a4f4e830695f0b15a22bb997ff25409ed}{Send\+Outgoing\+Logger} (const \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} \&ip\+Header, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ ip\+Payload, uint32\+\_\+t interface)
\item 
void \hyperlink{classns3_1_1Ipv4FlowProbe_ad685ed3b3a256105f039723eef98739b}{Forward\+Logger} (const \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} \&ip\+Header, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ ip\+Payload, uint32\+\_\+t interface)
\item 
void \hyperlink{classns3_1_1Ipv4FlowProbe_a81ca7d15147dd7ac7b0502f37a95972e}{Forward\+Up\+Logger} (const \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} \&ip\+Header, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ ip\+Payload, uint32\+\_\+t interface)
\item 
void \hyperlink{classns3_1_1Ipv4FlowProbe_a6991c31e2d96a773acb0dcf5ed5161f8}{Drop\+Logger} (const \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} \&ip\+Header, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ ip\+Payload, \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1}{Ipv4\+L3\+Protocol\+::\+Drop\+Reason} reason, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4}{Ipv4} $>$ ipv4, uint32\+\_\+t if\+Index)
\item 
void \hyperlink{classns3_1_1Ipv4FlowProbe_a6a7e09445323c3e491d3ce212f7f55dd}{Queue\+Drop\+Logger} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ ip\+Payload)
\item 
void \hyperlink{classns3_1_1Ipv4FlowProbe_ac4fc1a210a1d0540d18caf3dec10a50e}{Queue\+Disc\+Drop\+Logger} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1QueueDiscItem}{Queue\+Disc\+Item} $>$ item)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4FlowClassifier}{Ipv4\+Flow\+Classifier} $>$ \hyperlink{classns3_1_1Ipv4FlowProbe_ae4e260f1b2fa6cacbab3f6fec914172e}{m\+\_\+classifier}
\begin{DoxyCompactList}\small\item\em the \hyperlink{classns3_1_1Ipv4FlowClassifier}{Ipv4\+Flow\+Classifier} this probe is associated with \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4L3Protocol}{Ipv4\+L3\+Protocol} $>$ \hyperlink{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}{m\+\_\+ipv4}
\begin{DoxyCompactList}\small\item\em the \hyperlink{classns3_1_1Ipv4L3Protocol}{Ipv4\+L3\+Protocol} this probe is bound to \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Class that monitors flows at the I\+Pv4 layer of a \hyperlink{classns3_1_1Node}{Node}. 

For each node in the simulation, one instance of the class \hyperlink{classns3_1_1Ipv4FlowProbe}{Ipv4\+Flow\+Probe} is created to monitor that node. \hyperlink{classns3_1_1Ipv4FlowProbe}{Ipv4\+Flow\+Probe} accomplishes this by connecting callbacks to trace sources in the \hyperlink{classns3_1_1Ipv4L3Protocol}{Ipv4\+L3\+Protocol} interface of the node. 

\subsection{Member Enumeration Documentation}
\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Drop\+Reason@{Drop\+Reason}}
\index{Drop\+Reason@{Drop\+Reason}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Drop\+Reason}{DropReason}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf ns3\+::\+Ipv4\+Flow\+Probe\+::\+Drop\+Reason}}\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179}


enumeration of possible reasons why a packet may be dropped 

\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{D\+R\+O\+P\+\_\+\+N\+O\+\_\+\+R\+O\+U\+TE@{D\+R\+O\+P\+\_\+\+N\+O\+\_\+\+R\+O\+U\+TE}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+N\+O\+\_\+\+R\+O\+U\+TE@{D\+R\+O\+P\+\_\+\+N\+O\+\_\+\+R\+O\+U\+TE}}\item[{\em 
D\+R\+O\+P\+\_\+\+N\+O\+\_\+\+R\+O\+U\+TE\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a788583a6bda127b650efb4ad2f194dfa}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a788583a6bda127b650efb4ad2f194dfa}
}]\hyperlink{classns3_1_1Packet}{Packet} dropped due to missing route to the destination. \index{D\+R\+O\+P\+\_\+\+T\+T\+L\+\_\+\+E\+X\+P\+I\+RE@{D\+R\+O\+P\+\_\+\+T\+T\+L\+\_\+\+E\+X\+P\+I\+RE}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+T\+T\+L\+\_\+\+E\+X\+P\+I\+RE@{D\+R\+O\+P\+\_\+\+T\+T\+L\+\_\+\+E\+X\+P\+I\+RE}}\item[{\em 
D\+R\+O\+P\+\_\+\+T\+T\+L\+\_\+\+E\+X\+P\+I\+RE\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a17b6754e3723d8983e17dfee84f2edd4}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a17b6754e3723d8983e17dfee84f2edd4}
}]\hyperlink{classns3_1_1Packet}{Packet} dropped due to T\+TL decremented to zero during I\+Pv4 forwarding. \index{D\+R\+O\+P\+\_\+\+B\+A\+D\+\_\+\+C\+H\+E\+C\+K\+S\+UM@{D\+R\+O\+P\+\_\+\+B\+A\+D\+\_\+\+C\+H\+E\+C\+K\+S\+UM}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+B\+A\+D\+\_\+\+C\+H\+E\+C\+K\+S\+UM@{D\+R\+O\+P\+\_\+\+B\+A\+D\+\_\+\+C\+H\+E\+C\+K\+S\+UM}}\item[{\em 
D\+R\+O\+P\+\_\+\+B\+A\+D\+\_\+\+C\+H\+E\+C\+K\+S\+UM\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0f8cc3d4cdef6bd11db276991ba5be83}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0f8cc3d4cdef6bd11db276991ba5be83}
}]\hyperlink{classns3_1_1Packet}{Packet} dropped due to invalid checksum in the I\+Pv4 header. \index{D\+R\+O\+P\+\_\+\+Q\+U\+E\+UE@{D\+R\+O\+P\+\_\+\+Q\+U\+E\+UE}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+Q\+U\+E\+UE@{D\+R\+O\+P\+\_\+\+Q\+U\+E\+UE}}\item[{\em 
D\+R\+O\+P\+\_\+\+Q\+U\+E\+UE\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ae1b5d1b2d1f85fdb346e70c3d4cdc66d}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ae1b5d1b2d1f85fdb346e70c3d4cdc66d}
}]\hyperlink{classns3_1_1Packet}{Packet} dropped due to queue overflow. Note\+: only works for Net\+Devices that provide a Tx\+Queue attribute of type \hyperlink{classns3_1_1Queue}{Queue} with a Drop trace source. It currently works with Csma and Point\+To\+Point devices, but not with Wi\+Fi or Wi\+Max. \index{D\+R\+O\+P\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+D\+I\+SC@{D\+R\+O\+P\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+D\+I\+SC}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+D\+I\+SC@{D\+R\+O\+P\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+D\+I\+SC}}\item[{\em 
D\+R\+O\+P\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+D\+I\+SC\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac8adea45ab950ee1313a91b4d69fd6a7}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac8adea45ab950ee1313a91b4d69fd6a7}
}]\hyperlink{classns3_1_1Packet}{Packet} dropped by the queue disc. \index{D\+R\+O\+P\+\_\+\+I\+N\+T\+E\+R\+F\+A\+C\+E\+\_\+\+D\+O\+WN@{D\+R\+O\+P\+\_\+\+I\+N\+T\+E\+R\+F\+A\+C\+E\+\_\+\+D\+O\+WN}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+I\+N\+T\+E\+R\+F\+A\+C\+E\+\_\+\+D\+O\+WN@{D\+R\+O\+P\+\_\+\+I\+N\+T\+E\+R\+F\+A\+C\+E\+\_\+\+D\+O\+WN}}\item[{\em 
D\+R\+O\+P\+\_\+\+I\+N\+T\+E\+R\+F\+A\+C\+E\+\_\+\+D\+O\+WN\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a70419383e53bbcc568c10c69f5084f6f}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a70419383e53bbcc568c10c69f5084f6f}
}]Interface is down so can not send packet \index{D\+R\+O\+P\+\_\+\+R\+O\+U\+T\+E\+\_\+\+E\+R\+R\+OR@{D\+R\+O\+P\+\_\+\+R\+O\+U\+T\+E\+\_\+\+E\+R\+R\+OR}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+R\+O\+U\+T\+E\+\_\+\+E\+R\+R\+OR@{D\+R\+O\+P\+\_\+\+R\+O\+U\+T\+E\+\_\+\+E\+R\+R\+OR}}\item[{\em 
D\+R\+O\+P\+\_\+\+R\+O\+U\+T\+E\+\_\+\+E\+R\+R\+OR\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0a724e0ab6697453a260527f3a7a6893}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0a724e0ab6697453a260527f3a7a6893}
}]Route error \index{D\+R\+O\+P\+\_\+\+F\+R\+A\+G\+M\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+UT@{D\+R\+O\+P\+\_\+\+F\+R\+A\+G\+M\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+UT}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+F\+R\+A\+G\+M\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+UT@{D\+R\+O\+P\+\_\+\+F\+R\+A\+G\+M\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+UT}}\item[{\em 
D\+R\+O\+P\+\_\+\+F\+R\+A\+G\+M\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+UT\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179adf9598ecb45c5ef84c3bd0a54f6143bb}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179adf9598ecb45c5ef84c3bd0a54f6143bb}
}]Fragment timeout exceeded \index{D\+R\+O\+P\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+R\+E\+A\+S\+ON@{D\+R\+O\+P\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+R\+E\+A\+S\+ON}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!D\+R\+O\+P\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+R\+E\+A\+S\+ON@{D\+R\+O\+P\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+R\+E\+A\+S\+ON}}\item[{\em 
D\+R\+O\+P\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+R\+E\+A\+S\+ON\hypertarget{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac35ddf87d8b17302be103ec557e26c04}{}\label{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac35ddf87d8b17302be103ec557e26c04}
}]Fallback reason (no known reason) \end{description}
\end{Desc}

\begin{DoxyCode}
58   \{
60     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a788583a6bda127b650efb4ad2f194dfa}{DROP\_NO\_ROUTE} = 0,
61 
63     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a17b6754e3723d8983e17dfee84f2edd4}{DROP\_TTL\_EXPIRE},
64 
66     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0f8cc3d4cdef6bd11db276991ba5be83}{DROP\_BAD\_CHECKSUM},
67 
72     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ae1b5d1b2d1f85fdb346e70c3d4cdc66d}{DROP\_QUEUE},
73 
75     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac8adea45ab950ee1313a91b4d69fd6a7}{DROP\_QUEUE\_DISC},
76 
77     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a70419383e53bbcc568c10c69f5084f6f}{DROP\_INTERFACE\_DOWN},   
78     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0a724e0ab6697453a260527f3a7a6893}{DROP\_ROUTE\_ERROR},   
79     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179adf9598ecb45c5ef84c3bd0a54f6143bb}{DROP\_FRAGMENT\_TIMEOUT}, 
81     \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac35ddf87d8b17302be103ec557e26c04}{DROP\_INVALID\_REASON}, 
82   \};
\end{DoxyCode}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Ipv4\+Flow\+Probe@{Ipv4\+Flow\+Probe}}
\index{Ipv4\+Flow\+Probe@{Ipv4\+Flow\+Probe}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Ipv4\+Flow\+Probe(\+Ptr$<$ Flow\+Monitor $>$ monitor, Ptr$<$ Ipv4\+Flow\+Classifier $>$ classifier, Ptr$<$ Node $>$ node)}{Ipv4FlowProbe(Ptr< FlowMonitor > monitor, Ptr< Ipv4FlowClassifier > classifier, Ptr< Node > node)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Ipv4\+Flow\+Probe\+::\+Ipv4\+Flow\+Probe (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Flow\+Monitor} $>$}]{monitor, }
\item[{{\bf Ptr}$<$ {\bf Ipv4\+Flow\+Classifier} $>$}]{classifier, }
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{node}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4FlowProbe_ac22ef10899500d98945fc8140fab1cb4}{}\label{classns3_1_1Ipv4FlowProbe_ac22ef10899500d98945fc8140fab1cb4}


Constructor. 


\begin{DoxyParams}{Parameters}
{\em monitor} & the \hyperlink{classns3_1_1FlowMonitor}{Flow\+Monitor} this probe is associated with \\
\hline
{\em classifier} & the \hyperlink{classns3_1_1Ipv4FlowClassifier}{Ipv4\+Flow\+Classifier} this probe is associated with \\
\hline
{\em node} & the \hyperlink{classns3_1_1Node}{Node} this probe is associated with \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
226   : \hyperlink{classns3_1_1FlowProbe_ae0c5dae57bca03719808497381a24776}{FlowProbe} (monitor),
227     \hyperlink{classns3_1_1Ipv4FlowProbe_ae4e260f1b2fa6cacbab3f6fec914172e}{m\_classifier} (\hyperlink{design_8txt_af9e6b398b148789960232a87c72a107e}{classifier})
228 \{
229   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << node->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} ());
230 
231   \hyperlink{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}{m\_ipv4} = node->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<Ipv4L3Protocol> ();
232 
233   \textcolor{keywordflow}{if} (!m\_ipv4->TraceConnectWithoutContext (\textcolor{stringliteral}{"SendOutgoing"},
234                                            \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1Ipv4FlowProbe_a4f4e830695f0b15a22bb997ff25409ed}{Ipv4FlowProbe::SendOutgoingLogger}, Ptr<Ipv4FlowProbe> (\textcolor{keyword}{this}))))
235     \{
236       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"trace fail"});
237     \}
238   \textcolor{keywordflow}{if} (!m\_ipv4->TraceConnectWithoutContext (\textcolor{stringliteral}{"UnicastForward"},
239                                            \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1Ipv4FlowProbe_ad685ed3b3a256105f039723eef98739b}{Ipv4FlowProbe::ForwardLogger}, Ptr<Ipv4FlowProbe> (\textcolor{keyword}{this}))))
240     \{
241       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"trace fail"});
242     \}
243   \textcolor{keywordflow}{if} (!m\_ipv4->TraceConnectWithoutContext (\textcolor{stringliteral}{"LocalDeliver"},
244                                            \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1Ipv4FlowProbe_a81ca7d15147dd7ac7b0502f37a95972e}{Ipv4FlowProbe::ForwardUpLogger}, Ptr<Ipv4FlowProbe> (\textcolor{keyword}{this}))))
245     \{
246       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"trace fail"});
247     \}
248 
249   \textcolor{keywordflow}{if} (!m\_ipv4->TraceConnectWithoutContext (\textcolor{stringliteral}{"Drop"},
250                                            \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1Ipv4FlowProbe_a6991c31e2d96a773acb0dcf5ed5161f8}{Ipv4FlowProbe::DropLogger}, Ptr<Ipv4FlowProbe> (\textcolor{keyword}{this}))))
251     \{
252       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"trace fail"});
253     \}
254 
255   std::ostringstream qd;
256   qd << \textcolor{stringliteral}{"/NodeList/"} << node->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{"/$ns3::TrafficControlLayer/RootQueueDiscList/*/Drop"};
257   \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (qd.str (), 
      \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classns3_1_1Ipv4FlowProbe_ac4fc1a210a1d0540d18caf3dec10a50e}{Ipv4FlowProbe::QueueDiscDropLogger}, 
      Ptr<Ipv4FlowProbe> (\textcolor{keyword}{this})));
258 
259   \textcolor{comment}{// code copied from point-to-point-helper.cc}
260   std::ostringstream oss;
261   oss << \textcolor{stringliteral}{"/NodeList/"} << node->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{"/DeviceList/*/TxQueue/Drop"};
262   \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (oss.str (), 
      \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classns3_1_1Ipv4FlowProbe_a6a7e09445323c3e491d3ce212f7f55dd}{Ipv4FlowProbe::QueueDropLogger}, Ptr<Ipv4FlowProbe>
       (\textcolor{keyword}{this})));
263 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!````~Ipv4\+Flow\+Probe@{$\sim$\+Ipv4\+Flow\+Probe}}
\index{````~Ipv4\+Flow\+Probe@{$\sim$\+Ipv4\+Flow\+Probe}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{$\sim$\+Ipv4\+Flow\+Probe()}{~Ipv4FlowProbe()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Ipv4\+Flow\+Probe\+::$\sim$\+Ipv4\+Flow\+Probe (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1Ipv4FlowProbe_a8e784aef14c48ab4f5dd309c973440d1}{}\label{classns3_1_1Ipv4FlowProbe_a8e784aef14c48ab4f5dd309c973440d1}

\begin{DoxyCode}
266 \{
267 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+Flow\+Probe\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1Ipv4FlowProbe_ae8bcb5588329db049f1c04191fec4d70}{}\label{classns3_1_1Ipv4FlowProbe_ae8bcb5588329db049f1c04191fec4d70}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1Ipv4FlowProbe_ae8bcb5588329db049f1c04191fec4d70}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1FlowProbe_ac5447b7e97cab0f6603b448497ecea1e}{ns3\+::\+Flow\+Probe}.


\begin{DoxyCode}
284 \{
285   \hyperlink{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}{m\_ipv4} = 0;
286   \hyperlink{classns3_1_1Ipv4FlowProbe_ae4e260f1b2fa6cacbab3f6fec914172e}{m\_classifier} = 0;
287   \hyperlink{classns3_1_1FlowProbe_ac5447b7e97cab0f6603b448497ecea1e}{FlowProbe::DoDispose} ();
288 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Drop\+Logger@{Drop\+Logger}}
\index{Drop\+Logger@{Drop\+Logger}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Drop\+Logger(const Ipv4\+Header \&ip\+Header, Ptr$<$ const Packet $>$ ip\+Payload, Ipv4\+L3\+Protocol\+::\+Drop\+Reason reason, Ptr$<$ Ipv4 $>$ ipv4, uint32\+\_\+t if\+Index)}{DropLogger(const Ipv4Header &ipHeader, Ptr< const Packet > ipPayload, Ipv4L3Protocol::DropReason reason, Ptr< Ipv4 > ipv4, uint32_t ifIndex)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+Flow\+Probe\+::\+Drop\+Logger (
\begin{DoxyParamCaption}
\item[{const {\bf Ipv4\+Header} \&}]{ip\+Header, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{ip\+Payload, }
\item[{{\bf Ipv4\+L3\+Protocol\+::\+Drop\+Reason}}]{reason, }
\item[{{\bf Ptr}$<$ {\bf Ipv4} $>$}]{ipv4, }
\item[{uint32\+\_\+t}]{if\+Index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_a6991c31e2d96a773acb0dcf5ed5161f8}{}\label{classns3_1_1Ipv4FlowProbe_a6991c31e2d96a773acb0dcf5ed5161f8}
Log a packet being dropped 
\begin{DoxyParams}{Parameters}
{\em ip\+Header} & IP header \\
\hline
{\em ip\+Payload} & IP payload \\
\hline
{\em reason} & drop reason \\
\hline
{\em ipv4} & pointer to the IP object dropping the packet \\
\hline
{\em if\+Index} & interface index \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
378 \{
379 \textcolor{preprocessor}{#if 0}
380   \textcolor{keywordflow}{switch} (reason)
381     \{
382     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1a6934d63c397ae1ec077fdfcdeb90eb40}{Ipv4L3Protocol::DROP\_NO\_ROUTE}:
383       \textcolor{keywordflow}{break};
384 
385     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1a95ecb5b7c1affd7ca7a6d3d34c38cd40}{Ipv4L3Protocol::DROP\_TTL\_EXPIRED}:
386     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1a14938788d12f864657e5a3aa5d3e26fd}{Ipv4L3Protocol::DROP\_BAD\_CHECKSUM}:
387       Ipv4Address addri = \hyperlink{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}{m\_ipv4}->GetAddress (ifIndex);
388       Ipv4Mask maski = \hyperlink{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}{m\_ipv4}->GetNetworkMask (ifIndex);
389       Ipv4Address bcast = addri.GetSubnetDirectedBroadcast (maski);
390       \textcolor{keywordflow}{if} (ipHeader.GetDestination () == bcast) \textcolor{comment}{// we don't want broadcast packets}
391         \{
392           \textcolor{keywordflow}{return};
393         \}
394     \}
395 \textcolor{preprocessor}{#endif}
396 
397   Ipv4FlowProbeTag fTag;
398   \textcolor{keywordtype}{bool} found = ipPayload->FindFirstMatchingByteTag (fTag);
399 
400   \textcolor{keywordflow}{if} (found)
401     \{
402       \hyperlink{group__flow-monitor_ga39a766c4a370cdb9ab8ac85da4b288e9}{FlowId} flowId = fTag.GetFlowId ();
403       \hyperlink{group__flow-monitor_gaa1cb18250e1672975204f1254b8aa2ae}{FlowPacketId} packetId = fTag.GetPacketId ();
404 
405       uint32\_t size = (ipPayload->GetSize () + ipHeader.GetSerializedSize ());
406       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Drop ("}<<\textcolor{keyword}{this}<<\textcolor{stringliteral}{", "}<<flowId<<\textcolor{stringliteral}{", "}<<packetId<<\textcolor{stringliteral}{", "}<<size<<\textcolor{stringliteral}{", "} << reason 
407                             << \textcolor{stringliteral}{", destIp="} << ipHeader.GetDestination () << \textcolor{stringliteral}{"); "}
408                             << \textcolor{stringliteral}{"HDR: "} << ipHeader << \textcolor{stringliteral}{" PKT: "} << *ipPayload);
409 
410       \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179}{DropReason} myReason;
411 
412 
413       \textcolor{keywordflow}{switch} (reason)
414         \{
415         \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1a95ecb5b7c1affd7ca7a6d3d34c38cd40}{Ipv4L3Protocol::DROP\_TTL\_EXPIRED}:
416           myReason = \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a17b6754e3723d8983e17dfee84f2edd4}{DROP\_TTL\_EXPIRE};
417           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DROP\_TTL\_EXPIRE"});
418           \textcolor{keywordflow}{break};
419         \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1a6934d63c397ae1ec077fdfcdeb90eb40}{Ipv4L3Protocol::DROP\_NO\_ROUTE}:
420           myReason = \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a788583a6bda127b650efb4ad2f194dfa}{DROP\_NO\_ROUTE};
421           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DROP\_NO\_ROUTE"});
422           \textcolor{keywordflow}{break};
423         \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1a14938788d12f864657e5a3aa5d3e26fd}{Ipv4L3Protocol::DROP\_BAD\_CHECKSUM}:
424           myReason = \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0f8cc3d4cdef6bd11db276991ba5be83}{DROP\_BAD\_CHECKSUM};
425           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DROP\_BAD\_CHECKSUM"});
426           \textcolor{keywordflow}{break};
427         \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1a8f40f145dce3e9f21e1218ce125a048d}{Ipv4L3Protocol::DROP\_INTERFACE\_DOWN}:
428           myReason = \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a70419383e53bbcc568c10c69f5084f6f}{DROP\_INTERFACE\_DOWN};
429           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DROP\_INTERFACE\_DOWN"});
430           \textcolor{keywordflow}{break};
431         \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1aeb35be325e705553daacbf36f035c8f5}{Ipv4L3Protocol::DROP\_ROUTE\_ERROR}:
432           myReason = \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179a0a724e0ab6697453a260527f3a7a6893}{DROP\_ROUTE\_ERROR};
433           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DROP\_ROUTE\_ERROR"});
434           \textcolor{keywordflow}{break};
435         \textcolor{keywordflow}{case} \hyperlink{classns3_1_1Ipv4L3Protocol_a05e7403d60c79529257c4cffdd994da1afaf46ea7a6354ebb1e66e891123a9fbb}{Ipv4L3Protocol::DROP\_FRAGMENT\_TIMEOUT}:
436           myReason = \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179adf9598ecb45c5ef84c3bd0a54f6143bb}{DROP\_FRAGMENT\_TIMEOUT};
437           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DROP\_FRAGMENT\_TIMEOUT"});
438           \textcolor{keywordflow}{break};
439 
440         \textcolor{keywordflow}{default}:
441           myReason = \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac35ddf87d8b17302be103ec557e26c04}{DROP\_INVALID\_REASON};
442           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unexpected drop reason code "} << reason);
443         \}
444 
445       \hyperlink{classns3_1_1FlowProbe_adab205c7ab7cf4c65d72d030d8aaa82a}{m\_flowMonitor}->ReportDrop (\textcolor{keyword}{this}, flowId, packetId, size, myReason);
446     \}
447 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Forward\+Logger@{Forward\+Logger}}
\index{Forward\+Logger@{Forward\+Logger}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Forward\+Logger(const Ipv4\+Header \&ip\+Header, Ptr$<$ const Packet $>$ ip\+Payload, uint32\+\_\+t interface)}{ForwardLogger(const Ipv4Header &ipHeader, Ptr< const Packet > ipPayload, uint32_t interface)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+Flow\+Probe\+::\+Forward\+Logger (
\begin{DoxyParamCaption}
\item[{const {\bf Ipv4\+Header} \&}]{ip\+Header, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{ip\+Payload, }
\item[{uint32\+\_\+t}]{interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_ad685ed3b3a256105f039723eef98739b}{}\label{classns3_1_1Ipv4FlowProbe_ad685ed3b3a256105f039723eef98739b}
Log a packet being forwarded 
\begin{DoxyParams}{Parameters}
{\em ip\+Header} & IP header \\
\hline
{\em ip\+Payload} & IP payload \\
\hline
{\em interface} & incoming interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
325 \{
326   Ipv4FlowProbeTag fTag;
327   \textcolor{keywordtype}{bool} found = ipPayload->FindFirstMatchingByteTag (fTag);
328 
329   \textcolor{keywordflow}{if} (found)
330     \{
331       \textcolor{keywordflow}{if} (!ipHeader.IsLastFragment () || ipHeader.GetFragmentOffset () != 0)
332         \{
333           \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Not counting fragmented packets"});
334           \textcolor{keywordflow}{return};
335         \}
336       \textcolor{keywordflow}{if} (!fTag.IsSrcDstValid (ipHeader.GetSource (), ipHeader.GetDestination ()))
337         \{
338           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Not reporting encapsulated packet"});
339           \textcolor{keywordflow}{return};
340         \}
341 
342       \hyperlink{group__flow-monitor_ga39a766c4a370cdb9ab8ac85da4b288e9}{FlowId} flowId = fTag.GetFlowId ();
343       \hyperlink{group__flow-monitor_gaa1cb18250e1672975204f1254b8aa2ae}{FlowPacketId} packetId = fTag.GetPacketId ();
344 
345       uint32\_t size = (ipPayload->GetSize () + ipHeader.GetSerializedSize ());
346       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ReportForwarding ("}<<\textcolor{keyword}{this}<<\textcolor{stringliteral}{", "}<<flowId<<\textcolor{stringliteral}{", "}<<packetId<<\textcolor{stringliteral}{", "}<<size<<\textcolor{stringliteral}{");"})
      ;
347       \hyperlink{classns3_1_1FlowProbe_adab205c7ab7cf4c65d72d030d8aaa82a}{m\_flowMonitor}->ReportForwarding (\textcolor{keyword}{this}, flowId, packetId, size);
348     \}
349 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Forward\+Up\+Logger@{Forward\+Up\+Logger}}
\index{Forward\+Up\+Logger@{Forward\+Up\+Logger}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Forward\+Up\+Logger(const Ipv4\+Header \&ip\+Header, Ptr$<$ const Packet $>$ ip\+Payload, uint32\+\_\+t interface)}{ForwardUpLogger(const Ipv4Header &ipHeader, Ptr< const Packet > ipPayload, uint32_t interface)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+Flow\+Probe\+::\+Forward\+Up\+Logger (
\begin{DoxyParamCaption}
\item[{const {\bf Ipv4\+Header} \&}]{ip\+Header, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{ip\+Payload, }
\item[{uint32\+\_\+t}]{interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_a81ca7d15147dd7ac7b0502f37a95972e}{}\label{classns3_1_1Ipv4FlowProbe_a81ca7d15147dd7ac7b0502f37a95972e}
Log a packet being received by the destination 
\begin{DoxyParams}{Parameters}
{\em ip\+Header} & IP header \\
\hline
{\em ip\+Payload} & IP payload \\
\hline
{\em interface} & incoming interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
353 \{
354   Ipv4FlowProbeTag fTag;
355   \textcolor{keywordtype}{bool} found = ipPayload->FindFirstMatchingByteTag (fTag);
356 
357   \textcolor{keywordflow}{if} (found)
358     \{
359       \textcolor{keywordflow}{if} (!fTag.IsSrcDstValid (ipHeader.GetSource (), ipHeader.GetDestination ()))
360         \{
361           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Not reporting encapsulated packet"});
362           \textcolor{keywordflow}{return};
363         \}
364 
365       \hyperlink{group__flow-monitor_ga39a766c4a370cdb9ab8ac85da4b288e9}{FlowId} flowId = fTag.GetFlowId ();
366       \hyperlink{group__flow-monitor_gaa1cb18250e1672975204f1254b8aa2ae}{FlowPacketId} packetId = fTag.GetPacketId ();
367 
368       uint32\_t size = (ipPayload->GetSize () + ipHeader.GetSerializedSize ());
369       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ReportLastRx ("}<<\textcolor{keyword}{this}<<\textcolor{stringliteral}{", "}<<flowId<<\textcolor{stringliteral}{", "}<<packetId<<\textcolor{stringliteral}{", "}<<size<<\textcolor{stringliteral}{"); "}
370                                      << ipHeader << *ipPayload);
371       \hyperlink{classns3_1_1FlowProbe_adab205c7ab7cf4c65d72d030d8aaa82a}{m\_flowMonitor}->ReportLastRx (\textcolor{keyword}{this}, flowId, packetId, size);
372     \}
373 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Ipv4\+Flow\+Probe\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1Ipv4FlowProbe_a3f4be32333ce5e20e22db10cafd98446}{}\label{classns3_1_1Ipv4FlowProbe_a3f4be32333ce5e20e22db10cafd98446}
Register this type. \begin{DoxyReturn}{Returns}
The \hyperlink{classns3_1_1TypeId}{Type\+Id}. 
\end{DoxyReturn}

\begin{DoxyCode}
272 \{
273   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::Ipv4FlowProbe"})
274     .SetParent<\hyperlink{classns3_1_1FlowProbe_ae0c5dae57bca03719808497381a24776}{FlowProbe}> ()
275     .SetGroupName (\textcolor{stringliteral}{"FlowMonitor"})
276     \textcolor{comment}{// No AddConstructor because this class has no default constructor.}
277     ;
278 
279   \textcolor{keywordflow}{return} tid;
280 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Queue\+Disc\+Drop\+Logger@{Queue\+Disc\+Drop\+Logger}}
\index{Queue\+Disc\+Drop\+Logger@{Queue\+Disc\+Drop\+Logger}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Queue\+Disc\+Drop\+Logger(\+Ptr$<$ const Queue\+Disc\+Item $>$ item)}{QueueDiscDropLogger(Ptr< const QueueDiscItem > item)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+Flow\+Probe\+::\+Queue\+Disc\+Drop\+Logger (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Queue\+Disc\+Item} $>$}]{item}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_ac4fc1a210a1d0540d18caf3dec10a50e}{}\label{classns3_1_1Ipv4FlowProbe_ac4fc1a210a1d0540d18caf3dec10a50e}
Log a packet being dropped by a queue disc 
\begin{DoxyParams}{Parameters}
{\em item} & queue disc item \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
472 \{
473   Ipv4FlowProbeTag fTag;
474   \textcolor{keywordtype}{bool} tagFound = item->GetPacket ()->FindFirstMatchingByteTag (fTag);
475 
476   \textcolor{keywordflow}{if} (!tagFound)
477     \{
478       \textcolor{keywordflow}{return};
479     \}
480 
481   \hyperlink{group__flow-monitor_ga39a766c4a370cdb9ab8ac85da4b288e9}{FlowId} flowId = fTag.GetFlowId ();
482   \hyperlink{group__flow-monitor_gaa1cb18250e1672975204f1254b8aa2ae}{FlowPacketId} packetId = fTag.GetPacketId ();
483   uint32\_t size = fTag.GetPacketSize ();
484 
485   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Drop ("}<<\textcolor{keyword}{this}<<\textcolor{stringliteral}{", "}<<flowId<<\textcolor{stringliteral}{", "}<<packetId<<\textcolor{stringliteral}{", "}<<size<<\textcolor{stringliteral}{", "} << 
      \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac8adea45ab950ee1313a91b4d69fd6a7}{DROP\_QUEUE\_DISC}
486                         << \textcolor{stringliteral}{"); "});
487 
488   \hyperlink{classns3_1_1FlowProbe_adab205c7ab7cf4c65d72d030d8aaa82a}{m\_flowMonitor}->ReportDrop (\textcolor{keyword}{this}, flowId, packetId, size, 
      \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ac8adea45ab950ee1313a91b4d69fd6a7}{DROP\_QUEUE\_DISC});
489 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Queue\+Drop\+Logger@{Queue\+Drop\+Logger}}
\index{Queue\+Drop\+Logger@{Queue\+Drop\+Logger}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Queue\+Drop\+Logger(\+Ptr$<$ const Packet $>$ ip\+Payload)}{QueueDropLogger(Ptr< const Packet > ipPayload)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+Flow\+Probe\+::\+Queue\+Drop\+Logger (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{ip\+Payload}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_a6a7e09445323c3e491d3ce212f7f55dd}{}\label{classns3_1_1Ipv4FlowProbe_a6a7e09445323c3e491d3ce212f7f55dd}
Log a packet being dropped by a queue 
\begin{DoxyParams}{Parameters}
{\em ip\+Payload} & IP payload \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
451 \{
452   Ipv4FlowProbeTag fTag;
453   \textcolor{keywordtype}{bool} tagFound = ipPayload->FindFirstMatchingByteTag (fTag);
454 
455   \textcolor{keywordflow}{if} (!tagFound)
456     \{
457       \textcolor{keywordflow}{return};
458     \}
459 
460   \hyperlink{group__flow-monitor_ga39a766c4a370cdb9ab8ac85da4b288e9}{FlowId} flowId = fTag.GetFlowId ();
461   \hyperlink{group__flow-monitor_gaa1cb18250e1672975204f1254b8aa2ae}{FlowPacketId} packetId = fTag.GetPacketId ();
462   uint32\_t size = fTag.GetPacketSize ();
463 
464   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Drop ("}<<\textcolor{keyword}{this}<<\textcolor{stringliteral}{", "}<<flowId<<\textcolor{stringliteral}{", "}<<packetId<<\textcolor{stringliteral}{", "}<<size<<\textcolor{stringliteral}{", "} << 
      \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ae1b5d1b2d1f85fdb346e70c3d4cdc66d}{DROP\_QUEUE} 
465                         << \textcolor{stringliteral}{"); "});
466 
467   \hyperlink{classns3_1_1FlowProbe_adab205c7ab7cf4c65d72d030d8aaa82a}{m\_flowMonitor}->ReportDrop (\textcolor{keyword}{this}, flowId, packetId, size, 
      \hyperlink{classns3_1_1Ipv4FlowProbe_a035ac54633cca2eec144e14f0dcf4179ae1b5d1b2d1f85fdb346e70c3d4cdc66d}{DROP\_QUEUE});
468 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!Send\+Outgoing\+Logger@{Send\+Outgoing\+Logger}}
\index{Send\+Outgoing\+Logger@{Send\+Outgoing\+Logger}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{Send\+Outgoing\+Logger(const Ipv4\+Header \&ip\+Header, Ptr$<$ const Packet $>$ ip\+Payload, uint32\+\_\+t interface)}{SendOutgoingLogger(const Ipv4Header &ipHeader, Ptr< const Packet > ipPayload, uint32_t interface)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+Flow\+Probe\+::\+Send\+Outgoing\+Logger (
\begin{DoxyParamCaption}
\item[{const {\bf Ipv4\+Header} \&}]{ip\+Header, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{ip\+Payload, }
\item[{uint32\+\_\+t}]{interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_a4f4e830695f0b15a22bb997ff25409ed}{}\label{classns3_1_1Ipv4FlowProbe_a4f4e830695f0b15a22bb997ff25409ed}
Log a packet being sent 
\begin{DoxyParams}{Parameters}
{\em ip\+Header} & IP header \\
\hline
{\em ip\+Payload} & IP payload \\
\hline
{\em interface} & outgoing interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
292 \{
293   \hyperlink{group__flow-monitor_ga39a766c4a370cdb9ab8ac85da4b288e9}{FlowId} flowId;
294   \hyperlink{group__flow-monitor_gaa1cb18250e1672975204f1254b8aa2ae}{FlowPacketId} packetId;
295 
296   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}{m\_ipv4}->IsUnicast(ipHeader.GetDestination ()))
297     \{
298       \textcolor{comment}{// we are not prepared to handle broadcast yet}
299       \textcolor{keywordflow}{return};
300     \}
301 
302   Ipv4FlowProbeTag fTag;
303   \textcolor{keywordtype}{bool} found = ipPayload->FindFirstMatchingByteTag (fTag);
304   \textcolor{keywordflow}{if} (found)
305     \{
306       \textcolor{keywordflow}{return};
307     \}
308 
309   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Ipv4FlowProbe_ae4e260f1b2fa6cacbab3f6fec914172e}{m\_classifier}->Classify (ipHeader, ipPayload, &flowId, &packetId))
310     \{
311       uint32\_t size = (ipPayload->GetSize () + ipHeader.GetSerializedSize ());
312       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ReportFirstTx ("}<<\textcolor{keyword}{this}<<\textcolor{stringliteral}{", "}<<flowId<<\textcolor{stringliteral}{", "}<<packetId<<\textcolor{stringliteral}{", "}<<size<<\textcolor{stringliteral}{"); "}
313                                      << ipHeader << *ipPayload);
314       \hyperlink{classns3_1_1FlowProbe_adab205c7ab7cf4c65d72d030d8aaa82a}{m\_flowMonitor}->ReportFirstTx (\textcolor{keyword}{this}, flowId, packetId, size);
315 
316       \textcolor{comment}{// tag the packet with the flow id and packet id, so that the packet can be identified even}
317       \textcolor{comment}{// when Ipv4Header is not accessible at some non-IPv4 protocol layer}
318       Ipv4FlowProbeTag fTag (flowId, packetId, size, ipHeader.GetSource (), ipHeader.GetDestination ());
319       ipPayload->AddByteTag (fTag);
320     \}
321 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15




Here is the caller graph for this function\+:
% FIG 16




\subsection{Member Data Documentation}
\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!m\+\_\+classifier@{m\+\_\+classifier}}
\index{m\+\_\+classifier@{m\+\_\+classifier}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{m\+\_\+classifier}{m_classifier}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Ipv4\+Flow\+Classifier}$>$ ns3\+::\+Ipv4\+Flow\+Probe\+::m\+\_\+classifier\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_ae4e260f1b2fa6cacbab3f6fec914172e}{}\label{classns3_1_1Ipv4FlowProbe_ae4e260f1b2fa6cacbab3f6fec914172e}


the \hyperlink{classns3_1_1Ipv4FlowClassifier}{Ipv4\+Flow\+Classifier} this probe is associated with 

\index{ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}!m\+\_\+ipv4@{m\+\_\+ipv4}}
\index{m\+\_\+ipv4@{m\+\_\+ipv4}!ns3\+::\+Ipv4\+Flow\+Probe@{ns3\+::\+Ipv4\+Flow\+Probe}}
\subsubsection[{\texorpdfstring{m\+\_\+ipv4}{m_ipv4}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Ipv4\+L3\+Protocol}$>$ ns3\+::\+Ipv4\+Flow\+Probe\+::m\+\_\+ipv4\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}{}\label{classns3_1_1Ipv4FlowProbe_a8902eb4356b3e4a0f91b9031f80c8802}


the \hyperlink{classns3_1_1Ipv4L3Protocol}{Ipv4\+L3\+Protocol} this probe is bound to 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
flow-\/monitor/model/\hyperlink{ipv4-flow-probe_8h}{ipv4-\/flow-\/probe.\+h}\item 
flow-\/monitor/model/\hyperlink{ipv4-flow-probe_8cc}{ipv4-\/flow-\/probe.\+cc}\end{DoxyCompactItemize}
