\hypertarget{classns3_1_1Ipv4EndPointDemux}{}\section{ns3\+:\+:Ipv4\+End\+Point\+Demux Class Reference}
\label{classns3_1_1Ipv4EndPointDemux}\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}


Demultiplexes packets to various transport layer endpoints.  




{\ttfamily \#include $<$ipv4-\/end-\/point-\/demux.\+h$>$}



Collaboration diagram for ns3\+:\+:Ipv4\+End\+Point\+Demux\+:
% FIG 0
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ $>$ \hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{End\+Points}
\begin{DoxyCompactList}\small\item\em Container of the I\+Pv4 endpoints. \end{DoxyCompactList}\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ $>$\+::iterator \hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{End\+PointsI}
\begin{DoxyCompactList}\small\item\em Iterator to the container of the I\+Pv4 endpoints. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ipv4EndPointDemux_ab3def84030003695c9811a21edfc5edd}{Ipv4\+End\+Point\+Demux} ()
\item 
\hyperlink{classns3_1_1Ipv4EndPointDemux_a679dc1702c275783075bd9f27ad9022e}{$\sim$\+Ipv4\+End\+Point\+Demux} ()
\item 
\hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{End\+Points} \hyperlink{classns3_1_1Ipv4EndPointDemux_a47fe377300406d38259f176179b71cd6}{Get\+All\+End\+Points} (void)
\begin{DoxyCompactList}\small\item\em Get the entire list of end points registered. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1Ipv4EndPointDemux_adf65821503bc330fbb617af0f0e8df24}{Lookup\+Port\+Local} (uint16\+\_\+t \hyperlink{visualizer-ideas_8txt_a21ff1c530daf8435e00048b7fc2c58e3}{port})
\begin{DoxyCompactList}\small\item\em Lookup for port local. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1Ipv4EndPointDemux_a7f2e231efb21e0088d0fb4a41598df85}{Lookup\+Local} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} addr, uint16\+\_\+t \hyperlink{visualizer-ideas_8txt_a21ff1c530daf8435e00048b7fc2c58e3}{port})
\begin{DoxyCompactList}\small\item\em Lookup for address and port. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{End\+Points} \hyperlink{classns3_1_1Ipv4EndPointDemux_acd458004b74ea330e9025ab874f2c1b1}{Lookup} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} daddr, uint16\+\_\+t dport, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} saddr, uint16\+\_\+t sport, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4Interface}{Ipv4\+Interface} $>$ incoming\+Interface)
\begin{DoxyCompactList}\small\item\em lookup for a match with all the parameters. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ \hyperlink{classns3_1_1Ipv4EndPointDemux_a524bb724e8bbd40648172938758860ec}{Simple\+Lookup} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} daddr, uint16\+\_\+t dport, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} saddr, uint16\+\_\+t sport)
\begin{DoxyCompactList}\small\item\em simple lookup for a match with all the parameters. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ \hyperlink{classns3_1_1Ipv4EndPointDemux_a95eef225abf664ea72523730e00e621e}{Allocate} (void)
\begin{DoxyCompactList}\small\item\em Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ \hyperlink{classns3_1_1Ipv4EndPointDemux_a7a76c96cfe7633b411a41624746a0e0d}{Allocate} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} address)
\begin{DoxyCompactList}\small\item\em Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ \hyperlink{classns3_1_1Ipv4EndPointDemux_a7e9501178cf466e3146f5d94fecec01f}{Allocate} (uint16\+\_\+t \hyperlink{visualizer-ideas_8txt_a21ff1c530daf8435e00048b7fc2c58e3}{port})
\begin{DoxyCompactList}\small\item\em Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ \hyperlink{classns3_1_1Ipv4EndPointDemux_a2e0a73cf74c73c9b2be5a4dd5a1635a6}{Allocate} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} address, uint16\+\_\+t \hyperlink{visualizer-ideas_8txt_a21ff1c530daf8435e00048b7fc2c58e3}{port})
\begin{DoxyCompactList}\small\item\em Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ \hyperlink{classns3_1_1Ipv4EndPointDemux_a4af1e2d48f1b8d0a313b4949dc573f29}{Allocate} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} local\+Address, uint16\+\_\+t local\+Port, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} peer\+Address, uint16\+\_\+t peer\+Port)
\begin{DoxyCompactList}\small\item\em Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1Ipv4EndPointDemux_aef987a05ce248887200d14525b8daaec}{De\+Allocate} (\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$end\+Point)
\begin{DoxyCompactList}\small\item\em Remove a end point. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1Ipv4EndPointDemux_a5ae0acd03c077458051f13118e0dcae6}{Allocate\+Ephemeral\+Port} (void)
\begin{DoxyCompactList}\small\item\em Allocate an ephemeral port. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1Ipv4EndPointDemux_ab06ea605c5e81b34971468d1244a7c45}{m\+\_\+ephemeral}
\begin{DoxyCompactList}\small\item\em The ephemeral port. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{classns3_1_1Ipv4EndPointDemux_a3f18b7e91d6413f04a591b1e2ca7b02f}{m\+\_\+port\+Last}
\begin{DoxyCompactList}\small\item\em The last ephemeral port. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{classns3_1_1Ipv4EndPointDemux_a0407d0c9cc04dd29a887eabeb3fc1c89}{m\+\_\+port\+First}
\begin{DoxyCompactList}\small\item\em The first ephemeral port. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{End\+Points} \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\+\_\+end\+Points}
\begin{DoxyCompactList}\small\item\em A list of I\+Pv4 end points. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Demultiplexes packets to various transport layer endpoints. 

This class serves as a lookup table to match partial or full information about a four-\/tuple to an \hyperlink{classns3_1_1Ipv4EndPoint}{ns3\+::\+Ipv4\+End\+Point}. It internally contains a list of endpoints, and has A\+P\+Is to add and find endpoints in this demux. This code is shared in common to T\+CP and U\+DP protocols in \hyperlink{namespacens3}{ns3}. This demux sits between \hyperlink{namespacens3}{ns3}\textquotesingle{}s layer four and the socket layer 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!End\+Points@{End\+Points}}
\index{End\+Points@{End\+Points}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{End\+Points}{EndPoints}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<${\bf Ipv4\+End\+Point} $\ast$$>$ {\bf ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+End\+Points}}\hypertarget{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{}\label{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}


Container of the I\+Pv4 endpoints. 

\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!End\+PointsI@{End\+PointsI}}
\index{End\+PointsI@{End\+PointsI}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{End\+PointsI}{EndPointsI}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<${\bf Ipv4\+End\+Point} $\ast$$>$\+::iterator {\bf ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+End\+PointsI}}\hypertarget{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{}\label{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}


Iterator to the container of the I\+Pv4 endpoints. 



\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Ipv4\+End\+Point\+Demux@{Ipv4\+End\+Point\+Demux}}
\index{Ipv4\+End\+Point\+Demux@{Ipv4\+End\+Point\+Demux}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Ipv4\+End\+Point\+Demux()}{Ipv4EndPointDemux()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Ipv4\+End\+Point\+Demux (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_ab3def84030003695c9811a21edfc5edd}{}\label{classns3_1_1Ipv4EndPointDemux_ab3def84030003695c9811a21edfc5edd}

\begin{DoxyCode}
32   : \hyperlink{classns3_1_1Ipv4EndPointDemux_ab06ea605c5e81b34971468d1244a7c45}{m\_ephemeral} (49152), \hyperlink{classns3_1_1Ipv4EndPointDemux_a3f18b7e91d6413f04a591b1e2ca7b02f}{m\_portLast} (65535), \hyperlink{classns3_1_1Ipv4EndPointDemux_a0407d0c9cc04dd29a887eabeb3fc1c89}{m\_portFirst} (49152)
33 \{
34   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
35 \}
\end{DoxyCode}
\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!````~Ipv4\+End\+Point\+Demux@{$\sim$\+Ipv4\+End\+Point\+Demux}}
\index{````~Ipv4\+End\+Point\+Demux@{$\sim$\+Ipv4\+End\+Point\+Demux}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{$\sim$\+Ipv4\+End\+Point\+Demux()}{~Ipv4EndPointDemux()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Ipv4\+End\+Point\+Demux\+::$\sim$\+Ipv4\+End\+Point\+Demux (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a679dc1702c275783075bd9f27ad9022e}{}\label{classns3_1_1Ipv4EndPointDemux_a679dc1702c275783075bd9f27ad9022e}

\begin{DoxyCode}
38 \{
39   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
40   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
41     \{
42       Ipv4EndPoint *endPoint = *\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
43       \textcolor{keyword}{delete} endPoint;
44     \}
45   \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.clear ();
46 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Allocate@{Allocate}}
\index{Allocate@{Allocate}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Allocate(void)}{Allocate(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point} $\ast$ ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Allocate (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a95eef225abf664ea72523730e00e621e}{}\label{classns3_1_1Ipv4EndPointDemux_a95eef225abf664ea72523730e00e621e}


Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. 

\begin{DoxyReturn}{Returns}
an empty \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} instance 
\end{DoxyReturn}

\begin{DoxyCode}
79 \{
80   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
81   uint16\_t \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a5ae0acd03c077458051f13118e0dcae6}{AllocateEphemeralPort} ();
82   \textcolor{keywordflow}{if} (port == 0) 
83     \{
84       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Ephemeral port allocation failed."});
85       \textcolor{keywordflow}{return} 0;
86     \}
87   Ipv4EndPoint *endPoint = \textcolor{keyword}{new} Ipv4EndPoint (\hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} (), port);
88   \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.push\_back (endPoint);
89   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Now have >>"} << \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.size () << \textcolor{stringliteral}{"<< endpoints."});
90   \textcolor{keywordflow}{return} endPoint;
91 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1




Here is the caller graph for this function\+:
% FIG 2


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Allocate@{Allocate}}
\index{Allocate@{Allocate}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Allocate(\+Ipv4\+Address address)}{Allocate(Ipv4Address address)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point} $\ast$ ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Allocate (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{address}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a7a76c96cfe7633b411a41624746a0e0d}{}\label{classns3_1_1Ipv4EndPointDemux_a7a76c96cfe7633b411a41624746a0e0d}


Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. 


\begin{DoxyParams}{Parameters}
{\em address} & I\+Pv4 address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
an \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} instance 
\end{DoxyReturn}

\begin{DoxyCode}
95 \{
96   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << address);
97   uint16\_t \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a5ae0acd03c077458051f13118e0dcae6}{AllocateEphemeralPort} ();
98   \textcolor{keywordflow}{if} (port == 0) 
99     \{
100       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Ephemeral port allocation failed."});
101       \textcolor{keywordflow}{return} 0;
102     \}
103   Ipv4EndPoint *endPoint = \textcolor{keyword}{new} Ipv4EndPoint (address, port);
104   \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.push\_back (endPoint);
105   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Now have >>"} << \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.size () << \textcolor{stringliteral}{"<< endpoints."});
106   \textcolor{keywordflow}{return} endPoint;
107 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Allocate@{Allocate}}
\index{Allocate@{Allocate}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Allocate(uint16\+\_\+t port)}{Allocate(uint16_t port)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point} $\ast$ ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Allocate (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{port}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a7e9501178cf466e3146f5d94fecec01f}{}\label{classns3_1_1Ipv4EndPointDemux_a7e9501178cf466e3146f5d94fecec01f}


Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. 


\begin{DoxyParams}{Parameters}
{\em port} & local port \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
an \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} instance 
\end{DoxyReturn}

\begin{DoxyCode}
111 \{
112   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} <<  \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
113 
114   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1Ipv4EndPointDemux_a95eef225abf664ea72523730e00e621e}{Allocate} (\hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} (), \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
115 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Allocate@{Allocate}}
\index{Allocate@{Allocate}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Allocate(\+Ipv4\+Address address, uint16\+\_\+t port)}{Allocate(Ipv4Address address, uint16_t port)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point} $\ast$ ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Allocate (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{address, }
\item[{uint16\+\_\+t}]{port}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a2e0a73cf74c73c9b2be5a4dd5a1635a6}{}\label{classns3_1_1Ipv4EndPointDemux_a2e0a73cf74c73c9b2be5a4dd5a1635a6}


Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. 


\begin{DoxyParams}{Parameters}
{\em address} & local address \\
\hline
{\em port} & local port \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
an \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} instance 
\end{DoxyReturn}

\begin{DoxyCode}
119 \{
120   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << address << \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
121   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Ipv4EndPointDemux_a7f2e231efb21e0088d0fb4a41598df85}{LookupLocal} (address, \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port})) 
122     \{
123       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Duplicate address/port; failing."});
124       \textcolor{keywordflow}{return} 0;
125     \}
126   Ipv4EndPoint *endPoint = \textcolor{keyword}{new} Ipv4EndPoint (address, \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
127   \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.push\_back (endPoint);
128   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Now have >>"} << \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.size () << \textcolor{stringliteral}{"<< endpoints."});
129   \textcolor{keywordflow}{return} endPoint;
130 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Allocate@{Allocate}}
\index{Allocate@{Allocate}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Allocate(\+Ipv4\+Address local\+Address, uint16\+\_\+t local\+Port, Ipv4\+Address peer\+Address, uint16\+\_\+t peer\+Port)}{Allocate(Ipv4Address localAddress, uint16_t localPort, Ipv4Address peerAddress, uint16_t peerPort)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point} $\ast$ ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Allocate (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{local\+Address, }
\item[{uint16\+\_\+t}]{local\+Port, }
\item[{{\bf Ipv4\+Address}}]{peer\+Address, }
\item[{uint16\+\_\+t}]{peer\+Port}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a4af1e2d48f1b8d0a313b4949dc573f29}{}\label{classns3_1_1Ipv4EndPointDemux_a4af1e2d48f1b8d0a313b4949dc573f29}


Allocate a \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point}. 


\begin{DoxyParams}{Parameters}
{\em local\+Address} & local address \\
\hline
{\em local\+Port} & local port \\
\hline
{\em peer\+Address} & peer address \\
\hline
{\em peer\+Port} & peer port \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
an \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} instance 
\end{DoxyReturn}

\begin{DoxyCode}
135 \{
136   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << localAddress << localPort << peerAddress << peerPort);
137   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
138     \{
139       \textcolor{keywordflow}{if} ((*i)->GetLocalPort () == localPort &&
140           (*i)->GetLocalAddress () == localAddress &&
141           (*i)->GetPeerPort () == peerPort &&
142           (*i)->GetPeerAddress () == peerAddress) 
143         \{
144           \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"No way we can allocate this end-point."});
145           \textcolor{comment}{/* no way we can allocate this end-point. */}
146           \textcolor{keywordflow}{return} 0;
147         \}
148     \}
149   Ipv4EndPoint *endPoint = \textcolor{keyword}{new} Ipv4EndPoint (localAddress, localPort);
150   endPoint->SetPeer (peerAddress, peerPort);
151   \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.push\_back (endPoint);
152 
153   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Now have >>"} << \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.size () << \textcolor{stringliteral}{"<< endpoints."});
154 
155   \textcolor{keywordflow}{return} endPoint;
156 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Allocate\+Ephemeral\+Port@{Allocate\+Ephemeral\+Port}}
\index{Allocate\+Ephemeral\+Port@{Allocate\+Ephemeral\+Port}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Allocate\+Ephemeral\+Port(void)}{AllocateEphemeralPort(void)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Allocate\+Ephemeral\+Port (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4EndPointDemux_a5ae0acd03c077458051f13118e0dcae6}{}\label{classns3_1_1Ipv4EndPointDemux_a5ae0acd03c077458051f13118e0dcae6}


Allocate an ephemeral port. 

\begin{DoxyReturn}{Returns}
the ephemeral port 
\end{DoxyReturn}

\begin{DoxyCode}
365 \{
366   \textcolor{comment}{// Similar to counting up logic in netinet/in\_pcb.c}
367   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
368   uint16\_t \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = \hyperlink{classns3_1_1Ipv4EndPointDemux_ab06ea605c5e81b34971468d1244a7c45}{m\_ephemeral};
369   \textcolor{keywordtype}{int} count = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3f18b7e91d6413f04a591b1e2ca7b02f}{m\_portLast} - \hyperlink{classns3_1_1Ipv4EndPointDemux_a0407d0c9cc04dd29a887eabeb3fc1c89}{m\_portFirst};
370   \textcolor{keywordflow}{do} 
371     \{
372       \textcolor{keywordflow}{if} (count-- < 0)
373         \{
374           \textcolor{keywordflow}{return} 0;
375         \}
376       ++\hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port};
377       \textcolor{keywordflow}{if} (port < m\_portFirst || port > \hyperlink{classns3_1_1Ipv4EndPointDemux_a3f18b7e91d6413f04a591b1e2ca7b02f}{m\_portLast})
378         \{
379           port = \hyperlink{classns3_1_1Ipv4EndPointDemux_a0407d0c9cc04dd29a887eabeb3fc1c89}{m\_portFirst};
380         \}
381     \} \textcolor{keywordflow}{while} (\hyperlink{classns3_1_1Ipv4EndPointDemux_adf65821503bc330fbb617af0f0e8df24}{LookupPortLocal} (port));
382   \hyperlink{classns3_1_1Ipv4EndPointDemux_ab06ea605c5e81b34971468d1244a7c45}{m\_ephemeral} = \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port};
383   \textcolor{keywordflow}{return} \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port};
384 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!De\+Allocate@{De\+Allocate}}
\index{De\+Allocate@{De\+Allocate}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{De\+Allocate(\+Ipv4\+End\+Point $\ast$end\+Point)}{DeAllocate(Ipv4EndPoint *endPoint)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+De\+Allocate (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+End\+Point} $\ast$}]{end\+Point}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_aef987a05ce248887200d14525b8daaec}{}\label{classns3_1_1Ipv4EndPointDemux_aef987a05ce248887200d14525b8daaec}


Remove a end point. 


\begin{DoxyParams}{Parameters}
{\em end\+Point} & the end point to remove \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
160 \{
161   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << endPoint);
162   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
163     \{
164       \textcolor{keywordflow}{if} (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == endPoint)
165         \{
166           \textcolor{keyword}{delete} endPoint;
167           \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.erase (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
168           \textcolor{keywordflow}{break};
169         \}
170     \}
171 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Get\+All\+End\+Points@{Get\+All\+End\+Points}}
\index{Get\+All\+End\+Points@{Get\+All\+End\+Points}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Get\+All\+End\+Points(void)}{GetAllEndPoints(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point\+Demux\+::\+End\+Points} ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Get\+All\+End\+Points (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a47fe377300406d38259f176179b71cd6}{}\label{classns3_1_1Ipv4EndPointDemux_a47fe377300406d38259f176179b71cd6}


Get the entire list of end points registered. 

\begin{DoxyReturn}{Returns}
list of \hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} 
\end{DoxyReturn}

\begin{DoxyCode}
178 \{
179   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
180   \hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{EndPoints} ret;
181 
182   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
183     \{
184       Ipv4EndPoint* endP = *\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
185       ret.push\_back (endP);
186     \}
187   \textcolor{keywordflow}{return} ret;
188 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Lookup@{Lookup}}
\index{Lookup@{Lookup}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Lookup(\+Ipv4\+Address daddr, uint16\+\_\+t dport, Ipv4\+Address saddr, uint16\+\_\+t sport, Ptr$<$ Ipv4\+Interface $>$ incoming\+Interface)}{Lookup(Ipv4Address daddr, uint16_t dport, Ipv4Address saddr, uint16_t sport, Ptr< Ipv4Interface > incomingInterface)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point\+Demux\+::\+End\+Points} ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Lookup (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{daddr, }
\item[{uint16\+\_\+t}]{dport, }
\item[{{\bf Ipv4\+Address}}]{saddr, }
\item[{uint16\+\_\+t}]{sport, }
\item[{{\bf Ptr}$<$ {\bf Ipv4\+Interface} $>$}]{incoming\+Interface}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_acd458004b74ea330e9025ab874f2c1b1}{}\label{classns3_1_1Ipv4EndPointDemux_acd458004b74ea330e9025ab874f2c1b1}


lookup for a match with all the parameters. 

The function will return a list of most-\/matching End\+Points, in this order\+:
\begin{DoxyEnumerate}
\item Full match
\item All but local address
\item Only local port and local address match
\item Only local port match
\end{DoxyEnumerate}

End\+Point with disabled Rx are skipped.


\begin{DoxyParams}{Parameters}
{\em daddr} & destination address to test \\
\hline
{\em dport} & destination port to test \\
\hline
{\em saddr} & source address to test \\
\hline
{\em sport} & source port to test \\
\hline
{\em incoming\+Interface} & the incoming interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
list of I\+Pv4\+End\+Points (could be 0 element) 
\end{DoxyReturn}

\begin{DoxyCode}
200 \{
201   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << daddr << dport << saddr << sport << incomingInterface);
202   
203   \hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{EndPoints} retval1; \textcolor{comment}{// Matches exact on local port, wildcards on others}
204   \hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{EndPoints} retval2; \textcolor{comment}{// Matches exact on local port/adder, wildcards on others}
205   \hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{EndPoints} retval3; \textcolor{comment}{// Matches all but local address}
206   \hyperlink{classns3_1_1Ipv4EndPointDemux_a506a9661c08e2a64dab09ad6613d3b45}{EndPoints} retval4; \textcolor{comment}{// Exact match on all 4}
207 
208   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Looking up endpoint for destination address "} << daddr);
209   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
210     \{
211       Ipv4EndPoint* endP = *\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
212 
213       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Looking at endpoint dport="} << endP->GetLocalPort ()
214                                                  << \textcolor{stringliteral}{" daddr="} << endP->GetLocalAddress ()
215                                                  << \textcolor{stringliteral}{" sport="} << endP->GetPeerPort ()
216                                                  << \textcolor{stringliteral}{" saddr="} << endP->GetPeerAddress ());
217 
218       \textcolor{keywordflow}{if} (!endP->IsRxEnabled ())
219         \{
220           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Skipping endpoint "} << &endP
221                         << \textcolor{stringliteral}{" because endpoint can not receive packets"});
222           \textcolor{keywordflow}{continue};
223         \}
224 
225       \textcolor{keywordflow}{if} (endP->GetLocalPort () != dport) 
226         \{
227           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Skipping endpoint "} << &endP
228                                              << \textcolor{stringliteral}{" because endpoint dport "}
229                                              << endP->GetLocalPort ()
230                                              << \textcolor{stringliteral}{" does not match packet dport "} << dport);
231           \textcolor{keywordflow}{continue};
232         \}
233       \textcolor{keywordflow}{if} (endP->GetBoundNetDevice ())
234         \{
235           \textcolor{keywordflow}{if} (endP->GetBoundNetDevice () != incomingInterface->GetDevice ())
236             \{
237               \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Skipping endpoint "} << &endP
238                                                  << \textcolor{stringliteral}{" because endpoint is bound to specific device and"}
239                                                  << endP->GetBoundNetDevice ()
240                                                  << \textcolor{stringliteral}{" does not match packet device "} << incomingInterface->
      GetDevice ());
241               \textcolor{keywordflow}{continue};
242             \}
243         \}
244       \textcolor{keywordtype}{bool} subnetDirected = \textcolor{keyword}{false};
245       Ipv4Address incomingInterfaceAddr = daddr;  \textcolor{comment}{// may be a broadcast}
246       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < incomingInterface->GetNAddresses (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
247         \{
248           Ipv4InterfaceAddress addr = incomingInterface->GetAddress (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
249           \textcolor{keywordflow}{if} (addr.GetLocal ().CombineMask (addr.GetMask ()) == daddr.CombineMask (addr.GetMask ()) &&
250               daddr.IsSubnetDirectedBroadcast (addr.GetMask ()))
251             \{
252               subnetDirected = \textcolor{keyword}{true};
253               incomingInterfaceAddr = addr.GetLocal ();
254             \}
255         \}
256       \textcolor{keywordtype}{bool} isBroadcast = (daddr.IsBroadcast () || subnetDirected == \textcolor{keyword}{true});
257       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"dest addr "} << daddr << \textcolor{stringliteral}{" broadcast? "} << isBroadcast);
258       \textcolor{keywordtype}{bool} localAddressMatchesWildCard = 
259         endP->GetLocalAddress () == \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} ();
260       \textcolor{keywordtype}{bool} localAddressMatchesExact = endP->GetLocalAddress () == daddr;
261 
262       \textcolor{keywordflow}{if} (isBroadcast)
263         \{
264           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Found bcast, localaddr "} << endP->GetLocalAddress ());
265         \}
266 
267       \textcolor{keywordflow}{if} (isBroadcast && (endP->GetLocalAddress () != \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} ()))
268         \{
269           localAddressMatchesExact = (endP->GetLocalAddress () ==
270                                       incomingInterfaceAddr);
271         \}
272       \textcolor{comment}{// if no match here, keep looking}
273       \textcolor{keywordflow}{if} (!(localAddressMatchesExact || localAddressMatchesWildCard))
274         \textcolor{keywordflow}{continue}; 
275       \textcolor{keywordtype}{bool} remotePeerMatchesExact = endP->GetPeerPort () == sport;
276       \textcolor{keywordtype}{bool} remotePeerMatchesWildCard = endP->GetPeerPort () == 0;
277       \textcolor{keywordtype}{bool} remoteAddressMatchesExact = endP->GetPeerAddress () == saddr;
278       \textcolor{keywordtype}{bool} remoteAddressMatchesWildCard = endP->GetPeerAddress () ==
279         \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} ();
280       \textcolor{comment}{// If remote does not match either with exact or wildcard,}
281       \textcolor{comment}{// skip this one}
282       \textcolor{keywordflow}{if} (!(remotePeerMatchesExact || remotePeerMatchesWildCard))
283         \textcolor{keywordflow}{continue};
284       \textcolor{keywordflow}{if} (!(remoteAddressMatchesExact || remoteAddressMatchesWildCard))
285         \textcolor{keywordflow}{continue};
286 
287       \textcolor{comment}{// Now figure out which return list to add this one to}
288       \textcolor{keywordflow}{if} (localAddressMatchesWildCard &&
289           remotePeerMatchesWildCard &&
290           remoteAddressMatchesWildCard)
291         \{ \textcolor{comment}{// Only local port matches exactly}
292           retval1.push\_back (endP);
293         \}
294       \textcolor{keywordflow}{if} ((localAddressMatchesExact || (isBroadcast && localAddressMatchesWildCard))&&
295           remotePeerMatchesWildCard &&
296           remoteAddressMatchesWildCard)
297         \{ \textcolor{comment}{// Only local port and local address matches exactly}
298           retval2.push\_back (endP);
299         \}
300       \textcolor{keywordflow}{if} (localAddressMatchesWildCard &&
301           remotePeerMatchesExact &&
302           remoteAddressMatchesExact)
303         \{ \textcolor{comment}{// All but local address}
304           retval3.push\_back (endP);
305         \}
306       \textcolor{keywordflow}{if} (localAddressMatchesExact &&
307           remotePeerMatchesExact &&
308           remoteAddressMatchesExact)
309         \{ \textcolor{comment}{// All 4 match}
310           retval4.push\_back (endP);
311         \}
312     \}
313 
314   \textcolor{comment}{// Here we find the most exact match}
315   \textcolor{keywordflow}{if} (!retval4.empty ()) \textcolor{keywordflow}{return} retval4;
316   \textcolor{keywordflow}{if} (!retval3.empty ()) \textcolor{keywordflow}{return} retval3;
317   \textcolor{keywordflow}{if} (!retval2.empty ()) \textcolor{keywordflow}{return} retval2;
318   \textcolor{keywordflow}{return} retval1;  \textcolor{comment}{// might be empty if no matches}
319 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Lookup\+Local@{Lookup\+Local}}
\index{Lookup\+Local@{Lookup\+Local}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Lookup\+Local(\+Ipv4\+Address addr, uint16\+\_\+t port)}{LookupLocal(Ipv4Address addr, uint16_t port)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Lookup\+Local (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{addr, }
\item[{uint16\+\_\+t}]{port}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a7f2e231efb21e0088d0fb4a41598df85}{}\label{classns3_1_1Ipv4EndPointDemux_a7f2e231efb21e0088d0fb4a41598df85}


Lookup for address and port. 


\begin{DoxyParams}{Parameters}
{\em addr} & address to test \\
\hline
{\em port} & port to test \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if there is a match in End\+Points, false otherwise 
\end{DoxyReturn}

\begin{DoxyCode}
64 \{
65   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << addr << \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
66   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
67     \{
68       \textcolor{keywordflow}{if} ((*i)->GetLocalPort () == \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} &&
69           (*i)->GetLocalAddress () == addr) 
70         \{
71           \textcolor{keywordflow}{return} \textcolor{keyword}{true};
72         \}
73     \}
74   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
75 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Lookup\+Port\+Local@{Lookup\+Port\+Local}}
\index{Lookup\+Port\+Local@{Lookup\+Port\+Local}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Lookup\+Port\+Local(uint16\+\_\+t port)}{LookupPortLocal(uint16_t port)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Lookup\+Port\+Local (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{port}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_adf65821503bc330fbb617af0f0e8df24}{}\label{classns3_1_1Ipv4EndPointDemux_adf65821503bc330fbb617af0f0e8df24}


Lookup for port local. 


\begin{DoxyParams}{Parameters}
{\em port} & port to test \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if a port local is in End\+Points, false otherwise 
\end{DoxyReturn}

\begin{DoxyCode}
50 \{
51   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
52   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
53     \{
54       \textcolor{keywordflow}{if} ((*i)->GetLocalPort  () == \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}) 
55         \{
56           \textcolor{keywordflow}{return} \textcolor{keyword}{true};
57         \}
58     \}
59   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
60 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!Simple\+Lookup@{Simple\+Lookup}}
\index{Simple\+Lookup@{Simple\+Lookup}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{Simple\+Lookup(\+Ipv4\+Address daddr, uint16\+\_\+t dport, Ipv4\+Address saddr, uint16\+\_\+t sport)}{SimpleLookup(Ipv4Address daddr, uint16_t dport, Ipv4Address saddr, uint16_t sport)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point} $\ast$ ns3\+::\+Ipv4\+End\+Point\+Demux\+::\+Simple\+Lookup (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{daddr, }
\item[{uint16\+\_\+t}]{dport, }
\item[{{\bf Ipv4\+Address}}]{saddr, }
\item[{uint16\+\_\+t}]{sport}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv4EndPointDemux_a524bb724e8bbd40648172938758860ec}{}\label{classns3_1_1Ipv4EndPointDemux_a524bb724e8bbd40648172938758860ec}


simple lookup for a match with all the parameters. 


\begin{DoxyParams}{Parameters}
{\em daddr} & destination address to test \\
\hline
{\em dport} & destination port to test \\
\hline
{\em saddr} & source address to test \\
\hline
{\em sport} & source port to test \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
I\+Pv4\+End\+Point (0 if not found) 
\end{DoxyReturn}

\begin{DoxyCode}
326 \{
327   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << daddr << dport << saddr << sport);
328 
329   \textcolor{comment}{// this code is a copy/paste version of an old BSD ip stack lookup}
330   \textcolor{comment}{// function.}
331   uint32\_t genericity = 3;
332   Ipv4EndPoint *\textcolor{keyword}{generic} = 0;
333   \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1Ipv4EndPointDemux_ad3ce6fd3c128dcb46d10d562c82b4e07}{EndPointsI} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{m\_endPoints}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++) 
334     \{
335       \textcolor{keywordflow}{if} ((*i)->GetLocalPort () != dport) 
336         \{
337           \textcolor{keywordflow}{continue};
338         \}
339       \textcolor{keywordflow}{if} ((*i)->GetLocalAddress () == daddr &&
340           (*i)->GetPeerPort () == sport &&
341           (*i)->GetPeerAddress () == saddr) 
342         \{
343           \textcolor{comment}{/* this is an exact match. */}
344           \textcolor{keywordflow}{return} *\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
345         \}
346       uint32\_t tmp = 0;
347       \textcolor{keywordflow}{if} ((*i)->GetLocalAddress () == \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} ()) 
348         \{
349           tmp++;
350         \}
351       \textcolor{keywordflow}{if} ((*i)->GetPeerAddress () == \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} ()) 
352         \{
353           tmp++;
354         \}
355       \textcolor{keywordflow}{if} (tmp < genericity) 
356         \{
357           \textcolor{keyword}{generic} = (*i);
358           genericity = tmp;
359         \}
360     \}
361   \textcolor{keywordflow}{return} \textcolor{keyword}{generic};
362 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15




Here is the caller graph for this function\+:
% FIG 16




\subsection{Member Data Documentation}
\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!m\+\_\+end\+Points@{m\+\_\+end\+Points}}
\index{m\+\_\+end\+Points@{m\+\_\+end\+Points}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{m\+\_\+end\+Points}{m_endPoints}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf End\+Points} ns3\+::\+Ipv4\+End\+Point\+Demux\+::m\+\_\+end\+Points\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}{}\label{classns3_1_1Ipv4EndPointDemux_a3a0f7107698fe56cf60b2a0647682cdf}


A list of I\+Pv4 end points. 

\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!m\+\_\+ephemeral@{m\+\_\+ephemeral}}
\index{m\+\_\+ephemeral@{m\+\_\+ephemeral}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{m\+\_\+ephemeral}{m_ephemeral}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Ipv4\+End\+Point\+Demux\+::m\+\_\+ephemeral\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4EndPointDemux_ab06ea605c5e81b34971468d1244a7c45}{}\label{classns3_1_1Ipv4EndPointDemux_ab06ea605c5e81b34971468d1244a7c45}


The ephemeral port. 

\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!m\+\_\+port\+First@{m\+\_\+port\+First}}
\index{m\+\_\+port\+First@{m\+\_\+port\+First}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{m\+\_\+port\+First}{m_portFirst}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Ipv4\+End\+Point\+Demux\+::m\+\_\+port\+First\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4EndPointDemux_a0407d0c9cc04dd29a887eabeb3fc1c89}{}\label{classns3_1_1Ipv4EndPointDemux_a0407d0c9cc04dd29a887eabeb3fc1c89}


The first ephemeral port. 

\index{ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}!m\+\_\+port\+Last@{m\+\_\+port\+Last}}
\index{m\+\_\+port\+Last@{m\+\_\+port\+Last}!ns3\+::\+Ipv4\+End\+Point\+Demux@{ns3\+::\+Ipv4\+End\+Point\+Demux}}
\subsubsection[{\texorpdfstring{m\+\_\+port\+Last}{m_portLast}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Ipv4\+End\+Point\+Demux\+::m\+\_\+port\+Last\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv4EndPointDemux_a3f18b7e91d6413f04a591b1e2ca7b02f}{}\label{classns3_1_1Ipv4EndPointDemux_a3f18b7e91d6413f04a591b1e2ca7b02f}


The last ephemeral port. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
internet/model/\hyperlink{ipv4-end-point-demux_8h}{ipv4-\/end-\/point-\/demux.\+h}\item 
internet/model/\hyperlink{ipv4-end-point-demux_8cc}{ipv4-\/end-\/point-\/demux.\+cc}\end{DoxyCompactItemize}
