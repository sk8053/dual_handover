\hypertarget{nsclick-udp-client-server-csma_8cc}{}\section{click/examples/nsclick-\/udp-\/client-\/server-\/csma.cc File Reference}
\label{nsclick-udp-client-server-csma_8cc}\index{click/examples/nsclick-\/udp-\/client-\/server-\/csma.\+cc@{click/examples/nsclick-\/udp-\/client-\/server-\/csma.\+cc}}
{\ttfamily \#include $<$fstream$>$}\\*
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/csma-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/applications-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/ipv4-\/click-\/routing.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/click-\/internet-\/stack-\/helper.\+h\char`\"{}}\\*
Include dependency graph for nsclick-\/udp-\/client-\/server-\/csma.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{nsclick-udp-client-server-csma_8cc_a5d9691a735b079c73fd01596a7311482}{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Nsclick\+Udp\+Client\+Server\+Csma\char`\"{})
\item 
int \hyperlink{nsclick-udp-client-server-csma_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{nsclick-\/udp-\/client-\/server-\/csma.\+cc@{nsclick-\/udp-\/client-\/server-\/csma.\+cc}!main@{main}}
\index{main@{main}!nsclick-\/udp-\/client-\/server-\/csma.\+cc@{nsclick-\/udp-\/client-\/server-\/csma.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{nsclick-udp-client-server-csma_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{nsclick-udp-client-server-csma_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
50 \{
51 \textcolor{preprocessor}{#ifdef NS3\_CLICK}
52   std::string clickConfigFolder = \textcolor{stringliteral}{"src/click/examples"};
53 
54   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
55   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"clickConfigFolder"}, \textcolor{stringliteral}{"Base folder for click configuration files"}, clickConfigFolder
      );
56   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc, argv);
57 
58 \textcolor{comment}{//}
59 \textcolor{comment}{// Enable logging for UdpClient and}
60 \textcolor{comment}{//}
61   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"NsclickUdpClientServerCsma"}, 
      \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbae36aedc880de94fd5a5b53bb9fe65628}{LOG\_LEVEL\_INFO});
62 
63 \textcolor{comment}{//}
64 \textcolor{comment}{// Explicitly create the nodes required by the topology (shown above).}
65 \textcolor{comment}{//}
66   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create nodes."});
67   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} \hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n};
68   n.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (3);
69 
70   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create channels."});
71 \textcolor{comment}{//}
72 \textcolor{comment}{// Explicitly create the channels required by the topology (shown above).}
73 \textcolor{comment}{//}
74   \hyperlink{classns3_1_1CsmaHelper}{CsmaHelper} csma;
75   csma.\hyperlink{classns3_1_1CsmaHelper_a886d900b2fe44433e0b81752dea7e7f1}{SetChannelAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (
      \hyperlink{classns3_1_1DataRate}{DataRate} (5000000)));
76   csma.\hyperlink{classns3_1_1CsmaHelper_a886d900b2fe44433e0b81752dea7e7f1}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (2)));
77   csma.\hyperlink{classns3_1_1CsmaHelper_a741c31b2526e3570cc62c9d7d9667ca9}{SetDeviceAttribute} (\textcolor{stringliteral}{"Mtu"}, UintegerValue (1400));
78   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d} = csma.\hyperlink{classns3_1_1CsmaHelper_af79a91372595230b0817200270ab84e7}{Install} (n);
79 
80 \textcolor{comment}{//}
81 \textcolor{comment}{// Install Click on the nodes}
82 \textcolor{comment}{//}
83   ClickInternetStackHelper clickinternet;
84   clickinternet.SetClickFile (n, clickConfigFolder + \textcolor{stringliteral}{"/nsclick-lan-single-interface.click"});
85   clickinternet.SetRoutingTableElement (n, \textcolor{stringliteral}{"rt"});
86   clickinternet.Install (n);
87 
88   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4;
89 \textcolor{comment}{//}
90 \textcolor{comment}{// We've got the "hardware" in place.  Now we need to add IP addresses.}
91 \textcolor{comment}{//}
92   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Assign IP Addresses."});
93   ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"172.16.1.0"}, \textcolor{stringliteral}{"255.255.255.0"});
94   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = ipv4.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (d);
95 
96   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create Applications."});
97 \textcolor{comment}{//}
98 \textcolor{comment}{// Create one udpServer applications on node one.}
99 \textcolor{comment}{//}
100   uint16\_t \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = 4000;
101   \hyperlink{classns3_1_1UdpServerHelper}{UdpServerHelper} server (port);
102   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} apps = server.Install (n.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
103   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
104   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
105 
106 \textcolor{comment}{//}
107 \textcolor{comment}{// Create one UdpClient application to send UDP datagrams from node zero to}
108 \textcolor{comment}{// node one.}
109 \textcolor{comment}{//}
110   uint32\_t MaxPacketSize = 1024;
111   \hyperlink{classns3_1_1Time}{Time} interPacketInterval = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.05);
112   uint32\_t maxPacketCount = 320;
113   \hyperlink{classns3_1_1UdpClientHelper}{UdpClientHelper} client (i.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (1), \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
114   client.\hyperlink{classns3_1_1UdpClientHelper_a8bbae16a28f85ab3f3b5aa4642edfeae}{SetAttribute} (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (maxPacketCount));
115   client.SetAttribute (\textcolor{stringliteral}{"Interval"}, TimeValue (interPacketInterval));
116   client.SetAttribute (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (MaxPacketSize));
117   apps = client.Install (\hyperlink{classns3_1_1NodeContainer}{NodeContainer} (n.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0), n.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (2)));
118   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2.0));
119   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
120 
121   csma.\hyperlink{classns3_1_1PcapHelperForDevice_a74866def9a881aa9d5c5be1225a26722}{EnablePcap} (\textcolor{stringliteral}{"nsclick-udp-client-server-csma"}, d, \textcolor{keyword}{false});
122 
123 \textcolor{comment}{//}
124 \textcolor{comment}{// Now, do the actual simulation.}
125 \textcolor{comment}{//}
126   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Run Simulation."});
127   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (20.0));
128   Simulator::Run ();
129   Simulator::Destroy ();
130   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Done."});
131 \textcolor{preprocessor}{#else}
132   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Can't use ns-3-click without NSCLICK compiled in"});
133 \textcolor{preprocessor}{#endif}
134 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{nsclick-\/udp-\/client-\/server-\/csma.\+cc@{nsclick-\/udp-\/client-\/server-\/csma.\+cc}!N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}}
\index{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}!nsclick-\/udp-\/client-\/server-\/csma.\+cc@{nsclick-\/udp-\/client-\/server-\/csma.\+cc}}
\subsubsection[{\texorpdfstring{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+N\+E(""Nsclick\+Udp\+Client\+Server\+Csma"")}{NS_LOG_COMPONENT_DEFINE("NsclickUdpClientServerCsma")}}]{\setlength{\rightskip}{0pt plus 5cm}N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE (
\begin{DoxyParamCaption}
\item[{\char`\"{}Nsclick\+Udp\+Client\+Server\+Csma\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{nsclick-udp-client-server-csma_8cc_a5d9691a735b079c73fd01596a7311482}{}\label{nsclick-udp-client-server-csma_8cc_a5d9691a735b079c73fd01596a7311482}
