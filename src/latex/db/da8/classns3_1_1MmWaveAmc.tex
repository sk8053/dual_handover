\hypertarget{classns3_1_1MmWaveAmc}{}\section{ns3\+:\+:Mm\+Wave\+Amc Class Reference}
\label{classns3_1_1MmWaveAmc}\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}


{\ttfamily \#include $<$mmwave-\/amc.\+h$>$}



Inheritance diagram for ns3\+:\+:Mm\+Wave\+Amc\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Mm\+Wave\+Amc\+:
% FIG 1
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401}{Amc\+Model} \{ \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}{Piro\+E\+W2010}, 
\hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{Mi\+Error\+Model}
 \}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MmWaveAmc_a1105c5129f396868fcf506be557ef3fe}{Mm\+Wave\+Amc} ()
\item 
\hyperlink{classns3_1_1MmWaveAmc_a72e60b8bf0ce89643dd7ec124618b43d}{Mm\+Wave\+Amc} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ Config\+Params)
\item 
virtual \hyperlink{classns3_1_1MmWaveAmc_ab79b401e8c54cc5b8f96b627f76876ae}{$\sim$\+Mm\+Wave\+Amc} ()
\item 
int \hyperlink{classns3_1_1MmWaveAmc_a5137f0072cc2ffa24e92dbad1d13311c}{Get\+Mcs\+From\+Cqi} (int cqi)
\item 
int \hyperlink{classns3_1_1MmWaveAmc_a46a70ae19f81f7b1f9307100caabc0e8}{Get\+Tb\+Size\+From\+Mcs} (unsigned mcs, unsigned nprb)
\item 
int \hyperlink{classns3_1_1MmWaveAmc_a7e972b1d61df4f0236301ecb24f13447}{Get\+Tb\+Size\+From\+Mcs\+Symbols} (unsigned mcs, unsigned nsym)
\item 
int \hyperlink{classns3_1_1MmWaveAmc_a652580bea28d3e58e039dcc5667afccf}{Get\+Num\+Symbols\+From\+Tbs\+Mcs} (unsigned tb\+Size, unsigned mcs)
\item 
std\+::vector$<$ int $>$ \hyperlink{classns3_1_1MmWaveAmc_a673c746802068cda65762a6a78f41404}{Create\+Cqi\+Feedbacks} (const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} \&sinr, uint8\+\_\+t rbg\+Size)
\item 
std\+::vector$<$ int $>$ \hyperlink{classns3_1_1MmWaveAmc_a82460d4003c51ac63ecfe23a3c8bbaec}{Create\+Cqi\+Feedbacks\+Tdma} (const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} \&sinr, uint8\+\_\+t num\+Sym)
\item 
int \hyperlink{classns3_1_1MmWaveAmc_a692293fdeba014cbaa8e316bd12a6fd0}{Create\+Cqi\+Feedback\+Wb\+Tdma} (const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} \&sinr, uint8\+\_\+t num\+Sym, uint32\+\_\+t tbs, int \&mcs\+Wb)
\item 
int \hyperlink{classns3_1_1MmWaveAmc_acbe2e5714d389d77b25d1dfbe433a806}{Get\+Cqi\+From\+Spectral\+Efficiency} (double \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
int \hyperlink{classns3_1_1MmWaveAmc_a3632ed497ab17df876e281a823f0450c}{Get\+Mcs\+From\+Spectral\+Efficiency} (double \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1MmWaveAmc_ae531231147435ab791661559e95703fe}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const unsigned int \hyperlink{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{m\+\_\+crc\+Len} =24
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{m\+\_\+ber}
\item 
\hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401}{Amc\+Model} \hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{m\+\_\+amc\+Model}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\+\_\+phy\+Mac\+Config}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumModel}{Spectrum\+Model} $>$ \hyperlink{classns3_1_1MmWaveAmc_a4c27746a8b0aac6c3915bdd2e2326bac}{m\+\_\+lte\+Rb\+Model}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Member Enumeration Documentation}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Amc\+Model@{Amc\+Model}}
\index{Amc\+Model@{Amc\+Model}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Amc\+Model}{AmcModel}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf ns3\+::\+Mm\+Wave\+Amc\+::\+Amc\+Model}}\hypertarget{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401}{}\label{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Piro\+E\+W2010@{Piro\+E\+W2010}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Piro\+E\+W2010@{Piro\+E\+W2010}}\item[{\em 
Piro\+E\+W2010\hypertarget{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}{}\label{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}
}]\index{Mi\+Error\+Model@{Mi\+Error\+Model}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Mi\+Error\+Model@{Mi\+Error\+Model}}\item[{\em 
Mi\+Error\+Model\hypertarget{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{}\label{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}
}]\end{description}
\end{Desc}

\begin{DoxyCode}
46         \{
47                 \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}{PiroEW2010},
48                 \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{MiErrorModel} \textcolor{comment}{// model based on 10% of BER according to LteMiErrorModel}
49         \};
\end{DoxyCode}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Mm\+Wave\+Amc@{Mm\+Wave\+Amc}}
\index{Mm\+Wave\+Amc@{Mm\+Wave\+Amc}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Mm\+Wave\+Amc()}{MmWaveAmc()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mm\+Wave\+Amc\+::\+Mm\+Wave\+Amc (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a1105c5129f396868fcf506be557ef3fe}{}\label{classns3_1_1MmWaveAmc_a1105c5129f396868fcf506be557ef3fe}

\begin{DoxyCode}
110 \{
111         \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"This construcor should not be invoked"});
112 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Mm\+Wave\+Amc@{Mm\+Wave\+Amc}}
\index{Mm\+Wave\+Amc@{Mm\+Wave\+Amc}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Mm\+Wave\+Amc(\+Ptr$<$ Mm\+Wave\+Phy\+Mac\+Common $>$ Config\+Params)}{MmWaveAmc(Ptr< MmWavePhyMacCommon > ConfigParams)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mm\+Wave\+Amc\+::\+Mm\+Wave\+Amc (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Mm\+Wave\+Phy\+Mac\+Common} $>$}]{Config\+Params}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a72e60b8bf0ce89643dd7ec124618b43d}{}\label{classns3_1_1MmWaveAmc_a72e60b8bf0ce89643dd7ec124618b43d}

\begin{DoxyCode}
115 : \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig} (ConfigParams)
116 \{
117         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Initialze AMC module"});
118 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!````~Mm\+Wave\+Amc@{$\sim$\+Mm\+Wave\+Amc}}
\index{````~Mm\+Wave\+Amc@{$\sim$\+Mm\+Wave\+Amc}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{$\sim$\+Mm\+Wave\+Amc()}{~MmWaveAmc()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mm\+Wave\+Amc\+::$\sim$\+Mm\+Wave\+Amc (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MmWaveAmc_ab79b401e8c54cc5b8f96b627f76876ae}{}\label{classns3_1_1MmWaveAmc_ab79b401e8c54cc5b8f96b627f76876ae}

\begin{DoxyCode}
121 \{
122 
123 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Create\+Cqi\+Feedbacks@{Create\+Cqi\+Feedbacks}}
\index{Create\+Cqi\+Feedbacks@{Create\+Cqi\+Feedbacks}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Create\+Cqi\+Feedbacks(const Spectrum\+Value \&sinr, uint8\+\_\+t rbg\+Size)}{CreateCqiFeedbacks(const SpectrumValue &sinr, uint8_t rbgSize)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ int $>$ ns3\+::\+Mm\+Wave\+Amc\+::\+Create\+Cqi\+Feedbacks (
\begin{DoxyParamCaption}
\item[{const {\bf Spectrum\+Value} \&}]{sinr, }
\item[{uint8\+\_\+t}]{rbg\+Size}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a673c746802068cda65762a6a78f41404}{}\label{classns3_1_1MmWaveAmc_a673c746802068cda65762a6a78f41404}

\begin{DoxyCode}
226 \{
227         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
228 
229         std::vector<int> cqi;
230         Values::const\_iterator it;
231         \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{m\_amcModel} == \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}{PiroEW2010})
232         \{
233                 \textcolor{comment}{//use PiroEW2010 model}
234                 \textcolor{keywordflow}{for} (it = sinr.ConstValuesBegin (); it != sinr.ConstValuesEnd (); it++)
235                 \{
236                         \textcolor{keywordtype}{double} sinr\_ = (*it);
237                         \textcolor{keywordflow}{if} (sinr\_ == 0.0)
238                         \{
239                                 cqi.push\_back (-1); \textcolor{comment}{// SINR == 0 (linear units) means no signal in this RB}
240                         \}
241                         \textcolor{keywordflow}{else}
242                         \{
243                         \textcolor{comment}{/*}
244 \textcolor{comment}{                        * Compute the spectral efficiency from the SINR}
245 \textcolor{comment}{                        *                                        SINR}
246 \textcolor{comment}{                        * spectralEfficiency = log2 (1 + -------------------- )}
247 \textcolor{comment}{                        *                                    -ln(5*BER)/1.5}
248 \textcolor{comment}{                        * NB: SINR must be expressed in linear units}
249 \textcolor{comment}{                        */}
250 
251                         \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = log2 ( 1 + ( sinr\_ / ( (-std::log (5.0 * 
      \hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{m\_ber} )) / 1.5) ));
252 
253                         \textcolor{keywordtype}{int} cqi\_ = \hyperlink{classns3_1_1MmWaveAmc_acbe2e5714d389d77b25d1dfbe433a806}{GetCqiFromSpectralEfficiency} (s);
254 
255                         \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{" PRB ="} << cqi.size ()
256                                                                 << \textcolor{stringliteral}{", sinr = "} << sinr\_
257                                                                 << \textcolor{stringliteral}{" (="} << 10 * std::log10 (sinr\_) << \textcolor{stringliteral}{"
       dB)"}
258                                                                 << \textcolor{stringliteral}{", spectral efficiency ="} << s
259                                                                 << \textcolor{stringliteral}{", CQI = "} << cqi\_ << \textcolor{stringliteral}{", BER = "} << 
      \hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{m\_ber});
260 
261                         cqi.push\_back (cqi\_);
262                         \}
263                 \}
264         \}
265         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{m\_amcModel} == \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{MiErrorModel})
266         \{
267                 std::vector <int> rbgMap;
268                 \textcolor{keywordtype}{int} rbId = 0;
269                 \textcolor{keywordflow}{for} (it = sinr.ConstValuesBegin (); it != sinr.ConstValuesEnd (); it++)
270                 \{
271                         rbgMap.push\_back (rbId++);
272                         \textcolor{keywordflow}{if} ((rbId % rbgSize == 0)||((it+1)==sinr.ConstValuesEnd ()))
273                         \{
274                                 uint8\_t mcs = 0;
275                                 MmWaveTbStats\_t tbStats;
276                                 \textcolor{keywordflow}{while} (mcs <= 28)
277                                 \{
278                                         \hyperlink{namespacens3_aca7c6bab455c2515f3e437749b5e904d}{MmWaveHarqProcessInfoList\_t} harqInfoList
      ;
279                                         tbStats = 
      \hyperlink{classns3_1_1MmWaveMiErrorModel_a82a14ebf85ae03a7815215c3c1a96cc7}{MmWaveMiErrorModel::GetTbDecodificationStats} (sinr, rbgMap, 
      \hyperlink{classns3_1_1MmWaveAmc_a46a70ae19f81f7b1f9307100caabc0e8}{GetTbSizeFromMcs} (mcs, rbgSize/18) / 8, mcs, harqInfoList);
280                                         \textcolor{keywordflow}{if} (tbStats.tbler > 0.1)
281                                         \{
282                                                 \textcolor{keywordflow}{break};
283                                         \}
284                                         mcs++;
285 
286                                 \}
287                                 \textcolor{keywordflow}{if} (mcs > 0)
288                                 \{
289                                         mcs--;
290                                 \}
291                                 \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"\(\backslash\)t RBG "} << rbId << \textcolor{stringliteral}{" MCS "} << (uint16\_t
      )mcs << \textcolor{stringliteral}{" TBLER "} << tbStats.tbler);
292                                 \textcolor{keywordtype}{int} rbgCqi = 0;
293                                 \textcolor{keywordflow}{if} ((tbStats.tbler > 0.1)&&(mcs==0))
294                                 \{
295                                         rbgCqi = 0;
296                                 \}
297                                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mcs == 28)
298                                 \{
299                                         rbgCqi = 15; \textcolor{comment}{// all MCSs can guarantee the 10 % of BER}
300                                 \}
301                                 \textcolor{keywordflow}{else}
302                                 \{
303                                         \textcolor{keywordtype}{double} s = \hyperlink{namespacens3_aaa522c5b4dc5c1b69cfa3c8b5796cac9}{SpectralEfficiencyForMcs}[mcs];
304                                         rbgCqi = 0;
305                                         \textcolor{keywordflow}{while} ((rbgCqi < 15) && (
      \hyperlink{namespacens3_aa667d4abe6d529b6b88203fd52973c8a}{SpectralEfficiencyForCqi}[rbgCqi + 1] < s))
306                                         \{
307                                                 ++rbgCqi;
308                                         \}
309                                 \}
310                                 \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"\(\backslash\)t MCS "} << (uint16\_t)mcs << \textcolor{stringliteral}{"-> CQI "} 
      << rbgCqi);
311                                 \textcolor{comment}{// fill the cqi vector (per RB basis)}
312                                 \textcolor{keywordflow}{for} (uint8\_t j = 0; j < rbgSize; j++)
313                                 \{
314                                         cqi.push\_back (rbgCqi);
315                                 \}
316                                 rbgMap.clear ();
317                         \}
318 
319                 \}
320         \}
321         \textcolor{keywordflow}{return} cqi;
322 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Create\+Cqi\+Feedbacks\+Tdma@{Create\+Cqi\+Feedbacks\+Tdma}}
\index{Create\+Cqi\+Feedbacks\+Tdma@{Create\+Cqi\+Feedbacks\+Tdma}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Create\+Cqi\+Feedbacks\+Tdma(const Spectrum\+Value \&sinr, uint8\+\_\+t num\+Sym)}{CreateCqiFeedbacksTdma(const SpectrumValue &sinr, uint8_t numSym)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ int $>$ ns3\+::\+Mm\+Wave\+Amc\+::\+Create\+Cqi\+Feedbacks\+Tdma (
\begin{DoxyParamCaption}
\item[{const {\bf Spectrum\+Value} \&}]{sinr, }
\item[{uint8\+\_\+t}]{num\+Sym}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a82460d4003c51ac63ecfe23a3c8bbaec}{}\label{classns3_1_1MmWaveAmc_a82460d4003c51ac63ecfe23a3c8bbaec}

\begin{DoxyCode}
326 \{
327         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
328 
329         std::vector<int> cqi;
330         Values::const\_iterator it;
331         \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{m\_amcModel} == \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}{PiroEW2010})
332         \{
333                 \textcolor{comment}{//use PiroEW2010 model}
334                 \textcolor{keywordflow}{for} (it = sinr.ConstValuesBegin (); it != sinr.ConstValuesEnd (); it++)
335                 \{
336                         \textcolor{keywordtype}{double} sinr\_ = (*it);
337                         \textcolor{keywordflow}{if} (sinr\_ == 0.0)
338                         \{
339                                 cqi.push\_back (-1); \textcolor{comment}{// SINR == 0 (linear units) means no signal in this RB}
340                         \}
341                         \textcolor{keywordflow}{else}
342                         \{
343                         \textcolor{comment}{/*}
344 \textcolor{comment}{                        * Compute the spectral efficiency from the SINR}
345 \textcolor{comment}{                        *                                        SINR}
346 \textcolor{comment}{                        * spectralEfficiency = log2 (1 + -------------------- )}
347 \textcolor{comment}{                        *                                    -ln(5*BER)/1.5}
348 \textcolor{comment}{                        * NB: SINR must be expressed in linear units}
349 \textcolor{comment}{                        */}
350 
351                         \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = log2 ( 1 + ( sinr\_ / ( (-std::log (5.0 * 
      \hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{m\_ber} )) / 1.5) ));
352 
353                         \textcolor{keywordtype}{int} cqi\_ = \hyperlink{classns3_1_1MmWaveAmc_acbe2e5714d389d77b25d1dfbe433a806}{GetCqiFromSpectralEfficiency} (s);
354 
355                         \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{" PRB ="} << cqi.size ()
356                                                                 << \textcolor{stringliteral}{", sinr = "} << sinr\_
357                                                                 << \textcolor{stringliteral}{" (="} << 10 * std::log10 (sinr\_) << \textcolor{stringliteral}{"
       dB)"}
358                                                                 << \textcolor{stringliteral}{", spectral efficiency ="} << s
359                                                                 << \textcolor{stringliteral}{", CQI = "} << cqi\_ << \textcolor{stringliteral}{", BER = "} << 
      \hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{m\_ber});
360 
361                         cqi.push\_back (cqi\_);
362                         \}
363                 \}
364         \}
365         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{m\_amcModel} == \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{MiErrorModel})
366         \{
367                 \textcolor{keywordtype}{int} chunkId = 0;
368                 \textcolor{keywordflow}{for} (it = sinr.ConstValuesBegin (); it != sinr.ConstValuesEnd (); it++)
369                 \{
370                         uint8\_t mcs = 0;
371                         MmWaveTbStats\_t tbStats;
372                         std::vector <int> chunkMap;
373                         chunkMap.push\_back (chunkId++);
374                         \textcolor{keywordflow}{while} (mcs <= 28)
375                         \{
376                                 \hyperlink{namespacens3_aca7c6bab455c2515f3e437749b5e904d}{MmWaveHarqProcessInfoList\_t} harqInfoList;
377                                 tbStats = 
      \hyperlink{classns3_1_1MmWaveMiErrorModel_a82a14ebf85ae03a7815215c3c1a96cc7}{MmWaveMiErrorModel::GetTbDecodificationStats} (sinr, chunkMap, 
      \hyperlink{classns3_1_1MmWaveAmc_a7e972b1d61df4f0236301ecb24f13447}{GetTbSizeFromMcsSymbols} (mcs, numSym) / 8, mcs, harqInfoList);
378                                 \textcolor{keywordflow}{if} (tbStats.tbler > 0.1)
379                                 \{
380                                         \textcolor{keywordflow}{break};
381                                 \}
382                                 mcs++;
383 
384                         \}
385                         \textcolor{keywordflow}{if} (mcs > 0)
386                         \{
387                                 mcs--;
388                         \}
389                         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"\(\backslash\)t MCS "} << (uint16\_t)mcs << \textcolor{stringliteral}{" TBLER "} << 
      tbStats.tbler);
390                         \textcolor{keywordtype}{int} chunkCqi = 0;
391                         \textcolor{keywordflow}{if} ((tbStats.tbler > 0.1)&&(mcs==0))
392                         \{
393                                 chunkCqi = 0;
394                         \}
395                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mcs == 28)
396                         \{
397                                 chunkCqi = 15; \textcolor{comment}{// all MCSs can guarantee the 10 % of BER}
398                         \}
399                         \textcolor{keywordflow}{else}
400                         \{
401                                 \textcolor{keywordtype}{double} s = \hyperlink{namespacens3_aaa522c5b4dc5c1b69cfa3c8b5796cac9}{SpectralEfficiencyForMcs}[mcs];
402                                 chunkCqi = 0;
403                                 \textcolor{keywordflow}{while} ((chunkCqi < 15) && (
      \hyperlink{namespacens3_aa667d4abe6d529b6b88203fd52973c8a}{SpectralEfficiencyForCqi}[chunkCqi + 1] <= s))
404                                 \{
405                                         ++chunkCqi;
406                                 \}
407                         \}
408                         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"\(\backslash\)t MCS "} << (uint16\_t)mcs << \textcolor{stringliteral}{"-> CQI "} << 
      chunkCqi);
409                         cqi.push\_back (chunkCqi);
410                 \}
411         \}
412         \textcolor{keywordflow}{return} cqi;
413 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Create\+Cqi\+Feedback\+Wb\+Tdma@{Create\+Cqi\+Feedback\+Wb\+Tdma}}
\index{Create\+Cqi\+Feedback\+Wb\+Tdma@{Create\+Cqi\+Feedback\+Wb\+Tdma}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Create\+Cqi\+Feedback\+Wb\+Tdma(const Spectrum\+Value \&sinr, uint8\+\_\+t num\+Sym, uint32\+\_\+t tbs, int \&mcs\+Wb)}{CreateCqiFeedbackWbTdma(const SpectrumValue &sinr, uint8_t numSym, uint32_t tbs, int &mcsWb)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Mm\+Wave\+Amc\+::\+Create\+Cqi\+Feedback\+Wb\+Tdma (
\begin{DoxyParamCaption}
\item[{const {\bf Spectrum\+Value} \&}]{sinr, }
\item[{uint8\+\_\+t}]{num\+Sym, }
\item[{uint32\+\_\+t}]{tbs, }
\item[{int \&}]{mcs\+Wb}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a692293fdeba014cbaa8e316bd12a6fd0}{}\label{classns3_1_1MmWaveAmc_a692293fdeba014cbaa8e316bd12a6fd0}

\begin{DoxyCode}
417 \{
418         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
419 
420         \textcolor{comment}{// produces a single CQI/MCS value}
421 
422         \textcolor{comment}{//std::vector<int> cqi;}
423         uint8\_t cqi=0;
424         \textcolor{keywordtype}{double} seAvg=0;
425         \textcolor{keywordtype}{double} mcsAvg=0;
426         \textcolor{keywordtype}{double} cqiAvg=0;
427 
428         Values::const\_iterator it;
429         \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{m\_amcModel} == \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}{PiroEW2010})
430         \{
431                 \textcolor{comment}{//use PiroEW2010 model}
432                 \textcolor{keywordflow}{for} (it = sinr.ConstValuesBegin (); it != sinr.ConstValuesEnd (); it++)
433                 \{
434                         \textcolor{keywordtype}{double} sinr\_ = (*it);
435                         \textcolor{keywordflow}{if} (sinr\_ == 0.0)
436                         \{
437                                 \textcolor{comment}{//cqi.push\_back (-1); // SINR == 0 (linear units) means no signal in this
       RB}
438                         \}
439                         \textcolor{keywordflow}{else}
440                         \{
441                                 \textcolor{comment}{/*}
442 \textcolor{comment}{                                 * Compute the spectral efficiency from the SINR}
443 \textcolor{comment}{                                 *                                        SINR}
444 \textcolor{comment}{                                 * spectralEfficiency = log2 (1 + -------------------- )}
445 \textcolor{comment}{                                 *                                    -ln(5*BER)/1.5}
446 \textcolor{comment}{                                 * NB: SINR must be expressed in linear units}
447 \textcolor{comment}{                                 */}
448 
449                                 \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = log2 ( 1 + ( sinr\_ / ( (-std::log (5.0 * 
      \hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{m\_ber} )) / 1.5) ));
450                                 seAvg += \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
451 
452                                 \textcolor{keywordtype}{int} cqi\_ = \hyperlink{classns3_1_1MmWaveAmc_acbe2e5714d389d77b25d1dfbe433a806}{GetCqiFromSpectralEfficiency} (s);
453                                 mcsAvg += \hyperlink{classns3_1_1MmWaveAmc_a3632ed497ab17df876e281a823f0450c}{GetMcsFromSpectralEfficiency} (s);
454                                 cqiAvg += cqi\_;
455 
456                                 \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{" PRB ="} << sinr.GetSpectrumModel()->GetNumBands 
      ()
457                                               << \textcolor{stringliteral}{", sinr = "} << sinr\_
458                                               << \textcolor{stringliteral}{" (="} << 10 * std::log10 (sinr\_) << \textcolor{stringliteral}{" dB)"}
459                                               << \textcolor{stringliteral}{", spectral efficiency ="} << s
460                                               << \textcolor{stringliteral}{", CQI = "} << cqi\_ << \textcolor{stringliteral}{", BER = "} << 
      \hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{m\_ber});
461                                 \textcolor{comment}{//cqi.push\_back (cqi\_);}
462                         \}
463                 \}
464                 seAvg /= sinr.GetSpectrumModel()->GetNumBands ();
465                 mcsAvg /= sinr.GetSpectrumModel()->GetNumBands ();
466                 cqiAvg /= sinr.GetSpectrumModel()->GetNumBands ();
467                 cqi = ceil(cqiAvg); \textcolor{comment}{//GetCqiFromSpectralEfficiency (seAvg);}
468                 mcs = \hyperlink{classns3_1_1MmWaveAmc_a3632ed497ab17df876e281a823f0450c}{GetMcsFromSpectralEfficiency} (seAvg); \textcolor{comment}{//ceil(mcsAvg);}
469         \}
470         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{m\_amcModel} == \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{MiErrorModel})
471         \{
472                 std::vector <int> chunkMap;
473                 \textcolor{keywordtype}{int} chunkId = 0;
474                 \textcolor{keywordtype}{double} sinrAvg = 0;
475                 \textcolor{keywordflow}{for} (it = sinr.ConstValuesBegin (); it != sinr.ConstValuesEnd (); it++)
476                 \{
477                         chunkMap.push\_back (chunkId++);
478                         sinrAvg += *it;
479                 \}
480                 sinrAvg /= chunkId;
481 
482                 mcs = 0;
483                 MmWaveTbStats\_t tbStats;
484                 \textcolor{keywordflow}{while} (mcs <= 28)
485                 \{
486                         \hyperlink{namespacens3_aca7c6bab455c2515f3e437749b5e904d}{MmWaveHarqProcessInfoList\_t} harqInfoList;
487                         tbStats = \hyperlink{classns3_1_1MmWaveMiErrorModel_a82a14ebf85ae03a7815215c3c1a96cc7}{MmWaveMiErrorModel::GetTbDecodificationStats}
       (sinr, chunkMap, tbSize, mcs, harqInfoList);
488                         \textcolor{keywordflow}{if} (tbStats.tbler > 0.1)
489                         \{
490                                 \textcolor{keywordflow}{break};
491                         \}
492                         mcs++;
493                 \}
494                 \textcolor{keywordflow}{if} (mcs > 0)
495                 \{
496                         mcs--;
497                 \}
498 \textcolor{comment}{//              MmWaveHarqProcessInfoList\_t harqInfoList;}
499 \textcolor{comment}{//              MmWaveTbStats\_t tbStatsFinal = MmWaveMiErrorModel::GetTbDecodificationStats (sinr,
       chunkMap, tbSize, mcs, harqInfoList);}
500 \textcolor{comment}{//              NS\_LOG\_UNCOND ("TBLER " << tbStatsFinal.tbler << " for chunks " << chunkMap.size () << "
       numSym "}
501 \textcolor{comment}{//                             << (unsigned)numSym << " tbSize " << tbSize << " mcs " << (unsigned)mcs << "
       sinr " << sinrAvg);}
502 \textcolor{comment}{//              NS\_LOG\_UNCOND (sinr);}
503                 \textcolor{keywordflow}{if} ((tbStats.tbler > 0.1)&&(mcs==0))
504                 \{
505                         cqi = 0;
506                 \}
507                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mcs == 28)
508                 \{
509                         cqi = 15; \textcolor{comment}{// all MCSs can guarantee the 10 % of BER}
510                 \}
511                 \textcolor{keywordflow}{else}
512                 \{
513                         \textcolor{keywordtype}{double} s = \hyperlink{namespacens3_aaa522c5b4dc5c1b69cfa3c8b5796cac9}{SpectralEfficiencyForMcs}[mcs];
514                         cqi = 0;
515                         \textcolor{keywordflow}{while} ((cqi < 15) && (\hyperlink{namespacens3_aa667d4abe6d529b6b88203fd52973c8a}{SpectralEfficiencyForCqi}[cqi + 1] <= 
      s))
516                         \{
517                                 ++cqi;
518                         \}
519                 \}
520                 \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"\(\backslash\)t MCS "} << (uint16\_t)mcs << \textcolor{stringliteral}{"-> CQI "} << cqi);
521         \}
522         \textcolor{keywordflow}{return} cqi;
523 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Get\+Cqi\+From\+Spectral\+Efficiency@{Get\+Cqi\+From\+Spectral\+Efficiency}}
\index{Get\+Cqi\+From\+Spectral\+Efficiency@{Get\+Cqi\+From\+Spectral\+Efficiency}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Get\+Cqi\+From\+Spectral\+Efficiency(double s)}{GetCqiFromSpectralEfficiency(double s)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Mm\+Wave\+Amc\+::\+Get\+Cqi\+From\+Spectral\+Efficiency (
\begin{DoxyParamCaption}
\item[{double}]{s}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_acbe2e5714d389d77b25d1dfbe433a806}{}\label{classns3_1_1MmWaveAmc_acbe2e5714d389d77b25d1dfbe433a806}

\begin{DoxyCode}
527 \{
528         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
529         \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} >= 0.0, \textcolor{stringliteral}{"negative spectral efficiency = "} << 
      \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
530         \textcolor{keywordtype}{int} cqi = 0;
531         \textcolor{keywordflow}{while} ((cqi < 15) && (\hyperlink{namespacens3_aa667d4abe6d529b6b88203fd52973c8a}{SpectralEfficiencyForCqi}[cqi + 1] < 
      \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s}))
532         \{
533                 ++cqi;
534         \}
535         \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cqi = "} << cqi);
536         \textcolor{keywordflow}{return} cqi;
537 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Get\+Mcs\+From\+Cqi@{Get\+Mcs\+From\+Cqi}}
\index{Get\+Mcs\+From\+Cqi@{Get\+Mcs\+From\+Cqi}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Get\+Mcs\+From\+Cqi(int cqi)}{GetMcsFromCqi(int cqi)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Mm\+Wave\+Amc\+::\+Get\+Mcs\+From\+Cqi (
\begin{DoxyParamCaption}
\item[{int}]{cqi}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a5137f0072cc2ffa24e92dbad1d13311c}{}\label{classns3_1_1MmWaveAmc_a5137f0072cc2ffa24e92dbad1d13311c}

\begin{DoxyCode}
148 \{
149   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (cqi);
150   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (cqi >= 0 && cqi <= 15, \textcolor{stringliteral}{"CQI must be in [0..15] = "} << cqi);
151   \textcolor{keywordtype}{double} spectralEfficiency = \hyperlink{namespacens3_aa667d4abe6d529b6b88203fd52973c8a}{SpectralEfficiencyForCqi}[cqi];
152   \textcolor{keywordtype}{int} mcs = 0;
153   \textcolor{keywordflow}{while} ((mcs < 28) && (\hyperlink{namespacens3_aaa522c5b4dc5c1b69cfa3c8b5796cac9}{SpectralEfficiencyForMcs}[mcs + 1] <= spectralEfficiency))
154     \{
155       ++mcs;
156     \}
157   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mcs = "} << mcs);
158   \textcolor{keywordflow}{return} mcs;
159 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Get\+Mcs\+From\+Spectral\+Efficiency@{Get\+Mcs\+From\+Spectral\+Efficiency}}
\index{Get\+Mcs\+From\+Spectral\+Efficiency@{Get\+Mcs\+From\+Spectral\+Efficiency}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Get\+Mcs\+From\+Spectral\+Efficiency(double s)}{GetMcsFromSpectralEfficiency(double s)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Mm\+Wave\+Amc\+::\+Get\+Mcs\+From\+Spectral\+Efficiency (
\begin{DoxyParamCaption}
\item[{double}]{s}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a3632ed497ab17df876e281a823f0450c}{}\label{classns3_1_1MmWaveAmc_a3632ed497ab17df876e281a823f0450c}

\begin{DoxyCode}
541 \{
542         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
543         \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} >= 0.0, \textcolor{stringliteral}{"negative spectral efficiency = "} << 
      \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
544         \textcolor{keywordtype}{int} mcs = 0;
545         \textcolor{keywordflow}{while} ((mcs < 28) && (\hyperlink{namespacens3_aaa522c5b4dc5c1b69cfa3c8b5796cac9}{SpectralEfficiencyForMcs}[mcs+1] < 
      \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s}))
546         \{
547                 ++mcs;
548         \}
549         \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cqi = "} << mcs);
550         \textcolor{keywordflow}{return} mcs;
551 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Get\+Num\+Symbols\+From\+Tbs\+Mcs@{Get\+Num\+Symbols\+From\+Tbs\+Mcs}}
\index{Get\+Num\+Symbols\+From\+Tbs\+Mcs@{Get\+Num\+Symbols\+From\+Tbs\+Mcs}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Get\+Num\+Symbols\+From\+Tbs\+Mcs(unsigned tb\+Size, unsigned mcs)}{GetNumSymbolsFromTbsMcs(unsigned tbSize, unsigned mcs)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Mm\+Wave\+Amc\+::\+Get\+Num\+Symbols\+From\+Tbs\+Mcs (
\begin{DoxyParamCaption}
\item[{unsigned}]{tb\+Size, }
\item[{unsigned}]{mcs}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a652580bea28d3e58e039dcc5667afccf}{}\label{classns3_1_1MmWaveAmc_a652580bea28d3e58e039dcc5667afccf}

\begin{DoxyCode}
205 \{
206         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (mcs);
207         \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (mcs < 29, \textcolor{stringliteral}{"MCS="} << mcs);
208         \textcolor{comment}{//unsigned itb = McsToItbs[mcs];}
209         \textcolor{keywordtype}{int} rscElementPerSym = (\hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a724771405a9e4d3e2ee251be4aff8abc}{GetNumSCperChunk} ()*
      \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a97e82c809a351fea9d5058ac1bb4c3c6}{GetTotalNumChunk}()
210                         - \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a4255231004e45cc9b3df0ceb791353db}{GetNumRefScPerSym} ());
211         \textcolor{keywordtype}{double} Rcode = \hyperlink{namespacens3_a5e80c75db664b51189d262e55aba06be}{McsEcrTable}[mcs];
212         \textcolor{keywordtype}{double} \hyperlink{loss__ITU1411__NLOS__over__rooftop_8m_a5bda9815415e83db7d9a9adf5ca84fd2}{Qm} = \hyperlink{namespacens3_ae77af3b468826ac14e69fe8175220f80}{ModulationSchemeForMcs}[mcs];
213         uint16\_t cbSize = 6144;  \textcolor{comment}{//max size of a code-block (including m\_crcLen)}
214         \textcolor{keywordflow}{if} (tbSize > cbSize)
215         \{
216                 \textcolor{keywordtype}{int} \hyperlink{generate__test__data__lte__sinr_8m_ae24bb667d5023e5aaa1e71c3a15e447e}{C} = ceil ((\textcolor{keywordtype}{double})tbSize / ((\textcolor{keywordtype}{double})(6144)));
217                 tbSize += C*\hyperlink{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{m\_crcLen}; \textcolor{comment}{//subtract bits of m\_crcLen used in code-blocks.}
218         \}
219         \textcolor{keywordtype}{int} reqRscElement = (tbSize+\hyperlink{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{m\_crcLen})/(Qm*Rcode);
220 
221         \textcolor{keywordflow}{return} ceil((\textcolor{keywordtype}{double})reqRscElement / (\textcolor{keywordtype}{double})rscElementPerSym);
222 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Get\+Tb\+Size\+From\+Mcs@{Get\+Tb\+Size\+From\+Mcs}}
\index{Get\+Tb\+Size\+From\+Mcs@{Get\+Tb\+Size\+From\+Mcs}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Get\+Tb\+Size\+From\+Mcs(unsigned mcs, unsigned nprb)}{GetTbSizeFromMcs(unsigned mcs, unsigned nprb)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Mm\+Wave\+Amc\+::\+Get\+Tb\+Size\+From\+Mcs (
\begin{DoxyParamCaption}
\item[{unsigned}]{mcs, }
\item[{unsigned}]{nprb}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a46a70ae19f81f7b1f9307100caabc0e8}{}\label{classns3_1_1MmWaveAmc_a46a70ae19f81f7b1f9307100caabc0e8}

\begin{DoxyCode}
163 \{
164         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (mcs);
165         \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (mcs < 29, \textcolor{stringliteral}{"MCS="} << mcs);
166         \textcolor{comment}{//NS\_ASSERT\_MSG (nprb < 5, "NPRB=" << nprb);}
167         \textcolor{keywordtype}{int} rscElement = \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a724771405a9e4d3e2ee251be4aff8abc}{GetNumSCperChunk} ()*
      \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a8a303f463053dadea5902859a00d481f}{GetNumChunkPerRb} ()*nprb* \(\backslash\)
168                         (\hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a752df2d4b9973d8bd832123303f49422}{GetSymbPerSlot} () - 
      \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_aa68466997d082adc450d3385f09fc35a}{GetNumReferenceSymbols} ());
169         \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = \hyperlink{namespacens3_aaa522c5b4dc5c1b69cfa3c8b5796cac9}{SpectralEfficiencyForMcs}[mcs];
170 
171         \textcolor{keywordtype}{int} tbSize = rscElement*s - \hyperlink{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{m\_crcLen};
172         uint16\_t cbSize = 6144;  \textcolor{comment}{//max size of a code-block (including m\_crcLen)}
173     \textcolor{keywordflow}{if} (tbSize > cbSize)
174     \{
175         \textcolor{keywordtype}{int} \hyperlink{generate__test__data__lte__sinr_8m_ae24bb667d5023e5aaa1e71c3a15e447e}{C} = ceil ((\textcolor{keywordtype}{double})tbSize / ((\textcolor{keywordtype}{double})(6144)));
176         tbSize -= C*\hyperlink{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{m\_crcLen}; \textcolor{comment}{//subtract bits of m\_crcLen used in code-blocks.}
177     \}
178         \textcolor{keywordflow}{return} tbSize;
179 
180 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Get\+Tb\+Size\+From\+Mcs\+Symbols@{Get\+Tb\+Size\+From\+Mcs\+Symbols}}
\index{Get\+Tb\+Size\+From\+Mcs\+Symbols@{Get\+Tb\+Size\+From\+Mcs\+Symbols}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Get\+Tb\+Size\+From\+Mcs\+Symbols(unsigned mcs, unsigned nsym)}{GetTbSizeFromMcsSymbols(unsigned mcs, unsigned nsym)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Mm\+Wave\+Amc\+::\+Get\+Tb\+Size\+From\+Mcs\+Symbols (
\begin{DoxyParamCaption}
\item[{unsigned}]{mcs, }
\item[{unsigned}]{nsym}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveAmc_a7e972b1d61df4f0236301ecb24f13447}{}\label{classns3_1_1MmWaveAmc_a7e972b1d61df4f0236301ecb24f13447}

\begin{DoxyCode}
184 \{
185         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (mcs);
186         \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (mcs < 29, \textcolor{stringliteral}{"MCS="} << mcs);
187         \textcolor{comment}{//unsigned itb = McsToItbs[mcs];}
188         \textcolor{keywordtype}{int} rscElement = (\hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a724771405a9e4d3e2ee251be4aff8abc}{GetNumSCperChunk} ()*
      \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a97e82c809a351fea9d5058ac1bb4c3c6}{GetTotalNumChunk}()
189                         - \hyperlink{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a4255231004e45cc9b3df0ceb791353db}{GetNumRefScPerSym} ())*nsymb;
190         \textcolor{keywordtype}{double} Rcode = \hyperlink{namespacens3_a5e80c75db664b51189d262e55aba06be}{McsEcrTable}[mcs];
191         \textcolor{keywordtype}{double} \hyperlink{loss__ITU1411__NLOS__over__rooftop_8m_a5bda9815415e83db7d9a9adf5ca84fd2}{Qm} = \hyperlink{namespacens3_ae77af3b468826ac14e69fe8175220f80}{ModulationSchemeForMcs}[mcs];
192 
193         \textcolor{keywordtype}{int} tbSize = rscElement*Qm*Rcode - \hyperlink{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{m\_crcLen};
194         uint16\_t cbSize = 6144;  \textcolor{comment}{//max size of a code-block (including m\_crcLen)}
195         \textcolor{keywordflow}{if} (tbSize > cbSize)
196         \{
197                 \textcolor{keywordtype}{int} \hyperlink{generate__test__data__lte__sinr_8m_ae24bb667d5023e5aaa1e71c3a15e447e}{C} = ceil ((\textcolor{keywordtype}{double})tbSize / ((\textcolor{keywordtype}{double})(6144)));
198                 tbSize -= C*\hyperlink{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{m\_crcLen}; \textcolor{comment}{//subtract bits of m\_crcLen used in code-blocks.}
199         \}
200         \textcolor{keywordflow}{return} tbSize;
201 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Mm\+Wave\+Amc\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MmWaveAmc_ae531231147435ab791661559e95703fe}{}\label{classns3_1_1MmWaveAmc_ae531231147435ab791661559e95703fe}

\begin{DoxyCode}
127 \{
128         \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::MmWaveAmc"})
129         .SetParent<\hyperlink{classns3_1_1Object_a40860402e64d8008fb42329df7097cdb}{Object}> ()
130         .AddConstructor<MmWaveAmc> ()
131         .AddAttribute (\textcolor{stringliteral}{"Ber"},
132                                  \textcolor{stringliteral}{"The requested BER in assigning MCS (default is 0.00005)."},
133                                  DoubleValue (0.00005),
134                                  MakeDoubleAccessor (&\hyperlink{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{MmWaveAmc::m\_ber}),
135                                  MakeDoubleChecker<double> ())
136         .AddAttribute (\textcolor{stringliteral}{"AmcModel"},
137                                 \textcolor{stringliteral}{"AMC model used to assign CQI"},
138                                  EnumValue (\hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{MmWaveAmc::MiErrorModel}),
139                                  \hyperlink{namespacens3_af5050739867ce63896dec011e332c8ec}{MakeEnumAccessor} (&
      \hyperlink{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{MmWaveAmc::m\_amcModel}),
140                                  \hyperlink{namespacens3_a48832781a2b521d3d0091e05ece30615}{MakeEnumChecker} (
      \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401ac8de076cfbfb1280afab7b9590e00151}{MmWaveAmc::MiErrorModel}, \textcolor{stringliteral}{"Vienna"},
141                                                                   
      \hyperlink{classns3_1_1MmWaveAmc_a2805c1e6b48cb88e9cf86b062e079401aa7b0954f22ca97fa89b0d794155245d0}{MmWaveAmc::PiroEW2010}, \textcolor{stringliteral}{"PiroEW2010"}))
142         ;
143         \textcolor{keywordflow}{return} tid;
144 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




\subsection{Member Data Documentation}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!m\+\_\+amc\+Model@{m\+\_\+amc\+Model}}
\index{m\+\_\+amc\+Model@{m\+\_\+amc\+Model}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{m\+\_\+amc\+Model}{m_amcModel}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Amc\+Model} ns3\+::\+Mm\+Wave\+Amc\+::m\+\_\+amc\+Model\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}{}\label{classns3_1_1MmWaveAmc_a4518d21ebad09825dd22466951c6935b}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!m\+\_\+ber@{m\+\_\+ber}}
\index{m\+\_\+ber@{m\+\_\+ber}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{m\+\_\+ber}{m_ber}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Mm\+Wave\+Amc\+::m\+\_\+ber\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}{}\label{classns3_1_1MmWaveAmc_ac0e911c1ebab08ab7c52713ea5b35a15}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!m\+\_\+crc\+Len@{m\+\_\+crc\+Len}}
\index{m\+\_\+crc\+Len@{m\+\_\+crc\+Len}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{m\+\_\+crc\+Len}{m_crcLen}}]{\setlength{\rightskip}{0pt plus 5cm}const unsigned int ns3\+::\+Mm\+Wave\+Amc\+::m\+\_\+crc\+Len =24\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}{}\label{classns3_1_1MmWaveAmc_a11a852907226e549ff50ec3b7248f0ad}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!m\+\_\+lte\+Rb\+Model@{m\+\_\+lte\+Rb\+Model}}
\index{m\+\_\+lte\+Rb\+Model@{m\+\_\+lte\+Rb\+Model}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{m\+\_\+lte\+Rb\+Model}{m_lteRbModel}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Spectrum\+Model}$>$ ns3\+::\+Mm\+Wave\+Amc\+::m\+\_\+lte\+Rb\+Model\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveAmc_a4c27746a8b0aac6c3915bdd2e2326bac}{}\label{classns3_1_1MmWaveAmc_a4c27746a8b0aac6c3915bdd2e2326bac}
\index{ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}!m\+\_\+phy\+Mac\+Config@{m\+\_\+phy\+Mac\+Config}}
\index{m\+\_\+phy\+Mac\+Config@{m\+\_\+phy\+Mac\+Config}!ns3\+::\+Mm\+Wave\+Amc@{ns3\+::\+Mm\+Wave\+Amc}}
\subsubsection[{\texorpdfstring{m\+\_\+phy\+Mac\+Config}{m_phyMacConfig}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Mm\+Wave\+Phy\+Mac\+Common}$>$ ns3\+::\+Mm\+Wave\+Amc\+::m\+\_\+phy\+Mac\+Config\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}{}\label{classns3_1_1MmWaveAmc_ae2bd45429e23c9091597462d888e8d6f}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
mmwave/model/\hyperlink{mmwave-amc_8h}{mmwave-\/amc.\+h}\item 
mmwave/model/\hyperlink{mmwave-amc_8cc}{mmwave-\/amc.\+cc}\end{DoxyCompactItemize}
