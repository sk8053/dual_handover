\hypertarget{classns3_1_1RvBatteryModel}{}\section{ns3\+:\+:Rv\+Battery\+Model Class Reference}
\label{classns3_1_1RvBatteryModel}\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}


Rakhmatov Vrudhula non-\/linear battery model.  




{\ttfamily \#include $<$rv-\/battery-\/model.\+h$>$}



Inheritance diagram for ns3\+:\+:Rv\+Battery\+Model\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Rv\+Battery\+Model\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1RvBatteryModel_ae88b599d504056559bf2de38391a17da}{Rv\+Battery\+Model} ()
\item 
virtual \hyperlink{classns3_1_1RvBatteryModel_ae7fa8a5f2752822529e48abf2c7058f9}{$\sim$\+Rv\+Battery\+Model} ()
\item 
virtual double \hyperlink{classns3_1_1RvBatteryModel_a758f091570aee1b6618376217f6b3b19}{Get\+Initial\+Energy} (void) const 
\item 
virtual double \hyperlink{classns3_1_1RvBatteryModel_afacc0bd74d865bdbfc51c515cff7efee}{Get\+Supply\+Voltage} (void) const 
\item 
virtual double \hyperlink{classns3_1_1RvBatteryModel_a7ab2862fe0f9006fecefe5ee8a5a1c52}{Get\+Remaining\+Energy} (void)
\item 
virtual double \hyperlink{classns3_1_1RvBatteryModel_a38e73ce97ec3d6d1c996fe897d121060}{Get\+Energy\+Fraction} (void)
\item 
virtual void \hyperlink{classns3_1_1RvBatteryModel_ac0885eeb1b510ffe52531e7e68039d3e}{Update\+Energy\+Source} (void)
\item 
void \hyperlink{classns3_1_1RvBatteryModel_a45087cd749937bacfcf3ba43b5ddb538}{Set\+Sampling\+Interval} (\hyperlink{classns3_1_1Time}{Time} interval)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1RvBatteryModel_a9eb804d6f04de072b6f108c4aff55257}{Get\+Sampling\+Interval} (void) const 
\item 
void \hyperlink{classns3_1_1RvBatteryModel_ab086a0fa60589b1232125e9fd183c1b9}{Set\+Open\+Circuit\+Voltage} (double voltage)
\begin{DoxyCompactList}\small\item\em Sets open circuit voltage of battery. \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1RvBatteryModel_a0040c91bbfaccac6cf549bafc6acfd11}{Get\+Open\+Circuit\+Voltage} (void) const 
\item 
void \hyperlink{classns3_1_1RvBatteryModel_a70d08fb3ddebd46b0ce0daae98af79e6}{Set\+Cutoff\+Voltage} (double voltage)
\begin{DoxyCompactList}\small\item\em Sets cutoff voltage of battery. \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1RvBatteryModel_a2c6e69ca6fc5f9f12cc3cabe3ff2f3d7}{Get\+Cutoff\+Voltage} (void) const 
\item 
void \hyperlink{classns3_1_1RvBatteryModel_ab7ed42697329357ed95a18cf2ec0d5d9}{Set\+Alpha} (double \hyperlink{lte__uplink__power__control_8m_a62197192f0fbf4e0675eb37be1c4c175}{alpha})
\begin{DoxyCompactList}\small\item\em Sets the alpha value for the battery model. \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1RvBatteryModel_a91cdabc79e3f2a6facfe95202fa77e34}{Get\+Alpha} (void) const 
\item 
void \hyperlink{classns3_1_1RvBatteryModel_a82f89a01a1f487d3a71e9e21e5322286}{Set\+Beta} (double beta)
\begin{DoxyCompactList}\small\item\em Sets the beta value for the battery model. \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1RvBatteryModel_ad787cf29a82eea91384fe43146f64d28}{Get\+Beta} (void) const 
\item 
double \hyperlink{classns3_1_1RvBatteryModel_af3047a4edc01822b612bb2fb70ee7991}{Get\+Battery\+Level} (void)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1RvBatteryModel_a0195713aa6eeb966f3189192b5fbeea1}{Get\+Lifetime} (void) const 
\item 
void \hyperlink{classns3_1_1RvBatteryModel_a23db3b707a4885248157b96db2ad600d}{Set\+Num\+Of\+Terms} (int num)
\begin{DoxyCompactList}\small\item\em Sets the number of terms of the infinite sum for estimating battery level. \end{DoxyCompactList}\item 
int \hyperlink{classns3_1_1RvBatteryModel_ac019bceefdd171250deedee5b24d90af}{Get\+Num\+Of\+Terms} (void) const 
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1RvBatteryModel_a427636046ac8a08ffe769cfe27239da2}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1RvBatteryModel_a2876516a9e3fa5e077cc0ee0748dbfe5}{Do\+Initialize} (void)
\begin{DoxyCompactList}\small\item\em Defined in \hyperlink{classns3_1_1Object}{ns3\+::\+Object}. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1RvBatteryModel_a9e659d4a7f9472fa53ccfbc0ef6a8c63}{Do\+Dispose} (void)
\begin{DoxyCompactList}\small\item\em Defined in \hyperlink{classns3_1_1Object}{ns3\+::\+Object}. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1RvBatteryModel_ac381990282a8d4a984e5b4322c79f89a}{Handle\+Energy\+Drained\+Event} (void)
\item 
double \hyperlink{classns3_1_1RvBatteryModel_a5e485e8966bad557ccb11f6a459e2a8d}{Discharge} (double load, \hyperlink{classns3_1_1Time}{Time} t)
\begin{DoxyCompactList}\small\item\em Discharges the battery. \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1RvBatteryModel_ab3bf9607642772fb56445a23e654626b}{Rv\+Model\+A\+Function} (\hyperlink{classns3_1_1Time}{Time} t, \hyperlink{classns3_1_1Time}{Time} sk, \hyperlink{classns3_1_1Time}{Time} sk\+\_\+1, double beta)
\begin{DoxyCompactList}\small\item\em RV model A function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classns3_1_1RvBatteryModel_a0dc610b9862b35f5cd83af39b319e4b7}{m\+\_\+open\+Circuit\+Voltage}
\item 
double \hyperlink{classns3_1_1RvBatteryModel_a367d164b01ccbe49179d7a7bccfb6a94}{m\+\_\+cutoff\+Voltage}
\item 
double \hyperlink{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}{m\+\_\+alpha}
\item 
double \hyperlink{classns3_1_1RvBatteryModel_afd9fb778ecbaf556b125e4a557baba86}{m\+\_\+beta}
\item 
double \hyperlink{classns3_1_1RvBatteryModel_a53cbe01e0b8ea5e51f4b248bba16170d}{m\+\_\+previous\+Load}
\item 
std\+::vector$<$ double $>$ \hyperlink{classns3_1_1RvBatteryModel_aa09c5b1b5789a09ef0c34a583f20ac86}{m\+\_\+load}
\item 
std\+::vector$<$ \hyperlink{classns3_1_1Time}{Time} $>$ \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\+\_\+time\+Stamps}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}{m\+\_\+last\+Sample\+Time}
\item 
int \hyperlink{classns3_1_1RvBatteryModel_a57a22ebee1bbbfe679e43e711098a085}{m\+\_\+num\+Of\+Terms}
\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ double $>$ \hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\+\_\+battery\+Level}
\item 
double \hyperlink{classns3_1_1RvBatteryModel_a01e8c3b6a4ff1b066d2fe0271c216007}{m\+\_\+low\+Battery\+Th}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1RvBatteryModel_aab7b0edf6e33a0dc26cc633af6b6ac2e}{m\+\_\+sampling\+Interval}
\item 
\hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1RvBatteryModel_a3eb7ced1023c82a8a4714d46e8a97342}{m\+\_\+current\+Sample\+Event}
\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ \hyperlink{classns3_1_1Time}{Time} $>$ \hyperlink{classns3_1_1RvBatteryModel_aab2f6462269e44fda1b9425a6cb8bdf6}{m\+\_\+lifetime}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Rakhmatov Vrudhula non-\/linear battery model. 

This (energy source) model implements an analytical non-\/linear battery model. It is capable of capturing load capacity and recovery effects of batteries. Batteries are characterized by 2 parameters, alpha and beta, which can both be obtained from the discharge curve of the batteries.

The model is developed by Daler Rakhmatov \& Sarma Vrudhula in\+: \char`\"{}\+Battery
\+Lifetime Prediction for Energy-\/\+Aware Computing\char`\"{} and \char`\"{}\+An Analytical High-\/\+Level
\+Battery Model for Use in Energy Management of Portable Electronic Systems\char`\"{}.

The real-\/time algorithm is developed by Matthias Handy \& Dirk Timmermann in\+: \char`\"{}\+Simulation of Mobile Wireless Networks with Accurate Modeling of non-\/linear
battery effects\char`\"{}. The real-\/time algorithm is modified by the authors of this code for improved accuracy and reduced computation (sampling) overhead. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Rv\+Battery\+Model@{Rv\+Battery\+Model}}
\index{Rv\+Battery\+Model@{Rv\+Battery\+Model}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Rv\+Battery\+Model()}{RvBatteryModel()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Rv\+Battery\+Model\+::\+Rv\+Battery\+Model (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_ae88b599d504056559bf2de38391a17da}{}\label{classns3_1_1RvBatteryModel_ae88b599d504056559bf2de38391a17da}

\begin{DoxyCode}
96 \{
97   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
98   \hyperlink{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}{m\_lastSampleTime} = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
99   \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.push\_back (\hyperlink{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}{m\_lastSampleTime});
100   \hyperlink{classns3_1_1RvBatteryModel_a53cbe01e0b8ea5e51f4b248bba16170d}{m\_previousLoad} = -1.0;
101   \hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel} = 1; \textcolor{comment}{// fully charged}
102   \hyperlink{classns3_1_1RvBatteryModel_aab2f6462269e44fda1b9425a6cb8bdf6}{m\_lifetime} = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0);
103 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!````~Rv\+Battery\+Model@{$\sim$\+Rv\+Battery\+Model}}
\index{````~Rv\+Battery\+Model@{$\sim$\+Rv\+Battery\+Model}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{$\sim$\+Rv\+Battery\+Model()}{~RvBatteryModel()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Rv\+Battery\+Model\+::$\sim$\+Rv\+Battery\+Model (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_ae7fa8a5f2752822529e48abf2c7058f9}{}\label{classns3_1_1RvBatteryModel_ae7fa8a5f2752822529e48abf2c7058f9}

\begin{DoxyCode}
106 \{
107   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
108 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Discharge@{Discharge}}
\index{Discharge@{Discharge}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Discharge(double load, Time t)}{Discharge(double load, Time t)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Discharge (
\begin{DoxyParamCaption}
\item[{double}]{load, }
\item[{{\bf Time}}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a5e485e8966bad557ccb11f6a459e2a8d}{}\label{classns3_1_1RvBatteryModel_a5e485e8966bad557ccb11f6a459e2a8d}


Discharges the battery. 


\begin{DoxyParams}{Parameters}
{\em load} & Load value (total current form devices, in mA). \\
\hline
{\em t} & \hyperlink{classns3_1_1Time}{Time} stamp of the load value. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Calculated alpha value.
\end{DoxyReturn}
Discharge function calculates a value which is then compared to the alpha value to determine if the battery is dead. It will also update the battery level.

Note that the load value passed to Discharge has to be in mA. 
\begin{DoxyCode}
322 \{
323   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << load << t);
324 
325   \textcolor{comment}{// record only when load changes}
326   \textcolor{keywordflow}{if} (load != \hyperlink{classns3_1_1RvBatteryModel_a53cbe01e0b8ea5e51f4b248bba16170d}{m\_previousLoad})
327     \{
328       \hyperlink{classns3_1_1RvBatteryModel_aa09c5b1b5789a09ef0c34a583f20ac86}{m\_load}.push\_back (load);
329       \hyperlink{classns3_1_1RvBatteryModel_a53cbe01e0b8ea5e51f4b248bba16170d}{m\_previousLoad} = load;
330       \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}[\hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.size () - 1] = 
      \hyperlink{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}{m\_lastSampleTime};
331       \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.push\_back (t);
332     \}
333   \textcolor{keywordflow}{else}
334     \{
335       \textcolor{keywordflow}{if}  (!\hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.empty())
336       \{
337         \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}[\hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.size () - 1] = t;
338       \}
339     \}
340 
341   \hyperlink{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}{m\_lastSampleTime} = t;
342 
343   \textcolor{comment}{// calculate alpha for new t}
344   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1RvBatteryModel_aa09c5b1b5789a09ef0c34a583f20ac86}{m\_load}.size () == \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.size () - 1); \textcolor{comment}{// size must be equal}
345   \textcolor{keywordtype}{double} calculatedAlpha = 0.0;
346   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.size () == 1)
347     \{
348       \textcolor{comment}{// constant load}
349       calculatedAlpha = \hyperlink{classns3_1_1RvBatteryModel_aa09c5b1b5789a09ef0c34a583f20ac86}{m\_load}[0] * \hyperlink{classns3_1_1RvBatteryModel_ab3bf9607642772fb56445a23e654626b}{RvModelAFunction} (t, t, 
      \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0),
350                                                       \hyperlink{classns3_1_1RvBatteryModel_afd9fb778ecbaf556b125e4a557baba86}{m\_beta});
351     \}
352   \textcolor{keywordflow}{else}
353     \{
354       \textcolor{comment}{// changing load}
355       \textcolor{keywordflow}{for} (uint64\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 1; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
356         \{
357           calculatedAlpha += \hyperlink{classns3_1_1RvBatteryModel_aa09c5b1b5789a09ef0c34a583f20ac86}{m\_load}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} - 1] * \hyperlink{classns3_1_1RvBatteryModel_ab3bf9607642772fb56445a23e654626b}{RvModelAFunction} (t, 
      \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}],
358                                                                \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}[i - 1],
359                                                                \hyperlink{classns3_1_1RvBatteryModel_afd9fb778ecbaf556b125e4a557baba86}{m\_beta});
360         \}
361     \}
362 
363   \textcolor{keywordflow}{return} calculatedAlpha;
364 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_a9e659d4a7f9472fa53ccfbc0ef6a8c63}{}\label{classns3_1_1RvBatteryModel_a9e659d4a7f9472fa53ccfbc0ef6a8c63}


Defined in \hyperlink{classns3_1_1Object}{ns3\+::\+Object}. 



Reimplemented from \hyperlink{classns3_1_1EnergySource_adf10a9a0ac6bc62be24eea31a8c22a12}{ns3\+::\+Energy\+Source}.


\begin{DoxyCode}
307 \{
308   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
309   \hyperlink{classns3_1_1EnergySource_a7a91665a6b2e6a01bf6b4a641b53bd45}{BreakDeviceEnergyModelRefCycle} ();  \textcolor{comment}{// break reference cycle}
310 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Do\+Initialize@{Do\+Initialize}}
\index{Do\+Initialize@{Do\+Initialize}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Do\+Initialize(void)}{DoInitialize(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Do\+Initialize (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_a2876516a9e3fa5e077cc0ee0748dbfe5}{}\label{classns3_1_1RvBatteryModel_a2876516a9e3fa5e077cc0ee0748dbfe5}


Defined in \hyperlink{classns3_1_1Object}{ns3\+::\+Object}. 



Reimplemented from \hyperlink{classns3_1_1Object_af8482a521433409fb5c7f749398c9dbe}{ns3\+::\+Object}.


\begin{DoxyCode}
299 \{
300   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
301   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RvBatteryModel:Starting battery level update!"});
302   \hyperlink{classns3_1_1RvBatteryModel_ac0885eeb1b510ffe52531e7e68039d3e}{UpdateEnergySource} ();  \textcolor{comment}{// start periodic sampling of load (total current)}
303 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Alpha@{Get\+Alpha}}
\index{Get\+Alpha@{Get\+Alpha}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Alpha(void) const }{GetAlpha(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Alpha (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1RvBatteryModel_a91cdabc79e3f2a6facfe95202fa77e34}{}\label{classns3_1_1RvBatteryModel_a91cdabc79e3f2a6facfe95202fa77e34}
\begin{DoxyReturn}{Returns}
The alpha value used by the battery model. 
\end{DoxyReturn}

\begin{DoxyCode}
244 \{
245   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
246   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}{m\_alpha};
247 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Battery\+Level@{Get\+Battery\+Level}}
\index{Get\+Battery\+Level@{Get\+Battery\+Level}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Battery\+Level(void)}{GetBatteryLevel(void)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Battery\+Level (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_af3047a4edc01822b612bb2fb70ee7991}{}\label{classns3_1_1RvBatteryModel_af3047a4edc01822b612bb2fb70ee7991}
\begin{DoxyReturn}{Returns}
Battery level \mbox{[}0, 1\mbox{]}. 
\end{DoxyReturn}

\begin{DoxyCode}
266 \{
267   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
268   \hyperlink{classns3_1_1RvBatteryModel_ac0885eeb1b510ffe52531e7e68039d3e}{UpdateEnergySource} ();
269   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel};
270 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Beta@{Get\+Beta}}
\index{Get\+Beta@{Get\+Beta}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Beta(void) const }{GetBeta(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Beta (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1RvBatteryModel_ad787cf29a82eea91384fe43146f64d28}{}\label{classns3_1_1RvBatteryModel_ad787cf29a82eea91384fe43146f64d28}
\begin{DoxyReturn}{Returns}
The beta value used by the battery model. 
\end{DoxyReturn}

\begin{DoxyCode}
259 \{
260   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
261   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_afd9fb778ecbaf556b125e4a557baba86}{m\_beta};
262 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Cutoff\+Voltage@{Get\+Cutoff\+Voltage}}
\index{Get\+Cutoff\+Voltage@{Get\+Cutoff\+Voltage}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Cutoff\+Voltage(void) const }{GetCutoffVoltage(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Cutoff\+Voltage (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1RvBatteryModel_a2c6e69ca6fc5f9f12cc3cabe3ff2f3d7}{}\label{classns3_1_1RvBatteryModel_a2c6e69ca6fc5f9f12cc3cabe3ff2f3d7}
\begin{DoxyReturn}{Returns}
Cutoff voltage of battery. 
\end{DoxyReturn}

\begin{DoxyCode}
229 \{
230   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
231   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_a367d164b01ccbe49179d7a7bccfb6a94}{m\_cutoffVoltage};
232 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Energy\+Fraction@{Get\+Energy\+Fraction}}
\index{Get\+Energy\+Fraction@{Get\+Energy\+Fraction}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Energy\+Fraction(void)}{GetEnergyFraction(void)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Energy\+Fraction (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_a38e73ce97ec3d6d1c996fe897d121060}{}\label{classns3_1_1RvBatteryModel_a38e73ce97ec3d6d1c996fe897d121060}
\begin{DoxyReturn}{Returns}
Energy fraction.
\end{DoxyReturn}
Implements Get\+Energy\+Fraction. For the RV battery model, energy fraction is equivalent to battery level. 

Implements \hyperlink{classns3_1_1EnergySource_acf39f7e41309ae58baf3f179263425c3}{ns3\+::\+Energy\+Source}.


\begin{DoxyCode}
135 \{
136   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
137   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_af3047a4edc01822b612bb2fb70ee7991}{GetBatteryLevel} ();
138 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Initial\+Energy@{Get\+Initial\+Energy}}
\index{Get\+Initial\+Energy@{Get\+Initial\+Energy}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Initial\+Energy(void) const }{GetInitialEnergy(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Initial\+Energy (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_a758f091570aee1b6618376217f6b3b19}{}\label{classns3_1_1RvBatteryModel_a758f091570aee1b6618376217f6b3b19}
\begin{DoxyReturn}{Returns}
Initial energy stored (theoretical capacity) in the battery, in Joules.
\end{DoxyReturn}
Implements Get\+Initial\+Energy. 

Implements \hyperlink{classns3_1_1EnergySource_ae83935d4347fb88be5d823434a555365}{ns3\+::\+Energy\+Source}.


\begin{DoxyCode}
112 \{
113   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
114   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}{m\_alpha} * \hyperlink{classns3_1_1RvBatteryModel_afacc0bd74d865bdbfc51c515cff7efee}{GetSupplyVoltage} ();
115 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Lifetime@{Get\+Lifetime}}
\index{Get\+Lifetime@{Get\+Lifetime}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Lifetime(void) const }{GetLifetime(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Lifetime (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1RvBatteryModel_a0195713aa6eeb966f3189192b5fbeea1}{}\label{classns3_1_1RvBatteryModel_a0195713aa6eeb966f3189192b5fbeea1}
\begin{DoxyReturn}{Returns}
Lifetime of the battery. 
\end{DoxyReturn}

\begin{DoxyCode}
274 \{
275   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
276   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_aab2f6462269e44fda1b9425a6cb8bdf6}{m\_lifetime};
277 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Num\+Of\+Terms@{Get\+Num\+Of\+Terms}}
\index{Get\+Num\+Of\+Terms@{Get\+Num\+Of\+Terms}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Num\+Of\+Terms(void) const }{GetNumOfTerms(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Num\+Of\+Terms (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1RvBatteryModel_ac019bceefdd171250deedee5b24d90af}{}\label{classns3_1_1RvBatteryModel_ac019bceefdd171250deedee5b24d90af}
\begin{DoxyReturn}{Returns}
The number of terms of the infinite sum for estimating battery level. 
\end{DoxyReturn}

\begin{DoxyCode}
288 \{
289   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
290   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_a57a22ebee1bbbfe679e43e711098a085}{m\_numOfTerms};
291 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 15


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Open\+Circuit\+Voltage@{Get\+Open\+Circuit\+Voltage}}
\index{Get\+Open\+Circuit\+Voltage@{Get\+Open\+Circuit\+Voltage}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Open\+Circuit\+Voltage(void) const }{GetOpenCircuitVoltage(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Open\+Circuit\+Voltage (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1RvBatteryModel_a0040c91bbfaccac6cf549bafc6acfd11}{}\label{classns3_1_1RvBatteryModel_a0040c91bbfaccac6cf549bafc6acfd11}
\begin{DoxyReturn}{Returns}
Open circuit voltage of battery. 
\end{DoxyReturn}

\begin{DoxyCode}
214 \{
215   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
216   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_a0dc610b9862b35f5cd83af39b319e4b7}{m\_openCircuitVoltage};
217 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 16


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Remaining\+Energy@{Get\+Remaining\+Energy}}
\index{Get\+Remaining\+Energy@{Get\+Remaining\+Energy}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Remaining\+Energy(void)}{GetRemainingEnergy(void)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Remaining\+Energy (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_a7ab2862fe0f9006fecefe5ee8a5a1c52}{}\label{classns3_1_1RvBatteryModel_a7ab2862fe0f9006fecefe5ee8a5a1c52}
\begin{DoxyReturn}{Returns}
Remaining energy in energy source, in Joules
\end{DoxyReturn}
Implements Get\+Remaining\+Energy. 

Implements \hyperlink{classns3_1_1EnergySource_a61bab0597d0ea719643a525515a3f5f1}{ns3\+::\+Energy\+Source}.


\begin{DoxyCode}
127 \{
128   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
129   \hyperlink{classns3_1_1RvBatteryModel_ac0885eeb1b510ffe52531e7e68039d3e}{UpdateEnergySource} ();
130   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}{m\_alpha} * \hyperlink{classns3_1_1RvBatteryModel_afacc0bd74d865bdbfc51c515cff7efee}{GetSupplyVoltage} () * \hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel};
131 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Sampling\+Interval@{Get\+Sampling\+Interval}}
\index{Get\+Sampling\+Interval@{Get\+Sampling\+Interval}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Sampling\+Interval(void) const }{GetSamplingInterval(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Sampling\+Interval (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1RvBatteryModel_a9eb804d6f04de072b6f108c4aff55257}{}\label{classns3_1_1RvBatteryModel_a9eb804d6f04de072b6f108c4aff55257}
\begin{DoxyReturn}{Returns}
The interval between each energy update. 
\end{DoxyReturn}

\begin{DoxyCode}
199 \{
200   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
201   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1RvBatteryModel_aab7b0edf6e33a0dc26cc633af6b6ac2e}{m\_samplingInterval};
202 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 18


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Supply\+Voltage@{Get\+Supply\+Voltage}}
\index{Get\+Supply\+Voltage@{Get\+Supply\+Voltage}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Supply\+Voltage(void) const }{GetSupplyVoltage(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Supply\+Voltage (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_afacc0bd74d865bdbfc51c515cff7efee}{}\label{classns3_1_1RvBatteryModel_afacc0bd74d865bdbfc51c515cff7efee}
\begin{DoxyReturn}{Returns}
Supply voltage at the energy source.
\end{DoxyReturn}
Implements Get\+Supply\+Voltage. 

Implements \hyperlink{classns3_1_1EnergySource_a834c547d15a1e5a5295d833c7d542177}{ns3\+::\+Energy\+Source}.


\begin{DoxyCode}
119 \{
120   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
121   \textcolor{comment}{// average of Voc and Vcutoff}
122   \textcolor{keywordflow}{return} (\hyperlink{classns3_1_1RvBatteryModel_a0dc610b9862b35f5cd83af39b319e4b7}{m\_openCircuitVoltage} - \hyperlink{classns3_1_1RvBatteryModel_a367d164b01ccbe49179d7a7bccfb6a94}{m\_cutoffVoltage}) / 2 + 
      \hyperlink{classns3_1_1RvBatteryModel_a367d164b01ccbe49179d7a7bccfb6a94}{m\_cutoffVoltage};
123 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 19


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Rv\+Battery\+Model\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1RvBatteryModel_a427636046ac8a08ffe769cfe27239da2}{}\label{classns3_1_1RvBatteryModel_a427636046ac8a08ffe769cfe27239da2}

\begin{DoxyCode}
37 \{
38   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::RvBatteryModel"})
39     .SetParent<\hyperlink{classns3_1_1EnergySource_a820794a417c3d2f7909f987ba6064cde}{EnergySource}> ()
40     .SetGroupName (\textcolor{stringliteral}{"Energy"})
41     .AddConstructor<\hyperlink{classns3_1_1RvBatteryModel_ae88b599d504056559bf2de38391a17da}{RvBatteryModel}> ()
42     .AddAttribute (\textcolor{stringliteral}{"RvBatteryModelPeriodicEnergyUpdateInterval"},
43                    \textcolor{stringliteral}{"RV battery model sampling interval."},
44                    TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0)),
45                    MakeTimeAccessor (&\hyperlink{classns3_1_1RvBatteryModel_a45087cd749937bacfcf3ba43b5ddb538}{RvBatteryModel::SetSamplingInterval}
      ,
46                                      &\hyperlink{classns3_1_1RvBatteryModel_a9eb804d6f04de072b6f108c4aff55257}{RvBatteryModel::GetSamplingInterval}
      ),
47                    \hyperlink{group__time_ga7032965bd4afa578691d88c09e4481c1}{MakeTimeChecker} ())
48     .AddAttribute (\textcolor{stringliteral}{"RvBatteryModelLowBatteryThreshold"},
49                    \textcolor{stringliteral}{"Low battery threshold."},
50                    DoubleValue (0.10), \textcolor{comment}{// as a fraction of the initial energy}
51                    MakeDoubleAccessor (&\hyperlink{classns3_1_1RvBatteryModel_a01e8c3b6a4ff1b066d2fe0271c216007}{RvBatteryModel::m\_lowBatteryTh}),
52                    MakeDoubleChecker<double> ())
53     .AddAttribute (\textcolor{stringliteral}{"RvBatteryModelOpenCircuitVoltage"},
54                    \textcolor{stringliteral}{"RV battery model open circuit voltage."},
55                    DoubleValue (4.1),
56                    MakeDoubleAccessor (&\hyperlink{classns3_1_1RvBatteryModel_ab086a0fa60589b1232125e9fd183c1b9}{RvBatteryModel::SetOpenCircuitVoltage}
      ,
57                                        &\hyperlink{classns3_1_1RvBatteryModel_a0040c91bbfaccac6cf549bafc6acfd11}{RvBatteryModel::GetOpenCircuitVoltage}
      ),
58                    MakeDoubleChecker<double> ())
59     .AddAttribute (\textcolor{stringliteral}{"RvBatteryModelCutoffVoltage"},
60                    \textcolor{stringliteral}{"RV battery model cutoff voltage."},
61                    DoubleValue (3.0),
62                    MakeDoubleAccessor (&\hyperlink{classns3_1_1RvBatteryModel_a70d08fb3ddebd46b0ce0daae98af79e6}{RvBatteryModel::SetCutoffVoltage},
63                                        &\hyperlink{classns3_1_1RvBatteryModel_a2c6e69ca6fc5f9f12cc3cabe3ff2f3d7}{RvBatteryModel::GetCutoffVoltage}),
64                    MakeDoubleChecker<double> ())
65     .AddAttribute (\textcolor{stringliteral}{"RvBatteryModelAlphaValue"},
66                    \textcolor{stringliteral}{"RV battery model alpha value."},
67                    DoubleValue (35220.0),
68                    MakeDoubleAccessor (&\hyperlink{classns3_1_1RvBatteryModel_ab7ed42697329357ed95a18cf2ec0d5d9}{RvBatteryModel::SetAlpha},
69                                        &\hyperlink{classns3_1_1RvBatteryModel_a91cdabc79e3f2a6facfe95202fa77e34}{RvBatteryModel::GetAlpha}),
70                    MakeDoubleChecker<double> ())
71     .AddAttribute (\textcolor{stringliteral}{"RvBatteryModelBetaValue"},
72                    \textcolor{stringliteral}{"RV battery model beta value."},
73                    DoubleValue (0.637),
74                    MakeDoubleAccessor (&\hyperlink{classns3_1_1RvBatteryModel_a82f89a01a1f487d3a71e9e21e5322286}{RvBatteryModel::SetBeta},
75                                        &\hyperlink{classns3_1_1RvBatteryModel_ad787cf29a82eea91384fe43146f64d28}{RvBatteryModel::GetBeta}),
76                    MakeDoubleChecker<double> ())
77     .AddAttribute (\textcolor{stringliteral}{"RvBatteryModelNumOfTerms"},
78                    \textcolor{stringliteral}{"The number of terms of the infinite sum for estimating battery level."},
79                    IntegerValue (10),   \textcolor{comment}{// value used in paper}
80                    MakeIntegerAccessor (&\hyperlink{classns3_1_1RvBatteryModel_a23db3b707a4885248157b96db2ad600d}{RvBatteryModel::SetNumOfTerms},
81                                         &\hyperlink{classns3_1_1RvBatteryModel_ac019bceefdd171250deedee5b24d90af}{RvBatteryModel::GetNumOfTerms}),
82                    MakeIntegerChecker<int> ())
83     .AddTraceSource (\textcolor{stringliteral}{"RvBatteryModelBatteryLevel"},
84                      \textcolor{stringliteral}{"RV battery model battery level."},
85                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{RvBatteryModel::m\_batteryLevel}),
86                      \textcolor{stringliteral}{"ns3::TracedValueCallback::Double"})
87     .AddTraceSource (\textcolor{stringliteral}{"RvBatteryModelBatteryLifetime"},
88                      \textcolor{stringliteral}{"RV battery model battery lifetime."},
89                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1RvBatteryModel_aab2f6462269e44fda1b9425a6cb8bdf6}{RvBatteryModel::m\_lifetime}),
90                      \textcolor{stringliteral}{"ns3::Time::TracedValueCallback"})
91   ;
92   \textcolor{keywordflow}{return} tid;
93 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Handle\+Energy\+Drained\+Event@{Handle\+Energy\+Drained\+Event}}
\index{Handle\+Energy\+Drained\+Event@{Handle\+Energy\+Drained\+Event}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Handle\+Energy\+Drained\+Event(void)}{HandleEnergyDrainedEvent(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Handle\+Energy\+Drained\+Event (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_ac381990282a8d4a984e5b4322c79f89a}{}\label{classns3_1_1RvBatteryModel_ac381990282a8d4a984e5b4322c79f89a}
Handles the remaining energy going to zero event. This function notifies all the energy models aggregated to the node about the energy being depleted. Each energy model is then responsible for its own handler. 
\begin{DoxyCode}
314 \{
315   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
316   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RvBatteryModel:Energy depleted!"});
317   \hyperlink{classns3_1_1EnergySource_af93e047506b5bed57c14f10e28725e9f}{NotifyEnergyDrained} (); \textcolor{comment}{// notify DeviceEnergyModel objects}
318 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21




Here is the caller graph for this function\+:
% FIG 22


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Rv\+Model\+A\+Function@{Rv\+Model\+A\+Function}}
\index{Rv\+Model\+A\+Function@{Rv\+Model\+A\+Function}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Rv\+Model\+A\+Function(\+Time t, Time sk, Time sk\+\_\+1, double beta)}{RvModelAFunction(Time t, Time sk, Time sk_1, double beta)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::\+Rv\+Model\+A\+Function (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{t, }
\item[{{\bf Time}}]{sk, }
\item[{{\bf Time}}]{sk\+\_\+1, }
\item[{double}]{beta}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_ab3bf9607642772fb56445a23e654626b}{}\label{classns3_1_1RvBatteryModel_ab3bf9607642772fb56445a23e654626b}


RV model A function. 


\begin{DoxyParams}{Parameters}
{\em t} & Current time. \\
\hline
{\em sk} & \hyperlink{classns3_1_1Time}{Time} stamp in array position k \\
\hline
{\em sk\+\_\+1} & \hyperlink{classns3_1_1Time}{Time} stamp in array position k-\/1 \\
\hline
{\em beta} & Beta value used by the battery model. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result of A function.
\end{DoxyReturn}
This function computes alpha value using the recorded load profile. 
\begin{DoxyCode}
368 \{
369   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << t << sk << sk\_1 << beta);
370 
371   \textcolor{comment}{// everything is in minutes}
372   \textcolor{keywordtype}{double} firstDelta = (t.GetSeconds () - sk.GetSeconds ()) / 60;
373   \textcolor{keywordtype}{double} secondDelta = (t.GetSeconds () - sk\_1.GetSeconds ()) / 60;
374   \textcolor{keywordtype}{double} delta = (sk.GetSeconds () - sk\_1.GetSeconds ()) / 60;
375 
376   \textcolor{keywordtype}{double} sum = 0.0;
377   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} m = 1; m <= \hyperlink{classns3_1_1RvBatteryModel_a57a22ebee1bbbfe679e43e711098a085}{m\_numOfTerms}; m++)
378     \{
379       \textcolor{keywordtype}{double} square = beta * beta * m * m;
380       sum += (std::exp (-square * (firstDelta)) - std::exp (-square * (secondDelta))) / square;
381     \}
382   \textcolor{keywordflow}{return} delta + 2 * sum;
383 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23




Here is the caller graph for this function\+:
% FIG 24


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Set\+Alpha@{Set\+Alpha}}
\index{Set\+Alpha@{Set\+Alpha}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Set\+Alpha(double alpha)}{SetAlpha(double alpha)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Set\+Alpha (
\begin{DoxyParamCaption}
\item[{double}]{alpha}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_ab7ed42697329357ed95a18cf2ec0d5d9}{}\label{classns3_1_1RvBatteryModel_ab7ed42697329357ed95a18cf2ec0d5d9}


Sets the alpha value for the battery model. 


\begin{DoxyParams}{Parameters}
{\em alpha} & Alpha. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
236 \{
237   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{lte__uplink__power__control_8m_a62197192f0fbf4e0675eb37be1c4c175}{alpha});
238   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{lte__uplink__power__control_8m_a62197192f0fbf4e0675eb37be1c4c175}{alpha} >= 0);
239   \hyperlink{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}{m\_alpha} = \hyperlink{lte__uplink__power__control_8m_a62197192f0fbf4e0675eb37be1c4c175}{alpha};
240 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 25


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Set\+Beta@{Set\+Beta}}
\index{Set\+Beta@{Set\+Beta}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Set\+Beta(double beta)}{SetBeta(double beta)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Set\+Beta (
\begin{DoxyParamCaption}
\item[{double}]{beta}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_a82f89a01a1f487d3a71e9e21e5322286}{}\label{classns3_1_1RvBatteryModel_a82f89a01a1f487d3a71e9e21e5322286}


Sets the beta value for the battery model. 


\begin{DoxyParams}{Parameters}
{\em beta} & Beta. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
251 \{
252   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << beta);
253   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (beta >= 0);
254   \hyperlink{classns3_1_1RvBatteryModel_afd9fb778ecbaf556b125e4a557baba86}{m\_beta} = beta;
255 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 26


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Set\+Cutoff\+Voltage@{Set\+Cutoff\+Voltage}}
\index{Set\+Cutoff\+Voltage@{Set\+Cutoff\+Voltage}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Set\+Cutoff\+Voltage(double voltage)}{SetCutoffVoltage(double voltage)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Set\+Cutoff\+Voltage (
\begin{DoxyParamCaption}
\item[{double}]{voltage}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_a70d08fb3ddebd46b0ce0daae98af79e6}{}\label{classns3_1_1RvBatteryModel_a70d08fb3ddebd46b0ce0daae98af79e6}


Sets cutoff voltage of battery. 


\begin{DoxyParams}{Parameters}
{\em voltage} & Cutoff voltage. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
221 \{
222   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << voltage);
223   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (voltage <= \hyperlink{classns3_1_1RvBatteryModel_a0dc610b9862b35f5cd83af39b319e4b7}{m\_openCircuitVoltage});
224   \hyperlink{classns3_1_1RvBatteryModel_a367d164b01ccbe49179d7a7bccfb6a94}{m\_cutoffVoltage} = voltage;
225 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 27


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Set\+Num\+Of\+Terms@{Set\+Num\+Of\+Terms}}
\index{Set\+Num\+Of\+Terms@{Set\+Num\+Of\+Terms}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Set\+Num\+Of\+Terms(int num)}{SetNumOfTerms(int num)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Set\+Num\+Of\+Terms (
\begin{DoxyParamCaption}
\item[{int}]{num}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_a23db3b707a4885248157b96db2ad600d}{}\label{classns3_1_1RvBatteryModel_a23db3b707a4885248157b96db2ad600d}


Sets the number of terms of the infinite sum for estimating battery level. 


\begin{DoxyParams}{Parameters}
{\em num} & Number of terms. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
281 \{
282   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << num);
283   \hyperlink{classns3_1_1RvBatteryModel_a57a22ebee1bbbfe679e43e711098a085}{m\_numOfTerms} = num;
284 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 28


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Set\+Open\+Circuit\+Voltage@{Set\+Open\+Circuit\+Voltage}}
\index{Set\+Open\+Circuit\+Voltage@{Set\+Open\+Circuit\+Voltage}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Set\+Open\+Circuit\+Voltage(double voltage)}{SetOpenCircuitVoltage(double voltage)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Set\+Open\+Circuit\+Voltage (
\begin{DoxyParamCaption}
\item[{double}]{voltage}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_ab086a0fa60589b1232125e9fd183c1b9}{}\label{classns3_1_1RvBatteryModel_ab086a0fa60589b1232125e9fd183c1b9}


Sets open circuit voltage of battery. 


\begin{DoxyParams}{Parameters}
{\em voltage} & Open circuit voltage. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
206 \{
207   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << voltage);
208   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (voltage >= 0);
209   \hyperlink{classns3_1_1RvBatteryModel_a0dc610b9862b35f5cd83af39b319e4b7}{m\_openCircuitVoltage} = voltage;
210 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 29


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Set\+Sampling\+Interval@{Set\+Sampling\+Interval}}
\index{Set\+Sampling\+Interval@{Set\+Sampling\+Interval}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Set\+Sampling\+Interval(\+Time interval)}{SetSamplingInterval(Time interval)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Set\+Sampling\+Interval (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{interval}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RvBatteryModel_a45087cd749937bacfcf3ba43b5ddb538}{}\label{classns3_1_1RvBatteryModel_a45087cd749937bacfcf3ba43b5ddb538}

\begin{DoxyParams}{Parameters}
{\em interval} & Energy update interval.\\
\hline
\end{DoxyParams}
This function sets the interval between each energy update. 
\begin{DoxyCode}
192 \{
193   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << interval);
194   \hyperlink{classns3_1_1RvBatteryModel_aab7b0edf6e33a0dc26cc633af6b6ac2e}{m\_samplingInterval} = interval;
195 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 30


\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!Update\+Energy\+Source@{Update\+Energy\+Source}}
\index{Update\+Energy\+Source@{Update\+Energy\+Source}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{Update\+Energy\+Source(void)}{UpdateEnergySource(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Rv\+Battery\+Model\+::\+Update\+Energy\+Source (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RvBatteryModel_ac0885eeb1b510ffe52531e7e68039d3e}{}\label{classns3_1_1RvBatteryModel_ac0885eeb1b510ffe52531e7e68039d3e}
Implements Update\+Energy\+Source. This function samples the total load (total current) from all devices to discharge the battery. 

Implements \hyperlink{classns3_1_1EnergySource_a528aca240cc8d85076982c5042a85e66}{ns3\+::\+Energy\+Source}.


\begin{DoxyCode}
142 \{
143   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
144 
145   \textcolor{comment}{// do not update if battery is already dead}
146   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel} <= 0)
147     \{
148       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RvBatteryModel:Battery is dead!"});
149       \textcolor{keywordflow}{return};
150     \}
151 
152   \textcolor{comment}{// do not update if simulation has finished}
153   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Simulator_aa8c662d04480705d09b3d65b4dea9d2f}{Simulator::IsFinished} ())
154     \{
155       \textcolor{keywordflow}{return};
156     \}
157 
158   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RvBatteryModel:Updating remaining energy!"});
159 
160   \hyperlink{classns3_1_1RvBatteryModel_a3eb7ced1023c82a8a4714d46e8a97342}{m\_currentSampleEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
161 
162   \textcolor{keywordtype}{double} currentLoad = \hyperlink{classns3_1_1EnergySource_ac8b121ba1389d5545705e52d1a6fd602}{CalculateTotalCurrent} () * 1000; \textcolor{comment}{// must be in mA}
163   \textcolor{keywordtype}{double} calculatedAlpha = \hyperlink{classns3_1_1RvBatteryModel_a5e485e8966bad557ccb11f6a459e2a8d}{Discharge} (currentLoad, \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ());
164 
165   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RvBatteryModel:Calculated alpha = "} << calculatedAlpha <<
166                 \textcolor{stringliteral}{" time = "} << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds ());
167 
168   \textcolor{comment}{// calculate battery level}
169   \hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel} = 1 - (calculatedAlpha / \hyperlink{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}{m\_alpha});
170   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel} < 0)
171     \{
172       \hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel} = 0;
173     \}
174 
175   \textcolor{comment}{// check if battery level is below the low battery threshold.}
176   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{m\_batteryLevel} <= \hyperlink{classns3_1_1RvBatteryModel_a01e8c3b6a4ff1b066d2fe0271c216007}{m\_lowBatteryTh})
177     \{
178       \hyperlink{classns3_1_1RvBatteryModel_aab2f6462269e44fda1b9425a6cb8bdf6}{m\_lifetime} = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () - \hyperlink{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{m\_timeStamps}[0];
179       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RvBatteryModel:Battery level below threshold!"});
180       \hyperlink{classns3_1_1RvBatteryModel_ac381990282a8d4a984e5b4322c79f89a}{HandleEnergyDrainedEvent} ();
181     \}
182 
183   \hyperlink{classns3_1_1RvBatteryModel_a53cbe01e0b8ea5e51f4b248bba16170d}{m\_previousLoad} = currentLoad;
184   \hyperlink{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}{m\_lastSampleTime} = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
185   \hyperlink{classns3_1_1RvBatteryModel_a3eb7ced1023c82a8a4714d46e8a97342}{m\_currentSampleEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (
      \hyperlink{classns3_1_1RvBatteryModel_aab7b0edf6e33a0dc26cc633af6b6ac2e}{m\_samplingInterval},
186                                               &
      \hyperlink{classns3_1_1RvBatteryModel_ac0885eeb1b510ffe52531e7e68039d3e}{RvBatteryModel::UpdateEnergySource},
187                                               \textcolor{keyword}{this});
188 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 31




Here is the caller graph for this function\+:
% FIG 32




\subsection{Member Data Documentation}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+alpha@{m\+\_\+alpha}}
\index{m\+\_\+alpha@{m\+\_\+alpha}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+alpha}{m_alpha}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+alpha\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}{}\label{classns3_1_1RvBatteryModel_af1cad7267993108628a0a9d8ad622212}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+battery\+Level@{m\+\_\+battery\+Level}}
\index{m\+\_\+battery\+Level@{m\+\_\+battery\+Level}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+battery\+Level}{m_batteryLevel}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<$double$>$ ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+battery\+Level\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}{}\label{classns3_1_1RvBatteryModel_af8c48353c513a2279115e52927b479a0}
Battery level is defined as\+: output of Discharge function / alpha value

The output of Discharge function is an estimated charge consumption of the battery.

The alpha value is the amount of charges stored in the battery, or battery capacity (in Coulomb).

When the battery is fully charged (no charge is consumed from the battery) the battery level is 1. When the battery is fully discharged, the battery level is 0.

N\+O\+TE Note that the definition in Timmermann\textquotesingle{}s paper is the inverse of this definition. In the paper, battery level = 1 when the battery is drained. \index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+beta@{m\+\_\+beta}}
\index{m\+\_\+beta@{m\+\_\+beta}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+beta}{m_beta}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+beta\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_afd9fb778ecbaf556b125e4a557baba86}{}\label{classns3_1_1RvBatteryModel_afd9fb778ecbaf556b125e4a557baba86}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+current\+Sample\+Event@{m\+\_\+current\+Sample\+Event}}
\index{m\+\_\+current\+Sample\+Event@{m\+\_\+current\+Sample\+Event}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Sample\+Event}{m_currentSampleEvent}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+current\+Sample\+Event\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a3eb7ced1023c82a8a4714d46e8a97342}{}\label{classns3_1_1RvBatteryModel_a3eb7ced1023c82a8a4714d46e8a97342}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+cutoff\+Voltage@{m\+\_\+cutoff\+Voltage}}
\index{m\+\_\+cutoff\+Voltage@{m\+\_\+cutoff\+Voltage}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+cutoff\+Voltage}{m_cutoffVoltage}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+cutoff\+Voltage\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a367d164b01ccbe49179d7a7bccfb6a94}{}\label{classns3_1_1RvBatteryModel_a367d164b01ccbe49179d7a7bccfb6a94}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+last\+Sample\+Time@{m\+\_\+last\+Sample\+Time}}
\index{m\+\_\+last\+Sample\+Time@{m\+\_\+last\+Sample\+Time}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+last\+Sample\+Time}{m_lastSampleTime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+last\+Sample\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}{}\label{classns3_1_1RvBatteryModel_a4b917fecc461f1b2446e307fed5a374f}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+lifetime@{m\+\_\+lifetime}}
\index{m\+\_\+lifetime@{m\+\_\+lifetime}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+lifetime}{m_lifetime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<${\bf Time}$>$ ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+lifetime\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_aab2f6462269e44fda1b9425a6cb8bdf6}{}\label{classns3_1_1RvBatteryModel_aab2f6462269e44fda1b9425a6cb8bdf6}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+load@{m\+\_\+load}}
\index{m\+\_\+load@{m\+\_\+load}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+load}{m_load}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+load\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_aa09c5b1b5789a09ef0c34a583f20ac86}{}\label{classns3_1_1RvBatteryModel_aa09c5b1b5789a09ef0c34a583f20ac86}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+low\+Battery\+Th@{m\+\_\+low\+Battery\+Th}}
\index{m\+\_\+low\+Battery\+Th@{m\+\_\+low\+Battery\+Th}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+low\+Battery\+Th}{m_lowBatteryTh}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+low\+Battery\+Th\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a01e8c3b6a4ff1b066d2fe0271c216007}{}\label{classns3_1_1RvBatteryModel_a01e8c3b6a4ff1b066d2fe0271c216007}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+num\+Of\+Terms@{m\+\_\+num\+Of\+Terms}}
\index{m\+\_\+num\+Of\+Terms@{m\+\_\+num\+Of\+Terms}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+num\+Of\+Terms}{m_numOfTerms}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+num\+Of\+Terms\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a57a22ebee1bbbfe679e43e711098a085}{}\label{classns3_1_1RvBatteryModel_a57a22ebee1bbbfe679e43e711098a085}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+open\+Circuit\+Voltage@{m\+\_\+open\+Circuit\+Voltage}}
\index{m\+\_\+open\+Circuit\+Voltage@{m\+\_\+open\+Circuit\+Voltage}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+open\+Circuit\+Voltage}{m_openCircuitVoltage}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+open\+Circuit\+Voltage\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a0dc610b9862b35f5cd83af39b319e4b7}{}\label{classns3_1_1RvBatteryModel_a0dc610b9862b35f5cd83af39b319e4b7}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+previous\+Load@{m\+\_\+previous\+Load}}
\index{m\+\_\+previous\+Load@{m\+\_\+previous\+Load}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+previous\+Load}{m_previousLoad}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+previous\+Load\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a53cbe01e0b8ea5e51f4b248bba16170d}{}\label{classns3_1_1RvBatteryModel_a53cbe01e0b8ea5e51f4b248bba16170d}
\index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+sampling\+Interval@{m\+\_\+sampling\+Interval}}
\index{m\+\_\+sampling\+Interval@{m\+\_\+sampling\+Interval}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+sampling\+Interval}{m_samplingInterval}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+sampling\+Interval\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_aab7b0edf6e33a0dc26cc633af6b6ac2e}{}\label{classns3_1_1RvBatteryModel_aab7b0edf6e33a0dc26cc633af6b6ac2e}
(1 / sampling interval) = sampling frequency \index{ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}!m\+\_\+time\+Stamps@{m\+\_\+time\+Stamps}}
\index{m\+\_\+time\+Stamps@{m\+\_\+time\+Stamps}!ns3\+::\+Rv\+Battery\+Model@{ns3\+::\+Rv\+Battery\+Model}}
\subsubsection[{\texorpdfstring{m\+\_\+time\+Stamps}{m_timeStamps}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Time}$>$ ns3\+::\+Rv\+Battery\+Model\+::m\+\_\+time\+Stamps\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}{}\label{classns3_1_1RvBatteryModel_a5748296171832703aa812b6e7389e7da}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
energy/model/\hyperlink{rv-battery-model_8h}{rv-\/battery-\/model.\+h}\item 
energy/model/\hyperlink{rv-battery-model_8cc}{rv-\/battery-\/model.\+cc}\end{DoxyCompactItemize}
