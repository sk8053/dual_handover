\hypertarget{classTcpVenoTest}{}\section{Tcp\+Veno\+Test Class Reference}
\label{classTcpVenoTest}\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}


Testing the additive increase and multiplicative decrease of Tcp\+Veno.  




Inheritance diagram for Tcp\+Veno\+Test\+:
% FIG 0


Collaboration diagram for Tcp\+Veno\+Test\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTcpVenoTest_ab652bb28734808382f1d0e26e5aec819}{Tcp\+Veno\+Test} (uint32\+\_\+t c\+Wnd, uint32\+\_\+t segment\+Size, uint32\+\_\+t ss\+Thresh, \hyperlink{classns3_1_1Time}{Time} rtt, uint32\+\_\+t segments\+Acked, uint32\+\_\+t num\+Rtt, const std\+::string \&\hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name})
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classTcpVenoTest_ac9a8c938515295419b597b999c724100}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classTcpVenoTest_afbbb437669e6d13a95e0de8c0e8a79b0}{Additive\+Increase} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} $>$ state, uint32\+\_\+t diff, Uinteger\+Value beta)
\begin{DoxyCompactList}\small\item\em T\+CP Veno additive increase formula. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpVenoTest_a6c6251834e1354841c6e68dd82bbdc8c}{Multiplicative\+Decrease} (uint32\+\_\+t diff, const Uinteger\+Value \&beta, uint32\+\_\+t bytes\+In\+Flight)
\begin{DoxyCompactList}\small\item\em T\+CP Veno multiplicative decrease formula. \end{DoxyCompactList}\item 
void \hyperlink{classTcpVenoTest_adb94384b4e1993d45709c93642819be4}{New\+Reno\+\_\+\+Increase\+Window} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} $>$ state, uint32\+\_\+t segments\+Acked)
\begin{DoxyCompactList}\small\item\em Mimics the New\+Reno Increase\+Window algorithm. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpVenoTest_aa3390435b7a8316dff0e8f67f65237e6}{New\+Reno\+\_\+\+Slow\+Start} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} $>$ state, uint32\+\_\+t segments\+Acked)
\begin{DoxyCompactList}\small\item\em Mimics the New\+Reno Slow\+Start algorithm. \end{DoxyCompactList}\item 
void \hyperlink{classTcpVenoTest_a0b135bede498ad6b25f015f59c4d48ab}{New\+Reno\+\_\+\+Congestion\+Avoidance} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} $>$ state, uint32\+\_\+t segments\+Acked)
\begin{DoxyCompactList}\small\item\em Mimics the New\+Reno Congestion Avoidance algorithm. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \hyperlink{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}{m\+\_\+c\+Wnd}
\begin{DoxyCompactList}\small\item\em Congestion window. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{m\+\_\+segment\+Size}
\begin{DoxyCompactList}\small\item\em Segment size. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpVenoTest_ab687dc972314acea4861c499a99ed5f1}{m\+\_\+ss\+Thresh}
\begin{DoxyCompactList}\small\item\em Slow Start Threshold. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classTcpVenoTest_a0e786084324c078f6a58b8fdf0d61b60}{m\+\_\+rtt}
\begin{DoxyCompactList}\small\item\em R\+TT. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpVenoTest_a7614249ca9888a1a8361554990318a2b}{m\+\_\+segments\+Acked}
\begin{DoxyCompactList}\small\item\em Number of segments A\+C\+Ked. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpVenoTest_a38d25d99a350ac0802bdb80052b4cfd9}{m\+\_\+num\+Rtt}
\begin{DoxyCompactList}\small\item\em Number of R\+TT (i.\+e., rounds) of the test. \end{DoxyCompactList}\item 
bool \hyperlink{classTcpVenoTest_a447f72854c411771e834e6084fe9b0c4}{m\+\_\+inc}
\begin{DoxyCompactList}\small\item\em Internal flag to increase every other round. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} $>$ \hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\+\_\+state}
\begin{DoxyCompactList}\small\item\em T\+CP socket state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Testing the additive increase and multiplicative decrease of Tcp\+Veno. 

\subsection{Constructor \& Destructor Documentation}
\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{Tcp\+Veno\+Test(uint32\+\_\+t c\+Wnd, uint32\+\_\+t segment\+Size, uint32\+\_\+t ss\+Thresh, Time rtt, uint32\+\_\+t segments\+Acked, uint32\+\_\+t num\+Rtt, const std\+::string \&name)}{TcpVenoTest(uint32_t cWnd, uint32_t segmentSize, uint32_t ssThresh, Time rtt, uint32_t segmentsAcked, uint32_t numRtt, const std::string &name)}}]{\setlength{\rightskip}{0pt plus 5cm}Tcp\+Veno\+Test\+::\+Tcp\+Veno\+Test (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{c\+Wnd, }
\item[{uint32\+\_\+t}]{segment\+Size, }
\item[{uint32\+\_\+t}]{ss\+Thresh, }
\item[{{\bf Time}}]{rtt, }
\item[{uint32\+\_\+t}]{segments\+Acked, }
\item[{uint32\+\_\+t}]{num\+Rtt, }
\item[{const std\+::string \&}]{name}
\end{DoxyParamCaption}
)}\hypertarget{classTcpVenoTest_ab652bb28734808382f1d0e26e5aec819}{}\label{classTcpVenoTest_ab652bb28734808382f1d0e26e5aec819}


Constructor. 


\begin{DoxyParams}{Parameters}
{\em c\+Wnd} & Congestion window. \\
\hline
{\em segment\+Size} & Segment size. \\
\hline
{\em ss\+Thresh} & Slow Start Threshold. \\
\hline
{\em rtt} & The R\+TT. \\
\hline
{\em segments\+Acked} & Number of segments acked. \\
\hline
{\em num\+Rtt} & Number of R\+T\+Ts (i.\+e., rounds) in the test. \\
\hline
{\em name} & Test description. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
124   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name}),
125     \hyperlink{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}{m\_cWnd} (cWnd),
126     \hyperlink{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{m\_segmentSize} (segmentSize),
127     \hyperlink{classTcpVenoTest_ab687dc972314acea4861c499a99ed5f1}{m\_ssThresh} (ssThresh),
128     \hyperlink{classTcpVenoTest_a0e786084324c078f6a58b8fdf0d61b60}{m\_rtt} (rtt),
129     \hyperlink{classTcpVenoTest_a7614249ca9888a1a8361554990318a2b}{m\_segmentsAcked} (segmentsAcked),
130     \hyperlink{classTcpVenoTest_a38d25d99a350ac0802bdb80052b4cfd9}{m\_numRtt} (numRtt),
131     \hyperlink{classTcpVenoTest_a447f72854c411771e834e6084fe9b0c4}{m\_inc} (\textcolor{keyword}{true})
132 \{
133 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!Additive\+Increase@{Additive\+Increase}}
\index{Additive\+Increase@{Additive\+Increase}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{Additive\+Increase(\+Ptr$<$ Tcp\+Socket\+State $>$ state, uint32\+\_\+t diff, Uinteger\+Value beta)}{AdditiveIncrease(Ptr< TcpSocketState > state, uint32_t diff, UintegerValue beta)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Veno\+Test\+::\+Additive\+Increase (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Tcp\+Socket\+State} $>$}]{state, }
\item[{uint32\+\_\+t}]{diff, }
\item[{Uinteger\+Value}]{beta}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_afbbb437669e6d13a95e0de8c0e8a79b0}{}\label{classTcpVenoTest_afbbb437669e6d13a95e0de8c0e8a79b0}


T\+CP Veno additive increase formula. 


\begin{DoxyParams}{Parameters}
{\em state} & The congestion control state. \\
\hline
{\em diff} & The difference between actual and expected throughput. \\
\hline
{\em beta} & T\+CP Veno beta param. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
214 \{
215   \textcolor{keywordflow}{if} (\hyperlink{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}{m\_cWnd} < \hyperlink{classTcpVenoTest_ab687dc972314acea4861c499a99ed5f1}{m\_ssThresh})
216     \{ \textcolor{comment}{// Slow start}
217       \hyperlink{classTcpVenoTest_aa3390435b7a8316dff0e8f67f65237e6}{NewReno\_SlowStart} (state, 1);
218     \}
219   \textcolor{keywordflow}{else}
220     \{ \textcolor{comment}{// Congestion avoidance}
221       \textcolor{keywordflow}{if} (diff < beta.Get ())
222         \{ \textcolor{comment}{// Increase cwnd by 1 every RTT when bandwidth is not fully utilized}
223           \hyperlink{classTcpVenoTest_a0b135bede498ad6b25f015f59c4d48ab}{NewReno\_CongestionAvoidance} (state, 1);
224         \}
225       \textcolor{keywordflow}{else}
226         \{ \textcolor{comment}{// Increase cwnd by 1 every other RTT when bandwidth is fully utilized}
227           \textcolor{keywordflow}{if} (\hyperlink{classTcpVenoTest_a447f72854c411771e834e6084fe9b0c4}{m\_inc})
228             \{
229               \hyperlink{classTcpVenoTest_a0b135bede498ad6b25f015f59c4d48ab}{NewReno\_CongestionAvoidance} (state, 1);
230               \hyperlink{classTcpVenoTest_a447f72854c411771e834e6084fe9b0c4}{m\_inc} = \textcolor{keyword}{false};
231             \}
232           \textcolor{keywordflow}{else}
233             \{
234               \hyperlink{classTcpVenoTest_a447f72854c411771e834e6084fe9b0c4}{m\_inc} = \textcolor{keyword}{true};
235             \}
236         \}
237     \}
238 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Veno\+Test\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classTcpVenoTest_ac9a8c938515295419b597b999c724100}{}\label{classTcpVenoTest_ac9a8c938515295419b597b999c724100}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
137 \{
138   \hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state} = CreateObject<TcpSocketState> ();
139 
140   \hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} = \hyperlink{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}{m\_cWnd};
141   \hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize} = \hyperlink{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{m\_segmentSize};
142   \hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh} = \hyperlink{classTcpVenoTest_ab687dc972314acea4861c499a99ed5f1}{m\_ssThresh};
143 
144   \hyperlink{classns3_1_1Ptr}{Ptr<TcpVeno>} cong = CreateObject <TcpVeno> ();
145 
146   \textcolor{comment}{// Set baseRtt to 100 ms}
147   \hyperlink{classns3_1_1Time}{Time} baseRtt = \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (100);
148   cong->\hyperlink{classns3_1_1TcpVeno_a8270456c1a00231bd8c2282da8b99561}{PktsAcked} (\hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}, \hyperlink{classTcpVenoTest_a7614249ca9888a1a8361554990318a2b}{m\_segmentsAcked}, baseRtt);
149 
150   \textcolor{comment}{// Re-set Veno to assign a new value of minRtt}
151   cong->\hyperlink{classns3_1_1TcpVeno_a39f34ca48e88063934c9c4f893d9c1dc}{CongestionStateSet} (\hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}, TcpSocketState::CA\_OPEN);
152 
153   uint32\_t segCwnd = \hyperlink{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}{m\_cWnd} / \hyperlink{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{m\_segmentSize};
154 
155   \textcolor{comment}{// Calculate expected throughput}
156   uint32\_t expectedCwnd;
157   \textcolor{keywordtype}{double} tmp = baseRtt.GetSeconds () / \hyperlink{classTcpVenoTest_a0e786084324c078f6a58b8fdf0d61b60}{m\_rtt}.\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} ();
158   expectedCwnd = segCwnd * tmp;
159 
160   \textcolor{comment}{// Calculate the difference between actual and expected throughput}
161   uint32\_t diff;
162   diff = segCwnd - expectedCwnd;
163 
164   \textcolor{comment}{// Get the beta attribute}
165   UintegerValue beta;
166   cong->\hyperlink{classns3_1_1ObjectBase_a895d1de2f96063d0e0fd78463e7a7e30}{GetAttribute} (\textcolor{stringliteral}{"Beta"}, beta);
167 
168   uint32\_t cntRtt = 0;
169 
170   \hyperlink{classns3_1_1TcpSocketState}{TcpSocketState} state;
171   state.\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} = \hyperlink{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}{m\_cWnd};
172   state.\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh} = \hyperlink{classTcpVenoTest_ab687dc972314acea4861c499a99ed5f1}{m\_ssThresh};
173   state.\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize} = \hyperlink{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{m\_segmentSize};
174 
175   \textcolor{keywordflow}{while} (\hyperlink{classTcpVenoTest_a38d25d99a350ac0802bdb80052b4cfd9}{m\_numRtt} != 0)
176     \{
177       \textcolor{comment}{// Update cwnd using Veno's additive increase algorithm}
178       cong->\hyperlink{classns3_1_1TcpVeno_a8270456c1a00231bd8c2282da8b99561}{PktsAcked} (\hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}, \hyperlink{classTcpVenoTest_a7614249ca9888a1a8361554990318a2b}{m\_segmentsAcked}, 
      \hyperlink{classTcpVenoTest_a0e786084324c078f6a58b8fdf0d61b60}{m\_rtt});
179       cong->\hyperlink{classns3_1_1TcpVeno_a5865787a20ea7c2c8beee2df5cefcdaa}{IncreaseWindow} (\hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}, \hyperlink{classTcpVenoTest_a7614249ca9888a1a8361554990318a2b}{m\_segmentsAcked});
180 
181       \textcolor{comment}{// The first round the internal m\_diff of cong will be 4, just like us}
182       \textcolor{keywordflow}{if} (cntRtt == 0)
183         \{
184           \textcolor{comment}{// Update ssthresh using Veno's multiplicative decrease algorithm}
185           uint32\_t ssThresh = cong->\hyperlink{classns3_1_1TcpVeno_a03a169d4fd7653a6a56a7963578cc489}{GetSsThresh} (\hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}, 
      \hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd});
186 
187           \textcolor{comment}{// Our calculation of ssthresh}
188           uint32\_t calculatedSsThresh = \hyperlink{classTcpVenoTest_a6c6251834e1354841c6e68dd82bbdc8c}{MultiplicativeDecrease} (diff, beta, 
      \hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ());
189 
190           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (ssThresh, calculatedSsThresh,
191                                  \textcolor{stringliteral}{"Veno has not decremented cWnd correctly based on its"}
192                                  \textcolor{stringliteral}{"multiplicative decrease algo."});
193         \}
194 
195       \textcolor{comment}{// Our calculation of cwnd}
196       \textcolor{keywordflow}{if} (cntRtt <= 2)
197         \{
198           \hyperlink{classTcpVenoTest_adb94384b4e1993d45709c93642819be4}{NewReno\_IncreaseWindow} (&state, 1);
199         \}
200       \textcolor{keywordflow}{else}
201         \{
202           \hyperlink{classTcpVenoTest_afbbb437669e6d13a95e0de8c0e8a79b0}{AdditiveIncrease} (&state, diff, beta);
203         \}
204 
205       \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd}.
      \hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} (), state.\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} (),
206                              \textcolor{stringliteral}{"CWnd has not updated correctly based on Veno linear increase algorithm"});
207       \hyperlink{classTcpVenoTest_a38d25d99a350ac0802bdb80052b4cfd9}{m\_numRtt}--;
208       cntRtt++;
209     \}
210 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!Multiplicative\+Decrease@{Multiplicative\+Decrease}}
\index{Multiplicative\+Decrease@{Multiplicative\+Decrease}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{Multiplicative\+Decrease(uint32\+\_\+t diff, const Uinteger\+Value \&beta, uint32\+\_\+t bytes\+In\+Flight)}{MultiplicativeDecrease(uint32_t diff, const UintegerValue &beta, uint32_t bytesInFlight)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Veno\+Test\+::\+Multiplicative\+Decrease (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{diff, }
\item[{const Uinteger\+Value \&}]{beta, }
\item[{uint32\+\_\+t}]{bytes\+In\+Flight}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_a6c6251834e1354841c6e68dd82bbdc8c}{}\label{classTcpVenoTest_a6c6251834e1354841c6e68dd82bbdc8c}


T\+CP Veno multiplicative decrease formula. 


\begin{DoxyParams}{Parameters}
{\em diff} & The difference between actual and expected throughput. \\
\hline
{\em beta} & T\+CP Veno beta param. \\
\hline
{\em bytes\+In\+Flight} & Bytes in flight. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The calculated Ss\+Thresh. 
\end{DoxyReturn}

\begin{DoxyCode}
243 \{
244   uint32\_t calculatedSsThresh;
245   \textcolor{keywordflow}{if} (diff < beta.Get ())
246     \{
247       \textcolor{keyword}{static} \textcolor{keywordtype}{double} tmp = 4.0 / 5.0;
248       calculatedSsThresh = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (2 * \hyperlink{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{m\_segmentSize}, static\_cast<uint32\_t> (
      bytesInFlight * tmp));
249     \}
250   \textcolor{keywordflow}{else}
251     \{
252       calculatedSsThresh = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (2 * \hyperlink{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{m\_segmentSize}, bytesInFlight / 2);
253     \}
254   \textcolor{keywordflow}{return} calculatedSsThresh;
255 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 5


\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!New\+Reno\+\_\+\+Congestion\+Avoidance@{New\+Reno\+\_\+\+Congestion\+Avoidance}}
\index{New\+Reno\+\_\+\+Congestion\+Avoidance@{New\+Reno\+\_\+\+Congestion\+Avoidance}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{New\+Reno\+\_\+\+Congestion\+Avoidance(\+Ptr$<$ Tcp\+Socket\+State $>$ state, uint32\+\_\+t segments\+Acked)}{NewReno_CongestionAvoidance(Ptr< TcpSocketState > state, uint32_t segmentsAcked)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Veno\+Test\+::\+New\+Reno\+\_\+\+Congestion\+Avoidance (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Tcp\+Socket\+State} $>$}]{state, }
\item[{uint32\+\_\+t}]{segments\+Acked}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_a0b135bede498ad6b25f015f59c4d48ab}{}\label{classTcpVenoTest_a0b135bede498ad6b25f015f59c4d48ab}


Mimics the New\+Reno Congestion Avoidance algorithm. 


\begin{DoxyParams}{Parameters}
{\em state} & T\+CP socket state. \\
\hline
{\em segments\+Acked} & Number of segments acked. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
285 \{
286   \textcolor{keywordflow}{if} (segmentsAcked > 0)
287     \{
288       \textcolor{keywordtype}{double} adder = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>} (state->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize} * state->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize}) / state->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ();
289       adder = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (1.0, adder);
290       state->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} += \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>} (adder);
291     \}
292 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!New\+Reno\+\_\+\+Increase\+Window@{New\+Reno\+\_\+\+Increase\+Window}}
\index{New\+Reno\+\_\+\+Increase\+Window@{New\+Reno\+\_\+\+Increase\+Window}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{New\+Reno\+\_\+\+Increase\+Window(\+Ptr$<$ Tcp\+Socket\+State $>$ state, uint32\+\_\+t segments\+Acked)}{NewReno_IncreaseWindow(Ptr< TcpSocketState > state, uint32_t segmentsAcked)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Veno\+Test\+::\+New\+Reno\+\_\+\+Increase\+Window (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Tcp\+Socket\+State} $>$}]{state, }
\item[{uint32\+\_\+t}]{segments\+Acked}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_adb94384b4e1993d45709c93642819be4}{}\label{classTcpVenoTest_adb94384b4e1993d45709c93642819be4}


Mimics the New\+Reno Increase\+Window algorithm. 


\begin{DoxyParams}{Parameters}
{\em state} & T\+CP socket state. \\
\hline
{\em segments\+Acked} & Number of segments acked. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
259 \{
260   \textcolor{keywordflow}{if} (state->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} < state->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh})
261     \{
262       segmentsAcked = \hyperlink{classTcpVenoTest_aa3390435b7a8316dff0e8f67f65237e6}{NewReno\_SlowStart} (state, segmentsAcked);
263     \}
264 
265   \textcolor{keywordflow}{if} (state->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} >= state->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh})
266     \{
267       \hyperlink{classTcpVenoTest_a0b135bede498ad6b25f015f59c4d48ab}{NewReno\_CongestionAvoidance} (state, segmentsAcked);
268     \}
269 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!New\+Reno\+\_\+\+Slow\+Start@{New\+Reno\+\_\+\+Slow\+Start}}
\index{New\+Reno\+\_\+\+Slow\+Start@{New\+Reno\+\_\+\+Slow\+Start}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{New\+Reno\+\_\+\+Slow\+Start(\+Ptr$<$ Tcp\+Socket\+State $>$ state, uint32\+\_\+t segments\+Acked)}{NewReno_SlowStart(Ptr< TcpSocketState > state, uint32_t segmentsAcked)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Veno\+Test\+::\+New\+Reno\+\_\+\+Slow\+Start (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Tcp\+Socket\+State} $>$}]{state, }
\item[{uint32\+\_\+t}]{segments\+Acked}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_aa3390435b7a8316dff0e8f67f65237e6}{}\label{classTcpVenoTest_aa3390435b7a8316dff0e8f67f65237e6}


Mimics the New\+Reno Slow\+Start algorithm. 


\begin{DoxyParams}{Parameters}
{\em state} & T\+CP socket state. \\
\hline
{\em segments\+Acked} & Number of segments acked. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of segments that could be sent. 
\end{DoxyReturn}

\begin{DoxyCode}
273 \{
274   \textcolor{keywordflow}{if} (segmentsAcked >= 1)
275     \{
276       state->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} += state->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
277       \textcolor{keywordflow}{return} segmentsAcked - 1;
278     \}
279 
280   \textcolor{keywordflow}{return} 0;
281 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 10




\subsection{Member Data Documentation}
\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+c\+Wnd@{m\+\_\+c\+Wnd}}
\index{m\+\_\+c\+Wnd@{m\+\_\+c\+Wnd}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+c\+Wnd}{m_cWnd}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Veno\+Test\+::m\+\_\+c\+Wnd\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}{}\label{classTcpVenoTest_aa65e90c7ba8b3f0779f2afbad9a383e1}


Congestion window. 

\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+inc@{m\+\_\+inc}}
\index{m\+\_\+inc@{m\+\_\+inc}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+inc}{m_inc}}]{\setlength{\rightskip}{0pt plus 5cm}bool Tcp\+Veno\+Test\+::m\+\_\+inc\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_a447f72854c411771e834e6084fe9b0c4}{}\label{classTcpVenoTest_a447f72854c411771e834e6084fe9b0c4}


Internal flag to increase every other round. 

\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+num\+Rtt@{m\+\_\+num\+Rtt}}
\index{m\+\_\+num\+Rtt@{m\+\_\+num\+Rtt}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+num\+Rtt}{m_numRtt}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Veno\+Test\+::m\+\_\+num\+Rtt\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_a38d25d99a350ac0802bdb80052b4cfd9}{}\label{classTcpVenoTest_a38d25d99a350ac0802bdb80052b4cfd9}


Number of R\+TT (i.\+e., rounds) of the test. 

\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+rtt@{m\+\_\+rtt}}
\index{m\+\_\+rtt@{m\+\_\+rtt}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+rtt}{m_rtt}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} Tcp\+Veno\+Test\+::m\+\_\+rtt\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_a0e786084324c078f6a58b8fdf0d61b60}{}\label{classTcpVenoTest_a0e786084324c078f6a58b8fdf0d61b60}


R\+TT. 

\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+segments\+Acked@{m\+\_\+segments\+Acked}}
\index{m\+\_\+segments\+Acked@{m\+\_\+segments\+Acked}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+segments\+Acked}{m_segmentsAcked}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Veno\+Test\+::m\+\_\+segments\+Acked\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_a7614249ca9888a1a8361554990318a2b}{}\label{classTcpVenoTest_a7614249ca9888a1a8361554990318a2b}


Number of segments A\+C\+Ked. 

\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+segment\+Size@{m\+\_\+segment\+Size}}
\index{m\+\_\+segment\+Size@{m\+\_\+segment\+Size}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+segment\+Size}{m_segmentSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Veno\+Test\+::m\+\_\+segment\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}{}\label{classTcpVenoTest_abd2a3231c1c2efc9aed967bc205a5ae2}


Segment size. 

\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+ss\+Thresh@{m\+\_\+ss\+Thresh}}
\index{m\+\_\+ss\+Thresh@{m\+\_\+ss\+Thresh}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+ss\+Thresh}{m_ssThresh}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Veno\+Test\+::m\+\_\+ss\+Thresh\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_ab687dc972314acea4861c499a99ed5f1}{}\label{classTcpVenoTest_ab687dc972314acea4861c499a99ed5f1}


Slow Start Threshold. 

\index{Tcp\+Veno\+Test@{Tcp\+Veno\+Test}!m\+\_\+state@{m\+\_\+state}}
\index{m\+\_\+state@{m\+\_\+state}!Tcp\+Veno\+Test@{Tcp\+Veno\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+state}{m_state}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Tcp\+Socket\+State}$>$ Tcp\+Veno\+Test\+::m\+\_\+state\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}{}\label{classTcpVenoTest_abb83a5490fca559c6233283e33a05c26}


T\+CP socket state. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{tcp-veno-test_8cc}{tcp-\/veno-\/test.\+cc}\end{DoxyCompactItemize}
