\hypertarget{classns3_1_1EpcS1apEnb}{}\section{ns3\+:\+:Epc\+S1ap\+Enb Class Reference}
\label{classns3_1_1EpcS1apEnb}\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}


{\ttfamily \#include $<$epc-\/s1ap.\+h$>$}



Inheritance diagram for ns3\+:\+:Epc\+S1ap\+Enb\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Epc\+S1ap\+Enb\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1EpcS1apEnb_aaa786c9859799772cfbc97dac04376dd}{Epc\+S1ap\+Enb} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ local\+Socket, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} enb\+Address, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} mme\+Address, uint16\+\_\+t cell\+Id, uint16\+\_\+t mme\+Id)
\item 
virtual \hyperlink{classns3_1_1EpcS1apEnb_a3749964b15359794357b50ed8f9cd74a}{$\sim$\+Epc\+S1ap\+Enb} (void)
\item 
virtual void \hyperlink{classns3_1_1EpcS1apEnb_a8b0690cb83c76c8cd56cfdb5bf77dd3a}{Do\+Dispose} (void)
\item 
void \hyperlink{classns3_1_1EpcS1apEnb_ac32d9cdb47e641d281d1dbc4393fd709}{Set\+Epc\+S1ap\+Sap\+Enb\+User} (\hyperlink{classns3_1_1EpcS1apSapEnb}{Epc\+S1ap\+Sap\+Enb} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
\hyperlink{classns3_1_1EpcS1apSapEnbProvider}{Epc\+S1ap\+Sap\+Enb\+Provider} $\ast$ \hyperlink{classns3_1_1EpcS1apEnb_acd8f5c05b514c122c95af009d55a1893}{Get\+Epc\+S1ap\+Sap\+Enb\+Provider} ()
\item 
void \hyperlink{classns3_1_1EpcS1apEnb_ac04aee5e05a6a762073de25c21dff263}{Add\+S1ap\+Interface} (uint16\+\_\+t enb\+Id, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} enb\+Address, uint16\+\_\+t mme\+Id, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} mme\+Address, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ local\+S1ap\+Socket)
\item 
void \hyperlink{classns3_1_1EpcS1apEnb_a75238a3f98ccb5cf21f28c0cda8d68e6}{Recv\+From\+S1ap\+Socket} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1EpcS1apEnb_a81106d7f55f5e73222ff647b995d80c9}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1EpcS1apEnb_ae16bde90b51366725675d0bca74e6a57}{Do\+Send\+Initial\+Ue\+Message} (uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t enb\+Ue\+S1\+Id, uint64\+\_\+t stmsi, uint16\+\_\+t ecgi)
\item 
virtual void \hyperlink{classns3_1_1EpcS1apEnb_afdba4b4f124cc6d046bbb22128b2e050}{Do\+Send\+Erab\+Release\+Indication} (uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t enb\+Ue\+S1\+Id, \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1EpcS1apSap_1_1ErabToBeReleasedIndication}{Epc\+S1ap\+Sap\+::\+Erab\+To\+Be\+Released\+Indication} $>$ erab\+To\+Be\+Release\+Indication)
\item 
virtual void \hyperlink{classns3_1_1EpcS1apEnb_a2c59c53e638bd97f1519eef27aadee50}{Do\+Send\+Initial\+Context\+Setup\+Response} (uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t enb\+Ue\+S1\+Id, \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1EpcS1apSap_1_1ErabSetupItem}{Epc\+S1ap\+Sap\+::\+Erab\+Setup\+Item} $>$ erab\+Setup\+List)
\item 
virtual void \hyperlink{classns3_1_1EpcS1apEnb_aa3aef472fe65763feed2e40cc5574438}{Do\+Send\+Path\+Switch\+Request} (uint64\+\_\+t enb\+Ue\+S1\+Id, uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t gci, \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1EpcS1apSap_1_1ErabSwitchedInDownlinkItem}{Epc\+S1ap\+Sap\+::\+Erab\+Switched\+In\+Downlink\+Item} $>$ erab\+To\+Be\+Switched\+In\+Downlink\+List)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1EpcS1apSapEnb}{Epc\+S1ap\+Sap\+Enb} $\ast$ \hyperlink{classns3_1_1EpcS1apEnb_a6905f0d78d5d39dd5f6d521ec9615713}{m\+\_\+s1ap\+Sap\+User}
\item 
\hyperlink{classns3_1_1EpcS1apSapEnbProvider}{Epc\+S1ap\+Sap\+Enb\+Provider} $\ast$ \hyperlink{classns3_1_1EpcS1apEnb_ad8cce380561baf7c8463e34f090580cf}{m\+\_\+s1ap\+Sap\+Provider}
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1S1apIfaceInfo}{S1ap\+Iface\+Info} $>$ $>$ \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\+\_\+s1ap\+Interface\+Sockets}
\item 
std\+::map$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1S1apConnectionInfo}{S1ap\+Connection\+Info} $>$ $>$ \hyperlink{classns3_1_1EpcS1apEnb_aea3453f0d052d6ff2874b482f26c1552}{m\+\_\+s1ap\+Interface\+Cell\+Ids}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}{m\+\_\+s1ap\+Udp\+Port}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}{m\+\_\+mme\+Id}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1EpcS1apEnb_aa982c937328ff55cbf78441c54e09db1}{Member\+Epc\+S1ap\+Sap\+Enb\+Provider$<$ Epc\+S1ap\+Enb $>$}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
This entity is installed inside an e\+NB and provides the functionality for the S1\+AP interface 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Epc\+S1ap\+Enb@{Epc\+S1ap\+Enb}}
\index{Epc\+S1ap\+Enb@{Epc\+S1ap\+Enb}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Epc\+S1ap\+Enb(\+Ptr$<$ Socket $>$ local\+Socket, Ipv4\+Address enb\+Address, Ipv4\+Address mme\+Address, uint16\+\_\+t cell\+Id, uint16\+\_\+t mme\+Id)}{EpcS1apEnb(Ptr< Socket > localSocket, Ipv4Address enbAddress, Ipv4Address mmeAddress, uint16_t cellId, uint16_t mmeId)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Epc\+S1ap\+Enb\+::\+Epc\+S1ap\+Enb (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{local\+Socket, }
\item[{{\bf Ipv4\+Address}}]{enb\+Address, }
\item[{{\bf Ipv4\+Address}}]{mme\+Address, }
\item[{uint16\+\_\+t}]{cell\+Id, }
\item[{uint16\+\_\+t}]{mme\+Id}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcS1apEnb_aaa786c9859799772cfbc97dac04376dd}{}\label{classns3_1_1EpcS1apEnb_aaa786c9859799772cfbc97dac04376dd}
Constructor 
\begin{DoxyCode}
84   : \hyperlink{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}{m\_s1apUdpPort} (36412) \textcolor{comment}{// As defined by IANA}
85 \{
86   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
87   \hyperlink{classns3_1_1EpcS1apEnb_ac04aee5e05a6a762073de25c21dff263}{AddS1apInterface}(cellId, enbAddress, mmeId, mmeAddress, localSocket);
88   \hyperlink{classns3_1_1EpcS1apEnb_ad8cce380561baf7c8463e34f090580cf}{m\_s1apSapProvider} = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1EpcS1apEnb_aa982c937328ff55cbf78441c54e09db1}{MemberEpcS1apSapEnbProvider<EpcS1apEnb>} (\textcolor{keyword}{this});
89 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!````~Epc\+S1ap\+Enb@{$\sim$\+Epc\+S1ap\+Enb}}
\index{````~Epc\+S1ap\+Enb@{$\sim$\+Epc\+S1ap\+Enb}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{$\sim$\+Epc\+S1ap\+Enb(void)}{~EpcS1apEnb(void)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Epc\+S1ap\+Enb\+::$\sim$\+Epc\+S1ap\+Enb (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcS1apEnb_a3749964b15359794357b50ed8f9cd74a}{}\label{classns3_1_1EpcS1apEnb_a3749964b15359794357b50ed8f9cd74a}
Destructor 
\begin{DoxyCode}
92 \{
93   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
94 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Add\+S1ap\+Interface@{Add\+S1ap\+Interface}}
\index{Add\+S1ap\+Interface@{Add\+S1ap\+Interface}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Add\+S1ap\+Interface(uint16\+\_\+t enb\+Id, Ipv4\+Address enb\+Address, uint16\+\_\+t mme\+Id, Ipv4\+Address mme\+Address, Ptr$<$ Socket $>$ local\+S1ap\+Socket)}{AddS1apInterface(uint16_t enbId, Ipv4Address enbAddress, uint16_t mmeId, Ipv4Address mmeAddress, Ptr< Socket > localS1apSocket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Add\+S1ap\+Interface (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{enb\+Id, }
\item[{{\bf Ipv4\+Address}}]{enb\+Address, }
\item[{uint16\+\_\+t}]{mme\+Id, }
\item[{{\bf Ipv4\+Address}}]{mme\+Address, }
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{local\+S1ap\+Socket}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcS1apEnb_ac04aee5e05a6a762073de25c21dff263}{}\label{classns3_1_1EpcS1apEnb_ac04aee5e05a6a762073de25c21dff263}
Add an S1ap interface to this E\+PC S1ap entity 
\begin{DoxyParams}{Parameters}
{\em enb\+Id} & the cell ID of the e\+NodeB on which this is installed \\
\hline
{\em enb\+Address} & the address of the e\+NodeB on which this is installed \\
\hline
{\em mme\+Id} & the ID of the M\+ME to which the e\+NB is connected \\
\hline
{\em mme\+Address} & the address of the M\+ME to which the e\+NB is connected \\
\hline
{\em the} & socket created in the Epc Helper \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
134 \{
135   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << enbId << enbAddress << mmeId << mmeAddress);
136 
137   localS1apSocket->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1EpcS1apEnb_a75238a3f98ccb5cf21f28c0cda8d68e6}{EpcS1apEnb::RecvFromS1apSocket}, \textcolor{keyword}{this}));
138 
139   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets}.find (mmeId) == 
      \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets}.end (),
140                  \textcolor{stringliteral}{"Mapping for mmeId = "} << mmeId << \textcolor{stringliteral}{" is already known"});
141   \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets} [mmeId] = Create<S1apIfaceInfo> (mmeAddress, localS1apSocket
      );
142 
143   \textcolor{comment}{// TODO m\_mmeId is initialized once since one mme is connected to this enb interface, consider when
       extending}
144   \hyperlink{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}{m\_mmeId} = mmeId;
145 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcS1apEnb_a8b0690cb83c76c8cd56cfdb5bf77dd3a}{}\label{classns3_1_1EpcS1apEnb_a8b0690cb83c76c8cd56cfdb5bf77dd3a}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1EpcS1apEnb_a8b0690cb83c76c8cd56cfdb5bf77dd3a}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{ns3\+::\+Object}.


\begin{DoxyCode}
98 \{
99   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
100 
101   \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets}.clear ();
102   \hyperlink{classns3_1_1EpcS1apEnb_aea3453f0d052d6ff2874b482f26c1552}{m\_s1apInterfaceCellIds}.clear ();
103   \textcolor{keyword}{delete} \hyperlink{classns3_1_1EpcS1apEnb_ad8cce380561baf7c8463e34f090580cf}{m\_s1apSapProvider};
104 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Do\+Send\+Erab\+Release\+Indication@{Do\+Send\+Erab\+Release\+Indication}}
\index{Do\+Send\+Erab\+Release\+Indication@{Do\+Send\+Erab\+Release\+Indication}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Do\+Send\+Erab\+Release\+Indication(uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t enb\+Ue\+S1\+Id, std\+::list$<$ Epc\+S1ap\+Sap\+::\+Erab\+To\+Be\+Released\+Indication $>$ erab\+To\+Be\+Release\+Indication)}{DoSendErabReleaseIndication(uint64_t mmeUeS1Id, uint16_t enbUeS1Id, std::list< EpcS1apSap::ErabToBeReleasedIndication > erabToBeReleaseIndication)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Do\+Send\+Erab\+Release\+Indication (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{mme\+Ue\+S1\+Id, }
\item[{uint16\+\_\+t}]{enb\+Ue\+S1\+Id, }
\item[{{\bf std\+::list}$<$ {\bf Epc\+S1ap\+Sap\+::\+Erab\+To\+Be\+Released\+Indication} $>$}]{erab\+To\+Be\+Release\+Indication}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcS1apEnb_afdba4b4f124cc6d046bbb22128b2e050}{}\label{classns3_1_1EpcS1apEnb_afdba4b4f124cc6d046bbb22128b2e050}

\begin{DoxyCode}
256 \{
257   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
258 
259   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"mmeUeS1apId = "} << mmeUeS1Id);
260   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"enbUeS1apId = "} << enbUeS1Id);
261 
262   \textcolor{comment}{// TODO check if an assert is needed}
263 
264   Ptr<S1apIfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets} [
      \hyperlink{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}{m\_mmeId}]; \textcolor{comment}{// in case of multiple mme, extend the call}
265   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
266   Ipv4Address mmeIpAddr = socketInfo->m\_remoteIpAddr;
267 
268   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
269   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeIpAddr = "} << mmeIpAddr);
270 
271   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send S1ap message: E-RAB RELEASE INDICATION "} << 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds());
272 
273   EpcS1APErabReleaseIndicationHeader indHeader;
274   
275   indHeader.SetMmeUeS1Id(mmeUeS1Id);
276   indHeader.SetEnbUeS1Id(enbUeS1Id);
277   indHeader.SetErabReleaseIndication(erabToBeReleaseIndication);
278   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap E-rab Release Indication header "} << indHeader);
279 
280   EpcS1APHeader s1apHeader;
281   s1apHeader.SetProcedureCode (\hyperlink{classns3_1_1EpcS1APHeader_aedd7ba8568bf04ce8960bd840712a63eacba9fcdd89b080f9511a1de3dea78cf0}{EpcS1APHeader::ErabReleaseIndication});
282   s1apHeader.SetLengthOfIes (indHeader.GetLengthOfIes ());
283   s1apHeader.SetNumberOfIes (indHeader.GetNumberOfIes ());
284   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap header: "} << s1apHeader);
285 
286   Ptr<Packet> packet = Create <Packet> ();
287   packet->AddHeader (indHeader);
288   packet->AddHeader (s1apHeader);
289   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
290 
291   \textcolor{comment}{// Send the S1ap message through the socket}
292   sourceSocket->SendTo (packet, 0, InetSocketAddress (mmeIpAddr, \hyperlink{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}{m\_s1apUdpPort}));
293 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Do\+Send\+Initial\+Context\+Setup\+Response@{Do\+Send\+Initial\+Context\+Setup\+Response}}
\index{Do\+Send\+Initial\+Context\+Setup\+Response@{Do\+Send\+Initial\+Context\+Setup\+Response}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Do\+Send\+Initial\+Context\+Setup\+Response(uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t enb\+Ue\+S1\+Id, std\+::list$<$ Epc\+S1ap\+Sap\+::\+Erab\+Setup\+Item $>$ erab\+Setup\+List)}{DoSendInitialContextSetupResponse(uint64_t mmeUeS1Id, uint16_t enbUeS1Id, std::list< EpcS1apSap::ErabSetupItem > erabSetupList)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Do\+Send\+Initial\+Context\+Setup\+Response (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{mme\+Ue\+S1\+Id, }
\item[{uint16\+\_\+t}]{enb\+Ue\+S1\+Id, }
\item[{{\bf std\+::list}$<$ {\bf Epc\+S1ap\+Sap\+::\+Erab\+Setup\+Item} $>$}]{erab\+Setup\+List}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcS1apEnb_a2c59c53e638bd97f1519eef27aadee50}{}\label{classns3_1_1EpcS1apEnb_a2c59c53e638bd97f1519eef27aadee50}

\begin{DoxyCode}
299 \{
300   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
301 
302   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"mmeUeS1apId = "} << mmeUeS1Id);
303   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"enbUeS1apId = "} << enbUeS1Id);
304 
305   \textcolor{comment}{// TODO check if an assert is needed}
306 
307   Ptr<S1apIfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets} [
      \hyperlink{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}{m\_mmeId}]; \textcolor{comment}{// in case of multiple mme, extend the call}
308   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
309   Ipv4Address mmeIpAddr = socketInfo->m\_remoteIpAddr;
310 
311   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
312   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeIpAddr = "} << mmeIpAddr);
313 
314   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send S1ap message: INITIAL CONTEXT SETUP RESPONSE "} << 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds());
315 
316   EpcS1APInitialContextSetupResponseHeader indHeader;
317   
318   indHeader.SetMmeUeS1Id(mmeUeS1Id);
319   indHeader.SetEnbUeS1Id(enbUeS1Id);
320   indHeader.SetErabSetupItem(erabSetupList);
321   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1AP Initial Context Setup Response header "} << indHeader);
322 
323   EpcS1APHeader s1apHeader;
324   s1apHeader.SetProcedureCode (\hyperlink{classns3_1_1EpcS1APHeader_aedd7ba8568bf04ce8960bd840712a63eaa7514c43bcf4967085e33f2258d754d0}{EpcS1APHeader::InitialContextSetupResponse}
      );
325   s1apHeader.SetLengthOfIes (indHeader.GetLengthOfIes ());
326   s1apHeader.SetNumberOfIes (indHeader.GetNumberOfIes ());
327   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap header: "} << s1apHeader);
328 
329   Ptr<Packet> packet = Create <Packet> ();
330   packet->AddHeader (indHeader);
331   packet->AddHeader (s1apHeader);
332   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
333 
334   \textcolor{comment}{// Send the S1ap message through the socket}
335   sourceSocket->SendTo (packet, 0, InetSocketAddress (mmeIpAddr, \hyperlink{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}{m\_s1apUdpPort}));
336 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Do\+Send\+Initial\+Ue\+Message@{Do\+Send\+Initial\+Ue\+Message}}
\index{Do\+Send\+Initial\+Ue\+Message@{Do\+Send\+Initial\+Ue\+Message}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Do\+Send\+Initial\+Ue\+Message(uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t enb\+Ue\+S1\+Id, uint64\+\_\+t stmsi, uint16\+\_\+t ecgi)}{DoSendInitialUeMessage(uint64_t mmeUeS1Id, uint16_t enbUeS1Id, uint64_t stmsi, uint16_t ecgi)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Do\+Send\+Initial\+Ue\+Message (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{mme\+Ue\+S1\+Id, }
\item[{uint16\+\_\+t}]{enb\+Ue\+S1\+Id, }
\item[{uint64\+\_\+t}]{stmsi, }
\item[{uint16\+\_\+t}]{ecgi}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcS1apEnb_ae16bde90b51366725675d0bca74e6a57}{}\label{classns3_1_1EpcS1apEnb_ae16bde90b51366725675d0bca74e6a57}

\begin{DoxyCode}
212 \{
213   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
214 
215   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"mmeUeS1apId = "} << mmeUeS1Id);
216   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"enbUeS1apId = "} << enbUeS1Id);
217   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"stmsi = "} << stmsi);
218   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"ecgi = "} << ecgi);
219 
220   \textcolor{comment}{// TODO check if an assert is needed}
221 
222   Ptr<S1apIfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets} [
      \hyperlink{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}{m\_mmeId}]; \textcolor{comment}{// in case of multiple mme, extend the call}
223   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
224   Ipv4Address mmeIpAddr = socketInfo->m\_remoteIpAddr;
225 
226   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
227   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeIpAddr = "} << mmeIpAddr);
228 
229   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send S1ap message: INITIAL UE MESSAGE "} << 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds());
230 
231   \textcolor{comment}{// build the header}
232   EpcS1APInitialUeMessageHeader initialMessage;
233   initialMessage.SetMmeUeS1Id(mmeUeS1Id);
234   initialMessage.SetEnbUeS1Id(enbUeS1Id);
235   initialMessage.SetSTmsi(stmsi);
236   initialMessage.SetEcgi(ecgi);
237   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap Initial Message header "} << initialMessage);
238 
239   EpcS1APHeader s1apHeader;
240   s1apHeader.SetProcedureCode (\hyperlink{classns3_1_1EpcS1APHeader_aedd7ba8568bf04ce8960bd840712a63eaf6e59a9d987f46fb18f5113370354521}{EpcS1APHeader::InitialUeMessage});
241   s1apHeader.SetLengthOfIes (initialMessage.GetLengthOfIes ());
242   s1apHeader.SetNumberOfIes (initialMessage.GetNumberOfIes ());
243   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap header: "} << s1apHeader);
244 
245   Ptr<Packet> packet = Create <Packet> ();
246   packet->AddHeader (initialMessage);
247   packet->AddHeader (s1apHeader);
248   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
249 
250   \textcolor{comment}{// Send the S1ap message through the socket}
251   sourceSocket->SendTo (packet, 0, InetSocketAddress (mmeIpAddr, \hyperlink{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}{m\_s1apUdpPort}));
252 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Do\+Send\+Path\+Switch\+Request@{Do\+Send\+Path\+Switch\+Request}}
\index{Do\+Send\+Path\+Switch\+Request@{Do\+Send\+Path\+Switch\+Request}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Do\+Send\+Path\+Switch\+Request(uint64\+\_\+t enb\+Ue\+S1\+Id, uint64\+\_\+t mme\+Ue\+S1\+Id, uint16\+\_\+t gci, std\+::list$<$ Epc\+S1ap\+Sap\+::\+Erab\+Switched\+In\+Downlink\+Item $>$ erab\+To\+Be\+Switched\+In\+Downlink\+List)}{DoSendPathSwitchRequest(uint64_t enbUeS1Id, uint64_t mmeUeS1Id, uint16_t gci, std::list< EpcS1apSap::ErabSwitchedInDownlinkItem > erabToBeSwitchedInDownlinkList)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Do\+Send\+Path\+Switch\+Request (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{enb\+Ue\+S1\+Id, }
\item[{uint64\+\_\+t}]{mme\+Ue\+S1\+Id, }
\item[{uint16\+\_\+t}]{gci, }
\item[{{\bf std\+::list}$<$ {\bf Epc\+S1ap\+Sap\+::\+Erab\+Switched\+In\+Downlink\+Item} $>$}]{erab\+To\+Be\+Switched\+In\+Downlink\+List}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcS1apEnb_aa3aef472fe65763feed2e40cc5574438}{}\label{classns3_1_1EpcS1apEnb_aa3aef472fe65763feed2e40cc5574438}

\begin{DoxyCode}
341 \{
342   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
343 
344   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"mmeUeS1apId = "} << mmeUeS1Id);
345   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"enbUeS1apId = "} << enbUeS1Id);
346   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"ecgi = "} << gci);
347 
348   \textcolor{comment}{// TODO check if an assert is needed}
349 
350   Ptr<S1apIfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{m\_s1apInterfaceSockets} [
      \hyperlink{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}{m\_mmeId}]; \textcolor{comment}{// in case of multiple mme, extend the call}
351   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
352   Ipv4Address mmeIpAddr = socketInfo->m\_remoteIpAddr;
353 
354   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
355   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeIpAddr = "} << mmeIpAddr);
356 
357   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send S1ap message: PATH SWITCH REQUEST "} << 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds());
358 
359   EpcS1APPathSwitchRequestHeader indHeader;
360   
361   indHeader.SetMmeUeS1Id(mmeUeS1Id);
362   indHeader.SetEnbUeS1Id(enbUeS1Id);
363   indHeader.SetEcgi(gci);
364   indHeader.SetErabSwitchedInDownlinkItemList(erabToBeSwitchedInDownlinkList);
365   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1AP Path Switch Request header "} << indHeader);
366 
367   EpcS1APHeader s1apHeader;
368   s1apHeader.SetProcedureCode (\hyperlink{classns3_1_1EpcS1APHeader_aedd7ba8568bf04ce8960bd840712a63eaab42fb0bc4eaa2bd39ab5195f0d6a6d8}{EpcS1APHeader::PathSwitchRequest});
369   s1apHeader.SetLengthOfIes (indHeader.GetLengthOfIes ());
370   s1apHeader.SetNumberOfIes (indHeader.GetNumberOfIes ());
371   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap header: "} << s1apHeader);
372 
373   Ptr<Packet> packet = Create <Packet> ();
374   packet->AddHeader (indHeader);
375   packet->AddHeader (s1apHeader);
376   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
377 
378   \textcolor{comment}{// Send the S1ap message through the socket}
379   sourceSocket->SendTo (packet, 0, InetSocketAddress (mmeIpAddr, \hyperlink{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}{m\_s1apUdpPort}));
380 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Get\+Epc\+S1ap\+Sap\+Enb\+Provider@{Get\+Epc\+S1ap\+Sap\+Enb\+Provider}}
\index{Get\+Epc\+S1ap\+Sap\+Enb\+Provider@{Get\+Epc\+S1ap\+Sap\+Enb\+Provider}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Get\+Epc\+S1ap\+Sap\+Enb\+Provider()}{GetEpcS1apSapEnbProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+S1ap\+Sap\+Enb\+Provider} $\ast$ ns3\+::\+Epc\+S1ap\+Enb\+::\+Get\+Epc\+S1ap\+Sap\+Enb\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcS1apEnb_acd8f5c05b514c122c95af009d55a1893}{}\label{classns3_1_1EpcS1apEnb_acd8f5c05b514c122c95af009d55a1893}
\begin{DoxyReturn}{Returns}
the S1ap S\+AP Provider interface offered by this E\+PC S1ap entity 
\end{DoxyReturn}

\begin{DoxyCode}
124 \{
125   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
126   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1EpcS1apEnb_ad8cce380561baf7c8463e34f090580cf}{m\_s1apSapProvider};
127 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Epc\+S1ap\+Enb\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1EpcS1apEnb_a81106d7f55f5e73222ff647b995d80c9}{}\label{classns3_1_1EpcS1apEnb_a81106d7f55f5e73222ff647b995d80c9}

\begin{DoxyCode}
108 \{
109   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::EpcS1apEnb"})
110     .SetParent<\hyperlink{classns3_1_1Object_a40860402e64d8008fb42329df7097cdb}{Object}> ()
111     .SetGroupName(\textcolor{stringliteral}{"Lte"});
112   \textcolor{keywordflow}{return} tid;
113 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Recv\+From\+S1ap\+Socket@{Recv\+From\+S1ap\+Socket}}
\index{Recv\+From\+S1ap\+Socket@{Recv\+From\+S1ap\+Socket}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Recv\+From\+S1ap\+Socket(\+Ptr$<$ Socket $>$ socket)}{RecvFromS1apSocket(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Recv\+From\+S1ap\+Socket (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcS1apEnb_a75238a3f98ccb5cf21f28c0cda8d68e6}{}\label{classns3_1_1EpcS1apEnb_a75238a3f98ccb5cf21f28c0cda8d68e6}
Method to be assigned to the recv callback of the S1ap-\/C (S1ap Control Plane) socket. It is called when the e\+NB receives a packet from the M\+ME on the S1ap interface


\begin{DoxyParams}{Parameters}
{\em socket} & socket of the S1ap interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
150 \{
151   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << socket);
152 
153   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv S1ap message: S1AP eNB: from Socket at time "} << 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds());
154   Ptr<Packet> packet = socket->\hyperlink{classns3_1_1Socket_a8949b1f844aae563446f2f4c5be8827a}{Recv} ();
155   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
156 
157   EpcS1APHeader s1apHeader;
158   packet->RemoveHeader (s1apHeader);
159 
160   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"S1ap header: "} << s1apHeader);
161 
162   uint8\_t procedureCode = s1apHeader.GetProcedureCode ();
163 
164   \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcS1APHeader_aedd7ba8568bf04ce8960bd840712a63eaee7f11dc02c8f9c13cc21727512cb72f}{EpcS1APHeader::InitialContextSetupRequest})
165   \{
166     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv S1ap message: INITIAL CONTEXT SETUP REQUEST"});
167     EpcS1APInitialContextSetupRequestHeader reqHeader;
168     packet->RemoveHeader(reqHeader);
169 
170     \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap Initial Context Setup Request "} << reqHeader);
171 
172     uint64\_t mmeUeS1apId = reqHeader.GetMmeUeS1Id();
173     uint16\_t enbUeS1apId = reqHeader.GetEnbUeS1Id();
174     std::list<EpcS1apSap::ErabToBeSetupItem> erabToBeSetup = reqHeader.GetErabToBeSetupItem ();
175     
176     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeUeS1apId "} << mmeUeS1apId);
177     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"enbUeS1apId "} << enbUeS1apId);
178 
179     \hyperlink{classns3_1_1EpcS1apEnb_a6905f0d78d5d39dd5f6d521ec9615713}{m\_s1apSapUser}->\hyperlink{classns3_1_1EpcS1apSapEnb_accce076a97c96f48445de059c302e0ad}{InitialContextSetupRequest}(mmeUeS1apId, 
      enbUeS1apId, erabToBeSetup);
180   \} 
181   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcS1APHeader_aedd7ba8568bf04ce8960bd840712a63ea4c73b45629052b31f0636b3ba4b9d58f}{EpcS1APHeader::PathSwitchRequestAck})
182   \{
183     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv S1ap message: PATH SWITCH REQUEST ACK"});
184     EpcS1APPathSwitchRequestAcknowledgeHeader reqHeader;
185     packet->RemoveHeader(reqHeader);
186 
187     \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"S1ap Path Switch Request Acknowledge Header "} << reqHeader);
188 
189     uint64\_t mmeUeS1apId = reqHeader.GetMmeUeS1Id();
190     uint16\_t enbUeS1apId = reqHeader.GetEnbUeS1Id();
191     uint16\_t ecgi = reqHeader.GetEcgi();
192     std::list<EpcS1apSap::ErabSwitchedInUplinkItem> pathErab = reqHeader.GetErabSwitchedInUplinkItemList ()
      ;
193     
194     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeUeS1apId "} << mmeUeS1apId);
195     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"enbUeS1apId "} << enbUeS1apId);
196     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"ecgi "} << ecgi);
197 
198     \hyperlink{classns3_1_1EpcS1apEnb_a6905f0d78d5d39dd5f6d521ec9615713}{m\_s1apSapUser}->\hyperlink{classns3_1_1EpcS1apSapEnb_ac6404c7ddd81aea79890976d11cbe005}{PathSwitchRequestAcknowledge}(enbUeS1apId, 
      mmeUeS1apId, ecgi, pathErab);
199   \}  
200   \textcolor{keywordflow}{else}
201   \{
202     \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\textcolor{keyword}{false}, \textcolor{stringliteral}{"ProcedureCode NOT SUPPORTED!!!"});
203   \}
204 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10




Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Set\+Epc\+S1ap\+Sap\+Enb\+User@{Set\+Epc\+S1ap\+Sap\+Enb\+User}}
\index{Set\+Epc\+S1ap\+Sap\+Enb\+User@{Set\+Epc\+S1ap\+Sap\+Enb\+User}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Set\+Epc\+S1ap\+Sap\+Enb\+User(\+Epc\+S1ap\+Sap\+Enb $\ast$s)}{SetEpcS1apSapEnbUser(EpcS1apSapEnb *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+S1ap\+Enb\+::\+Set\+Epc\+S1ap\+Sap\+Enb\+User (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+S1ap\+Sap\+Enb} $\ast$}]{s}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcS1apEnb_ac32d9cdb47e641d281d1dbc4393fd709}{}\label{classns3_1_1EpcS1apEnb_ac32d9cdb47e641d281d1dbc4393fd709}

\begin{DoxyParams}{Parameters}
{\em s} & the S1ap S\+AP User to be used by this E\+PC S1ap e\+NB entity in order to call methods of epc\+Enb\+Application \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
117 \{
118   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
119   \hyperlink{classns3_1_1EpcS1apEnb_a6905f0d78d5d39dd5f6d521ec9615713}{m\_s1apSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
120 \}
\end{DoxyCode}


\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!Member\+Epc\+S1ap\+Sap\+Enb\+Provider$<$ Epc\+S1ap\+Enb $>$@{Member\+Epc\+S1ap\+Sap\+Enb\+Provider$<$ Epc\+S1ap\+Enb $>$}}
\index{Member\+Epc\+S1ap\+Sap\+Enb\+Provider$<$ Epc\+S1ap\+Enb $>$@{Member\+Epc\+S1ap\+Sap\+Enb\+Provider$<$ Epc\+S1ap\+Enb $>$}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{Member\+Epc\+S1ap\+Sap\+Enb\+Provider$<$ Epc\+S1ap\+Enb $>$}{MemberEpcS1apSapEnbProvider< EpcS1apEnb >}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Member\+Epc\+S1ap\+Sap\+Enb\+Provider}$<$ {\bf Epc\+S1ap\+Enb} $>$\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1EpcS1apEnb_aa982c937328ff55cbf78441c54e09db1}{}\label{classns3_1_1EpcS1apEnb_aa982c937328ff55cbf78441c54e09db1}


\subsection{Member Data Documentation}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!m\+\_\+mme\+Id@{m\+\_\+mme\+Id}}
\index{m\+\_\+mme\+Id@{m\+\_\+mme\+Id}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{m\+\_\+mme\+Id}{m_mmeId}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Epc\+S1ap\+Enb\+::m\+\_\+mme\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}{}\label{classns3_1_1EpcS1apEnb_a44a703502c1439b86664b12751b15d69}
Mme ID, stored as a private variable until more than one M\+ME will be implemented \index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!m\+\_\+s1ap\+Interface\+Cell\+Ids@{m\+\_\+s1ap\+Interface\+Cell\+Ids}}
\index{m\+\_\+s1ap\+Interface\+Cell\+Ids@{m\+\_\+s1ap\+Interface\+Cell\+Ids}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{m\+\_\+s1ap\+Interface\+Cell\+Ids}{m_s1apInterfaceCellIds}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ {\bf Ptr}$<${\bf Socket}$>$, {\bf Ptr}$<${\bf S1ap\+Connection\+Info}$>$ $>$ ns3\+::\+Epc\+S1ap\+Enb\+::m\+\_\+s1ap\+Interface\+Cell\+Ids\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcS1apEnb_aea3453f0d052d6ff2874b482f26c1552}{}\label{classns3_1_1EpcS1apEnb_aea3453f0d052d6ff2874b482f26c1552}
Map the local\+Socket (the one receiving the S1ap message) to the corresponding (source\+Cell\+Id, target\+Cell\+Id) associated with the S1ap interface \index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!m\+\_\+s1ap\+Interface\+Sockets@{m\+\_\+s1ap\+Interface\+Sockets}}
\index{m\+\_\+s1ap\+Interface\+Sockets@{m\+\_\+s1ap\+Interface\+Sockets}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{m\+\_\+s1ap\+Interface\+Sockets}{m_s1apInterfaceSockets}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Ptr}$<${\bf S1ap\+Iface\+Info}$>$ $>$ ns3\+::\+Epc\+S1ap\+Enb\+::m\+\_\+s1ap\+Interface\+Sockets\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}{}\label{classns3_1_1EpcS1apEnb_ad91b3139b21bd084edf401249d4e4233}
Map the mme\+Id to the corresponding (source\+Socket, remote\+Ip\+Addr) to be used to send the S1ap message \index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!m\+\_\+s1ap\+Sap\+Provider@{m\+\_\+s1ap\+Sap\+Provider}}
\index{m\+\_\+s1ap\+Sap\+Provider@{m\+\_\+s1ap\+Sap\+Provider}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{m\+\_\+s1ap\+Sap\+Provider}{m_s1apSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+S1ap\+Sap\+Enb\+Provider}$\ast$ ns3\+::\+Epc\+S1ap\+Enb\+::m\+\_\+s1ap\+Sap\+Provider\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcS1apEnb_ad8cce380561baf7c8463e34f090580cf}{}\label{classns3_1_1EpcS1apEnb_ad8cce380561baf7c8463e34f090580cf}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!m\+\_\+s1ap\+Sap\+User@{m\+\_\+s1ap\+Sap\+User}}
\index{m\+\_\+s1ap\+Sap\+User@{m\+\_\+s1ap\+Sap\+User}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{m\+\_\+s1ap\+Sap\+User}{m_s1apSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+S1ap\+Sap\+Enb}$\ast$ ns3\+::\+Epc\+S1ap\+Enb\+::m\+\_\+s1ap\+Sap\+User\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcS1apEnb_a6905f0d78d5d39dd5f6d521ec9615713}{}\label{classns3_1_1EpcS1apEnb_a6905f0d78d5d39dd5f6d521ec9615713}
\index{ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}!m\+\_\+s1ap\+Udp\+Port@{m\+\_\+s1ap\+Udp\+Port}}
\index{m\+\_\+s1ap\+Udp\+Port@{m\+\_\+s1ap\+Udp\+Port}!ns3\+::\+Epc\+S1ap\+Enb@{ns3\+::\+Epc\+S1ap\+Enb}}
\subsubsection[{\texorpdfstring{m\+\_\+s1ap\+Udp\+Port}{m_s1apUdpPort}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Epc\+S1ap\+Enb\+::m\+\_\+s1ap\+Udp\+Port\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}{}\label{classns3_1_1EpcS1apEnb_ae06c681ae6a91dc4729408d0a7b4dd39}
U\+DP port to be used for the S1ap interfaces\+: S1ap 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/model/\hyperlink{epc-s1ap_8h}{epc-\/s1ap.\+h}\item 
lte/model/\hyperlink{epc-s1ap_8cc}{epc-\/s1ap.\+cc}\end{DoxyCompactItemize}
