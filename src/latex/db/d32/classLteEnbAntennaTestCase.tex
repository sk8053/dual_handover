\hypertarget{classLteEnbAntennaTestCase}{}\section{Lte\+Enb\+Antenna\+Test\+Case Class Reference}
\label{classLteEnbAntennaTestCase}\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}


Inheritance diagram for Lte\+Enb\+Antenna\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lte\+Enb\+Antenna\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLteEnbAntennaTestCase_a658c152325dc77cce0d9ec64b89cbbd9}{Lte\+Enb\+Antenna\+Test\+Case} (double orientation\+Degrees, double beamwidth\+Degrees, double \hyperlink{lte__link__budget__x2__handover__measures_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}, double y, double antenna\+Gain\+Db)
\item 
\hyperlink{classLteEnbAntennaTestCase_a419c7dbdc43647cafbed2e574edb2bd2}{Lte\+Enb\+Antenna\+Test\+Case} ()
\item 
virtual \hyperlink{classLteEnbAntennaTestCase_a5bcd08dcea8070d81b8daa3937040b0f}{$\sim$\+Lte\+Enb\+Antenna\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::string \hyperlink{classLteEnbAntennaTestCase_a19a8c8d811432028214a80217579b043}{Build\+Name\+String} (double orientation\+Degrees, double beamwidth\+Degrees, double \hyperlink{lte__link__budget__x2__handover__measures_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}, double y)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLteEnbAntennaTestCase_a6120b567186fa3218fdaa1712399079e}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classLteEnbAntennaTestCase_a00b3429c0d173fa3fbdc0139fd6b3c75}{m\+\_\+orientation\+Degrees}
\item 
double \hyperlink{classLteEnbAntennaTestCase_a7a246ef6af585fb0d99177085d5caeba}{m\+\_\+beamwidth\+Degrees}
\item 
double \hyperlink{classLteEnbAntennaTestCase_a7637fedb08b5740e33a0675e883fa35e}{m\+\_\+x}
\item 
double \hyperlink{classLteEnbAntennaTestCase_a97b29e700065abced8ae92ca354abf4a}{m\+\_\+y}
\item 
double \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\+\_\+antenna\+Gain\+Db}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lte\+Enb\+Antenna\+Test\+Case(double orientation\+Degrees, double beamwidth\+Degrees, double x, double y, double antenna\+Gain\+Db)}{LteEnbAntennaTestCase(double orientationDegrees, double beamwidthDegrees, double x, double y, double antennaGainDb)}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Enb\+Antenna\+Test\+Case\+::\+Lte\+Enb\+Antenna\+Test\+Case (
\begin{DoxyParamCaption}
\item[{double}]{orientation\+Degrees, }
\item[{double}]{beamwidth\+Degrees, }
\item[{double}]{x, }
\item[{double}]{y, }
\item[{double}]{antenna\+Gain\+Db}
\end{DoxyParamCaption}
)}\hypertarget{classLteEnbAntennaTestCase_a658c152325dc77cce0d9ec64b89cbbd9}{}\label{classLteEnbAntennaTestCase_a658c152325dc77cce0d9ec64b89cbbd9}

\begin{DoxyCode}
81   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{classLteEnbAntennaTestCase_a19a8c8d811432028214a80217579b043}{BuildNameString} (orientationDegrees, beamwidthDegrees, 
      \hyperlink{lte__link__budget__x2__handover__measures_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}, y)),
82     \hyperlink{classLteEnbAntennaTestCase_a00b3429c0d173fa3fbdc0139fd6b3c75}{m\_orientationDegrees} (orientationDegrees),
83     \hyperlink{classLteEnbAntennaTestCase_a7a246ef6af585fb0d99177085d5caeba}{m\_beamwidthDegrees} (beamwidthDegrees),
84     \hyperlink{classLteEnbAntennaTestCase_a7637fedb08b5740e33a0675e883fa35e}{m\_x} (\hyperlink{lte__link__budget__x2__handover__measures_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}),
85     \hyperlink{classLteEnbAntennaTestCase_a97b29e700065abced8ae92ca354abf4a}{m\_y} (y),
86     \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb} (antennaGainDb)
87 \{
88   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
89 \}
\end{DoxyCode}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lte\+Enb\+Antenna\+Test\+Case()}{LteEnbAntennaTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Enb\+Antenna\+Test\+Case\+::\+Lte\+Enb\+Antenna\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classLteEnbAntennaTestCase_a419c7dbdc43647cafbed2e574edb2bd2}{}\label{classLteEnbAntennaTestCase_a419c7dbdc43647cafbed2e574edb2bd2}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!````~Lte\+Enb\+Antenna\+Test\+Case@{$\sim$\+Lte\+Enb\+Antenna\+Test\+Case}}
\index{````~Lte\+Enb\+Antenna\+Test\+Case@{$\sim$\+Lte\+Enb\+Antenna\+Test\+Case}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Lte\+Enb\+Antenna\+Test\+Case()}{~LteEnbAntennaTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Enb\+Antenna\+Test\+Case\+::$\sim$\+Lte\+Enb\+Antenna\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classLteEnbAntennaTestCase_a5bcd08dcea8070d81b8daa3937040b0f}{}\label{classLteEnbAntennaTestCase_a5bcd08dcea8070d81b8daa3937040b0f}

\begin{DoxyCode}
92 \{
93 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!Build\+Name\+String@{Build\+Name\+String}}
\index{Build\+Name\+String@{Build\+Name\+String}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{Build\+Name\+String(double orientation\+Degrees, double beamwidth\+Degrees, double x, double y)}{BuildNameString(double orientationDegrees, double beamwidthDegrees, double x, double y)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Lte\+Enb\+Antenna\+Test\+Case\+::\+Build\+Name\+String (
\begin{DoxyParamCaption}
\item[{double}]{orientation\+Degrees, }
\item[{double}]{beamwidth\+Degrees, }
\item[{double}]{x, }
\item[{double}]{y}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classLteEnbAntennaTestCase_a19a8c8d811432028214a80217579b043}{}\label{classLteEnbAntennaTestCase_a19a8c8d811432028214a80217579b043}

\begin{DoxyCode}
70 \{
71   std::ostringstream oss;
72   oss <<  \textcolor{stringliteral}{"o="} << orientationDegrees
73       << \textcolor{stringliteral}{", bw="} << beamwidthDegrees  
74       << \textcolor{stringliteral}{", x="} << \hyperlink{lte__link__budget__x2__handover__measures_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x} 
75       << \textcolor{stringliteral}{", y="} << y;
76   \textcolor{keywordflow}{return} oss.str ();
77 \}
\end{DoxyCode}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lte\+Enb\+Antenna\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLteEnbAntennaTestCase_a6120b567186fa3218fdaa1712399079e}{}\label{classLteEnbAntennaTestCase_a6120b567186fa3218fdaa1712399079e}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
97 \{
98   \hyperlink{group__config_ga2c1b65724f42f8c72276d7e7ad6df6db}{Config::Reset} ();
99   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::CtrlErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
100   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::DataErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
101   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteHelper::UseIdealRrc"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
102 
103   \textcolor{comment}{//Disable Uplink Power Control}
104   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteUePhy::EnableUplinkPowerControl"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
105 
106   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lteHelper = CreateObject<LteHelper> ();
107 
108   \textcolor{comment}{// use 0dB Pathloss, since we are testing only the antenna gain}
109   lteHelper->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PathlossModel"}, StringValue (\textcolor{stringliteral}{"
      ns3::ConstantSpectrumPropagationLossModel"}));
110   lteHelper->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"Loss"}, DoubleValue (0.0));
111 
112   \textcolor{comment}{// Create Nodes: eNodeB and UE}
113   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
114   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
115   enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
116   ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
117   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} allNodes = \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ( enbNodes, ueNodes );
118 
119   \textcolor{comment}{// Install Mobility Model}
120   \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} positionAlloc = CreateObject<ListPositionAllocator> 
      ();
121   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (0.0, 0.0, 0.0));  \textcolor{comment}{// eNB}
122   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (\hyperlink{classLteEnbAntennaTestCase_a7637fedb08b5740e33a0675e883fa35e}{m\_x}, \hyperlink{classLteEnbAntennaTestCase_a97b29e700065abced8ae92ca354abf4a}{m\_y}, 0.0));  \textcolor{comment}{// UE}
123   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
124   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
125   mobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (positionAlloc);
126   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (allNodes);
127 
128   \textcolor{comment}{// Create Devices and install them in the Nodes (eNB and UE)}
129   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbDevs;
130   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueDevs;
131   lteHelper->\hyperlink{classns3_1_1LteHelper_a8f86e55b8b80a81732c4b2df00fb25d5}{SetSchedulerType} (\textcolor{stringliteral}{"ns3::RrFfMacScheduler"});
132   lteHelper->\hyperlink{classns3_1_1LteHelper_a38f8c7f4592b31c0f3dedb53e7909742}{SetSchedulerAttribute} (\textcolor{stringliteral}{"UlCqiFilter"}, 
      \hyperlink{classns3_1_1EnumValue}{EnumValue} (FfMacScheduler::PUSCH\_UL\_CQI));
133   lteHelper->\hyperlink{classns3_1_1LteHelper_a758494fc0edaeaf7f311c6aa1c0b42d9}{SetEnbAntennaModelType} (\textcolor{stringliteral}{"ns3::CosineAntennaModel"});
134   lteHelper->\hyperlink{classns3_1_1LteHelper_ac0c1bc4eddaf7f8711f282cb681f99c5}{SetEnbAntennaModelAttribute} (\textcolor{stringliteral}{"Orientation"}, DoubleValue (
      \hyperlink{classLteEnbAntennaTestCase_a00b3429c0d173fa3fbdc0139fd6b3c75}{m\_orientationDegrees}));
135   lteHelper->\hyperlink{classns3_1_1LteHelper_ac0c1bc4eddaf7f8711f282cb681f99c5}{SetEnbAntennaModelAttribute} (\textcolor{stringliteral}{"Beamwidth"},   DoubleValue (
      \hyperlink{classLteEnbAntennaTestCase_a7a246ef6af585fb0d99177085d5caeba}{m\_beamwidthDegrees}));
136   lteHelper->\hyperlink{classns3_1_1LteHelper_ac0c1bc4eddaf7f8711f282cb681f99c5}{SetEnbAntennaModelAttribute} (\textcolor{stringliteral}{"MaxGain"},     DoubleValue (0.0));
137 
138   enbDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbNodes);
139   ueDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ueNodes);
140 
141   \textcolor{comment}{// Attach a UE to a eNB}
142   lteHelper->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueDevs, enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
143 
144   \textcolor{comment}{// Activate the default EPS bearer}
145   \textcolor{keyword}{enum} \hyperlink{structns3_1_1EpsBearer_aecf0c67109c5eb4ec0b07226fff5885e}{EpsBearer::Qci} q = EpsBearer::NGBR\_VIDEO\_TCP\_DEFAULT;
146   \hyperlink{structns3_1_1EpsBearer}{EpsBearer} bearer (q);
147   lteHelper->\hyperlink{classns3_1_1LteHelper_ac896e16cf162e4beeaa292d39ab1b700}{ActivateDataRadioBearer} (ueDevs, bearer);
148 
149   \textcolor{comment}{// Use testing chunk processor in the PHY layer}
150   \textcolor{comment}{// It will be used to test that the SNR is as intended}
151   \hyperlink{classns3_1_1Ptr}{Ptr<LtePhy>} uePhy = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetObject<\hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ()->GetPhy ()->
      \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1LtePhy}{LtePhy}> ();
152   \hyperlink{classns3_1_1Ptr}{Ptr<LteChunkProcessor>} testDlSinr = Create<LteChunkProcessor> ();
153   \hyperlink{classns3_1_1LteSpectrumValueCatcher}{LteSpectrumValueCatcher} dlSinrCatcher;
154   testDlSinr->AddCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&LteSpectrumValueCatcher::ReportValue, &dlSinrCatcher)
      );
155   uePhy->\hyperlink{classns3_1_1LtePhy_a9560f8862545c7c5760e7f6737c5b938}{GetDownlinkSpectrumPhy} ()->AddDataSinrChunkProcessor (testDlSinr);
156 
157   \hyperlink{classns3_1_1Ptr}{Ptr<LtePhy>} enbphy = enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetObject<\hyperlink{classns3_1_1LteEnbNetDevice}{LteEnbNetDevice}> ()->GetPhy 
      ()->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1LtePhy}{LtePhy}> ();
158   \hyperlink{classns3_1_1Ptr}{Ptr<LteChunkProcessor>} testUlSinr = Create<LteChunkProcessor> ();
159   \hyperlink{classns3_1_1LteSpectrumValueCatcher}{LteSpectrumValueCatcher} ulSinrCatcher;
160   testUlSinr->AddCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&LteSpectrumValueCatcher::ReportValue, &ulSinrCatcher)
      );
161   enbphy->\hyperlink{classns3_1_1LtePhy_aa17612c41d80653ed556431eedef4304}{GetUplinkSpectrumPhy} ()->AddDataSinrChunkProcessor (testUlSinr);
162 
163 
164   \textcolor{comment}{// keep track of all path loss values in two centralized objects}
165   \hyperlink{classns3_1_1DownlinkLteGlobalPathlossDatabase}{DownlinkLteGlobalPathlossDatabase} dlPathlossDb;
166   \hyperlink{classns3_1_1UplinkLteGlobalPathlossDatabase}{UplinkLteGlobalPathlossDatabase} ulPathlossDb;
167   \textcolor{comment}{// we rely on the fact that LteHelper creates the DL channel object first, then the UL channel object,}
168   \textcolor{comment}{// hence the former will have index 0 and the latter 1}
169   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/ChannelList/0/PathLoss"},
170                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&DownlinkLteGlobalPathlossDatabase::UpdatePathloss, &
      dlPathlossDb));
171   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/ChannelList/1/PathLoss"},
172                     \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&UplinkLteGlobalPathlossDatabase::UpdatePathloss, &
      ulPathlossDb)); 
173 
174   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.035));
175   Simulator::Run ();
176 
177   \textcolor{keyword}{const} \textcolor{keywordtype}{double} enbTxPowerDbm = 30; \textcolor{comment}{// default eNB TX power over whole bandwidth}
178   \textcolor{keyword}{const} \textcolor{keywordtype}{double} ueTxPowerDbm  = 10; \textcolor{comment}{// default UE TX power over whole bandwidth}
179   \textcolor{keyword}{const} \textcolor{keywordtype}{double} ktDbm = -174;    \textcolor{comment}{// reference LTE noise PSD}
180   \textcolor{keyword}{const} \textcolor{keywordtype}{double} noisePowerDbm = ktDbm + 10 * std::log10 (25 * 180000); \textcolor{comment}{// corresponds to kT*bandwidth in
       linear units}
181   \textcolor{keyword}{const} \textcolor{keywordtype}{double} ueNoiseFigureDb = 9.0; \textcolor{comment}{// default UE noise figure}
182   \textcolor{keyword}{const} \textcolor{keywordtype}{double} enbNoiseFigureDb = 5.0; \textcolor{comment}{// default eNB noise figure}
183   \textcolor{keywordtype}{double} tolerance = (\hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb} != 0) ? std::abs (
      \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb}) * 0.001 : 0.001;
184 
185   \textcolor{comment}{// first test with SINR from LteChunkProcessor}
186   \textcolor{comment}{// this can only be done for not-too-bad SINR otherwise the measurement won't be available}
187   \textcolor{keywordtype}{double} expectedSinrDl = enbTxPowerDbm + \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb} - noisePowerDbm + ueNoiseFigureDb;
188   \textcolor{keywordflow}{if} (expectedSinrDl > 0)
189     \{
190       \textcolor{keywordtype}{double} calculatedSinrDbDl = -INFINITY;
191       \textcolor{keywordflow}{if} (dlSinrCatcher.GetValue () != 0)
192         \{
193           calculatedSinrDbDl = 10.0 * std::log10 (dlSinrCatcher.GetValue ()->operator[] (0));
194         \}      
195       \textcolor{comment}{// remember that propagation loss is 0dB}
196       \textcolor{keywordtype}{double} calculatedAntennaGainDbDl = - (enbTxPowerDbm - calculatedSinrDbDl - noisePowerDbm - 
      ueNoiseFigureDb);      
197       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (calculatedAntennaGainDbDl, 
      \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb}, tolerance, \textcolor{stringliteral}{"Wrong DL antenna gain!"});
198     \}
199   \textcolor{keywordtype}{double} expectedSinrUl = ueTxPowerDbm + \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb} - noisePowerDbm + enbNoiseFigureDb;
200   \textcolor{keywordflow}{if} (expectedSinrUl > 0)
201     \{      
202       \textcolor{keywordtype}{double} calculatedSinrDbUl = -INFINITY;
203       \textcolor{keywordflow}{if} (ulSinrCatcher.GetValue () != 0)
204         \{
205           calculatedSinrDbUl = 10.0 * std::log10 (ulSinrCatcher.GetValue ()->operator[] (0));
206         \}  
207       \textcolor{keywordtype}{double} calculatedAntennaGainDbUl = - (ueTxPowerDbm - calculatedSinrDbUl - noisePowerDbm - 
      enbNoiseFigureDb);
208       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (calculatedAntennaGainDbUl, 
      \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb}, tolerance, \textcolor{stringliteral}{"Wrong UL antenna gain!"});
209     \}
210 
211 
212   \textcolor{comment}{// repeat the same tests with the LteGlobalPathlossDatabases}
213   \textcolor{keywordtype}{double} measuredLossDl = dlPathlossDb.\hyperlink{classns3_1_1LteGlobalPathlossDatabase_a06da4a86a140c90b2dad5f5fad9868f3}{GetPathloss} (1, 1);
214   \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (measuredLossDl, -
      \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb}, tolerance, \textcolor{stringliteral}{"Wrong DL loss!"});
215   \textcolor{keywordtype}{double} measuredLossUl = ulPathlossDb.\hyperlink{classns3_1_1LteGlobalPathlossDatabase_a06da4a86a140c90b2dad5f5fad9868f3}{GetPathloss} (1, 1);
216   \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (measuredLossUl, -
      \hyperlink{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{m\_antennaGainDb}, tolerance, \textcolor{stringliteral}{"Wrong UL loss!"});
217 
218   
219   Simulator::Destroy ();
220 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!m\+\_\+antenna\+Gain\+Db@{m\+\_\+antenna\+Gain\+Db}}
\index{m\+\_\+antenna\+Gain\+Db@{m\+\_\+antenna\+Gain\+Db}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+antenna\+Gain\+Db}{m_antennaGainDb}}]{\setlength{\rightskip}{0pt plus 5cm}double Lte\+Enb\+Antenna\+Test\+Case\+::m\+\_\+antenna\+Gain\+Db\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}{}\label{classLteEnbAntennaTestCase_a0fa6f3b1360dea56b4931cda06709952}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!m\+\_\+beamwidth\+Degrees@{m\+\_\+beamwidth\+Degrees}}
\index{m\+\_\+beamwidth\+Degrees@{m\+\_\+beamwidth\+Degrees}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+beamwidth\+Degrees}{m_beamwidthDegrees}}]{\setlength{\rightskip}{0pt plus 5cm}double Lte\+Enb\+Antenna\+Test\+Case\+::m\+\_\+beamwidth\+Degrees\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteEnbAntennaTestCase_a7a246ef6af585fb0d99177085d5caeba}{}\label{classLteEnbAntennaTestCase_a7a246ef6af585fb0d99177085d5caeba}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!m\+\_\+orientation\+Degrees@{m\+\_\+orientation\+Degrees}}
\index{m\+\_\+orientation\+Degrees@{m\+\_\+orientation\+Degrees}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+orientation\+Degrees}{m_orientationDegrees}}]{\setlength{\rightskip}{0pt plus 5cm}double Lte\+Enb\+Antenna\+Test\+Case\+::m\+\_\+orientation\+Degrees\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteEnbAntennaTestCase_a00b3429c0d173fa3fbdc0139fd6b3c75}{}\label{classLteEnbAntennaTestCase_a00b3429c0d173fa3fbdc0139fd6b3c75}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!m\+\_\+x@{m\+\_\+x}}
\index{m\+\_\+x@{m\+\_\+x}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+x}{m_x}}]{\setlength{\rightskip}{0pt plus 5cm}double Lte\+Enb\+Antenna\+Test\+Case\+::m\+\_\+x\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteEnbAntennaTestCase_a7637fedb08b5740e33a0675e883fa35e}{}\label{classLteEnbAntennaTestCase_a7637fedb08b5740e33a0675e883fa35e}
\index{Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}!m\+\_\+y@{m\+\_\+y}}
\index{m\+\_\+y@{m\+\_\+y}!Lte\+Enb\+Antenna\+Test\+Case@{Lte\+Enb\+Antenna\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+y}{m_y}}]{\setlength{\rightskip}{0pt plus 5cm}double Lte\+Enb\+Antenna\+Test\+Case\+::m\+\_\+y\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteEnbAntennaTestCase_a97b29e700065abced8ae92ca354abf4a}{}\label{classLteEnbAntennaTestCase_a97b29e700065abced8ae92ca354abf4a}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lte/test/\hyperlink{test-lte-antenna_8cc}{test-\/lte-\/antenna.\+cc}\end{DoxyCompactItemize}
