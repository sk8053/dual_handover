\hypertarget{classLenaDlCtrlPhyErrorModelTestCase}{}\section{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case Class Reference}
\label{classLenaDlCtrlPhyErrorModelTestCase}\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}


{\ttfamily \#include $<$lte-\/test-\/phy-\/error-\/model.\+h$>$}



Inheritance diagram for Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a616ff78c8dfa480cd0d78e2b1957f9b7}{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case} (uint16\+\_\+t n\+Enb, uint16\+\_\+t dist, double bler\+Ref, uint16\+\_\+t tolerance\+Rx\+Packets, \hyperlink{classns3_1_1Time}{Time} stats\+Start\+Time, uint32\+\_\+t rng\+Run)
\item 
virtual \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad9f5c4c31273d42ac0a4bd09935bfa9a}{$\sim$\+Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a1fb7c0a2adfe1083d7e0883b866b0954}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::string \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ab27b9d64ff863605eb92e16ecffe6f8b}{Build\+Name\+String} (uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint32\+\_\+t rng\+Run)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a761b34bd4869ebf6d1a5bd78da392fbb}{m\+\_\+n\+Enb}
\item 
uint16\+\_\+t \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aa8b1b44353ecde326522c4cbe599aed1}{m\+\_\+dist}
\item 
double \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a3395f76e96e52bb60a7b0c6a5259019d}{m\+\_\+bler\+Ref}
\item 
uint16\+\_\+t \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aeea53cbe22fe11495e338820c8bd1515}{m\+\_\+tolerance\+Rx\+Packets}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad4a759a508657b7e2ea734e48e5cf387}{m\+\_\+stats\+Start\+Time}
\begin{DoxyCompactList}\small\item\em Extra time in the beginning of simulation to allow R\+RC connection establishment + S\+RS. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad755d559a1b44822080b2698bcc85fc1}{m\+\_\+rng\+Run}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case(uint16\+\_\+t n\+Enb, uint16\+\_\+t dist, double bler\+Ref, uint16\+\_\+t tolerance\+Rx\+Packets, Time stats\+Start\+Time, uint32\+\_\+t rng\+Run)}{LenaDlCtrlPhyErrorModelTestCase(uint16_t nEnb, uint16_t dist, double blerRef, uint16_t toleranceRxPackets, Time statsStartTime, uint32_t rngRun)}}]{\setlength{\rightskip}{0pt plus 5cm}Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::\+Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{n\+Enb, }
\item[{uint16\+\_\+t}]{dist, }
\item[{double}]{bler\+Ref, }
\item[{uint16\+\_\+t}]{tolerance\+Rx\+Packets, }
\item[{{\bf Time}}]{stats\+Start\+Time, }
\item[{uint32\+\_\+t}]{rng\+Run}
\end{DoxyParamCaption}
)}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_a616ff78c8dfa480cd0d78e2b1957f9b7}{}\label{classLenaDlCtrlPhyErrorModelTestCase_a616ff78c8dfa480cd0d78e2b1957f9b7}

\begin{DoxyCode}
301   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ab27b9d64ff863605eb92e16ecffe6f8b}{BuildNameString} (nEnb, dist, rngRun)),
302     \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a761b34bd4869ebf6d1a5bd78da392fbb}{m\_nEnb} (nEnb),
303     \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aa8b1b44353ecde326522c4cbe599aed1}{m\_dist} (dist),
304     \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a3395f76e96e52bb60a7b0c6a5259019d}{m\_blerRef} (blerRef),
305     \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aeea53cbe22fe11495e338820c8bd1515}{m\_toleranceRxPackets} (toleranceRxPackets),
306     \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad4a759a508657b7e2ea734e48e5cf387}{m\_statsStartTime} (statsStartTime),
307     \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad755d559a1b44822080b2698bcc85fc1}{m\_rngRun} (rngRun)
308 \{
309 \}
\end{DoxyCode}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!````~Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{$\sim$\+Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\index{````~Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{$\sim$\+Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case()}{~LenaDlCtrlPhyErrorModelTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::$\sim$\+Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_ad9f5c4c31273d42ac0a4bd09935bfa9a}{}\label{classLenaDlCtrlPhyErrorModelTestCase_ad9f5c4c31273d42ac0a4bd09935bfa9a}

\begin{DoxyCode}
312 \{
313 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!Build\+Name\+String@{Build\+Name\+String}}
\index{Build\+Name\+String@{Build\+Name\+String}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Build\+Name\+String(uint16\+\_\+t n\+User, uint16\+\_\+t dist, uint32\+\_\+t rng\+Run)}{BuildNameString(uint16_t nUser, uint16_t dist, uint32_t rngRun)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::\+Build\+Name\+String (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{n\+User, }
\item[{uint16\+\_\+t}]{dist, }
\item[{uint32\+\_\+t}]{rng\+Run}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_ab27b9d64ff863605eb92e16ecffe6f8b}{}\label{classLenaDlCtrlPhyErrorModelTestCase_ab27b9d64ff863605eb92e16ecffe6f8b}

\begin{DoxyCode}
291 \{
292   std::ostringstream oss;
293   oss << \textcolor{stringliteral}{"DlCtrlPhyErrorModel "} << nEnb << \textcolor{stringliteral}{" eNBs, distance "} << dist << \textcolor{stringliteral}{" m, RngRun "} << rngRun;
294   \textcolor{keywordflow}{return} oss.str ();
295 \}
\end{DoxyCode}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_a1fb7c0a2adfe1083d7e0883b866b0954}{}\label{classLenaDlCtrlPhyErrorModelTestCase_a1fb7c0a2adfe1083d7e0883b866b0954}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
317 \{
318   
319   \textcolor{keywordtype}{double} \hyperlink{lte__cqi__generation_8m_a197619a3539acfc577325d6e41b6ce95}{ber} = 0.03;
320   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteAmc::Ber"}, DoubleValue (ber));
321   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteAmc::AmcModel"}, \hyperlink{classns3_1_1EnumValue}{EnumValue} (LteAmc::PiroEW2010));
322   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::CtrlErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
323   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::DataErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
324   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::RrFfMacScheduler::HarqEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
325   \hyperlink{group__config_ga0e12663a7bd119b65d0a219a578f2a3c}{Config::SetGlobal} (\textcolor{stringliteral}{"RngRun"}, IntegerValue (\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad755d559a1b44822080b2698bcc85fc1}{m\_rngRun}));
326 
327   \textcolor{comment}{//Disable Uplink Power Control}
328   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteUePhy::EnableUplinkPowerControl"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
329 
330   \textcolor{comment}{/*}
331 \textcolor{comment}{   * Initialize Simulation Scenario: 1 eNB and m\_nUser UEs}
332 \textcolor{comment}{   */}
333 
334   int64\_t stream = 1;
335   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lena = CreateObject<LteHelper> ();
336   
337   \textcolor{comment}{// Create Nodes: eNodeB and UE}
338   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
339   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
340   enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a761b34bd4869ebf6d1a5bd78da392fbb}{m\_nEnb});
341   ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
342   
343   \textcolor{comment}{// Install Mobility Model}
344   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
345   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
346   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (enbNodes);
347   BuildingsHelper::Install (enbNodes);
348   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
349   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (ueNodes);
350   BuildingsHelper::Install (ueNodes);
351   
352   \textcolor{comment}{// remove random shadowing component}
353   lena->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PathlossModel"}, StringValue (\textcolor{stringliteral}{"ns3::HybridBuildingsPropagationLossModel"})
      );
354   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaOutdoor"}, DoubleValue (0.0));
355   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaIndoor"}, DoubleValue (0.0));
356   lena->\hyperlink{classns3_1_1LteHelper_aa96ebbd6845ca61c2b5e08e84481a348}{SetPathlossModelAttribute} (\textcolor{stringliteral}{"ShadowSigmaExtWalls"}, DoubleValue (0.0));
357   
358   \textcolor{comment}{// Create Devices and install them in the Nodes (eNB and UE)}
359   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbDevs;
360   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueDevs;
361   lena->\hyperlink{classns3_1_1LteHelper_a8f86e55b8b80a81732c4b2df00fb25d5}{SetSchedulerType} (\textcolor{stringliteral}{"ns3::RrFfMacScheduler"});
362   lena->\hyperlink{classns3_1_1LteHelper_a38f8c7f4592b31c0f3dedb53e7909742}{SetSchedulerAttribute} (\textcolor{stringliteral}{"UlCqiFilter"}, \hyperlink{classns3_1_1EnumValue}{EnumValue} (
      FfMacScheduler::PUSCH\_UL\_CQI));
363   
364   enbDevs = lena->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbNodes);
365   stream += lena->\hyperlink{classns3_1_1LteHelper_ae90d941582aa49a1b28c9301ece35b07}{AssignStreams} (enbDevs, stream);
366   ueDevs = lena->\hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ueNodes);
367   stream += lena->\hyperlink{classns3_1_1LteHelper_ae90d941582aa49a1b28c9301ece35b07}{AssignStreams} (ueDevs, stream);
368   
369   \textcolor{comment}{// Attach a UE to one eNB (the others are interfering ones)}
370   lena->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueDevs, enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
371   
372   \textcolor{comment}{// Activate an EPS bearer}
373   \textcolor{keyword}{enum} \hyperlink{structns3_1_1EpsBearer_aecf0c67109c5eb4ec0b07226fff5885e}{EpsBearer::Qci} q = EpsBearer::GBR\_CONV\_VOICE;
374   \hyperlink{structns3_1_1EpsBearer}{EpsBearer} bearer (q);
375   lena->\hyperlink{classns3_1_1LteHelper_ac896e16cf162e4beeaa292d39ab1b700}{ActivateDataRadioBearer} (ueDevs, bearer);
376   
377   \textcolor{comment}{// Set UEs' position and power}
378   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a761b34bd4869ebf6d1a5bd78da392fbb}{m\_nEnb}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
379     \{
380       \textcolor{comment}{// place the HeNB over the default rooftop level (20 mt.)}
381       \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} mm = enbNodes.Get (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1MobilityModel}{MobilityModel}> ();
382       mm->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0.0, 0.0, 30.0));
383       \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbNetDevice>} lteEnbDev = enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->GetObject<
      \hyperlink{classns3_1_1LteEnbNetDevice}{LteEnbNetDevice}> ();
384       \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbPhy>} enbPhy = lteEnbDev->\hyperlink{classns3_1_1LteEnbNetDevice_a58db72130e0740f16a5e03b22e4a10a4}{GetPhy} ();
385       enbPhy->SetAttribute (\textcolor{stringliteral}{"TxPower"}, DoubleValue (43.0));
386       enbPhy->SetAttribute (\textcolor{stringliteral}{"NoiseFigure"}, DoubleValue (5.0));
387     \}
388   
389   \textcolor{comment}{// Set UEs' position and power}
390   \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} mm = ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0)->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1MobilityModel}{MobilityModel}> ();
391   mm->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aa8b1b44353ecde326522c4cbe599aed1}{m\_dist}, 0.0, 1.0));
392   \hyperlink{classns3_1_1Ptr}{Ptr<LteUeNetDevice>} lteUeDev = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetObject<
      \hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ();
393   \hyperlink{classns3_1_1Ptr}{Ptr<LteUePhy>} uePhy = lteUeDev->\hyperlink{classns3_1_1LteUeNetDevice_a2a9940a1e457a8bf3dae87fed4199c7a}{GetPhy} ();
394   uePhy->SetAttribute (\textcolor{stringliteral}{"TxPower"}, DoubleValue (23.0));
395   uePhy->SetAttribute (\textcolor{stringliteral}{"NoiseFigure"}, DoubleValue (9.0));
396   
397   \hyperlink{classns3_1_1Time}{Time} statsDuration = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0);
398   Simulator::Stop (\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad4a759a508657b7e2ea734e48e5cf387}{m\_statsStartTime} + statsDuration - \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0001));
399 
400   lena->\hyperlink{classns3_1_1LteHelper_abadfdd04d30b261e9b6f0846b4784928}{EnableRlcTraces} ();
401   \hyperlink{classns3_1_1Ptr}{Ptr<RadioBearerStatsCalculator>} rlcStats = lena->
      \hyperlink{classns3_1_1LteHelper_a6eb438ccf69642e3863adea4991fa2ca}{GetRlcStats} ();
402   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"StartTime"}, TimeValue (\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_ad4a759a508657b7e2ea734e48e5cf387}{m\_statsStartTime}));
403   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"EpochDuration"}, TimeValue (statsDuration));
404 
405   Simulator::Run ();
406   
407   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tTest downlink control channels (PCFICH+PDCCH)"});
408   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Test with "} << m\_nEnb << \textcolor{stringliteral}{" eNB(s) at distance "} << 
      \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aa8b1b44353ecde326522c4cbe599aed1}{m\_dist} << \textcolor{stringliteral}{" expected BLER "} << \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a3395f76e96e52bb60a7b0c6a5259019d}{m\_blerRef});
409   \textcolor{keywordtype}{int} nUser = 1;
410   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nUser; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
411     \{
412       \textcolor{comment}{// get the imsi}
413       uint64\_t imsi = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->GetObject<\hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ()->GetImsi ();
414       uint8\_t lcId = 3;
415       \textcolor{keywordtype}{double} dlRxPackets = rlcStats->\hyperlink{classns3_1_1RadioBearerStatsCalculator_a164d36dc82ed7dae2f4d748da502589a}{GetDlRxPackets} (imsi, lcId);
416       \textcolor{keywordtype}{double} dlTxPackets = rlcStats->\hyperlink{classns3_1_1RadioBearerStatsCalculator_a55f9b9c664e1389ad9edf704e385299c}{GetDlTxPackets} (imsi, lcId);
417       \textcolor{keywordtype}{double} dlBler = 1.0 - (dlRxPackets/dlTxPackets);
418       \textcolor{keywordtype}{double} expectedDlRxPackets = dlTxPackets -dlTxPackets*\hyperlink{classLenaDlCtrlPhyErrorModelTestCase_a3395f76e96e52bb60a7b0c6a5259019d}{m\_blerRef};
419       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tUser "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" imsi "} << imsi << \textcolor{stringliteral}{" DOWNLINK"}
420                    << \textcolor{stringliteral}{" pkts rx "} << dlRxPackets << \textcolor{stringliteral}{" tx "} << dlTxPackets
421                    << \textcolor{stringliteral}{" BLER "} << dlBler << \textcolor{stringliteral}{" Err "} << std::fabs (m\_blerRef - dlBler)
422                    << \textcolor{stringliteral}{" expected rx "} << expectedDlRxPackets
423                    << \textcolor{stringliteral}{" difference "} << std::abs (expectedDlRxPackets - dlRxPackets)
424                    << \textcolor{stringliteral}{" tolerance "} << \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aeea53cbe22fe11495e338820c8bd1515}{m\_toleranceRxPackets});
425       \hyperlink{unused_8h_a3ba03ad859378e9f01285afb60f0e3ab}{NS\_UNUSED} (dlBler);
426 
427       \textcolor{comment}{// sanity check for whether the tx packets reported by the stats are correct}
428       \textcolor{comment}{// we expect one packet per TTI}
429       \textcolor{keywordtype}{double} expectedDlTxPackets = statsDuration.\hyperlink{classns3_1_1Time_aba3428a8b6c4c8d9014ce44145081f34}{GetMilliSeconds} ();
430       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (dlTxPackets, expectedDlTxPackets, 
      expectedDlTxPackets * 0.005, 
431                                  \textcolor{stringliteral}{" too different DL TX packets reported"});
432 
433       \textcolor{comment}{// this is the main test condition: check that the RX packets are within the expected range}
434       \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (dlRxPackets, expectedDlRxPackets, 
      \hyperlink{classLenaDlCtrlPhyErrorModelTestCase_aeea53cbe22fe11495e338820c8bd1515}{m\_toleranceRxPackets},
435                                  \textcolor{stringliteral}{"too different DL RX packets reported"});
436 
437     \}
438   
439   Simulator::Destroy ();
440 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+bler\+Ref@{m\+\_\+bler\+Ref}}
\index{m\+\_\+bler\+Ref@{m\+\_\+bler\+Ref}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+bler\+Ref}{m_blerRef}}]{\setlength{\rightskip}{0pt plus 5cm}double Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+bler\+Ref\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_a3395f76e96e52bb60a7b0c6a5259019d}{}\label{classLenaDlCtrlPhyErrorModelTestCase_a3395f76e96e52bb60a7b0c6a5259019d}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+dist@{m\+\_\+dist}}
\index{m\+\_\+dist@{m\+\_\+dist}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+dist}{m_dist}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+dist\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_aa8b1b44353ecde326522c4cbe599aed1}{}\label{classLenaDlCtrlPhyErrorModelTestCase_aa8b1b44353ecde326522c4cbe599aed1}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+n\+Enb@{m\+\_\+n\+Enb}}
\index{m\+\_\+n\+Enb@{m\+\_\+n\+Enb}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+n\+Enb}{m_nEnb}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+n\+Enb\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_a761b34bd4869ebf6d1a5bd78da392fbb}{}\label{classLenaDlCtrlPhyErrorModelTestCase_a761b34bd4869ebf6d1a5bd78da392fbb}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+rng\+Run@{m\+\_\+rng\+Run}}
\index{m\+\_\+rng\+Run@{m\+\_\+rng\+Run}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+rng\+Run}{m_rngRun}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+rng\+Run\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_ad755d559a1b44822080b2698bcc85fc1}{}\label{classLenaDlCtrlPhyErrorModelTestCase_ad755d559a1b44822080b2698bcc85fc1}
\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+stats\+Start\+Time@{m\+\_\+stats\+Start\+Time}}
\index{m\+\_\+stats\+Start\+Time@{m\+\_\+stats\+Start\+Time}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+stats\+Start\+Time}{m_statsStartTime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+stats\+Start\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_ad4a759a508657b7e2ea734e48e5cf387}{}\label{classLenaDlCtrlPhyErrorModelTestCase_ad4a759a508657b7e2ea734e48e5cf387}


Extra time in the beginning of simulation to allow R\+RC connection establishment + S\+RS. 

\index{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}!m\+\_\+tolerance\+Rx\+Packets@{m\+\_\+tolerance\+Rx\+Packets}}
\index{m\+\_\+tolerance\+Rx\+Packets@{m\+\_\+tolerance\+Rx\+Packets}!Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case@{Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+tolerance\+Rx\+Packets}{m_toleranceRxPackets}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Lena\+Dl\+Ctrl\+Phy\+Error\+Model\+Test\+Case\+::m\+\_\+tolerance\+Rx\+Packets\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLenaDlCtrlPhyErrorModelTestCase_aeea53cbe22fe11495e338820c8bd1515}{}\label{classLenaDlCtrlPhyErrorModelTestCase_aeea53cbe22fe11495e338820c8bd1515}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/test/\hyperlink{lte-test-phy-error-model_8h}{lte-\/test-\/phy-\/error-\/model.\+h}\item 
lte/test/\hyperlink{lte-test-phy-error-model_8cc}{lte-\/test-\/phy-\/error-\/model.\+cc}\end{DoxyCompactItemize}
