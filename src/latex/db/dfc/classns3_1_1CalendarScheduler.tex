\hypertarget{classns3_1_1CalendarScheduler}{}\section{ns3\+:\+:Calendar\+Scheduler Class Reference}
\label{classns3_1_1CalendarScheduler}\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}


a calendar queue event scheduler  




{\ttfamily \#include $<$calendar-\/scheduler.\+h$>$}



Inheritance diagram for ns3\+:\+:Calendar\+Scheduler\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Calendar\+Scheduler\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1CalendarScheduler_a8fe003db517575b600aeaed7a02a8a18}{Calendar\+Scheduler} ()
\item 
virtual \hyperlink{classns3_1_1CalendarScheduler_ab50741c4abf454c217739370ca2e931d}{$\sim$\+Calendar\+Scheduler} ()
\item 
virtual void \hyperlink{classns3_1_1CalendarScheduler_aaf70c05e7468c8c232d4a309ce7c52c3}{Insert} (const \hyperlink{structns3_1_1Scheduler_1_1Event}{Scheduler\+::\+Event} \&ev)
\item 
virtual bool \hyperlink{classns3_1_1CalendarScheduler_a3b77785ce158cd5c3979acf5ed0ae7a0}{Is\+Empty} (void) const 
\item 
virtual \hyperlink{structns3_1_1Scheduler_1_1Event}{Scheduler\+::\+Event} \hyperlink{classns3_1_1CalendarScheduler_ab96cc3ce6187e5cf2f28fbcc944f6b0c}{Peek\+Next} (void) const 
\item 
virtual \hyperlink{structns3_1_1Scheduler_1_1Event}{Scheduler\+::\+Event} \hyperlink{classns3_1_1CalendarScheduler_ad86df04ee956851c73dfcc38d0fb3ac6}{Remove\+Next} (void)
\item 
virtual void \hyperlink{classns3_1_1CalendarScheduler_aee9db8a165f257bc94b51ffedc9b98d8}{Remove} (const \hyperlink{structns3_1_1Scheduler_1_1Event}{Scheduler\+::\+Event} \&ev)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1CalendarScheduler_a862815eb693b8db0f2d53f7eb9eb4ca2}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1Scheduler_1_1Event}{Scheduler\+::\+Event} $>$ \hyperlink{classns3_1_1CalendarScheduler_a92e721d4162831c1f0c386034930c967}{Bucket}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1CalendarScheduler_a6ad5ca9624349ac1a4a3ce565333385f}{Resize\+Up} (void)
\item 
void \hyperlink{classns3_1_1CalendarScheduler_ad177bb1ae48629ed93d2ffc55aa52312}{Resize\+Down} (void)
\item 
void \hyperlink{classns3_1_1CalendarScheduler_ab626f95ab5482e5e6e2a9d5f74363d6c}{Resize} (uint32\+\_\+t new\+Size)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_aa4c7262fde9711cde5b52dfe15dfacbe}{Calculate\+New\+Width} (void)
\item 
void \hyperlink{classns3_1_1CalendarScheduler_a3bf6cdaed8ea65882707fe6eba13eedf}{Init} (uint32\+\_\+t n\+Buckets, uint64\+\_\+t width, uint64\+\_\+t start\+Prio)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_ad60541150596324cac253040af4f8880}{Hash} (uint64\+\_\+t key) const 
\item 
void \hyperlink{classns3_1_1CalendarScheduler_af38a66901da04a652524853488c527a8}{Print\+Info} (void)
\item 
void \hyperlink{classns3_1_1CalendarScheduler_a0261b81664d13feb411d008a1e1bcf9b}{Do\+Resize} (uint32\+\_\+t new\+Size, uint32\+\_\+t new\+Width)
\item 
\hyperlink{structns3_1_1Scheduler_1_1Event}{Scheduler\+::\+Event} \hyperlink{classns3_1_1CalendarScheduler_a42c114e7a4bb68943b63fa9dfc841610}{Do\+Remove\+Next} (void)
\item 
void \hyperlink{classns3_1_1CalendarScheduler_a89cf4c06b7763187a0155320013cf1d1}{Do\+Insert} (const \hyperlink{structns3_1_1Scheduler_1_1Event}{Scheduler\+::\+Event} \&ev)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1CalendarScheduler_a92e721d4162831c1f0c386034930c967}{Bucket} $\ast$ \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\+\_\+buckets}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\+\_\+n\+Buckets}
\item 
uint64\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\+\_\+width}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\+\_\+last\+Bucket}
\item 
uint64\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\+\_\+bucket\+Top}
\item 
uint64\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{m\+\_\+last\+Prio}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\+\_\+q\+Size}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
a calendar queue event scheduler 

This event scheduler is a direct implementation of the algorithm known as a calendar queue, first published in 1988 in \char`\"{}\+Calendar Queues\+: A Fast O(1) Priority Queue Implementation for
the Simulation Event Set Problem\char`\"{} by Randy Brown. There are many refinements published later but this class implements the original algorithm (to the best of my knowledge).

\begin{DoxyNote}{Note}
This queue is much slower than I expected (much slower than the std\+::map queue) and this seems to be because the original resizing policy is horribly bad. This is most likely the reason why there have been so many variations published which all slightly tweak the resizing heuristics to obtain a better distribution of events across buckets. 
\end{DoxyNote}


\subsection{Member Typedef Documentation}
\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Bucket@{Bucket}}
\index{Bucket@{Bucket}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Bucket}{Bucket}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<${\bf Scheduler\+::\+Event}$>$ {\bf ns3\+::\+Calendar\+Scheduler\+::\+Bucket}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a92e721d4162831c1f0c386034930c967}{}\label{classns3_1_1CalendarScheduler_a92e721d4162831c1f0c386034930c967}
Calendar bucket type\+: a list of Events. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Calendar\+Scheduler@{Calendar\+Scheduler}}
\index{Calendar\+Scheduler@{Calendar\+Scheduler}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Calendar\+Scheduler()}{CalendarScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Calendar\+Scheduler\+::\+Calendar\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1CalendarScheduler_a8fe003db517575b600aeaed7a02a8a18}{}\label{classns3_1_1CalendarScheduler_a8fe003db517575b600aeaed7a02a8a18}
Constructor. 
\begin{DoxyCode}
53 \{
54   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
55   \hyperlink{classns3_1_1CalendarScheduler_a3bf6cdaed8ea65882707fe6eba13eedf}{Init} (2, 1, 0);
56   \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize} = 0;
57 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!````~Calendar\+Scheduler@{$\sim$\+Calendar\+Scheduler}}
\index{````~Calendar\+Scheduler@{$\sim$\+Calendar\+Scheduler}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{$\sim$\+Calendar\+Scheduler()}{~CalendarScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Calendar\+Scheduler\+::$\sim$\+Calendar\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CalendarScheduler_ab50741c4abf454c217739370ca2e931d}{}\label{classns3_1_1CalendarScheduler_ab50741c4abf454c217739370ca2e931d}
Destructor. 
\begin{DoxyCode}
59 \{
60   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
61   \textcolor{keyword}{delete} [] \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets};
62   \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets} = 0;
63 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Calculate\+New\+Width@{Calculate\+New\+Width}}
\index{Calculate\+New\+Width@{Calculate\+New\+Width}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Calculate\+New\+Width(void)}{CalculateNewWidth(void)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Calendar\+Scheduler\+::\+Calculate\+New\+Width (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_aa4c7262fde9711cde5b52dfe15dfacbe}{}\label{classns3_1_1CalendarScheduler_aa4c7262fde9711cde5b52dfe15dfacbe}
Compute the new bucket size, based on up to the first 25 entries.

\begin{DoxyReturn}{Returns}
The new width. 
\end{DoxyReturn}

\begin{DoxyCode}
279 \{
280   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
281 
282   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize} < 2)
283     \{
284       \textcolor{keywordflow}{return} 1;
285     \}
286   uint32\_t nSamples;
287   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize} <= 5)
288     \{
289       nSamples = \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize};
290     \}
291   \textcolor{keywordflow}{else}
292     \{
293       nSamples = 5 + \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize} / 10;
294     \}
295   \textcolor{keywordflow}{if} (nSamples > 25)
296     \{
297       nSamples = 25;
298     \}
299 
300   \textcolor{comment}{// we gather the first nSamples from the queue}
301   std::list<Scheduler::Event> samples;
302   \textcolor{comment}{// save state}
303   uint32\_t lastBucket = \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket};
304   uint64\_t bucketTop = \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop};
305   uint64\_t lastPrio = \hyperlink{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{m\_lastPrio};
306 
307   \textcolor{comment}{// gather requested events}
308   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nSamples; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
309     \{
310       samples.push\_back (\hyperlink{classns3_1_1CalendarScheduler_a42c114e7a4bb68943b63fa9dfc841610}{DoRemoveNext} ());
311     \}
312   \textcolor{comment}{// put them back}
313   \textcolor{keywordflow}{for} (std::list<Scheduler::Event>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = samples.begin ();
314        \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != samples.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
315     \{
316       \hyperlink{classns3_1_1CalendarScheduler_a89cf4c06b7763187a0155320013cf1d1}{DoInsert} (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
317     \}
318 
319   \textcolor{comment}{// restore state.}
320   \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket} = lastBucket;
321   \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop} = bucketTop;
322   \hyperlink{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{m\_lastPrio} = lastPrio;
323 
324   \textcolor{comment}{// finally calculate inter-time average over samples.}
325   uint64\_t totalSeparation = 0;
326   std::list<Scheduler::Event>::const\_iterator end = samples.end ();
327   std::list<Scheduler::Event>::const\_iterator cur = samples.begin ();
328   std::list<Scheduler::Event>::const\_iterator next = cur;
329   next++;
330   \textcolor{keywordflow}{while} (next != end)
331     \{
332       totalSeparation += next->key.m\_ts - cur->key.m\_ts;
333       cur++;
334       next++;
335     \}
336   uint64\_t twiceAvg = totalSeparation / (nSamples - 1) * 2;
337   totalSeparation = 0;
338   cur = samples.begin ();
339   next = cur;
340   next++;
341   \textcolor{keywordflow}{while} (next != end)
342     \{
343       uint64\_t diff = next->key.m\_ts - cur->key.m\_ts;
344       \textcolor{keywordflow}{if} (diff <= twiceAvg)
345         \{
346           totalSeparation += diff;
347         \}
348       cur++;
349       next++;
350     \}
351 
352   totalSeparation *= 3;
353   totalSeparation = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (totalSeparation, (uint64\_t)1);
354   \textcolor{keywordflow}{return} totalSeparation;
355 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Do\+Insert@{Do\+Insert}}
\index{Do\+Insert@{Do\+Insert}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Insert(const Scheduler\+::\+Event \&ev)}{DoInsert(const Scheduler::Event &ev)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Do\+Insert (
\begin{DoxyParamCaption}
\item[{const {\bf Scheduler\+::\+Event} \&}]{ev}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a89cf4c06b7763187a0155320013cf1d1}{}\label{classns3_1_1CalendarScheduler_a89cf4c06b7763187a0155320013cf1d1}
Insert a new event in to the correct bucket.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ev} & The new Event. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
101 \{
102   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << ev.key.m\_ts << ev.key.m\_uid);
103   \textcolor{comment}{// calculate bucket index.}
104   uint32\_t bucket = \hyperlink{classns3_1_1CalendarScheduler_ad60541150596324cac253040af4f8880}{Hash} (ev.key.m\_ts);
105   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"insert in bucket="} << bucket);
106 
107   \textcolor{comment}{// insert in bucket list.}
108   Bucket::iterator end = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[bucket].end ();
109   \textcolor{keywordflow}{for} (Bucket::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[bucket].begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != end; ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
110     \{
111       \textcolor{keywordflow}{if} (ev.key < \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->key)
112         \{
113           \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[bucket].insert (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}, ev);
114           \textcolor{keywordflow}{return};
115         \}
116     \}
117   \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[bucket].push\_back (ev);
118 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Do\+Remove\+Next@{Do\+Remove\+Next}}
\index{Do\+Remove\+Next@{Do\+Remove\+Next}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Remove\+Next(void)}{DoRemoveNext(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Scheduler\+::\+Event} ns3\+::\+Calendar\+Scheduler\+::\+Do\+Remove\+Next (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a42c114e7a4bb68943b63fa9dfc841610}{}\label{classns3_1_1CalendarScheduler_a42c114e7a4bb68943b63fa9dfc841610}
Remove the earliest event.

\begin{DoxyReturn}{Returns}
The earliest event. 
\end{DoxyReturn}

\begin{DoxyCode}
171 \{
172   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
173 
174   uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket};
175   uint64\_t bucketTop = \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop};
176   int32\_t minBucket = -1;
177   Scheduler::EventKey minKey;
178   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT}(!\hyperlink{classns3_1_1CalendarScheduler_a3b77785ce158cd5c3979acf5ed0ae7a0}{IsEmpty}());
179   minKey.m\_ts = uint64\_t(-int64\_t(1));
180   minKey.m\_uid = 0;
181   minKey.m\_context = 0xffffffff;
182   \textcolor{keywordflow}{do}
183     \{
184       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[i].empty ())
185         \{
186           Scheduler::Event next = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].front ();
187           \textcolor{keywordflow}{if} (next.key.m\_ts < bucketTop)
188             \{
189               \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket} = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
190               \hyperlink{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{m\_lastPrio} = next.key.m\_ts;
191               \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop} = bucketTop;
192               \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].pop\_front ();
193               \textcolor{keywordflow}{return} next;
194             \}
195           \textcolor{keywordflow}{if} (next.key < minKey)
196             \{
197               minKey = next.key;
198               minBucket = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
199             \}
200         \}
201       i++;
202       i %= \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets};
203       bucketTop += \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\_width};
204     \}
205   \textcolor{keywordflow}{while} (i != \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket});
206 
207   \hyperlink{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{m\_lastPrio} = minKey.m\_ts;
208   \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket} = \hyperlink{classns3_1_1CalendarScheduler_ad60541150596324cac253040af4f8880}{Hash} (minKey.m\_ts);
209   \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop} = (minKey.m\_ts / \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\_width} + 1) * \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\_width};
210   Scheduler::Event next = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[minBucket].front();
211   \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[minBucket].pop\_front ();
212 
213   \textcolor{keywordflow}{return} next;
214 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Do\+Resize@{Do\+Resize}}
\index{Do\+Resize@{Do\+Resize}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Resize(uint32\+\_\+t new\+Size, uint32\+\_\+t new\+Width)}{DoResize(uint32_t newSize, uint32_t newWidth)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Do\+Resize (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{new\+Size, }
\item[{uint32\+\_\+t}]{new\+Width}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a0261b81664d13feb411d008a1e1bcf9b}{}\label{classns3_1_1CalendarScheduler_a0261b81664d13feb411d008a1e1bcf9b}
Resize the number of buckets and width.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em new\+Size} & The number of buckets. \\
\hline
\mbox{\tt in}  & {\em new\+Width} & The size of the new buckets. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
358 \{
359   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << newSize << newWidth);
360 
361   \hyperlink{classns3_1_1CalendarScheduler_a92e721d4162831c1f0c386034930c967}{Bucket} *oldBuckets = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets};
362   uint32\_t oldNBuckets = \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets};
363   \hyperlink{classns3_1_1CalendarScheduler_a3bf6cdaed8ea65882707fe6eba13eedf}{Init} (newSize, newWidth, \hyperlink{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{m\_lastPrio});
364 
365   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < oldNBuckets; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
366     \{
367       Bucket::iterator end = oldBuckets[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].end ();
368       \textcolor{keywordflow}{for} (Bucket::iterator j = oldBuckets[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].begin (); j != end; ++j)
369         \{
370           \hyperlink{classns3_1_1CalendarScheduler_a89cf4c06b7763187a0155320013cf1d1}{DoInsert} (*j);
371         \}
372     \}
373   \textcolor{keyword}{delete} [] oldBuckets;
374 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Calendar\+Scheduler\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1CalendarScheduler_a862815eb693b8db0f2d53f7eb9eb4ca2}{}\label{classns3_1_1CalendarScheduler_a862815eb693b8db0f2d53f7eb9eb4ca2}
Register this type. \begin{DoxyReturn}{Returns}
The object \hyperlink{classns3_1_1TypeId}{Type\+Id}. 
\end{DoxyReturn}

\begin{DoxyCode}
43 \{
44   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::CalendarScheduler"})
45     .SetParent<Scheduler> ()
46     .SetGroupName (\textcolor{stringliteral}{"Core"})
47     .AddConstructor<\hyperlink{classns3_1_1CalendarScheduler_a8fe003db517575b600aeaed7a02a8a18}{CalendarScheduler}> ()
48   ;
49   \textcolor{keywordflow}{return} tid;
50 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Hash@{Hash}}
\index{Hash@{Hash}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Hash(uint64\+\_\+t key) const }{Hash(uint64_t key) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Calendar\+Scheduler\+::\+Hash (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{key}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_ad60541150596324cac253040af4f8880}{}\label{classns3_1_1CalendarScheduler_ad60541150596324cac253040af4f8880}
\hyperlink{namespacens3_1_1Hash}{Hash} the dimensionless time to a bucket.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em key} & The dimensionless time. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The bucket index. 
\end{DoxyReturn}

\begin{DoxyCode}
92 \{
93   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
94 
95   uint32\_t bucket = (\hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ada841f58d7be618bfbc76c87e7d44086}{ts} / \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\_width}) % \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets};
96   \textcolor{keywordflow}{return} bucket;
97 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Init@{Init}}
\index{Init@{Init}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Init(uint32\+\_\+t n\+Buckets, uint64\+\_\+t width, uint64\+\_\+t start\+Prio)}{Init(uint32_t nBuckets, uint64_t width, uint64_t startPrio)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Init (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{n\+Buckets, }
\item[{uint64\+\_\+t}]{width, }
\item[{uint64\+\_\+t}]{start\+Prio}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a3bf6cdaed8ea65882707fe6eba13eedf}{}\label{classns3_1_1CalendarScheduler_a3bf6cdaed8ea65882707fe6eba13eedf}
Initialize the calendar queue.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em n\+Buckets} & The number of buckets. \\
\hline
\mbox{\tt in}  & {\em width} & The bucket size, in dimensionless time units. \\
\hline
\mbox{\tt in}  & {\em start\+Prio} & The starting time. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
68 \{
69   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << nBuckets << width << startPrio);
70   \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets} = \textcolor{keyword}{new} \hyperlink{classns3_1_1CalendarScheduler_a92e721d4162831c1f0c386034930c967}{Bucket} [nBuckets];
71   \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets} = nBuckets;
72   \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\_width} = width;
73   \hyperlink{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{m\_lastPrio} = startPrio;
74   \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket} = \hyperlink{classns3_1_1CalendarScheduler_ad60541150596324cac253040af4f8880}{Hash} (startPrio);
75   \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop} = (startPrio / width + 1) * width;
76 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Insert@{Insert}}
\index{Insert@{Insert}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Insert(const Scheduler\+::\+Event \&ev)}{Insert(const Scheduler::Event &ev)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Insert (
\begin{DoxyParamCaption}
\item[{const {\bf Scheduler\+::\+Event} \&}]{ev}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CalendarScheduler_aaf70c05e7468c8c232d4a309ce7c52c3}{}\label{classns3_1_1CalendarScheduler_aaf70c05e7468c8c232d4a309ce7c52c3}
Insert a new Event in the schedule.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ev} & Event to store in the event list \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1Scheduler_a9982bffa716e430ba599ded998b77d90}{ns3\+::\+Scheduler}.


\begin{DoxyCode}
122 \{
123   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << &ev);
124   \hyperlink{classns3_1_1CalendarScheduler_a89cf4c06b7763187a0155320013cf1d1}{DoInsert} (ev);
125   \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize}++;
126   \hyperlink{classns3_1_1CalendarScheduler_a6ad5ca9624349ac1a4a3ce565333385f}{ResizeUp} ();
127 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Is\+Empty@{Is\+Empty}}
\index{Is\+Empty@{Is\+Empty}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Is\+Empty(void) const }{IsEmpty(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Calendar\+Scheduler\+::\+Is\+Empty (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CalendarScheduler_a3b77785ce158cd5c3979acf5ed0ae7a0}{}\label{classns3_1_1CalendarScheduler_a3b77785ce158cd5c3979acf5ed0ae7a0}
Test if the schedule is empty.

\begin{DoxyReturn}{Returns}
{\ttfamily true} if the event list is empty and {\ttfamily false} otherwise. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Scheduler_a503d02afa89722af78dc9746c5208d47}{ns3\+::\+Scheduler}.


\begin{DoxyCode}
130 \{
131   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
132   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize} == 0;
133 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 16


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Peek\+Next@{Peek\+Next}}
\index{Peek\+Next@{Peek\+Next}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Peek\+Next(void) const }{PeekNext(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Scheduler\+::\+Event} ns3\+::\+Calendar\+Scheduler\+::\+Peek\+Next (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CalendarScheduler_ab96cc3ce6187e5cf2f28fbcc944f6b0c}{}\label{classns3_1_1CalendarScheduler_ab96cc3ce6187e5cf2f28fbcc944f6b0c}
Get a pointer to the next event.

This method cannot be invoked if the list is empty.

\begin{DoxyReturn}{Returns}
A pointer to the next earliest event. The caller takes ownership of the returned pointer. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Scheduler_a734576c6f195c51c552389d692b362cf}{ns3\+::\+Scheduler}.


\begin{DoxyCode}
136 \{
137   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
138   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (!\hyperlink{classns3_1_1CalendarScheduler_a3b77785ce158cd5c3979acf5ed0ae7a0}{IsEmpty} ());
139   uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket};
140   uint64\_t bucketTop = \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop};
141   Scheduler::Event minEvent;
142   minEvent.impl = 0;
143   minEvent.key.m\_ts = ~0;
144   minEvent.key.m\_uid = ~0;
145   minEvent.key.m\_context = 0;
146   \textcolor{keywordflow}{do}
147     \{
148       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[i].empty ())
149         \{
150           Scheduler::Event next = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].front ();
151           \textcolor{keywordflow}{if} (next.key.m\_ts < bucketTop)
152             \{
153               \textcolor{keywordflow}{return} next;
154             \}
155           \textcolor{keywordflow}{if} (next.key < minEvent.key)
156             \{
157               minEvent = next;
158             \}
159         \}
160       i++;
161       i %= \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets};
162       bucketTop += \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\_width};
163     \}
164   \textcolor{keywordflow}{while} (i != \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket});
165 
166   \textcolor{keywordflow}{return} minEvent;
167 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Print\+Info@{Print\+Info}}
\index{Print\+Info@{Print\+Info}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Print\+Info(void)}{PrintInfo(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Print\+Info (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_af38a66901da04a652524853488c527a8}{}\label{classns3_1_1CalendarScheduler_af38a66901da04a652524853488c527a8}
Print the configuration and bucket size distribution. 
\begin{DoxyCode}
79 \{
80   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
81 
82   std::cout << \textcolor{stringliteral}{"nBuckets="} << \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets} << \textcolor{stringliteral}{", width="} << \hyperlink{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{m\_width} << std::endl;
83   std::cout << \textcolor{stringliteral}{"Bucket Distribution "};
84   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
85     \{
86       std::cout << \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].size () << \textcolor{stringliteral}{" "};
87     \}
88   std::cout << std::endl;
89 \}
\end{DoxyCode}
\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Remove@{Remove}}
\index{Remove@{Remove}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Remove(const Scheduler\+::\+Event \&ev)}{Remove(const Scheduler::Event &ev)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Remove (
\begin{DoxyParamCaption}
\item[{const {\bf Scheduler\+::\+Event} \&}]{ev}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CalendarScheduler_aee9db8a165f257bc94b51ffedc9b98d8}{}\label{classns3_1_1CalendarScheduler_aee9db8a165f257bc94b51ffedc9b98d8}
Remove a specific event from the event list.

This method cannot be invoked if the list is empty.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ev} & The event to remove \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1Scheduler_a481d54e1b0e3c777629fd775862c66ca}{ns3\+::\+Scheduler}.


\begin{DoxyCode}
233 \{
234   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << &ev);
235   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (!\hyperlink{classns3_1_1CalendarScheduler_a3b77785ce158cd5c3979acf5ed0ae7a0}{IsEmpty} ());
236   \textcolor{comment}{// bucket index of event}
237   uint32\_t bucket = \hyperlink{classns3_1_1CalendarScheduler_ad60541150596324cac253040af4f8880}{Hash} (ev.key.m\_ts);
238 
239   Bucket::iterator end = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[bucket].end ();
240   \textcolor{keywordflow}{for} (Bucket::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[bucket].begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != end; ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
241     \{
242       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->key.m\_uid == ev.key.m\_uid)
243         \{
244           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ev.impl == \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->impl);
245           \hyperlink{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{m\_buckets}[bucket].erase (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
246 
247           \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize}--;
248           \hyperlink{classns3_1_1CalendarScheduler_ad177bb1ae48629ed93d2ffc55aa52312}{ResizeDown} ();
249           \textcolor{keywordflow}{return};
250         \}
251     \}
252   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\textcolor{keyword}{false});
253 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 18


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Remove\+Next@{Remove\+Next}}
\index{Remove\+Next@{Remove\+Next}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Remove\+Next(void)}{RemoveNext(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Scheduler\+::\+Event} ns3\+::\+Calendar\+Scheduler\+::\+Remove\+Next (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1CalendarScheduler_ad86df04ee956851c73dfcc38d0fb3ac6}{}\label{classns3_1_1CalendarScheduler_ad86df04ee956851c73dfcc38d0fb3ac6}
Remove the earliest event from the event list.

This method cannot be invoked if the list is empty.

\begin{DoxyReturn}{Returns}
The Event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Scheduler_acc5e570b9be6952fb1f349476dd8cc89}{ns3\+::\+Scheduler}.


\begin{DoxyCode}
218 \{
219   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket} << 
      \hyperlink{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{m\_bucketTop});
220   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (!\hyperlink{classns3_1_1CalendarScheduler_a3b77785ce158cd5c3979acf5ed0ae7a0}{IsEmpty} ());
221 
222   Scheduler::Event ev = \hyperlink{classns3_1_1CalendarScheduler_a42c114e7a4bb68943b63fa9dfc841610}{DoRemoveNext} ();
223   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"remove ts="} << ev.key.m\_ts <<
224                 \textcolor{stringliteral}{", key="} << ev.key.m\_uid <<
225                 \textcolor{stringliteral}{", from bucket="} << \hyperlink{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{m\_lastBucket});
226   \hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize}--;
227   \hyperlink{classns3_1_1CalendarScheduler_ad177bb1ae48629ed93d2ffc55aa52312}{ResizeDown} ();
228   \textcolor{keywordflow}{return} ev;
229 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Resize@{Resize}}
\index{Resize@{Resize}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Resize(uint32\+\_\+t new\+Size)}{Resize(uint32_t newSize)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Resize (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{new\+Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_ab626f95ab5482e5e6e2a9d5f74363d6c}{}\label{classns3_1_1CalendarScheduler_ab626f95ab5482e5e6e2a9d5f74363d6c}
Resize to a new number of buckets, with automatically computed width.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em new\+Size} & The new number of buckets. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
377 \{
378   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << newSize);
379 
380   \textcolor{comment}{// PrintInfo ();}
381   uint32\_t newWidth = \hyperlink{classns3_1_1CalendarScheduler_aa4c7262fde9711cde5b52dfe15dfacbe}{CalculateNewWidth} ();
382   \hyperlink{classns3_1_1CalendarScheduler_a0261b81664d13feb411d008a1e1bcf9b}{DoResize} (newSize, newWidth);
383 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20




Here is the caller graph for this function\+:
% FIG 21


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Resize\+Down@{Resize\+Down}}
\index{Resize\+Down@{Resize\+Down}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Resize\+Down(void)}{ResizeDown(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Resize\+Down (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_ad177bb1ae48629ed93d2ffc55aa52312}{}\label{classns3_1_1CalendarScheduler_ad177bb1ae48629ed93d2ffc55aa52312}
Halve the number of buckets if necessary. 
\begin{DoxyCode}
268 \{
269   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
270 
271   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize} < \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets} / 2)
272     \{
273       \hyperlink{classns3_1_1CalendarScheduler_ab626f95ab5482e5e6e2a9d5f74363d6c}{Resize} (\hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets} / 2);
274     \}
275 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 22




Here is the caller graph for this function\+:
% FIG 23


\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!Resize\+Up@{Resize\+Up}}
\index{Resize\+Up@{Resize\+Up}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{Resize\+Up(void)}{ResizeUp(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Calendar\+Scheduler\+::\+Resize\+Up (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a6ad5ca9624349ac1a4a3ce565333385f}{}\label{classns3_1_1CalendarScheduler_a6ad5ca9624349ac1a4a3ce565333385f}
Double the number of buckets if necessary. 
\begin{DoxyCode}
257 \{
258   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
259 
260   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{m\_qSize} > \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets} * 2
261       && \hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets} < 32768)
262     \{
263       \hyperlink{classns3_1_1CalendarScheduler_ab626f95ab5482e5e6e2a9d5f74363d6c}{Resize} (\hyperlink{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{m\_nBuckets} * 2);
264     \}
265 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 24




Here is the caller graph for this function\+:
% FIG 25




\subsection{Member Data Documentation}
\index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!m\+\_\+buckets@{m\+\_\+buckets}}
\index{m\+\_\+buckets@{m\+\_\+buckets}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+buckets}{m_buckets}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Bucket}$\ast$ ns3\+::\+Calendar\+Scheduler\+::m\+\_\+buckets\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}{}\label{classns3_1_1CalendarScheduler_ad022479890e917ef6a64ef814284033e}
Array of buckets. \index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!m\+\_\+bucket\+Top@{m\+\_\+bucket\+Top}}
\index{m\+\_\+bucket\+Top@{m\+\_\+bucket\+Top}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+bucket\+Top}{m_bucketTop}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Calendar\+Scheduler\+::m\+\_\+bucket\+Top\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}{}\label{classns3_1_1CalendarScheduler_a8a8746e4fc94345c5584629b78b25549}
Priority at the top of the bucket from which last event was dequeued. \index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!m\+\_\+last\+Bucket@{m\+\_\+last\+Bucket}}
\index{m\+\_\+last\+Bucket@{m\+\_\+last\+Bucket}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+last\+Bucket}{m_lastBucket}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Calendar\+Scheduler\+::m\+\_\+last\+Bucket\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}{}\label{classns3_1_1CalendarScheduler_aac53aae4bda7758ba73e45bfe775fec0}
Bucket index from which the last event was dequeued. \index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!m\+\_\+last\+Prio@{m\+\_\+last\+Prio}}
\index{m\+\_\+last\+Prio@{m\+\_\+last\+Prio}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+last\+Prio}{m_lastPrio}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Calendar\+Scheduler\+::m\+\_\+last\+Prio\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}{}\label{classns3_1_1CalendarScheduler_ac0e4ff83ceeb795f92af7a52d48ec41b}
The priority of the last event removed. \index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!m\+\_\+n\+Buckets@{m\+\_\+n\+Buckets}}
\index{m\+\_\+n\+Buckets@{m\+\_\+n\+Buckets}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+n\+Buckets}{m_nBuckets}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Calendar\+Scheduler\+::m\+\_\+n\+Buckets\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}{}\label{classns3_1_1CalendarScheduler_a0bbeaf47c899cb8f2cf9e17387014f3f}
Number of buckets in the array. \index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!m\+\_\+q\+Size@{m\+\_\+q\+Size}}
\index{m\+\_\+q\+Size@{m\+\_\+q\+Size}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+q\+Size}{m_qSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Calendar\+Scheduler\+::m\+\_\+q\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}{}\label{classns3_1_1CalendarScheduler_a24148e8feac3c068ab31317aee8f46c2}
Number of events in queue. \index{ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}!m\+\_\+width@{m\+\_\+width}}
\index{m\+\_\+width@{m\+\_\+width}!ns3\+::\+Calendar\+Scheduler@{ns3\+::\+Calendar\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+width}{m_width}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Calendar\+Scheduler\+::m\+\_\+width\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}{}\label{classns3_1_1CalendarScheduler_acbe04fc4f382aa5759beb2dc1cdc0523}
Duration of a bucket, in dimensionless time units. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
core/model/\hyperlink{calendar-scheduler_8h}{calendar-\/scheduler.\+h}\item 
core/model/\hyperlink{calendar-scheduler_8cc}{calendar-\/scheduler.\+cc}\end{DoxyCompactItemize}
