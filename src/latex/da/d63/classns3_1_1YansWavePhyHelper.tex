\hypertarget{classns3_1_1YansWavePhyHelper}{}\section{ns3\+:\+:Yans\+Wave\+Phy\+Helper Class Reference}
\label{classns3_1_1YansWavePhyHelper}\index{ns3\+::\+Yans\+Wave\+Phy\+Helper@{ns3\+::\+Yans\+Wave\+Phy\+Helper}}


{\ttfamily \#include $<$wave-\/helper.\+h$>$}



Inheritance diagram for ns3\+:\+:Yans\+Wave\+Phy\+Helper\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Yans\+Wave\+Phy\+Helper\+:
% FIG 1
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1YansWavePhyHelper}{Yans\+Wave\+Phy\+Helper} \hyperlink{classns3_1_1YansWavePhyHelper_a485a05f89d1f42783b96e99072b3aec3}{Default} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1YansWavePhyHelper_a6bcc70f08dc2e44676089f334c4345b0}{Enable\+Pcap\+Internal} (std\+::string prefix, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ nd, bool promiscuous, bool explicit\+Filename)
\begin{DoxyCompactList}\small\item\em Enable pcap output the indicated net device. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1YansWavePhyHelper_ad015eeeabbdf7522d52de94d22fcc207}{Enable\+Ascii\+Internal} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1OutputStreamWrapper}{Output\+Stream\+Wrapper} $>$ stream, std\+::string prefix, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ nd, bool explicit\+Filename)
\begin{DoxyCompactList}\small\item\em Enable ascii trace output on the indicated net device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
To trace \hyperlink{classns3_1_1WaveNetDevice}{Wave\+Net\+Device}, we have to overwrite the trace functions of class \hyperlink{classns3_1_1YansWifiPhyHelper}{Yans\+Wifi\+Phy\+Helper}. The source code is very similar with \hyperlink{classns3_1_1YansWifiPhy}{Yans\+Wifi\+Phy}, only with some adaptation. 

\subsection{Member Function Documentation}
\index{ns3\+::\+Yans\+Wave\+Phy\+Helper@{ns3\+::\+Yans\+Wave\+Phy\+Helper}!Default@{Default}}
\index{Default@{Default}!ns3\+::\+Yans\+Wave\+Phy\+Helper@{ns3\+::\+Yans\+Wave\+Phy\+Helper}}
\subsubsection[{\texorpdfstring{Default(void)}{Default(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Yans\+Wave\+Phy\+Helper} ns3\+::\+Yans\+Wave\+Phy\+Helper\+::\+Default (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1YansWavePhyHelper_a485a05f89d1f42783b96e99072b3aec3}{}\label{classns3_1_1YansWavePhyHelper_a485a05f89d1f42783b96e99072b3aec3}
Create a phy helper in a default working state. 
\begin{DoxyCode}
127 \{
128   YansWavePhyHelper helper;
129   helper.SetErrorRateModel (\textcolor{stringliteral}{"ns3::NistErrorRateModel"});
130   \textcolor{keywordflow}{return} helper;
131 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Yans\+Wave\+Phy\+Helper@{ns3\+::\+Yans\+Wave\+Phy\+Helper}!Enable\+Ascii\+Internal@{Enable\+Ascii\+Internal}}
\index{Enable\+Ascii\+Internal@{Enable\+Ascii\+Internal}!ns3\+::\+Yans\+Wave\+Phy\+Helper@{ns3\+::\+Yans\+Wave\+Phy\+Helper}}
\subsubsection[{\texorpdfstring{Enable\+Ascii\+Internal(\+Ptr$<$ Output\+Stream\+Wrapper $>$ stream, std\+::string prefix, Ptr$<$ Net\+Device $>$ nd, bool explicit\+Filename)}{EnableAsciiInternal(Ptr< OutputStreamWrapper > stream, std::string prefix, Ptr< NetDevice > nd, bool explicitFilename)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Yans\+Wave\+Phy\+Helper\+::\+Enable\+Ascii\+Internal (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Output\+Stream\+Wrapper} $>$}]{stream, }
\item[{std\+::string}]{prefix, }
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{nd, }
\item[{bool}]{explicit\+Filename}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1YansWavePhyHelper_ad015eeeabbdf7522d52de94d22fcc207}{}\label{classns3_1_1YansWavePhyHelper_ad015eeeabbdf7522d52de94d22fcc207}


Enable ascii trace output on the indicated net device. 



Reimplemented from \hyperlink{classns3_1_1WifiPhyHelper_a930fe270c6c08af23d5333b87ed5997b}{ns3\+::\+Wifi\+Phy\+Helper}.


\begin{DoxyCode}
180 \{
181   \textcolor{comment}{//}
182   \textcolor{comment}{// All of the ascii enable functions vector through here including the ones}
183   \textcolor{comment}{// that are wandering through all of devices on perhaps all of the nodes in}
184   \textcolor{comment}{// the system.  We can only deal with devices of type WaveNetDevice.}
185   \textcolor{comment}{//}
186   Ptr<WaveNetDevice> device = nd->GetObject<WaveNetDevice> ();
187   \textcolor{keywordflow}{if} (device == 0)
188     \{
189       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"EnableAsciiInternal(): Device "} << device << \textcolor{stringliteral}{" not of type
       ns3::WaveNetDevice"});
190       \textcolor{keywordflow}{return};
191     \}
192 
193   \textcolor{comment}{//}
194   \textcolor{comment}{// Our trace sinks are going to use packet printing, so we have to make sure}
195   \textcolor{comment}{// that is turned on.}
196   \textcolor{comment}{//}
197   \hyperlink{classns3_1_1Packet_ae17c0cd8e63e83df3c9273801e3d5d7f}{Packet::EnablePrinting} ();
198 
199   uint32\_t nodeid = nd->GetNode ()->GetId ();
200   uint32\_t deviceid = nd->GetIfIndex ();
201   std::ostringstream oss;
202 
203   \textcolor{comment}{//}
204   \textcolor{comment}{// If we are not provided an OutputStreamWrapper, we are expected to create}
205   \textcolor{comment}{// one using the usual trace filename conventions and write our traces}
206   \textcolor{comment}{// without a context since there will be one file per context and therefore}
207   \textcolor{comment}{// the context would be redundant.}
208   \textcolor{comment}{//}
209   \textcolor{keywordflow}{if} (stream == 0)
210     \{
211       \textcolor{comment}{//}
212       \textcolor{comment}{// Set up an output stream object to deal with private ofstream copy}
213       \textcolor{comment}{// constructor and lifetime issues.  Let the helper decide the actual}
214       \textcolor{comment}{// name of the file given the prefix.}
215       \textcolor{comment}{//}
216       AsciiTraceHelper asciiTraceHelper;
217 
218       std::string filename;
219       \textcolor{keywordflow}{if} (explicitFilename)
220         \{
221           filename = prefix;
222         \}
223       \textcolor{keywordflow}{else}
224         \{
225           filename = asciiTraceHelper.GetFilenameFromDevice (prefix, device);
226         \}
227 
228       Ptr<OutputStreamWrapper> theStream = asciiTraceHelper.CreateFileStream (filename);
229       \textcolor{comment}{//}
230       \textcolor{comment}{// We could go poking through the phy and the state looking for the}
231       \textcolor{comment}{// correct trace source, but we can let Config deal with that with}
232       \textcolor{comment}{// some search cost.  Since this is presumably happening at topology}
233       \textcolor{comment}{// creation time, it doesn't seem much of a price to pay.}
234       \textcolor{comment}{//}
235       oss.str (\textcolor{stringliteral}{""});
236       oss << \textcolor{stringliteral}{"/NodeList/"} << nodeid << \textcolor{stringliteral}{"/DeviceList/"} << deviceid << \textcolor{stringliteral}{"
      /$ns3::WaveNetDevice/PhyEntities/*/$ns3::WifiPhy/State/RxOk"};
237       \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (oss.str (), 
      \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&\hyperlink{namespacens3_a7ca07e06f80459c9c62e3b4e9eb6ff40}{AsciiPhyReceiveSinkWithoutContext}, 
      theStream));
238 
239       oss.str (\textcolor{stringliteral}{""});
240       oss << \textcolor{stringliteral}{"/NodeList/"} << nodeid << \textcolor{stringliteral}{"/DeviceList/"} << deviceid << \textcolor{stringliteral}{"
      /$ns3::WaveNetDevice/PhyEntities/*/$ns3::WifiPhy/State/Tx"};
241       \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (oss.str (), 
      \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&\hyperlink{namespacens3_af1e94937b00eeb80a08c06ca300bfea5}{AsciiPhyTransmitSinkWithoutContext}, 
      theStream));
242 
243       \textcolor{keywordflow}{return};
244     \}
245 
246   \textcolor{comment}{//}
247   \textcolor{comment}{// If we are provided an OutputStreamWrapper, we are expected to use it, and}
248   \textcolor{comment}{// to provide a context.  We are free to come up with our own context if we}
249   \textcolor{comment}{// want, and use the AsciiTraceHelper Hook*WithContext functions, but for}
250   \textcolor{comment}{// compatibility and simplicity, we just use Config::Connect and let it deal}
251   \textcolor{comment}{// with coming up with a context.}
252   \textcolor{comment}{//}
253   oss.str (\textcolor{stringliteral}{""});
254   oss << \textcolor{stringliteral}{"/NodeList/"} << nodeid << \textcolor{stringliteral}{"/DeviceList/"} << deviceid << \textcolor{stringliteral}{"
      /$ns3::WaveNetDevice/PhyEntities/*/$ns3::WifiPhy/RxOk"};
255   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (oss.str (), \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{namespacens3_a040ca8ac0d1c0a56f4e431307cb3058c}{AsciiPhyReceiveSinkWithContext}, stream));
256 
257   oss.str (\textcolor{stringliteral}{""});
258   oss << \textcolor{stringliteral}{"/NodeList/"} << nodeid << \textcolor{stringliteral}{"/DeviceList/"} << deviceid << \textcolor{stringliteral}{"
      /$ns3::WaveNetDevice/PhyEntities/*/$ns3::WifiPhy/State/Tx"};
259   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (oss.str (), \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{namespacens3_ae217606eb9244d9c833b9dddbe1a964a}{AsciiPhyTransmitSinkWithContext}, stream));
260 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Yans\+Wave\+Phy\+Helper@{ns3\+::\+Yans\+Wave\+Phy\+Helper}!Enable\+Pcap\+Internal@{Enable\+Pcap\+Internal}}
\index{Enable\+Pcap\+Internal@{Enable\+Pcap\+Internal}!ns3\+::\+Yans\+Wave\+Phy\+Helper@{ns3\+::\+Yans\+Wave\+Phy\+Helper}}
\subsubsection[{\texorpdfstring{Enable\+Pcap\+Internal(std\+::string prefix, Ptr$<$ Net\+Device $>$ nd, bool promiscuous, bool explicit\+Filename)}{EnablePcapInternal(std::string prefix, Ptr< NetDevice > nd, bool promiscuous, bool explicitFilename)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Yans\+Wave\+Phy\+Helper\+::\+Enable\+Pcap\+Internal (
\begin{DoxyParamCaption}
\item[{std\+::string}]{prefix, }
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{nd, }
\item[{bool}]{promiscuous, }
\item[{bool}]{explicit\+Filename}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1YansWavePhyHelper_a6bcc70f08dc2e44676089f334c4345b0}{}\label{classns3_1_1YansWavePhyHelper_a6bcc70f08dc2e44676089f334c4345b0}


Enable pcap output the indicated net device. 

Net\+Device-\/specific implementation mechanism for hooking the trace and writing to the trace file.


\begin{DoxyParams}{Parameters}
{\em prefix} & Filename prefix to use for pcap files. \\
\hline
{\em nd} & Net device for which you want to enable tracing. \\
\hline
{\em promiscuous} & If true capture all possible packets available at the device. \\
\hline
{\em explicit\+Filename} & Treat the prefix as an explicit filename if true \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiPhyHelper_a1d0dc819ef2e257409b6b84924d07085}{ns3\+::\+Wifi\+Phy\+Helper}.


\begin{DoxyCode}
135 \{
136   \textcolor{comment}{//}
137   \textcolor{comment}{// All of the Pcap enable functions vector through here including the ones}
138   \textcolor{comment}{// that are wandering through all of devices on perhaps all of the nodes in}
139   \textcolor{comment}{// the system.  We can only deal with devices of type WaveNetDevice.}
140   \textcolor{comment}{//}
141   Ptr<WaveNetDevice> device = nd->GetObject<WaveNetDevice> ();
142   \textcolor{keywordflow}{if} (device == 0)
143     \{
144       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"YansWavePhyHelper::EnablePcapInternal(): Device "} << &device << \textcolor{stringliteral}{" not of
       type ns3::WaveNetDevice"});
145       \textcolor{keywordflow}{return};
146     \}
147 
148   std::vector<Ptr<WifiPhy> > phys = device->GetPhys ();
149   \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (phys.size () == 0, \textcolor{stringliteral}{"EnablePcapInternal(): Phy layer in WaveNetDevice must
       be set"});
150 
151   PcapHelper pcapHelper;
152 
153   std::string filename;
154   \textcolor{keywordflow}{if} (explicitFilename)
155     \{
156       filename = prefix;
157     \}
158   \textcolor{keywordflow}{else}
159     \{
160       filename = pcapHelper.GetFilenameFromDevice (prefix, device);
161     \}
162 
163   Ptr<PcapFileWrapper> file = pcapHelper.CreateFile (filename, std::ios::out, 
      \hyperlink{classns3_1_1WifiPhyHelper_a1ac7d21ac3f931ccd18a31fa72e57dc2}{GetPcapDataLinkType} ());
164 
165   std::vector<Ptr<WifiPhy> >::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
166   \textcolor{keywordflow}{for} (i = phys.begin (); i != phys.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
167     \{
168       Ptr<WifiPhy> phy = (*i);
169       phy->TraceConnectWithoutContext (\textcolor{stringliteral}{"MonitorSnifferTx"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classns3_1_1WifiPhyHelper_a24e075fa55e473c81f76a4178c0fcb25}{YansWavePhyHelper::PcapSniffTxEvent}, file));
170       phy->TraceConnectWithoutContext (\textcolor{stringliteral}{"MonitorSnifferRx"}, \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classns3_1_1WifiPhyHelper_ac5da2b1210868b0ae050e3adc54a9d2f}{YansWavePhyHelper::PcapSniffRxEvent}, file));
171     \}
172 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
wave/helper/\hyperlink{wave-helper_8h}{wave-\/helper.\+h}\item 
wave/helper/\hyperlink{wave-helper_8cc}{wave-\/helper.\+cc}\end{DoxyCompactItemize}
