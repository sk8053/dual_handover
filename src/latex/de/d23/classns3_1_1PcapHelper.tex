\hypertarget{classns3_1_1PcapHelper}{}\section{ns3\+:\+:Pcap\+Helper Class Reference}
\label{classns3_1_1PcapHelper}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}


Manage pcap files for device models.  




{\ttfamily \#include $<$trace-\/helper.\+h$>$}



Collaboration diagram for ns3\+:\+:Pcap\+Helper\+:
% FIG 0
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77f}{Data\+Link\+Type} \{ \\*
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fada3ea118e1eb3b75b586e79542711b83}{D\+L\+T\+\_\+\+N\+U\+LL} = 0, 
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fafcc9f108717302f66800b8ea731e0ca0}{D\+L\+T\+\_\+\+E\+N10\+MB} = 1, 
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa017d791e28f94a37b7a9e5c90bea598c}{D\+L\+T\+\_\+\+P\+PP} = 9, 
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77facaa0d4a941d8f04ddafaa202c18298c1}{D\+L\+T\+\_\+\+R\+AW} = 101, 
\\*
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa6999575ac98d2d1345c7706b9be0e192}{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11} = 105, 
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fac6e64338b3116d70944adeadf61694f9}{D\+L\+T\+\_\+\+L\+I\+N\+U\+X\+\_\+\+S\+LL} = 113, 
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faf990acee7d35df750cc18af5bf29e9d7}{D\+L\+T\+\_\+\+P\+R\+I\+S\+M\+\_\+\+H\+E\+A\+D\+ER} = 119, 
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa186fad03d814f2abed0d6309fa9adc3f}{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11\+\_\+\+R\+A\+D\+IO} = 127, 
\\*
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faed67ae3e9cc0ee85c7cb3a8acedb3b47}{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+15\+\_\+4} = 195, 
\hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa464aef67fee6c2bcb4321bec82fd337f}{D\+L\+T\+\_\+\+N\+E\+T\+L\+I\+NK} = 253
 \}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1PcapHelper_af8ab2dd96c5248be253978c4c3393af3}{Pcap\+Helper} ()
\begin{DoxyCompactList}\small\item\em Create a pcap helper. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1PcapHelper_ae1a6f0e0210ca9490056499ccaab5d23}{$\sim$\+Pcap\+Helper} ()
\begin{DoxyCompactList}\small\item\em Destroy a pcap helper. \end{DoxyCompactList}\item 
std\+::string \hyperlink{classns3_1_1PcapHelper_a0da71e0938f0074cf08b4167d2e36702}{Get\+Filename\+From\+Device} (std\+::string prefix, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ device, bool use\+Object\+Names=true)
\begin{DoxyCompactList}\small\item\em Let the pcap helper figure out a reasonable filename to use for a pcap file associated with a device. \end{DoxyCompactList}\item 
std\+::string \hyperlink{classns3_1_1PcapHelper_a87ec789f731ebfac27deaa9aa3abf8cf}{Get\+Filename\+From\+Interface\+Pair} (std\+::string prefix, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Object}{Object} $>$ object, uint32\+\_\+t interface, bool use\+Object\+Names=true)
\begin{DoxyCompactList}\small\item\em Let the pcap helper figure out a reasonable filename to use for the pcap file associated with a node. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PcapFileWrapper}{Pcap\+File\+Wrapper} $>$ \hyperlink{classns3_1_1PcapHelper_a216e4a2ee6d533fd71aacab300c1d786}{Create\+File} (std\+::string filename, std\+::ios\+::openmode filemode, \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77f}{Data\+Link\+Type} data\+Link\+Type, uint32\+\_\+t snap\+Len=std\+::numeric\+\_\+limits$<$ uint32\+\_\+t $>$\+::\hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{max}(), int32\+\_\+t tz\+Correction=0)
\begin{DoxyCompactList}\small\item\em Create and initialize a pcap file. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classns3_1_1PcapHelper_a669086eb0eef9105b0f9948f0d6ed180}{Hook\+Default\+Sink} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ T $>$ object, std\+::string trace\+Name, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PcapFileWrapper}{Pcap\+File\+Wrapper} $>$ file)
\begin{DoxyCompactList}\small\item\em Hook a trace source to the default trace sink. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{classns3_1_1PcapHelper_af85e2ac4fa0d875567d130d89cbdcc33}{Default\+Sink} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PcapFileWrapper}{Pcap\+File\+Wrapper} $>$ file, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p})
\item 
static void \hyperlink{classns3_1_1PcapHelper_a40f244c5388ec870d81e1aebd90e6734}{Sink\+With\+Header} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1PcapFileWrapper}{Pcap\+File\+Wrapper} $>$ file, const \hyperlink{classns3_1_1Header}{Header} \&header, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Manage pcap files for device models. 

Handling pcap files is a common operation for ns-\/3 devices. It is useful to provide a common base class for dealing with these ops. 

\subsection{Member Enumeration Documentation}
\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Data\+Link\+Type@{Data\+Link\+Type}}
\index{Data\+Link\+Type@{Data\+Link\+Type}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Data\+Link\+Type}{DataLinkType}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf ns3\+::\+Pcap\+Helper\+::\+Data\+Link\+Type}}\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77f}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77f}
This enumeration holds the data link types that will be written to the pcap file.

We don\textquotesingle{}t include pcap-\/bpf.\+h to avoid an explicit dependency on the real pcap and we don\textquotesingle{}t make an enumeration of all of the values to make it easy to pass new values in.

For a list of Data Link Types see \href{http://www.tcpdump.org/linktypes.html}{\tt http\+://www.\+tcpdump.\+org/linktypes.\+html} \begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{D\+L\+T\+\_\+\+N\+U\+LL@{D\+L\+T\+\_\+\+N\+U\+LL}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+N\+U\+LL@{D\+L\+T\+\_\+\+N\+U\+LL}}\item[{\em 
D\+L\+T\+\_\+\+N\+U\+LL\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fada3ea118e1eb3b75b586e79542711b83}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fada3ea118e1eb3b75b586e79542711b83}
}]\index{D\+L\+T\+\_\+\+E\+N10\+MB@{D\+L\+T\+\_\+\+E\+N10\+MB}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+E\+N10\+MB@{D\+L\+T\+\_\+\+E\+N10\+MB}}\item[{\em 
D\+L\+T\+\_\+\+E\+N10\+MB\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fafcc9f108717302f66800b8ea731e0ca0}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fafcc9f108717302f66800b8ea731e0ca0}
}]\index{D\+L\+T\+\_\+\+P\+PP@{D\+L\+T\+\_\+\+P\+PP}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+P\+PP@{D\+L\+T\+\_\+\+P\+PP}}\item[{\em 
D\+L\+T\+\_\+\+P\+PP\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa017d791e28f94a37b7a9e5c90bea598c}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa017d791e28f94a37b7a9e5c90bea598c}
}]\index{D\+L\+T\+\_\+\+R\+AW@{D\+L\+T\+\_\+\+R\+AW}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+R\+AW@{D\+L\+T\+\_\+\+R\+AW}}\item[{\em 
D\+L\+T\+\_\+\+R\+AW\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77facaa0d4a941d8f04ddafaa202c18298c1}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77facaa0d4a941d8f04ddafaa202c18298c1}
}]\index{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11@{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11@{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11}}\item[{\em 
D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa6999575ac98d2d1345c7706b9be0e192}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa6999575ac98d2d1345c7706b9be0e192}
}]\index{D\+L\+T\+\_\+\+L\+I\+N\+U\+X\+\_\+\+S\+LL@{D\+L\+T\+\_\+\+L\+I\+N\+U\+X\+\_\+\+S\+LL}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+L\+I\+N\+U\+X\+\_\+\+S\+LL@{D\+L\+T\+\_\+\+L\+I\+N\+U\+X\+\_\+\+S\+LL}}\item[{\em 
D\+L\+T\+\_\+\+L\+I\+N\+U\+X\+\_\+\+S\+LL\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fac6e64338b3116d70944adeadf61694f9}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fac6e64338b3116d70944adeadf61694f9}
}]\index{D\+L\+T\+\_\+\+P\+R\+I\+S\+M\+\_\+\+H\+E\+A\+D\+ER@{D\+L\+T\+\_\+\+P\+R\+I\+S\+M\+\_\+\+H\+E\+A\+D\+ER}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+P\+R\+I\+S\+M\+\_\+\+H\+E\+A\+D\+ER@{D\+L\+T\+\_\+\+P\+R\+I\+S\+M\+\_\+\+H\+E\+A\+D\+ER}}\item[{\em 
D\+L\+T\+\_\+\+P\+R\+I\+S\+M\+\_\+\+H\+E\+A\+D\+ER\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faf990acee7d35df750cc18af5bf29e9d7}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faf990acee7d35df750cc18af5bf29e9d7}
}]\index{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11\+\_\+\+R\+A\+D\+IO@{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11\+\_\+\+R\+A\+D\+IO}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11\+\_\+\+R\+A\+D\+IO@{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11\+\_\+\+R\+A\+D\+IO}}\item[{\em 
D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+11\+\_\+\+R\+A\+D\+IO\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa186fad03d814f2abed0d6309fa9adc3f}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa186fad03d814f2abed0d6309fa9adc3f}
}]\index{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+15\+\_\+4@{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+15\+\_\+4}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+15\+\_\+4@{D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+15\+\_\+4}}\item[{\em 
D\+L\+T\+\_\+\+I\+E\+E\+E802\+\_\+15\+\_\+4\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faed67ae3e9cc0ee85c7cb3a8acedb3b47}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faed67ae3e9cc0ee85c7cb3a8acedb3b47}
}]\index{D\+L\+T\+\_\+\+N\+E\+T\+L\+I\+NK@{D\+L\+T\+\_\+\+N\+E\+T\+L\+I\+NK}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!D\+L\+T\+\_\+\+N\+E\+T\+L\+I\+NK@{D\+L\+T\+\_\+\+N\+E\+T\+L\+I\+NK}}\item[{\em 
D\+L\+T\+\_\+\+N\+E\+T\+L\+I\+NK\hypertarget{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa464aef67fee6c2bcb4321bec82fd337f}{}\label{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa464aef67fee6c2bcb4321bec82fd337f}
}]\end{description}
\end{Desc}

\begin{DoxyCode}
50                     \{
51     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fada3ea118e1eb3b75b586e79542711b83}{DLT\_NULL} = 0,
52     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fafcc9f108717302f66800b8ea731e0ca0}{DLT\_EN10MB} = 1,
53     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa017d791e28f94a37b7a9e5c90bea598c}{DLT\_PPP} = 9,
54     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77facaa0d4a941d8f04ddafaa202c18298c1}{DLT\_RAW} = 101,
55     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa6999575ac98d2d1345c7706b9be0e192}{DLT\_IEEE802\_11} = 105,
56     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fac6e64338b3116d70944adeadf61694f9}{DLT\_LINUX\_SLL} = 113,
57     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faf990acee7d35df750cc18af5bf29e9d7}{DLT\_PRISM\_HEADER} = 119,
58     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa186fad03d814f2abed0d6309fa9adc3f}{DLT\_IEEE802\_11\_RADIO} = 127,
59     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77faed67ae3e9cc0ee85c7cb3a8acedb3b47}{DLT\_IEEE802\_15\_4} = 195,
60     \hyperlink{classns3_1_1PcapHelper_a2ee4dad28ddd9a1fe636f51835eaa77fa464aef67fee6c2bcb4321bec82fd337f}{DLT\_NETLINK} = 253
61   \};
\end{DoxyCode}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Pcap\+Helper@{Pcap\+Helper}}
\index{Pcap\+Helper@{Pcap\+Helper}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Pcap\+Helper()}{PcapHelper()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Pcap\+Helper\+::\+Pcap\+Helper (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PcapHelper_af8ab2dd96c5248be253978c4c3393af3}{}\label{classns3_1_1PcapHelper_af8ab2dd96c5248be253978c4c3393af3}


Create a pcap helper. 


\begin{DoxyCode}
39 \{
40   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
41 \}
\end{DoxyCode}
\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!````~Pcap\+Helper@{$\sim$\+Pcap\+Helper}}
\index{````~Pcap\+Helper@{$\sim$\+Pcap\+Helper}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{$\sim$\+Pcap\+Helper()}{~PcapHelper()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Pcap\+Helper\+::$\sim$\+Pcap\+Helper (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PcapHelper_ae1a6f0e0210ca9490056499ccaab5d23}{}\label{classns3_1_1PcapHelper_ae1a6f0e0210ca9490056499ccaab5d23}


Destroy a pcap helper. 


\begin{DoxyCode}
44 \{
45   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
46 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Create\+File@{Create\+File}}
\index{Create\+File@{Create\+File}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Create\+File(std\+::string filename, std\+::ios\+::openmode filemode, Data\+Link\+Type data\+Link\+Type, uint32\+\_\+t snap\+Len=std\+::numeric\+\_\+limits$<$ uint32\+\_\+t $>$\+::max(), int32\+\_\+t tz\+Correction=0)}{CreateFile(std::string filename, std::ios::openmode filemode, DataLinkType dataLinkType, uint32_t snapLen=std::numeric_limits< uint32_t >::max(), int32_t tzCorrection=0)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Pcap\+File\+Wrapper} $>$ ns3\+::\+Pcap\+Helper\+::\+Create\+File (
\begin{DoxyParamCaption}
\item[{std\+::string}]{filename, }
\item[{std\+::ios\+::openmode}]{filemode, }
\item[{{\bf Data\+Link\+Type}}]{data\+Link\+Type, }
\item[{uint32\+\_\+t}]{snap\+Len = {\ttfamily std\+:\+:numeric\+\_\+limits$<$uint32\+\_\+t$>$\+:\+:{\bf max}~()}, }
\item[{int32\+\_\+t}]{tz\+Correction = {\ttfamily 0}}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PcapHelper_a216e4a2ee6d533fd71aacab300c1d786}{}\label{classns3_1_1PcapHelper_a216e4a2ee6d533fd71aacab300c1d786}


Create and initialize a pcap file. 


\begin{DoxyParams}{Parameters}
{\em filename} & file name \\
\hline
{\em filemode} & file mode \\
\hline
{\em data\+Link\+Type} & data link type of packet data \\
\hline
{\em snap\+Len} & maximum length of packet data stored in records \\
\hline
{\em tz\+Correction} & time zone correction to be applied to timestamps of packets \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a smart pointer to the Pcap file 
\end{DoxyReturn}

\begin{DoxyCode}
55 \{
56   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (filename << filemode << dataLinkType << snapLen << tzCorrection);
57 
58   Ptr<PcapFileWrapper> file = CreateObject<PcapFileWrapper> ();
59   file->Open (filename, filemode);
60   \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (file->Fail (), \textcolor{stringliteral}{"Unable to Open "} << filename << \textcolor{stringliteral}{" for mode "} << filemode)
      ;
61 
62   file->Init (dataLinkType, snapLen, tzCorrection);
63   \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (file->Fail (), \textcolor{stringliteral}{"Unable to Init "} << filename);
64 
65   \textcolor{comment}{//}
66   \textcolor{comment}{// Note that the pcap helper promptly forgets all about the pcap file.  We}
67   \textcolor{comment}{// rely on the reference count of the file object which will soon be owned}
68   \textcolor{comment}{// by the caller to keep the object alive.  If the caller uses the file }
69   \textcolor{comment}{// object to hook a trace source, ownership of the file object will be}
70   \textcolor{comment}{// implicitly transferred to the callback which keeps the object alive.}
71   \textcolor{comment}{// When the callback is destroyed (when either the trace is disconnected or}
72   \textcolor{comment}{// the object with the trace source is deleted) the callback will be destroyed}
73   \textcolor{comment}{// and the file object will be destroyed, releasing the pointer and closing}
74   \textcolor{comment}{// the file.}
75   \textcolor{comment}{//}
76   \textcolor{keywordflow}{return} file;
77 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 1


\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Default\+Sink@{Default\+Sink}}
\index{Default\+Sink@{Default\+Sink}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Default\+Sink(\+Ptr$<$ Pcap\+File\+Wrapper $>$ file, Ptr$<$ const Packet $>$ p)}{DefaultSink(Ptr< PcapFileWrapper > file, Ptr< const Packet > p)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pcap\+Helper\+::\+Default\+Sink (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Pcap\+File\+Wrapper} $>$}]{file, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{p}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classns3_1_1PcapHelper_af85e2ac4fa0d875567d130d89cbdcc33}{}\label{classns3_1_1PcapHelper_af85e2ac4fa0d875567d130d89cbdcc33}
The basic default trace sink.

This one just writes the packet to the pcap file which is good enough for most kinds of captures.


\begin{DoxyParams}{Parameters}
{\em file} & the file to write to \\
\hline
{\em p} & the packet to write \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
168 \{
169   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (file << \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p});
170   file->Write (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} (), \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p});
171 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Get\+Filename\+From\+Device@{Get\+Filename\+From\+Device}}
\index{Get\+Filename\+From\+Device@{Get\+Filename\+From\+Device}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Get\+Filename\+From\+Device(std\+::string prefix, Ptr$<$ Net\+Device $>$ device, bool use\+Object\+Names=true)}{GetFilenameFromDevice(std::string prefix, Ptr< NetDevice > device, bool useObjectNames=true)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string ns3\+::\+Pcap\+Helper\+::\+Get\+Filename\+From\+Device (
\begin{DoxyParamCaption}
\item[{std\+::string}]{prefix, }
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{device, }
\item[{bool}]{use\+Object\+Names = {\ttfamily true}}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PcapHelper_a0da71e0938f0074cf08b4167d2e36702}{}\label{classns3_1_1PcapHelper_a0da71e0938f0074cf08b4167d2e36702}


Let the pcap helper figure out a reasonable filename to use for a pcap file associated with a device. 


\begin{DoxyParams}{Parameters}
{\em prefix} & prefix string \\
\hline
{\em device} & \hyperlink{classns3_1_1NetDevice}{Net\+Device} \\
\hline
{\em use\+Object\+Names} & use node and device names instead of indexes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
file name 
\end{DoxyReturn}

\begin{DoxyCode}
81 \{
82   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (prefix << device << useObjectNames);
83   \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} (prefix.size (), \textcolor{stringliteral}{"Empty prefix string"});
84 
85   std::ostringstream oss;
86   oss << prefix << \textcolor{stringliteral}{"-"};
87 
88   std::string nodename;
89   std::string devicename;
90 
91   Ptr<Node> node = device->GetNode ();
92 
93   \textcolor{keywordflow}{if} (useObjectNames)
94     \{
95       nodename = \hyperlink{classns3_1_1Names_ab9664faf23569aaae64a2d1f65265045}{Names::FindName} (node);
96       devicename = \hyperlink{classns3_1_1Names_ab9664faf23569aaae64a2d1f65265045}{Names::FindName} (device);
97     \}
98 
99   \textcolor{keywordflow}{if} (nodename.size ())
100     \{
101       oss << nodename;
102     \}
103   \textcolor{keywordflow}{else}
104     \{
105       oss << node->GetId ();
106     \}
107 
108   oss << \textcolor{stringliteral}{"-"};
109 
110   \textcolor{keywordflow}{if} (devicename.size ())
111     \{
112       oss << devicename;
113     \}
114   \textcolor{keywordflow}{else}
115     \{
116       oss << device->GetIfIndex ();
117     \}
118 
119   oss << \textcolor{stringliteral}{".pcap"};
120 
121   \textcolor{keywordflow}{return} oss.str ();
122 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Get\+Filename\+From\+Interface\+Pair@{Get\+Filename\+From\+Interface\+Pair}}
\index{Get\+Filename\+From\+Interface\+Pair@{Get\+Filename\+From\+Interface\+Pair}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Get\+Filename\+From\+Interface\+Pair(std\+::string prefix, Ptr$<$ Object $>$ object, uint32\+\_\+t interface, bool use\+Object\+Names=true)}{GetFilenameFromInterfacePair(std::string prefix, Ptr< Object > object, uint32_t interface, bool useObjectNames=true)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string ns3\+::\+Pcap\+Helper\+::\+Get\+Filename\+From\+Interface\+Pair (
\begin{DoxyParamCaption}
\item[{std\+::string}]{prefix, }
\item[{{\bf Ptr}$<$ {\bf Object} $>$}]{object, }
\item[{uint32\+\_\+t}]{interface, }
\item[{bool}]{use\+Object\+Names = {\ttfamily true}}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PcapHelper_a87ec789f731ebfac27deaa9aa3abf8cf}{}\label{classns3_1_1PcapHelper_a87ec789f731ebfac27deaa9aa3abf8cf}


Let the pcap helper figure out a reasonable filename to use for the pcap file associated with a node. 


\begin{DoxyParams}{Parameters}
{\em prefix} & prefix string \\
\hline
{\em object} & interface (such as \hyperlink{classns3_1_1Ipv4Interface}{Ipv4\+Interface} or \hyperlink{classns3_1_1Ipv6Interface}{Ipv6\+Interface}) \\
\hline
{\em interface} & interface id \\
\hline
{\em use\+Object\+Names} & use node and device names instead of indexes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
file name 
\end{DoxyReturn}

\begin{DoxyCode}
126 \{
127   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (prefix << \textcolor{keywordtype}{object} << interface << useObjectNames);
128   \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} (prefix.size (), \textcolor{stringliteral}{"Empty prefix string"});
129 
130   std::ostringstream oss;
131   oss << prefix << \textcolor{stringliteral}{"-"};
132 
133   std::string objname;
134   std::string nodename;
135 
136   Ptr<Node> node = \textcolor{keywordtype}{object}->GetObject<Node> ();
137 
138   \textcolor{keywordflow}{if} (useObjectNames)
139     \{
140       objname = \hyperlink{classns3_1_1Names_ab9664faf23569aaae64a2d1f65265045}{Names::FindName} (\textcolor{keywordtype}{object});
141       nodename = \hyperlink{classns3_1_1Names_ab9664faf23569aaae64a2d1f65265045}{Names::FindName} (node);
142     \}
143 
144   \textcolor{keywordflow}{if} (objname.size ())
145     \{
146       oss << objname;
147     \}
148   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (nodename.size ())
149     \{
150       oss << nodename;
151     \}
152   \textcolor{keywordflow}{else}
153     \{
154       oss << \textcolor{stringliteral}{"n"} << node->GetId ();
155     \}
156 
157   oss << \textcolor{stringliteral}{"-i"} << \textcolor{keyword}{interface }<< ".pcap";
158 
159   \textcolor{keywordflow}{return} oss.str ();
160 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Hook\+Default\+Sink@{Hook\+Default\+Sink}}
\index{Hook\+Default\+Sink@{Hook\+Default\+Sink}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Hook\+Default\+Sink(\+Ptr$<$ T $>$ object, std\+::string trace\+Name, Ptr$<$ Pcap\+File\+Wrapper $>$ file)}{HookDefaultSink(Ptr< T > object, std::string traceName, Ptr< PcapFileWrapper > file)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ void ns3\+::\+Pcap\+Helper\+::\+Hook\+Default\+Sink (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ T $>$}]{object, }
\item[{std\+::string}]{trace\+Name, }
\item[{{\bf Ptr}$<$ {\bf Pcap\+File\+Wrapper} $>$}]{file}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PcapHelper_a669086eb0eef9105b0f9948f0d6ed180}{}\label{classns3_1_1PcapHelper_a669086eb0eef9105b0f9948f0d6ed180}


Hook a trace source to the default trace sink. 


\begin{DoxyParams}{Parameters}
{\em object} & object \\
\hline
{\em trace\+Name} & trace source name \\
\hline
{\em file} & file wrapper \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
148 \{
149   \textcolor{keywordtype}{bool} result =
150     \textcolor{keywordtype}{object}->TraceConnectWithoutContext (tracename.c\_str (), \hyperlink{group__makeboundcallback_ga1725d6362e6065faa0709f7c93f8d770}{MakeBoundCallback} (&
      \hyperlink{classns3_1_1PcapHelper_af85e2ac4fa0d875567d130d89cbdcc33}{DefaultSink}, file));
151   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (result == \textcolor{keyword}{true}, \textcolor{stringliteral}{"PcapHelper::HookDefaultSink():  Unable to hook \(\backslash\)""} << 
      tracename << \textcolor{stringliteral}{"\(\backslash\)""});
152 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}!Sink\+With\+Header@{Sink\+With\+Header}}
\index{Sink\+With\+Header@{Sink\+With\+Header}!ns3\+::\+Pcap\+Helper@{ns3\+::\+Pcap\+Helper}}
\subsubsection[{\texorpdfstring{Sink\+With\+Header(\+Ptr$<$ Pcap\+File\+Wrapper $>$ file, const Header \&header, Ptr$<$ const Packet $>$ p)}{SinkWithHeader(Ptr< PcapFileWrapper > file, const Header &header, Ptr< const Packet > p)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pcap\+Helper\+::\+Sink\+With\+Header (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Pcap\+File\+Wrapper} $>$}]{file, }
\item[{const {\bf Header} \&}]{header, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{p}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\hypertarget{classns3_1_1PcapHelper_a40f244c5388ec870d81e1aebd90e6734}{}\label{classns3_1_1PcapHelper_a40f244c5388ec870d81e1aebd90e6734}
This trace sink passes a header separately from the packet to prevent creating a new packet (for performance reasons)


\begin{DoxyParams}{Parameters}
{\em file} & the file to write to \\
\hline
{\em header} & header of the packet \\
\hline
{\em p} & the packet to write\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{classns3_1_1PcapHelper_af85e2ac4fa0d875567d130d89cbdcc33}{Default\+Sink} 
\end{DoxySeeAlso}

\begin{DoxyCode}
175 \{
176   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (file << \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p});
177   file->Write (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} (), header, \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p});
178 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10




The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
network/helper/\hyperlink{trace-helper_8h}{trace-\/helper.\+h}\item 
network/helper/\hyperlink{trace-helper_8cc}{trace-\/helper.\+cc}\end{DoxyCompactItemize}
