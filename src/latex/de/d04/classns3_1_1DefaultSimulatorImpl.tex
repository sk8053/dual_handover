\hypertarget{classns3_1_1DefaultSimulatorImpl}{}\section{ns3\+:\+:Default\+Simulator\+Impl Class Reference}
\label{classns3_1_1DefaultSimulatorImpl}\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}


{\ttfamily \#include $<$default-\/simulator-\/impl.\+h$>$}



Inheritance diagram for ns3\+:\+:Default\+Simulator\+Impl\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Default\+Simulator\+Impl\+:
% FIG 1
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structns3_1_1DefaultSimulatorImpl_1_1EventWithContext}{Event\+With\+Context}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1DefaultSimulatorImpl_adc64065914aed53dcf4aaf861246ceb9}{Default\+Simulator\+Impl} ()
\item 
\hyperlink{classns3_1_1DefaultSimulatorImpl_aa8ba918a21d60d714e05a1c7005957eb}{$\sim$\+Default\+Simulator\+Impl} ()
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_aae01d7f88f7d68f37618f0fc4ad6fd40}{Destroy} ()
\item 
virtual bool \hyperlink{classns3_1_1DefaultSimulatorImpl_ac3fa48ebcf8a6cc8feb55e1fd016c790}{Is\+Finished} (void) const 
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_a2851593d65fdbee8f78fc351dc7d74a0}{Stop} (void)
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_a2fbb62a5fc30f2bc09fe68a6346eab79}{Stop} (const \hyperlink{classns3_1_1Time}{Time} \&\hyperlink{mmwave_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay})
\item 
virtual \hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1DefaultSimulatorImpl_acb4b859e485d6319db25356ff8572cad}{Schedule} (const \hyperlink{classns3_1_1Time}{Time} \&\hyperlink{mmwave_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}, \hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_a94fec0f49d640c8e8067748bd91d97c2}{Schedule\+With\+Context} (uint32\+\_\+t context, const \hyperlink{classns3_1_1Time}{Time} \&\hyperlink{mmwave_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}, \hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual \hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1DefaultSimulatorImpl_a3379b3942e284feb17ecb6f2a90a2fb5}{Schedule\+Now} (\hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual \hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1DefaultSimulatorImpl_a0c397b3fa25ad4ec9ffc3fc7a631f889}{Schedule\+Destroy} (\hyperlink{classns3_1_1EventImpl}{Event\+Impl} $\ast$event)
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_a31a00b1c740c7c030a7843093e31f43b}{Remove} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id)
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_a509aa6ed70ef07e6b6a6999c8e6c6262}{Cancel} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id)
\item 
virtual bool \hyperlink{classns3_1_1DefaultSimulatorImpl_a60f3bef198ec0cad109219696592cb21}{Is\+Expired} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id) const 
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_a744b5fd2093c8cd507acbff376c41d53}{Run} (void)
\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DefaultSimulatorImpl_a5d5094d7cc729a517c0720f9403b6a14}{Now} (void) const 
\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DefaultSimulatorImpl_a4885f4f5abd81a639c7a1bc00bdcfdaa}{Get\+Delay\+Left} (const \hyperlink{classns3_1_1EventId}{Event\+Id} \&id) const 
\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1DefaultSimulatorImpl_aa12267176f85eba24d826c0f991a2ded}{Get\+Maximum\+Simulation\+Time} (void) const 
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_a96241d5a8259aecbd9ad08ccd54c8708}{Set\+Scheduler} (\hyperlink{classns3_1_1ObjectFactory}{Object\+Factory} scheduler\+Factory)
\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1DefaultSimulatorImpl_af453aa327b330a14f4387d8fb13ccab5}{Get\+System\+Id} (void) const 
\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1DefaultSimulatorImpl_a616b2bcbb1d12b14515f386ce314093b}{Get\+Context} (void) const 
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1DefaultSimulatorImpl_ac9eafae22410ec66b808b6c1e4002127}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ struct \hyperlink{structns3_1_1DefaultSimulatorImpl_1_1EventWithContext}{Event\+With\+Context} $>$ \hyperlink{classns3_1_1DefaultSimulatorImpl_a69a45d09d4651865afada01a8713ed38}{Events\+With\+Context}
\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1EventId}{Event\+Id} $>$ \hyperlink{classns3_1_1DefaultSimulatorImpl_ab9b6e40c5839c9e5755451f7c5e75406}{Destroy\+Events}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1DefaultSimulatorImpl_ae5402f99dfc9767491c94f8069e97514}{Do\+Dispose} (void)
\item 
void \hyperlink{classns3_1_1DefaultSimulatorImpl_a743e884e74c5db845cc2b8f1779e0e9d}{Process\+One\+Event} (void)
\item 
void \hyperlink{classns3_1_1DefaultSimulatorImpl_a12c1a6db6cde026ebbcad4f37091392f}{Process\+Events\+With\+Context} (void)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1DefaultSimulatorImpl_a69a45d09d4651865afada01a8713ed38}{Events\+With\+Context} \hyperlink{classns3_1_1DefaultSimulatorImpl_afef52c1fc06adf9ca1afa762f0a0934d}{m\+\_\+events\+With\+Context}
\item 
bool \hyperlink{classns3_1_1DefaultSimulatorImpl_a12b039f82d7326a0a0bcd38dd09c5d2a}{m\+\_\+events\+With\+Context\+Empty}
\item 
\hyperlink{classns3_1_1SystemMutex}{System\+Mutex} \hyperlink{classns3_1_1DefaultSimulatorImpl_a121da8c24078574aa64f0d5a2f47a462}{m\+\_\+events\+With\+Context\+Mutex}
\item 
\hyperlink{classns3_1_1DefaultSimulatorImpl_ab9b6e40c5839c9e5755451f7c5e75406}{Destroy\+Events} \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\+\_\+destroy\+Events}
\item 
bool \hyperlink{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}{m\+\_\+stop}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Scheduler}{Scheduler} $>$ \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\+\_\+events}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\+\_\+uid}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DefaultSimulatorImpl_acc741f30f8af775c34e4a97be468c721}{m\+\_\+current\+Uid}
\item 
uint64\+\_\+t \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\+\_\+current\+Ts}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1DefaultSimulatorImpl_a16a15129f0af0f7f3a3dd7935164be77}{m\+\_\+current\+Context}
\item 
int \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\+\_\+unscheduled\+Events}
\item 
System\+Thread\+::\+Thread\+Id \hyperlink{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{m\+\_\+main}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
The default single process simulator implementation. 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Destroy\+Events@{Destroy\+Events}}
\index{Destroy\+Events@{Destroy\+Events}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Destroy\+Events}{DestroyEvents}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<${\bf Event\+Id}$>$ {\bf ns3\+::\+Default\+Simulator\+Impl\+::\+Destroy\+Events}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_ab9b6e40c5839c9e5755451f7c5e75406}{}\label{classns3_1_1DefaultSimulatorImpl_ab9b6e40c5839c9e5755451f7c5e75406}
Container type for the events to run at \hyperlink{classns3_1_1Simulator_a2a056e59a6623225df0957eda0ee8252}{Simulator\+::\+Destroy()} \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Events\+With\+Context@{Events\+With\+Context}}
\index{Events\+With\+Context@{Events\+With\+Context}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Events\+With\+Context}{EventsWithContext}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<$struct {\bf Event\+With\+Context}$>$ {\bf ns3\+::\+Default\+Simulator\+Impl\+::\+Events\+With\+Context}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a69a45d09d4651865afada01a8713ed38}{}\label{classns3_1_1DefaultSimulatorImpl_a69a45d09d4651865afada01a8713ed38}
Container type for the events from a different context. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Default\+Simulator\+Impl@{Default\+Simulator\+Impl}}
\index{Default\+Simulator\+Impl@{Default\+Simulator\+Impl}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Default\+Simulator\+Impl()}{DefaultSimulatorImpl()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Default\+Simulator\+Impl\+::\+Default\+Simulator\+Impl (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1DefaultSimulatorImpl_adc64065914aed53dcf4aaf861246ceb9}{}\label{classns3_1_1DefaultSimulatorImpl_adc64065914aed53dcf4aaf861246ceb9}
Constructor. 
\begin{DoxyCode}
61 \{
62   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
63   \hyperlink{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}{m\_stop} = \textcolor{keyword}{false};
64   \textcolor{comment}{// uids are allocated from 4.}
65   \textcolor{comment}{// uid 0 is "invalid" events}
66   \textcolor{comment}{// uid 1 is "now" events}
67   \textcolor{comment}{// uid 2 is "destroy" events}
68   \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid} = 4;
69   \textcolor{comment}{// before ::Run is entered, the m\_currentUid will be zero}
70   \hyperlink{classns3_1_1DefaultSimulatorImpl_acc741f30f8af775c34e4a97be468c721}{m\_currentUid} = 0;
71   \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs} = 0;
72   \hyperlink{classns3_1_1DefaultSimulatorImpl_a16a15129f0af0f7f3a3dd7935164be77}{m\_currentContext} = \hyperlink{classns3_1_1Simulator_ab25cc4cd782af44b5843ce7258ecde10abaefe68ccc9945956c166aaeea2e986e}{Simulator::NO\_CONTEXT};
73   \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents} = 0;
74   \hyperlink{classns3_1_1DefaultSimulatorImpl_a12b039f82d7326a0a0bcd38dd09c5d2a}{m\_eventsWithContextEmpty} = \textcolor{keyword}{true};
75   \hyperlink{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{m\_main} = \hyperlink{classns3_1_1SystemThread_a76dffd0c4383357194c9604f073b0d79}{SystemThread::Self}();
76 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!````~Default\+Simulator\+Impl@{$\sim$\+Default\+Simulator\+Impl}}
\index{````~Default\+Simulator\+Impl@{$\sim$\+Default\+Simulator\+Impl}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{$\sim$\+Default\+Simulator\+Impl()}{~DefaultSimulatorImpl()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Default\+Simulator\+Impl\+::$\sim$\+Default\+Simulator\+Impl (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1DefaultSimulatorImpl_aa8ba918a21d60d714e05a1c7005957eb}{}\label{classns3_1_1DefaultSimulatorImpl_aa8ba918a21d60d714e05a1c7005957eb}
Destructor. 
\begin{DoxyCode}
79 \{
80   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
81 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Cancel@{Cancel}}
\index{Cancel@{Cancel}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Cancel(const Event\+Id \&id)}{Cancel(const EventId &id)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Cancel (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a509aa6ed70ef07e6b6a6999c8e6c6262}{}\label{classns3_1_1DefaultSimulatorImpl_a509aa6ed70ef07e6b6a6999c8e6c6262}




Set the cancel bit on this event\+: the event\textquotesingle{}s associated function will not be invoked when it expires.

This method has the same visible effect as the \hyperlink{classns3_1_1Simulator_ae30cacdda6cd0d5d62a8f2097b320506}{ns3\+::\+Simulator\+::\+Remove} method but its algorithmic complexity is much lower\+: it has O(1) complexity. This method has the exact same semantics as \hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{ns3\+::\+Event\+Id\+::\+Cancel}. Note that it is not possible to cancel events which were scheduled for the \char`\"{}destroy\char`\"{} time. Doing so will result in a program error (crash).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & the event to cancel \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1SimulatorImpl_ad117e616c99c915ddac6267a74804807}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
362 \{
363   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1DefaultSimulatorImpl_a60f3bef198ec0cad109219696592cb21}{IsExpired} (\textcolor{keywordtype}{id}))
364     \{
365       \textcolor{keywordtype}{id}.PeekEventImpl ()->Cancel ();
366     \}
367 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Destroy@{Destroy}}
\index{Destroy@{Destroy}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Destroy()}{Destroy()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Destroy (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_aae01d7f88f7d68f37618f0fc4ad6fd40}{}\label{classns3_1_1DefaultSimulatorImpl_aae01d7f88f7d68f37618f0fc4ad6fd40}




Execute the events scheduled with \hyperlink{classns3_1_1DefaultSimulatorImpl_a0c397b3fa25ad4ec9ffc3fc7a631f889}{Schedule\+Destroy()}.

This method is typically invoked at the end of a simulation to avoid false-\/positive reports by a leak checker. After this method has been invoked, it is actually possible to restart a new simulation with a set of calls to \hyperlink{classns3_1_1Simulator_a84be982e6d03b62c3dc3303c75a9b909}{Simulator\+::\+Run}, \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator\+::\+Schedule} and \hyperlink{classns3_1_1Simulator_a86dbaef45a15a42365d7d2ae550449f6}{Simulator\+::\+Schedule\+With\+Context}. 

Implements \hyperlink{classns3_1_1SimulatorImpl_a421e634f3a4035941f00e72f367506fa}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
99 \{
100   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
101   \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.empty ()) 
102     \{
103       Ptr<EventImpl> ev = \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.front ().PeekEventImpl ();
104       \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.pop\_front ();
105       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"handle destroy "} << ev);
106       \textcolor{keywordflow}{if} (!ev->IsCancelled ())
107         \{
108           ev->Invoke ();
109         \}
110     \}
111 \}
\end{DoxyCode}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_ae5402f99dfc9767491c94f8069e97514}{}\label{classns3_1_1DefaultSimulatorImpl_ae5402f99dfc9767491c94f8069e97514}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1DefaultSimulatorImpl_ae5402f99dfc9767491c94f8069e97514}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{ns3\+::\+Object}.


\begin{DoxyCode}
85 \{
86   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
87   \hyperlink{classns3_1_1DefaultSimulatorImpl_a12c1a6db6cde026ebbcad4f37091392f}{ProcessEventsWithContext} ();
88 
89   \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->IsEmpty ())
90     \{
91       Scheduler::Event next = \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->RemoveNext ();
92       next.impl->Unref ();
93     \}
94   \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events} = 0;
95   \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{SimulatorImpl::DoDispose} ();
96 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Get\+Context@{Get\+Context}}
\index{Get\+Context@{Get\+Context}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Context(void) const }{GetContext(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Default\+Simulator\+Impl\+::\+Get\+Context (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a616b2bcbb1d12b14515f386ce314093b}{}\label{classns3_1_1DefaultSimulatorImpl_a616b2bcbb1d12b14515f386ce314093b}




Get the current simulation context.

The simulation context is the ns-\/3 notion of a Logical Process. Events in a single context should only modify state associated with that context. Events for objects in other contexts should be scheduled with \hyperlink{classns3_1_1DefaultSimulatorImpl_a94fec0f49d640c8e8067748bd91d97c2}{Schedule\+With\+Context()} to track the context switches. In other words, events in different contexts should be mutually thread safe, by not modify overlapping model state.

In circumstances where the context can\textquotesingle{}t be determined, such as during object initialization, the {\ttfamily enum} value {\ttfamily N\+O\+\_\+\+C\+O\+N\+T\+E\+XT} should be used.

\begin{DoxyReturn}{Returns}
The current simulation context 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a8b66270c97766c0adb997e2535648557}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
413 \{
414   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1DefaultSimulatorImpl_a16a15129f0af0f7f3a3dd7935164be77}{m\_currentContext};
415 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Get\+Delay\+Left@{Get\+Delay\+Left}}
\index{Get\+Delay\+Left@{Get\+Delay\+Left}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Delay\+Left(const Event\+Id \&id) const }{GetDelayLeft(const EventId &id) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Default\+Simulator\+Impl\+::\+Get\+Delay\+Left (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a4885f4f5abd81a639c7a1bc00bdcfdaa}{}\label{classns3_1_1DefaultSimulatorImpl_a4885f4f5abd81a639c7a1bc00bdcfdaa}




Get the remaining time until this event will execute.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & The event id to analyse. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The delay left until the input event id expires. if the event is not running, this method returns zero. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a0a8e0885c0f98fa3e07ede4bcc79dccb}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
316 \{
317   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a60f3bef198ec0cad109219696592cb21}{IsExpired} (\textcolor{keywordtype}{id}))
318     \{
319       \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (0);
320     \}
321   \textcolor{keywordflow}{else}
322     \{
323       \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\textcolor{keywordtype}{id}.GetTs () - \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs});
324     \}
325 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Get\+Maximum\+Simulation\+Time@{Get\+Maximum\+Simulation\+Time}}
\index{Get\+Maximum\+Simulation\+Time@{Get\+Maximum\+Simulation\+Time}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Maximum\+Simulation\+Time(void) const }{GetMaximumSimulationTime(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Default\+Simulator\+Impl\+::\+Get\+Maximum\+Simulation\+Time (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_aa12267176f85eba24d826c0f991a2ded}{}\label{classns3_1_1DefaultSimulatorImpl_aa12267176f85eba24d826c0f991a2ded}




Get the maximum representable simulation time.

\begin{DoxyReturn}{Returns}
The maximum simulation time at which an event can be scheduled.
\end{DoxyReturn}
The returned value will always be bigger than or equal to \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator\+::\+Now}. \begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000004}{Todo}]I am fairly certain other compilers use other non-\/standard post-\/fixes to indicate 64 bit constants. \end{DoxyRefDesc}


Implements \hyperlink{classns3_1_1SimulatorImpl_a07b16567e2ec50ab91d5e00b98f31a22}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
405 \{
408   \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (0x7fffffffffffffffLL);
409 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Get\+System\+Id@{Get\+System\+Id}}
\index{Get\+System\+Id@{Get\+System\+Id}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+System\+Id(void) const }{GetSystemId(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Default\+Simulator\+Impl\+::\+Get\+System\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_af453aa327b330a14f4387d8fb13ccab5}{}\label{classns3_1_1DefaultSimulatorImpl_af453aa327b330a14f4387d8fb13ccab5}




Get the system id of this simulator.

The system id is the identifier for this simulator instance in a distributed simulation. For M\+PI this is the M\+PI rank. \begin{DoxyReturn}{Returns}
The system id for this simulator. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a16b1ae89947d862b421d98a702bac03b}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
133 \{
134   \textcolor{keywordflow}{return} 0;
135 \}
\end{DoxyCode}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Default\+Simulator\+Impl\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_ac9eafae22410ec66b808b6c1e4002127}{}\label{classns3_1_1DefaultSimulatorImpl_ac9eafae22410ec66b808b6c1e4002127}
Register this type. \begin{DoxyReturn}{Returns}
The object \hyperlink{classns3_1_1TypeId}{Type\+Id}. 
\end{DoxyReturn}

\begin{DoxyCode}
51 \{
52   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::DefaultSimulatorImpl"})
53     .SetParent<SimulatorImpl> ()
54     .SetGroupName (\textcolor{stringliteral}{"Core"})
55     .AddConstructor<\hyperlink{classns3_1_1DefaultSimulatorImpl_adc64065914aed53dcf4aaf861246ceb9}{DefaultSimulatorImpl}> ()
56   ;
57   \textcolor{keywordflow}{return} tid;
58 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Is\+Expired@{Is\+Expired}}
\index{Is\+Expired@{Is\+Expired}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Is\+Expired(const Event\+Id \&id) const }{IsExpired(const EventId &id) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Default\+Simulator\+Impl\+::\+Is\+Expired (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a60f3bef198ec0cad109219696592cb21}{}\label{classns3_1_1DefaultSimulatorImpl_a60f3bef198ec0cad109219696592cb21}




Check if an event has already run or been cancelled.

This method has O(1) complexity. Note that it is not possible to test for the expiration of events which were scheduled for the \char`\"{}destroy\char`\"{} time. Doing so will result in a program error (crash). An event is said to \char`\"{}expire\char`\"{} when it starts being scheduled which means that if the code executed by the event calls this function, it will get true.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & The event to test for expiration. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} if the event has expired, false otherwise. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a4b01ac397f5ce86997e9caec087f63d2}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
371 \{
372   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.GetUid () == 2)
373     \{
374       \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.PeekEventImpl () == 0 ||
375           \textcolor{keywordtype}{id}.PeekEventImpl ()->IsCancelled ())
376         \{
377           \textcolor{keywordflow}{return} \textcolor{keyword}{true};
378         \}
379       \textcolor{comment}{// destroy events.}
380       \textcolor{keywordflow}{for} (DestroyEvents::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
381         \{
382           \textcolor{keywordflow}{if} (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == \textcolor{keywordtype}{id})
383             \{
384               \textcolor{keywordflow}{return} \textcolor{keyword}{false};
385             \}
386         \}
387       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
388     \}
389   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.PeekEventImpl () == 0 ||
390       \textcolor{keywordtype}{id}.GetTs () < \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs} ||
391       (\textcolor{keywordtype}{id}.GetTs () == \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs} &&
392        \textcolor{keywordtype}{id}.GetUid () <= \hyperlink{classns3_1_1DefaultSimulatorImpl_acc741f30f8af775c34e4a97be468c721}{m\_currentUid}) ||
393       \textcolor{keywordtype}{id}.PeekEventImpl ()->IsCancelled ()) 
394     \{
395       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
396     \}
397   \textcolor{keywordflow}{else}
398     \{
399       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
400     \}
401 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Is\+Finished@{Is\+Finished}}
\index{Is\+Finished@{Is\+Finished}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Is\+Finished(void) const }{IsFinished(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Default\+Simulator\+Impl\+::\+Is\+Finished (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_ac3fa48ebcf8a6cc8feb55e1fd016c790}{}\label{classns3_1_1DefaultSimulatorImpl_ac3fa48ebcf8a6cc8feb55e1fd016c790}




Check if the simulation should finish.

Reasons to finish are because there are no more events lefts to be scheduled, or if simulation time has already reached the \char`\"{}stop time\char`\"{} (see \hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator\+::\+Stop()}).

\begin{DoxyReturn}{Returns}
{\ttfamily true} if no more events or stop time reached. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_afc1a8e4781155d6459fb2d25384b332f}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
157 \{
158   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->IsEmpty () || \hyperlink{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}{m\_stop};
159 \}
\end{DoxyCode}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Now@{Now}}
\index{Now@{Now}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Now(void) const }{Now(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Default\+Simulator\+Impl\+::\+Now (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a5d5094d7cc729a517c0720f9403b6a14}{}\label{classns3_1_1DefaultSimulatorImpl_a5d5094d7cc729a517c0720f9403b6a14}




Return the current simulation virtual time.

\begin{DoxyReturn}{Returns}
The current virtual time. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_aa516c50060846adc6fd316e83ef0797c}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
309 \{
310   \textcolor{comment}{// Do not add function logging here, to avoid stack overflow}
311   \textcolor{keywordflow}{return} \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs});
312 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Process\+Events\+With\+Context@{Process\+Events\+With\+Context}}
\index{Process\+Events\+With\+Context@{Process\+Events\+With\+Context}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Process\+Events\+With\+Context(void)}{ProcessEventsWithContext(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Process\+Events\+With\+Context (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a12c1a6db6cde026ebbcad4f37091392f}{}\label{classns3_1_1DefaultSimulatorImpl_a12c1a6db6cde026ebbcad4f37091392f}
Move events from a different context into the main event queue. 
\begin{DoxyCode}
163 \{
164   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a12b039f82d7326a0a0bcd38dd09c5d2a}{m\_eventsWithContextEmpty})
165     \{
166       \textcolor{keywordflow}{return};
167     \}
168 
169   \textcolor{comment}{// swap queues}
170   \hyperlink{classns3_1_1DefaultSimulatorImpl_a69a45d09d4651865afada01a8713ed38}{EventsWithContext} eventsWithContext;
171   \{
172     CriticalSection cs (\hyperlink{classns3_1_1DefaultSimulatorImpl_a121da8c24078574aa64f0d5a2f47a462}{m\_eventsWithContextMutex});
173     \hyperlink{classns3_1_1DefaultSimulatorImpl_afef52c1fc06adf9ca1afa762f0a0934d}{m\_eventsWithContext}.swap(eventsWithContext);
174     \hyperlink{classns3_1_1DefaultSimulatorImpl_a12b039f82d7326a0a0bcd38dd09c5d2a}{m\_eventsWithContextEmpty} = \textcolor{keyword}{true};
175   \}
176   \textcolor{keywordflow}{while} (!eventsWithContext.empty ())
177     \{
178        EventWithContext \textcolor{keyword}{event} = eventsWithContext.front ();
179        eventsWithContext.pop\_front ();
180        Scheduler::Event ev;
181        ev.impl = \textcolor{keyword}{event}.event;
182        ev.key.m\_ts = \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs} + \textcolor{keyword}{event}.timestamp;
183        ev.key.m\_context = \textcolor{keyword}{event}.context;
184        ev.key.m\_uid = \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid};
185        \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid}++;
186        \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents}++;
187        \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->Insert (ev);
188     \}
189 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Process\+One\+Event@{Process\+One\+Event}}
\index{Process\+One\+Event@{Process\+One\+Event}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Process\+One\+Event(void)}{ProcessOneEvent(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Process\+One\+Event (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a743e884e74c5db845cc2b8f1779e0e9d}{}\label{classns3_1_1DefaultSimulatorImpl_a743e884e74c5db845cc2b8f1779e0e9d}
Process the next event. 
\begin{DoxyCode}
139 \{
140   Scheduler::Event next = \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->RemoveNext ();
141 
142   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (next.key.m\_ts >= \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs});
143   \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents}--;
144 
145   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"handle "} << next.key.m\_ts);
146   \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs} = next.key.m\_ts;
147   \hyperlink{classns3_1_1DefaultSimulatorImpl_a16a15129f0af0f7f3a3dd7935164be77}{m\_currentContext} = next.key.m\_context;
148   \hyperlink{classns3_1_1DefaultSimulatorImpl_acc741f30f8af775c34e4a97be468c721}{m\_currentUid} = next.key.m\_uid;
149   next.impl->Invoke ();
150   next.impl->Unref ();
151 
152   \hyperlink{classns3_1_1DefaultSimulatorImpl_a12c1a6db6cde026ebbcad4f37091392f}{ProcessEventsWithContext} ();
153 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12




Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Remove@{Remove}}
\index{Remove@{Remove}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Remove(const Event\+Id \&id)}{Remove(const EventId &id)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Remove (
\begin{DoxyParamCaption}
\item[{const {\bf Event\+Id} \&}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a31a00b1c740c7c030a7843093e31f43b}{}\label{classns3_1_1DefaultSimulatorImpl_a31a00b1c740c7c030a7843093e31f43b}




Remove an event from the event list.

This method has the same visible effect as the \hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{ns3\+::\+Event\+Id\+::\+Cancel} method but its algorithmic complexity is much higher\+: it has often O(log(n)) complexity, sometimes O(n), sometimes worse. Note that it is not possible to remove events which were scheduled for the \char`\"{}destroy\char`\"{} time. Doing so will result in a program error (crash).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em id} & The event to remove from the list of scheduled events. \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1SimulatorImpl_a6456e1e88119250f07b589419acc775c}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
329 \{
330   \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.GetUid () == 2)
331     \{
332       \textcolor{comment}{// destroy events.}
333       \textcolor{keywordflow}{for} (DestroyEvents::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
334         \{
335           \textcolor{keywordflow}{if} (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == \textcolor{keywordtype}{id})
336             \{
337               \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.erase (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
338               \textcolor{keywordflow}{break};
339             \}
340         \}
341       \textcolor{keywordflow}{return};
342     \}
343   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a60f3bef198ec0cad109219696592cb21}{IsExpired} (\textcolor{keywordtype}{id}))
344     \{
345       \textcolor{keywordflow}{return};
346     \}
347   Scheduler::Event event;
348   \textcolor{keyword}{event}.impl = \textcolor{keywordtype}{id}.PeekEventImpl ();
349   \textcolor{keyword}{event}.key.m\_ts = \textcolor{keywordtype}{id}.GetTs ();
350   \textcolor{keyword}{event}.key.m\_context = \textcolor{keywordtype}{id}.GetContext ();
351   \textcolor{keyword}{event}.key.m\_uid = \textcolor{keywordtype}{id}.GetUid ();
352   \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->Remove (event);
353   \textcolor{keyword}{event}.impl->Cancel ();
354   \textcolor{comment}{// whenever we remove an event from the event list, we have to unref it.}
355   \textcolor{keyword}{event}.impl->Unref ();
356 
357   \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents}--;
358 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Run@{Run}}
\index{Run@{Run}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Run(void)}{Run(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a744b5fd2093c8cd507acbff376c41d53}{}\label{classns3_1_1DefaultSimulatorImpl_a744b5fd2093c8cd507acbff376c41d53}




Run the simulation.

The simulation will run until one of\+:
\begin{DoxyItemize}
\item No events are present anymore
\item The user called \hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator\+::\+Stop}
\item The user called \hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator\+::\+Stop} with a stop time and the expiration time of the next event to be processed is greater than or equal to the stop time. 
\end{DoxyItemize}

Implements \hyperlink{classns3_1_1SimulatorImpl_a4b5de814986948cca3658a84c9d671f6}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
193 \{
194   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
195   \textcolor{comment}{// Set the current threadId as the main threadId}
196   \hyperlink{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{m\_main} = \hyperlink{classns3_1_1SystemThread_a76dffd0c4383357194c9604f073b0d79}{SystemThread::Self}();
197   \hyperlink{classns3_1_1DefaultSimulatorImpl_a12c1a6db6cde026ebbcad4f37091392f}{ProcessEventsWithContext} ();
198   \hyperlink{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}{m\_stop} = \textcolor{keyword}{false};
199 
200   \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->IsEmpty () && !\hyperlink{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}{m\_stop}) 
201     \{
202       \hyperlink{classns3_1_1DefaultSimulatorImpl_a743e884e74c5db845cc2b8f1779e0e9d}{ProcessOneEvent} ();
203     \}
204 
205   \textcolor{comment}{// If the simulator stopped naturally by lack of events, make a}
206   \textcolor{comment}{// consistency test to check that we didn't lose any events along the way.}
207   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (!\hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->IsEmpty () || \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents} == 0);
208 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Schedule@{Schedule}}
\index{Schedule@{Schedule}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule(const Time \&delay, Event\+Impl $\ast$event)}{Schedule(const Time &delay, EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Default\+Simulator\+Impl\+::\+Schedule (
\begin{DoxyParamCaption}
\item[{const {\bf Time} \&}]{delay, }
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_acb4b859e485d6319db25356ff8572cad}{}\label{classns3_1_1DefaultSimulatorImpl_acb4b859e485d6319db25356ff8572cad}




Schedule a future event execution (in the same context).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em delay} & Delay until the event expires. \\
\hline
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a24eac97ca7dc0e64162e3596064cfb5c}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
229 \{
230   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep () << event);
231   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1SystemThread_af6bfffe1a51a4df5f9aa1a468df8bd59}{SystemThread::Equals} (\hyperlink{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{m\_main}), \textcolor{stringliteral}{"Simulator::Schedule
       Thread-unsafe invocation!"});
232 
233   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} tAbsolute = \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay} + \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs});
234 
235   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (tAbsolute.IsPositive ());
236   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (tAbsolute >= \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs}));
237   Scheduler::Event ev;
238   ev.impl = event;
239   ev.key.m\_ts = (uint64\_t) tAbsolute.GetTimeStep ();
240   ev.key.m\_context = \hyperlink{classns3_1_1DefaultSimulatorImpl_a616b2bcbb1d12b14515f386ce314093b}{GetContext} ();
241   ev.key.m\_uid = \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid};
242   \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid}++;
243   \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents}++;
244   \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->Insert (ev);
245   \textcolor{keywordflow}{return} EventId (event, ev.key.m\_ts, ev.key.m\_context, ev.key.m\_uid);
246 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Schedule\+Destroy@{Schedule\+Destroy}}
\index{Schedule\+Destroy@{Schedule\+Destroy}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule\+Destroy(\+Event\+Impl $\ast$event)}{ScheduleDestroy(EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Default\+Simulator\+Impl\+::\+Schedule\+Destroy (
\begin{DoxyParamCaption}
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a0c397b3fa25ad4ec9ffc3fc7a631f889}{}\label{classns3_1_1DefaultSimulatorImpl_a0c397b3fa25ad4ec9ffc3fc7a631f889}




Schedule an event to run at the end of the simulation, after the \hyperlink{classns3_1_1DefaultSimulatorImpl_a2851593d65fdbee8f78fc351dc7d74a0}{Stop()} time or condition has been reached.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a04f4a00ed04886ed0b9982038c3ed5f9}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
298 \{
299   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1SystemThread_af6bfffe1a51a4df5f9aa1a468df8bd59}{SystemThread::Equals} (\hyperlink{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{m\_main}), \textcolor{stringliteral}{"
      Simulator::ScheduleDestroy Thread-unsafe invocation!"});
300 
301   EventId id (Ptr<EventImpl> (event, \textcolor{keyword}{false}), \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs}, 0xffffffff, 2);
302   \hyperlink{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{m\_destroyEvents}.push\_back (\textcolor{keywordtype}{id});
303   \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid}++;
304   \textcolor{keywordflow}{return} id;
305 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Schedule\+Now@{Schedule\+Now}}
\index{Schedule\+Now@{Schedule\+Now}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule\+Now(\+Event\+Impl $\ast$event)}{ScheduleNow(EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Default\+Simulator\+Impl\+::\+Schedule\+Now (
\begin{DoxyParamCaption}
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a3379b3942e284feb17ecb6f2a90a2fb5}{}\label{classns3_1_1DefaultSimulatorImpl_a3379b3942e284feb17ecb6f2a90a2fb5}




Schedule an event to run at the current virtual time.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a9889e663af5245c5624c35611a9db948}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
282 \{
283   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1SystemThread_af6bfffe1a51a4df5f9aa1a468df8bd59}{SystemThread::Equals} (\hyperlink{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{m\_main}), \textcolor{stringliteral}{"
      Simulator::ScheduleNow Thread-unsafe invocation!"});
284 
285   Scheduler::Event ev;
286   ev.impl = event;
287   ev.key.m\_ts = \hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs};
288   ev.key.m\_context = \hyperlink{classns3_1_1DefaultSimulatorImpl_a616b2bcbb1d12b14515f386ce314093b}{GetContext} ();
289   ev.key.m\_uid = \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid};
290   \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid}++;
291   \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents}++;
292   \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->Insert (ev);
293   \textcolor{keywordflow}{return} EventId (event, ev.key.m\_ts, ev.key.m\_context, ev.key.m\_uid);
294 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 18


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Schedule\+With\+Context@{Schedule\+With\+Context}}
\index{Schedule\+With\+Context@{Schedule\+With\+Context}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Schedule\+With\+Context(uint32\+\_\+t context, const Time \&delay, Event\+Impl $\ast$event)}{ScheduleWithContext(uint32_t context, const Time &delay, EventImpl *event)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Schedule\+With\+Context (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{context, }
\item[{const {\bf Time} \&}]{delay, }
\item[{{\bf Event\+Impl} $\ast$}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a94fec0f49d640c8e8067748bd91d97c2}{}\label{classns3_1_1DefaultSimulatorImpl_a94fec0f49d640c8e8067748bd91d97c2}




Schedule a future event execution (in a different context). This method is thread-\/safe\+: it can be called from any thread.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em delay} & Delay until the event expires. \\
\hline
\mbox{\tt in}  & {\em context} & Event context. \\
\hline
\mbox{\tt in}  & {\em event} & The event to schedule. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A unique identifier for the newly-\/scheduled event. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SimulatorImpl_a75a00f1362af7f641cc1467361201b13}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
250 \{
251   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << context << \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep () << event);
252 
253   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1SystemThread_af6bfffe1a51a4df5f9aa1a468df8bd59}{SystemThread::Equals} (\hyperlink{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{m\_main}))
254     \{
255       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} tAbsolute = \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay} + \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{m\_currentTs});
256       Scheduler::Event ev;
257       ev.impl = event;
258       ev.key.m\_ts = (uint64\_t) tAbsolute.GetTimeStep ();
259       ev.key.m\_context = context;
260       ev.key.m\_uid = \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid};
261       \hyperlink{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{m\_uid}++;
262       \hyperlink{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{m\_unscheduledEvents}++;
263       \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->Insert (ev);
264     \}
265   \textcolor{keywordflow}{else}
266     \{
267       EventWithContext ev;
268       ev.context = context;
269       \textcolor{comment}{// Current time added in ProcessEventsWithContext()}
270       ev.timestamp = \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep ();
271       ev.event = event;
272       \{
273         CriticalSection cs (\hyperlink{classns3_1_1DefaultSimulatorImpl_a121da8c24078574aa64f0d5a2f47a462}{m\_eventsWithContextMutex});
274         \hyperlink{classns3_1_1DefaultSimulatorImpl_afef52c1fc06adf9ca1afa762f0a0934d}{m\_eventsWithContext}.push\_back(ev);
275         \hyperlink{classns3_1_1DefaultSimulatorImpl_a12b039f82d7326a0a0bcd38dd09c5d2a}{m\_eventsWithContextEmpty} = \textcolor{keyword}{false};
276       \}
277     \}
278 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Set\+Scheduler@{Set\+Scheduler}}
\index{Set\+Scheduler@{Set\+Scheduler}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Set\+Scheduler(\+Object\+Factory scheduler\+Factory)}{SetScheduler(ObjectFactory schedulerFactory)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Set\+Scheduler (
\begin{DoxyParamCaption}
\item[{{\bf Object\+Factory}}]{scheduler\+Factory}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a96241d5a8259aecbd9ad08ccd54c8708}{}\label{classns3_1_1DefaultSimulatorImpl_a96241d5a8259aecbd9ad08ccd54c8708}
Set the \hyperlink{classns3_1_1Scheduler}{Scheduler} to be used to manage the event list.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em scheduler\+Factory} & A new event scheduler factory.\\
\hline
\end{DoxyParams}
The event scheduler can be set at any time\+: the events scheduled in the previous scheduler will be transfered to the new scheduler before we start to use it. 

Implements \hyperlink{classns3_1_1SimulatorImpl_a15cc88b2e2cd711b5ec503ad8ec517dc}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
115 \{
116   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << schedulerFactory);
117   Ptr<Scheduler> scheduler = schedulerFactory.Create<Scheduler> ();
118 
119   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events} != 0)
120     \{
121       \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->IsEmpty ())
122         \{
123           Scheduler::Event next = \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events}->RemoveNext ();
124           scheduler->Insert (next);
125         \}
126     \}
127   \hyperlink{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{m\_events} = scheduler;
128 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20


\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Stop@{Stop}}
\index{Stop@{Stop}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Stop(void)}{Stop(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Stop (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a2851593d65fdbee8f78fc351dc7d74a0}{}\label{classns3_1_1DefaultSimulatorImpl_a2851593d65fdbee8f78fc351dc7d74a0}




Tell the \hyperlink{classns3_1_1Simulator}{Simulator} the calling event should be the last one executed.

If a running event invokes this method, it will be the last event executed by the \hyperlink{classns3_1_1Simulator_a84be982e6d03b62c3dc3303c75a9b909}{Simulator\+::\+Run} method before returning to the caller. 

Implements \hyperlink{classns3_1_1SimulatorImpl_afbdfb2b01d0e62a7f681801f27820611}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
212 \{
213   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
214   \hyperlink{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}{m\_stop} = \textcolor{keyword}{true};
215 \}
\end{DoxyCode}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!Stop@{Stop}}
\index{Stop@{Stop}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{Stop(const Time \&delay)}{Stop(const Time &delay)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Default\+Simulator\+Impl\+::\+Stop (
\begin{DoxyParamCaption}
\item[{const {\bf Time} \&}]{delay}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a2fbb62a5fc30f2bc09fe68a6346eab79}{}\label{classns3_1_1DefaultSimulatorImpl_a2fbb62a5fc30f2bc09fe68a6346eab79}




Schedule the time delay until the \hyperlink{classns3_1_1Simulator}{Simulator} should stop.

Force the \hyperlink{classns3_1_1Simulator_a84be982e6d03b62c3dc3303c75a9b909}{Simulator\+::\+Run} method to return to the caller when the expiration time of the next event to be processed is greater than or equal to the stop time. The stop time is relative to the current simulation time. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em delay} & The stop time, relative to the current time. \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1SimulatorImpl_a8cd4ff5659b9f06af3da2897a1fea142}{ns3\+::\+Simulator\+Impl}.


\begin{DoxyCode}
219 \{
220   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}.GetTimeStep ());
221   \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (\hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}, &\hyperlink{classns3_1_1Simulator_a2335ba5b62e9066e893fecb21b7f6afd}{Simulator::Stop});
222 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21




\subsection{Member Data Documentation}
\index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+current\+Context@{m\+\_\+current\+Context}}
\index{m\+\_\+current\+Context@{m\+\_\+current\+Context}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Context}{m_currentContext}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+current\+Context\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a16a15129f0af0f7f3a3dd7935164be77}{}\label{classns3_1_1DefaultSimulatorImpl_a16a15129f0af0f7f3a3dd7935164be77}
Execution context of the current event. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+current\+Ts@{m\+\_\+current\+Ts}}
\index{m\+\_\+current\+Ts@{m\+\_\+current\+Ts}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Ts}{m_currentTs}}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+current\+Ts\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}{}\label{classns3_1_1DefaultSimulatorImpl_a8895b26ba85208a9f933ffa4ffcd92c2}
Timestamp of the current event. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+current\+Uid@{m\+\_\+current\+Uid}}
\index{m\+\_\+current\+Uid@{m\+\_\+current\+Uid}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Uid}{m_currentUid}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+current\+Uid\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_acc741f30f8af775c34e4a97be468c721}{}\label{classns3_1_1DefaultSimulatorImpl_acc741f30f8af775c34e4a97be468c721}
Unique id of the current event. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+destroy\+Events@{m\+\_\+destroy\+Events}}
\index{m\+\_\+destroy\+Events@{m\+\_\+destroy\+Events}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+destroy\+Events}{m_destroyEvents}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Destroy\+Events} ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+destroy\+Events\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}{}\label{classns3_1_1DefaultSimulatorImpl_a5082b32e009450692e94da134efe07f4}
The container of events to run at Destroy. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+events@{m\+\_\+events}}
\index{m\+\_\+events@{m\+\_\+events}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+events}{m_events}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Scheduler}$>$ ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+events\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}{}\label{classns3_1_1DefaultSimulatorImpl_a68703f6bd4940f4845dbaa49bb679d16}
The event priority queue. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+events\+With\+Context@{m\+\_\+events\+With\+Context}}
\index{m\+\_\+events\+With\+Context@{m\+\_\+events\+With\+Context}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+events\+With\+Context}{m_eventsWithContext}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Events\+With\+Context} ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+events\+With\+Context\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_afef52c1fc06adf9ca1afa762f0a0934d}{}\label{classns3_1_1DefaultSimulatorImpl_afef52c1fc06adf9ca1afa762f0a0934d}
The container of events from a different context. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+events\+With\+Context\+Empty@{m\+\_\+events\+With\+Context\+Empty}}
\index{m\+\_\+events\+With\+Context\+Empty@{m\+\_\+events\+With\+Context\+Empty}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+events\+With\+Context\+Empty}{m_eventsWithContextEmpty}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+events\+With\+Context\+Empty\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a12b039f82d7326a0a0bcd38dd09c5d2a}{}\label{classns3_1_1DefaultSimulatorImpl_a12b039f82d7326a0a0bcd38dd09c5d2a}
Flag {\ttfamily true} if all events with context have been moved to the primary event queue. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+events\+With\+Context\+Mutex@{m\+\_\+events\+With\+Context\+Mutex}}
\index{m\+\_\+events\+With\+Context\+Mutex@{m\+\_\+events\+With\+Context\+Mutex}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+events\+With\+Context\+Mutex}{m_eventsWithContextMutex}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf System\+Mutex} ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+events\+With\+Context\+Mutex\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a121da8c24078574aa64f0d5a2f47a462}{}\label{classns3_1_1DefaultSimulatorImpl_a121da8c24078574aa64f0d5a2f47a462}
Mutex to control access to the list of events with context. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+main@{m\+\_\+main}}
\index{m\+\_\+main@{m\+\_\+main}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+main}{m_main}}]{\setlength{\rightskip}{0pt plus 5cm}System\+Thread\+::\+Thread\+Id ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+main\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}{}\label{classns3_1_1DefaultSimulatorImpl_ab9fa0ea2495d120f6537699c1dd8784f}
Main execution thread. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+stop@{m\+\_\+stop}}
\index{m\+\_\+stop@{m\+\_\+stop}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+stop}{m_stop}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+stop\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}{}\label{classns3_1_1DefaultSimulatorImpl_a070bd3c9f757f4923dbf0a59c065a5ff}
Flag calling for the end of the simulation. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+uid@{m\+\_\+uid}}
\index{m\+\_\+uid@{m\+\_\+uid}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+uid}{m_uid}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+uid\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}{}\label{classns3_1_1DefaultSimulatorImpl_acb71bb9d73f1819286d4a910ebd03fb4}
Next event unique id. \index{ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}!m\+\_\+unscheduled\+Events@{m\+\_\+unscheduled\+Events}}
\index{m\+\_\+unscheduled\+Events@{m\+\_\+unscheduled\+Events}!ns3\+::\+Default\+Simulator\+Impl@{ns3\+::\+Default\+Simulator\+Impl}}
\subsubsection[{\texorpdfstring{m\+\_\+unscheduled\+Events}{m_unscheduledEvents}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Default\+Simulator\+Impl\+::m\+\_\+unscheduled\+Events\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}{}\label{classns3_1_1DefaultSimulatorImpl_aac2b46d6d41340194cbd291fbcb5443e}
Number of events that have been inserted but not yet scheduled, not counting the Destroy events; this is used for validation 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
core/model/\hyperlink{default-simulator-impl_8h}{default-\/simulator-\/impl.\+h}\item 
core/model/\hyperlink{default-simulator-impl_8cc}{default-\/simulator-\/impl.\+cc}\end{DoxyCompactItemize}
