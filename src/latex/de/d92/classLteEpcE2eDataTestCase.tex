\hypertarget{classLteEpcE2eDataTestCase}{}\section{Lte\+Epc\+E2e\+Data\+Test\+Case Class Reference}
\label{classLteEpcE2eDataTestCase}\index{Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}}


Inheritance diagram for Lte\+Epc\+E2e\+Data\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lte\+Epc\+E2e\+Data\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLteEpcE2eDataTestCase_a2a9cb5a774a5382fcff2e7c54346cc34}{Lte\+Epc\+E2e\+Data\+Test\+Case} (std\+::string \hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name}, std\+::vector$<$ \hyperlink{structEnbTestData}{Enb\+Test\+Data} $>$ v)
\item 
virtual \hyperlink{classLteEpcE2eDataTestCase_af614f2e0f284b1489de33103f0f51112}{$\sim$\+Lte\+Epc\+E2e\+Data\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLteEpcE2eDataTestCase_a7b55bb639cd07d8b68365444a4cea639}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \hyperlink{structEnbTestData}{Enb\+Test\+Data} $>$ \hyperlink{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{m\+\_\+enb\+Test\+Data}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}!Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}}
\index{Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}!Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lte\+Epc\+E2e\+Data\+Test\+Case(std\+::string name, std\+::vector$<$ Enb\+Test\+Data $>$ v)}{LteEpcE2eDataTestCase(std::string name, std::vector< EnbTestData > v)}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Epc\+E2e\+Data\+Test\+Case\+::\+Lte\+Epc\+E2e\+Data\+Test\+Case (
\begin{DoxyParamCaption}
\item[{std\+::string}]{name, }
\item[{std\+::vector$<$ {\bf Enb\+Test\+Data} $>$}]{v}
\end{DoxyParamCaption}
)}\hypertarget{classLteEpcE2eDataTestCase_a2a9cb5a774a5382fcff2e7c54346cc34}{}\label{classLteEpcE2eDataTestCase_a2a9cb5a774a5382fcff2e7c54346cc34}

\begin{DoxyCode}
98   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name}),
99     \hyperlink{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{m\_enbTestData} (v)
100 \{
101   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name});
102 \}
\end{DoxyCode}
\index{Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}!````~Lte\+Epc\+E2e\+Data\+Test\+Case@{$\sim$\+Lte\+Epc\+E2e\+Data\+Test\+Case}}
\index{````~Lte\+Epc\+E2e\+Data\+Test\+Case@{$\sim$\+Lte\+Epc\+E2e\+Data\+Test\+Case}!Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Lte\+Epc\+E2e\+Data\+Test\+Case()}{~LteEpcE2eDataTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Epc\+E2e\+Data\+Test\+Case\+::$\sim$\+Lte\+Epc\+E2e\+Data\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classLteEpcE2eDataTestCase_af614f2e0f284b1489de33103f0f51112}{}\label{classLteEpcE2eDataTestCase_af614f2e0f284b1489de33103f0f51112}

\begin{DoxyCode}
105 \{
106 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lte\+Epc\+E2e\+Data\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLteEpcE2eDataTestCase_a7b55bb639cd07d8b68365444a4cea639}{}\label{classLteEpcE2eDataTestCase_a7b55bb639cd07d8b68365444a4cea639}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
110 \{
111   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{classns3_1_1TestCase_a28f7bb59669c24dae1c290fc17fc9b62}{GetName} ());
112   \hyperlink{group__config_ga2c1b65724f42f8c72276d7e7ad6df6db}{Config::Reset} ();
113   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::CtrlErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
114   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::DataErrorModelEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));  
115   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteHelper::UseIdealRrc"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
116   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lteHelper = CreateObject<LteHelper> ();
117   \hyperlink{classns3_1_1Ptr}{Ptr<PointToPointEpcHelper>} epcHelper = CreateObject<PointToPointEpcHelper> ();
118   lteHelper->\hyperlink{classns3_1_1LteHelper_a324079a1ccd54ce949786b83d6b95915}{SetEpcHelper} (epcHelper);
119 
120   lteHelper->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute}(\textcolor{stringliteral}{"PathlossModel"},
121                           StringValue(\textcolor{stringliteral}{"ns3::FriisPropagationLossModel"}));
122 
123   \textcolor{comment}{// allow jumbo frames on the S1-U link}
124   epcHelper->SetAttribute (\textcolor{stringliteral}{"S1uLinkMtu"}, UintegerValue (30000));
125 
126   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} pgw = epcHelper->GetPgwNode ();
127   
128   \textcolor{comment}{// Create a single RemoteHost}
129   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} remoteHostContainer;
130   remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
131   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} remoteHost = remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0);
132   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
133   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (remoteHostContainer);
134 
135   \textcolor{comment}{// Create the internet}
136   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} p2ph;
137   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (\hyperlink{classns3_1_1DataRate}{DataRate} (\textcolor{stringliteral}{"100Gb/s"})));
138   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"Mtu"}, UintegerValue (30000)); \textcolor{comment}{// jumbo frames here as well}
139   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.010)));  
140   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} internetDevices = p2ph.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (pgw, remoteHost);  
141   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4h;
142   ipv4h.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"1.0.0.0"}, \textcolor{stringliteral}{"255.0.0.0"});
143   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} internetIpIfaces = ipv4h.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (internetDevices);
144   \hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} remoteHostAddr = internetIpIfaces.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (1);
145   
146   \textcolor{comment}{// setup default gateway for the remote hosts}
147   \hyperlink{classns3_1_1Ipv4StaticRoutingHelper}{Ipv4StaticRoutingHelper} ipv4RoutingHelper;
148   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} remoteHostStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (remoteHost->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());
149 
150   \textcolor{comment}{// hardcoded UE addresses for now}
151   remoteHostStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_a8bf5eaa7ba49fe33c78c70d5560b6c39}{AddNetworkRouteTo} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"7.0.0.0"}), 
      \hyperlink{classns3_1_1Ipv4Mask}{Ipv4Mask} (\textcolor{stringliteral}{"255.255.255.0"}), 1);
152   
153 
154   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbs;
155   enbs.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (\hyperlink{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{m\_enbTestData}.size ());
156   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} enbMobility;
157   enbMobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
158   enbMobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (\textcolor{stringliteral}{"ns3::GridPositionAllocator"},
159                                  \textcolor{stringliteral}{"MinX"}, DoubleValue (0.0),
160                                  \textcolor{stringliteral}{"MinY"}, DoubleValue (0.0),
161                                  \textcolor{stringliteral}{"DeltaX"}, DoubleValue (10000.0),
162                                  \textcolor{stringliteral}{"DeltaY"}, DoubleValue (10000.0),
163                                  \textcolor{stringliteral}{"GridWidth"}, UintegerValue (3),
164                                  \textcolor{stringliteral}{"LayoutType"}, StringValue (\textcolor{stringliteral}{"RowFirst"}));
165   enbMobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (enbs);
166   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbLteDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbs);
167   \hyperlink{classns3_1_1NetDeviceContainer_a45709bb572f975569ed985fa89b132f8}{NetDeviceContainer::Iterator} enbLteDevIt = enbLteDevs.
      \hyperlink{classns3_1_1NetDeviceContainer_ad5aac47677fe7277e232bdec5b48a8fc}{Begin} ();
168   
169   uint16\_t ulPort = 1000;
170 
171   \textcolor{keywordflow}{for} (std::vector<EnbTestData>::iterator enbit = \hyperlink{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{m\_enbTestData}.begin ();
172        enbit < \hyperlink{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{m\_enbTestData}.end ();
173        ++enbit, ++enbLteDevIt)
174     \{
175       \hyperlink{group__fatal_ga979468222aa80366c2c98aa1554f3eec}{NS\_ABORT\_IF} (enbLteDevIt ==  enbLteDevs.\hyperlink{classns3_1_1NetDeviceContainer_a8af596b06daf9613da60b4379861d770}{End} ());
176       
177 
178 
179       \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ues;
180       ues.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (enbit->ues.size ());
181       Vector enbPosition = (*enbLteDevIt)->GetNode ()->GetObject<\hyperlink{classns3_1_1MobilityModel}{MobilityModel}> ()->
      \hyperlink{lena-cqi-threshold_8cc_acebf763e1a0478cec225f9547941ae54}{GetPosition} ();
182       \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} ueMobility;
183       ueMobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (\textcolor{stringliteral}{"ns3::UniformDiscPositionAllocator"},
184                                         \textcolor{stringliteral}{"X"}, DoubleValue (enbPosition.x),
185                                         \textcolor{stringliteral}{"Y"}, DoubleValue (enbPosition.y),
186                                         \textcolor{stringliteral}{"rho"}, DoubleValue (100.0));
187       ueMobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
188       ueMobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (ues);
189       \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueLteDevs = lteHelper->
      \hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ues);
190        
191       \textcolor{comment}{// we install the IP stack on the UEs }
192       \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
193       internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (ues);
194 
195       \textcolor{comment}{// assign IP address to UEs, and install applications}
196       \textcolor{keywordflow}{for} (uint32\_t u = 0; u < ues.GetN (); ++u)
197         \{
198 
199           \hyperlink{classns3_1_1Ptr}{Ptr<Node>} ue = ues.Get (u);          
200           \hyperlink{classns3_1_1Ptr}{Ptr<NetDevice>} ueLteDevice = ueLteDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (u);
201           \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ueIpIface = epcHelper->AssignUeIpv4Address (
      \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} (ueLteDevice));
202           \textcolor{comment}{// set the default gateway for the UE}
203           \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} ueStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (ue->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());          
204           ueStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_aee30fa3246c2b42f122dabdff2725331}{SetDefaultRoute} (epcHelper->GetUeDefaultGatewayAddress (), 1);
205 
206 
207           \textcolor{comment}{// we can now attach the UE, which will also activate the default EPS bearer}
208           lteHelper->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueLteDevice, *enbLteDevIt);        
209       
210   
211           uint16\_t dlPort = 2000;          
212           \textcolor{keywordflow}{for} (uint32\_t \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b} = 0; \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b} < enbit->ues.at (u).bearers.size (); ++\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b})
213             \{              
214               \hyperlink{structBearerTestData}{BearerTestData}& bearerTestData = enbit->ues.at (u).bearers.at (
      \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b});
215               
216               \{ \textcolor{comment}{// Downlink}
217                 ++dlPort;
218                 \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} packetSinkHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), dlPort));
219                 \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} apps = packetSinkHelper.Install (ue);
220                 apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.04));
221                 bearerTestData.\hyperlink{structBearerTestData_a6a731d0528d513813da7c22c1d1e38c6}{dlServerApp} = apps.\hyperlink{classns3_1_1ApplicationContainer_a9e565807abd4213a56566a7ccd8d7509}{Get} (0)->
      \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1PacketSink}{PacketSink}> ();
222           
223                 \hyperlink{classns3_1_1UdpEchoClientHelper}{UdpEchoClientHelper} client (ueIpIface.
      \hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (0), dlPort);
224                 client.\hyperlink{classns3_1_1UdpEchoClientHelper_a11228c069ad896f8ed13f4d37c13f51d}{SetAttribute} (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (bearerTestData.
      \hyperlink{structBearerTestData_a2445558cf316cb91e159d8dbf098b700}{numPkts}));
225                 client.SetAttribute (\textcolor{stringliteral}{"Interval"}, TimeValue (bearerTestData.
      \hyperlink{structBearerTestData_a16179db57cfd8ca5e837da1384d5c03d}{interPacketInterval}));
226                 client.SetAttribute (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (bearerTestData.
      \hyperlink{structBearerTestData_a247a1b66bdff7fb5079ddec1b07ff425}{pktSize}));
227                 apps = client.Install (remoteHost);
228                 apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.04));
229                 bearerTestData.\hyperlink{structBearerTestData_af7a00cca0b35d25c41d1e094b89951ca}{dlClientApp} = apps.\hyperlink{classns3_1_1ApplicationContainer_a9e565807abd4213a56566a7ccd8d7509}{Get} (0);
230               \}
231 
232               \{ \textcolor{comment}{// Uplink}
233                 ++ulPort;
234                 \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} packetSinkHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), ulPort));
235                 \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} apps = packetSinkHelper.Install (remoteHost);
236                 apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.8));
237                 bearerTestData.\hyperlink{structBearerTestData_a8fce1512a7cf16729114a69bab92d99e}{ulServerApp} = apps.\hyperlink{classns3_1_1ApplicationContainer_a9e565807abd4213a56566a7ccd8d7509}{Get} (0)->
      \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1PacketSink}{PacketSink}> ();
238           
239                 \hyperlink{classns3_1_1UdpEchoClientHelper}{UdpEchoClientHelper} client (remoteHostAddr, ulPort);
240                 client.SetAttribute (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (bearerTestData.
      \hyperlink{structBearerTestData_a2445558cf316cb91e159d8dbf098b700}{numPkts}));
241                 client.SetAttribute (\textcolor{stringliteral}{"Interval"}, TimeValue (bearerTestData.
      \hyperlink{structBearerTestData_a16179db57cfd8ca5e837da1384d5c03d}{interPacketInterval}));
242                 client.SetAttribute (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (bearerTestData.
      \hyperlink{structBearerTestData_a247a1b66bdff7fb5079ddec1b07ff425}{pktSize}));
243                 apps = client.Install (ue);
244                 apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.8));
245                 bearerTestData.\hyperlink{structBearerTestData_a8c662bad70dd6e2ba12834710db885d8}{ulClientApp} = apps.\hyperlink{classns3_1_1ApplicationContainer_a9e565807abd4213a56566a7ccd8d7509}{Get} (0);
246               \}
247 
248               \hyperlink{structns3_1_1EpsBearer}{EpsBearer} epsBearer (EpsBearer::NGBR\_VOICE\_VIDEO\_GAMING);
249 
250               \hyperlink{classns3_1_1Ptr}{Ptr<EpcTft>} tft = Create<EpcTft> ();
251               \hyperlink{structns3_1_1EpcTft_1_1PacketFilter}{EpcTft::PacketFilter} dlpf;
252               dlpf.\hyperlink{structns3_1_1EpcTft_1_1PacketFilter_afd505cda437b1687abc4432a8bcefbaf}{localPortStart} = dlPort;
253               dlpf.localPortEnd = dlPort;
254               tft->\hyperlink{classns3_1_1EpcTft_a1228456a8abbe48cbc89bbe2d2e9af48}{Add} (dlpf);
255               \hyperlink{structns3_1_1EpcTft_1_1PacketFilter}{EpcTft::PacketFilter} ulpf;
256               ulpf.\hyperlink{structns3_1_1EpcTft_1_1PacketFilter_aa96ab9356c91b14059220d00155c32b5}{remotePortStart} = ulPort;
257               ulpf.\hyperlink{structns3_1_1EpcTft_1_1PacketFilter_a4bcdd15a9526e27eabd474276f691cf1}{remotePortEnd} = ulPort;
258               tft->\hyperlink{classns3_1_1EpcTft_a1228456a8abbe48cbc89bbe2d2e9af48}{Add} (ulpf);                            
259  
260               \textcolor{comment}{// all data will go over the dedicated bearer instead of the default EPS bearer}
261               lteHelper->\hyperlink{classns3_1_1LteHelper_af28041edd4c96bde1a2e07c90e363dcc}{ActivateDedicatedEpsBearer} (ueLteDevice, epsBearer, tft)
      ;
262             \}
263         \} 
264             
265     \} 
266 
267   \hyperlink{group__config_gadce03667ec621d64ce4aace85d9bcfd0}{Config::Set} (\textcolor{stringliteral}{"
      /NodeList/*/DeviceList/*/LteEnbRrc/UeMap/*/RadioBearerMap/*/LteRlc/MaxTxBufferSize"},
268                UintegerValue (2 * 1024 * 1024));
269   \hyperlink{group__config_gadce03667ec621d64ce4aace85d9bcfd0}{Config::Set} (\textcolor{stringliteral}{"/NodeList/*/DeviceList/*/LteUeRrc/RadioBearerMap/*/LteRlc/MaxTxBufferSize"},
270                UintegerValue (2 * 1024 * 1024));
271 
272 
273   \textcolor{keywordtype}{double} statsStartTime = 0.040; \textcolor{comment}{// need to allow for RRC connection establishment + SRS}
274   \textcolor{keywordtype}{double} statsDuration = 2.0;
275     
276   lteHelper->\hyperlink{classns3_1_1LteHelper_adc62a53efe0437cf09062c9d6a95af3d}{EnablePdcpTraces} ();
277 
278   lteHelper->\hyperlink{classns3_1_1LteHelper_a1017c1f2ee9f5a640c50c25161a57758}{GetPdcpStats} ()->SetAttribute (\textcolor{stringliteral}{"StartTime"}, TimeValue (
      \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsStartTime)));
279   lteHelper->\hyperlink{classns3_1_1LteHelper_a1017c1f2ee9f5a640c50c25161a57758}{GetPdcpStats} ()->SetAttribute (\textcolor{stringliteral}{"EpochDuration"}, TimeValue (
      \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsDuration)));
280   
281   
282   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsStartTime + statsDuration - 0.0001));  
283   Simulator::Run ();
284 
285   uint64\_t imsiCounter = 0;
286 
287   \textcolor{keywordflow}{for} (std::vector<EnbTestData>::iterator enbit = \hyperlink{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{m\_enbTestData}.begin ();
288        enbit < \hyperlink{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{m\_enbTestData}.end ();
289        ++enbit)
290     \{
291       \textcolor{keywordflow}{for} (std::vector<UeTestData>::iterator ueit = enbit->ues.begin ();
292            ueit < enbit->ues.end ();
293            ++ueit)
294         \{                    
295           uint64\_t imsi = ++imsiCounter;
296           \textcolor{keywordflow}{for} (uint32\_t \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b} = 0; \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b} < ueit->bearers.size (); ++\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b})
297             \{
298               \textcolor{comment}{// LCID 0, 1, 2 are for SRBs}
299               \textcolor{comment}{// LCID 3 is (at the moment) the Default EPS bearer, and is unused in this test program}
300               uint8\_t lcid = \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}+4;
301               uint32\_t expectedPkts = ueit->bearers.at (\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}).numPkts;
302               uint32\_t expectedBytes = (ueit->bearers.at (\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}).numPkts) * (ueit->bearers.at (
      \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}).pktSize);
303               uint32\_t txPktsPdcpDl = lteHelper->\hyperlink{classns3_1_1LteHelper_a1017c1f2ee9f5a640c50c25161a57758}{GetPdcpStats} ()->GetDlTxPackets (imsi, lcid);
304               uint32\_t rxPktsPdcpDl = lteHelper->\hyperlink{classns3_1_1LteHelper_a1017c1f2ee9f5a640c50c25161a57758}{GetPdcpStats} ()->GetDlRxPackets (imsi, lcid);
305               uint32\_t txPktsPdcpUl = lteHelper->\hyperlink{classns3_1_1LteHelper_a1017c1f2ee9f5a640c50c25161a57758}{GetPdcpStats} ()->GetUlTxPackets (imsi, lcid);
306               uint32\_t rxPktsPdcpUl = lteHelper->\hyperlink{classns3_1_1LteHelper_a1017c1f2ee9f5a640c50c25161a57758}{GetPdcpStats} ()->GetUlRxPackets (imsi, lcid);
307               uint32\_t rxBytesDl = ueit->bearers.at (\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}).dlServerApp->GetTotalRx ();
308               uint32\_t rxBytesUl = ueit->bearers.at (\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}).ulServerApp->GetTotalRx ();
309               
310               
311               \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (txPktsPdcpDl, 
312                                      expectedPkts, 
313                                      \textcolor{stringliteral}{"wrong TX PDCP packets in downlink for IMSI="} << imsi << \textcolor{stringliteral}{" LCID="} << (
      uint16\_t) lcid);
314               
315               \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (rxPktsPdcpDl, 
316                                      expectedPkts, 
317                                      \textcolor{stringliteral}{"wrong RX PDCP packets in downlink for IMSI="} << imsi << \textcolor{stringliteral}{" LCID="} << (
      uint16\_t) lcid);
318               \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (txPktsPdcpUl, 
319                                      expectedPkts, 
320                                      \textcolor{stringliteral}{"wrong TX PDCP packets in uplink for IMSI="} << imsi << \textcolor{stringliteral}{" LCID="} << (
      uint16\_t) lcid);
321               \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (rxPktsPdcpUl, 
322                                      expectedPkts, 
323                                      \textcolor{stringliteral}{"wrong RX PDCP packets in uplink for IMSI="} << imsi << \textcolor{stringliteral}{" LCID="} << (
      uint16\_t) lcid);        
324 
325               \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (rxBytesDl, 
326                                      expectedBytes, 
327                                      \textcolor{stringliteral}{"wrong total received bytes in downlink"});
328               \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (rxBytesUl, 
329                                      expectedBytes, 
330                                      \textcolor{stringliteral}{"wrong total received bytes in uplink"});
331             \}
332         \}      
333     \}
334   
335   Simulator::Destroy ();
336 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}!m\+\_\+enb\+Test\+Data@{m\+\_\+enb\+Test\+Data}}
\index{m\+\_\+enb\+Test\+Data@{m\+\_\+enb\+Test\+Data}!Lte\+Epc\+E2e\+Data\+Test\+Case@{Lte\+Epc\+E2e\+Data\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+enb\+Test\+Data}{m_enbTestData}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Enb\+Test\+Data}$>$ Lte\+Epc\+E2e\+Data\+Test\+Case\+::m\+\_\+enb\+Test\+Data\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}{}\label{classLteEpcE2eDataTestCase_aa2d95eb5a8d25e0d6caa7dbdbe77a85e}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lte/test/\hyperlink{test-lte-epc-e2e-data_8cc}{test-\/lte-\/epc-\/e2e-\/data.\+cc}\end{DoxyCompactItemize}
