\hypertarget{classns3_1_1Ipv6ExtensionFragment}{}\section{ns3\+:\+:Ipv6\+Extension\+Fragment Class Reference}
\label{classns3_1_1Ipv6ExtensionFragment}\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}


I\+Pv6 Extension Fragment.  




{\ttfamily \#include $<$ipv6-\/extension.\+h$>$}



Inheritance diagram for ns3\+:\+:Ipv6\+Extension\+Fragment\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Ipv6\+Extension\+Fragment\+:
% FIG 1
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1Ipv6ExtensionFragment_1_1Fragments}{Fragments}
\begin{DoxyCompactList}\small\item\em This class stores the fragments of a packet waiting to be rebuilt. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::pair$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$, \hyperlink{classns3_1_1Ipv6Header}{Ipv6\+Header} $>$ \hyperlink{classns3_1_1Ipv6ExtensionFragment_a52bf3800a9db6fe2eb1a1c2b3a4414d8}{Ipv6\+Payload\+Header\+Pair}
\begin{DoxyCompactList}\small\item\em Pair of a packet and an \hyperlink{classns3_1_1Ipv6}{Ipv6} header. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ipv6ExtensionFragment_a392174ac90cc0fce619bcccba929f05b}{Ipv6\+Extension\+Fragment} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv6ExtensionFragment_a829d639659535cbfd2003db6d69b007a}{$\sim$\+Ipv6\+Extension\+Fragment} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
virtual uint8\+\_\+t \hyperlink{classns3_1_1Ipv6ExtensionFragment_a8192d49683cb5d89db8cf74a8a72f85a}{Get\+Extension\+Number} () const 
\begin{DoxyCompactList}\small\item\em Get the extension number. \end{DoxyCompactList}\item 
virtual uint8\+\_\+t \hyperlink{classns3_1_1Ipv6ExtensionFragment_a8563953a172a744473bf7f80cf1ef536}{Process} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \&packet, uint8\+\_\+t offset, \hyperlink{classns3_1_1Ipv6Header}{Ipv6\+Header} const \&ipv6\+Header, \hyperlink{classns3_1_1Ipv6Address}{Ipv6\+Address} dst, uint8\+\_\+t $\ast$next\+Header, bool \&stop\+Processing, bool \&is\+Dropped, \hyperlink{classns3_1_1Ipv6L3Protocol_a33c64db9bc35f71ff368b132bfffa37a}{Ipv6\+L3\+Protocol\+::\+Drop\+Reason} \&drop\+Reason)
\begin{DoxyCompactList}\small\item\em Process method Called from \hyperlink{classns3_1_1Ipv6L3Protocol_a8a95d576e8aee9a571db93bf686d850a}{Ipv6\+L3\+Protocol\+::\+Receive}. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1Ipv6ExtensionFragment_a60bc0fdd5a5d1bcb2223c98909eef44e}{Get\+Fragments} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ipv6Header}{Ipv6\+Header} ipv6\+Header, uint32\+\_\+t fragment\+Size, \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1Ipv6ExtensionFragment_a52bf3800a9db6fe2eb1a1c2b3a4414d8}{Ipv6\+Payload\+Header\+Pair} $>$ \&list\+Fragments)
\begin{DoxyCompactList}\small\item\em Fragment a packet. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1Ipv6ExtensionFragment_a4feb01a4a730944516ac8defa19877fd}{Get\+Type\+Id} ()
\begin{DoxyCompactList}\small\item\em Get the type identificator. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const uint8\+\_\+t \hyperlink{classns3_1_1Ipv6ExtensionFragment_ae87f2248d10cdb25e8e082fa74049425}{E\+X\+T\+\_\+\+N\+U\+M\+B\+ER} = 44
\begin{DoxyCompactList}\small\item\em Fragmentation extension number. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1Ipv6ExtensionFragment_a73457903e06c1f12727974f977ea667c}{Do\+Dispose} ()
\begin{DoxyCompactList}\small\item\em Dispose this object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::map$<$ std\+::pair$<$ \hyperlink{classns3_1_1Ipv6Address}{Ipv6\+Address}, uint32\+\_\+t $>$, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv6ExtensionFragment_1_1Fragments}{Fragments} $>$ $>$ \hyperlink{classns3_1_1Ipv6ExtensionFragment_a6d425bc0c4a0fe492883dfd93d73881d}{Map\+Fragments\+\_\+t}
\begin{DoxyCompactList}\small\item\em Container for the packet fragments. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1Ipv6ExtensionFragment_a4676eb2d539562fe8b25f6711f120718}{Handle\+Fragments\+Timeout} (std\+::pair$<$ \hyperlink{classns3_1_1Ipv6Address}{Ipv6\+Address}, uint32\+\_\+t $>$ key, \hyperlink{classns3_1_1Ipv6Header}{Ipv6\+Header} ip\+Header)
\begin{DoxyCompactList}\small\item\em Process the timeout for packet fragments. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classns3_1_1Ipv6ExtensionFragment_a6f75c67978120871d9308006f56daed3}{Get\+Partial\+Packet} () const 
\begin{DoxyCompactList}\small\item\em Get the packet parts so far received. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1Ipv6ExtensionFragment_aae27f692112a48d0283b59fec7b00f38}{Set\+Timeout\+Event\+Id} (\hyperlink{classns3_1_1EventId}{Event\+Id} event)
\begin{DoxyCompactList}\small\item\em Set the Timeout \hyperlink{classns3_1_1EventId}{Event\+Id}. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1Ipv6ExtensionFragment_af7aabaa29fc68fdab347dd6154db22e6}{Cancel\+Timeout} ()
\begin{DoxyCompactList}\small\item\em Cancel the timeout event. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ipv6ExtensionFragment_a6d425bc0c4a0fe492883dfd93d73881d}{Map\+Fragments\+\_\+t} \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\+\_\+fragments}
\begin{DoxyCompactList}\small\item\em The hash of fragmented packets. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
I\+Pv6 Extension Fragment. 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Ipv6\+Payload\+Header\+Pair@{Ipv6\+Payload\+Header\+Pair}}
\index{Ipv6\+Payload\+Header\+Pair@{Ipv6\+Payload\+Header\+Pair}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Ipv6\+Payload\+Header\+Pair}{Ipv6PayloadHeaderPair}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::pair$<${\bf Ptr}$<${\bf Packet}$>$, {\bf Ipv6\+Header}$>$ {\bf ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Ipv6\+Payload\+Header\+Pair}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a52bf3800a9db6fe2eb1a1c2b3a4414d8}{}\label{classns3_1_1Ipv6ExtensionFragment_a52bf3800a9db6fe2eb1a1c2b3a4414d8}


Pair of a packet and an \hyperlink{classns3_1_1Ipv6}{Ipv6} header. 

\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Map\+Fragments\+\_\+t@{Map\+Fragments\+\_\+t}}
\index{Map\+Fragments\+\_\+t@{Map\+Fragments\+\_\+t}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Map\+Fragments\+\_\+t}{MapFragments_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::map$<$std\+::pair$<${\bf Ipv6\+Address}, uint32\+\_\+t$>$, {\bf Ptr}$<${\bf Fragments}$>$ $>$ {\bf ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Map\+Fragments\+\_\+t}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a6d425bc0c4a0fe492883dfd93d73881d}{}\label{classns3_1_1Ipv6ExtensionFragment_a6d425bc0c4a0fe492883dfd93d73881d}


Container for the packet fragments. 



\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Ipv6\+Extension\+Fragment@{Ipv6\+Extension\+Fragment}}
\index{Ipv6\+Extension\+Fragment@{Ipv6\+Extension\+Fragment}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Ipv6\+Extension\+Fragment()}{Ipv6ExtensionFragment()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Ipv6\+Extension\+Fragment (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a392174ac90cc0fce619bcccba929f05b}{}\label{classns3_1_1Ipv6ExtensionFragment_a392174ac90cc0fce619bcccba929f05b}


Constructor. 


\begin{DoxyCode}
323 \{
324   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
325 \}
\end{DoxyCode}
\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!````~Ipv6\+Extension\+Fragment@{$\sim$\+Ipv6\+Extension\+Fragment}}
\index{````~Ipv6\+Extension\+Fragment@{$\sim$\+Ipv6\+Extension\+Fragment}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{$\sim$\+Ipv6\+Extension\+Fragment()}{~Ipv6ExtensionFragment()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Ipv6\+Extension\+Fragment\+::$\sim$\+Ipv6\+Extension\+Fragment (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a829d639659535cbfd2003db6d69b007a}{}\label{classns3_1_1Ipv6ExtensionFragment_a829d639659535cbfd2003db6d69b007a}


Destructor. 


\begin{DoxyCode}
328 \{
329   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
330 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Cancel\+Timeout@{Cancel\+Timeout}}
\index{Cancel\+Timeout@{Cancel\+Timeout}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Cancel\+Timeout()}{CancelTimeout()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Cancel\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_af7aabaa29fc68fdab347dd6154db22e6}{}\label{classns3_1_1Ipv6ExtensionFragment_af7aabaa29fc68fdab347dd6154db22e6}


Cancel the timeout event. 

\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Do\+Dispose()}{DoDispose()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a73457903e06c1f12727974f977ea667c}{}\label{classns3_1_1Ipv6ExtensionFragment_a73457903e06c1f12727974f977ea667c}


Dispose this object. 



Reimplemented from \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{ns3\+::\+Object}.


\begin{DoxyCode}
333 \{
334   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
335 
336   \textcolor{keywordflow}{for} (MapFragments\_t::iterator it = \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.begin (); it != 
      \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.end (); it++)
337     \{
338       it->second = 0;
339     \}
340 
341   \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.clear ();
342   \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{Ipv6Extension::DoDispose} ();
343 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Get\+Extension\+Number@{Get\+Extension\+Number}}
\index{Get\+Extension\+Number@{Get\+Extension\+Number}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Get\+Extension\+Number() const }{GetExtensionNumber() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Get\+Extension\+Number (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a8192d49683cb5d89db8cf74a8a72f85a}{}\label{classns3_1_1Ipv6ExtensionFragment_a8192d49683cb5d89db8cf74a8a72f85a}


Get the extension number. 

\begin{DoxyReturn}{Returns}
extension number 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Ipv6Extension_a293ec615901976f850085116ec882eb7}{ns3\+::\+Ipv6\+Extension}.


\begin{DoxyCode}
346 \{
347   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
348 
349   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1Ipv6ExtensionFragment_ae87f2248d10cdb25e8e082fa74049425}{EXT\_NUMBER};
350 \}
\end{DoxyCode}
\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Get\+Fragments@{Get\+Fragments}}
\index{Get\+Fragments@{Get\+Fragments}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Get\+Fragments(\+Ptr$<$ Packet $>$ packet, Ipv6\+Header ipv6\+Header, uint32\+\_\+t fragment\+Size, std\+::list$<$ Ipv6\+Payload\+Header\+Pair $>$ \&list\+Fragments)}{GetFragments(Ptr< Packet > packet, Ipv6Header ipv6Header, uint32_t fragmentSize, std::list< Ipv6PayloadHeaderPair > &listFragments)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Get\+Fragments (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{{\bf Ipv6\+Header}}]{ipv6\+Header, }
\item[{uint32\+\_\+t}]{fragment\+Size, }
\item[{{\bf std\+::list}$<$ {\bf Ipv6\+Payload\+Header\+Pair} $>$ \&}]{list\+Fragments}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a60bc0fdd5a5d1bcb2223c98909eef44e}{}\label{classns3_1_1Ipv6ExtensionFragment_a60bc0fdd5a5d1bcb2223c98909eef44e}


Fragment a packet. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet. \\
\hline
{\em ipv6\+Header} & the I\+Pv6 header. \\
\hline
{\em fragment\+Size} & the maximal size of the fragment (unfragmentable part + fragmentation header + fragmentable part). \\
\hline
{\em list\+Fragments} & the list of fragments. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
425 \{
426   Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
427 
428   uint8\_t nextHeader = ipv6Header.GetNextHeader ();
429   uint8\_t ipv6HeaderSize = ipv6Header.GetSerializedSize ();
430 
431   uint8\_t \hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type};
432   p->CopyData (&type, \textcolor{keyword}{sizeof}(type));
433 
434   \textcolor{keywordtype}{bool} moreHeader = \textcolor{keyword}{true};
435   \textcolor{keywordflow}{if} (!(nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9aa0413202f88bebb4f91a138e317b6bbd}{Ipv6Header::IPV6\_EXT\_HOP\_BY\_HOP} || nextHeader == 
      \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING}
436         || (nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9abfe6e82da1c9945685a3bf9dbfbe974b}{Ipv6Header::IPV6\_EXT\_DESTINATION} && type == 
      \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING})))
437     \{
438       moreHeader = \textcolor{keyword}{false};
439       ipv6Header.SetNextHeader (\hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a5839daf3fdfb16dfdc94a208ca6ebc5a}{Ipv6Header::IPV6\_EXT\_FRAGMENTATION});
440     \}
441 
442   std::list<std::pair<Ipv6ExtensionHeader *, uint8\_t> > unfragmentablePart;
443   uint32\_t unfragmentablePartSize = 0;
444 
445   Ptr<Ipv6ExtensionDemux> extensionDemux = \hyperlink{classns3_1_1Ipv6Extension_a71cc2e202ef7605b1f645d8c6a384657}{GetNode} ()->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<Ipv6ExtensionDemux> ();
446   Ptr<Ipv6Extension> extension = extensionDemux->GetExtension (nextHeader);
447   uint8\_t extensionHeaderLength;
448 
449   \textcolor{keywordflow}{while} (moreHeader)
450     \{
451       \textcolor{keywordflow}{if} (nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9aa0413202f88bebb4f91a138e317b6bbd}{Ipv6Header::IPV6\_EXT\_HOP\_BY\_HOP})
452         \{
453           Ipv6ExtensionHopByHopHeader *hopbyhopHeader = \textcolor{keyword}{new} Ipv6ExtensionHopByHopHeader ();
454           p->RemoveHeader (*hopbyhopHeader);
455 
456           nextHeader = hopbyhopHeader->GetNextHeader ();
457           extensionHeaderLength = hopbyhopHeader->GetLength ();
458 
459           uint8\_t \hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type};
460           p->CopyData (&type, \textcolor{keyword}{sizeof}(type));
461 
462           \textcolor{keywordflow}{if} (!(nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9aa0413202f88bebb4f91a138e317b6bbd}{Ipv6Header::IPV6\_EXT\_HOP\_BY\_HOP} || nextHeader 
      == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING}
463                 || (nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9abfe6e82da1c9945685a3bf9dbfbe974b}{Ipv6Header::IPV6\_EXT\_DESTINATION} && type 
      == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING})))
464             \{
465               moreHeader = \textcolor{keyword}{false};
466               hopbyhopHeader->SetNextHeader (\hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a5839daf3fdfb16dfdc94a208ca6ebc5a}{Ipv6Header::IPV6\_EXT\_FRAGMENTATION}
      );
467             \}
468 
469           unfragmentablePart.push\_back (std::pair<Ipv6ExtensionHeader *, uint8\_t> (hopbyhopHeader, 
      \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9aa0413202f88bebb4f91a138e317b6bbd}{Ipv6Header::IPV6\_EXT\_HOP\_BY\_HOP}));
470           unfragmentablePartSize += extensionHeaderLength;
471         \}
472       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING})
473         \{
474           uint8\_t buf[2];
475           p->CopyData (buf, \textcolor{keyword}{sizeof}(buf));
476           uint8\_t numberAddress = buf[1] / 2;
477           Ipv6ExtensionLooseRoutingHeader *routingHeader = \textcolor{keyword}{new} Ipv6ExtensionLooseRoutingHeader ();
478           routingHeader->SetNumberAddress (numberAddress);
479           p->RemoveHeader (*routingHeader);
480 
481           nextHeader = routingHeader->GetNextHeader ();
482           extensionHeaderLength = routingHeader->GetLength ();
483 
484           uint8\_t \hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type};
485           p->CopyData (&type, \textcolor{keyword}{sizeof}(type));
486           \textcolor{keywordflow}{if} (!(nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9aa0413202f88bebb4f91a138e317b6bbd}{Ipv6Header::IPV6\_EXT\_HOP\_BY\_HOP} || nextHeader 
      == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING}
487                 || (nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9abfe6e82da1c9945685a3bf9dbfbe974b}{Ipv6Header::IPV6\_EXT\_DESTINATION} && type 
      == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING})))
488             \{
489               moreHeader = \textcolor{keyword}{false};
490               routingHeader->SetNextHeader (\hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a5839daf3fdfb16dfdc94a208ca6ebc5a}{Ipv6Header::IPV6\_EXT\_FRAGMENTATION}
      );
491             \}
492 
493           unfragmentablePart.push\_back (std::pair<Ipv6ExtensionHeader *, uint8\_t> (routingHeader, 
      \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING}));
494           unfragmentablePartSize += extensionHeaderLength;
495         \}
496       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9abfe6e82da1c9945685a3bf9dbfbe974b}{Ipv6Header::IPV6\_EXT\_DESTINATION})
497         \{
498           Ipv6ExtensionDestinationHeader *destinationHeader = \textcolor{keyword}{new} Ipv6ExtensionDestinationHeader ();
499           p->RemoveHeader (*destinationHeader);
500 
501           nextHeader = destinationHeader->GetNextHeader ();
502           extensionHeaderLength = destinationHeader->GetLength ();
503 
504           uint8\_t \hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type};
505           p->CopyData (&type, \textcolor{keyword}{sizeof}(type));
506           \textcolor{keywordflow}{if} (!(nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9aa0413202f88bebb4f91a138e317b6bbd}{Ipv6Header::IPV6\_EXT\_HOP\_BY\_HOP} || nextHeader 
      == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING}
507                 || (nextHeader == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9abfe6e82da1c9945685a3bf9dbfbe974b}{Ipv6Header::IPV6\_EXT\_DESTINATION} && type 
      == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING})))
508             \{
509               moreHeader = \textcolor{keyword}{false};
510               destinationHeader->SetNextHeader (
      \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a5839daf3fdfb16dfdc94a208ca6ebc5a}{Ipv6Header::IPV6\_EXT\_FRAGMENTATION});
511             \}
512 
513           unfragmentablePart.push\_back (std::pair<Ipv6ExtensionHeader *, uint8\_t> (destinationHeader, 
      \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9abfe6e82da1c9945685a3bf9dbfbe974b}{Ipv6Header::IPV6\_EXT\_DESTINATION}));
514           unfragmentablePartSize += extensionHeaderLength;
515         \}
516     \}
517 
518   Ipv6ExtensionFragmentHeader fragmentHeader;
519   uint8\_t fragmentHeaderSize = fragmentHeader.GetSerializedSize ();
520 
521   uint32\_t maxFragmentablePartSize = maxFragmentSize - ipv6HeaderSize - unfragmentablePartSize - 
      fragmentHeaderSize;
522   uint32\_t currentFragmentablePartSize = 0;
523 
524   \textcolor{keywordtype}{bool} moreFragment = \textcolor{keyword}{true};
525   uint32\_t identification = (uint32\_t) \hyperlink{classns3_1_1Ipv6Extension_a785a3e81279962a9515646780b08e26a}{m\_uvar}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (0, (uint32\_t)-1);
526   uint16\_t offset = 0;
527 
528   \textcolor{keywordflow}{do}
529     \{
530       \textcolor{keywordflow}{if} (p->GetSize () > offset + maxFragmentablePartSize)
531         \{
532           moreFragment = \textcolor{keyword}{true};
533           currentFragmentablePartSize = maxFragmentablePartSize;
534           currentFragmentablePartSize -= currentFragmentablePartSize % 8;
535         \}
536       \textcolor{keywordflow}{else}
537         \{
538           moreFragment = \textcolor{keyword}{false};
539           currentFragmentablePartSize = p->GetSize () - offset;
540         \}
541 
542 
543       fragmentHeader.SetNextHeader (nextHeader);
544       fragmentHeader.SetOffset (offset);
545       fragmentHeader.SetMoreFragment (moreFragment);
546       fragmentHeader.SetIdentification (identification);
547 
548       Ptr<Packet> fragment = p->CreateFragment (offset, currentFragmentablePartSize);
549       offset += currentFragmentablePartSize;
550 
551       fragment->AddHeader (fragmentHeader);
552 
553       \textcolor{keywordflow}{for} (\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std::list}<std::pair<Ipv6ExtensionHeader *, uint8\_t> >::iterator it = unfragmentablePart
      .begin (); it != unfragmentablePart.end (); it++)
554         \{
555           \textcolor{keywordflow}{if} (it->second == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9aa0413202f88bebb4f91a138e317b6bbd}{Ipv6Header::IPV6\_EXT\_HOP\_BY\_HOP})
556             \{
557               Ipv6ExtensionHopByHopHeader * p =
558                 \textcolor{keyword}{dynamic\_cast<}Ipv6ExtensionHopByHopHeader *\textcolor{keyword}{>} (it->first);
559               \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (p != 0);
560               fragment->AddHeader (*p);
561             \}
562           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (it->second == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9a4f6f9116305705bc2b3d04ff5c4bd2a8}{Ipv6Header::IPV6\_EXT\_ROUTING})
563             \{
564               Ipv6ExtensionLooseRoutingHeader * p =
565                 \textcolor{keyword}{dynamic\_cast<}Ipv6ExtensionLooseRoutingHeader *\textcolor{keyword}{>} (it->first);
566               \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (p != 0);
567               fragment->AddHeader (*p);
568             \}
569           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (it->second == \hyperlink{classns3_1_1Ipv6Header_a226429221a066c5e3b1f260caf27d1e9abfe6e82da1c9945685a3bf9dbfbe974b}{Ipv6Header::IPV6\_EXT\_DESTINATION})
570             \{
571               Ipv6ExtensionDestinationHeader * p =
572                 \textcolor{keyword}{dynamic\_cast<}Ipv6ExtensionDestinationHeader *\textcolor{keyword}{>} (it->first);
573               \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (p != 0);
574               fragment->AddHeader (*p);
575             \}
576         \}
577 
578       ipv6Header.SetPayloadLength (fragment->GetSize ());
579 
580       std::ostringstream oss;
581       oss << ipv6Header;
582       fragment->Print (oss);
583 
584       listFragments.push\_back (\hyperlink{classns3_1_1Ipv6ExtensionFragment_a52bf3800a9db6fe2eb1a1c2b3a4414d8}{Ipv6PayloadHeaderPair} (fragment, ipv6Header));
585     \}
586   \textcolor{keywordflow}{while} (moreFragment);
587 
588   \textcolor{keywordflow}{for} (\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std::list}<std::pair<Ipv6ExtensionHeader *, uint8\_t> >::iterator it = unfragmentablePart.
      begin (); it != unfragmentablePart.end (); it++)
589     \{
590       \textcolor{keyword}{delete} it->first;
591     \}
592 
593   unfragmentablePart.clear ();
594 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Get\+Partial\+Packet@{Get\+Partial\+Packet}}
\index{Get\+Partial\+Packet@{Get\+Partial\+Packet}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Get\+Partial\+Packet() const }{GetPartialPacket() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Get\+Partial\+Packet (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a6f75c67978120871d9308006f56daed3}{}\label{classns3_1_1Ipv6ExtensionFragment_a6f75c67978120871d9308006f56daed3}


Get the packet parts so far received. 

\begin{DoxyReturn}{Returns}
the partial packet 
\end{DoxyReturn}
\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id()}{GetTypeId()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a4feb01a4a730944516ac8defa19877fd}{}\label{classns3_1_1Ipv6ExtensionFragment_a4feb01a4a730944516ac8defa19877fd}


Get the type identificator. 

\begin{DoxyReturn}{Returns}
type identificator 
\end{DoxyReturn}

\begin{DoxyCode}
313 \{
314   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::Ipv6ExtensionFragment"})
315     .SetParent<\hyperlink{classns3_1_1Ipv6Extension_a80f41b66e74fbe9c43c0904dd5593aab}{Ipv6Extension}> ()
316     .SetGroupName (\textcolor{stringliteral}{"Internet"})
317     .AddConstructor<\hyperlink{classns3_1_1Ipv6ExtensionFragment_a392174ac90cc0fce619bcccba929f05b}{Ipv6ExtensionFragment}> ()
318   ;
319   \textcolor{keywordflow}{return} tid;
320 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Handle\+Fragments\+Timeout@{Handle\+Fragments\+Timeout}}
\index{Handle\+Fragments\+Timeout@{Handle\+Fragments\+Timeout}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Handle\+Fragments\+Timeout(std\+::pair$<$ Ipv6\+Address, uint32\+\_\+t $>$ key, Ipv6\+Header ip\+Header)}{HandleFragmentsTimeout(std::pair< Ipv6Address, uint32_t > key, Ipv6Header ipHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Handle\+Fragments\+Timeout (
\begin{DoxyParamCaption}
\item[{std\+::pair$<$ {\bf Ipv6\+Address}, uint32\+\_\+t $>$}]{key, }
\item[{{\bf Ipv6\+Header}}]{ip\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a4676eb2d539562fe8b25f6711f120718}{}\label{classns3_1_1Ipv6ExtensionFragment_a4676eb2d539562fe8b25f6711f120718}


Process the timeout for packet fragments. 


\begin{DoxyParams}{Parameters}
{\em key} & representing the packet fragments \\
\hline
{\em ip\+Header} & the IP header of the original packet \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
599 \{
600   Ptr<Fragments> fragments;
601 
602   MapFragments\_t::iterator it = \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.find (fragmentsId);
603   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG}(it != \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.end (), \textcolor{stringliteral}{"IPv6 Fragment timeout reached for
       non-existent fragment"});
604   fragments = it->second;
605 
606   Ptr<Packet> packet = fragments->GetPartialPacket ();
607 
608   \textcolor{comment}{// if we have at least 8 bytes, we can send an ICMP.}
609   \textcolor{keywordflow}{if} ( packet->GetSize () > 8 )
610     \{
611       Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = packet->Copy ();
612       p->AddHeader (ipHeader);
613       Ptr<Icmpv6L4Protocol> icmp = \hyperlink{classns3_1_1Ipv6Extension_a71cc2e202ef7605b1f645d8c6a384657}{GetNode} ()->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<Icmpv6L4Protocol> ();
614       icmp->SendErrorTimeExceeded (p, ipHeader.GetSourceAddress (), 
      \hyperlink{classns3_1_1Icmpv6Header_a643af752203ad4456f89d3d1ab49943aa5798a6dc190dfc603258e1313a4266a1}{Icmpv6Header::ICMPV6\_FRAGTIME});
615     \}
616 
617   Ptr<Ipv6L3Protocol> ipL3 = \hyperlink{classns3_1_1Ipv6Extension_a71cc2e202ef7605b1f645d8c6a384657}{GetNode} ()->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<Ipv6L3Protocol> ();
618   ipL3->ReportDrop (ipHeader, packet, \hyperlink{classns3_1_1Ipv6L3Protocol_a33c64db9bc35f71ff368b132bfffa37aa27ee7f562d7201ffd26f3e08bf620d0a}{Ipv6L3Protocol::DROP\_FRAGMENT\_TIMEOUT}
      );
619 
620   \textcolor{comment}{// clear the buffers}
621   \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.erase (fragmentsId);
622 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Process@{Process}}
\index{Process@{Process}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Process(\+Ptr$<$ Packet $>$ \&packet, uint8\+\_\+t offset, Ipv6\+Header const \&ipv6\+Header, Ipv6\+Address dst, uint8\+\_\+t $\ast$next\+Header, bool \&stop\+Processing, bool \&is\+Dropped, Ipv6\+L3\+Protocol\+::\+Drop\+Reason \&drop\+Reason)}{Process(Ptr< Packet > &packet, uint8_t offset, Ipv6Header const &ipv6Header, Ipv6Address dst, uint8_t *nextHeader, bool &stopProcessing, bool &isDropped, Ipv6L3Protocol::DropReason &dropReason)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Process (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$ \&}]{packet, }
\item[{uint8\+\_\+t}]{offset, }
\item[{{\bf Ipv6\+Header} const \&}]{ipv6\+Header, }
\item[{{\bf Ipv6\+Address}}]{dst, }
\item[{uint8\+\_\+t $\ast$}]{next\+Header, }
\item[{bool \&}]{stop\+Processing, }
\item[{bool \&}]{is\+Dropped, }
\item[{{\bf Ipv6\+L3\+Protocol\+::\+Drop\+Reason} \&}]{drop\+Reason}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_a8563953a172a744473bf7f80cf1ef536}{}\label{classns3_1_1Ipv6ExtensionFragment_a8563953a172a744473bf7f80cf1ef536}


Process method Called from \hyperlink{classns3_1_1Ipv6L3Protocol_a8a95d576e8aee9a571db93bf686d850a}{Ipv6\+L3\+Protocol\+::\+Receive}. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em offset} & the offset of the extension to process \\
\hline
{\em ipv6\+Header} & the I\+Pv6 header of packet received \\
\hline
{\em dst} & destination address of the packet received (i.\+e. us) \\
\hline
{\em next\+Header} & the next header \\
\hline
{\em stop\+Processing} & true if the packet must not be further processed \\
\hline
{\em is\+Dropped} & true if the packet must be dropped \\
\hline
{\em drop\+Reason} & dropping reason \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the size processed 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Ipv6Extension_a5946bc5e6fa07b76e2dcb7e4dee01f9f}{ns3\+::\+Ipv6\+Extension}.


\begin{DoxyCode}
360 \{
361   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << packet << offset << ipv6Header << dst << nextHeader << isDropped)
      ;
362 
363   Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
364   p->\hyperlink{classns3_1_1Packet_a78aa207e7921dd2f9f7e0d0b7a1c730a}{RemoveAtStart} (offset);
365 
366   Ipv6ExtensionFragmentHeader fragmentHeader;
367   p->RemoveHeader (fragmentHeader);
368 
369   \textcolor{keywordflow}{if} (nextHeader)
370     \{
371       *nextHeader = fragmentHeader.GetNextHeader ();
372     \}
373 
374   \textcolor{keywordtype}{bool} moreFragment = fragmentHeader.GetMoreFragment ();
375   uint16\_t fragmentOffset = fragmentHeader.GetOffset ();
376   uint32\_t identification = fragmentHeader.GetIdentification ();
377   Ipv6Address src = ipv6Header.GetSourceAddress ();
378 
379   std::pair<Ipv6Address, uint32\_t> fragmentsId = std::pair<Ipv6Address, uint32\_t> (src, identification);
380   Ptr<Fragments> fragments;
381 
382   Ipv6Header ipHeader = ipv6Header;
383   ipHeader.SetNextHeader (fragmentHeader.GetNextHeader ());
384 
385   MapFragments\_t::iterator it = \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.find (fragmentsId);
386   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.end ())
387     \{
388       fragments = Create<Fragments> ();
389       \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.insert (std::make\_pair (fragmentsId, fragments));
390       EventId \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (60),
391                                              &
      \hyperlink{classns3_1_1Ipv6ExtensionFragment_a4676eb2d539562fe8b25f6711f120718}{Ipv6ExtensionFragment::HandleFragmentsTimeout}, \textcolor{keyword}{this},
392                                              fragmentsId, ipHeader);
393       fragments->SetTimeoutEventId (timeout);
394     \}
395   \textcolor{keywordflow}{else}
396     \{
397       fragments = it->second;
398     \}
399 
400   \textcolor{keywordflow}{if} (fragmentOffset == 0)
401     \{
402       Ptr<Packet> unfragmentablePart = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
403       unfragmentablePart->\hyperlink{classns3_1_1Packet_a607de6c1abda2a960e99a3b59fd35d14}{RemoveAtEnd} (packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () - offset);
404       fragments->SetUnfragmentablePart (unfragmentablePart);
405     \}
406 
407   fragments->AddFragment (p, fragmentOffset, moreFragment);
408 
409   \textcolor{keywordflow}{if} (fragments->IsEntire ())
410     \{
411       packet = fragments->GetPacket ();
412       fragments->CancelTimeout ();
413       \hyperlink{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{m\_fragments}.erase (fragmentsId);
414       stopProcessing = \textcolor{keyword}{false};
415     \}
416   \textcolor{keywordflow}{else}
417     \{
418       stopProcessing = \textcolor{keyword}{true};
419     \}
420 
421   \textcolor{keywordflow}{return} 0;
422 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!Set\+Timeout\+Event\+Id@{Set\+Timeout\+Event\+Id}}
\index{Set\+Timeout\+Event\+Id@{Set\+Timeout\+Event\+Id}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{Set\+Timeout\+Event\+Id(\+Event\+Id event)}{SetTimeoutEventId(EventId event)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Ipv6\+Extension\+Fragment\+::\+Set\+Timeout\+Event\+Id (
\begin{DoxyParamCaption}
\item[{{\bf Event\+Id}}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_aae27f692112a48d0283b59fec7b00f38}{}\label{classns3_1_1Ipv6ExtensionFragment_aae27f692112a48d0283b59fec7b00f38}


Set the Timeout \hyperlink{classns3_1_1EventId}{Event\+Id}. 


\begin{DoxyParams}{Parameters}
{\em event} & The event. \\
\hline
\end{DoxyParams}


\subsection{Member Data Documentation}
\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!E\+X\+T\+\_\+\+N\+U\+M\+B\+ER@{E\+X\+T\+\_\+\+N\+U\+M\+B\+ER}}
\index{E\+X\+T\+\_\+\+N\+U\+M\+B\+ER@{E\+X\+T\+\_\+\+N\+U\+M\+B\+ER}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{E\+X\+T\+\_\+\+N\+U\+M\+B\+ER}{EXT_NUMBER}}]{\setlength{\rightskip}{0pt plus 5cm}const uint8\+\_\+t ns3\+::\+Ipv6\+Extension\+Fragment\+::\+E\+X\+T\+\_\+\+N\+U\+M\+B\+ER = 44\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_ae87f2248d10cdb25e8e082fa74049425}{}\label{classns3_1_1Ipv6ExtensionFragment_ae87f2248d10cdb25e8e082fa74049425}


Fragmentation extension number. 

\index{ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}!m\+\_\+fragments@{m\+\_\+fragments}}
\index{m\+\_\+fragments@{m\+\_\+fragments}!ns3\+::\+Ipv6\+Extension\+Fragment@{ns3\+::\+Ipv6\+Extension\+Fragment}}
\subsubsection[{\texorpdfstring{m\+\_\+fragments}{m_fragments}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Map\+Fragments\+\_\+t} ns3\+::\+Ipv6\+Extension\+Fragment\+::m\+\_\+fragments\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}{}\label{classns3_1_1Ipv6ExtensionFragment_aa830df260b53ecc85fd602a558232f7f}


The hash of fragmented packets. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
internet/model/\hyperlink{ipv6-extension_8h}{ipv6-\/extension.\+h}\item 
internet/model/\hyperlink{ipv6-extension_8cc}{ipv6-\/extension.\+cc}\end{DoxyCompactItemize}
