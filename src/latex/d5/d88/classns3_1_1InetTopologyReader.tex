\hypertarget{classns3_1_1InetTopologyReader}{}\section{ns3\+:\+:Inet\+Topology\+Reader Class Reference}
\label{classns3_1_1InetTopologyReader}\index{ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}}


Topology file reader (Inet-\/format type).  




{\ttfamily \#include $<$inet-\/topology-\/reader.\+h$>$}



Inheritance diagram for ns3\+:\+:Inet\+Topology\+Reader\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Inet\+Topology\+Reader\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1InetTopologyReader_a7cc79bc99e3785e32e53401e966079e1}{Inet\+Topology\+Reader} ()
\item 
virtual \hyperlink{classns3_1_1InetTopologyReader_a5ee480cd54633b71eee103b6a1dcd802}{$\sim$\+Inet\+Topology\+Reader} ()
\item 
virtual \hyperlink{classns3_1_1NodeContainer}{Node\+Container} \hyperlink{classns3_1_1InetTopologyReader_adde06adec25a365b75c966d7ee97b932}{Read} (void)
\begin{DoxyCompactList}\small\item\em Main topology reading function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1InetTopologyReader_accb7528ba3d5c75ec067c228257aa5a4}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1InetTopologyReader_adfff0c6ed306a0a3eebec973721f9bda}{Inet\+Topology\+Reader} (const \hyperlink{classns3_1_1InetTopologyReader}{Inet\+Topology\+Reader} \&)
\begin{DoxyCompactList}\small\item\em Copy constructor. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1InetTopologyReader}{Inet\+Topology\+Reader} \& \hyperlink{classns3_1_1InetTopologyReader_afe9d0899b00f192e4afb5820b3b78278}{operator=} (const \hyperlink{classns3_1_1InetTopologyReader}{Inet\+Topology\+Reader} \&)
\begin{DoxyCompactList}\small\item\em Copy constructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Topology file reader (Inet-\/format type). 

This class takes an input file in Inet format and extracts all the informations needed to build the topology (i.\+e.\+number of nodes, links and links structure). It have been tested with Inet 3.\+0 \href{http://topology.eecs.umich.edu/inet/}{\tt http\+://topology.\+eecs.\+umich.\+edu/inet/}

It might set a link attribute named \char`\"{}\+Weight\char`\"{}, corresponding to the euclidean distance between two nodes, the nodes being randomly positioned. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}!Inet\+Topology\+Reader@{Inet\+Topology\+Reader}}
\index{Inet\+Topology\+Reader@{Inet\+Topology\+Reader}!ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}}
\subsubsection[{\texorpdfstring{Inet\+Topology\+Reader()}{InetTopologyReader()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Inet\+Topology\+Reader\+::\+Inet\+Topology\+Reader (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1InetTopologyReader_a7cc79bc99e3785e32e53401e966079e1}{}\label{classns3_1_1InetTopologyReader_a7cc79bc99e3785e32e53401e966079e1}

\begin{DoxyCode}
48 \{
49   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
50 \}
\end{DoxyCode}
\index{ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}!````~Inet\+Topology\+Reader@{$\sim$\+Inet\+Topology\+Reader}}
\index{````~Inet\+Topology\+Reader@{$\sim$\+Inet\+Topology\+Reader}!ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}}
\subsubsection[{\texorpdfstring{$\sim$\+Inet\+Topology\+Reader()}{~InetTopologyReader()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Inet\+Topology\+Reader\+::$\sim$\+Inet\+Topology\+Reader (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1InetTopologyReader_a5ee480cd54633b71eee103b6a1dcd802}{}\label{classns3_1_1InetTopologyReader_a5ee480cd54633b71eee103b6a1dcd802}

\begin{DoxyCode}
53 \{
54   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
55 \}
\end{DoxyCode}
\index{ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}!Inet\+Topology\+Reader@{Inet\+Topology\+Reader}}
\index{Inet\+Topology\+Reader@{Inet\+Topology\+Reader}!ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}}
\subsubsection[{\texorpdfstring{Inet\+Topology\+Reader(const Inet\+Topology\+Reader \&)}{InetTopologyReader(const InetTopologyReader &)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Inet\+Topology\+Reader\+::\+Inet\+Topology\+Reader (
\begin{DoxyParamCaption}
\item[{const {\bf Inet\+Topology\+Reader} \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1InetTopologyReader_adfff0c6ed306a0a3eebec973721f9bda}{}\label{classns3_1_1InetTopologyReader_adfff0c6ed306a0a3eebec973721f9bda}


Copy constructor. 

Defined and unimplemented to avoid misuse. 

\subsection{Member Function Documentation}
\index{ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Inet\+Topology\+Reader\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1InetTopologyReader_accb7528ba3d5c75ec067c228257aa5a4}{}\label{classns3_1_1InetTopologyReader_accb7528ba3d5c75ec067c228257aa5a4}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id}. 
\end{DoxyReturn}

\begin{DoxyCode}
38 \{
39   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::InetTopologyReader"})
40     .SetParent<\hyperlink{classns3_1_1TopologyReader_aa8fde8dd942167d83215da15be1de6fc}{TopologyReader}> ()
41     .SetGroupName (\textcolor{stringliteral}{"TopologyReader"})
42     .AddConstructor<\hyperlink{classns3_1_1InetTopologyReader_a7cc79bc99e3785e32e53401e966079e1}{InetTopologyReader}> ()
43   ;
44   \textcolor{keywordflow}{return} tid;
45 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}!operator=@{operator=}}
\index{operator=@{operator=}!ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}}
\subsubsection[{\texorpdfstring{operator=(const Inet\+Topology\+Reader \&)}{operator=(const InetTopologyReader &)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Inet\+Topology\+Reader}\& ns3\+::\+Inet\+Topology\+Reader\+::operator= (
\begin{DoxyParamCaption}
\item[{const {\bf Inet\+Topology\+Reader} \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1InetTopologyReader_afe9d0899b00f192e4afb5820b3b78278}{}\label{classns3_1_1InetTopologyReader_afe9d0899b00f192e4afb5820b3b78278}


Copy constructor. 

Defined and unimplemented to avoid misuse. \begin{DoxyReturn}{Returns}

\end{DoxyReturn}
\index{ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}!Read@{Read}}
\index{Read@{Read}!ns3\+::\+Inet\+Topology\+Reader@{ns3\+::\+Inet\+Topology\+Reader}}
\subsubsection[{\texorpdfstring{Read(void)}{Read(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Node\+Container} ns3\+::\+Inet\+Topology\+Reader\+::\+Read (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1InetTopologyReader_adde06adec25a365b75c966d7ee97b932}{}\label{classns3_1_1InetTopologyReader_adde06adec25a365b75c966d7ee97b932}


Main topology reading function. 

This method opens an input stream and reads the Inet-\/format file. From the first line it takes the total number of nodes and links. Then discards a number of rows equals to total nodes (containing useless geographical informations). Then reads until the end of the file (total links number rows) and saves the structure of every single link in the topology.

\begin{DoxyReturn}{Returns}
The container of the nodes created (or empty container if there was an error) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TopologyReader_ae2a69c10e0bb66d6c850a72c6655e69c}{ns3\+::\+Topology\+Reader}.


\begin{DoxyCode}
59 \{
60   std::ifstream topgen;
61   topgen.open (\hyperlink{classns3_1_1TopologyReader_a6d417b0d32aa613887596d769aee6c5d}{GetFileName} ().c\_str ());
62   std::map<std::string, Ptr<Node> > nodeMap;
63   NodeContainer \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes};
64 
65   \textcolor{keywordflow}{if} ( !topgen.is\_open () )
66     \{
67       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Inet topology file object is not open, check file name and permissions"});
68       \textcolor{keywordflow}{return} \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes};
69     \}
70 
71   std::string \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from};
72   std::string to;
73   std::string linkAttr;
74 
75   \textcolor{keywordtype}{int} linksNumber = 0;
76   \textcolor{keywordtype}{int} nodesNumber = 0;
77 
78   \textcolor{keywordtype}{int} totnode = 0;
79   \textcolor{keywordtype}{int} totlink = 0;
80 
81   std::istringstream lineBuffer;
82   std::string line;
83 
84   getline (topgen,line);
85   lineBuffer.str (line);
86 
87   lineBuffer >> totnode;
88   lineBuffer >> totlink;
89   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Inet topology should have "} << totnode << \textcolor{stringliteral}{" nodes and "} << totlink << \textcolor{stringliteral}{" links"});
90 
91   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < totnode && !topgen.eof (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
92     \{
93       getline (topgen,line);
94     \}
95 
96   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < totlink && !topgen.eof (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
97     \{
98       getline (topgen,line);
99       lineBuffer.clear ();
100       lineBuffer.str (line);
101 
102       lineBuffer >> \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from};
103       lineBuffer >> to;
104       lineBuffer >> linkAttr;
105 
106       \textcolor{keywordflow}{if} ( (!from.empty ()) && (!to.empty ()) )
107         \{
108           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} ( \textcolor{stringliteral}{"Link "} << linksNumber << \textcolor{stringliteral}{" from: "} << from << \textcolor{stringliteral}{" to: "} << to);
109 
110           \textcolor{keywordflow}{if} ( nodeMap[from] == 0 )
111             \{
112               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} ( \textcolor{stringliteral}{"Node "} << nodesNumber << \textcolor{stringliteral}{" name: "} << from);
113               Ptr<Node> tmpNode = CreateObject<Node> ();
114               nodeMap[\hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from}] = tmpNode;
115               nodes.Add (tmpNode);
116               nodesNumber++;
117             \}
118 
119           \textcolor{keywordflow}{if} (nodeMap[to] == 0)
120             \{
121               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} ( \textcolor{stringliteral}{"Node "} << nodesNumber << \textcolor{stringliteral}{" name: "} << to);
122               Ptr<Node> tmpNode = CreateObject<Node> ();
123               nodeMap[to] = tmpNode;
124               nodes.Add (tmpNode);
125               nodesNumber++;
126             \}
127 
128           Link link ( nodeMap[from], from, nodeMap[to], to );
129           \textcolor{keywordflow}{if} ( !linkAttr.empty () )
130             \{
131               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} ( \textcolor{stringliteral}{"Link "} << linksNumber << \textcolor{stringliteral}{" weight: "} << linkAttr);
132               link.SetAttribute (\textcolor{stringliteral}{"Weight"}, linkAttr);
133             \}
134           \hyperlink{classns3_1_1TopologyReader_a0ecbd003f3e4c0c142720b20b8cfcbeb}{AddLink} (link);
135 
136           linksNumber++;
137         \}
138     \}
139 
140   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Inet topology created with "} << nodesNumber << \textcolor{stringliteral}{" nodes and "} << linksNumber << \textcolor{stringliteral}{"
       links"});
141   topgen.close ();
142 
143   \textcolor{keywordflow}{return} \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes};
144 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
topology-\/read/model/\hyperlink{inet-topology-reader_8h}{inet-\/topology-\/reader.\+h}\item 
topology-\/read/model/\hyperlink{inet-topology-reader_8cc}{inet-\/topology-\/reader.\+cc}\end{DoxyCompactItemize}
