\hypertarget{classNs3TcpSocketTestCase1}{}\section{Ns3\+Tcp\+Socket\+Test\+Case1 Class Reference}
\label{classNs3TcpSocketTestCase1}\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}


Inheritance diagram for Ns3\+Tcp\+Socket\+Test\+Case1\+:
% FIG 0


Collaboration diagram for Ns3\+Tcp\+Socket\+Test\+Case1\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classNs3TcpSocketTestCase1_a02bfa222fab12c01e537fb4101f5c25b}{Ns3\+Tcp\+Socket\+Test\+Case1} ()
\item 
virtual \hyperlink{classNs3TcpSocketTestCase1_ae44bc5c4c334759adfd52d9ead7b87a7}{$\sim$\+Ns3\+Tcp\+Socket\+Test\+Case1} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classNs3TcpSocketTestCase1_a99214a78a94b82f5da1dd08243935415}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classNs3TcpSocketTestCase1_aaa8206a2017c32db9c6016d7cd03f731}{Sink\+Rx} (std\+::string path, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1Address}{Address} \&address)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classNs3TcpSocketTestCase1_ade29afe16b2b075b73b708fff3d24f97}{m\+\_\+write\+Results}
\item 
\hyperlink{classns3_1_1TestVectors}{Test\+Vectors}$<$ uint32\+\_\+t $>$ \hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\+\_\+inputs}
\item 
\hyperlink{classns3_1_1TestVectors}{Test\+Vectors}$<$ uint32\+\_\+t $>$ \hyperlink{classNs3TcpSocketTestCase1_ada714a9630cb2f16a31abcdf8de57fb7}{m\+\_\+responses}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\subsubsection[{\texorpdfstring{Ns3\+Tcp\+Socket\+Test\+Case1()}{Ns3TcpSocketTestCase1()}}]{\setlength{\rightskip}{0pt plus 5cm}Ns3\+Tcp\+Socket\+Test\+Case1\+::\+Ns3\+Tcp\+Socket\+Test\+Case1 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classNs3TcpSocketTestCase1_a02bfa222fab12c01e537fb4101f5c25b}{}\label{classNs3TcpSocketTestCase1_a02bfa222fab12c01e537fb4101f5c25b}

\begin{DoxyCode}
65   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check that ns-3 TCP successfully transfers an application data write of various
       sizes (point-to-point)"}),
66     \hyperlink{classNs3TcpSocketTestCase1_ade29afe16b2b075b73b708fff3d24f97}{m\_writeResults} (\textcolor{keyword}{false})
67 \{
68 \}
\end{DoxyCode}
\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!````~Ns3\+Tcp\+Socket\+Test\+Case1@{$\sim$\+Ns3\+Tcp\+Socket\+Test\+Case1}}
\index{````~Ns3\+Tcp\+Socket\+Test\+Case1@{$\sim$\+Ns3\+Tcp\+Socket\+Test\+Case1}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\subsubsection[{\texorpdfstring{$\sim$\+Ns3\+Tcp\+Socket\+Test\+Case1()}{~Ns3TcpSocketTestCase1()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual Ns3\+Tcp\+Socket\+Test\+Case1\+::$\sim$\+Ns3\+Tcp\+Socket\+Test\+Case1 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpSocketTestCase1_ae44bc5c4c334759adfd52d9ead7b87a7}{}\label{classNs3TcpSocketTestCase1_ae44bc5c4c334759adfd52d9ead7b87a7}

\begin{DoxyCode}
52 \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Socket\+Test\+Case1\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpSocketTestCase1_a99214a78a94b82f5da1dd08243935415}{}\label{classNs3TcpSocketTestCase1_a99214a78a94b82f5da1dd08243935415}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
78 \{
79   uint16\_t sinkPort = 50000;
80   \textcolor{keywordtype}{double} sinkStopTime = 40;  \textcolor{comment}{// sec; will trigger Socket::Close}
81   \textcolor{keywordtype}{double} writerStopTime = 30;  \textcolor{comment}{// sec; will trigger Socket::Close}
82   \textcolor{keywordtype}{double} simStopTime = 60;  \textcolor{comment}{// sec}
83   \hyperlink{classns3_1_1Time}{Time} sinkStopTimeObj = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (sinkStopTime);
84   \hyperlink{classns3_1_1Time}{Time} writerStopTimeObj = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (writerStopTime);
85   \hyperlink{classns3_1_1Time}{Time} simStopTimeObj= \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (simStopTime);
86 
87   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n0 = CreateObject<Node> ();
88   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n1 = CreateObject<Node> ();
89 
90   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} pointToPoint;
91   pointToPoint.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, StringValue (\textcolor{stringliteral}{"5Mbps"}));
92   pointToPoint.SetChannelAttribute (\textcolor{stringliteral}{"Delay"}, StringValue (\textcolor{stringliteral}{"2ms"}));
93 
94   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} devices;
95   devices = pointToPoint.Install (n0, n1);
96 
97   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
98   internet.\hyperlink{classns3_1_1InternetStackHelper_a6cfa73782fd4071c4cfbd73ebf1bbb44}{InstallAll} ();
99 
100   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} address;
101   address.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.1.0"}, \textcolor{stringliteral}{"255.255.255.252"});
102   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ifContainer = address.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (devices);
103 
104   \hyperlink{classns3_1_1Ptr}{Ptr<SocketWriter>} socketWriter = CreateObject<SocketWriter> ();
105   \hyperlink{classns3_1_1Address}{Address} sinkAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (ifContainer.
      \hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (1), sinkPort));
106   socketWriter->\hyperlink{classns3_1_1SocketWriter_a79db65c3883555f22681d8ffabd206e4}{Setup} (n0, sinkAddress);
107   n0->\hyperlink{classns3_1_1Node_ab98b4fdc4aadc86366b80e8a79a53f47}{AddApplication} (socketWriter);
108   socketWriter->\hyperlink{classns3_1_1Application_a8360a49748e30c52ffdcc7a305c3cd48}{SetStartTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.));
109   socketWriter->\hyperlink{classns3_1_1Application_a732c1fdadf0be176c753a2ce6e27dff9}{SetStopTime} (writerStopTimeObj);
110 
111   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} sink (\textcolor{stringliteral}{"ns3::TcpSocketFactory"},
112                          \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), sinkPort));
113   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} apps = sink.Install (n1);
114   \textcolor{comment}{// Start the sink application at time zero, and stop it at sinkStopTime}
115   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0));
116   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (sinkStopTimeObj);
117 
118   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/*/ApplicationList/*/$ns3::PacketSink/Rx"},
119                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classNs3TcpSocketTestCase1_aaa8206a2017c32db9c6016d7cd03f731}{Ns3TcpSocketTestCase1::SinkRx}, \textcolor{keyword}{
      this}));
120 
121   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2), &\hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{SocketWriter::Connect}, socketWriter);
122   \textcolor{comment}{// Send 1, 10, 100, 1000 bytes}
123   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10), &SocketWriter::Write, socketWriter, 1);
124   \hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (1);
125   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (12), &SocketWriter::Write, socketWriter, 10);
126   \hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (10);
127   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (14), &SocketWriter::Write, socketWriter, 100);
128   \hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (100);
129   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (16), &SocketWriter::Write, socketWriter, 1000);
130   \hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (536);
131   \hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (464);  \textcolor{comment}{// ns-3 TCP default segment size of 536}
132   Simulator::Schedule (writerStopTimeObj, &SocketWriter::Close, socketWriter);
133 
134   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpSocketTestCase1_ade29afe16b2b075b73b708fff3d24f97}{m\_writeResults})
135     \{
136       pointToPoint.EnablePcapAll (\textcolor{stringliteral}{"tcp-socket-test-case-1"});
137     \}
138 
139   Simulator::Stop (simStopTimeObj);
140   Simulator::Run ();
141   Simulator::Destroy ();
142 
143   \textcolor{comment}{// Compare inputs and outputs}
144   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a2da99bd673577006c95a8b17b550d809}{GetN} (), 
      \hyperlink{classNs3TcpSocketTestCase1_ada714a9630cb2f16a31abcdf8de57fb7}{m\_responses}.\hyperlink{classns3_1_1TestVectors_a2da99bd673577006c95a8b17b550d809}{GetN} (), \textcolor{stringliteral}{"Incorrect number of expected receive events"});
145   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classNs3TcpSocketTestCase1_ada714a9630cb2f16a31abcdf8de57fb7}{m\_responses}.\hyperlink{classns3_1_1TestVectors_a2da99bd673577006c95a8b17b550d809}{GetN} (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
146     \{
147       uint32\_t in = \hyperlink{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_acbb2624ad8cf403a44aa77c0ee3db85d}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
148       uint32\_t out = \hyperlink{classNs3TcpSocketTestCase1_ada714a9630cb2f16a31abcdf8de57fb7}{m\_responses}.\hyperlink{classns3_1_1TestVectors_acbb2624ad8cf403a44aa77c0ee3db85d}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
149       \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (in, out, \textcolor{stringliteral}{"Mismatch:  expected "} << in << \textcolor{stringliteral}{" bytes, got "} 
      << out << \textcolor{stringliteral}{" bytes"});
150     \}
151 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!Sink\+Rx@{Sink\+Rx}}
\index{Sink\+Rx@{Sink\+Rx}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\subsubsection[{\texorpdfstring{Sink\+Rx(std\+::string path, Ptr$<$ const Packet $>$ p, const Address \&address)}{SinkRx(std::string path, Ptr< const Packet > p, const Address &address)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Socket\+Test\+Case1\+::\+Sink\+Rx (
\begin{DoxyParamCaption}
\item[{std\+::string}]{path, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{p, }
\item[{const {\bf Address} \&}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpSocketTestCase1_aaa8206a2017c32db9c6016d7cd03f731}{}\label{classNs3TcpSocketTestCase1_aaa8206a2017c32db9c6016d7cd03f731}

\begin{DoxyCode}
72 \{
73   \hyperlink{classNs3TcpSocketTestCase1_ada714a9630cb2f16a31abcdf8de57fb7}{m\_responses}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ());
74 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5




\subsection{Member Data Documentation}
\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!m\+\_\+inputs@{m\+\_\+inputs}}
\index{m\+\_\+inputs@{m\+\_\+inputs}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\subsubsection[{\texorpdfstring{m\+\_\+inputs}{m_inputs}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Test\+Vectors}$<$uint32\+\_\+t$>$ Ns3\+Tcp\+Socket\+Test\+Case1\+::m\+\_\+inputs\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}{}\label{classNs3TcpSocketTestCase1_ae32f60c48f3d6ee8d8f3691dfe7850ed}
\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!m\+\_\+responses@{m\+\_\+responses}}
\index{m\+\_\+responses@{m\+\_\+responses}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\subsubsection[{\texorpdfstring{m\+\_\+responses}{m_responses}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Test\+Vectors}$<$uint32\+\_\+t$>$ Ns3\+Tcp\+Socket\+Test\+Case1\+::m\+\_\+responses\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpSocketTestCase1_ada714a9630cb2f16a31abcdf8de57fb7}{}\label{classNs3TcpSocketTestCase1_ada714a9630cb2f16a31abcdf8de57fb7}
\index{Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}!m\+\_\+write\+Results@{m\+\_\+write\+Results}}
\index{m\+\_\+write\+Results@{m\+\_\+write\+Results}!Ns3\+Tcp\+Socket\+Test\+Case1@{Ns3\+Tcp\+Socket\+Test\+Case1}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Results}{m_writeResults}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+Socket\+Test\+Case1\+::m\+\_\+write\+Results\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpSocketTestCase1_ade29afe16b2b075b73b708fff3d24f97}{}\label{classNs3TcpSocketTestCase1_ade29afe16b2b075b73b708fff3d24f97}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/ns3tcp/\hyperlink{ns3tcp-socket-test-suite_8cc}{ns3tcp-\/socket-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
