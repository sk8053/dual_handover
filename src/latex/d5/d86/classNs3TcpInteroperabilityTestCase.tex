\hypertarget{classNs3TcpInteroperabilityTestCase}{}\section{Ns3\+Tcp\+Interoperability\+Test\+Case Class Reference}
\label{classNs3TcpInteroperabilityTestCase}\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}


Inheritance diagram for Ns3\+Tcp\+Interoperability\+Test\+Case\+:
% FIG 0


Collaboration diagram for Ns3\+Tcp\+Interoperability\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classNs3TcpInteroperabilityTestCase_a3c5048146cfa7ab2b9de2d26c48c3941}{Ns3\+Tcp\+Interoperability\+Test\+Case} ()
\item 
virtual \hyperlink{classNs3TcpInteroperabilityTestCase_a8038aaedd04e5e09359c873490270b53}{$\sim$\+Ns3\+Tcp\+Interoperability\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classNs3TcpInteroperabilityTestCase_af18785722baa5f4826f281efacaabe60}{Do\+Setup} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classNs3TcpInteroperabilityTestCase_a7d5f4739d69bd8ba54b091dd83da6d4a}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classNs3TcpInteroperabilityTestCase_a13a91d5f3882d3ac42448bcc29ebcbfd}{Do\+Teardown} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classNs3TcpInteroperabilityTestCase_a22015819cad44a2e3ebbecddc8b14458}{Ipv4\+L3\+Tx} (std\+::string context, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4}{Ipv4} $>$ ipv4, uint32\+\_\+t interface)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{classNs3TcpInteroperabilityTestCase_a207e7f877ef9921efefd3f20d6f58bce}{m\+\_\+pcap\+Filename}
\item 
\hyperlink{classns3_1_1PcapFile}{Pcap\+File} \hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\+\_\+pcap\+File}
\item 
bool \hyperlink{classNs3TcpInteroperabilityTestCase_a05b2ce8a52b36d9924ad9c7fda1168a9}{m\+\_\+write\+Vectors}
\item 
bool \hyperlink{classNs3TcpInteroperabilityTestCase_a095b5c579d5cdee52f872718aee1cf7c}{m\+\_\+write\+Results}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ns3\+Tcp\+Interoperability\+Test\+Case()}{Ns3TcpInteroperabilityTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Ns3\+Tcp\+Interoperability\+Test\+Case\+::\+Ns3\+Tcp\+Interoperability\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classNs3TcpInteroperabilityTestCase_a3c5048146cfa7ab2b9de2d26c48c3941}{}\label{classNs3TcpInteroperabilityTestCase_a3c5048146cfa7ab2b9de2d26c48c3941}

\begin{DoxyCode}
111   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check to see that the ns-3 TCP can work with liblinux2.6.26.so"}), 
      \hyperlink{classNs3TcpInteroperabilityTestCase_a05b2ce8a52b36d9924ad9c7fda1168a9}{m\_writeVectors} (\hyperlink{ns3tcp-interop-test-suite_8cc_a6829179e1fbdbc03f407d65a63c07153}{WRITE\_VECTORS}), \hyperlink{classNs3TcpInteroperabilityTestCase_a095b5c579d5cdee52f872718aee1cf7c}{m\_writeResults} (
      \hyperlink{ns3tcp-interop-test-suite_8cc_a9ba71edaadfde927e9912e6b37a37f39}{WRITE\_PCAP})
112 \{
113 \}
\end{DoxyCode}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!````~Ns3\+Tcp\+Interoperability\+Test\+Case@{$\sim$\+Ns3\+Tcp\+Interoperability\+Test\+Case}}
\index{````~Ns3\+Tcp\+Interoperability\+Test\+Case@{$\sim$\+Ns3\+Tcp\+Interoperability\+Test\+Case}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Ns3\+Tcp\+Interoperability\+Test\+Case()}{~Ns3TcpInteroperabilityTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Ns3\+Tcp\+Interoperability\+Test\+Case\+::$\sim$\+Ns3\+Tcp\+Interoperability\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a8038aaedd04e5e09359c873490270b53}{}\label{classNs3TcpInteroperabilityTestCase_a8038aaedd04e5e09359c873490270b53}

\begin{DoxyCode}
116 \{
117 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Interoperability\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a7d5f4739d69bd8ba54b091dd83da6d4a}{}\label{classNs3TcpInteroperabilityTestCase_a7d5f4739d69bd8ba54b091dd83da6d4a}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
204 \{
205   \textcolor{comment}{//}
206   \textcolor{comment}{// Just create two nodes.  One (node zero) will be the node with the TCP}
207   \textcolor{comment}{// under test which is the ns-3 TCP implementation.  The other node (node}
208   \textcolor{comment}{// one) will be the node with the reference implementation we use to drive}
209   \textcolor{comment}{// the tests.}
210   \textcolor{comment}{//}
211   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} \hyperlink{visualizer-ideas_8txt_a3e1b3808014a2c68ab0cd0182e041be2}{nodes};
212   nodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (2);
213 
214   \textcolor{comment}{//}
215   \textcolor{comment}{// For this test we'll use a point-to-point net device.  It's not as simple}
216   \textcolor{comment}{// as a simple-net-device, but it provides nice places to hook trace events}
217   \textcolor{comment}{// so we can see what's moving between our nodes.}
218   \textcolor{comment}{//}
219   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} pointToPoint;
220   pointToPoint.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, StringValue (\textcolor{stringliteral}{"5Mbps"}));
221   pointToPoint.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, StringValue (\textcolor{stringliteral}{"2ms"}));
222 
223   \textcolor{comment}{//}
224   \textcolor{comment}{// Install the point-to-point devices on both nodes and connec them up.}
225   \textcolor{comment}{//}
226   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} devices;
227   devices = pointToPoint.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (nodes);
228 
229   \textcolor{comment}{//}
230   \textcolor{comment}{// Install two variants of the internet stack.  The first, on node zero }
231   \textcolor{comment}{// uses the TCP under test, which is the default ns-3 TCP implementation.}
232   \textcolor{comment}{//}
233   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} stack;
234   stack.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (nodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0));
235 
236   \textcolor{comment}{//}
237   \textcolor{comment}{// The other node, node one, is going to be set up to use a Linux TCP}
238   \textcolor{comment}{// implementation that we consider a known good TCP.}
239   \textcolor{comment}{//}
240   std::string nscStack = \textcolor{stringliteral}{"liblinux2.6.26.so"};
241   stack.\hyperlink{classns3_1_1InternetStackHelper_ac76e9cf493ef559f311c4ef85945129f}{SetTcp} (\textcolor{stringliteral}{"ns3::NscTcpL4Protocol"}, \textcolor{stringliteral}{"Library"}, StringValue (\textcolor{stringliteral}{"liblinux2.6.26.so"}));
242   stack.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (nodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
243 
244   \textcolor{comment}{//}
245   \textcolor{comment}{// Assign the address 10.1.1.1 to the TCP implementation under test (index}
246   \textcolor{comment}{// zero) and 10.1.1.2 to the reference implementation (index one).}
247   \textcolor{comment}{//}
248   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} address;
249   address.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.1.0"}, \textcolor{stringliteral}{"255.255.255.252"});
250   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} interfaces = address.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (devices);
251 
252   \textcolor{comment}{//}
253   \textcolor{comment}{// We need a place for the TCP data to go on the node with the TCP under}
254   \textcolor{comment}{// test, so just create a sink on node zero.}
255   \textcolor{comment}{//}
256   uint16\_t sinkPort = 8080;
257   \hyperlink{classns3_1_1Address}{Address} sinkAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (interfaces.
      \hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (0), sinkPort));
258   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} packetSinkHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), sinkPort));
259   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} sinkApps = packetSinkHelper.Install (nodes.
      \hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0));
260   sinkApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.));
261 
262   \textcolor{comment}{//}
263   \textcolor{comment}{// We need something to shove data down the pipe, so we create an on-off }
264   \textcolor{comment}{// application on the soure node with the reference TCP implementation.}
265   \textcolor{comment}{// The default behavior is to send for one second, then go quiet for one}
266   \textcolor{comment}{// second, and repeat.}
267   \textcolor{comment}{//}
268   \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} onOffHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, sinkAddress);
269   onOffHelper.SetAttribute (\textcolor{stringliteral}{"MaxBytes"}, UintegerValue (100000));
270   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} sourceApps = onOffHelper.Install (nodes.
      \hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (1));
271   sourceApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.));
272   sourceApps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.));
273 
274   \textcolor{comment}{//}
275   \textcolor{comment}{// There are currently a limited number of trace hooks in the ns-3 TCP code.}
276   \textcolor{comment}{// Rather than editing TCP to insert a bunch of trace hooks, we can just}
277   \textcolor{comment}{// intercept the packets at the IPv4 layer.  See internet-stack-helper.cc}
278   \textcolor{comment}{// for complete description of the trace hooks.  We're interested in the }
279   \textcolor{comment}{// responses of the TCP under test, which implies we need to hook the node}
280   \textcolor{comment}{// zero Ipv4 layer three transmit trace source.  We'll then get all of the}
281   \textcolor{comment}{// responses we need}
282   \textcolor{comment}{//}
283   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/0/$ns3::Ipv4L3Protocol/Tx"}, 
284                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classNs3TcpInteroperabilityTestCase_a22015819cad44a2e3ebbecddc8b14458}{Ns3TcpInteroperabilityTestCase::Ipv4L3Tx}, \textcolor{keyword}{this}));
285 
286   \textcolor{comment}{//}
287   \textcolor{comment}{// The idea here is that someone will look very closely at the all of the}
288   \textcolor{comment}{// communications between the reference TCP and the TCP under test in this}
289   \textcolor{comment}{// simulation and determine that all of the responses are correct.  We expect}
290   \textcolor{comment}{// that this means generating a pcap trace file from the point-to-point link}
291   \textcolor{comment}{// and examining the packets closely using tcpdump, wireshark or some such}
292   \textcolor{comment}{// program.  So we provide the ability to generate a pcap trace of the }
293   \textcolor{comment}{// test execution for your perusal.}
294   \textcolor{comment}{//}
295   \textcolor{comment}{// Once the validation test is determined to be running exactly as expected,}
296   \textcolor{comment}{// we allow you to generate a file that contains the response vectors that }
297   \textcolor{comment}{// will be checked during the actual execution of the test.}
298   \textcolor{comment}{//}
299 
300   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpInteroperabilityTestCase_a095b5c579d5cdee52f872718aee1cf7c}{m\_writeResults})
301     \{
302       pointToPoint.\hyperlink{classns3_1_1PcapHelperForDevice_a4ab183a2512120200d4a0e5d8ececd49}{EnablePcapAll} (\textcolor{stringliteral}{"ns3-tcp-interop"});
303     \}
304 
305   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (20));
306   Simulator::Run ();
307   Simulator::Destroy ();
308 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!Do\+Setup@{Do\+Setup}}
\index{Do\+Setup@{Do\+Setup}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Setup(void)}{DoSetup(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Interoperability\+Test\+Case\+::\+Do\+Setup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpInteroperabilityTestCase_af18785722baa5f4826f281efacaabe60}{}\label{classNs3TcpInteroperabilityTestCase_af18785722baa5f4826f281efacaabe60}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test setup before Do\+Run is invoked. 

Reimplemented from \hyperlink{classns3_1_1TestCase_a4a7e32ad32a10a508910815cd38e9177}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
121 \{
122   \textcolor{comment}{//}
123   \textcolor{comment}{// We expect there to be a file called tcp-interop-response-vectors.pcap in}
124   \textcolor{comment}{// the data directory}
125   \textcolor{comment}{//}
126   \hyperlink{classNs3TcpInteroperabilityTestCase_a207e7f877ef9921efefd3f20d6f58bce}{m\_pcapFilename} = \hyperlink{classns3_1_1TestCase_a3e4d216ff392a43418f26bb3e5b0f16d}{CreateDataDirFilename} (\textcolor{stringliteral}{"
      ns3tcp-interop-response-vectors.pcap"});
127 
128   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpInteroperabilityTestCase_a05b2ce8a52b36d9924ad9c7fda1168a9}{m\_writeVectors})
129     \{
130       \hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classNs3TcpInteroperabilityTestCase_a207e7f877ef9921efefd3f20d6f58bce}{m\_pcapFilename}, std::ios::out|std::ios::binary);
131       \hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a80c8adea1baa66e3f730df2927b0fc9b}{Init} (\hyperlink{ns3tcp-interop-test-suite_8cc_a1d33ea10cde9143eb9b36be021f3739e}{PCAP\_LINK\_TYPE}, \hyperlink{ns3tcp-interop-test-suite_8cc_ae9a6b49b98d0c7917dda456f6771d2e1}{PCAP\_SNAPLEN});
132     \}
133   \textcolor{keywordflow}{else}
134     \{
135       \hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classNs3TcpInteroperabilityTestCase_a207e7f877ef9921efefd3f20d6f58bce}{m\_pcapFilename}, std::ios::in|std::ios::binary);
136       \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} (\hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\_pcapFile}.
      \hyperlink{classns3_1_1PcapFile_aa3795e9a87e7a4151fb4d30747eaa072}{GetDataLinkType} () == \hyperlink{ns3tcp-interop-test-suite_8cc_a1d33ea10cde9143eb9b36be021f3739e}{PCAP\_LINK\_TYPE}, \textcolor{stringliteral}{"Wrong response vectors in directory"});
137     \}
138 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!Do\+Teardown@{Do\+Teardown}}
\index{Do\+Teardown@{Do\+Teardown}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Teardown(void)}{DoTeardown(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Interoperability\+Test\+Case\+::\+Do\+Teardown (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a13a91d5f3882d3ac42448bcc29ebcbfd}{}\label{classNs3TcpInteroperabilityTestCase_a13a91d5f3882d3ac42448bcc29ebcbfd}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test teardown 

Reimplemented from \hyperlink{classns3_1_1TestCase_a8917f1604e28d312a8086f76291e3c46}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
142 \{
143   \hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_ad3b6c28d464742ee1fa3a64628339a5b}{Close} ();
144 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!Ipv4\+L3\+Tx@{Ipv4\+L3\+Tx}}
\index{Ipv4\+L3\+Tx@{Ipv4\+L3\+Tx}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{Ipv4\+L3\+Tx(std\+::string context, Ptr$<$ const Packet $>$ packet, Ptr$<$ Ipv4 $>$ ipv4, uint32\+\_\+t interface)}{Ipv4L3Tx(std::string context, Ptr< const Packet > packet, Ptr< Ipv4 > ipv4, uint32_t interface)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ns3\+Tcp\+Interoperability\+Test\+Case\+::\+Ipv4\+L3\+Tx (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet, }
\item[{{\bf Ptr}$<$ {\bf Ipv4} $>$}]{ipv4, }
\item[{uint32\+\_\+t}]{interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a22015819cad44a2e3ebbecddc8b14458}{}\label{classNs3TcpInteroperabilityTestCase_a22015819cad44a2e3ebbecddc8b14458}

\begin{DoxyCode}
148 \{
149   \textcolor{comment}{//}
150   \textcolor{comment}{// We're not testing IP so remove and toss the header.  In order to do this,}
151   \textcolor{comment}{// though, we need to copy the packet since we have a const version.}
152   \textcolor{comment}{//}
153   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
154   \hyperlink{classns3_1_1Ipv4Header}{Ipv4Header} ipHeader;
155   p->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (ipHeader);
156 
157   \textcolor{comment}{//}
158   \textcolor{comment}{// What is left is the TCP header and any data that may be sent.  We aren't}
159   \textcolor{comment}{// sending any TCP data, so we expect what remains is only TCP header, which}
160   \textcolor{comment}{// is a small thing to save.}
161   \textcolor{comment}{//}
162   \textcolor{keywordflow}{if} (\hyperlink{classNs3TcpInteroperabilityTestCase_a05b2ce8a52b36d9924ad9c7fda1168a9}{m\_writeVectors})
163     \{
164       \textcolor{comment}{//}
165       \textcolor{comment}{// Save the TCP under test response for later testing.}
166       \textcolor{comment}{//}
167       \hyperlink{classns3_1_1Time}{Time} tNow = \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ();
168       int64\_t tMicroSeconds = tNow.\hyperlink{classns3_1_1Time_a2542b9273c336da11fcaf54e8bc6e4c8}{GetMicroSeconds} ();
169 
170       \hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a3920f5bae95ca0021875e6e9c2630ccf}{Write} (uint32\_t (tMicroSeconds / 1000000), 
171                         uint32\_t (tMicroSeconds % 1000000), 
172                         p
173                         );
174     \}
175   \textcolor{keywordflow}{else}
176     \{
177       \textcolor{comment}{//}
178       \textcolor{comment}{// Read the TCP under test expected response from the expected vector}
179       \textcolor{comment}{// file and see if it still does the right thing.}
180       \textcolor{comment}{//}
181       uint8\_t expected[\hyperlink{ns3tcp-interop-test-suite_8cc_ae9a6b49b98d0c7917dda456f6771d2e1}{PCAP\_SNAPLEN}];
182       uint32\_t tsSec, tsUsec, inclLen, origLen, readLen;
183       \hyperlink{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{m\_pcapFile}.\hyperlink{classns3_1_1PcapFile_a18c5045735408fe45a8cbc9e6b34a4fb}{Read} (expected, \textcolor{keyword}{sizeof}(expected), tsSec, tsUsec, inclLen, origLen, readLen);
184 
185       uint8\_t *actual = \textcolor{keyword}{new} uint8\_t[readLen];
186       p->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (actual, readLen);
187 
188       uint32\_t result = memcmp (actual, expected, readLen);
189 
190       \textcolor{keyword}{delete} [] actual;
191 
192       \textcolor{comment}{//}
193       \textcolor{comment}{// Avoid streams of errors -- only report the first.}
194       \textcolor{comment}{//}
195       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TestCase_a76d97c8d3aadccc6231e50d863cde388}{IsStatusSuccess} ())
196         \{
197           \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (result, 0, \textcolor{stringliteral}{"Expected data comparison error"});
198         \}
199     \}
200 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6




\subsection{Member Data Documentation}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!m\+\_\+pcap\+File@{m\+\_\+pcap\+File}}
\index{m\+\_\+pcap\+File@{m\+\_\+pcap\+File}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+pcap\+File}{m_pcapFile}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pcap\+File} Ns3\+Tcp\+Interoperability\+Test\+Case\+::m\+\_\+pcap\+File\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}{}\label{classNs3TcpInteroperabilityTestCase_a0d3ad7f3621d79aa2db483829c3d04fc}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!m\+\_\+pcap\+Filename@{m\+\_\+pcap\+Filename}}
\index{m\+\_\+pcap\+Filename@{m\+\_\+pcap\+Filename}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+pcap\+Filename}{m_pcapFilename}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string Ns3\+Tcp\+Interoperability\+Test\+Case\+::m\+\_\+pcap\+Filename\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a207e7f877ef9921efefd3f20d6f58bce}{}\label{classNs3TcpInteroperabilityTestCase_a207e7f877ef9921efefd3f20d6f58bce}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!m\+\_\+write\+Results@{m\+\_\+write\+Results}}
\index{m\+\_\+write\+Results@{m\+\_\+write\+Results}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Results}{m_writeResults}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+Interoperability\+Test\+Case\+::m\+\_\+write\+Results\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a095b5c579d5cdee52f872718aee1cf7c}{}\label{classNs3TcpInteroperabilityTestCase_a095b5c579d5cdee52f872718aee1cf7c}
\index{Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}!m\+\_\+write\+Vectors@{m\+\_\+write\+Vectors}}
\index{m\+\_\+write\+Vectors@{m\+\_\+write\+Vectors}!Ns3\+Tcp\+Interoperability\+Test\+Case@{Ns3\+Tcp\+Interoperability\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Vectors}{m_writeVectors}}]{\setlength{\rightskip}{0pt plus 5cm}bool Ns3\+Tcp\+Interoperability\+Test\+Case\+::m\+\_\+write\+Vectors\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNs3TcpInteroperabilityTestCase_a05b2ce8a52b36d9924ad9c7fda1168a9}{}\label{classNs3TcpInteroperabilityTestCase_a05b2ce8a52b36d9924ad9c7fda1168a9}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/ns3tcp/\hyperlink{ns3tcp-interop-test-suite_8cc}{ns3tcp-\/interop-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
