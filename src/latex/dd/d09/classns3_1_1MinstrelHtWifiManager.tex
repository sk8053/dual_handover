\hypertarget{classns3_1_1MinstrelHtWifiManager}{}\section{ns3\+:\+:Minstrel\+Ht\+Wifi\+Manager Class Reference}
\label{classns3_1_1MinstrelHtWifiManager}\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}


Implementation of Minstrel HT Rate Control Algorithm

Minstrel-\/\+HT is a rate adaptation mechanism for the 802.\+11n/ac standard based on Minstrel, and is based on the approach of probing the channel to dynamically learn about working rates that can be supported. Minstrel-\/\+HT is designed for high-\/latency devices that implement a Multiple Rate Retry (M\+RR) chain. This kind of device does not give feedback for every frame retransmission, but only when a frame was correctly transmitted (an A\+CK is received) or a frame transmission completely fails (all retransmission attempts fail). The M\+RR chain is used to advise the hardware about which rate to use when retransmitting a frame.  




{\ttfamily \#include $<$minstrel-\/ht-\/wifi-\/manager.\+h$>$}



Inheritance diagram for ns3\+:\+:Minstrel\+Ht\+Wifi\+Manager\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Minstrel\+Ht\+Wifi\+Manager\+:
% FIG 1
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{classns3_1_1MinstrelHtWifiManager_a0374b86124574585310bb1b649479c0e}{Rate\+Change\+Traced\+Callback}) (const uint64\+\_\+t rate, const \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} remote\+Address)
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MinstrelHtWifiManager_a02378c08b0b21f0d85c3e7611ce21aba}{Minstrel\+Ht\+Wifi\+Manager} ()
\item 
virtual \hyperlink{classns3_1_1MinstrelHtWifiManager_ae007b17cf3f980862291e4f1c1191dd3}{$\sim$\+Minstrel\+Ht\+Wifi\+Manager} ()
\item 
int64\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a657f1dd26cd9492287dff1f99284e7b8}{Assign\+Streams} (int64\+\_\+t stream)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a924e26c8c84e74234be8d978897f8ad3}{Setup\+Phy} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WifiPhy}{Wifi\+Phy} $>$ phy)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_abac95c9d370290c9afef68c1b70e8f15}{Setup\+Mac} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WifiMac}{Wifi\+Mac} $>$ mac)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a948fb9923c8a0cb14d1102ab1cb57b87}{Set\+He\+Supported} (bool enable)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1MinstrelHtWifiManager_aed9efdbc830840f0a381aa16cbe51256}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a3c5c32d2a58fb45a922e435192b0cf43}{Do\+Initialize} (void)
\item 
\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$ \hyperlink{classns3_1_1MinstrelHtWifiManager_ad661639eb9f121f1e69418e774bbadab}{Do\+Create\+Station} (void) const 
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_afd6cbe29d95df3398dccf513482e9b4e}{Do\+Report\+Rx\+Ok} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station, double rx\+Snr, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} tx\+Mode)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a755d4934c2a8ea5392c23aed6ae85851}{Do\+Report\+Rts\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_aa586c8a920a75e94428f44b560aefc7e}{Do\+Report\+Data\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_aa92399ed2e169367bbf8ca904a193f1e}{Do\+Report\+Rts\+Ok} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station, double cts\+Snr, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} cts\+Mode, double rts\+Snr)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a62ad32df22d4a75101d001e6e6635559}{Do\+Report\+Data\+Ok} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station, double ack\+Snr, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} ack\+Mode, double data\+Snr)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a9891afb45c6fd574a040dfef9d85014f}{Do\+Report\+Final\+Rts\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f0e93d9dccdb7bbbe35ff9b6d117d53}{Do\+Report\+Final\+Data\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} \hyperlink{classns3_1_1MinstrelHtWifiManager_abc2436c9c8dabb7c78907f478e1bb8c7}{Do\+Get\+Data\+Tx\+Vector} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} \hyperlink{classns3_1_1MinstrelHtWifiManager_a8628d42b27a3bf5cbbd4ea0ec2a79307}{Do\+Get\+Rts\+Tx\+Vector} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a2a1c915cc3def7e9bff5da0123a16040}{Do\+Report\+Ampdu\+Tx\+Status} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station, uint8\+\_\+t n\+Successful\+Mpdus, uint8\+\_\+t n\+Failed\+Mpdus, double rx\+Snr, double data\+Snr)
\item 
bool \hyperlink{classns3_1_1MinstrelHtWifiManager_a9dfa8dd0c37f8707df39e1bbc2df013b}{Is\+Low\+Latency} (void) const 
\item 
bool \hyperlink{classns3_1_1MinstrelHtWifiManager_adb495f5af6c0f3d22396a0c05869d33f}{Do\+Need\+Data\+Retransmission} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$st, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, bool normally)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a7cdd11ae7e8f95adeb2dcd03a9697bba}{Do\+Dispose\+Station} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
bool \hyperlink{classns3_1_1MinstrelHtWifiManager_a6e96fca0f8a7295e41cdbeea9d7dae32}{Is\+Valid\+Mcs} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WifiPhy}{Wifi\+Phy} $>$ phy, uint8\+\_\+t streams, uint8\+\_\+t ch\+Width, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode)
\begin{DoxyCompactList}\small\item\em Check the validity of a combination of number of streams, ch\+Width and mode. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelHtWifiManager_a0e356a05e616986cb292a72901984d4f}{Calculate\+Mpdu\+Tx\+Duration} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WifiPhy}{Wifi\+Phy} $>$ phy, uint8\+\_\+t streams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode)
\begin{DoxyCompactList}\small\item\em Estimates the Tx\+Time of a frame with a given mode and group (stream, guard interval and channel width). \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelHtWifiManager_aebde711921cb34ee3bfbe9801e76ae2e}{Calculate\+First\+Mpdu\+Tx\+Duration} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WifiPhy}{Wifi\+Phy} $>$ phy, uint8\+\_\+t streams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode)
\begin{DoxyCompactList}\small\item\em Estimates the Tx\+Time of a frame with a given mode and group (stream, guard interval and channel width). \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelHtWifiManager_a10e963727034a88092842510c5fc21bc}{Get\+Mpdu\+Tx\+Time} (uint32\+\_\+t group\+Id, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode) const 
\begin{DoxyCompactList}\small\item\em Obtain the T\+Xtime saved in the group information. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a3ce7d66218d851e645c2f4775e7b8a91}{Add\+Mpdu\+Tx\+Time} (uint32\+\_\+t group\+Id, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode, \hyperlink{classns3_1_1Time}{Time} t)
\begin{DoxyCompactList}\small\item\em Save a Tx\+Time to the vector of groups. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelHtWifiManager_a53308ad39a550d0972aad572b3566ec5}{Get\+First\+Mpdu\+Tx\+Time} (uint32\+\_\+t group\+Id, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode) const 
\begin{DoxyCompactList}\small\item\em Obtain the T\+Xtime saved in the group information. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a4e42c7189837e6b28544c18327990ab9}{Add\+First\+Mpdu\+Tx\+Time} (uint32\+\_\+t group\+Id, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode, \hyperlink{classns3_1_1Time}{Time} t)
\begin{DoxyCompactList}\small\item\em Save a Tx\+Time to the vector of groups. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{Update\+Retry} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\begin{DoxyCompactList}\small\item\em Update the number of retries and reset accordingly. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a7a73ce35e212586453fb9405c55654a5}{Update\+Packet\+Counters} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint8\+\_\+t n\+Successful\+Mpdus, uint8\+\_\+t n\+Failed\+Mpdus)
\begin{DoxyCompactList}\small\item\em Update the number of sample count variables. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a953e20a35850da21283123c92db93597}{Get\+Next\+Sample} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\begin{DoxyCompactList}\small\item\em Getting the next sample from Sample Table. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a2c3213dddeb9e0917073482f732127ed}{Set\+Next\+Sample} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\begin{DoxyCompactList}\small\item\em Set the next sample from Sample Table. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a06c5d6ae62e898a226ffd6cb0b448038}{Find\+Rate} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_add9ba12485354ddfaae5a68a90469a92}{Update\+Stats} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a3b59b889db624539c6d5af89fa5e9f74}{Rate\+Init} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
double \hyperlink{classns3_1_1MinstrelHtWifiManager_aedf901def4f23eac093a7da8f363170b}{Calculate\+Throughput} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint32\+\_\+t group\+Id, uint32\+\_\+t rate\+Id, double ewma\+Prob)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a5c8fb23ad34518c1e1f2add75a3b7f4c}{Set\+Best\+Station\+Th\+Rates} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint32\+\_\+t index)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_ac9995672834a1256d4203b6045f6b513}{Set\+Best\+Probability\+Rate} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint32\+\_\+t index)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}{Calculate\+Retransmits} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint32\+\_\+t index)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a5d5a52477371def6807f70167144372c}{Calculate\+Retransmits} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint32\+\_\+t group\+Id, uint32\+\_\+t rate\+Id)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelHtWifiManager_a1ec0bac59759a6cb084d5f12149bac19}{Calculate\+Time\+Unicast\+Packet} (\hyperlink{classns3_1_1Time}{Time} data\+Transmission\+Time, uint32\+\_\+t short\+Retries, uint32\+\_\+t long\+Retries)
\item 
double \hyperlink{classns3_1_1MinstrelHtWifiManager_a68fa27a1e0e083f4d3f2e19db64c1d4e}{Calculate\+Ewmsd} (double old\+Ewmsd, double current\+Prob, double ewma\+Prob, uint32\+\_\+t weight)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a073d213169fe62c797ceb92ad999dcb0}{Init\+Sample\+Table} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_ac4f7bc4281f141466bfe6b01151c41c0}{Print\+Sample\+Table} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a434fb6aadb02a74cc097ba54b7b02cb3}{Print\+Table} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a11ef14d90291b78f771eec0d1dad712f}{Stats\+Dump} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint32\+\_\+t index, std\+::ofstream \&of)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{Check\+Init} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a049c7b034d4647393f6949467fbcb628}{Count\+Retries} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelHtWifiManager_abb282b56803faf26139d0db929b09b22}{Update\+Rate} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{Get\+Rate\+Id} (uint32\+\_\+t index)
\begin{DoxyCompactList}\small\item\em Return the rate\+Id inside a group, from the global index. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{Get\+Group\+Id} (uint32\+\_\+t index)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{Get\+Index} (uint32\+\_\+t group\+Id, uint32\+\_\+t rate\+Id)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a44b99858b15826da1b42f135041058e0}{Get\+Ht\+Group\+Id} (uint8\+\_\+t txstreams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width)
\begin{DoxyCompactList}\small\item\em Returns the group\+Id of a HT M\+CS with the given number of streams, if using sgi and the channel width used. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_ae8425dbd449d4402c61941ae78ed8fb9}{Get\+Vht\+Group\+Id} (uint8\+\_\+t txstreams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width)
\begin{DoxyCompactList}\small\item\em Returns the group\+Id of a V\+HT M\+CS with the given number of streams, if using sgi and the channel width used. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{Get\+Lowest\+Index} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station)
\begin{DoxyCompactList}\small\item\em Returns the lowest global index of the rates supported by the station. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_afd34eac817675cfa9baa84a8ad4171f7}{Get\+Lowest\+Index} (\hyperlink{structns3_1_1MinstrelHtWifiRemoteStation}{Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$station, uint32\+\_\+t group\+Id)
\begin{DoxyCompactList}\small\item\em Returns the lowest global index of the rates supported by in the group. \end{DoxyCompactList}\item 
\hyperlink{namespacens3_abceecb3f813d2b4af697068f25085024}{Wifi\+Mode\+List} \hyperlink{classns3_1_1MinstrelHtWifiManager_aa3f58bf72c4fe7dd962ce0e99ba211a7}{Get\+Vht\+Device\+Mcs\+List} (void) const 
\begin{DoxyCompactList}\small\item\em Returns a list of only the V\+HT M\+CS supported by the device. \end{DoxyCompactList}\item 
\hyperlink{namespacens3_abceecb3f813d2b4af697068f25085024}{Wifi\+Mode\+List} \hyperlink{classns3_1_1MinstrelHtWifiManager_a51b40cdb077737e007f1c767c11d1424}{Get\+Ht\+Device\+Mcs\+List} (void) const 
\begin{DoxyCompactList}\small\item\em Returns a list of only the HT M\+CS supported by the device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelHtWifiManager_a5c7d923b77d5cd3a1d38810ed41f91f8}{m\+\_\+update\+Stats}
\begin{DoxyCompactList}\small\item\em How frequent do we calculate the stats (1/10 seconds). \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1MinstrelHtWifiManager_a7db397626b2dff4bd62619aa7fec75af}{m\+\_\+look\+Around\+Rate}
\begin{DoxyCompactList}\small\item\em The \% to try other rates than our current rate. \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{m\+\_\+ewma\+Level}
\begin{DoxyCompactList}\small\item\em Exponential weighted moving average level (or coefficient). \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}{m\+\_\+n\+Sample\+Col}
\begin{DoxyCompactList}\small\item\em Number of sample columns. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a069e6a4b77dc080d720a4b076cd8d7c5}{m\+\_\+frame\+Length}
\begin{DoxyCompactList}\small\item\em Frame length used for calculate modes Tx\+Time. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\+\_\+num\+Groups}
\begin{DoxyCompactList}\small\item\em Number of groups Minstrel should consider. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\+\_\+num\+Rates}
\begin{DoxyCompactList}\small\item\em Number of rates per group Minstrel should consider. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1MinstrelHtWifiManager_a6997df6e5760dd9891f2caea0a6e1937}{m\+\_\+use\+Vht\+Only}
\begin{DoxyCompactList}\small\item\em If only V\+HT M\+CS should be used, instead of HT and V\+HT. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1MinstrelHtWifiManager_a0e2d19e84336ab6d788afd81a6ba9cdb}{m\+\_\+print\+Stats}
\begin{DoxyCompactList}\small\item\em If statistics table should be printed. \end{DoxyCompactList}\item 
\hyperlink{namespacens3_a246bc05fa23a9042a610b32301e0ae42}{Minstrel\+Mcs\+Groups} \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\+\_\+minstrel\+Groups}
\begin{DoxyCompactList}\small\item\em Global array for groups information. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MinstrelWifiManager}{Minstrel\+Wifi\+Manager} $>$ \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\+\_\+legacy\+Manager}
\begin{DoxyCompactList}\small\item\em Pointer to an instance of \hyperlink{classns3_1_1MinstrelWifiManager}{Minstrel\+Wifi\+Manager}. Used when 802.\+11n/ac not supported. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1UniformRandomVariable}{Uniform\+Random\+Variable} $>$ \hyperlink{classns3_1_1MinstrelHtWifiManager_ad2dbdd143ca703a4366ed562b6ece239}{m\+\_\+uniform\+Random\+Variable}
\begin{DoxyCompactList}\small\item\em Provides uniform random variables. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ uint64\+\_\+t, \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} $>$ \hyperlink{classns3_1_1MinstrelHtWifiManager_a40f1adcf50b778a96c87e16db15e950f}{m\+\_\+rate\+Change}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Implementation of Minstrel HT Rate Control Algorithm

Minstrel-\/\+HT is a rate adaptation mechanism for the 802.\+11n/ac standard based on Minstrel, and is based on the approach of probing the channel to dynamically learn about working rates that can be supported. Minstrel-\/\+HT is designed for high-\/latency devices that implement a Multiple Rate Retry (M\+RR) chain. This kind of device does not give feedback for every frame retransmission, but only when a frame was correctly transmitted (an A\+CK is received) or a frame transmission completely fails (all retransmission attempts fail). The M\+RR chain is used to advise the hardware about which rate to use when retransmitting a frame. 

Minstrel-\/\+HT adapts the M\+CS, channel width, number of streams, and short guard interval (enabled or disabled). For keeping statistics, it arranges M\+CS in groups, where each group is defined by the tuple (streams, S\+GI, channel width). There is a vector of all groups supported by the P\+HY layer of the transmitter; for each group, the capabilities and the estimated duration of its rates are maintained.

Each station maintains a table of groups statistics. For each group, a flag indicates if the group is supported by the station. Different stations communicating with an AP can have different capabilities.

Stats are updated per A-\/\+M\+P\+DU when receiving Ampdu\+Tx\+Status. If the number of successful or failed M\+P\+D\+Us is greater than zero (a Block\+Ack was received), the rates are also updated. If the number of successful and failed M\+P\+D\+Us is zero (Block\+Ack timeout), then the rate selected is based on the M\+RR chain.

On each update interval, it sets the max\+Thr\+Rate, the secondmax\+Thr\+Rate and the max\+Prob\+Rate for the M\+RR chain. These rates are only used when an entire A-\/\+M\+P\+DU fails and is retried.

Differently from legacy minstrel, sampling is not done based on \char`\"{}lookaround ratio\char`\"{}, but assuring all rates are sampled at least once each interval. However, it samples less often the low rates and high probability of error rates.

When this rate control is configured but HT and V\+HT are not supported, Minstrel-\/\+HT uses legacy Minstrel (minstrel-\/wifi-\/manager) for rate control. 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Rate\+Change\+Traced\+Callback@{Rate\+Change\+Traced\+Callback}}
\index{Rate\+Change\+Traced\+Callback@{Rate\+Change\+Traced\+Callback}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Rate\+Change\+Traced\+Callback}{RateChangeTracedCallback}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Rate\+Change\+Traced\+Callback) (const uint64\+\_\+t rate, const {\bf Mac48\+Address} remote\+Address)}\hypertarget{classns3_1_1MinstrelHtWifiManager_a0374b86124574585310bb1b649479c0e}{}\label{classns3_1_1MinstrelHtWifiManager_a0374b86124574585310bb1b649479c0e}
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback} signature for rate change events.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em rate} & The new rate. \\
\hline
\mbox{\tt in}  & {\em address} & The remote station M\+AC address. \\
\hline
\end{DoxyParams}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Minstrel\+Ht\+Wifi\+Manager@{Minstrel\+Ht\+Wifi\+Manager}}
\index{Minstrel\+Ht\+Wifi\+Manager@{Minstrel\+Ht\+Wifi\+Manager}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Minstrel\+Ht\+Wifi\+Manager()}{MinstrelHtWifiManager()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Minstrel\+Ht\+Wifi\+Manager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelHtWifiManager_a02378c08b0b21f0d85c3e7611ce21aba}{}\label{classns3_1_1MinstrelHtWifiManager_a02378c08b0b21f0d85c3e7611ce21aba}
Create the legacy Minstrel manager in case HT is not supported by the device or non-\/\+HT stations want to associate.
\begin{DoxyCode}
144   : \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups} (0),
145     \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates} (0)
146 \{
147   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
148   \hyperlink{classns3_1_1MinstrelHtWifiManager_ad2dbdd143ca703a4366ed562b6ece239}{m\_uniformRandomVariable} = CreateObject<UniformRandomVariable> ();
153   \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager} = CreateObject<MinstrelWifiManager> ();
154 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!````~Minstrel\+Ht\+Wifi\+Manager@{$\sim$\+Minstrel\+Ht\+Wifi\+Manager}}
\index{````~Minstrel\+Ht\+Wifi\+Manager@{$\sim$\+Minstrel\+Ht\+Wifi\+Manager}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{$\sim$\+Minstrel\+Ht\+Wifi\+Manager()}{~MinstrelHtWifiManager()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::$\sim$\+Minstrel\+Ht\+Wifi\+Manager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ae007b17cf3f980862291e4f1c1191dd3}{}\label{classns3_1_1MinstrelHtWifiManager_ae007b17cf3f980862291e4f1c1191dd3}

\begin{DoxyCode}
157 \{
158   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
159   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1WifiRemoteStationManager_ac792dc8f3c77d507d25de0b87b52608c}{HasHtSupported} ())
160     \{
161       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
162         \{
163           \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ratesFirstMpduTxTimeTable.clear ();
164           \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ratesTxTimeTable.clear ();
165         \}
166     \}
167 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Function Documentation}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Add\+First\+Mpdu\+Tx\+Time@{Add\+First\+Mpdu\+Tx\+Time}}
\index{Add\+First\+Mpdu\+Tx\+Time@{Add\+First\+Mpdu\+Tx\+Time}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Add\+First\+Mpdu\+Tx\+Time(uint32\+\_\+t group\+Id, Wifi\+Mode mode, Time t)}{AddFirstMpduTxTime(uint32_t groupId, WifiMode mode, Time t)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Add\+First\+Mpdu\+Tx\+Time (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{group\+Id, }
\item[{{\bf Wifi\+Mode}}]{mode, }
\item[{{\bf Time}}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a4e42c7189837e6b28544c18327990ab9}{}\label{classns3_1_1MinstrelHtWifiManager_a4e42c7189837e6b28544c18327990ab9}


Save a Tx\+Time to the vector of groups. 


\begin{DoxyCode}
377 \{
378   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << groupId << mode << t);
379 
380   \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].ratesFirstMpduTxTimeTable.push\_back (std::make\_pair (t, mode));
381 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Add\+Mpdu\+Tx\+Time@{Add\+Mpdu\+Tx\+Time}}
\index{Add\+Mpdu\+Tx\+Time@{Add\+Mpdu\+Tx\+Time}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Add\+Mpdu\+Tx\+Time(uint32\+\_\+t group\+Id, Wifi\+Mode mode, Time t)}{AddMpduTxTime(uint32_t groupId, WifiMode mode, Time t)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Add\+Mpdu\+Tx\+Time (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{group\+Id, }
\item[{{\bf Wifi\+Mode}}]{mode, }
\item[{{\bf Time}}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a3ce7d66218d851e645c2f4775e7b8a91}{}\label{classns3_1_1MinstrelHtWifiManager_a3ce7d66218d851e645c2f4775e7b8a91}


Save a Tx\+Time to the vector of groups. 


\begin{DoxyCode}
401 \{
402   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << groupId << mode << t);
403 
404   \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].ratesTxTimeTable.push\_back (std::make\_pair (t, mode));
405 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 4


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Assign\+Streams@{Assign\+Streams}}
\index{Assign\+Streams@{Assign\+Streams}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Assign\+Streams(int64\+\_\+t stream)}{AssignStreams(int64_t stream)}}]{\setlength{\rightskip}{0pt plus 5cm}int64\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Assign\+Streams (
\begin{DoxyParamCaption}
\item[{int64\+\_\+t}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelHtWifiManager_a657f1dd26cd9492287dff1f99284e7b8}{}\label{classns3_1_1MinstrelHtWifiManager_a657f1dd26cd9492287dff1f99284e7b8}
Assign a fixed random variable stream number to the random variables used by this model. Return the number of streams (possibly zero) that have been assigned.


\begin{DoxyParams}{Parameters}
{\em stream} & first stream index to use \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of stream indices assigned by this model 
\end{DoxyReturn}

\begin{DoxyCode}
171 \{
172   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << stream);
173   int64\_t numStreamsAssigned = 0;
174   \hyperlink{classns3_1_1MinstrelHtWifiManager_ad2dbdd143ca703a4366ed562b6ece239}{m\_uniformRandomVariable}->\hyperlink{classns3_1_1RandomVariableStream_add11aaf975607746b7e271d300659a94}{SetStream} (stream);
175   numStreamsAssigned++;
176   numStreamsAssigned += \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->AssignStreams (stream);
177   \textcolor{keywordflow}{return} numStreamsAssigned;
178 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Calculate\+Ewmsd@{Calculate\+Ewmsd}}
\index{Calculate\+Ewmsd@{Calculate\+Ewmsd}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+Ewmsd(double old\+Ewmsd, double current\+Prob, double ewma\+Prob, uint32\+\_\+t weight)}{CalculateEwmsd(double oldEwmsd, double currentProb, double ewmaProb, uint32_t weight)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Calculate\+Ewmsd (
\begin{DoxyParamCaption}
\item[{double}]{old\+Ewmsd, }
\item[{double}]{current\+Prob, }
\item[{double}]{ewma\+Prob, }
\item[{uint32\+\_\+t}]{weight}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a68fa27a1e0e083f4d3f2e19db64c1d4e}{}\label{classns3_1_1MinstrelHtWifiManager_a68fa27a1e0e083f4d3f2e19db64c1d4e}
Perform E\+W\+M\+SD (Exponentially Weighted Moving Standard Deviation) calculation.


\begin{DoxyParams}{Parameters}
{\em old\+Ewmsd} & the old E\+W\+M\+SD \\
\hline
{\em current\+Prob} & the current probabilty \\
\hline
{\em ewma\+Prob} & the E\+W\+MA probability \\
\hline
{\em weight} & the weight \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the E\+W\+M\+SD 
\end{DoxyReturn}

\begin{DoxyCode}
1650 \{
1651   \textcolor{keywordtype}{double} diff, incr, tmp;
1652 
1653   \textcolor{comment}{/* calculate exponential weighted moving variance */}
1654   diff = currentProb - ewmaProb;
1655   incr = (100 - weight) * diff / 100;
1656   tmp = oldEwmsd * oldEwmsd;
1657   tmp = weight * (tmp + diff * incr) / 100;
1658 
1659   \textcolor{comment}{/* return standard deviation */}
1660   \textcolor{keywordflow}{return} sqrt (tmp);
1661 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Calculate\+First\+Mpdu\+Tx\+Duration@{Calculate\+First\+Mpdu\+Tx\+Duration}}
\index{Calculate\+First\+Mpdu\+Tx\+Duration@{Calculate\+First\+Mpdu\+Tx\+Duration}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+First\+Mpdu\+Tx\+Duration(\+Ptr$<$ Wifi\+Phy $>$ phy, uint8\+\_\+t streams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width, Wifi\+Mode mode)}{CalculateFirstMpduTxDuration(Ptr< WifiPhy > phy, uint8_t streams, uint8_t sgi, uint8_t chWidth, WifiMode mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Calculate\+First\+Mpdu\+Tx\+Duration (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wifi\+Phy} $>$}]{phy, }
\item[{uint8\+\_\+t}]{streams, }
\item[{uint8\+\_\+t}]{sgi, }
\item[{uint8\+\_\+t}]{ch\+Width, }
\item[{{\bf Wifi\+Mode}}]{mode}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_aebde711921cb34ee3bfbe9801e76ae2e}{}\label{classns3_1_1MinstrelHtWifiManager_aebde711921cb34ee3bfbe9801e76ae2e}


Estimates the Tx\+Time of a frame with a given mode and group (stream, guard interval and channel width). 


\begin{DoxyCode}
329 \{
330   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << phy << (uint16\_t)streams << (uint16\_t)
      \hyperlink{namespacestd}{sgi} << (uint16\_t)chWidth << mode);
331 
332   WifiTxVector txvector;
333   txvector.SetNss (streams);
334   txvector.SetGuardInterval (\hyperlink{namespacestd}{sgi} ? 400 : 800);
335   txvector.SetChannelWidth (chWidth);
336   txvector.SetNess (0);
337   txvector.SetStbc (phy->\hyperlink{classns3_1_1WifiPhy_aba80990877159beed86abcd9efcc8e13}{GetStbc} ());
338   txvector.SetMode (mode);
339   txvector.SetPreambleType (\hyperlink{group__wifi_gga5e94a56cb338a14ffbbb19c6a41251ebae0944a664debb28943c12d4cd7a81d2a}{WIFI\_PREAMBLE\_HT\_MF});
340   \textcolor{keywordflow}{return} phy->\hyperlink{classns3_1_1WifiPhy_aee98c7241bb4f0bb8e6d90f5771dacc7}{CalculateTxDuration} (\hyperlink{classns3_1_1MinstrelHtWifiManager_a069e6a4b77dc080d720a4b076cd8d7c5}{m\_frameLength}, txvector, phy->
      \hyperlink{classns3_1_1WifiPhy_ad2508d94faf22d690d6b8b4367934fd1}{GetFrequency} (), \hyperlink{namespacens3_ae617d41bbd0c07fa58ee2306f687b055ac78adeb4fa20b2eefca65601b0b38625}{MPDU\_IN\_AGGREGATE}, 0);
341 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Calculate\+Mpdu\+Tx\+Duration@{Calculate\+Mpdu\+Tx\+Duration}}
\index{Calculate\+Mpdu\+Tx\+Duration@{Calculate\+Mpdu\+Tx\+Duration}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+Mpdu\+Tx\+Duration(\+Ptr$<$ Wifi\+Phy $>$ phy, uint8\+\_\+t streams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width, Wifi\+Mode mode)}{CalculateMpduTxDuration(Ptr< WifiPhy > phy, uint8_t streams, uint8_t sgi, uint8_t chWidth, WifiMode mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Calculate\+Mpdu\+Tx\+Duration (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wifi\+Phy} $>$}]{phy, }
\item[{uint8\+\_\+t}]{streams, }
\item[{uint8\+\_\+t}]{sgi, }
\item[{uint8\+\_\+t}]{ch\+Width, }
\item[{{\bf Wifi\+Mode}}]{mode}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a0e356a05e616986cb292a72901984d4f}{}\label{classns3_1_1MinstrelHtWifiManager_a0e356a05e616986cb292a72901984d4f}


Estimates the Tx\+Time of a frame with a given mode and group (stream, guard interval and channel width). 


\begin{DoxyCode}
345 \{
346   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << phy << (uint16\_t)streams << (uint16\_t)
      \hyperlink{namespacestd}{sgi} << (uint16\_t)chWidth << mode);
347 
348   WifiTxVector txvector;
349   txvector.SetNss (streams);
350   txvector.SetGuardInterval (\hyperlink{namespacestd}{sgi} ? 400 : 800);
351   txvector.SetChannelWidth (chWidth);
352   txvector.SetNess (0);
353   txvector.SetStbc (phy->\hyperlink{classns3_1_1WifiPhy_aba80990877159beed86abcd9efcc8e13}{GetStbc} ());
354   txvector.SetMode (mode);
355   txvector.SetPreambleType (\hyperlink{group__wifi_gga5e94a56cb338a14ffbbb19c6a41251eba97c5c71995de5f28931200e6d5a38a66}{WIFI\_PREAMBLE\_NONE});
356   \textcolor{keywordflow}{return} phy->\hyperlink{classns3_1_1WifiPhy_aee98c7241bb4f0bb8e6d90f5771dacc7}{CalculateTxDuration} (\hyperlink{classns3_1_1MinstrelHtWifiManager_a069e6a4b77dc080d720a4b076cd8d7c5}{m\_frameLength}, txvector, phy->
      \hyperlink{classns3_1_1WifiPhy_ad2508d94faf22d690d6b8b4367934fd1}{GetFrequency} (), \hyperlink{namespacens3_ae617d41bbd0c07fa58ee2306f687b055ac78adeb4fa20b2eefca65601b0b38625}{MPDU\_IN\_AGGREGATE}, 0);
357 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Calculate\+Retransmits@{Calculate\+Retransmits}}
\index{Calculate\+Retransmits@{Calculate\+Retransmits}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+Retransmits(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint32\+\_\+t index)}{CalculateRetransmits(MinstrelHtWifiRemoteStation *station, uint32_t index)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Calculate\+Retransmits (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint32\+\_\+t}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}{}\label{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}
Calculate the number of retransmissions to set for the index rate.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
{\em index} & the index \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1590 \{
1591   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station << index);
1592   uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (index);
1593   uint32\_t rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (index);
1594   \textcolor{keywordflow}{if} (!station->m\_groupsTable[groupId].m\_ratesTable[rateId].retryUpdated)
1595     \{
1596       \hyperlink{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}{CalculateRetransmits} (station, groupId, rateId);
1597     \}
1598 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Calculate\+Retransmits@{Calculate\+Retransmits}}
\index{Calculate\+Retransmits@{Calculate\+Retransmits}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+Retransmits(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint32\+\_\+t group\+Id, uint32\+\_\+t rate\+Id)}{CalculateRetransmits(MinstrelHtWifiRemoteStation *station, uint32_t groupId, uint32_t rateId)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Calculate\+Retransmits (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint32\+\_\+t}]{group\+Id, }
\item[{uint32\+\_\+t}]{rate\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a5d5a52477371def6807f70167144372c}{}\label{classns3_1_1MinstrelHtWifiManager_a5d5a52477371def6807f70167144372c}
Calculate the number of retransmissions to set for the (group\+Id, rate\+Id) rate.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
{\em group\+Id} & the group ID \\
\hline
{\em rate\+Id} & the rate ID \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1602 \{
1603   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station << groupId << groupId);
1604   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" Calculating the number of retries"});
1605 
1606   uint32\_t cw = 15;                     \textcolor{comment}{// Is an approximation.}
1607   uint32\_t cwMax = 1023;
1608   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} cwTime, txTime, dataTxTime;
1609   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} slotTime = \hyperlink{classns3_1_1WifiRemoteStationManager_a1739d7dbfba0b5d9539ba840426dfb78}{GetMac} ()->GetSlot ();
1610   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} ackTime = \hyperlink{classns3_1_1WifiRemoteStationManager_a1739d7dbfba0b5d9539ba840426dfb78}{GetMac} ()->GetBasicBlockAckTimeout ();
1611 
1612   \textcolor{keywordflow}{if} (station->m\_groupsTable[groupId].m\_ratesTable[rateId].ewmaProb < 1)
1613     \{
1614       station->m\_groupsTable[groupId].m\_ratesTable[rateId].retryCount = 1;
1615     \}
1616   \textcolor{keywordflow}{else}
1617     \{
1618       station->m\_groupsTable[groupId].m\_ratesTable[rateId].retryCount = 2;
1619       station->m\_groupsTable[groupId].m\_ratesTable[rateId].retryUpdated = \textcolor{keyword}{true};
1620 
1621       dataTxTime = \hyperlink{classns3_1_1MinstrelHtWifiManager_a53308ad39a550d0972aad572b3566ec5}{GetFirstMpduTxTime} (groupId, 
      \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, station->m\_groupsTable[groupId].m\_ratesTable[rateId].mcsIndex)) +
1622         \hyperlink{classns3_1_1MinstrelHtWifiManager_a10e963727034a88092842510c5fc21bc}{GetMpduTxTime} (groupId, \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, station->
      m\_groupsTable[groupId].m\_ratesTable[rateId].mcsIndex)) * (station->m\_avgAmpduLen - 1);
1623 
1624       \textcolor{comment}{/* Contention time for first 2 tries */}
1625       cwTime = (cw / 2) * slotTime;
1626       cw = \hyperlink{group__highprec_gacb0b89d5f4363bf77747ff1212f27430}{Min} ((cw + 1) * 2, cwMax);
1627       cwTime += (cw / 2) * slotTime;
1628       cw = \hyperlink{group__highprec_gacb0b89d5f4363bf77747ff1212f27430}{Min} ((cw + 1) * 2, cwMax);
1629 
1630       \textcolor{comment}{/* Total TX time for data and Contention after first 2 tries */}
1631       txTime = cwTime + 2 * (dataTxTime + ackTime);
1632 
1633       \textcolor{comment}{/* See how many more tries we can fit inside segment size */}
1634       \textcolor{keywordflow}{do}
1635         \{
1636           \textcolor{comment}{/* Contention time for this try */}
1637           cwTime = (cw / 2) * slotTime;
1638           cw = \hyperlink{group__highprec_gacb0b89d5f4363bf77747ff1212f27430}{Min} ((cw + 1) * 2, cwMax);
1639 
1640           \textcolor{comment}{/* Total TX time after this try */}
1641           txTime += cwTime + ackTime + dataTxTime;
1642         \}
1643       \textcolor{keywordflow}{while} ((txTime < \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (6))
1644              && (++station->m\_groupsTable[groupId].m\_ratesTable[rateId].retryCount < 7));
1645     \}
1646 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Calculate\+Throughput@{Calculate\+Throughput}}
\index{Calculate\+Throughput@{Calculate\+Throughput}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+Throughput(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint32\+\_\+t group\+Id, uint32\+\_\+t rate\+Id, double ewma\+Prob)}{CalculateThroughput(MinstrelHtWifiRemoteStation *station, uint32_t groupId, uint32_t rateId, double ewmaProb)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Calculate\+Throughput (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint32\+\_\+t}]{group\+Id, }
\item[{uint32\+\_\+t}]{rate\+Id, }
\item[{double}]{ewma\+Prob}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_aedf901def4f23eac093a7da8f363170b}{}\label{classns3_1_1MinstrelHtWifiManager_aedf901def4f23eac093a7da8f363170b}
Return the average throughput of the M\+CS defined by group\+Id and rate\+Id.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
{\em group\+Id} & the group ID \\
\hline
{\em rate\+Id} & the rate ID \\
\hline
{\em ewma\+Prob} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the throughput 
\end{DoxyReturn}
Calculating throughput. Do not account throughput if sucess prob is below 10\% (as done in minstrel\+\_\+ht linux implementation).

For the throughput calculation, limit the probability value to 90\% to account for collision related packet error rate fluctuation.
\begin{DoxyCode}
1357 \{
1363   \textcolor{keywordflow}{if} (ewmaProb < 10)
1364     \{
1365       \textcolor{keywordflow}{return} 0;
1366     \}
1367   \textcolor{keywordflow}{else}
1368     \{
1373       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} txTime =  station->m\_groupsTable[groupId].m\_ratesTable[rateId].perfectTxTime;
1374       \textcolor{keywordflow}{if} (ewmaProb > 90)
1375         \{
1376           \textcolor{keywordflow}{return} 90 / txTime.GetSeconds ();
1377         \}
1378       \textcolor{keywordflow}{else}
1379         \{
1380           \textcolor{keywordflow}{return} ewmaProb / txTime.GetSeconds ();
1381         \}
1382     \}
1383 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14




Here is the caller graph for this function\+:
% FIG 15


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Calculate\+Time\+Unicast\+Packet@{Calculate\+Time\+Unicast\+Packet}}
\index{Calculate\+Time\+Unicast\+Packet@{Calculate\+Time\+Unicast\+Packet}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+Time\+Unicast\+Packet(\+Time data\+Transmission\+Time, uint32\+\_\+t short\+Retries, uint32\+\_\+t long\+Retries)}{CalculateTimeUnicastPacket(Time dataTransmissionTime, uint32_t shortRetries, uint32_t longRetries)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Calculate\+Time\+Unicast\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{data\+Transmission\+Time, }
\item[{uint32\+\_\+t}]{short\+Retries, }
\item[{uint32\+\_\+t}]{long\+Retries}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a1ec0bac59759a6cb084d5f12149bac19}{}\label{classns3_1_1MinstrelHtWifiManager_a1ec0bac59759a6cb084d5f12149bac19}
Estimate the time to transmit the given packet with the given number of retries. This function is \char`\"{}roughly\char`\"{} the function \char`\"{}calc\+\_\+usecs\+\_\+unicast\+\_\+packet\char`\"{} in minstrel.\+c in the madwifi implementation.

The basic idea is that, we try to estimate the \char`\"{}average\char`\"{} time used to transmit the packet for the given number of retries while also accounting for the 802.\+11 congestion window change. The original code in the madwifi seems to estimate the number of backoff slots as the half of the current CW size.

There are four main parts\+:
\begin{DoxyItemize}
\item wait for D\+I\+FS (sense idle channel)
\item A\+CK timeouts
\item D\+A\+TA transmission
\item backoffs according to CW
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em data\+Transmission\+Time} & the data transmission time \\
\hline
{\em short\+Retries} & the short retries \\
\hline
{\em long\+Retries} & the long retries \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the unicast packet time 
\end{DoxyReturn}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Check\+Init@{Check\+Init}}
\index{Check\+Init@{Check\+Init}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Check\+Init(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{CheckInit(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Check\+Init (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{}\label{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}
Check for initializations.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
Check if the station supports HT. Assume that if the device do not supports HT then the station will not support HT either. We save from using another check and variable.
\begin{DoxyCode}
463 \{
464   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
465 
466   \textcolor{comment}{// Note: we appear to be doing late initialization of the table}
467   \textcolor{comment}{// to make sure that the set of supported rates has been initialized}
468   \textcolor{comment}{// before we perform our own initialization.}
469   \textcolor{keywordflow}{if} (!station->m\_initialized)
470     \{
477       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1WifiRemoteStationManager_a84f0f86ec191bd3a00c531f1e9639f96}{GetHtSupported} (station) && !\hyperlink{classns3_1_1WifiRemoteStationManager_aecf5ed3203b9b55cd831696a08daa5fe}{GetVhtSupported} (station))
478         \{
479           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Non-HT station "} << station);
480           station->m\_isHt = \textcolor{keyword}{false};
481           \textcolor{comment}{// We will use non-HT minstrel for this station. Initialize the manager.}
482           \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetAttribute (\textcolor{stringliteral}{"UpdateStatistics"}, TimeValue (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a5c7d923b77d5cd3a1d38810ed41f91f8}{m\_updateStats}));
483           \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetAttribute (\textcolor{stringliteral}{"LookAroundRate"}, DoubleValue (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a7db397626b2dff4bd62619aa7fec75af}{m\_lookAroundRate}));
484           \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetAttribute (\textcolor{stringliteral}{"EWMA"}, DoubleValue (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{m\_ewmaLevel}));
485           \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetAttribute (\textcolor{stringliteral}{"SampleColumn"}, UintegerValue (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}{m\_nSampleCol}));
486           \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetAttribute (\textcolor{stringliteral}{"PacketLength"}, UintegerValue (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a069e6a4b77dc080d720a4b076cd8d7c5}{m\_frameLength}));
487           \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetAttribute (\textcolor{stringliteral}{"PrintStats"}, BooleanValue (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a0e2d19e84336ab6d788afd81a6ba9cdb}{m\_printStats}));
488           \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->CheckInit (station);
489         \}
490       \textcolor{keywordflow}{else}
491         \{
492           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"HT station "} << station);
493           station->m\_isHt = \textcolor{keyword}{true};
494           station->m\_nModes = \hyperlink{classns3_1_1WifiRemoteStationManager_a3b4fd7e5c50dfe3270831ad38de180e9}{GetNMcsSupported} (station);
495           station->m\_sampleTable = \hyperlink{namespacens3_a6f9a56ecdb723c09bd5ab4f3b57a5bb5}{SampleRate} (\hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates}, std::vector<uint32\_t> (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}{m\_nSampleCol}));
496           \hyperlink{classns3_1_1MinstrelHtWifiManager_a073d213169fe62c797ceb92ad999dcb0}{InitSampleTable} (station);
497           \hyperlink{classns3_1_1MinstrelHtWifiManager_a3b59b889db624539c6d5af89fa5e9f74}{RateInit} (station);
498           std::ostringstream tmp;
499           tmp << \textcolor{stringliteral}{"minstrel-ht-stats-"} << station->m\_state->m\_address << \textcolor{stringliteral}{".txt"};
500           station->m\_statsFile.open (tmp.str ().c\_str (), std::ios::out);
501           station->m\_initialized = \textcolor{keyword}{true};
502         \}
503     \}
504 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16




Here is the caller graph for this function\+:
% FIG 17


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Count\+Retries@{Count\+Retries}}
\index{Count\+Retries@{Count\+Retries}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Count\+Retries(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{CountRetries(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Count\+Retries (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a049c7b034d4647393f6949467fbcb628}{}\label{classns3_1_1MinstrelHtWifiManager_a049c7b034d4647393f6949467fbcb628}
Count retries.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the count of retries 
\end{DoxyReturn}

\begin{DoxyCode}
1053 \{
1054   uint32\_t maxProbRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxProbRate);
1055   uint32\_t maxProbGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxProbRate);
1056   uint32\_t maxTpRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxTpRate);
1057   uint32\_t maxTpGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate);
1058   uint32\_t maxTp2RateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxTpRate2);
1059   uint32\_t maxTp2GroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate2);
1060 
1061   \textcolor{keywordflow}{if} (!station->m\_isSampling)
1062     \{
1063       \textcolor{keywordflow}{return} station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTpRateId].retryCount +
1064              station->m\_groupsTable[maxTp2GroupId].m\_ratesTable[maxTp2RateId].retryCount +
1065              station->m\_groupsTable[maxProbGroupId].m\_ratesTable[maxProbRateId].retryCount;
1066     \}
1067   \textcolor{keywordflow}{else}
1068     \{
1069       \textcolor{keywordflow}{return} 1 + station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTp2RateId].retryCount +
1070              station->m\_groupsTable[maxProbGroupId].m\_ratesTable[maxProbRateId].retryCount;
1071     \}
1072 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 18




Here is the caller graph for this function\+:
% FIG 19


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Create\+Station@{Do\+Create\+Station}}
\index{Do\+Create\+Station@{Do\+Create\+Station}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Create\+Station(void) const }{DoCreateStation(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Remote\+Station} $\ast$ ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Create\+Station (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ad661639eb9f121f1e69418e774bbadab}{}\label{classns3_1_1MinstrelHtWifiManager_ad661639eb9f121f1e69418e774bbadab}
\begin{DoxyReturn}{Returns}
a new station data structure 
\end{DoxyReturn}
Assume the station is HT. When correct information available it will be checked.

Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a63dfc98d85d14b9e6b6314c7648c6a7d}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
409 \{
410   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
411 
412   MinstrelHtWifiRemoteStation *station = \textcolor{keyword}{new} MinstrelHtWifiRemoteStation ();
413 
414   \textcolor{comment}{// Initialize variables common to both stations.}
415   station->m\_nextStatsUpdate = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1MinstrelHtWifiManager_a5c7d923b77d5cd3a1d38810ed41f91f8}{m\_updateStats};
416   station->m\_col = 0;
417   station->m\_index = 0;
418   station->m\_maxTpRate = 0;
419   station->m\_maxTpRate2 = 0;
420   station->m\_maxProbRate = 0;
421   station->m\_nModes = 0;
422   station->m\_totalPacketsCount = 0;
423   station->m\_samplePacketsCount = 0;
424   station->m\_isSampling = \textcolor{keyword}{false};
425   station->m\_sampleRate = 0;
426   station->m\_sampleDeferred = \textcolor{keyword}{false};
427   station->m\_shortRetry = 0;
428   station->m\_longRetry = 0;
429   station->m\_txrate = 0;
430   station->m\_initialized = \textcolor{keyword}{false};
431 
432   \textcolor{comment}{// Variables specific to HT station}
433   station->m\_sampleGroup = 0;
434   station->m\_numSamplesSlow = 0;
435   station->m\_sampleCount = 16;
436   station->m\_sampleWait = 0;
437   station->m\_sampleTries = 4;
438 
439   station->m\_avgAmpduLen = 1;
440   station->m\_ampduLen = 0;
441   station->m\_ampduPacketCount = 0;
442 
443   \textcolor{comment}{// If the device supports HT}
444   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1WifiRemoteStationManager_ac792dc8f3c77d507d25de0b87b52608c}{HasHtSupported} () || \hyperlink{classns3_1_1WifiRemoteStationManager_afae2836c7785854272d73bf33e58c95a}{HasVhtSupported} ())
445     \{
450       station->m\_isHt = \textcolor{keyword}{true};
451     \}
452   \textcolor{comment}{// Use the variable in the station to indicate that the device do not support HT}
453   \textcolor{keywordflow}{else}
454     \{
455       station->m\_isHt = \textcolor{keyword}{false};
456     \}
457 
458   \textcolor{keywordflow}{return} station;
459 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Dispose\+Station@{Do\+Dispose\+Station}}
\index{Do\+Dispose\+Station@{Do\+Dispose\+Station}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Dispose\+Station(\+Wifi\+Remote\+Station $\ast$station)}{DoDisposeStation(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Dispose\+Station (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a7cdd11ae7e8f95adeb2dcd03a9697bba}{}\label{classns3_1_1MinstrelHtWifiManager_a7cdd11ae7e8f95adeb2dcd03a9697bba}
Dispose station function 
\begin{DoxyParams}{Parameters}
{\em station} & the wifi remote station \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
880 \{
881   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
882   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *) st;
883   station->DisposeStation ();
884 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Get\+Data\+Tx\+Vector@{Do\+Get\+Data\+Tx\+Vector}}
\index{Do\+Get\+Data\+Tx\+Vector@{Do\+Get\+Data\+Tx\+Vector}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Get\+Data\+Tx\+Vector(\+Wifi\+Remote\+Station $\ast$station)}{DoGetDataTxVector(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Tx\+Vector} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Get\+Data\+Tx\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_abc2436c9c8dabb7c78907f478e1bb8c7}{}\label{classns3_1_1MinstrelHtWifiManager_abc2436c9c8dabb7c78907f478e1bb8c7}

\begin{DoxyParams}{Parameters}
{\em station} & the station that we need to communicate\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the T\+X\+V\+E\+C\+T\+OR to use to send a packet to the station
\end{DoxyReturn}
Note\+: This method is called before sending a unicast packet or a fragment of a unicast packet to decide which transmission mode to use. 

Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a5a6b2bfcd4959da43c54f0072bd01202}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
888 \{
889   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
890   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *) st;
891 
892   \textcolor{keywordflow}{if} (!station->m\_initialized)
893     \{
894       \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
895     \}
896 
897   \textcolor{keywordflow}{if} (!station->m\_isHt)
898     \{
899       WifiTxVector vector = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->GetDataTxVector (station);
900 
901       uint64\_t dataRate = vector.GetMode ().GetDataRate (vector);
902       \textcolor{keywordflow}{if} (!station->m\_isSampling)
903         \{
904           \hyperlink{classns3_1_1MinstrelHtWifiManager_a40f1adcf50b778a96c87e16db15e950f}{m\_rateChange} (dataRate, station->m\_state->m\_address);
905         \}
906 
907       \textcolor{keywordflow}{return} vector;
908     \}
909   \textcolor{keywordflow}{else}
910     \{
911       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoGetDataMode m\_txrate= "} << station->m\_txrate);
912 
913       uint32\_t rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_txrate);
914       uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_txrate);
915       uint32\_t mcsIndex = station->m\_groupsTable[groupId].m\_ratesTable[rateId].mcsIndex;
916 
917       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoGetDataMode rateId= "} << rateId << \textcolor{stringliteral}{" groupId= "} << groupId << \textcolor{stringliteral}{" mode= "} 
      << \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, mcsIndex));
918 
919       McsGroup \hyperlink{namespacevisualizer_1_1higcontainer_aa6ad2b76790275bfce7783429beaa23f}{group} = \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId];
920 
921       \textcolor{comment}{// Check consistency of rate selected.}
922       \textcolor{keywordflow}{if} ((group.sgi && !\hyperlink{classns3_1_1WifiRemoteStationManager_aa55f6cb04128c88710119c8289f1b17e}{GetShortGuardInterval} (station)) || group.chWidth > 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} (station)  ||  group.streams > 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a5b08585f67c512242a2f3a53eeedade3}{GetNumberOfSupportedStreams} (station))
923         \{
924           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\textcolor{keyword}{false},\textcolor{stringliteral}{"Inconsistent group selected. Group: ("} << (uint16\_t)group.
      streams << \textcolor{stringliteral}{","} << (uint16\_t)group.sgi << \textcolor{stringliteral}{","} << (uint16\_t)group.chWidth << \textcolor{stringliteral}{")"} <<
925                          \textcolor{stringliteral}{" Station capabilities: ("} << 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a5b08585f67c512242a2f3a53eeedade3}{GetNumberOfSupportedStreams} (station) << \textcolor{stringliteral}{","} << 
      \hyperlink{classns3_1_1WifiRemoteStationManager_aa55f6cb04128c88710119c8289f1b17e}{GetShortGuardInterval} (station) << \textcolor{stringliteral}{","} << \hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} (station) << \textcolor{stringliteral}{
      ")"});
926         \}
927 
928       uint64\_t dataRate = \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, mcsIndex).
      \hyperlink{classns3_1_1WifiMode_adcfbe150f69da720db23387f733b8a52}{GetDataRate} (group.chWidth, group.sgi ? 400 : 800, group.streams);
929       \textcolor{keywordflow}{if} (!station->m\_isSampling)
930         \{
931           \hyperlink{classns3_1_1MinstrelHtWifiManager_a40f1adcf50b778a96c87e16db15e950f}{m\_rateChange} (dataRate, station->m\_state->m\_address);
932         \}
933       WifiMode mode = \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, mcsIndex);
934       \textcolor{keywordflow}{return} WifiTxVector (mode, \hyperlink{classns3_1_1WifiRemoteStationManager_acff2fc859ee6b4c66ea7a83dd075b5d6}{GetDefaultTxPowerLevel} (), 
      \hyperlink{classns3_1_1WifiRemoteStationManager_aac10b1403fb0bd670f8a8bd6d7e48304}{GetLongRetryCount} (station),
935                            \hyperlink{classns3_1_1WifiRemoteStationManager_a0f44967cbd7488baada4802ebc642110}{GetPreambleForTransmission} (mode, 
      \hyperlink{classns3_1_1WifiRemoteStationManager_ac9ccc8c514bd8d2af05c290e63461a2a}{GetAddress} (station)), group.sgi ? 400 : 800, \hyperlink{classns3_1_1WifiRemoteStationManager_a6fe1a93cbc48862715bfa97dfe3b3830}{GetNumberOfAntennas} (), group.
      streams, \hyperlink{classns3_1_1WifiRemoteStationManager_aa764545f9d30b60f05ba8dc64f273d25}{GetNess} (station), group.chWidth, \hyperlink{classns3_1_1WifiRemoteStationManager_a5421c8d510cb16eebeac9f2ea9dd73c3}{GetAggregation} (station) && !station->
      m\_isSampling, \hyperlink{classns3_1_1WifiRemoteStationManager_a82a949f8052408e1aaf7beeb47032c38}{GetStbc} (station));
936     \}
937 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 22


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Get\+Rts\+Tx\+Vector@{Do\+Get\+Rts\+Tx\+Vector}}
\index{Do\+Get\+Rts\+Tx\+Vector@{Do\+Get\+Rts\+Tx\+Vector}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Get\+Rts\+Tx\+Vector(\+Wifi\+Remote\+Station $\ast$station)}{DoGetRtsTxVector(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Tx\+Vector} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Get\+Rts\+Tx\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a8628d42b27a3bf5cbbd4ea0ec2a79307}{}\label{classns3_1_1MinstrelHtWifiManager_a8628d42b27a3bf5cbbd4ea0ec2a79307}

\begin{DoxyParams}{Parameters}
{\em station} & the station that we need to communicate\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the transmission mode to use to send an rts to the station
\end{DoxyReturn}
Note\+: This method is called before sending an rts to a station to decide which transmission mode to use for the rts. 

Implements \hyperlink{classns3_1_1WifiRemoteStationManager_abf44eccb31d4b1b58644fd6721d132c9}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
941 \{
942   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
943   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *) st;
944 
945   \textcolor{keywordflow}{if} (!station->m\_initialized)
946     \{
947       \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
948     \}
949 
950   \textcolor{keywordflow}{if} (!station->m\_isHt)
951     \{
952       \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->GetRtsTxVector (station);
953     \}
954   \textcolor{keywordflow}{else}
955     \{
956       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoGetRtsMode m\_txrate="} << station->m\_txrate);
957 
958       \textcolor{comment}{/* RTS is sent in a non-HT frame. RTS with HT is not supported yet in NS3.}
959 \textcolor{comment}{       * When supported, decision of using HT has to follow rules in Section 9.7.6 from 802.11-2012.}
960 \textcolor{comment}{       * From Sec. 9.7.6.5: "A frame other than a BlockAckReq or BlockAck that is carried in a}
961 \textcolor{comment}{       * non-HT PPDU shall be transmitted by the STA using a rate no higher than the highest}
962 \textcolor{comment}{       * rate in  the BSSBasicRateSet parameter that is less than or equal to the rate or}
963 \textcolor{comment}{       * non-HT reference rate (see 9.7.9) of the previously transmitted frame that was}
964 \textcolor{comment}{       * directed to the same receiving STA. If no rate in the BSSBasicRateSet parameter meets}
965 \textcolor{comment}{       * these conditions, the control frame shall be transmitted at a rate no higher than the}
966 \textcolor{comment}{       * highest mandatory rate of the attached PHY that is less than or equal to the rate}
967 \textcolor{comment}{       * or non-HT reference rate (see 9.7.9) of the previously transmitted frame that was}
968 \textcolor{comment}{       * directed to the same receiving STA."}
969 \textcolor{comment}{       */}
970 
971       \textcolor{comment}{// As we are in Minstrel HT, assume the last rate was an HT rate.}
972       uint32\_t rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_txrate);
973       uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_txrate);
974       uint32\_t mcsIndex = station->m\_groupsTable[groupId].m\_ratesTable[rateId].mcsIndex;
975 
976       WifiMode lastRate = \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, mcsIndex);
977       uint64\_t lastDataRate = lastRate.GetNonHtReferenceRate ();
978       uint32\_t nBasicRates = \hyperlink{classns3_1_1WifiRemoteStationManager_a1528f837dd70f82cda248f1434b94357}{GetNBasicModes} ();
979 
980       WifiMode rtsRate;
981       \textcolor{keywordtype}{bool} rateFound = \textcolor{keyword}{false};
982 
983       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nBasicRates; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
984         \{
985           uint64\_t rate = \hyperlink{classns3_1_1WifiRemoteStationManager_a8e4599eafc71fa98f6869e3d8908ea24}{GetBasicMode} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).\hyperlink{classns3_1_1WifiMode_adcfbe150f69da720db23387f733b8a52}{GetDataRate} (20);
986           \textcolor{keywordflow}{if} (rate <= lastDataRate)
987             \{
988               rtsRate = \hyperlink{classns3_1_1WifiRemoteStationManager_a8e4599eafc71fa98f6869e3d8908ea24}{GetBasicMode} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
989               rateFound = \textcolor{keyword}{true};
990             \}
991         \}
992 
993       \textcolor{keywordflow}{if} (!rateFound)
994         \{
995           Ptr<WifiPhy> phy = \hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ();
996           uint32\_t nSupportRates = phy->GetNModes ();
997           \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nSupportRates; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
998             \{
999               uint64\_t rate = phy->GetMode (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).GetDataRate (20);
1000               \textcolor{keywordflow}{if} (rate <= lastDataRate)
1001                 \{
1002                   rtsRate = phy->GetMode (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1003                   rateFound = \textcolor{keyword}{true};
1004                 \}
1005             \}
1006         \}
1007 
1008       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (rateFound);
1009 
1010       \textcolor{keywordflow}{return} WifiTxVector (rtsRate, \hyperlink{classns3_1_1WifiRemoteStationManager_acff2fc859ee6b4c66ea7a83dd075b5d6}{GetDefaultTxPowerLevel} (), 
      \hyperlink{classns3_1_1WifiRemoteStationManager_ad61157a9a56cf668f3255730f6a416b2}{GetShortRetryCount} (station), \hyperlink{classns3_1_1WifiRemoteStationManager_a0f44967cbd7488baada4802ebc642110}{GetPreambleForTransmission} (
      rtsRate, \hyperlink{classns3_1_1WifiRemoteStationManager_ac9ccc8c514bd8d2af05c290e63461a2a}{GetAddress} (station)),
1011                            800, 1, 1, 0, \hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} (station), 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a5421c8d510cb16eebeac9f2ea9dd73c3}{GetAggregation} (station), \textcolor{keyword}{false});
1012     \}
1013 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Initialize@{Do\+Initialize}}
\index{Do\+Initialize@{Do\+Initialize}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Initialize(void)}{DoInitialize(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Initialize (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a3c5c32d2a58fb45a922e435192b0cf43}{}\label{classns3_1_1MinstrelHtWifiManager_a3c5c32d2a58fb45a922e435192b0cf43}
\hyperlink{classns3_1_1Object_af4411cb29971772fcd09203474a95078}{Initialize()} implementation.

This method is called only once by \hyperlink{classns3_1_1Object_af4411cb29971772fcd09203474a95078}{Initialize()}. If the user calls \hyperlink{classns3_1_1Object_af4411cb29971772fcd09203474a95078}{Initialize()} multiple times, \hyperlink{classns3_1_1MinstrelHtWifiManager_a3c5c32d2a58fb45a922e435192b0cf43}{Do\+Initialize()} is called only the first time.

Subclasses are expected to override this method and chain up to their parent\textquotesingle{}s implementation once they are done. It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} and \hyperlink{classns3_1_1Object_a79dd435d300f3deca814553f561a2922}{Aggregate\+Object()} from within this method. Here we initialize m\+\_\+minstrel\+Groups with all the possible groups. If a group is not supported by the device, then it is marked as not supported. Then, after all initializations are finished, we check actual support for each receiving station.

Initialize the groups array. The HT groups come first, then the V\+HT ones. Minstrel maintains different types of indexes\+:
\begin{DoxyItemize}
\item A global continuous index, which identifies all rates within all groups, in \mbox{[}0, m\+\_\+num\+Groups $\ast$ m\+\_\+num\+Rates\mbox{]}
\item A group\+Id, which indexes a group in the array, in \mbox{[}0, m\+\_\+num\+Groups\mbox{]}
\item A rate\+Id, which identifies a rate within a group, in \mbox{[}0, m\+\_\+num\+Rates\mbox{]}
\item A device\+Index, which indexes a M\+CS in the phy M\+CS array.
\item A mcs\+Index, which indexes a M\+CS in the wifi-\/remote-\/station-\/manager supported M\+C\+Ss array.
\end{DoxyItemize}

Is S\+GI supported by the transmitter?

Is channel width supported by the transmitter?

Are streams supported by the transmitter?

Is S\+GI supported by the transmitter?

Is channel width supported by the transmitter?

Are streams supported by the transmitter? 

Reimplemented from \hyperlink{classns3_1_1Object_af8482a521433409fb5c7f749398c9dbe}{ns3\+::\+Object}.


\begin{DoxyCode}
191 \{
192   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
193 
200   \textcolor{comment}{// Check if the device supports HT or VHT}
201   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1WifiRemoteStationManager_ac792dc8f3c77d507d25de0b87b52608c}{HasHtSupported} () || \hyperlink{classns3_1_1WifiRemoteStationManager_afae2836c7785854272d73bf33e58c95a}{HasVhtSupported} ())
202     \{
203       \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups} = \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS} * 
      \hyperlink{namespacens3_a90ea346dc88400cf34c4379808fd35ba}{MAX\_HT\_STREAM\_GROUPS};
204       \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates} = \hyperlink{namespacens3_a09e2444bef75884650d2d5a53b6cd489}{MAX\_HT\_GROUP\_RATES};
205 
206       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1WifiRemoteStationManager_afae2836c7785854272d73bf33e58c95a}{HasVhtSupported} ())
207         \{
208           \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups} += \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS} * 
      \hyperlink{namespacens3_a10ef82db566ad2572e2374fd1cbbfa75}{MAX\_VHT\_STREAM\_GROUPS};
209           \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates} = \hyperlink{namespacens3_a55aceb8d2eb4d90f4501847187fbe2a6}{MAX\_VHT\_GROUP\_RATES};
210         \}
211 
222       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Initialize MCS Groups:"});
223       \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups} = \hyperlink{namespacens3_a246bc05fa23a9042a610b32301e0ae42}{MinstrelMcsGroups} (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups});
224 
225       \textcolor{comment}{// Initialize all HT groups}
226       \textcolor{keywordflow}{for} (uint8\_t chWidth = 20; chWidth <= \hyperlink{namespacens3_a8458cf81b47edd1b0c4dc3f67f71732d}{MAX\_HT\_WIDTH}; chWidth *= 2)
227         \{
228           \textcolor{keywordflow}{for} (uint8\_t \hyperlink{namespacestd}{sgi} = 0; \hyperlink{namespacestd}{sgi} <= 1; \hyperlink{namespacestd}{sgi}++)
229             \{
230               \textcolor{keywordflow}{for} (uint8\_t streams = 1; streams <= \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS}; streams++)
231                 \{
232                   uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a44b99858b15826da1b42f135041058e0}{GetHtGroupId} (streams, \hyperlink{namespacestd}{sgi}, chWidth);
233 
234                   \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams = streams;
235                   \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].sgi = \hyperlink{namespacestd}{sgi};
236                   \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].chWidth = chWidth;
237                   \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isVht = \textcolor{keyword}{false};
238                   \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isSupported = \textcolor{keyword}{false};
239 
240                   \textcolor{comment}{// Check capabilities of the device}
241                   \textcolor{keywordflow}{if} (!(!\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ()->\hyperlink{classns3_1_1WifiRemoteStationManager_aa55f6cb04128c88710119c8289f1b17e}{GetShortGuardInterval} () && 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].\hyperlink{namespacestd}{sgi})                   
242                       && (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ()->\hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} () >= 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].chWidth)               
243                       && (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ()->GetMaxSupportedTxSpatialStreams () >= 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams))  
244                     \{
245                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isSupported = \textcolor{keyword}{true};
246 
247                       \textcolor{comment}{// Calculate tx time for all rates of the group}
248                       \hyperlink{namespacens3_abceecb3f813d2b4af697068f25085024}{WifiModeList} htMcsList = \hyperlink{classns3_1_1MinstrelHtWifiManager_a51b40cdb077737e007f1c767c11d1424}{GetHtDeviceMcsList} ();
249                       \textcolor{keywordflow}{for} (uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{namespacens3_a09e2444bef75884650d2d5a53b6cd489}{MAX\_HT\_GROUP\_RATES}; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
250                         \{
251                           uint32\_t deviceIndex = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} + (\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams - 
      1) * 8;
252                           WifiMode mode =  htMcsList[deviceIndex];
253                           \hyperlink{classns3_1_1MinstrelHtWifiManager_a4e42c7189837e6b28544c18327990ab9}{AddFirstMpduTxTime} (groupId, mode, 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_aebde711921cb34ee3bfbe9801e76ae2e}{CalculateFirstMpduTxDuration} (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} (), streams, sgi, chWidth, mode));
254                           \hyperlink{classns3_1_1MinstrelHtWifiManager_a3ce7d66218d851e645c2f4775e7b8a91}{AddMpduTxTime} (groupId, mode, 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a0e356a05e616986cb292a72901984d4f}{CalculateMpduTxDuration} (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} (), streams, sgi, chWidth, mode));
255                         \}
256                       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Initialized group "} << groupId << \textcolor{stringliteral}{": ("} << (uint16\_t)
      streams << \textcolor{stringliteral}{","} << (uint16\_t)sgi << \textcolor{stringliteral}{","} << (uint16\_t)chWidth << \textcolor{stringliteral}{")"});
257                     \}
258                 \}
259             \}
260         \}
261 
262       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1WifiRemoteStationManager_afae2836c7785854272d73bf33e58c95a}{HasVhtSupported} ())
263         \{
264           \textcolor{comment}{// Initialize all VHT groups}
265           \textcolor{keywordflow}{for} (uint16\_t chWidth = 20; chWidth <= \hyperlink{namespacens3_ad1feeeb53faa6f7afe727b75ee20c36d}{MAX\_VHT\_WIDTH}; chWidth *= 2)
266             \{
267               \textcolor{keywordflow}{for} (uint8\_t sgi = 0; sgi <= 1; sgi++)
268                 \{
269                   \textcolor{keywordflow}{for} (uint8\_t streams = 1; streams <= \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS}; streams+
      +)
270                     \{
271                       uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae8425dbd449d4402c61941ae78ed8fb9}{GetVhtGroupId} (streams, sgi, chWidth);
272 
273                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams = streams;
274                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].sgi = sgi;
275                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].chWidth = chWidth;
276                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isVht = \textcolor{keyword}{true};
277                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isSupported = \textcolor{keyword}{false};
278 
279                       \textcolor{comment}{// Check capabilities of the device}
280                       \textcolor{keywordflow}{if} (!(!\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ()->\hyperlink{classns3_1_1WifiRemoteStationManager_aa55f6cb04128c88710119c8289f1b17e}{GetShortGuardInterval} () && 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].sgi)                   
281                           && (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ()->\hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} () >= 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].chWidth)               
282                           && (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ()->GetMaxSupportedTxSpatialStreams () >= 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams))  
283                         \{
284                           \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isSupported = \textcolor{keyword}{true};
285 
286                           \textcolor{comment}{// Calculate tx time for all rates of the group}
287                           \hyperlink{namespacens3_abceecb3f813d2b4af697068f25085024}{WifiModeList} vhtMcsList = 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_aa3f58bf72c4fe7dd962ce0e99ba211a7}{GetVhtDeviceMcsList} ();
288                           \textcolor{keywordflow}{for} (uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{namespacens3_a55aceb8d2eb4d90f4501847187fbe2a6}{MAX\_VHT\_GROUP\_RATES}; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
289                             \{
290                               WifiMode mode = vhtMcsList[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
291                               \textcolor{comment}{// Check for invalid VHT MCSs and do not add time to array.}
292                               \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MinstrelHtWifiManager_a6e96fca0f8a7295e41cdbeea9d7dae32}{IsValidMcs} (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} (), streams, chWidth, mode))
293                                 \{
294                                   \hyperlink{classns3_1_1MinstrelHtWifiManager_a4e42c7189837e6b28544c18327990ab9}{AddFirstMpduTxTime} (groupId, mode, 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_aebde711921cb34ee3bfbe9801e76ae2e}{CalculateFirstMpduTxDuration} (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} (), streams, sgi, chWidth, mode));
295                                   \hyperlink{classns3_1_1MinstrelHtWifiManager_a3ce7d66218d851e645c2f4775e7b8a91}{AddMpduTxTime} (groupId, mode, 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a0e356a05e616986cb292a72901984d4f}{CalculateMpduTxDuration} (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} (), streams, sgi, chWidth, mode));
296                                 \}
297                             \}
298                           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Initialized group "} << groupId << \textcolor{stringliteral}{": ("} << (uint16\_t)
      streams << \textcolor{stringliteral}{","} << (uint16\_t)sgi << \textcolor{stringliteral}{","} << (uint16\_t)chWidth << \textcolor{stringliteral}{")"});
299                         \}
300                     \}
301                 \}
302             \}
303         \}
304     \}
305 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 24


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Need\+Data\+Retransmission@{Do\+Need\+Data\+Retransmission}}
\index{Do\+Need\+Data\+Retransmission@{Do\+Need\+Data\+Retransmission}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Need\+Data\+Retransmission(\+Wifi\+Remote\+Station $\ast$st, Ptr$<$ const Packet $>$ packet, bool normally)}{DoNeedDataRetransmission(WifiRemoteStation *st, Ptr< const Packet > packet, bool normally)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Need\+Data\+Retransmission (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet, }
\item[{bool}]{normally}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_adb495f5af6c0f3d22396a0c05869d33f}{}\label{classns3_1_1MinstrelHtWifiManager_adb495f5af6c0f3d22396a0c05869d33f}

\begin{DoxyParams}{Parameters}
{\em station} & the station that we need to communicate \\
\hline
{\em packet} & the packet to send \\
\hline
{\em normally} & indicates whether the normal 802.\+11 data retransmission mechanism would request that the data is retransmitted or not. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if we want to resend a packet after a failed transmission attempt, false otherwise.
\end{DoxyReturn}
Note\+: This method is called after a unicast packet transmission has been attempted and has failed. 

Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_aaee2475c272acbdf7a1b2432fca4a5e4}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
1017 \{
1018   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st << packet << normally);
1019 
1020   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *)st;
1021 
1022   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
1023   \textcolor{keywordflow}{if} (!station->m\_initialized)
1024     \{
1025       \textcolor{keywordflow}{return} normally;
1026     \}
1027 
1028   uint32\_t maxRetries;
1029 
1030   \textcolor{keywordflow}{if} (!station->m\_isHt)
1031     \{
1032       maxRetries = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->CountRetries (station);
1033     \}
1034   \textcolor{keywordflow}{else}
1035     \{
1036       maxRetries = \hyperlink{classns3_1_1MinstrelHtWifiManager_a049c7b034d4647393f6949467fbcb628}{CountRetries} (station);
1037     \}
1038 
1039   \textcolor{keywordflow}{if} (station->m\_longRetry >= maxRetries)
1040     \{
1041       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"No re-transmission allowed. Retries: "} <<  station->m\_longRetry << \textcolor{stringliteral}{" Max
       retries: "} << maxRetries);
1042       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1043     \}
1044   \textcolor{keywordflow}{else}
1045     \{
1046       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Re-transmit. Retries: "} <<  station->m\_longRetry << \textcolor{stringliteral}{" Max retries: "} << 
      maxRetries);
1047       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1048     \}
1049 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 25


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Ampdu\+Tx\+Status@{Do\+Report\+Ampdu\+Tx\+Status}}
\index{Do\+Report\+Ampdu\+Tx\+Status@{Do\+Report\+Ampdu\+Tx\+Status}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Ampdu\+Tx\+Status(\+Wifi\+Remote\+Station $\ast$station, uint8\+\_\+t n\+Successful\+Mpdus, uint8\+\_\+t n\+Failed\+Mpdus, double rx\+Snr, double data\+Snr)}{DoReportAmpduTxStatus(WifiRemoteStation *station, uint8_t nSuccessfulMpdus, uint8_t nFailedMpdus, double rxSnr, double dataSnr)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Ampdu\+Tx\+Status (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint8\+\_\+t}]{n\+Successful\+Mpdus, }
\item[{uint8\+\_\+t}]{n\+Failed\+Mpdus, }
\item[{double}]{rx\+Snr, }
\item[{double}]{data\+Snr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a2a1c915cc3def7e9bff5da0123a16040}{}\label{classns3_1_1MinstrelHtWifiManager_a2a1c915cc3def7e9bff5da0123a16040}
Typically called per A-\/\+M\+P\+DU, either when a Block A\+CK was successfully received or when a Block\+Ack\+Timeout has elapsed. This method is a virtual method that must be implemented by the sub-\/class intended to handle A-\/\+M\+P\+D\+Us. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently.


\begin{DoxyParams}{Parameters}
{\em station} & the station that sent the D\+A\+TA to us \\
\hline
{\em n\+Successful\+Mpdus} & number of successfully transmitted M\+P\+D\+Us. A value of 0 means that the Block A\+CK was missed. \\
\hline
{\em n\+Failed\+Mpdus} & number of unsuccessfully transmitted M\+P\+D\+Us. \\
\hline
{\em rx\+Snr} & received S\+NR of the block ack frame itself \\
\hline
{\em data\+Snr} & data S\+NR reported by remote station \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a25709c3fb16dbf9c07170a952d33415f}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
692 \{
693   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st << (uint16\_t)nSuccessfulMpdus << (uint16\_t)nFailedMpdus << 
      rxSnr << dataSnr);
694   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *) st;
695 
696   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
697   \textcolor{keywordflow}{if} (!station->m\_initialized)
698     \{
699       \textcolor{keywordflow}{return};
700     \}
701 
702   \textcolor{keywordflow}{if} (!station->m\_isHt)
703     \{
704       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\textcolor{keyword}{false},\textcolor{stringliteral}{"A-MPDU Tx Status called but no HT or VHT supported."});
705     \}
706 
707   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportAmpduTxStatus. TxRate="} << station->m\_txrate << \textcolor{stringliteral}{" SuccMpdus= "} <<
708                 (uint16\_t)nSuccessfulMpdus << \textcolor{stringliteral}{" FailedMpdus= "} << (uint16\_t)nFailedMpdus);
709 
710   station->m\_ampduPacketCount++;
711   station->m\_ampduLen += nSuccessfulMpdus + nFailedMpdus;
712 
713   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7a73ce35e212586453fb9405c55654a5}{UpdatePacketCounters} (station, nSuccessfulMpdus, nFailedMpdus);
714 
715   uint32\_t rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_txrate);
716   uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_txrate);
717   station->m\_groupsTable[groupId].m\_ratesTable[rateId].numRateSuccess += nSuccessfulMpdus;
718   station->m\_groupsTable[groupId].m\_ratesTable[rateId].numRateAttempt += nSuccessfulMpdus + nFailedMpdus;
719 
720   \textcolor{keywordflow}{if} (nSuccessfulMpdus == 0 && station->m\_longRetry < \hyperlink{classns3_1_1MinstrelHtWifiManager_a049c7b034d4647393f6949467fbcb628}{CountRetries} (station))
721     \{
722       \textcolor{comment}{// We do not receive a BlockAck. The entire AMPDU fail.}
723       \hyperlink{classns3_1_1MinstrelHtWifiManager_abb282b56803faf26139d0db929b09b22}{UpdateRate} (station);
724     \}
725   \textcolor{keywordflow}{else}
726     \{
727       station->m\_isSampling = \textcolor{keyword}{false};
728       station->m\_sampleDeferred = \textcolor{keyword}{false};
729 
730       \hyperlink{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{UpdateRetry} (station);
731       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () >=  station->m\_nextStatsUpdate)
732         \{
733           \hyperlink{classns3_1_1MinstrelHtWifiManager_add9ba12485354ddfaae5a68a90469a92}{UpdateStats} (station);
734         \}
735 
736       \textcolor{keywordflow}{if} (station->m\_nModes >= 1)
737         \{
738           station->m\_txrate = \hyperlink{classns3_1_1MinstrelHtWifiManager_a06c5d6ae62e898a226ffd6cb0b448038}{FindRate} (station);
739         \}
740       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Next rate to use TxRate = "} << station->m\_txrate);
741     \}
742 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 26


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Data\+Failed@{Do\+Report\+Data\+Failed}}
\index{Do\+Report\+Data\+Failed@{Do\+Report\+Data\+Failed}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Data\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportDataFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Data\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_aa586c8a920a75e94428f44b560aefc7e}{}\label{classns3_1_1MinstrelHtWifiManager_aa586c8a920a75e94428f44b560aefc7e}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send D\+A\+TA \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a38a4401b6232cb547f5a85337e02b12c}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
559 \{
560   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
561 
562   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *)st;
563 
564   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
565   \textcolor{keywordflow}{if} (!station->m\_initialized)
566     \{
567       \textcolor{keywordflow}{return};
568     \}
569 
570   \textcolor{keywordflow}{if} (!station->m\_isHt)
571     \{
572       \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->UpdateRate (station);
573     \}
574   \textcolor{keywordflow}{else}
575     \{
576       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportDataFailed "} << station << \textcolor{stringliteral}{"\(\backslash\)t rate "} << station->m\_txrate << \textcolor{stringliteral}{"\(\backslash\)t
      longRetry \(\backslash\)t"} << station->m\_longRetry);
577 
578       uint32\_t rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_txrate);
579       uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_txrate);
580       station->m\_groupsTable[groupId].m\_ratesTable[rateId].numRateAttempt++; \textcolor{comment}{// Increment the attempts
       counter for the rate used.}
581 
582       \hyperlink{classns3_1_1MinstrelHtWifiManager_abb282b56803faf26139d0db929b09b22}{UpdateRate} (station);
583     \}
584 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Data\+Ok@{Do\+Report\+Data\+Ok}}
\index{Do\+Report\+Data\+Ok@{Do\+Report\+Data\+Ok}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Data\+Ok(\+Wifi\+Remote\+Station $\ast$station, double ack\+Snr, Wifi\+Mode ack\+Mode, double data\+Snr)}{DoReportDataOk(WifiRemoteStation *station, double ackSnr, WifiMode ackMode, double dataSnr)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Data\+Ok (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{double}]{ack\+Snr, }
\item[{{\bf Wifi\+Mode}}]{ack\+Mode, }
\item[{double}]{data\+Snr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a62ad32df22d4a75101d001e6e6635559}{}\label{classns3_1_1MinstrelHtWifiManager_a62ad32df22d4a75101d001e6e6635559}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we successfully sent R\+TS \\
\hline
{\em ack\+Snr} & the S\+NR of the A\+CK we received \\
\hline
{\em ack\+Mode} & the \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} the receiver used to send the A\+CK \\
\hline
{\em data\+Snr} & the S\+NR of the D\+A\+TA we sent \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a9328ead6b0b4ad50fbd589b286a84c21}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
589 \{
590   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st << ackSnr << ackMode << dataSnr);
591   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *) st;
592 
593   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
594   \textcolor{keywordflow}{if} (!station->m\_initialized)
595     \{
596       \textcolor{keywordflow}{return};
597     \}
598 
599   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Data OK - Txrate = "} << station->m\_txrate  );
600 
601   \textcolor{keywordflow}{if} (!station->m\_isHt)
602     \{
603       station->m\_minstrelTable[station->m\_txrate].numRateSuccess++;
604       station->m\_minstrelTable[station->m\_txrate].numRateAttempt++;
605 
606       \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->UpdatePacketCounters (station);
607 
608       \hyperlink{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{UpdateRetry} (station);
609       \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->UpdateStats (station);
610 
611       \textcolor{keywordflow}{if} (station->m\_nModes >= 1)
612         \{
613           station->m\_txrate = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->FindRate (station);
614         \}
615     \}
616   \textcolor{keywordflow}{else}
617     \{
618       uint32\_t rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_txrate);
619       uint32\_t groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_txrate);
620       station->m\_groupsTable[groupId].m\_ratesTable[rateId].numRateSuccess++;
621       station->m\_groupsTable[groupId].m\_ratesTable[rateId].numRateAttempt++;
622 
623       \hyperlink{classns3_1_1MinstrelHtWifiManager_a7a73ce35e212586453fb9405c55654a5}{UpdatePacketCounters} (station, 1, 0);
624 
625       station->m\_isSampling = \textcolor{keyword}{false};
626       station->m\_sampleDeferred = \textcolor{keyword}{false};
627 
628       \hyperlink{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{UpdateRetry} (station);
629       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () >=  station->m\_nextStatsUpdate)
630         \{
631           \hyperlink{classns3_1_1MinstrelHtWifiManager_add9ba12485354ddfaae5a68a90469a92}{UpdateStats} (station);
632         \}
633 
634       \textcolor{keywordflow}{if} (station->m\_nModes >= 1)
635         \{
636           station->m\_txrate = \hyperlink{classns3_1_1MinstrelHtWifiManager_a06c5d6ae62e898a226ffd6cb0b448038}{FindRate} (station);
637         \}
638     \}
639 
640   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Next rate to use TxRate = "} << station->m\_txrate  );
641 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 28


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Final\+Data\+Failed@{Do\+Report\+Final\+Data\+Failed}}
\index{Do\+Report\+Final\+Data\+Failed@{Do\+Report\+Final\+Data\+Failed}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Final\+Data\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportFinalDataFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Final\+Data\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a7f0e93d9dccdb7bbbe35ff9b6d117d53}{}\label{classns3_1_1MinstrelHtWifiManager_a7f0e93d9dccdb7bbbe35ff9b6d117d53}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send D\+A\+TA \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a32e2a7a9f651b5224b5c037c14598cf7}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
645 \{
646   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
647   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *) st;
648 
649   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
650   \textcolor{keywordflow}{if} (!station->m\_initialized)
651     \{
652       \textcolor{keywordflow}{return};
653     \}
654 
655   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportFinalDataFailed - TxRate="} << station->m\_txrate);
656 
657   \textcolor{keywordflow}{if} (!station->m\_isHt)
658     \{
659       \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->UpdatePacketCounters (station);
660 
661       \hyperlink{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{UpdateRetry} (station);
662 
663       \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->UpdateStats (station);
664       \textcolor{keywordflow}{if} (station->m\_nModes >= 1)
665         \{
666           station->m\_txrate = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->FindRate (station);
667         \}
668     \}
669   \textcolor{keywordflow}{else}
670     \{
671       \hyperlink{classns3_1_1MinstrelHtWifiManager_a7a73ce35e212586453fb9405c55654a5}{UpdatePacketCounters} (station, 0, 1);
672 
673       station->m\_isSampling = \textcolor{keyword}{false};
674       station->m\_sampleDeferred = \textcolor{keyword}{false};
675 
676       \hyperlink{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{UpdateRetry} (station);
677       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () >=  station->m\_nextStatsUpdate)
678         \{
679           \hyperlink{classns3_1_1MinstrelHtWifiManager_add9ba12485354ddfaae5a68a90469a92}{UpdateStats} (station);
680         \}
681 
682       \textcolor{keywordflow}{if} (station->m\_nModes >= 1)
683         \{
684           station->m\_txrate = \hyperlink{classns3_1_1MinstrelHtWifiManager_a06c5d6ae62e898a226ffd6cb0b448038}{FindRate} (station);
685         \}
686     \}
687   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Next rate to use TxRate = "} << station->m\_txrate  );
688 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 29


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Final\+Rts\+Failed@{Do\+Report\+Final\+Rts\+Failed}}
\index{Do\+Report\+Final\+Rts\+Failed@{Do\+Report\+Final\+Rts\+Failed}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Final\+Rts\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportFinalRtsFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Final\+Rts\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a9891afb45c6fd574a040dfef9d85014f}{}\label{classns3_1_1MinstrelHtWifiManager_a9891afb45c6fd574a040dfef9d85014f}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send R\+TS \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_aed2a605fb30d7fc31638eae3f8ee7403}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
542 \{
543   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
544 
545   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *)st;
546   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Final RTS failed"});
547 
548   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
549   \textcolor{keywordflow}{if} (!station->m\_initialized)
550     \{
551       \textcolor{keywordflow}{return};
552     \}
553 
554   \hyperlink{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{UpdateRetry} (station);
555 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 30


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Rts\+Failed@{Do\+Report\+Rts\+Failed}}
\index{Do\+Report\+Rts\+Failed@{Do\+Report\+Rts\+Failed}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Rts\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportRtsFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Rts\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a755d4934c2a8ea5392c23aed6ae85851}{}\label{classns3_1_1MinstrelHtWifiManager_a755d4934c2a8ea5392c23aed6ae85851}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send R\+TS \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_ab825ef773e7d251f0e157624a49c7041}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
517 \{
518   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
519 
520   MinstrelHtWifiRemoteStation *station = (MinstrelHtWifiRemoteStation *)st;
521 
522   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
523   \textcolor{keywordflow}{if} (!station->m\_initialized)
524     \{
525       \textcolor{keywordflow}{return};
526     \}
527 
528   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportRtsFailed m\_txrate="} << station->m\_txrate);
529   station->m\_shortRetry++;
530 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 31


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Rts\+Ok@{Do\+Report\+Rts\+Ok}}
\index{Do\+Report\+Rts\+Ok@{Do\+Report\+Rts\+Ok}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Rts\+Ok(\+Wifi\+Remote\+Station $\ast$station, double cts\+Snr, Wifi\+Mode cts\+Mode, double rts\+Snr)}{DoReportRtsOk(WifiRemoteStation *station, double ctsSnr, WifiMode ctsMode, double rtsSnr)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Rts\+Ok (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{double}]{cts\+Snr, }
\item[{{\bf Wifi\+Mode}}]{cts\+Mode, }
\item[{double}]{rts\+Snr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_aa92399ed2e169367bbf8ca904a193f1e}{}\label{classns3_1_1MinstrelHtWifiManager_aa92399ed2e169367bbf8ca904a193f1e}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we successfully sent R\+TS \\
\hline
{\em cts\+Snr} & the S\+NR of the C\+TS we received \\
\hline
{\em cts\+Mode} & the \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} the receiver used to send the C\+TS \\
\hline
{\em rts\+Snr} & the S\+NR of the R\+TS we sent \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a33a010f86ce5e68ceda2a0abbf21b71e}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
534 \{
535   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
536 
537   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"self="} << st << \textcolor{stringliteral}{" rts ok"});
538 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Do\+Report\+Rx\+Ok@{Do\+Report\+Rx\+Ok}}
\index{Do\+Report\+Rx\+Ok@{Do\+Report\+Rx\+Ok}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Rx\+Ok(\+Wifi\+Remote\+Station $\ast$station, double rx\+Snr, Wifi\+Mode tx\+Mode)}{DoReportRxOk(WifiRemoteStation *station, double rxSnr, WifiMode txMode)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Do\+Report\+Rx\+Ok (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{double}]{rx\+Snr, }
\item[{{\bf Wifi\+Mode}}]{tx\+Mode}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_afd6cbe29d95df3398dccf513482e9b4e}{}\label{classns3_1_1MinstrelHtWifiManager_afd6cbe29d95df3398dccf513482e9b4e}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that sent the D\+A\+TA to us \\
\hline
{\em rx\+Snr} & the S\+NR of the D\+A\+TA we received \\
\hline
{\em tx\+Mode} & the \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} the sender used to send the D\+A\+TA \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_ade990f17f78d8fc32c736b91a2557b25}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
509 \{
510   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
511 
512   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportRxOk m\_txrate="} << ((MinstrelHtWifiRemoteStation *)st)->m\_txrate);
513 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Find\+Rate@{Find\+Rate}}
\index{Find\+Rate@{Find\+Rate}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Find\+Rate(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{FindRate(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Find\+Rate (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a06c5d6ae62e898a226ffd6cb0b448038}{}\label{classns3_1_1MinstrelHtWifiManager_a06c5d6ae62e898a226ffd6cb0b448038}
Find a rate to use from Minstrel Table.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the rate 
\end{DoxyReturn}
Now go through the table and find an index rate.

Sampling might add some overhead to the frame. Hence, don\textquotesingle{}t use sampling for the currently used rates.

Also do not sample if the probability is already higher than 95\% to avoid wasting airtime.

Make sure that lower rates get sampled only occasionally, if the link is working perfectly.

Set flag that we are currently sampling.

set the rate that we\textquotesingle{}re currently sampling

Set flag that we are currently sampling.

set the rate that we\textquotesingle{}re currently sampling

Continue using the best rate. 
\begin{DoxyCode}
1134 \{
1135   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1136   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"FindRate "} << \textcolor{stringliteral}{"packet="} << station->m\_totalPacketsCount );
1137 
1138   \textcolor{keywordflow}{if} ((station->m\_samplePacketsCount + station->m\_totalPacketsCount) == 0)
1139     \{
1140       \textcolor{keywordflow}{return} station->m\_maxTpRate;
1141     \}
1142 
1143   \textcolor{comment}{// If we have waited enough, then sample.}
1144   \textcolor{keywordflow}{if} (station->m\_sampleWait == 0 && station->m\_sampleTries != 0)
1145     \{
1146       \textcolor{comment}{//SAMPLING}
1147       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Obtaining a sampling rate"});
1149       uint32\_t sampleIdx = \hyperlink{classns3_1_1MinstrelHtWifiManager_a953e20a35850da21283123c92db93597}{GetNextSample} (station);
1150       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Sampling rate = "} << sampleIdx);
1151 
1152       \textcolor{comment}{//Evaluate if the sampling rate selected should be used.}
1153       uint32\_t sampleGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (sampleIdx);
1154       uint32\_t sampleRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (sampleIdx);
1155 
1156       \textcolor{comment}{// If the rate selected is not supported, then don't sample.}
1157       \textcolor{keywordflow}{if} (station->m\_groupsTable[sampleGroupId].m\_supported && station->m\_groupsTable[sampleGroupId].
      m\_ratesTable[sampleRateId].supported)
1158         \{
1166           HtRateInfo sampleRateInfo = station->m\_groupsTable[sampleGroupId].m\_ratesTable[sampleRateId];
1167 
1168           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Use sample rate? MaxTpRate= "} << station->m\_maxTpRate << \textcolor{stringliteral}{"
       CurrentRate= "} << station->m\_txrate <<
1169                         \textcolor{stringliteral}{" SampleRate= "} << sampleIdx << \textcolor{stringliteral}{" SampleProb= "} << sampleRateInfo.ewmaProb);
1170 
1171           \textcolor{keywordflow}{if} (sampleIdx != station->m\_maxTpRate && sampleIdx != station->m\_maxTpRate2
1172               && sampleIdx != station->m\_maxProbRate && sampleRateInfo.ewmaProb <= 95)
1173             \{
1174 
1180               uint32\_t maxTpGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate);
1181               uint32\_t maxTp2GroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate2);
1182               uint32\_t maxTp2RateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxTpRate2);
1183               uint32\_t maxProbGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxProbRate);
1184               uint32\_t maxProbRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxProbRate);
1185 
1186               uint8\_t maxTpStreams = \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[maxTpGroupId].streams;
1187               uint8\_t sampleStreams = \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[sampleGroupId].streams;
1188 
1189               \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} sampleDuration = sampleRateInfo.perfectTxTime;
1190               \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} maxTp2Duration = station->m\_groupsTable[maxTp2GroupId].m\_ratesTable[maxTp2RateId].
      perfectTxTime;
1191               \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} maxProbDuration = station->m\_groupsTable[maxProbGroupId].m\_ratesTable[maxProbRateId]
      .perfectTxTime;
1192 
1193               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Use sample rate? SampleDuration= "} << sampleDuration << \textcolor{stringliteral}{"
       maxTp2Duration= "} << maxTp2Duration <<
1194                             \textcolor{stringliteral}{" maxProbDuration= "} << maxProbDuration << \textcolor{stringliteral}{" sampleStreams= "} << (uint16\_t)
      sampleStreams <<
1195                             \textcolor{stringliteral}{" maxTpStreams= "} << (uint16\_t)maxTpStreams);
1196               \textcolor{keywordflow}{if} (sampleDuration < maxTp2Duration || (sampleStreams < maxTpStreams && sampleDuration < 
      maxProbDuration))
1197                 \{
1199                   station->m\_isSampling = \textcolor{keyword}{true};
1200 
1202                   station->m\_sampleRate = sampleIdx;
1203 
1204                   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"FindRate "} << \textcolor{stringliteral}{"sampleRate="} << sampleIdx);
1205                   station->m\_sampleTries--;
1206                   \textcolor{keywordflow}{return} sampleIdx;
1207                 \}
1208               \textcolor{keywordflow}{else}
1209                 \{
1210                   station->m\_numSamplesSlow++;
1211                   \textcolor{keywordflow}{if} (sampleRateInfo.numSamplesSkipped >= 20 && station->m\_numSamplesSlow <= 2)
1212                     \{
1214                       station->m\_isSampling = \textcolor{keyword}{true};
1215 
1217                       station->m\_sampleRate = sampleIdx;
1218 
1219                       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"FindRate "} << \textcolor{stringliteral}{"sampleRate="} << sampleIdx);
1220                       station->m\_sampleTries--;
1221                       \textcolor{keywordflow}{return} sampleIdx;
1222                     \}
1223                 \}
1224             \}
1225         \}
1226     \}
1227   \textcolor{keywordflow}{if} (station->m\_sampleWait > 0)
1228     \{
1229       station->m\_sampleWait--;
1230     \}
1231 
1233 
1234   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"FindRate "} << \textcolor{stringliteral}{"maxTpRrate="} << station->m\_maxTpRate);
1235   \textcolor{keywordflow}{return} station->m\_maxTpRate;
1236 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 32




Here is the caller graph for this function\+:
% FIG 33


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+First\+Mpdu\+Tx\+Time@{Get\+First\+Mpdu\+Tx\+Time}}
\index{Get\+First\+Mpdu\+Tx\+Time@{Get\+First\+Mpdu\+Tx\+Time}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+First\+Mpdu\+Tx\+Time(uint32\+\_\+t group\+Id, Wifi\+Mode mode) const }{GetFirstMpduTxTime(uint32_t groupId, WifiMode mode) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+First\+Mpdu\+Tx\+Time (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{group\+Id, }
\item[{{\bf Wifi\+Mode}}]{mode}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a53308ad39a550d0972aad572b3566ec5}{}\label{classns3_1_1MinstrelHtWifiManager_a53308ad39a550d0972aad572b3566ec5}


Obtain the T\+Xtime saved in the group information. 


\begin{DoxyCode}
361 \{
362   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << groupId << mode);
363 
364   \textcolor{keywordflow}{for} (TxTime::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].ratesFirstMpduTxTimeTable.
      begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].ratesFirstMpduTxTimeTable.end (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
365     \{
366       \textcolor{keywordflow}{if} (mode == \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second)
367         \{
368           \textcolor{keywordflow}{return} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first;
369         \}
370     \}
371   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\textcolor{keyword}{false});
372   \textcolor{keywordflow}{return} \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0);
373 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 34




Here is the caller graph for this function\+:
% FIG 35


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Group\+Id@{Get\+Group\+Id}}
\index{Get\+Group\+Id@{Get\+Group\+Id}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Group\+Id(uint32\+\_\+t index)}{GetGroupId(uint32_t index)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Group\+Id (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{}\label{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}
Return the group\+Id from the global index.


\begin{DoxyParams}{Parameters}
{\em index} & the index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the group ID 
\end{DoxyReturn}

\begin{DoxyCode}
1822 \{
1823   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << index);
1824 
1825   \textcolor{keywordflow}{return} index / \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates};
1826 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 36


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Ht\+Device\+Mcs\+List@{Get\+Ht\+Device\+Mcs\+List}}
\index{Get\+Ht\+Device\+Mcs\+List@{Get\+Ht\+Device\+Mcs\+List}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Ht\+Device\+Mcs\+List(void) const }{GetHtDeviceMcsList(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Mode\+List} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Ht\+Device\+Mcs\+List (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a51b40cdb077737e007f1c767c11d1424}{}\label{classns3_1_1MinstrelHtWifiManager_a51b40cdb077737e007f1c767c11d1424}


Returns a list of only the HT M\+CS supported by the device. 


\begin{DoxyCode}
1896 \{
1897   \hyperlink{namespacens3_abceecb3f813d2b4af697068f25085024}{WifiModeList} htMcsList;
1898   Ptr<WifiPhy> phy = \hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ();
1899   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < phy->GetNMcs (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1900     \{
1901       WifiMode mode = phy->GetMcs (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1902       \textcolor{keywordflow}{if} (mode.GetModulationClass () == \hyperlink{namespacens3_aa999e1221606a2b21b1eb33c2007c217a6ac45cac36cc4454649435d24ebf349c}{WIFI\_MOD\_CLASS\_HT})
1903         \{
1904           htMcsList.push\_back (mode);
1905         \}
1906     \}
1907   \textcolor{keywordflow}{return} htMcsList;
1908 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 37




Here is the caller graph for this function\+:
% FIG 38


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Ht\+Group\+Id@{Get\+Ht\+Group\+Id}}
\index{Get\+Ht\+Group\+Id@{Get\+Ht\+Group\+Id}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Ht\+Group\+Id(uint8\+\_\+t txstreams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width)}{GetHtGroupId(uint8_t txstreams, uint8_t sgi, uint8_t chWidth)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Ht\+Group\+Id (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{txstreams, }
\item[{uint8\+\_\+t}]{sgi, }
\item[{uint8\+\_\+t}]{ch\+Width}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a44b99858b15826da1b42f135041058e0}{}\label{classns3_1_1MinstrelHtWifiManager_a44b99858b15826da1b42f135041058e0}


Returns the group\+Id of a HT M\+CS with the given number of streams, if using sgi and the channel width used. 


\begin{DoxyCode}
1830 \{
1831   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << (uint16\_t)txstreams << (uint16\_t)\hyperlink{namespacestd}{sgi} << (uint16\_t)chWidth);
1832 
1833   \textcolor{keywordflow}{return} \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS} * 2 * (chWidth == 40 ? 1 : 0) + 
      \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS} * \hyperlink{namespacestd}{sgi} + txstreams - 1;
1834 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 39


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Index@{Get\+Index}}
\index{Get\+Index@{Get\+Index}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Index(uint32\+\_\+t group\+Id, uint32\+\_\+t rate\+Id)}{GetIndex(uint32_t groupId, uint32_t rateId)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Index (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{group\+Id, }
\item[{uint32\+\_\+t}]{rate\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{}\label{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}
Returns the global index corresponding to the group\+Id and rate\+Id.


\begin{DoxyParams}{Parameters}
{\em group\+Id} & the group ID \\
\hline
{\em rate\+Id} & the rate ID \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the index 
\end{DoxyReturn}

\begin{DoxyCode}
1803 \{
1804   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << groupId << rateId);
1805   uint32\_t index;
1806   index = groupId * \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates} + rateId;
1807   \textcolor{keywordflow}{return} index;
1808 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 40


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Lowest\+Index@{Get\+Lowest\+Index}}
\index{Get\+Lowest\+Index@{Get\+Lowest\+Index}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Lowest\+Index(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{GetLowestIndex(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Lowest\+Index (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{}\label{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}


Returns the lowest global index of the rates supported by the station. 


\begin{DoxyCode}
1846 \{
1847   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1848 
1849   uint32\_t groupId = 0;
1850   uint32\_t rateId = 0;
1851   \textcolor{keywordflow}{while} (groupId < m\_numGroups && !station->m\_groupsTable[groupId].m\_supported)
1852     \{
1853       groupId++;
1854     \}
1855   \textcolor{keywordflow}{while} (rateId < m\_numRates && !station->m\_groupsTable[groupId].m\_ratesTable[rateId].supported)
1856     \{
1857       rateId++;
1858     \}
1859   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (station->m\_groupsTable[groupId].m\_supported && station->m\_groupsTable[groupId].
      m\_ratesTable[rateId].supported);
1860   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{GetIndex} (groupId, rateId);
1861 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 41




Here is the caller graph for this function\+:
% FIG 42


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Lowest\+Index@{Get\+Lowest\+Index}}
\index{Get\+Lowest\+Index@{Get\+Lowest\+Index}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Lowest\+Index(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint32\+\_\+t group\+Id)}{GetLowestIndex(MinstrelHtWifiRemoteStation *station, uint32_t groupId)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Lowest\+Index (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint32\+\_\+t}]{group\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_afd34eac817675cfa9baa84a8ad4171f7}{}\label{classns3_1_1MinstrelHtWifiManager_afd34eac817675cfa9baa84a8ad4171f7}


Returns the lowest global index of the rates supported by in the group. 


\begin{DoxyCode}
1865 \{
1866   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1867 
1868   uint32\_t rateId = 0;
1869   \textcolor{keywordflow}{while} (rateId < m\_numRates && !station->m\_groupsTable[groupId].m\_ratesTable[rateId].supported)
1870     \{
1871       rateId++;
1872     \}
1873   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (station->m\_groupsTable[groupId].m\_supported && station->m\_groupsTable[groupId].
      m\_ratesTable[rateId].supported);
1874   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{GetIndex} (groupId, rateId);
1875 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 43


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Mpdu\+Tx\+Time@{Get\+Mpdu\+Tx\+Time}}
\index{Get\+Mpdu\+Tx\+Time@{Get\+Mpdu\+Tx\+Time}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Mpdu\+Tx\+Time(uint32\+\_\+t group\+Id, Wifi\+Mode mode) const }{GetMpduTxTime(uint32_t groupId, WifiMode mode) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Mpdu\+Tx\+Time (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{group\+Id, }
\item[{{\bf Wifi\+Mode}}]{mode}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a10e963727034a88092842510c5fc21bc}{}\label{classns3_1_1MinstrelHtWifiManager_a10e963727034a88092842510c5fc21bc}


Obtain the T\+Xtime saved in the group information. 


\begin{DoxyCode}
385 \{
386   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << groupId << mode);
387 
388   \textcolor{keywordflow}{for} (TxTime::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].ratesTxTimeTable.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].ratesTxTimeTable.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
389     \{
390       \textcolor{keywordflow}{if} (mode == \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second)
391         \{
392           \textcolor{keywordflow}{return} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first;
393         \}
394     \}
395   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\textcolor{keyword}{false});
396   \textcolor{keywordflow}{return} \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0);
397 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 44




Here is the caller graph for this function\+:
% FIG 45


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Next\+Sample@{Get\+Next\+Sample}}
\index{Get\+Next\+Sample@{Get\+Next\+Sample}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Next\+Sample(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{GetNextSample(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Next\+Sample (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a953e20a35850da21283123c92db93597}{}\label{classns3_1_1MinstrelHtWifiManager_a953e20a35850da21283123c92db93597}


Getting the next sample from Sample Table. 


\begin{DoxyCode}
1083 \{
1084   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1085 
1086   uint32\_t sampleGroup = station->m\_sampleGroup;
1087 
1088   uint32\_t index = station->m\_groupsTable[sampleGroup].m\_index;
1089   uint32\_t col = station->m\_groupsTable[sampleGroup].m\_col;
1090 
1091   uint32\_t sampleIndex = station->m\_sampleTable[index][col];
1092 
1093   uint32\_t rateIndex = \hyperlink{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{GetIndex} (sampleGroup, sampleIndex);
1094   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Next Sample is "} << rateIndex);
1095 
1096   \hyperlink{classns3_1_1MinstrelHtWifiManager_a2c3213dddeb9e0917073482f732127ed}{SetNextSample} (station); \textcolor{comment}{//Calculate the next sample rate.}
1097 
1098   \textcolor{keywordflow}{return} rateIndex;
1099 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 46




Here is the caller graph for this function\+:
% FIG 47


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Rate\+Id@{Get\+Rate\+Id}}
\index{Get\+Rate\+Id@{Get\+Rate\+Id}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Rate\+Id(uint32\+\_\+t index)}{GetRateId(uint32_t index)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Rate\+Id (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{}\label{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}


Return the rate\+Id inside a group, from the global index. 

For managing rates from different groups, a global index for all rates in all groups is used. The group order is fixed by BW -\/$>$ S\+GI -\/$>$ streams. Following functions convert from group\+Id and rate\+Id to global index and vice versa.


\begin{DoxyParams}{Parameters}
{\em index} & the index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the rate ID 
\end{DoxyReturn}

\begin{DoxyCode}
1812 \{
1813   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << index);
1814 
1815   uint32\_t id;
1816   \textcolor{keywordtype}{id} = index % \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates};
1817   \textcolor{keywordflow}{return} id;
1818 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 48


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_aed9efdbc830840f0a381aa16cbe51256}{}\label{classns3_1_1MinstrelHtWifiManager_aed9efdbc830840f0a381aa16cbe51256}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
95 \{
96   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::MinstrelHtWifiManager"})
97     .SetParent<\hyperlink{classns3_1_1WifiRemoteStationManager_a78524840f5900e1937e8e2d6df48954d}{WifiRemoteStationManager}> ()
98     .AddConstructor<MinstrelHtWifiManager> ()
99     .SetGroupName (\textcolor{stringliteral}{"Wifi"})
100     .AddAttribute (\textcolor{stringliteral}{"UpdateStatistics"},
101                    \textcolor{stringliteral}{"The interval between updating statistics table "},
102                    TimeValue (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (100)),
103                    MakeTimeAccessor (&\hyperlink{classns3_1_1MinstrelHtWifiManager_a5c7d923b77d5cd3a1d38810ed41f91f8}{MinstrelHtWifiManager::m\_updateStats}
      ),
104                    \hyperlink{group__time_ga7032965bd4afa578691d88c09e4481c1}{MakeTimeChecker} ())
105     .AddAttribute (\textcolor{stringliteral}{"LookAroundRate"},
106                    \textcolor{stringliteral}{"The percentage to try other rates (for legacy Minstrel)"},
107                    DoubleValue (10),
108                    MakeDoubleAccessor (&\hyperlink{classns3_1_1MinstrelHtWifiManager_a7db397626b2dff4bd62619aa7fec75af}{MinstrelHtWifiManager::m\_lookAroundRate}
      ),
109                    MakeDoubleChecker<double> (0, 100))
110     .AddAttribute (\textcolor{stringliteral}{"EWMA"},
111                    \textcolor{stringliteral}{"EWMA level"},
112                    DoubleValue (75),
113                    MakeDoubleAccessor (&\hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{MinstrelHtWifiManager::m\_ewmaLevel}
      ),
114                    MakeDoubleChecker<double> (0, 100))
115     .AddAttribute (\textcolor{stringliteral}{"SampleColumn"},
116                    \textcolor{stringliteral}{"The number of columns used for sampling"},
117                    UintegerValue (10),
118                    MakeUintegerAccessor (&\hyperlink{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}{MinstrelHtWifiManager::m\_nSampleCol}
      ),
119                    MakeUintegerChecker <uint32\_t> ())
120     .AddAttribute (\textcolor{stringliteral}{"PacketLength"},
121                    \textcolor{stringliteral}{"The packet length used for calculating mode TxTime"},
122                    UintegerValue (1200),
123                    MakeUintegerAccessor (&\hyperlink{classns3_1_1MinstrelHtWifiManager_a069e6a4b77dc080d720a4b076cd8d7c5}{MinstrelHtWifiManager::m\_frameLength}
      ),
124                    MakeUintegerChecker <uint32\_t> ())
125     .AddAttribute (\textcolor{stringliteral}{"UseVhtOnly"},
126                    \textcolor{stringliteral}{"Use only VHT MCSs (and not HT) when VHT is available"},
127                    BooleanValue (\textcolor{keyword}{true}),
128                    MakeBooleanAccessor (&\hyperlink{classns3_1_1MinstrelHtWifiManager_a6997df6e5760dd9891f2caea0a6e1937}{MinstrelHtWifiManager::m\_useVhtOnly}
      ),
129                    MakeBooleanChecker ())
130     .AddAttribute (\textcolor{stringliteral}{"PrintStats"},
131                    \textcolor{stringliteral}{"Control the printing of the statistics table"},
132                    BooleanValue (\textcolor{keyword}{false}),
133                    MakeBooleanAccessor (&\hyperlink{classns3_1_1MinstrelHtWifiManager_a0e2d19e84336ab6d788afd81a6ba9cdb}{MinstrelHtWifiManager::m\_printStats}
      ),
134                    MakeBooleanChecker ())
135     .AddTraceSource (\textcolor{stringliteral}{"RateChange"},
136                      \textcolor{stringliteral}{"The transmission rate has changed"},
137                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a40f1adcf50b778a96c87e16db15e950f}{MinstrelHtWifiManager::m\_rateChange}),
138                      \textcolor{stringliteral}{"ns3::MinstrelHtWifiManager::RateChangeTracedCallback"})
139   ;
140   \textcolor{keywordflow}{return} tid;
141 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 49


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Vht\+Device\+Mcs\+List@{Get\+Vht\+Device\+Mcs\+List}}
\index{Get\+Vht\+Device\+Mcs\+List@{Get\+Vht\+Device\+Mcs\+List}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Vht\+Device\+Mcs\+List(void) const }{GetVhtDeviceMcsList(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Mode\+List} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Vht\+Device\+Mcs\+List (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_aa3f58bf72c4fe7dd962ce0e99ba211a7}{}\label{classns3_1_1MinstrelHtWifiManager_aa3f58bf72c4fe7dd962ce0e99ba211a7}


Returns a list of only the V\+HT M\+CS supported by the device. 


\begin{DoxyCode}
1880 \{
1881   \hyperlink{namespacens3_abceecb3f813d2b4af697068f25085024}{WifiModeList} vhtMcsList;
1882   Ptr<WifiPhy> phy = \hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} ();
1883   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < phy->GetNMcs (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1884     \{
1885       WifiMode mode = phy->GetMcs (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1886       \textcolor{keywordflow}{if} (mode.GetModulationClass () == \hyperlink{namespacens3_aa999e1221606a2b21b1eb33c2007c217a9863e4342bf5c238c74dddfc4d96c67e}{WIFI\_MOD\_CLASS\_VHT})
1887         \{
1888           vhtMcsList.push\_back (mode);
1889         \}
1890     \}
1891   \textcolor{keywordflow}{return} vhtMcsList;
1892 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 50




Here is the caller graph for this function\+:
% FIG 51


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Get\+Vht\+Group\+Id@{Get\+Vht\+Group\+Id}}
\index{Get\+Vht\+Group\+Id@{Get\+Vht\+Group\+Id}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Vht\+Group\+Id(uint8\+\_\+t txstreams, uint8\+\_\+t sgi, uint8\+\_\+t ch\+Width)}{GetVhtGroupId(uint8_t txstreams, uint8_t sgi, uint8_t chWidth)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Get\+Vht\+Group\+Id (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{txstreams, }
\item[{uint8\+\_\+t}]{sgi, }
\item[{uint8\+\_\+t}]{ch\+Width}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ae8425dbd449d4402c61941ae78ed8fb9}{}\label{classns3_1_1MinstrelHtWifiManager_ae8425dbd449d4402c61941ae78ed8fb9}


Returns the group\+Id of a V\+HT M\+CS with the given number of streams, if using sgi and the channel width used. 


\begin{DoxyCode}
1838 \{
1839   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << (uint16\_t)txstreams << (uint16\_t)\hyperlink{namespacestd}{sgi} << (uint16\_t)chWidth);
1840 
1841   \textcolor{keywordflow}{return} \hyperlink{namespacens3_a90ea346dc88400cf34c4379808fd35ba}{MAX\_HT\_STREAM\_GROUPS} * \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS} + 
      \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS} * 2 * (chWidth == 160 ? 3 : chWidth == 80 ? 2 : chWidth == 40 ? 
      1 : 0) + \hyperlink{namespacens3_ae11d9ba4764a3d93a0e9a15c40c94db1}{MAX\_SUPPORTED\_STREAMS} * \hyperlink{namespacestd}{sgi} + txstreams - 1;
1842 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 52


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Init\+Sample\+Table@{Init\+Sample\+Table}}
\index{Init\+Sample\+Table@{Init\+Sample\+Table}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Init\+Sample\+Table(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{InitSampleTable(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Init\+Sample\+Table (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a073d213169fe62c797ceb92ad999dcb0}{}\label{classns3_1_1MinstrelHtWifiManager_a073d213169fe62c797ceb92ad999dcb0}
Initialize Sample Table.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
The next two lines basically tries to generate a random number between 0 and the number of available rates
\begin{DoxyCode}
1665 \{
1666   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"InitSampleTable="} << \textcolor{keyword}{this});
1667 
1668   station->m\_col = station->m\_index = 0;
1669 
1670   \textcolor{comment}{//for off-setting to make rates fall between 0 and nModes}
1671   uint32\_t numSampleRates = \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates};
1672 
1673   uint32\_t newIndex;
1674   \textcolor{keywordflow}{for} (uint32\_t col = 0; col < \hyperlink{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}{m\_nSampleCol}; col++)
1675     \{
1676       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numSampleRates; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++ )
1677         \{
1682           \textcolor{keywordtype}{int} uv = \hyperlink{classns3_1_1MinstrelHtWifiManager_ad2dbdd143ca703a4366ed562b6ece239}{m\_uniformRandomVariable}->\hyperlink{classns3_1_1RandomVariableStream_a66cd94e6305ce7f000f1a9ff0fcb9aef}{GetInteger} (0, numSampleRates)
      ;
1683           newIndex = (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} + uv) % numSampleRates;
1684 
1685           \textcolor{comment}{//this loop is used for filling in other uninitialized places}
1686           \textcolor{keywordflow}{while} (station->m\_sampleTable[newIndex][col] != 0)
1687             \{
1688               newIndex = (newIndex + 1) % \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates};
1689             \}
1690           station->m\_sampleTable[newIndex][col] = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
1691         \}
1692     \}
1693 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 53




Here is the caller graph for this function\+:
% FIG 54


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Is\+Low\+Latency@{Is\+Low\+Latency}}
\index{Is\+Low\+Latency@{Is\+Low\+Latency}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Is\+Low\+Latency(void) const }{IsLowLatency(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Is\+Low\+Latency (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a9dfa8dd0c37f8707df39e1bbc2df013b}{}\label{classns3_1_1MinstrelHtWifiManager_a9dfa8dd0c37f8707df39e1bbc2df013b}
\begin{DoxyReturn}{Returns}
whether this manager is a manager designed to work in low-\/latency environments.
\end{DoxyReturn}
Note\+: In this context, low vs high latency is defined in {\itshape I\+E\+EE 802.\+11 Rate Adaptation\+: A Practical Approach}, by M. Lacage, M.\+H. Manshaei, and T. Turletti. 

Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a3b5ae71dce8e994b493ddfdb1d2f57f6}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
1076 \{
1077   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1078   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1079 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Is\+Valid\+Mcs@{Is\+Valid\+Mcs}}
\index{Is\+Valid\+Mcs@{Is\+Valid\+Mcs}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Is\+Valid\+Mcs(\+Ptr$<$ Wifi\+Phy $>$ phy, uint8\+\_\+t streams, uint8\+\_\+t ch\+Width, Wifi\+Mode mode)}{IsValidMcs(Ptr< WifiPhy > phy, uint8_t streams, uint8_t chWidth, WifiMode mode)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Is\+Valid\+Mcs (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wifi\+Phy} $>$}]{phy, }
\item[{uint8\+\_\+t}]{streams, }
\item[{uint8\+\_\+t}]{ch\+Width, }
\item[{{\bf Wifi\+Mode}}]{mode}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a6e96fca0f8a7295e41cdbeea9d7dae32}{}\label{classns3_1_1MinstrelHtWifiManager_a6e96fca0f8a7295e41cdbeea9d7dae32}


Check the validity of a combination of number of streams, ch\+Width and mode. 


\begin{DoxyCode}
317 \{
318   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << phy << (uint16\_t)streams << (uint16\_t)chWidth << mode);
319 
320   WifiTxVector txvector;
321   txvector.SetNss (streams);
322   txvector.SetChannelWidth (chWidth);
323   txvector.SetMode (mode);
324   \textcolor{keywordflow}{return} phy->\hyperlink{classns3_1_1WifiPhy_a2df962f7fd9468b514ea16d5fbed97f6}{IsValidTxVector} (txvector);
325 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 55




Here is the caller graph for this function\+:
% FIG 56


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Print\+Sample\+Table@{Print\+Sample\+Table}}
\index{Print\+Sample\+Table@{Print\+Sample\+Table}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Print\+Sample\+Table(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{PrintSampleTable(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Print\+Sample\+Table (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ac4f7bc4281f141466bfe6b01151c41c0}{}\label{classns3_1_1MinstrelHtWifiManager_ac4f7bc4281f141466bfe6b01151c41c0}
Printing Sample Table.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Print\+Table@{Print\+Table}}
\index{Print\+Table@{Print\+Table}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Print\+Table(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{PrintTable(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Print\+Table (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a434fb6aadb02a74cc097ba54b7b02cb3}{}\label{classns3_1_1MinstrelHtWifiManager_a434fb6aadb02a74cc097ba54b7b02cb3}
Printing Minstrel Table.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1697 \{
1698   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1699   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"PrintTable="} << station);
1700 
1701   station->m\_statsFile << \textcolor{stringliteral}{"               best   \_\_\_\_\_\_\_\_\_\_\_\_rate\_\_\_\_\_\_\_\_\_\_    \_\_\_\_\_\_\_\_statistics\_\_\_\_\_\_\_\_  
        \_\_\_\_\_\_\_\_last\_\_\_\_\_\_\_    \_\_\_\_\_\_sum-of\_\_\_\_\_\_\_\_\(\backslash\)n"} <<
1702     \textcolor{stringliteral}{" mode guard #  rate  [name   idx airtime  max\_tp]  [avg(tp) avg(prob) sd(prob)]  [prob.|retry|suc|att]
        [#success | #attempts]\(\backslash\)n"};
1703   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1704     \{
1705       \hyperlink{classns3_1_1MinstrelHtWifiManager_a11ef14d90291b78f771eec0d1dad712f}{StatsDump} (station, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}, station->m\_statsFile);
1706     \}
1707 
1708   station->m\_statsFile << \textcolor{stringliteral}{"\(\backslash\)nTotal packet count::    ideal "} << \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (0, station->m\_totalPacketsCount - 
      station->m\_samplePacketsCount) <<
1709     \textcolor{stringliteral}{"              lookaround "} << station->m\_samplePacketsCount << \textcolor{stringliteral}{"\(\backslash\)n"};
1710   station->m\_statsFile << \textcolor{stringliteral}{"Average # of aggregated frames per A-MPDU: "} << station->m\_avgAmpduLen << \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n"}
      ;
1711 
1712   station->m\_statsFile.flush ();
1713 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 57




Here is the caller graph for this function\+:
% FIG 58


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Rate\+Init@{Rate\+Init}}
\index{Rate\+Init@{Rate\+Init}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Rate\+Init(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{RateInit(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Rate\+Init (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a3b59b889db624539c6d5af89fa5e9f74}{}\label{classns3_1_1MinstrelHtWifiManager_a3b59b889db624539c6d5af89fa5e9f74}
Initialize Minstrel Table.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
Initialize groups supported by the receiver.

Is V\+HT supported by the receiver?

If it is an HT M\+CS, check if V\+HT only is disabled

Is S\+GI supported by the receiver?

Is channel width supported by the receiver?

Are streams supported by the receiver?

Group supported.

Create the rate list for the group.

Use the Mcs\+Value as the index in the rate table. This way, M\+C\+Ss not supported are not initialized.

If it is a V\+HT M\+CS only add to a V\+HT group.

Check validity of the V\+HT M\+CS

If it is a HT M\+CS only add to a HT group.

Check if the HT M\+CS corresponds to groups number of streams.

Mapping between rate\+Id and operational\+Mcs\+Set

Select the initial sample index.

Calculate the initial high throughput rates.

Select the rate to use. 
\begin{DoxyCode}
1507 \{
1508   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1509   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RateInit="} << station);
1510 
1511   station->m\_groupsTable = \hyperlink{namespacens3_aceb821fdfc79d5a5aa23d14f85063f07}{McsGroupData} (\hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups});
1512 
1516   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Supported groups by station:"});
1517   \textcolor{keywordflow}{for} (uint32\_t groupId = 0; groupId < \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups}; groupId++)
1518     \{
1519       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isSupported)
1520         \{
1521           station->m\_groupsTable[groupId].m\_supported = \textcolor{keyword}{false};
1522           \textcolor{keywordflow}{if} (!(!\hyperlink{classns3_1_1WifiRemoteStationManager_aecf5ed3203b9b55cd831696a08daa5fe}{GetVhtSupported} (station) && \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].
      isVht)                    
1523               && (\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isVht || !
      \hyperlink{classns3_1_1WifiRemoteStationManager_aecf5ed3203b9b55cd831696a08daa5fe}{GetVhtSupported} (station) || !\hyperlink{classns3_1_1MinstrelHtWifiManager_a6997df6e5760dd9891f2caea0a6e1937}{m\_useVhtOnly}) 
1524               && !(!\hyperlink{classns3_1_1WifiRemoteStationManager_aa55f6cb04128c88710119c8289f1b17e}{GetShortGuardInterval} (station) && 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].\hyperlink{namespacestd}{sgi})             
1525               && (\hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} (station) >= \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].
      chWidth)                 
1526               && (\hyperlink{classns3_1_1WifiRemoteStationManager_a5b08585f67c512242a2f3a53eeedade3}{GetNumberOfSupportedStreams} (station) >= 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams))    
1527             \{
1528               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Group "} << groupId << \textcolor{stringliteral}{": ("} << (uint16\_t)
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams <<
1529                             \textcolor{stringliteral}{","} << (uint16\_t)\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].sgi << \textcolor{stringliteral}{","} << (
      uint16\_t)\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].chWidth << \textcolor{stringliteral}{")"});
1530 
1531               station->m\_groupsTable[groupId].m\_supported = \textcolor{keyword}{true};                                
1532               station->m\_groupsTable[groupId].m\_col = 0;
1533               station->m\_groupsTable[groupId].m\_index = 0;
1534 
1535               station->m\_groupsTable[groupId].m\_ratesTable = \hyperlink{namespacens3_a82a9f8aa0dbfba7f85c109bb124ff5b3}{HtMinstrelRate} (
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates});        
1536               \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1537                 \{
1538                   station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].supported = \textcolor{keyword}{false};
1539                 \}
1540 
1541               \textcolor{comment}{// Initialize all modes supported by the remote station that belong to the current group.}
1542               \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < station->m\_nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1543                 \{
1544                   WifiMode mode = \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1545 
1548                   uint32\_t rateId = mode.GetMcsValue ();
1549                   \textcolor{keywordflow}{if} (mode.GetModulationClass () == \hyperlink{namespacens3_aa999e1221606a2b21b1eb33c2007c217a6ac45cac36cc4454649435d24ebf349c}{WIFI\_MOD\_CLASS\_HT})
1550                     \{
1551                       rateId %= \hyperlink{namespacens3_a09e2444bef75884650d2d5a53b6cd489}{MAX\_HT\_GROUP\_RATES};
1552                     \}
1553 
1554                   \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isVht && mode.GetModulationClass () == 
      \hyperlink{namespacens3_aa999e1221606a2b21b1eb33c2007c217a9863e4342bf5c238c74dddfc4d96c67e}{WIFI\_MOD\_CLASS\_VHT}                       
1555                        && \hyperlink{classns3_1_1MinstrelHtWifiManager_a6e96fca0f8a7295e41cdbeea9d7dae32}{IsValidMcs} (\hyperlink{classns3_1_1WifiRemoteStationManager_ab92b49cf78e0b72a51f5d13a1f15e242}{GetPhy} (), 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams, \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].chWidth, mode)
      )   
1556                       || (!\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isVht &&  mode.GetModulationClass () =
      = \hyperlink{namespacens3_aa999e1221606a2b21b1eb33c2007c217a6ac45cac36cc4454649435d24ebf349c}{WIFI\_MOD\_CLASS\_HT}                  
1557                           && mode.GetMcsValue () < (\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams * 8) 
                                           
1558                           && mode.GetMcsValue () >= ((\hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].streams - 1
      ) * 8)))
1559                     \{
1560                       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Mode "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{": "} << mode << \textcolor{stringliteral}{" isVht: "} << 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId].isVht);
1561 
1562                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].supported = \textcolor{keyword}{true};
1563                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].mcsIndex = 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};         
1564                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].numRateAttempt = 0;
1565                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].numRateSuccess = 0;
1566                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].prob = 0;
1567                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].ewmaProb = 0;
1568                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].prevNumRateAttempt = 0;
1569                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].prevNumRateSuccess = 0;
1570                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].numSamplesSkipped = 0;
1571                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].successHist = 0;
1572                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].attemptHist = 0;
1573                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].throughput = 0;
1574                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].perfectTxTime = 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a53308ad39a550d0972aad572b3566ec5}{GetFirstMpduTxTime} (groupId, \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
1575                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].retryCount = 0;
1576                       station->m\_groupsTable[groupId].m\_ratesTable[rateId].adjustedRetryCount = 0;
1577                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}{CalculateRetransmits} (station, groupId, rateId);
1578                     \}
1579                 \}
1580             \}
1581         \}
1582     \}
1583   \hyperlink{classns3_1_1MinstrelHtWifiManager_a2c3213dddeb9e0917073482f732127ed}{SetNextSample} (station);                  
1584   \hyperlink{classns3_1_1MinstrelHtWifiManager_add9ba12485354ddfaae5a68a90469a92}{UpdateStats} (station);                    
1585   station->m\_txrate = \hyperlink{classns3_1_1MinstrelHtWifiManager_a06c5d6ae62e898a226ffd6cb0b448038}{FindRate} (station);   
1586 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 59




Here is the caller graph for this function\+:
% FIG 60


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Set\+Best\+Probability\+Rate@{Set\+Best\+Probability\+Rate}}
\index{Set\+Best\+Probability\+Rate@{Set\+Best\+Probability\+Rate}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Set\+Best\+Probability\+Rate(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint32\+\_\+t index)}{SetBestProbabilityRate(MinstrelHtWifiRemoteStation *station, uint32_t index)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Set\+Best\+Probability\+Rate (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint32\+\_\+t}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ac9995672834a1256d4203b6045f6b513}{}\label{classns3_1_1MinstrelHtWifiManager_ac9995672834a1256d4203b6045f6b513}
Set index rate as max\+Prob\+Rate if it is better than current value.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
{\em index} & the index \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1387 \{
1388   GroupInfo *\hyperlink{namespacevisualizer_1_1higcontainer_aa6ad2b76790275bfce7783429beaa23f}{group};
1389   HtRateInfo rate;
1390   uint32\_t tmpGroupId, tmpRateId;
1391   \textcolor{keywordtype}{double} tmpTh, tmpProb;
1392   uint32\_t groupId, rateId;
1393   \textcolor{keywordtype}{double} currentTh;
1394   \textcolor{comment}{// maximum group probability (GP) variables}
1395   uint32\_t maxGPGroupId, maxGPRateId;
1396   \textcolor{keywordtype}{double} maxGPTh;
1397 
1398   groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (index);
1399   rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (index);
1400   group = &station->m\_groupsTable[groupId];
1401   rate = group->m\_ratesTable[rateId];
1402 
1403   tmpGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxProbRate);
1404   tmpRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxProbRate);
1405   tmpProb = station->m\_groupsTable[tmpGroupId].m\_ratesTable[tmpRateId].ewmaProb;
1406   tmpTh =  station->m\_groupsTable[tmpGroupId].m\_ratesTable[tmpRateId].throughput;
1407 
1408   \textcolor{keywordflow}{if} (rate.ewmaProb > 75)
1409     \{
1410       currentTh = station->m\_groupsTable[groupId].m\_ratesTable[rateId].throughput;
1411       \textcolor{keywordflow}{if} (currentTh > tmpTh)
1412         \{
1413           station->m\_maxProbRate = index;
1414         \}
1415 
1416       maxGPGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (group->m\_maxProbRate);
1417       maxGPRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (group->m\_maxProbRate);
1418       maxGPTh = station->m\_groupsTable[maxGPGroupId].m\_ratesTable[maxGPRateId].throughput;
1419 
1420       \textcolor{keywordflow}{if} (currentTh > maxGPTh)
1421         \{
1422           group->m\_maxProbRate = index;
1423         \}
1424     \}
1425   \textcolor{keywordflow}{else}
1426     \{
1427       \textcolor{keywordflow}{if} (rate.ewmaProb > tmpProb)
1428         \{
1429           station->m\_maxProbRate = index;
1430         \}
1431       maxGPRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (group->m\_maxProbRate);
1432       \textcolor{keywordflow}{if} (rate.ewmaProb > group->m\_ratesTable[maxGPRateId].ewmaProb)
1433         \{
1434           group->m\_maxProbRate = index;
1435         \}
1436     \}
1437 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 61




Here is the caller graph for this function\+:
% FIG 62


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Set\+Best\+Station\+Th\+Rates@{Set\+Best\+Station\+Th\+Rates}}
\index{Set\+Best\+Station\+Th\+Rates@{Set\+Best\+Station\+Th\+Rates}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Set\+Best\+Station\+Th\+Rates(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint32\+\_\+t index)}{SetBestStationThRates(MinstrelHtWifiRemoteStation *station, uint32_t index)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Set\+Best\+Station\+Th\+Rates (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint32\+\_\+t}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a5c8fb23ad34518c1e1f2add75a3b7f4c}{}\label{classns3_1_1MinstrelHtWifiManager_a5c8fb23ad34518c1e1f2add75a3b7f4c}
Set index rate as max\+Tp\+Rate or max\+Tp2\+Rate if is better than current values.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
{\em index} & the index \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1448 \{
1449   uint32\_t groupId, rateId;
1450   \textcolor{keywordtype}{double} th, prob;
1451   uint32\_t maxTpGroupId, maxTpRateId;
1452   uint32\_t maxTp2GroupId, maxTp2RateId;
1453   \textcolor{keywordtype}{double} maxTpTh, maxTpProb;
1454   \textcolor{keywordtype}{double} maxTp2Th, maxTp2Prob;
1455 
1456   groupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (index);
1457   rateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (index);
1458   prob = station->m\_groupsTable[groupId].m\_ratesTable[rateId].ewmaProb;
1459   th = station->m\_groupsTable[groupId].m\_ratesTable[rateId].throughput;
1460 
1461   maxTpGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate);
1462   maxTpRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxTpRate);
1463   maxTpProb = station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTpRateId].ewmaProb;
1464   maxTpTh = station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTpRateId].throughput;
1465 
1466   maxTp2GroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate2);
1467   maxTp2RateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxTpRate2);
1468   maxTp2Prob = station->m\_groupsTable[maxTp2GroupId].m\_ratesTable[maxTp2RateId].ewmaProb;
1469   maxTp2Th = station->m\_groupsTable[maxTp2GroupId].m\_ratesTable[maxTp2RateId].throughput;
1470 
1471   \textcolor{keywordflow}{if} (th > maxTpTh || (th == maxTpTh && prob > maxTpProb))
1472     \{
1473       station->m\_maxTpRate2 = station->m\_maxTpRate;
1474       station->m\_maxTpRate = index;
1475     \}
1476   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (th > maxTp2Th || (th == maxTp2Th && prob > maxTp2Prob))
1477     \{
1478       station->m\_maxTpRate2 = index;
1479     \}
1480 
1481   \textcolor{comment}{//Find best rates per group}
1482 
1483   GroupInfo *\hyperlink{namespacevisualizer_1_1higcontainer_aa6ad2b76790275bfce7783429beaa23f}{group} = &station->m\_groupsTable[groupId];
1484   maxTpGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (group->m\_maxTpRate);
1485   maxTpRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (group->m\_maxTpRate);
1486   maxTpProb = group->m\_ratesTable[maxTpRateId].ewmaProb;
1487   maxTpTh = station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTpRateId].throughput;
1488 
1489   maxTp2GroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (group->m\_maxTpRate2);
1490   maxTp2RateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (group->m\_maxTpRate2);
1491   maxTp2Prob = group->m\_ratesTable[maxTp2RateId].ewmaProb;
1492   maxTp2Th = station->m\_groupsTable[maxTp2GroupId].m\_ratesTable[maxTp2RateId].throughput;
1493 
1494   \textcolor{keywordflow}{if} (th > maxTpTh || (th == maxTpTh && prob > maxTpProb))
1495     \{
1496       group->m\_maxTpRate2 = group->m\_maxTpRate;
1497       group->m\_maxTpRate = index;
1498     \}
1499   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (th > maxTp2Th || (th == maxTp2Th && prob > maxTp2Prob))
1500     \{
1501       group->m\_maxTpRate2 = index;
1502     \}
1503 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 63




Here is the caller graph for this function\+:
% FIG 64


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Set\+He\+Supported@{Set\+He\+Supported}}
\index{Set\+He\+Supported@{Set\+He\+Supported}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Set\+He\+Supported(bool enable)}{SetHeSupported(bool enable)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Set\+He\+Supported (
\begin{DoxyParamCaption}
\item[{bool}]{enable}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a948fb9923c8a0cb14d1102ab1cb57b87}{}\label{classns3_1_1MinstrelHtWifiManager_a948fb9923c8a0cb14d1102ab1cb57b87}
Enable or disable HE capability support.


\begin{DoxyParams}{Parameters}
{\em enable} & enable or disable HE capability support \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a18c218db519ceb78e910b6184a4e2992}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
1912 \{
1913   \textcolor{comment}{//HE is not supported yet by this algorithm.}
1914   \textcolor{keywordflow}{if} (enable)
1915     \{
1916       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"WifiRemoteStationManager selected does not support HE rates"});
1917     \}
1918 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Set\+Next\+Sample@{Set\+Next\+Sample}}
\index{Set\+Next\+Sample@{Set\+Next\+Sample}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Set\+Next\+Sample(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{SetNextSample(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Set\+Next\+Sample (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a2c3213dddeb9e0917073482f732127ed}{}\label{classns3_1_1MinstrelHtWifiManager_a2c3213dddeb9e0917073482f732127ed}


Set the next sample from Sample Table. 


\begin{DoxyCode}
1103 \{
1104   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1105   \textcolor{keywordflow}{do}
1106     \{
1107       station->m\_sampleGroup++;
1108       station->m\_sampleGroup %= \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups};
1109     \}
1110   \textcolor{keywordflow}{while} (!station->m\_groupsTable[station->m\_sampleGroup].m\_supported);
1111 
1112   station->m\_groupsTable[station->m\_sampleGroup].m\_index++;
1113 
1114   uint32\_t sampleGroup = station->m\_sampleGroup;
1115   uint8\_t index = station->m\_groupsTable[station->m\_sampleGroup].m\_index;
1116   uint8\_t col = station->m\_groupsTable[sampleGroup].m\_col;
1117 
1118   \textcolor{keywordflow}{if} (index >= \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates})
1119     \{
1120       station->m\_groupsTable[station->m\_sampleGroup].m\_index = 0;
1121       station->m\_groupsTable[station->m\_sampleGroup].m\_col++;
1122       \textcolor{keywordflow}{if} (station->m\_groupsTable[station->m\_sampleGroup].m\_col >= \hyperlink{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}{m\_nSampleCol})
1123         \{
1124           station->m\_groupsTable[station->m\_sampleGroup].m\_col = 0;
1125         \}
1126       index = station->m\_groupsTable[station->m\_sampleGroup].m\_index;
1127       col = station->m\_groupsTable[sampleGroup].m\_col;
1128     \}
1129   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"New sample set: group= "} << sampleGroup << \textcolor{stringliteral}{" index= "} << station->
      m\_sampleTable[index][col]);
1130 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 65


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Setup\+Mac@{Setup\+Mac}}
\index{Setup\+Mac@{Setup\+Mac}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Setup\+Mac(\+Ptr$<$ Wifi\+Mac $>$ mac)}{SetupMac(Ptr< WifiMac > mac)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Setup\+Mac (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wifi\+Mac} $>$}]{mac}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_abac95c9d370290c9afef68c1b70e8f15}{}\label{classns3_1_1MinstrelHtWifiManager_abac95c9d370290c9afef68c1b70e8f15}
Set up M\+AC associated with this device since it is the object that knows the full set of timing parameters (e.\+g. I\+FS).


\begin{DoxyParams}{Parameters}
{\em mac} & the M\+AC of this device \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a4e9a526ceb0023999870799817a06bb2}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
309 \{
310   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << mac);
311   \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetupMac (mac);
312   \hyperlink{classns3_1_1WifiRemoteStationManager_a4e9a526ceb0023999870799817a06bb2}{WifiRemoteStationManager::SetupMac} (mac);
313 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 66


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Setup\+Phy@{Setup\+Phy}}
\index{Setup\+Phy@{Setup\+Phy}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Setup\+Phy(\+Ptr$<$ Wifi\+Phy $>$ phy)}{SetupPhy(Ptr< WifiPhy > phy)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Setup\+Phy (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wifi\+Phy} $>$}]{phy}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a924e26c8c84e74234be8d978897f8ad3}{}\label{classns3_1_1MinstrelHtWifiManager_a924e26c8c84e74234be8d978897f8ad3}
Set up P\+HY associated with this device since it is the object that knows the full set of transmit rates that are supported.


\begin{DoxyParams}{Parameters}
{\em phy} & the P\+HY of this device \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a823deffface82c9fe1daa06ce11c585b}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
182 \{
183   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << phy);
184   \textcolor{comment}{// Setup phy for legacy manager.}
185   \hyperlink{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{m\_legacyManager}->SetupPhy (phy);
186   \hyperlink{classns3_1_1WifiRemoteStationManager_a823deffface82c9fe1daa06ce11c585b}{WifiRemoteStationManager::SetupPhy} (phy);
187 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 67


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Stats\+Dump@{Stats\+Dump}}
\index{Stats\+Dump@{Stats\+Dump}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Stats\+Dump(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint32\+\_\+t index, std\+::ofstream \&of)}{StatsDump(MinstrelHtWifiRemoteStation *station, uint32_t index, std::ofstream &of)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Stats\+Dump (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint32\+\_\+t}]{index, }
\item[{std\+::ofstream \&}]{of}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a11ef14d90291b78f771eec0d1dad712f}{}\label{classns3_1_1MinstrelHtWifiManager_a11ef14d90291b78f771eec0d1dad712f}
Print group statistics.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
{\em index} & the index \\
\hline
{\em of} & the output file stream \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1717 \{
1718   uint32\_t numRates = \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates};
1719   McsGroup \hyperlink{namespacevisualizer_1_1higcontainer_aa6ad2b76790275bfce7783429beaa23f}{group} = \hyperlink{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{m\_minstrelGroups}[groupId];
1720   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} txTime;
1721   \textcolor{keywordtype}{char} giMode;
1722   \textcolor{keywordflow}{if} (group.sgi)
1723     \{
1724       giMode = \textcolor{charliteral}{'S'};
1725     \}
1726   \textcolor{keywordflow}{else}
1727     \{
1728       giMode = \textcolor{charliteral}{'L'};
1729     \}
1730   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numRates; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1731     \{
1732       \textcolor{keywordflow}{if} (station->m\_groupsTable[groupId].m\_supported && station->m\_groupsTable[groupId].m\_ratesTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].supported)
1733         \{
1734           \textcolor{keywordflow}{if} (!group.isVht)
1735             \{
1736               of << \textcolor{stringliteral}{"HT"} << group.chWidth << \textcolor{stringliteral}{"   "} << giMode << \textcolor{stringliteral}{"GI  "} << (int)group.streams << \textcolor{stringliteral}{"   "};
1737             \}
1738           \textcolor{keywordflow}{else}
1739             \{
1740               of << \textcolor{stringliteral}{"VHT"} << group.chWidth << \textcolor{stringliteral}{"   "} << giMode << \textcolor{stringliteral}{"GI  "} << (int)group.streams << \textcolor{stringliteral}{"   "};
1741             \}
1742 
1743           uint32\_t maxTpRate = station->m\_maxTpRate;
1744           uint32\_t maxTpRate2 = station->m\_maxTpRate2;
1745           uint32\_t maxProbRate = station->m\_maxProbRate;
1746 
1747           uint32\_t idx = \hyperlink{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{GetIndex} (groupId, i);
1748           \textcolor{keywordflow}{if} (idx == maxTpRate)
1749             \{
1750               of << \textcolor{charliteral}{'A'};
1751             \}
1752           \textcolor{keywordflow}{else}
1753             \{
1754               of << \textcolor{charliteral}{' '};
1755             \}
1756           \textcolor{keywordflow}{if} (idx == maxTpRate2)
1757             \{
1758               of << \textcolor{charliteral}{'B'};
1759             \}
1760           \textcolor{keywordflow}{else}
1761             \{
1762               of << \textcolor{charliteral}{' '};
1763             \}
1764           \textcolor{keywordflow}{if} (idx == maxProbRate)
1765             \{
1766               of << \textcolor{charliteral}{'P'};
1767             \}
1768           \textcolor{keywordflow}{else}
1769             \{
1770               of << \textcolor{charliteral}{' '};
1771             \}
1772 
1773           \textcolor{keywordflow}{if} (!group.isVht)
1774             \{
1775               of << std::setw (4) << \textcolor{stringliteral}{"   MCS"} << (group.streams - 1) * 8 + i;
1776             \}
1777           \textcolor{keywordflow}{else}
1778             \{
1779               of << std::setw (7) << \textcolor{stringliteral}{"   MCS"} << i << \textcolor{stringliteral}{"/"} << (int) group.streams;
1780             \}
1781 
1782           of << \textcolor{stringliteral}{"  "} << std::setw (3) << idx << \textcolor{stringliteral}{"  "};
1783 
1784           \textcolor{comment}{/* tx\_time[rate(i)] in usec */}
1785           txTime = \hyperlink{classns3_1_1MinstrelHtWifiManager_a53308ad39a550d0972aad572b3566ec5}{GetFirstMpduTxTime} (groupId, 
      \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station, station->m\_groupsTable[groupId].m\_ratesTable[i].mcsIndex));
1786           of << std::setw (6) << txTime.GetMicroSeconds () << \textcolor{stringliteral}{"  "};
1787 
1788           of << std::setw (7) << \hyperlink{classns3_1_1MinstrelHtWifiManager_aedf901def4f23eac093a7da8f363170b}{CalculateThroughput} (station, groupId, i, 100) / 100 <<
       \textcolor{stringliteral}{"   "} <<
1789             std::setw (7) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput / 100 << \textcolor{stringliteral}{"   "} <<
1790             std::setw (7) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb << \textcolor{stringliteral}{"  "} <<
1791             std::setw (7) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmsdProb << \textcolor{stringliteral}{"  "} <<
1792             std::setw (7) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prob << \textcolor{stringliteral}{"  "} <<
1793             std::setw (2) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].retryCount << \textcolor{stringliteral}{"   "} <<
1794             std::setw (3) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateSuccess << \textcolor{stringliteral}{"  "} <<
1795             std::setw (3) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateAttempt << \textcolor{stringliteral}{"   "} <
      <
1796             std::setw (9) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].successHist << \textcolor{stringliteral}{"   "} <<
1797             std::setw (9) << station->m\_groupsTable[groupId].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].attemptHist << \textcolor{stringliteral}{"\(\backslash\)n"};
1798         \}
1799     \}
1800 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 68




Here is the caller graph for this function\+:
% FIG 69


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Update\+Packet\+Counters@{Update\+Packet\+Counters}}
\index{Update\+Packet\+Counters@{Update\+Packet\+Counters}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Packet\+Counters(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station, uint8\+\_\+t n\+Successful\+Mpdus, uint8\+\_\+t n\+Failed\+Mpdus)}{UpdatePacketCounters(MinstrelHtWifiRemoteStation *station, uint8_t nSuccessfulMpdus, uint8_t nFailedMpdus)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Update\+Packet\+Counters (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{uint8\+\_\+t}]{n\+Successful\+Mpdus, }
\item[{uint8\+\_\+t}]{n\+Failed\+Mpdus}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a7a73ce35e212586453fb9405c55654a5}{}\label{classns3_1_1MinstrelHtWifiManager_a7a73ce35e212586453fb9405c55654a5}


Update the number of sample count variables. 


\begin{DoxyCode}
856 \{
857   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station << (uint16\_t)nSuccessfulMpdus << (uint16\_t)nFailedMpdus);
858 
859   station->m\_totalPacketsCount += nSuccessfulMpdus + nFailedMpdus;
860   \textcolor{keywordflow}{if} (station->m\_isSampling)
861     \{
862       station->m\_samplePacketsCount += nSuccessfulMpdus + nFailedMpdus;
863     \}
864   \textcolor{keywordflow}{if} (station->m\_totalPacketsCount == ~0)
865     \{
866       station->m\_samplePacketsCount = 0;
867       station->m\_totalPacketsCount = 0;
868     \}
869 
870   \textcolor{keywordflow}{if} (!station->m\_sampleWait && !station->m\_sampleTries && station->m\_sampleCount > 0)
871     \{
872       station->m\_sampleWait = 16 + 2 * station->m\_avgAmpduLen;
873       station->m\_sampleTries = 1;
874       station->m\_sampleCount--;
875     \}
876 
877 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 70


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Update\+Rate@{Update\+Rate}}
\index{Update\+Rate@{Update\+Rate}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Rate(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{UpdateRate(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Update\+Rate (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_abb282b56803faf26139d0db929b09b22}{}\label{classns3_1_1MinstrelHtWifiManager_abb282b56803faf26139d0db929b09b22}
Update rate.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
Retry Chain table is implemented here.

F\+I\+X\+ME Currently, N\+S3 does not retransmit an entire A-\/\+M\+P\+DU when B\+A\+CK is missing but retransmits each M\+P\+DU until M\+P\+D\+Us lifetime expires (or a B\+A\+CK is received). Then, there is no way to control A-\/\+M\+P\+DU retries (no call to Need\+Data\+Retransmission). So, it is possible that the A-\/\+M\+P\+DU keeps retrying after long\+Retry reaches its limit.

\subsubsection*{Try $\vert$ L\+O\+O\+K\+A\+R\+O\+U\+ND R\+A\+TE $\vert$ N\+O\+R\+M\+AL R\+A\+TE }

1 $\vert$ Random rate $\vert$ Best throughput 2 $\vert$ Next best throughput $\vert$ Next best throughput 3 $\vert$ Best probability $\vert$ Best probability

Note\+: For clarity, multiple blocks of if\textquotesingle{}s and else\textquotesingle{}s are used Following implementation in Linux, in Minstrel\+HT Lowest baserate is not used. Explanation can be found here\+: \href{http://marc.info/?l=linux-wireless&m=144602778611966&w=2}{\tt http\+://marc.\+info/?l=linux-\/wireless\&m=144602778611966\&w=2}

Get the ids for all rates.

For normal rate, we\textquotesingle{}re not currently sampling random rates.

Use best throughput rate.

$<$ There are still a few retries.

Use second best throughput rate.

Use best probability rate.

We\textquotesingle{}re currently sampling random rates.

Sample rate is used only once Use the best rate.

Use the best probability rate. 
\begin{DoxyCode}
746 \{
747   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
748 
770   \hyperlink{classns3_1_1MinstrelHtWifiManager_a7f94804a34efa6121bdfd5d01ac34694}{CheckInit} (station);
771   \textcolor{keywordflow}{if} (!station->m\_initialized)
772     \{
773       \textcolor{keywordflow}{return};
774     \}
775   station->m\_longRetry++;
776 
780   uint32\_t maxTpRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxTpRate);
781   uint32\_t maxTpGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate);
782   uint32\_t maxTp2RateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxTpRate2);
783   uint32\_t maxTp2GroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxTpRate2);
784   uint32\_t maxProbRateId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a6162341f1348bbe713d09642b09ac658}{GetRateId} (station->m\_maxProbRate);
785   uint32\_t maxProbGroupId = \hyperlink{classns3_1_1MinstrelHtWifiManager_a43157e6007b4b922043cb02a99ea6d1f}{GetGroupId} (station->m\_maxProbRate);
786 
788   \textcolor{keywordflow}{if} (!station->m\_isSampling)
789     \{
791       \textcolor{keywordflow}{if} (station->m\_longRetry <  station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTpRateId].retryCount
      )
792         \{
793           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Not Sampling; use the same rate again"});
794           station->m\_txrate = station->m\_maxTpRate;  
795         \}
796 
798       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry < ( station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTpRateId].
      retryCount +
799                                         station->m\_groupsTable[maxTp2GroupId].m\_ratesTable[maxTp2RateId].
      retryCount))
800         \{
801           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Not Sampling; use the Max TP2"});
802           station->m\_txrate = station->m\_maxTpRate2;
803         \}
804 
806       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= ( station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTpRateId].
      retryCount +
807                                          station->m\_groupsTable[maxTp2GroupId].m\_ratesTable[maxTp2RateId].
      retryCount +
808                                          station->m\_groupsTable[maxProbGroupId].m\_ratesTable[maxProbRateId]
      .retryCount))
809         \{
810           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Not Sampling; use Max Prob"});
811           station->m\_txrate = station->m\_maxProbRate;
812         \}
813       \textcolor{keywordflow}{else}
814         \{
815           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\textcolor{keyword}{false},\textcolor{stringliteral}{"Max retries reached and m\_longRetry not cleared properly.
       longRetry= "} << station->m\_longRetry);
816         \}
817     \}
818 
820   \textcolor{keywordflow}{else}
821     \{
824       \textcolor{keywordflow}{if} (station->m\_longRetry < 1 + station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTp2RateId].
      retryCount)
825         \{
826           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Sampling use the MaxTP rate"});
827           station->m\_txrate = station->m\_maxTpRate2;
828         \}
829 
831       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= 1 + station->m\_groupsTable[maxTpGroupId].m\_ratesTable[maxTp2RateId].
      retryCount +
832                station->m\_groupsTable[maxProbGroupId].m\_ratesTable[maxProbRateId].retryCount)
833         \{
834           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Sampling use the MaxProb rate"});
835           station->m\_txrate = station->m\_maxProbRate;
836         \}
837       \textcolor{keywordflow}{else}
838         \{
839           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\textcolor{keyword}{false},\textcolor{stringliteral}{"Max retries reached and m\_longRetry not cleared properly.
       longRetry= "} << station->m\_longRetry);
840         \}
841     \}
842   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Next rate to use TxRate = "} << station->m\_txrate);
843 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 71




Here is the caller graph for this function\+:
% FIG 72


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Update\+Retry@{Update\+Retry}}
\index{Update\+Retry@{Update\+Retry}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Retry(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{UpdateRetry(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Update\+Retry (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}{}\label{classns3_1_1MinstrelHtWifiManager_a861e370c15601dd71c5bf79cd048b4e4}


Update the number of retries and reset accordingly. 


\begin{DoxyCode}
847 \{
848   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
849   station->m\_shortRetry = 0;
850   station->m\_longRetry = 0;
851 
852 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 73


\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!Update\+Stats@{Update\+Stats}}
\index{Update\+Stats@{Update\+Stats}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Stats(\+Minstrel\+Ht\+Wifi\+Remote\+Station $\ast$station)}{UpdateStats(MinstrelHtWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::\+Update\+Stats (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Ht\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_add9ba12485354ddfaae5a68a90469a92}{}\label{classns3_1_1MinstrelHtWifiManager_add9ba12485354ddfaae5a68a90469a92}
Updating the Minstrel Table every 1/10 seconds.


\begin{DoxyParams}{Parameters}
{\em station} & the minstrel HT wifi remote station \\
\hline
\end{DoxyParams}
Update throughput and E\+W\+MA for each rate inside each group.

If we\textquotesingle{}ve attempted something.

Calculate the probability of success. Assume probability scales from 0 to 100.

Bookeeping.

E\+W\+MA probability

Bookeeping. 
\begin{DoxyCode}
1239 \{
1240   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1241 
1242   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Updating stats="} << \textcolor{keyword}{this});
1243 
1244   station->m\_nextStatsUpdate = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1MinstrelHtWifiManager_a5c7d923b77d5cd3a1d38810ed41f91f8}{m\_updateStats};
1245 
1246   station->m\_numSamplesSlow = 0;
1247   station->m\_sampleCount = 0;
1248 
1249   \textcolor{keywordtype}{double} tempProb;
1250 
1251   \textcolor{keywordflow}{if} (station->m\_ampduPacketCount > 0)
1252     \{
1253       \textcolor{keywordtype}{double} newLen = station->m\_ampduLen / station->m\_ampduPacketCount;
1254       station->m\_avgAmpduLen = ( newLen * (100 - \hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{m\_ewmaLevel}) + (station->m\_avgAmpduLen * 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{m\_ewmaLevel}) ) / 100;
1255       station->m\_ampduLen = 0;
1256       station->m\_ampduPacketCount = 0;
1257     \}
1258 
1259   \textcolor{comment}{/* Initialize global rate indexes */}
1260   station->m\_maxTpRate = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{GetLowestIndex} (station);
1261   station->m\_maxTpRate2 = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{GetLowestIndex} (station);
1262   station->m\_maxProbRate = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{GetLowestIndex} (station);
1263 
1265   \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{m\_numGroups}; j++)
1266     \{
1267       \textcolor{keywordflow}{if} (station->m\_groupsTable[j].m\_supported)
1268         \{
1269           station->m\_sampleCount++;
1270 
1271           \textcolor{comment}{/* (re)Initialize group rate indexes */}
1272           station->m\_groupsTable[j].m\_maxTpRate = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{GetLowestIndex} (station, j);
1273           station->m\_groupsTable[j].m\_maxTpRate2 = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{GetLowestIndex} (station, j);
1274           station->m\_groupsTable[j].m\_maxProbRate = \hyperlink{classns3_1_1MinstrelHtWifiManager_ae4e498be04ca255831cdf42d9ff24eec}{GetLowestIndex} (station, j);
1275 
1276           \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{m\_numRates}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1277             \{
1278               \textcolor{keywordflow}{if} (station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].supported)
1279                 \{
1280                   station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].retryUpdated = \textcolor{keyword}{false};
1281 
1282                   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (i << \textcolor{stringliteral}{" "} << \hyperlink{classns3_1_1WifiRemoteStationManager_af21ecff608cea2837c1af9385bbe6e4e}{GetMcsSupported} (station,  station->
      m\_groupsTable[j].m\_ratesTable[i].mcsIndex) <<
1283                                 \textcolor{stringliteral}{"\(\backslash\)t attempt="} << station->m\_groupsTable[j].m\_ratesTable[i].numRateAttempt 
      <<
1284                                 \textcolor{stringliteral}{"\(\backslash\)t success="} << station->m\_groupsTable[j].m\_ratesTable[i].numRateSuccess);
1285 
1287                   \textcolor{keywordflow}{if} (station->m\_groupsTable[j].m\_ratesTable[i].numRateAttempt > 0)
1288                     \{
1289                       station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numSamplesSkipped = 0;
1294                       tempProb = (100 * station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess) / 
      station->m\_groupsTable[j].m\_ratesTable[i].numRateAttempt;
1295 
1297                       station->m\_groupsTable[j].m\_ratesTable[i].prob = tempProb;
1298 
1299                       \hyperlink{loss__ITU1238_8m_a419d895abe1313c35fa353c93802647e}{if} (station->m\_groupsTable[j].m\_ratesTable[i].successHist == 0)
1300                         \{
1301                           station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb = tempProb;
1302                         \}
1303                       \textcolor{keywordflow}{else}
1304                         \{
1305                           station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmsdProb = 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_a68fa27a1e0e083f4d3f2e19db64c1d4e}{CalculateEwmsd} (station->m\_groupsTable[j].m\_ratesTable[i].ewmsdProb,
1306                                                                                                 tempProb, 
      station->m\_groupsTable[j].m\_ratesTable[i].ewmaProb,
1307                                                                                                 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{m\_ewmaLevel});
1309                           tempProb = (tempProb * (100 - \hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{m\_ewmaLevel}) + station->m\_groupsTable[j]
      .m\_ratesTable[i].ewmaProb * \hyperlink{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{m\_ewmaLevel})  / 100;
1310                           station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb = tempProb;
1311                         \}
1312 
1313                       station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput = 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_aedf901def4f23eac093a7da8f363170b}{CalculateThroughput} (station, j, i, tempProb);
1314 
1315                       station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].successHist += station->m\_groupsTable[j].
      m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess;
1316                       station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].attemptHist += station->m\_groupsTable[j].
      m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt;
1317                     \}
1318                   \textcolor{keywordflow}{else}
1319                     \{
1320                       station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numSamplesSkipped++;
1321                     \}
1322 
1324                   station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateSuccess = station->m\_groupsTable[j]
      .m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess;
1325                   station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateAttempt = station->m\_groupsTable[j]
      .m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt;
1326                   station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess = 0;
1327                   station->m\_groupsTable[j].m\_ratesTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt = 0;
1328 
1329                   \textcolor{keywordflow}{if} (station->m\_groupsTable[j].m\_ratesTable[i].throughput != 0)
1330                     \{
1331                       \hyperlink{classns3_1_1MinstrelHtWifiManager_a5c8fb23ad34518c1e1f2add75a3b7f4c}{SetBestStationThRates} (station, 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{GetIndex} (j, i));
1332                       \hyperlink{classns3_1_1MinstrelHtWifiManager_ac9995672834a1256d4203b6045f6b513}{SetBestProbabilityRate} (station, 
      \hyperlink{classns3_1_1MinstrelHtWifiManager_ac67b182c22710c919c3dd4de337aca79}{GetIndex} (j, i));
1333                     \}
1334 
1335                 \}
1336             \}
1337         \}
1338     \}
1339 
1340   \textcolor{comment}{//Try to sample all available rates during each interval.}
1341   station->m\_sampleCount *= 8;
1342 
1343   \textcolor{comment}{//Recalculate retries for the rates selected.}
1344   \hyperlink{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}{CalculateRetransmits} (station, station->m\_maxTpRate);
1345   \hyperlink{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}{CalculateRetransmits} (station, station->m\_maxTpRate2);
1346   \hyperlink{classns3_1_1MinstrelHtWifiManager_a01ece0b82fd4cefb27de6a8759bc9529}{CalculateRetransmits} (station, station->m\_maxProbRate);
1347 
1348   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"max tp="} << station->m\_maxTpRate << \textcolor{stringliteral}{"\(\backslash\)nmax tp2="} <<  station->m\_maxTpRate2 << \textcolor{stringliteral}{
      "\(\backslash\)nmax prob="} << station->m\_maxProbRate);
1349   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MinstrelHtWifiManager_a0e2d19e84336ab6d788afd81a6ba9cdb}{m\_printStats})
1350     \{
1351       \hyperlink{classns3_1_1MinstrelHtWifiManager_a434fb6aadb02a74cc097ba54b7b02cb3}{PrintTable} (station);
1352     \}
1353 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 74




Here is the caller graph for this function\+:
% FIG 75




\subsection{Member Data Documentation}
\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+ewma\+Level@{m\+\_\+ewma\+Level}}
\index{m\+\_\+ewma\+Level@{m\+\_\+ewma\+Level}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+ewma\+Level}{m_ewmaLevel}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+ewma\+Level\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}{}\label{classns3_1_1MinstrelHtWifiManager_ace0a340f6c702f416f3dc9fed71105d1}


Exponential weighted moving average level (or coefficient). 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+frame\+Length@{m\+\_\+frame\+Length}}
\index{m\+\_\+frame\+Length@{m\+\_\+frame\+Length}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+frame\+Length}{m_frameLength}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+frame\+Length\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a069e6a4b77dc080d720a4b076cd8d7c5}{}\label{classns3_1_1MinstrelHtWifiManager_a069e6a4b77dc080d720a4b076cd8d7c5}


Frame length used for calculate modes Tx\+Time. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+legacy\+Manager@{m\+\_\+legacy\+Manager}}
\index{m\+\_\+legacy\+Manager@{m\+\_\+legacy\+Manager}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+legacy\+Manager}{m_legacyManager}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Minstrel\+Wifi\+Manager}$>$ ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+legacy\+Manager\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}{}\label{classns3_1_1MinstrelHtWifiManager_ae10ffd948e46a60593b1aef80372082a}


Pointer to an instance of \hyperlink{classns3_1_1MinstrelWifiManager}{Minstrel\+Wifi\+Manager}. Used when 802.\+11n/ac not supported. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+look\+Around\+Rate@{m\+\_\+look\+Around\+Rate}}
\index{m\+\_\+look\+Around\+Rate@{m\+\_\+look\+Around\+Rate}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+look\+Around\+Rate}{m_lookAroundRate}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+look\+Around\+Rate\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a7db397626b2dff4bd62619aa7fec75af}{}\label{classns3_1_1MinstrelHtWifiManager_a7db397626b2dff4bd62619aa7fec75af}


The \% to try other rates than our current rate. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+minstrel\+Groups@{m\+\_\+minstrel\+Groups}}
\index{m\+\_\+minstrel\+Groups@{m\+\_\+minstrel\+Groups}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+minstrel\+Groups}{m_minstrelGroups}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Minstrel\+Mcs\+Groups} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+minstrel\+Groups\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}{}\label{classns3_1_1MinstrelHtWifiManager_a231741ce3f38417925019aa598570468}


Global array for groups information. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+n\+Sample\+Col@{m\+\_\+n\+Sample\+Col}}
\index{m\+\_\+n\+Sample\+Col@{m\+\_\+n\+Sample\+Col}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+n\+Sample\+Col}{m_nSampleCol}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+n\+Sample\+Col\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}{}\label{classns3_1_1MinstrelHtWifiManager_afc2db9ea273b3599cb09ccbf73f866e0}


Number of sample columns. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+num\+Groups@{m\+\_\+num\+Groups}}
\index{m\+\_\+num\+Groups@{m\+\_\+num\+Groups}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+num\+Groups}{m_numGroups}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+num\+Groups\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}{}\label{classns3_1_1MinstrelHtWifiManager_a8a0964148ee665bab466b2858e8094b7}


Number of groups Minstrel should consider. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+num\+Rates@{m\+\_\+num\+Rates}}
\index{m\+\_\+num\+Rates@{m\+\_\+num\+Rates}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+num\+Rates}{m_numRates}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+num\+Rates\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}{}\label{classns3_1_1MinstrelHtWifiManager_a2f3d0e7f6c298a40dbc8699805103142}


Number of rates per group Minstrel should consider. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+print\+Stats@{m\+\_\+print\+Stats}}
\index{m\+\_\+print\+Stats@{m\+\_\+print\+Stats}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+print\+Stats}{m_printStats}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+print\+Stats\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a0e2d19e84336ab6d788afd81a6ba9cdb}{}\label{classns3_1_1MinstrelHtWifiManager_a0e2d19e84336ab6d788afd81a6ba9cdb}


If statistics table should be printed. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+rate\+Change@{m\+\_\+rate\+Change}}
\index{m\+\_\+rate\+Change@{m\+\_\+rate\+Change}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+rate\+Change}{m_rateChange}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<$uint64\+\_\+t, {\bf Mac48\+Address}$>$ ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+rate\+Change\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a40f1adcf50b778a96c87e16db15e950f}{}\label{classns3_1_1MinstrelHtWifiManager_a40f1adcf50b778a96c87e16db15e950f}
The trace source fired when the transmission rate change. \index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+uniform\+Random\+Variable@{m\+\_\+uniform\+Random\+Variable}}
\index{m\+\_\+uniform\+Random\+Variable@{m\+\_\+uniform\+Random\+Variable}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+uniform\+Random\+Variable}{m_uniformRandomVariable}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Uniform\+Random\+Variable}$>$ ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+uniform\+Random\+Variable\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_ad2dbdd143ca703a4366ed562b6ece239}{}\label{classns3_1_1MinstrelHtWifiManager_ad2dbdd143ca703a4366ed562b6ece239}


Provides uniform random variables. 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+update\+Stats@{m\+\_\+update\+Stats}}
\index{m\+\_\+update\+Stats@{m\+\_\+update\+Stats}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+update\+Stats}{m_updateStats}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+update\+Stats\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a5c7d923b77d5cd3a1d38810ed41f91f8}{}\label{classns3_1_1MinstrelHtWifiManager_a5c7d923b77d5cd3a1d38810ed41f91f8}


How frequent do we calculate the stats (1/10 seconds). 

\index{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}!m\+\_\+use\+Vht\+Only@{m\+\_\+use\+Vht\+Only}}
\index{m\+\_\+use\+Vht\+Only@{m\+\_\+use\+Vht\+Only}!ns3\+::\+Minstrel\+Ht\+Wifi\+Manager@{ns3\+::\+Minstrel\+Ht\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+use\+Vht\+Only}{m_useVhtOnly}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Ht\+Wifi\+Manager\+::m\+\_\+use\+Vht\+Only\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelHtWifiManager_a6997df6e5760dd9891f2caea0a6e1937}{}\label{classns3_1_1MinstrelHtWifiManager_a6997df6e5760dd9891f2caea0a6e1937}


If only V\+HT M\+CS should be used, instead of HT and V\+HT. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
wifi/model/\hyperlink{minstrel-ht-wifi-manager_8h}{minstrel-\/ht-\/wifi-\/manager.\+h}\item 
wifi/model/\hyperlink{minstrel-ht-wifi-manager_8cc}{minstrel-\/ht-\/wifi-\/manager.\+cc}\end{DoxyCompactItemize}
