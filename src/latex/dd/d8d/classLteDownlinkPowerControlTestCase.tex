\hypertarget{classLteDownlinkPowerControlTestCase}{}\section{Lte\+Downlink\+Power\+Control\+Test\+Case Class Reference}
\label{classLteDownlinkPowerControlTestCase}\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}


{\ttfamily \#include $<$lte-\/test-\/downlink-\/power-\/control.\+h$>$}



Inheritance diagram for Lte\+Downlink\+Power\+Control\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lte\+Downlink\+Power\+Control\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLteDownlinkPowerControlTestCase_a6aaeba86d236f4e9848a3414d6ff087a}{Lte\+Downlink\+Power\+Control\+Test\+Case} (bool change\+Power, uint8\+\_\+t pa, std\+::string \hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name})
\item 
virtual \hyperlink{classLteDownlinkPowerControlTestCase_ad1e870845f4fb9737cfc32fd0fb2b480}{$\sim$\+Lte\+Downlink\+Power\+Control\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLteDownlinkPowerControlTestCase_a2eb1e31f7313f51061d8aa950d3f4268}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classLteDownlinkPowerControlTestCase_ad637612640933b4257b61f515ae44186}{m\+\_\+change\+Pdsch\+Config\+Dedicated}
\item 
\hyperlink{structns3_1_1LteRrcSap_1_1PdschConfigDedicated}{Lte\+Rrc\+Sap\+::\+Pdsch\+Config\+Dedicated} \hyperlink{classLteDownlinkPowerControlTestCase_a585b94172221a43077e191eb81bf72e2}{m\+\_\+pdsch\+Config\+Dedicated}
\item 
double \hyperlink{classLteDownlinkPowerControlTestCase_a02131214e45a4ecd49f1a8d3b9b65675}{m\+\_\+expected\+Power\+Diff}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}!Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}
\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}!Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lte\+Downlink\+Power\+Control\+Test\+Case(bool change\+Power, uint8\+\_\+t pa, std\+::string name)}{LteDownlinkPowerControlTestCase(bool changePower, uint8_t pa, std::string name)}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Downlink\+Power\+Control\+Test\+Case\+::\+Lte\+Downlink\+Power\+Control\+Test\+Case (
\begin{DoxyParamCaption}
\item[{bool}]{change\+Power, }
\item[{uint8\+\_\+t}]{pa, }
\item[{std\+::string}]{name}
\end{DoxyParamCaption}
)}\hypertarget{classLteDownlinkPowerControlTestCase_a6aaeba86d236f4e9848a3414d6ff087a}{}\label{classLteDownlinkPowerControlTestCase_a6aaeba86d236f4e9848a3414d6ff087a}

\begin{DoxyCode}
383   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Downlink Power Control: "} + \hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name})
384 \{
385   \hyperlink{classLteDownlinkPowerControlTestCase_ad637612640933b4257b61f515ae44186}{m\_changePdschConfigDedicated} = changePower;
386   \hyperlink{classLteDownlinkPowerControlTestCase_a585b94172221a43077e191eb81bf72e2}{m\_pdschConfigDedicated}.\hyperlink{structns3_1_1LteRrcSap_1_1PdschConfigDedicated_aa9b1574a63fb83c53649305ca95aeb31}{pa} = pa;
387   \hyperlink{classLteDownlinkPowerControlTestCase_a02131214e45a4ecd49f1a8d3b9b65675}{m\_expectedPowerDiff} = LteRrcSap::ConvertPdschConfigDedicated2Double (
      \hyperlink{classLteDownlinkPowerControlTestCase_a585b94172221a43077e191eb81bf72e2}{m\_pdschConfigDedicated});
388   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Creating LteDownlinkPowerControlTestCase"});
389 \}
\end{DoxyCode}
\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}!````~Lte\+Downlink\+Power\+Control\+Test\+Case@{$\sim$\+Lte\+Downlink\+Power\+Control\+Test\+Case}}
\index{````~Lte\+Downlink\+Power\+Control\+Test\+Case@{$\sim$\+Lte\+Downlink\+Power\+Control\+Test\+Case}!Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Lte\+Downlink\+Power\+Control\+Test\+Case()}{~LteDownlinkPowerControlTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Downlink\+Power\+Control\+Test\+Case\+::$\sim$\+Lte\+Downlink\+Power\+Control\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classLteDownlinkPowerControlTestCase_ad1e870845f4fb9737cfc32fd0fb2b480}{}\label{classLteDownlinkPowerControlTestCase_ad1e870845f4fb9737cfc32fd0fb2b480}

\begin{DoxyCode}
392 \{
393 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lte\+Downlink\+Power\+Control\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLteDownlinkPowerControlTestCase_a2eb1e31f7313f51061d8aa950d3f4268}{}\label{classLteDownlinkPowerControlTestCase_a2eb1e31f7313f51061d8aa950d3f4268}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. Simulation Topology

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
397 \{
398   \hyperlink{group__config_ga2c1b65724f42f8c72276d7e7ad6df6db}{Config::Reset} ();
399   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteHelper::UseIdealRrc"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
400 
405   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lteHelper = CreateObject<LteHelper> ();
406   lteHelper->\hyperlink{classns3_1_1LteHelper_a035c6b03305c1511975362f80425b5fc}{SetFfrAlgorithmType} (\textcolor{stringliteral}{"ns3::LteFfrSimple"});
407 
408   \textcolor{comment}{// Create Nodes: eNodeB and UE}
409   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
410   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
411   enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
412   ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
413   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} allNodes = \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ( enbNodes, ueNodes );
414 
415   \textcolor{comment}{// Install Mobility Model}
416   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
417   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
418   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (allNodes);
419 
420   \textcolor{comment}{// Create Devices and install them in the Nodes (eNB and UE)}
421   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbDevs;
422   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueDevs;
423   lteHelper->\hyperlink{classns3_1_1LteHelper_a8f86e55b8b80a81732c4b2df00fb25d5}{SetSchedulerType} (\textcolor{stringliteral}{"ns3::PfFfMacScheduler"});
424   enbDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbNodes);
425   ueDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ueNodes);
426 
427   \textcolor{comment}{// Attach a UE to a eNB}
428   lteHelper->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueDevs, enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
429 
430   \hyperlink{classns3_1_1PointerValue}{PointerValue} tmp;
431   enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetAttribute (\textcolor{stringliteral}{"LteFfrAlgorithm"}, tmp);
432   \hyperlink{classns3_1_1Ptr}{Ptr<LteFfrSimple>} simpleFfrAlgorithm = DynamicCast<LteFfrSimple>(tmp.
      \hyperlink{classns3_1_1PointerValue_a53d0f9f5c538ea6120c96a1ecb1344a8}{GetObject} ());
433   simpleFfrAlgorithm->\hyperlink{classns3_1_1LteFfrSimple_a23f83819e8f2262243592a111f8668fe}{ChangePdschConfigDedicated} (
      \hyperlink{classLteDownlinkPowerControlTestCase_ad637612640933b4257b61f515ae44186}{m\_changePdschConfigDedicated});
434   simpleFfrAlgorithm->\hyperlink{classns3_1_1LteFfrSimple_a3da8348dd3cc4173464933912ae7524b}{SetPdschConfigDedicated} (
      \hyperlink{classLteDownlinkPowerControlTestCase_a585b94172221a43077e191eb81bf72e2}{m\_pdschConfigDedicated});
435 
436   \textcolor{comment}{// Activate the default EPS bearer}
437   \textcolor{keyword}{enum} \hyperlink{structns3_1_1EpsBearer_aecf0c67109c5eb4ec0b07226fff5885e}{EpsBearer::Qci} q = EpsBearer::NGBR\_VIDEO\_TCP\_DEFAULT;
438   \hyperlink{structns3_1_1EpsBearer}{EpsBearer} bearer (q);
439   lteHelper->\hyperlink{classns3_1_1LteHelper_ac896e16cf162e4beeaa292d39ab1b700}{ActivateDataRadioBearer} (ueDevs, bearer);
440 
441   \textcolor{comment}{// Use testing chunk processor in the PHY layer}
442   \textcolor{comment}{// It will be used to calculate data and ctrl power in downlink}
443 
444   \hyperlink{classns3_1_1Ptr}{Ptr<LtePhy>} ue1Phy = ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetObject<\hyperlink{classns3_1_1LteUeNetDevice}{LteUeNetDevice}> ()->GetPhy ()
      ->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1LtePhy}{LtePhy}> ();
445 
446   \hyperlink{classns3_1_1Ptr}{Ptr<LteChunkProcessor>} testDlDataPowerReceived = Create<LteChunkProcessor> ();
447   \hyperlink{classns3_1_1LteSpectrumValueCatcher}{LteSpectrumValueCatcher} dlDataPowerReceivedCatcher;
448   testDlDataPowerReceived->AddCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&LteSpectrumValueCatcher::ReportValue, &
      dlDataPowerReceivedCatcher));
449   ue1Phy->\hyperlink{classns3_1_1LtePhy_a9560f8862545c7c5760e7f6737c5b938}{GetDownlinkSpectrumPhy} ()->AddDataPowerChunkProcessor (
      testDlDataPowerReceived);
450 
451   \hyperlink{classns3_1_1Ptr}{Ptr<LteChunkProcessor>} testDlCtrlPowerReceived = Create<LteChunkProcessor> ();
452   \hyperlink{classns3_1_1LteSpectrumValueCatcher}{LteSpectrumValueCatcher} dlCtrlPowerReceivedCatcher;
453   testDlCtrlPowerReceived->\hyperlink{classns3_1_1LteChunkProcessor_a122d4a00d72e68a0a8b2cbdd165cdfd8}{AddCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      LteSpectrumValueCatcher::ReportValue, &dlCtrlPowerReceivedCatcher));
454   ue1Phy->\hyperlink{classns3_1_1LtePhy_a9560f8862545c7c5760e7f6737c5b938}{GetDownlinkSpectrumPhy} ()->AddRsPowerChunkProcessor (
      testDlCtrlPowerReceived);
455 
456   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.400));
457   Simulator::Run ();
458 
459   \textcolor{keywordtype}{double} dataPower = 10.0 * std::log10 (dlDataPowerReceivedCatcher.GetValue ()->operator[] (0));
460   \textcolor{keywordtype}{double} ctrlPower = 10.0 * std::log10 (dlCtrlPowerReceivedCatcher.GetValue ()->operator[] (0));
461   \textcolor{keywordtype}{double} powerDiff = (-1.0)*ctrlPower + dataPower;
462 
463   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DataPower: "} << dataPower);
464   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"CtrlPower: "} << ctrlPower);
465   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"PowerDifference: "} << powerDiff);
466   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ExpectedPowerDifference: "} << \hyperlink{classLteDownlinkPowerControlTestCase_a02131214e45a4ecd49f1a8d3b9b65675}{m\_expectedPowerDiff});
467 
468   \hyperlink{group__testing_ga9e7861b56b4e70db3b56044cb7a28e41}{NS\_TEST\_ASSERT\_MSG\_EQ\_TOL} (powerDiff, 
      \hyperlink{classLteDownlinkPowerControlTestCase_a02131214e45a4ecd49f1a8d3b9b65675}{m\_expectedPowerDiff}, 0.001,
469                              \textcolor{stringliteral}{"Downlink Data and Ctrl Power Difference are not equal within tolerance"});
470 
471   Simulator::Destroy ();
472 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}!m\+\_\+change\+Pdsch\+Config\+Dedicated@{m\+\_\+change\+Pdsch\+Config\+Dedicated}}
\index{m\+\_\+change\+Pdsch\+Config\+Dedicated@{m\+\_\+change\+Pdsch\+Config\+Dedicated}!Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+change\+Pdsch\+Config\+Dedicated}{m_changePdschConfigDedicated}}]{\setlength{\rightskip}{0pt plus 5cm}bool Lte\+Downlink\+Power\+Control\+Test\+Case\+::m\+\_\+change\+Pdsch\+Config\+Dedicated\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteDownlinkPowerControlTestCase_ad637612640933b4257b61f515ae44186}{}\label{classLteDownlinkPowerControlTestCase_ad637612640933b4257b61f515ae44186}
\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}!m\+\_\+expected\+Power\+Diff@{m\+\_\+expected\+Power\+Diff}}
\index{m\+\_\+expected\+Power\+Diff@{m\+\_\+expected\+Power\+Diff}!Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+expected\+Power\+Diff}{m_expectedPowerDiff}}]{\setlength{\rightskip}{0pt plus 5cm}double Lte\+Downlink\+Power\+Control\+Test\+Case\+::m\+\_\+expected\+Power\+Diff\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteDownlinkPowerControlTestCase_a02131214e45a4ecd49f1a8d3b9b65675}{}\label{classLteDownlinkPowerControlTestCase_a02131214e45a4ecd49f1a8d3b9b65675}
\index{Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}!m\+\_\+pdsch\+Config\+Dedicated@{m\+\_\+pdsch\+Config\+Dedicated}}
\index{m\+\_\+pdsch\+Config\+Dedicated@{m\+\_\+pdsch\+Config\+Dedicated}!Lte\+Downlink\+Power\+Control\+Test\+Case@{Lte\+Downlink\+Power\+Control\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+pdsch\+Config\+Dedicated}{m_pdschConfigDedicated}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Rrc\+Sap\+::\+Pdsch\+Config\+Dedicated} Lte\+Downlink\+Power\+Control\+Test\+Case\+::m\+\_\+pdsch\+Config\+Dedicated\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteDownlinkPowerControlTestCase_a585b94172221a43077e191eb81bf72e2}{}\label{classLteDownlinkPowerControlTestCase_a585b94172221a43077e191eb81bf72e2}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/test/\hyperlink{lte-test-downlink-power-control_8h}{lte-\/test-\/downlink-\/power-\/control.\+h}\item 
lte/test/\hyperlink{lte-test-downlink-power-control_8cc}{lte-\/test-\/downlink-\/power-\/control.\+cc}\end{DoxyCompactItemize}
