\hypertarget{classns3_1_1RandomRoomPositionAllocator}{}\section{ns3\+:\+:Random\+Room\+Position\+Allocator Class Reference}
\label{classns3_1_1RandomRoomPositionAllocator}\index{ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}}


{\ttfamily \#include $<$building-\/position-\/allocator.\+h$>$}



Inheritance diagram for ns3\+:\+:Random\+Room\+Position\+Allocator\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Random\+Room\+Position\+Allocator\+:
% FIG 1
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structns3_1_1RandomRoomPositionAllocator_1_1RoomInfo}{Room\+Info}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1RandomRoomPositionAllocator_a2df2928eda0e620e67fd30da857af5ac}{Random\+Room\+Position\+Allocator} ()
\item 
virtual Vector \hyperlink{classns3_1_1RandomRoomPositionAllocator_a01f64780cc703025e55f1cc451e2441c}{Get\+Next} (void) const 
\item 
int64\+\_\+t \hyperlink{classns3_1_1RandomRoomPositionAllocator_a143ceb5be825ab1c35080497df64c2d1}{Assign\+Streams} (int64\+\_\+t stream)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1RandomRoomPositionAllocator_acbf3b609e7cd7f8b632e03f75e0ba638}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \hyperlink{structns3_1_1RandomRoomPositionAllocator_1_1RoomInfo}{Room\+Info} $>$ \hyperlink{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{m\+\_\+room\+List\+Without\+Replacement}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1UniformRandomVariable}{Uniform\+Random\+Variable} $>$ \hyperlink{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{m\+\_\+rand}
\begin{DoxyCompactList}\small\item\em Provides uniform random variables. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Allocate each position by randomly chosing a room from the list of all buildings, and then randomly chosing a position inside the room. The selection of the room is always done without replacement. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}!Random\+Room\+Position\+Allocator@{Random\+Room\+Position\+Allocator}}
\index{Random\+Room\+Position\+Allocator@{Random\+Room\+Position\+Allocator}!ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}}
\subsubsection[{\texorpdfstring{Random\+Room\+Position\+Allocator()}{RandomRoomPositionAllocator()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Random\+Room\+Position\+Allocator\+::\+Random\+Room\+Position\+Allocator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1RandomRoomPositionAllocator_a2df2928eda0e620e67fd30da857af5ac}{}\label{classns3_1_1RandomRoomPositionAllocator_a2df2928eda0e620e67fd30da857af5ac}

\begin{DoxyCode}
111 \{
112   \hyperlink{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{m\_rand} = CreateObject<UniformRandomVariable> ();
113 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}!Assign\+Streams@{Assign\+Streams}}
\index{Assign\+Streams@{Assign\+Streams}!ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}}
\subsubsection[{\texorpdfstring{Assign\+Streams(int64\+\_\+t stream)}{AssignStreams(int64_t stream)}}]{\setlength{\rightskip}{0pt plus 5cm}int64\+\_\+t ns3\+::\+Random\+Room\+Position\+Allocator\+::\+Assign\+Streams (
\begin{DoxyParamCaption}
\item[{int64\+\_\+t}]{stream}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RandomRoomPositionAllocator_a143ceb5be825ab1c35080497df64c2d1}{}\label{classns3_1_1RandomRoomPositionAllocator_a143ceb5be825ab1c35080497df64c2d1}
Assign a fixed random variable stream number to the random variables used by this model. Return the number of streams (possibly zero) that have been assigned.


\begin{DoxyParams}{Parameters}
{\em stream} & first stream index to use \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of stream indices assigned by this model 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1PositionAllocator_a654c787e42def6e4463731d50b337057}{ns3\+::\+Position\+Allocator}.


\begin{DoxyCode}
186 \{
187   \hyperlink{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{m\_rand}->\hyperlink{classns3_1_1RandomVariableStream_add11aaf975607746b7e271d300659a94}{SetStream} (stream);
188   \textcolor{keywordflow}{return} 1;
189 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}!Get\+Next@{Get\+Next}}
\index{Get\+Next@{Get\+Next}!ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}}
\subsubsection[{\texorpdfstring{Get\+Next(void) const }{GetNext(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}Vector ns3\+::\+Random\+Room\+Position\+Allocator\+::\+Get\+Next (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1RandomRoomPositionAllocator_a01f64780cc703025e55f1cc451e2441c}{}\label{classns3_1_1RandomRoomPositionAllocator_a01f64780cc703025e55f1cc451e2441c}
\begin{DoxyReturn}{Returns}
the next chosen position.
\end{DoxyReturn}
This method {\itshape must} be implement in subclasses. 

Implements \hyperlink{classns3_1_1PositionAllocator_ab1d9ba3b655b9f83f4cf738ff06fbd6f}{ns3\+::\+Position\+Allocator}.


\begin{DoxyCode}
127 \{
128   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
129   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1BuildingList_a80e3d43b64f35c4f98ecfcef9a5d9a9c}{BuildingList::GetNBuildings} () > 0, \textcolor{stringliteral}{"no building
       found"});
130  
131   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{m\_roomListWithoutReplacement}.empty ())
132     \{
133       \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1BuildingList_a84957ecea4b4343f676da0e96f2c8130}{BuildingList::Iterator} bit = 
      \hyperlink{classns3_1_1BuildingList_adbb122872e11541e930f0a3afa70a479}{BuildingList::Begin} (); bit != \hyperlink{classns3_1_1BuildingList_abc6b941dbb194efb9f00352cc6b3db65}{BuildingList::End} (); ++bit)
134         \{
135           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"building "} << (*bit)->GetId ());
136           \textcolor{keywordflow}{for} (uint32\_t rx = 1; rx <= (*bit)->GetNRoomsX (); ++rx)
137             \{
138               \textcolor{keywordflow}{for} (uint32\_t ry = 1; ry <= (*bit)->GetNRoomsY (); ++ry)
139                 \{
140                   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f} = 1; \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f} <= (*bit)->GetNFloors (); ++\hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f})
141                     \{
142                       RoomInfo \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
143                       i.roomx = rx;
144                       i.roomy = ry;
145                       i.floor = \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f}; 
146                       i.b = *bit;
147                       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"adding room ("} << rx << \textcolor{stringliteral}{", "} << ry << \textcolor{stringliteral}{", "} << 
      \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f} << \textcolor{stringliteral}{")"});
148                       \hyperlink{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{m\_roomListWithoutReplacement}.push\_back (i);
149                     \}
150                 \}
151             \}
152         \}
153     \}
154   uint32\_t \hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n} = \hyperlink{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{m\_rand}->\hyperlink{classns3_1_1RandomVariableStream_a66cd94e6305ce7f000f1a9ff0fcb9aef}{GetInteger} (0,
      \hyperlink{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{m\_roomListWithoutReplacement}.size () - 1);
155   RoomInfo r = \hyperlink{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{m\_roomListWithoutReplacement}.at (n);
156   \hyperlink{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{m\_roomListWithoutReplacement}.erase (
      \hyperlink{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{m\_roomListWithoutReplacement}.begin () + \hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n});
157   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"considering building "} << r.b->GetId () << \textcolor{stringliteral}{" room ("} << r.roomx << \textcolor{stringliteral}{", "} << r.
      roomy << \textcolor{stringliteral}{", "} << r.floor << \textcolor{stringliteral}{")"});
158 
159   Ptr<RandomBoxPositionAllocator> pa = CreateObject<RandomBoxPositionAllocator> ();
160   BoxValue bv;
161   r.b->GetAttribute (\textcolor{stringliteral}{"Boundaries"}, bv);
162   Box box = bv.Get ();
163   \textcolor{keywordtype}{double} rdx =  (box.xMax - box.xMin) / r.b->GetNRoomsX ();
164   \textcolor{keywordtype}{double} rdy =  (box.yMax - box.yMin) / r.b->GetNRoomsY ();
165   \textcolor{keywordtype}{double} rdz =  (box.zMax - box.zMin) / r.b->GetNFloors ();
166   \textcolor{keywordtype}{double} x1 = box.xMin + rdx * (r.roomx - 1);
167   \textcolor{keywordtype}{double} x2 = box.xMin + rdx * r.roomx;
168   \textcolor{keywordtype}{double} y1 = box.yMin + rdy * (r.roomy -1);
169   \textcolor{keywordtype}{double} y2 = box.yMin + rdy * r.roomy;
170   \textcolor{keywordtype}{double} z1 = box.zMin + rdz * (r.floor - 1);
171   \textcolor{keywordtype}{double} z2 = box.zMin + rdz * r.floor;
172   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"randomly allocating position in "}
173                 << \textcolor{stringliteral}{" ("} << x1 << \textcolor{stringliteral}{","} << x2 << \textcolor{stringliteral}{") "}
174                 << \textcolor{stringliteral}{"x ("} << y1 << \textcolor{stringliteral}{","} << y2 << \textcolor{stringliteral}{") "}
175                 << \textcolor{stringliteral}{"x ("} << z1 << \textcolor{stringliteral}{","} << z2 << \textcolor{stringliteral}{") "});
176 
177   \textcolor{keywordtype}{double} \hyperlink{lte__link__budget__x2__handover__measures_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x} = \hyperlink{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{m\_rand}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (x1, x2);
178   \textcolor{keywordtype}{double} y = \hyperlink{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{m\_rand}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (y1, y2);
179   \textcolor{keywordtype}{double} z = \hyperlink{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{m\_rand}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (z1, z2);
180 
181   \textcolor{keywordflow}{return} Vector (x, y, z);
182 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Random\+Room\+Position\+Allocator\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1RandomRoomPositionAllocator_acbf3b609e7cd7f8b632e03f75e0ba638}{}\label{classns3_1_1RandomRoomPositionAllocator_acbf3b609e7cd7f8b632e03f75e0ba638}

\begin{DoxyCode}
117 \{
118   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::RandomRoomPositionAllocator"})
119     .SetParent<\hyperlink{classns3_1_1PositionAllocator_a944cf6b97b874e06983c1f3e81cf3ea6}{PositionAllocator}> ()
120     .SetGroupName (\textcolor{stringliteral}{"Buildings"})
121     .AddConstructor<\hyperlink{classns3_1_1RandomRoomPositionAllocator_a2df2928eda0e620e67fd30da857af5ac}{RandomRoomPositionAllocator}> ();
122   \textcolor{keywordflow}{return} tid;
123 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




\subsection{Member Data Documentation}
\index{ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}!m\+\_\+rand@{m\+\_\+rand}}
\index{m\+\_\+rand@{m\+\_\+rand}!ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}}
\subsubsection[{\texorpdfstring{m\+\_\+rand}{m_rand}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Uniform\+Random\+Variable}$>$ ns3\+::\+Random\+Room\+Position\+Allocator\+::m\+\_\+rand\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}{}\label{classns3_1_1RandomRoomPositionAllocator_ab516197adcf737e85bed980ecdeec062}


Provides uniform random variables. 

\index{ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}!m\+\_\+room\+List\+Without\+Replacement@{m\+\_\+room\+List\+Without\+Replacement}}
\index{m\+\_\+room\+List\+Without\+Replacement@{m\+\_\+room\+List\+Without\+Replacement}!ns3\+::\+Random\+Room\+Position\+Allocator@{ns3\+::\+Random\+Room\+Position\+Allocator}}
\subsubsection[{\texorpdfstring{m\+\_\+room\+List\+Without\+Replacement}{m_roomListWithoutReplacement}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Room\+Info}$>$ ns3\+::\+Random\+Room\+Position\+Allocator\+::m\+\_\+room\+List\+Without\+Replacement\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}\hypertarget{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}{}\label{classns3_1_1RandomRoomPositionAllocator_a61c7c59ae97a661cda08996305d9e1c6}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
buildings/helper/\hyperlink{building-position-allocator_8h}{building-\/position-\/allocator.\+h}\item 
buildings/helper/\hyperlink{building-position-allocator_8cc}{building-\/position-\/allocator.\+cc}\end{DoxyCompactItemize}
