\hypertarget{classCsmaStarTestCase}{}\section{Csma\+Star\+Test\+Case Class Reference}
\label{classCsmaStarTestCase}\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}


Inheritance diagram for Csma\+Star\+Test\+Case\+:
% FIG 0


Collaboration diagram for Csma\+Star\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classCsmaStarTestCase_a03a0bdd707fe6354df3ec50b3fae48ea}{Csma\+Star\+Test\+Case} ()
\item 
virtual \hyperlink{classCsmaStarTestCase_a8efcd1b0624a170a2f2425607750fc34}{$\sim$\+Csma\+Star\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classCsmaStarTestCase_ab2214447716ce03f34f02b9e9af477d5}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classCsmaStarTestCase_aec6f484651b37b82bb951a5daef88434}{Sink\+Rx} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1Address}{Address} \&ad)
\item 
void \hyperlink{classCsmaStarTestCase_a0c12928e6a2d294360096a5d1e92a124}{Drop\+Event} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p})
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \hyperlink{classCsmaStarTestCase_a3b380689a4e0e523c13abbdffde06781}{m\+\_\+count}
\item 
uint32\+\_\+t \hyperlink{classCsmaStarTestCase_ac16da6db1bd8b8670a54805706850e48}{m\+\_\+drops}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\subsubsection[{\texorpdfstring{Csma\+Star\+Test\+Case()}{CsmaStarTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Csma\+Star\+Test\+Case\+::\+Csma\+Star\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classCsmaStarTestCase_a03a0bdd707fe6354df3ec50b3fae48ea}{}\label{classCsmaStarTestCase_a03a0bdd707fe6354df3ec50b3fae48ea}

\begin{DoxyCode}
907   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Star example for Carrier Sense Multiple Access (CSMA) networks"}), 
      \hyperlink{classCsmaStarTestCase_a3b380689a4e0e523c13abbdffde06781}{m\_count} (0), \hyperlink{classCsmaStarTestCase_ac16da6db1bd8b8670a54805706850e48}{m\_drops} (0)
908 \{
909 \}
\end{DoxyCode}
\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!````~Csma\+Star\+Test\+Case@{$\sim$\+Csma\+Star\+Test\+Case}}
\index{````~Csma\+Star\+Test\+Case@{$\sim$\+Csma\+Star\+Test\+Case}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Csma\+Star\+Test\+Case()}{~CsmaStarTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Csma\+Star\+Test\+Case\+::$\sim$\+Csma\+Star\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classCsmaStarTestCase_a8efcd1b0624a170a2f2425607750fc34}{}\label{classCsmaStarTestCase_a8efcd1b0624a170a2f2425607750fc34}

\begin{DoxyCode}
912 \{
913 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Csma\+Star\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classCsmaStarTestCase_ab2214447716ce03f34f02b9e9af477d5}{}\label{classCsmaStarTestCase_ab2214447716ce03f34f02b9e9af477d5}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
946 \{
947   \textcolor{comment}{//}
948   \textcolor{comment}{// Default number of nodes in the star.}
949   \textcolor{comment}{//}
950   uint32\_t nSpokes = 7;
951 
952   \hyperlink{classns3_1_1CsmaHelper}{CsmaHelper} csma;
953   csma.\hyperlink{classns3_1_1CsmaHelper_a886d900b2fe44433e0b81752dea7e7f1}{SetChannelAttribute} (\textcolor{stringliteral}{"DataRate"}, StringValue (\textcolor{stringliteral}{"100Mbps"}));
954   csma.\hyperlink{classns3_1_1CsmaHelper_a886d900b2fe44433e0b81752dea7e7f1}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, StringValue (\textcolor{stringliteral}{"1ms"}));
955   \hyperlink{classns3_1_1CsmaStarHelper}{CsmaStarHelper} star (nSpokes, csma);
956 
957   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} fillNodes;
958 
959   \textcolor{comment}{//}
960   \textcolor{comment}{// Just to be nasy, hang some more nodes off of the CSMA channel for each}
961   \textcolor{comment}{// spoke, so that there are a total of 16 nodes on each channel.  Stash}
962   \textcolor{comment}{// all of these new devices into a container.}
963   \textcolor{comment}{//}
964   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} fillDevices;
965 
966   uint32\_t nFill = 14;
967   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < star.GetSpokeDevices ().GetN (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
968     \{
969       \hyperlink{classns3_1_1Ptr}{Ptr<Channel>} channel = star.GetSpokeDevices ().Get (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})->GetChannel ();
970       \hyperlink{classns3_1_1Ptr}{Ptr<CsmaChannel>} csmaChannel = channel->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1CsmaChannel}{CsmaChannel}> ();
971       \hyperlink{classns3_1_1NodeContainer}{NodeContainer} newNodes;
972       newNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (nFill);
973       fillNodes.\hyperlink{classns3_1_1NodeContainer_aa60b3a0e70f2fb324e16ffcf8bf31fcb}{Add} (newNodes);
974       fillDevices.\hyperlink{classns3_1_1NetDeviceContainer_a7ca8bc1d7ec00fd4fcc63869987fbda5}{Add} (csma.\hyperlink{classns3_1_1CsmaHelper_af79a91372595230b0817200270ab84e7}{Install} (newNodes, csmaChannel));
975     \}
976 
977   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
978   star.InstallStack (internet);
979   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (fillNodes);
980 
981   star.AssignIpv4Addresses (\hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} (\textcolor{stringliteral}{"10.1.0.0"}, \textcolor{stringliteral}{"255.255.255.0"}));
982 
983   \textcolor{comment}{//}
984   \textcolor{comment}{// We assigned addresses to the logical hub and the first "drop" of the }
985   \textcolor{comment}{// CSMA network that acts as the spoke, but we also have a number of fill}
986   \textcolor{comment}{// devices (nFill) also hanging off the CSMA network.  We have got to }
987   \textcolor{comment}{// assign addresses to them as well.  We put all of the fill devices into}
988   \textcolor{comment}{// a single device container, so the first nFill devices are associated}
989   \textcolor{comment}{// with the channel connected to spokeDevices.Get (0), the second nFill}
990   \textcolor{comment}{// devices afe associated with the channel connected to spokeDevices.Get (1)}
991   \textcolor{comment}{// etc.}
992   \textcolor{comment}{//}
993   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} address;
994   \textcolor{keywordflow}{for}(uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < star.SpokeCount (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
995     \{
996       std::ostringstream subnet;
997       subnet << \textcolor{stringliteral}{"10.1."} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{".0"};
998       address.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (subnet.str ().c\_str (), \textcolor{stringliteral}{"255.255.255.0"}, \textcolor{stringliteral}{"0.0.0.3"});
999 
1000       \textcolor{keywordflow}{for} (uint32\_t j = 0; j < nFill; ++j)
1001         \{
1002           address.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (fillDevices.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (i * nFill + j));
1003         \}
1004     \}
1005 
1006   \textcolor{comment}{//}
1007   \textcolor{comment}{// Create a packet sink on the star "hub" to receive packets.}
1008   \textcolor{comment}{// }
1009   uint16\_t \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = 50000;
1010   \hyperlink{classns3_1_1Address}{Address} hubLocalAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), port));
1011   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} packetSinkHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, hubLocalAddress);
1012   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} hubApp = packetSinkHelper.Install (star.GetHub ());
1013   hubApp.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
1014   hubApp.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
1015 
1016   \textcolor{comment}{//}
1017   \textcolor{comment}{// Create OnOff applications to send TCP to the hub, one on each spoke node.}
1018   \textcolor{comment}{//}
1019   \textcolor{comment}{// Make packets be sent about every DefaultPacketSize / DataRate = }
1020   \textcolor{comment}{// 4096 bits / (5000 bits/second) = 0.82 second.}
1021   \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} onOffHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, \hyperlink{classns3_1_1Address}{Address} ());
1022   onOffHelper.SetConstantRate (\hyperlink{classns3_1_1DataRate}{DataRate} (5000));
1023 
1024   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} spokeApps;
1025 
1026   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < star.SpokeCount (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1027     \{
1028       AddressValue remoteAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (star.GetHubIpv4Address (i), 
      \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}));
1029       onOffHelper.SetAttribute (\textcolor{stringliteral}{"Remote"}, remoteAddress);
1030       spokeApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (onOffHelper.Install (star.GetSpokeNode (i)));
1031     \}
1032 
1033   spokeApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
1034   spokeApps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
1035 
1036   \textcolor{comment}{//}
1037   \textcolor{comment}{// Because we are evil, we also add OnOff applications to send TCP to the hub }
1038   \textcolor{comment}{// from the fill devices on each CSMA link.  The first nFill nodes in the }
1039   \textcolor{comment}{// fillNodes container are on the CSMA network talking to the zeroth device}
1040   \textcolor{comment}{// on the hub node.  The next nFill nodes are on the CSMA network talking to}
1041   \textcolor{comment}{// the first device on the hub node, etc.  So the ith fillNode is associated}
1042   \textcolor{comment}{// with the hub address found on the (i / nFill)th device on the hub node.}
1043   \textcolor{comment}{//}
1044   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} fillApps;
1045 
1046   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < fillNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1047     \{
1048       AddressValue remoteAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (star.GetHubIpv4Address (i / nFill), 
      \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}));
1049       onOffHelper.SetAttribute (\textcolor{stringliteral}{"Remote"}, remoteAddress);
1050       fillApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (onOffHelper.Install (fillNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (i)));
1051     \}
1052 
1053   fillApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
1054   fillApps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
1055 
1056   \textcolor{comment}{//}
1057   \textcolor{comment}{// Turn on global static routing so we can actually be routed across the star.}
1058   \textcolor{comment}{//}
1059   Ipv4GlobalRoutingHelper::PopulateRoutingTables ();
1060 
1061   \textcolor{comment}{// Trace receptions}
1062   \hyperlink{group__config_gaa2f896aa7021f95fffabc80b2ec22e08}{Config::ConnectWithoutContext} (\textcolor{stringliteral}{"
      /NodeList/0/ApplicationList/*/$ns3::PacketSink/Rx"}, 
1063                                  \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classCsmaStarTestCase_aec6f484651b37b82bb951a5daef88434}{CsmaStarTestCase::SinkRx}, \textcolor{keyword}{this}));
1064 
1065   Simulator::Run ();
1066   Simulator::Destroy ();
1067 
1068   \textcolor{comment}{// The hub node should have received 10 packets from the nFill + 1}
1069   \textcolor{comment}{// nodes on each spoke.}
1070   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classCsmaStarTestCase_a3b380689a4e0e523c13abbdffde06781}{m\_count}, 10 * ( nSpokes * (nFill + 1)), \textcolor{stringliteral}{"Hub node did
       not receive the proper number of packets"});
1071 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!Drop\+Event@{Drop\+Event}}
\index{Drop\+Event@{Drop\+Event}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\subsubsection[{\texorpdfstring{Drop\+Event(\+Ptr$<$ const Packet $>$ p)}{DropEvent(Ptr< const Packet > p)}}]{\setlength{\rightskip}{0pt plus 5cm}void Csma\+Star\+Test\+Case\+::\+Drop\+Event (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{p}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classCsmaStarTestCase_a0c12928e6a2d294360096a5d1e92a124}{}\label{classCsmaStarTestCase_a0c12928e6a2d294360096a5d1e92a124}

\begin{DoxyCode}
923 \{
924   \hyperlink{classCsmaStarTestCase_ac16da6db1bd8b8670a54805706850e48}{m\_drops}++;
925 \}
\end{DoxyCode}
\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!Sink\+Rx@{Sink\+Rx}}
\index{Sink\+Rx@{Sink\+Rx}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\subsubsection[{\texorpdfstring{Sink\+Rx(\+Ptr$<$ const Packet $>$ p, const Address \&ad)}{SinkRx(Ptr< const Packet > p, const Address &ad)}}]{\setlength{\rightskip}{0pt plus 5cm}void Csma\+Star\+Test\+Case\+::\+Sink\+Rx (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{p, }
\item[{const {\bf Address} \&}]{ad}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classCsmaStarTestCase_aec6f484651b37b82bb951a5daef88434}{}\label{classCsmaStarTestCase_aec6f484651b37b82bb951a5daef88434}

\begin{DoxyCode}
917 \{
918   \hyperlink{classCsmaStarTestCase_a3b380689a4e0e523c13abbdffde06781}{m\_count}++;
919 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 3




\subsection{Member Data Documentation}
\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!m\+\_\+count@{m\+\_\+count}}
\index{m\+\_\+count@{m\+\_\+count}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+count}{m_count}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Csma\+Star\+Test\+Case\+::m\+\_\+count\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classCsmaStarTestCase_a3b380689a4e0e523c13abbdffde06781}{}\label{classCsmaStarTestCase_a3b380689a4e0e523c13abbdffde06781}
\index{Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}!m\+\_\+drops@{m\+\_\+drops}}
\index{m\+\_\+drops@{m\+\_\+drops}!Csma\+Star\+Test\+Case@{Csma\+Star\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+drops}{m_drops}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Csma\+Star\+Test\+Case\+::m\+\_\+drops\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classCsmaStarTestCase_ac16da6db1bd8b8670a54805706850e48}{}\label{classCsmaStarTestCase_ac16da6db1bd8b8670a54805706850e48}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/\hyperlink{csma-system-test-suite_8cc}{csma-\/system-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
