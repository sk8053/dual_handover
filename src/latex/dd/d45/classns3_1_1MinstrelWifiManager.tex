\hypertarget{classns3_1_1MinstrelWifiManager}{}\section{ns3\+:\+:Minstrel\+Wifi\+Manager Class Reference}
\label{classns3_1_1MinstrelWifiManager}\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}


Implementation of Minstrel Rate Control Algorithm

Minstrel is a rate control algorithm implemented in Mad\+Wifi and Linux. The basic principle is to probe the environment and adapt the rate based on statistics collected on the probability of successful transmission. The algorithm adapts the rate to the highest rate that it considers successful, and spends a fraction of its time doing \textquotesingle{}look around\textquotesingle{} by trying other rates.  




{\ttfamily \#include $<$minstrel-\/wifi-\/manager.\+h$>$}



Inheritance diagram for ns3\+:\+:Minstrel\+Wifi\+Manager\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Minstrel\+Wifi\+Manager\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MinstrelWifiManager_aabb10b7ccc2f7298fe491b00880954f4}{Minstrel\+Wifi\+Manager} ()
\item 
virtual \hyperlink{classns3_1_1MinstrelWifiManager_a5da5b1d27a5ed91ae06490360c0932a1}{$\sim$\+Minstrel\+Wifi\+Manager} ()
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a0a2d2aaf96c2e8e07e4833dbc3e52fa0}{Setup\+Phy} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WifiPhy}{Wifi\+Phy} $>$ phy)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a739a54f771a5dcc9b52b8b66346280ad}{Setup\+Mac} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1WifiMac}{Wifi\+Mac} $>$ mac)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a19dcde28785f3ceddb317bfb77adc861}{Set\+Ht\+Supported} (bool enable)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_aa6111fd646d8a703510e771bc9befe6b}{Set\+Vht\+Supported} (bool enable)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a0c96447be5c42b8970702e669026c17d}{Set\+He\+Supported} (bool enable)
\item 
int64\+\_\+t \hyperlink{classns3_1_1MinstrelWifiManager_ac08c92ef99479ba0547a6ad7596f3a61}{Assign\+Streams} (int64\+\_\+t stream)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_ac77228ed9059e348e18e230835c64dad}{Update\+Rate} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a5702af5353375bbb7099b41b76fc7c21}{Update\+Stats} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelWifiManager_ac1a095648370f1330715968da032b139}{Find\+Rate} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} \hyperlink{classns3_1_1MinstrelWifiManager_afc42d002709fb4334ae5b164bfa07aa8}{Get\+Data\+Tx\+Vector} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} \hyperlink{classns3_1_1MinstrelWifiManager_a8643a7d64b0cebcdba66207e36c2b1c6}{Get\+Rts\+Tx\+Vector} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelWifiManager_af656a9f00fe648bdb8d5a758798a252f}{Count\+Retries} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_ac6a70510321a9f42af936e383c0e6865}{Update\+Packet\+Counters} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_af99109e3951c30e24f17519102959c81}{Update\+Retry} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}{Check\+Init} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_ab873a0ab43bec476e589db6b260e2ee5}{Init\+Sample\+Table} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1MinstrelWifiManager_a8b141ec57751ef251c719c47d25c4961}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::vector$<$ std\+::pair$<$ \hyperlink{classns3_1_1Time}{Time}, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} $>$ $>$ \hyperlink{classns3_1_1MinstrelWifiManager_a6130b5465b4427d329230812377e661c}{Tx\+Time}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$ \hyperlink{classns3_1_1MinstrelWifiManager_adfe1963316091a66ee491f1ccdfb6b22}{Do\+Create\+Station} (void) const 
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a17f33415c4143b0ac9c0fd94a998fc12}{Do\+Report\+Rx\+Ok} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station, double rx\+Snr, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} tx\+Mode)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_ad53e023c0acf9e4f92ef80b5d0195aed}{Do\+Report\+Rts\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_ad85c20d1c9c6fa2f77a92bef7575de53}{Do\+Report\+Data\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a9d17f4d2cbbc60904135b5287b28f41a}{Do\+Report\+Rts\+Ok} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station, double cts\+Snr, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} cts\+Mode, double rts\+Snr)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a70e12d7a6093a4867befb354c0f7c287}{Do\+Report\+Data\+Ok} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station, double ack\+Snr, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} ack\+Mode, double data\+Snr)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_af8adb24106e052258af3b82c829c1157}{Do\+Report\+Final\+Rts\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a6761121418977e63b958cac8c0ac698a}{Do\+Report\+Final\+Data\+Failed} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} \hyperlink{classns3_1_1MinstrelWifiManager_aea34c1267e390ce04c3b50bd6df69173}{Do\+Get\+Data\+Tx\+Vector} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} \hyperlink{classns3_1_1MinstrelWifiManager_a8284c7164c9e5813a9f377ad120f4e18}{Do\+Get\+Rts\+Tx\+Vector} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$station)
\item 
bool \hyperlink{classns3_1_1MinstrelWifiManager_ab321f4b099a4caf703b31e001671e36a}{Do\+Need\+Data\+Retransmission} (\hyperlink{structns3_1_1WifiRemoteStation}{Wifi\+Remote\+Station} $\ast$st, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, bool normally)
\item 
bool \hyperlink{classns3_1_1MinstrelWifiManager_a9df8c8eb858bb3e9eb223510e1861206}{Is\+Low\+Latency} (void) const 
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelWifiManager_a2d62faa20d151fd80b663fcefeaa63db}{Get\+Calc\+Tx\+Time} (\hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode) const 
\begin{DoxyCompactList}\small\item\em for estimating the Tx\+Time of a packet with a given mode \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a3be874da8d33b476f55ec0f2db03e4d3}{Add\+Calc\+Tx\+Time} (\hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} mode, \hyperlink{classns3_1_1Time}{Time} t)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a418f952e90b383f28fcf00f2bd816cb6}{Rate\+Init} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelWifiManager_a9dd13d606ef45228fd9d69f5f1aec6cc}{Get\+Next\+Sample} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelWifiManager_ab619fbd9813b4672149eaa5b0a9e8298}{Calculate\+Time\+Unicast\+Packet} (\hyperlink{classns3_1_1Time}{Time} data\+Transmission\+Time, uint32\+\_\+t short\+Retries, uint32\+\_\+t long\+Retries)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_a3d6d9c8bebe531a6437dd63fb25aea7b}{Print\+Sample\+Table} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\item 
void \hyperlink{classns3_1_1MinstrelWifiManager_ae0f9ad3c56685b57053b76180924a619}{Print\+Table} (\hyperlink{structns3_1_1MinstrelWifiRemoteStation}{Minstrel\+Wifi\+Remote\+Station} $\ast$station)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MinstrelWifiManager_a6130b5465b4427d329230812377e661c}{Tx\+Time} \hyperlink{classns3_1_1MinstrelWifiManager_a65d70d759a8699f6221159d4cdfee415}{m\+\_\+calc\+Tx\+Time}
\begin{DoxyCompactList}\small\item\em to hold all the calculated Tx\+Time for all modes \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1MinstrelWifiManager_abd6d6339afd6875826c0ffa11297ad65}{m\+\_\+update\+Stats}
\begin{DoxyCompactList}\small\item\em how frequent do we calculate the stats (1/10 seconds) \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1MinstrelWifiManager_aebf6e38fb43af62f59490829d46e0e1d}{m\+\_\+look\+Around\+Rate}
\begin{DoxyCompactList}\small\item\em the \% to try other rates than our current rate \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1MinstrelWifiManager_a528f4990b2e92f3b38ee1a4f764f0166}{m\+\_\+ewma\+Level}
\begin{DoxyCompactList}\small\item\em exponential weighted moving average \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}{m\+\_\+sample\+Col}
\begin{DoxyCompactList}\small\item\em number of sample columns \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1MinstrelWifiManager_a425848a251a8fc4db5d9acb2d8c21538}{m\+\_\+pkt\+Len}
\begin{DoxyCompactList}\small\item\em packet length used for calculate mode Tx\+Time \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1MinstrelWifiManager_a81802688a5cc3f6136f54264f2e3bcd5}{m\+\_\+print\+Stats}
\begin{DoxyCompactList}\small\item\em If statistics table should be printed. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1UniformRandomVariable}{Uniform\+Random\+Variable} $>$ \hyperlink{classns3_1_1MinstrelWifiManager_a63a489eb04c046ac3fe29b514d5eb028}{m\+\_\+uniform\+Random\+Variable}
\begin{DoxyCompactList}\small\item\em Provides uniform random variables. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ uint64\+\_\+t $>$ \hyperlink{classns3_1_1MinstrelWifiManager_aba1b46b41de3b8b0b4279d0c5adad57e}{m\+\_\+current\+Rate}
\begin{DoxyCompactList}\small\item\em Trace rate changes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Implementation of Minstrel Rate Control Algorithm

Minstrel is a rate control algorithm implemented in Mad\+Wifi and Linux. The basic principle is to probe the environment and adapt the rate based on statistics collected on the probability of successful transmission. The algorithm adapts the rate to the highest rate that it considers successful, and spends a fraction of its time doing \textquotesingle{}look around\textquotesingle{} by trying other rates. 

Minstrel is appropriate for non-\/\+H\+T/\+V\+H\+T/\+HE configurations; for H\+T/\+V\+H\+T/\+HE (i.\+e. 802.\+11n/ac/ax), users should use \hyperlink{classns3_1_1MinstrelHtWifiManager}{Minstrel\+Ht\+Wifi\+Manager} instead. Minstrel will error exit if the user tries to configure it with a Wi-\/\+Fi M\+AC that has Vht\+Supported, Ht\+Supported or He\+Supported set.

Some notes on this implementation follow. The implementation has been adapted to bring it closer to the Linux implementation. For each rate, a new parameter samples\+Skipped is added. This parameter is intended to solve an issue regarding the sampling of low rates when a high rate is working well, which leads to outdated statistics. This change makes throughput a bit lower in simple, stable scenarios, but may help in dynamic scenarios to react faster and more accurately to changes.

Related to the previous, the logic for deciding when to sample random rates is as follows. When a sample rate is deffered to the second M\+RR chain stage, a new parameter (num\+Samples\+Deferred) is increased. This paramters is used (jointly with sample\+Count) to compare current sample count with the lookaround rate.

Also related with sampling, another parameter sample\+Limit is added. This parameter limits the number of times a very low or very high probability rate is sampled, avoiding to try a poorly working sample rate too often.

When updating the E\+W\+MA probability of a rate for the first time, it does not apply E\+W\+MA but instead assigns the entire probability. Since the E\+W\+MA probability is initialized to zero, this generates a more accurate E\+W\+MA. 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Tx\+Time@{Tx\+Time}}
\index{Tx\+Time@{Tx\+Time}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Tx\+Time}{TxTime}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::vector$<$std\+::pair$<${\bf Time},{\bf Wifi\+Mode}$>$ $>$ {\bf ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Tx\+Time}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a6130b5465b4427d329230812377e661c}{}\label{classns3_1_1MinstrelWifiManager_a6130b5465b4427d329230812377e661c}
typedef for a vector of a pair of \hyperlink{classns3_1_1Time}{Time}, \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode}. (Essentially a list for \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} and its corresponding transmission time to transmit a reference packet. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Minstrel\+Wifi\+Manager@{Minstrel\+Wifi\+Manager}}
\index{Minstrel\+Wifi\+Manager@{Minstrel\+Wifi\+Manager}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Minstrel\+Wifi\+Manager()}{MinstrelWifiManager()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Minstrel\+Wifi\+Manager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_aabb10b7ccc2f7298fe491b00880954f4}{}\label{classns3_1_1MinstrelWifiManager_aabb10b7ccc2f7298fe491b00880954f4}

\begin{DoxyCode}
95   : \hyperlink{classns3_1_1WifiRemoteStationManager_a78524840f5900e1937e8e2d6df48954d}{WifiRemoteStationManager} (),
96     \hyperlink{classns3_1_1MinstrelWifiManager_aba1b46b41de3b8b0b4279d0c5adad57e}{m\_currentRate} (0)
97 \{
98   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
99   \hyperlink{classns3_1_1MinstrelWifiManager_a63a489eb04c046ac3fe29b514d5eb028}{m\_uniformRandomVariable} = CreateObject<UniformRandomVariable> ();
100 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!````~Minstrel\+Wifi\+Manager@{$\sim$\+Minstrel\+Wifi\+Manager}}
\index{````~Minstrel\+Wifi\+Manager@{$\sim$\+Minstrel\+Wifi\+Manager}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{$\sim$\+Minstrel\+Wifi\+Manager()}{~MinstrelWifiManager()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Minstrel\+Wifi\+Manager\+::$\sim$\+Minstrel\+Wifi\+Manager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a5da5b1d27a5ed91ae06490360c0932a1}{}\label{classns3_1_1MinstrelWifiManager_a5da5b1d27a5ed91ae06490360c0932a1}

\begin{DoxyCode}
103 \{
104   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
105 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Add\+Calc\+Tx\+Time@{Add\+Calc\+Tx\+Time}}
\index{Add\+Calc\+Tx\+Time@{Add\+Calc\+Tx\+Time}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Add\+Calc\+Tx\+Time(\+Wifi\+Mode mode, Time t)}{AddCalcTxTime(WifiMode mode, Time t)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Add\+Calc\+Tx\+Time (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Mode}}]{mode, }
\item[{{\bf Time}}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a3be874da8d33b476f55ec0f2db03e4d3}{}\label{classns3_1_1MinstrelWifiManager_a3be874da8d33b476f55ec0f2db03e4d3}
Add transmission time for the given mode to an internal list.


\begin{DoxyParams}{Parameters}
{\em mode} & Wi-\/\+Fi mode \\
\hline
{\em t} & transmission time \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
155 \{
156   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << mode << t);
157   \hyperlink{classns3_1_1MinstrelWifiManager_a65d70d759a8699f6221159d4cdfee415}{m\_calcTxTime}.push\_back (std::make\_pair (t, mode));
158 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 2


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Assign\+Streams@{Assign\+Streams}}
\index{Assign\+Streams@{Assign\+Streams}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Assign\+Streams(int64\+\_\+t stream)}{AssignStreams(int64_t stream)}}]{\setlength{\rightskip}{0pt plus 5cm}int64\+\_\+t ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Assign\+Streams (
\begin{DoxyParamCaption}
\item[{int64\+\_\+t}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_ac08c92ef99479ba0547a6ad7596f3a61}{}\label{classns3_1_1MinstrelWifiManager_ac08c92ef99479ba0547a6ad7596f3a61}
Assign a fixed random variable stream number to the random variables used by this model. Return the number of streams (possibly zero) that have been assigned.


\begin{DoxyParams}{Parameters}
{\em stream} & first stream index to use\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of stream indices assigned by this model 
\end{DoxyReturn}

\begin{DoxyCode}
132 \{
133   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << stream);
134   \hyperlink{classns3_1_1MinstrelWifiManager_a63a489eb04c046ac3fe29b514d5eb028}{m\_uniformRandomVariable}->\hyperlink{classns3_1_1RandomVariableStream_add11aaf975607746b7e271d300659a94}{SetStream} (stream);
135   \textcolor{keywordflow}{return} 1;
136 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Calculate\+Time\+Unicast\+Packet@{Calculate\+Time\+Unicast\+Packet}}
\index{Calculate\+Time\+Unicast\+Packet@{Calculate\+Time\+Unicast\+Packet}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Calculate\+Time\+Unicast\+Packet(\+Time data\+Transmission\+Time, uint32\+\_\+t short\+Retries, uint32\+\_\+t long\+Retries)}{CalculateTimeUnicastPacket(Time dataTransmissionTime, uint32_t shortRetries, uint32_t longRetries)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Calculate\+Time\+Unicast\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{data\+Transmission\+Time, }
\item[{uint32\+\_\+t}]{short\+Retries, }
\item[{uint32\+\_\+t}]{long\+Retries}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_ab619fbd9813b4672149eaa5b0a9e8298}{}\label{classns3_1_1MinstrelWifiManager_ab619fbd9813b4672149eaa5b0a9e8298}
Estimate the time to transmit the given packet with the given number of retries. This function is \char`\"{}roughly\char`\"{} the function \char`\"{}calc\+\_\+usecs\+\_\+unicast\+\_\+packet\char`\"{} in minstrel.\+c in the madwifi implementation.

The basic idea is that, we try to estimate the \char`\"{}average\char`\"{} time used to transmit the packet for the given number of retries while also accounting for the 802.\+11 congestion window change. The original code in the madwifi seems to estimate the number of backoff slots as the half of the current CW size.

There are four main parts\+:
\begin{DoxyItemize}
\item wait for D\+I\+FS (sense idle channel)
\item A\+CK timeouts
\item D\+A\+TA transmission
\item backoffs according to CW
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em data\+Transmission\+Time} & the data transmission time \\
\hline
{\em short\+Retries} & short retries \\
\hline
{\em long\+Retries} & long retries \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the unicast packet time 
\end{DoxyReturn}

\begin{DoxyCode}
948 \{
949   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << dataTransmissionTime << shortRetries << longRetries);
950   \textcolor{comment}{//See rc80211\_minstrel.c}
951 
952   \textcolor{comment}{//First transmission (DATA + ACK timeout)}
953   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} tt = dataTransmissionTime + \hyperlink{classns3_1_1WifiRemoteStationManager_a1739d7dbfba0b5d9539ba840426dfb78}{GetMac} ()->GetAckTimeout ();
954 
955   uint32\_t cwMax = 1023;
956   uint32\_t cw = 31;
957   \textcolor{keywordflow}{for} (uint32\_t retry = 0; retry < longRetries; retry++)
958     \{
959       \textcolor{comment}{//Add one re-transmission (DATA + ACK timeout)}
960       tt += dataTransmissionTime + \hyperlink{classns3_1_1WifiRemoteStationManager_a1739d7dbfba0b5d9539ba840426dfb78}{GetMac} ()->GetAckTimeout ();
961 
962       \textcolor{comment}{//Add average back off (half the current contention window)}
963       tt += \hyperlink{group__timecivil_ga281d64bcb4dad96267d83c7688ec433f}{NanoSeconds} ((cw / 2) * \hyperlink{classns3_1_1WifiRemoteStationManager_a1739d7dbfba0b5d9539ba840426dfb78}{GetMac} ()->GetSlot ());
964 
965       \textcolor{comment}{//Update contention window}
966       cw = \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (cwMax, (cw + 1) * 2);
967     \}
968 
969   \textcolor{keywordflow}{return} tt;
970 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Check\+Init@{Check\+Init}}
\index{Check\+Init@{Check\+Init}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Check\+Init(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{CheckInit(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Check\+Init (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}{}\label{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}
check for initializations


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
189 \{
190   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
191   \textcolor{keywordflow}{if} (!station->m\_initialized && \hyperlink{classns3_1_1WifiRemoteStationManager_a7316bf091ebad5b8cd1a8b5ee47554d8}{GetNSupported} (station) > 1)
192     \{
193       \textcolor{comment}{//Note: we appear to be doing late initialization of the table}
194       \textcolor{comment}{//to make sure that the set of supported rates has been initialized}
195       \textcolor{comment}{//before we perform our own initialization.}
196       station->m\_nModes = \hyperlink{classns3_1_1WifiRemoteStationManager_a7316bf091ebad5b8cd1a8b5ee47554d8}{GetNSupported} (station);
197       station->m\_minstrelTable = \hyperlink{namespacens3_a1d11c59469e45dbecea190a2a547b181}{MinstrelRate} (station->m\_nModes);
198       station->m\_sampleTable = \hyperlink{namespacens3_a6f9a56ecdb723c09bd5ab4f3b57a5bb5}{SampleRate} (station->m\_nModes, std::vector<uint32\_t> (
      \hyperlink{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}{m\_sampleCol}));
199       \hyperlink{classns3_1_1MinstrelWifiManager_ab873a0ab43bec476e589db6b260e2ee5}{InitSampleTable} (station);
200       \hyperlink{classns3_1_1MinstrelWifiManager_a418f952e90b383f28fcf00f2bd816cb6}{RateInit} (station);
201       station->m\_initialized = \textcolor{keyword}{true};
202       std::ostringstream tmp;
203       tmp << \textcolor{stringliteral}{"minstrel-stats-"} << station->m\_state->m\_address << \textcolor{stringliteral}{".txt"};
204       station->m\_statsFile.open (tmp.str ().c\_str (), std::ios::out);
205     \}
206 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Count\+Retries@{Count\+Retries}}
\index{Count\+Retries@{Count\+Retries}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Count\+Retries(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{CountRetries(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Count\+Retries (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_af656a9f00fe648bdb8d5a758798a252f}{}\label{classns3_1_1MinstrelWifiManager_af656a9f00fe648bdb8d5a758798a252f}
Count retries


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number if retries 
\end{DoxyReturn}

\begin{DoxyCode}
404 \{
405   \textcolor{keywordflow}{if} (!station->m\_isSampling)
406     \{
407       \textcolor{keywordflow}{return} station->m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount +
408              station->m\_minstrelTable[station->m\_maxTpRate2].adjustedRetryCount +
409              station->m\_minstrelTable[station->m\_maxProbRate].adjustedRetryCount +
410              station->m\_minstrelTable[0].adjustedRetryCount;
411     \}
412   \textcolor{keywordflow}{else}
413     \{
414       \textcolor{keywordflow}{return} station->m\_minstrelTable[station->m\_sampleRate].adjustedRetryCount +
415              station->m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount +
416              station->m\_minstrelTable[station->m\_maxProbRate].adjustedRetryCount +
417              station->m\_minstrelTable[0].adjustedRetryCount;
418     \}
419 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Create\+Station@{Do\+Create\+Station}}
\index{Do\+Create\+Station@{Do\+Create\+Station}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Create\+Station(void) const }{DoCreateStation(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Remote\+Station} $\ast$ ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Create\+Station (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_adfe1963316091a66ee491f1ccdfb6b22}{}\label{classns3_1_1MinstrelWifiManager_adfe1963316091a66ee491f1ccdfb6b22}
\begin{DoxyReturn}{Returns}
a new station data structure 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a63dfc98d85d14b9e6b6314c7648c6a7d}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
162 \{
163   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
164   MinstrelWifiRemoteStation *station = \textcolor{keyword}{new} MinstrelWifiRemoteStation ();
165 
166   station->m\_nextStatsUpdate = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1MinstrelWifiManager_abd6d6339afd6875826c0ffa11297ad65}{m\_updateStats};
167   station->m\_col = 0;
168   station->m\_index = 0;
169   station->m\_maxTpRate = 0;
170   station->m\_maxTpRate2 = 0;
171   station->m\_maxProbRate = 0;
172   station->m\_nModes = 0;
173   station->m\_totalPacketsCount = 0;
174   station->m\_samplePacketsCount = 0;
175   station->m\_isSampling = \textcolor{keyword}{false};
176   station->m\_sampleRate = 0;
177   station->m\_sampleDeferred = \textcolor{keyword}{false};
178   station->m\_shortRetry = 0;
179   station->m\_longRetry = 0;
180   station->m\_retry = 0;
181   station->m\_txrate = 0;
182   station->m\_initialized = \textcolor{keyword}{false};
183 
184   \textcolor{keywordflow}{return} station;
185 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Get\+Data\+Tx\+Vector@{Do\+Get\+Data\+Tx\+Vector}}
\index{Do\+Get\+Data\+Tx\+Vector@{Do\+Get\+Data\+Tx\+Vector}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Get\+Data\+Tx\+Vector(\+Wifi\+Remote\+Station $\ast$station)}{DoGetDataTxVector(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Tx\+Vector} ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Get\+Data\+Tx\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_aea34c1267e390ce04c3b50bd6df69173}{}\label{classns3_1_1MinstrelWifiManager_aea34c1267e390ce04c3b50bd6df69173}

\begin{DoxyParams}{Parameters}
{\em station} & the station that we need to communicate\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the T\+X\+V\+E\+C\+T\+OR to use to send a packet to the station
\end{DoxyReturn}
Note\+: This method is called before sending a unicast packet or a fragment of a unicast packet to decide which transmission mode to use. 

Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a5a6b2bfcd4959da43c54f0072bd01202}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
839 \{
840   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
841   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *) st;
842   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MinstrelWifiManager_afc42d002709fb4334ae5b164bfa07aa8}{GetDataTxVector} (station);
843 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Get\+Rts\+Tx\+Vector@{Do\+Get\+Rts\+Tx\+Vector}}
\index{Do\+Get\+Rts\+Tx\+Vector@{Do\+Get\+Rts\+Tx\+Vector}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Get\+Rts\+Tx\+Vector(\+Wifi\+Remote\+Station $\ast$station)}{DoGetRtsTxVector(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Tx\+Vector} ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Get\+Rts\+Tx\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a8284c7164c9e5813a9f377ad120f4e18}{}\label{classns3_1_1MinstrelWifiManager_a8284c7164c9e5813a9f377ad120f4e18}

\begin{DoxyParams}{Parameters}
{\em station} & the station that we need to communicate\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the transmission mode to use to send an rts to the station
\end{DoxyReturn}
Note\+: This method is called before sending an rts to a station to decide which transmission mode to use for the rts. 

Implements \hyperlink{classns3_1_1WifiRemoteStationManager_abf44eccb31d4b1b58644fd6721d132c9}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
847 \{
848   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
849   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *) st;
850   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MinstrelWifiManager_a8643a7d64b0cebcdba66207e36c2b1c6}{GetRtsTxVector} (station);
851 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Need\+Data\+Retransmission@{Do\+Need\+Data\+Retransmission}}
\index{Do\+Need\+Data\+Retransmission@{Do\+Need\+Data\+Retransmission}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Need\+Data\+Retransmission(\+Wifi\+Remote\+Station $\ast$st, Ptr$<$ const Packet $>$ packet, bool normally)}{DoNeedDataRetransmission(WifiRemoteStation *st, Ptr< const Packet > packet, bool normally)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Need\+Data\+Retransmission (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{packet, }
\item[{bool}]{normally}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_ab321f4b099a4caf703b31e001671e36a}{}\label{classns3_1_1MinstrelWifiManager_ab321f4b099a4caf703b31e001671e36a}

\begin{DoxyParams}{Parameters}
{\em station} & the station that we need to communicate \\
\hline
{\em packet} & the packet to send \\
\hline
{\em normally} & indicates whether the normal 802.\+11 data retransmission mechanism would request that the data is retransmitted or not. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if we want to resend a packet after a failed transmission attempt, false otherwise.
\end{DoxyReturn}
Note\+: This method is called after a unicast packet transmission has been attempted and has failed. 

Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_aaee2475c272acbdf7a1b2432fca4a5e4}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
855 \{
856   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st << packet << normally);
857   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *)st;
858 
859   \hyperlink{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}{CheckInit} (station);
860   \textcolor{keywordflow}{if} (!station->m\_initialized)
861     \{
862       \textcolor{keywordflow}{return} normally;
863     \}
864   \textcolor{keywordflow}{if} (station->m\_longRetry > \hyperlink{classns3_1_1MinstrelWifiManager_af656a9f00fe648bdb8d5a758798a252f}{CountRetries} (station))
865     \{
866       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
867     \}
868   \textcolor{keywordflow}{else}
869     \{
870       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
871     \}
872 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Report\+Data\+Failed@{Do\+Report\+Data\+Failed}}
\index{Do\+Report\+Data\+Failed@{Do\+Report\+Data\+Failed}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Data\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportDataFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Report\+Data\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_ad85c20d1c9c6fa2f77a92bef7575de53}{}\label{classns3_1_1MinstrelWifiManager_ad85c20d1c9c6fa2f77a92bef7575de53}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send D\+A\+TA \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a38a4401b6232cb547f5a85337e02b12c}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
731 \{
732   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
733   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *)st;
734   \hyperlink{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}{CheckInit} (station);
735   \textcolor{keywordflow}{if} (!station->m\_initialized)
736     \{
737       \textcolor{keywordflow}{return};
738     \}
739 
740   \hyperlink{classns3_1_1MinstrelWifiManager_ac77228ed9059e348e18e230835c64dad}{UpdateRate} (station);
741 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Report\+Data\+Ok@{Do\+Report\+Data\+Ok}}
\index{Do\+Report\+Data\+Ok@{Do\+Report\+Data\+Ok}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Data\+Ok(\+Wifi\+Remote\+Station $\ast$station, double ack\+Snr, Wifi\+Mode ack\+Mode, double data\+Snr)}{DoReportDataOk(WifiRemoteStation *station, double ackSnr, WifiMode ackMode, double dataSnr)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Report\+Data\+Ok (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{double}]{ack\+Snr, }
\item[{{\bf Wifi\+Mode}}]{ack\+Mode, }
\item[{double}]{data\+Snr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a70e12d7a6093a4867befb354c0f7c287}{}\label{classns3_1_1MinstrelWifiManager_a70e12d7a6093a4867befb354c0f7c287}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we successfully sent R\+TS \\
\hline
{\em ack\+Snr} & the S\+NR of the A\+CK we received \\
\hline
{\em ack\+Mode} & the \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} the receiver used to send the A\+CK \\
\hline
{\em data\+Snr} & the S\+NR of the D\+A\+TA we sent \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a9328ead6b0b4ad50fbd589b286a84c21}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
746 \{
747   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (st << ackSnr << ackMode << dataSnr);
748   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *) st;
749 
750   \hyperlink{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}{CheckInit} (station);
751   \textcolor{keywordflow}{if} (!station->m\_initialized)
752     \{
753       \textcolor{keywordflow}{return};
754     \}
755 
756   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportDataOk m\_txrate = "} << station->m\_txrate << \textcolor{stringliteral}{", attempt = "} << station
      ->m\_minstrelTable[station->m\_txrate].numRateAttempt << \textcolor{stringliteral}{", success = "} << station->m\_minstrelTable[station->
      m\_txrate].numRateSuccess << \textcolor{stringliteral}{" (before update)."});
757 
758   station->m\_minstrelTable[station->m\_txrate].numRateSuccess++;
759   station->m\_minstrelTable[station->m\_txrate].numRateAttempt++;
760 
761   \hyperlink{classns3_1_1MinstrelWifiManager_ac6a70510321a9f42af936e383c0e6865}{UpdatePacketCounters} (station);
762 
763   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportDataOk m\_txrate = "} << station->m\_txrate << \textcolor{stringliteral}{", attempt = "} << station
      ->m\_minstrelTable[station->m\_txrate].numRateAttempt << \textcolor{stringliteral}{", success = "} << station->m\_minstrelTable[station->
      m\_txrate].numRateSuccess << \textcolor{stringliteral}{" (after update)."});
764 
765   \hyperlink{classns3_1_1MinstrelWifiManager_af99109e3951c30e24f17519102959c81}{UpdateRetry} (station);
766   \hyperlink{classns3_1_1MinstrelWifiManager_a5702af5353375bbb7099b41b76fc7c21}{UpdateStats} (station);
767 
768   \textcolor{keywordflow}{if} (station->m\_nModes >= 1)
769     \{
770       station->m\_txrate = \hyperlink{classns3_1_1MinstrelWifiManager_ac1a095648370f1330715968da032b139}{FindRate} (station);
771     \}
772 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Report\+Final\+Data\+Failed@{Do\+Report\+Final\+Data\+Failed}}
\index{Do\+Report\+Final\+Data\+Failed@{Do\+Report\+Final\+Data\+Failed}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Final\+Data\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportFinalDataFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Report\+Final\+Data\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a6761121418977e63b958cac8c0ac698a}{}\label{classns3_1_1MinstrelWifiManager_a6761121418977e63b958cac8c0ac698a}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send D\+A\+TA \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a32e2a7a9f651b5224b5c037c14598cf7}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
776 \{
777   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
778   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *) st;
779 
780   \hyperlink{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}{CheckInit} (station);
781   \textcolor{keywordflow}{if} (!station->m\_initialized)
782     \{
783       \textcolor{keywordflow}{return};
784     \}
785 
786   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportFinalDataFailed m\_txrate = "} << station->m\_txrate << \textcolor{stringliteral}{", attempt = "} <<
       station->m\_minstrelTable[station->m\_txrate].numRateAttempt << \textcolor{stringliteral}{", success = "} << station->m\_minstrelTable[
      station->m\_txrate].numRateSuccess << \textcolor{stringliteral}{" (before update)."});
787 
788   \hyperlink{classns3_1_1MinstrelWifiManager_ac6a70510321a9f42af936e383c0e6865}{UpdatePacketCounters} (station);
789 
790   \hyperlink{classns3_1_1MinstrelWifiManager_af99109e3951c30e24f17519102959c81}{UpdateRetry} (station);
791   \hyperlink{classns3_1_1MinstrelWifiManager_a5702af5353375bbb7099b41b76fc7c21}{UpdateStats} (station);
792 
793   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportFinalDataFailed m\_txrate = "} << station->m\_txrate << \textcolor{stringliteral}{", attempt = "} <<
       station->m\_minstrelTable[station->m\_txrate].numRateAttempt << \textcolor{stringliteral}{", success = "} << station->m\_minstrelTable[
      station->m\_txrate].numRateSuccess << \textcolor{stringliteral}{" (after update)."});
794 
795   \textcolor{keywordflow}{if} (station->m\_nModes >= 1)
796     \{
797       station->m\_txrate = \hyperlink{classns3_1_1MinstrelWifiManager_ac1a095648370f1330715968da032b139}{FindRate} (station);
798     \}
799 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Report\+Final\+Rts\+Failed@{Do\+Report\+Final\+Rts\+Failed}}
\index{Do\+Report\+Final\+Rts\+Failed@{Do\+Report\+Final\+Rts\+Failed}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Final\+Rts\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportFinalRtsFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Report\+Final\+Rts\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_af8adb24106e052258af3b82c829c1157}{}\label{classns3_1_1MinstrelWifiManager_af8adb24106e052258af3b82c829c1157}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send R\+TS \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_aed2a605fb30d7fc31638eae3f8ee7403}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
723 \{
724   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
725   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *)st;
726   \hyperlink{classns3_1_1MinstrelWifiManager_af99109e3951c30e24f17519102959c81}{UpdateRetry} (station);
727 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Report\+Rts\+Failed@{Do\+Report\+Rts\+Failed}}
\index{Do\+Report\+Rts\+Failed@{Do\+Report\+Rts\+Failed}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Rts\+Failed(\+Wifi\+Remote\+Station $\ast$station)}{DoReportRtsFailed(WifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Report\+Rts\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_ad53e023c0acf9e4f92ef80b5d0195aed}{}\label{classns3_1_1MinstrelWifiManager_ad53e023c0acf9e4f92ef80b5d0195aed}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we failed to send R\+TS \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_ab825ef773e7d251f0e157624a49c7041}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
706 \{
707   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
708   MinstrelWifiRemoteStation *station = (MinstrelWifiRemoteStation *)st;
709   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportRtsFailed m\_txrate="} << station->m\_txrate);
710 
711   station->m\_shortRetry++;
712 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Report\+Rts\+Ok@{Do\+Report\+Rts\+Ok}}
\index{Do\+Report\+Rts\+Ok@{Do\+Report\+Rts\+Ok}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Rts\+Ok(\+Wifi\+Remote\+Station $\ast$station, double cts\+Snr, Wifi\+Mode cts\+Mode, double rts\+Snr)}{DoReportRtsOk(WifiRemoteStation *station, double ctsSnr, WifiMode ctsMode, double rtsSnr)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Report\+Rts\+Ok (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{double}]{cts\+Snr, }
\item[{{\bf Wifi\+Mode}}]{cts\+Mode, }
\item[{double}]{rts\+Snr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a9d17f4d2cbbc60904135b5287b28f41a}{}\label{classns3_1_1MinstrelWifiManager_a9d17f4d2cbbc60904135b5287b28f41a}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that we successfully sent R\+TS \\
\hline
{\em cts\+Snr} & the S\+NR of the C\+TS we received \\
\hline
{\em cts\+Mode} & the \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} the receiver used to send the C\+TS \\
\hline
{\em rts\+Snr} & the S\+NR of the R\+TS we sent \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a33a010f86ce5e68ceda2a0abbf21b71e}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
716 \{
717   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st);
718   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"self="} << st << \textcolor{stringliteral}{" rts ok"});
719 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Do\+Report\+Rx\+Ok@{Do\+Report\+Rx\+Ok}}
\index{Do\+Report\+Rx\+Ok@{Do\+Report\+Rx\+Ok}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Do\+Report\+Rx\+Ok(\+Wifi\+Remote\+Station $\ast$station, double rx\+Snr, Wifi\+Mode tx\+Mode)}{DoReportRxOk(WifiRemoteStation *station, double rxSnr, WifiMode txMode)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Do\+Report\+Rx\+Ok (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Remote\+Station} $\ast$}]{station, }
\item[{double}]{rx\+Snr, }
\item[{{\bf Wifi\+Mode}}]{tx\+Mode}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a17f33415c4143b0ac9c0fd94a998fc12}{}\label{classns3_1_1MinstrelWifiManager_a17f33415c4143b0ac9c0fd94a998fc12}
This method is a pure virtual method that must be implemented by the sub-\/class. This allows different types of \hyperlink{classns3_1_1WifiRemoteStationManager}{Wifi\+Remote\+Station\+Manager} to respond differently,


\begin{DoxyParams}{Parameters}
{\em station} & the station that sent the D\+A\+TA to us \\
\hline
{\em rx\+Snr} & the S\+NR of the D\+A\+TA we received \\
\hline
{\em tx\+Mode} & the \hyperlink{classns3_1_1WifiMode}{Wifi\+Mode} the sender used to send the D\+A\+TA \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1WifiRemoteStationManager_ade990f17f78d8fc32c736b91a2557b25}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
700 \{
701   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << st << rxSnr << txMode);
702 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Find\+Rate@{Find\+Rate}}
\index{Find\+Rate@{Find\+Rate}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Find\+Rate(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{FindRate(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Find\+Rate (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_ac1a095648370f1330715968da032b139}{}\label{classns3_1_1MinstrelWifiManager_ac1a095648370f1330715968da032b139}
find a rate to use from Minstrel Table


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the rate 
\end{DoxyReturn}

\begin{DoxyCode}
423 \{
424   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
425 
426   \textcolor{keywordflow}{if} (station->m\_totalPacketsCount == 0)
427     \{
428       \textcolor{keywordflow}{return} 0;
429     \}
430 
431 
432   uint32\_t idx;
433 
434   \textcolor{keywordtype}{int} delta = (station->m\_totalPacketsCount * \hyperlink{classns3_1_1MinstrelWifiManager_aebf6e38fb43af62f59490829d46e0e1d}{m\_lookAroundRate} / 100) - (station->
      m\_samplePacketsCount + station->m\_numSamplesDeferred / 2);
435 
436   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Decide sampling. Delta: "} << delta << \textcolor{stringliteral}{" lookAroundRatio: "} <<  
      \hyperlink{classns3_1_1MinstrelWifiManager_aebf6e38fb43af62f59490829d46e0e1d}{m\_lookAroundRate});
437 
438   \textcolor{comment}{/* delta < 0: no sampling required */}
439   \textcolor{keywordflow}{if} (delta >= 0)
440     \{
441       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Search next sampling rate"});
442       \textcolor{keywordtype}{int} ratesSupported = station->m\_nModes;
443       \textcolor{keywordflow}{if} (delta > ratesSupported * 2)
444         \{
445           \textcolor{comment}{/* From Linux implementation:}
446 \textcolor{comment}{           * With multi-rate retry, not every planned sample}
447 \textcolor{comment}{           * attempt actually gets used, due to the way the retry}
448 \textcolor{comment}{           * chain is set up - [max\_tp,sample,prob,lowest] for}
449 \textcolor{comment}{           * sample\_rate < max\_tp.}
450 \textcolor{comment}{           *}
451 \textcolor{comment}{           * If there's too much sampling backlog and the link}
452 \textcolor{comment}{           * starts getting worse, minstrel would start bursting}
453 \textcolor{comment}{           * out lots of sampling frames, which would result}
454 \textcolor{comment}{           * in a large throughput loss. */}
455           station->m\_samplePacketsCount += (delta - ratesSupported * 2);
456         \}
457 
458       \textcolor{comment}{//now go through the table and find an index rate}
459       idx = \hyperlink{classns3_1_1MinstrelWifiManager_a9dd13d606ef45228fd9d69f5f1aec6cc}{GetNextSample} (station);
460 
461       \textcolor{comment}{//error check}
462       \textcolor{keywordflow}{if} (idx >= station->m\_nModes)
463         \{
464           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ALERT!!! ERROR"});
465         \}
466 
467       \textcolor{comment}{//set the rate that we're currently sampling}
468       station->m\_sampleRate = idx;
469 
470       \textcolor{comment}{/* From Linux implementation:}
471 \textcolor{comment}{       * Decide if direct ( 1st mrr stage) or indirect (2nd mrr stage)}
472 \textcolor{comment}{       * rate sampling method should be used.}
473 \textcolor{comment}{       * Respect such rates that are not sampled for 20 iterations.}
474 \textcolor{comment}{       */}
475       \textcolor{keywordflow}{if} ((station->m\_minstrelTable[idx].perfectTxTime > station->m\_minstrelTable[station->m\_maxTpRate].
      perfectTxTime)
476           && (station->m\_minstrelTable[idx].numSamplesSkipped < 20))
477         \{
478           \textcolor{comment}{// If the rate is slower and we have sample it enough, defer to second stage}
479           station->m\_sampleDeferred = \textcolor{keyword}{true};
480           station->m\_numSamplesDeferred++;
481 
482           \textcolor{comment}{//set flag that we are currently sampling}
483           station->m\_isSampling = \textcolor{keyword}{true};
484         \}
485       \textcolor{keywordflow}{else}
486         \{
487           \textcolor{comment}{// if samplieLimit is zero, then don't sample this rate}
488           \textcolor{keywordflow}{if} (!station->m\_minstrelTable[idx].sampleLimit)
489             \{
490               idx =  station->m\_maxTpRate;
491               station->m\_isSampling = \textcolor{keyword}{false};
492             \}
493           \textcolor{keywordflow}{else}
494             \{
495               \textcolor{comment}{//set flag that we are currently sampling}
496               station->m\_isSampling = \textcolor{keyword}{true};
497               \textcolor{keywordflow}{if} (station->m\_minstrelTable[idx].sampleLimit > 0)
498                 \{
499                   station->m\_minstrelTable[idx].sampleLimit--;
500                 \}
501             \}
502         \}
503 
504       \textcolor{comment}{//using the best rate instead}
505       \textcolor{keywordflow}{if} (station->m\_sampleDeferred)
506         \{
507           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The next look around rate is slower than the maximum throughput rate,
       continue with the maximum throughput rate: "} << station->m\_maxTpRate << \textcolor{stringliteral}{"("} << 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, station->m\_maxTpRate) << \textcolor{stringliteral}{")"});
508           idx =  station->m\_maxTpRate;
509         \}
510     \}
511   \textcolor{comment}{//continue using the best rate}
512   \textcolor{keywordflow}{else}
513     \{
514       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Continue using the maximum throughput rate: "} << station->m\_maxTpRate << \textcolor{stringliteral}{"
      ("} << \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, station->m\_maxTpRate) << \textcolor{stringliteral}{")"});
515       idx = station->m\_maxTpRate;
516     \}
517 
518   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Rate = "} << idx << \textcolor{stringliteral}{"("} << \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, idx) << \textcolor{stringliteral}{")"});
519 
520   \textcolor{keywordflow}{return} idx;
521 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17




Here is the caller graph for this function\+:
% FIG 18


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Get\+Calc\+Tx\+Time@{Get\+Calc\+Tx\+Time}}
\index{Get\+Calc\+Tx\+Time@{Get\+Calc\+Tx\+Time}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Calc\+Tx\+Time(\+Wifi\+Mode mode) const }{GetCalcTxTime(WifiMode mode) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Get\+Calc\+Tx\+Time (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Mode}}]{mode}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a2d62faa20d151fd80b663fcefeaa63db}{}\label{classns3_1_1MinstrelWifiManager_a2d62faa20d151fd80b663fcefeaa63db}


for estimating the Tx\+Time of a packet with a given mode 


\begin{DoxyCode}
140 \{
141   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << mode);
142   \textcolor{keywordflow}{for} (TxTime::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1MinstrelWifiManager_a65d70d759a8699f6221159d4cdfee415}{m\_calcTxTime}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1MinstrelWifiManager_a65d70d759a8699f6221159d4cdfee415}{m\_calcTxTime}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
143     \{
144       \textcolor{keywordflow}{if} (mode == \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second)
145         \{
146           \textcolor{keywordflow}{return} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first;
147         \}
148     \}
149   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\textcolor{keyword}{false});
150   \textcolor{keywordflow}{return} \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0);
151 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19




Here is the caller graph for this function\+:
% FIG 20


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Get\+Data\+Tx\+Vector@{Get\+Data\+Tx\+Vector}}
\index{Get\+Data\+Tx\+Vector@{Get\+Data\+Tx\+Vector}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Data\+Tx\+Vector(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{GetDataTxVector(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Tx\+Vector} ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Get\+Data\+Tx\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_afc42d002709fb4334ae5b164bfa07aa8}{}\label{classns3_1_1MinstrelWifiManager_afc42d002709fb4334ae5b164bfa07aa8}
Get data transmit vector


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} 
\end{DoxyReturn}

\begin{DoxyCode}
353 \{
354   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
355   uint32\_t channelWidth = \hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} (station);
356   \textcolor{keywordflow}{if} (channelWidth > 20 && channelWidth != 22)
357     \{
358       \textcolor{comment}{//avoid to use legacy rate adaptation algorithms for IEEE 802.11n/ac}
359       channelWidth = 20;
360     \}
361   \textcolor{keywordflow}{if} (!station->m\_initialized)
362     \{
363       \hyperlink{classns3_1_1MinstrelWifiManager_a5768fc5c0a32ee601e476d51b7cd8eec}{CheckInit} (station);
364 
365       \textcolor{comment}{//start the rate at half way}
366       station->m\_txrate = station->m\_nModes / 2;
367     \}
368   WifiMode mode = \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, station->m\_txrate);
369   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MinstrelWifiManager_aba1b46b41de3b8b0b4279d0c5adad57e}{m\_currentRate} != mode.GetDataRate (channelWidth))
370     \{
371       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"New datarate: "} << mode.GetDataRate (channelWidth));
372       \hyperlink{classns3_1_1MinstrelWifiManager_aba1b46b41de3b8b0b4279d0c5adad57e}{m\_currentRate} = mode.GetDataRate (channelWidth);
373     \}
374   \textcolor{keywordflow}{return} WifiTxVector (mode, \hyperlink{classns3_1_1WifiRemoteStationManager_acff2fc859ee6b4c66ea7a83dd075b5d6}{GetDefaultTxPowerLevel} (), 
      \hyperlink{classns3_1_1WifiRemoteStationManager_aac10b1403fb0bd670f8a8bd6d7e48304}{GetLongRetryCount} (station), \hyperlink{classns3_1_1WifiRemoteStationManager_a0f44967cbd7488baada4802ebc642110}{GetPreambleForTransmission} (mode, 
      \hyperlink{classns3_1_1WifiRemoteStationManager_ac9ccc8c514bd8d2af05c290e63461a2a}{GetAddress} (station)), 800, 1, 1, 0, channelWidth, \hyperlink{classns3_1_1WifiRemoteStationManager_a5421c8d510cb16eebeac9f2ea9dd73c3}{GetAggregation} (station), \textcolor{keyword}{false})
      ;
375 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21




Here is the caller graph for this function\+:
% FIG 22


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Get\+Next\+Sample@{Get\+Next\+Sample}}
\index{Get\+Next\+Sample@{Get\+Next\+Sample}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Next\+Sample(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{GetNextSample(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Get\+Next\+Sample (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a9dd13d606ef45228fd9d69f5f1aec6cc}{}\label{classns3_1_1MinstrelWifiManager_a9dd13d606ef45228fd9d69f5f1aec6cc}
getting the next sample from Sample Table


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the next sample 
\end{DoxyReturn}

\begin{DoxyCode}
883 \{
884   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
885   uint32\_t bitrate;
886   bitrate = station->m\_sampleTable[station->m\_index][station->m\_col];
887   station->m\_index++;
888 
889   \textcolor{comment}{//bookeeping for m\_index and m\_col variables}
890   \textcolor{keywordflow}{if} (station->m\_index > (station->m\_nModes - 2))
891     \{
892       station->m\_index = 0;
893       station->m\_col++;
894       \textcolor{keywordflow}{if} (station->m\_col >= \hyperlink{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}{m\_sampleCol})
895         \{
896           station->m\_col = 0;
897         \}
898     \}
899   \textcolor{keywordflow}{return} bitrate;
900 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 23


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Get\+Rts\+Tx\+Vector@{Get\+Rts\+Tx\+Vector}}
\index{Get\+Rts\+Tx\+Vector@{Get\+Rts\+Tx\+Vector}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Rts\+Tx\+Vector(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{GetRtsTxVector(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Wifi\+Tx\+Vector} ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Get\+Rts\+Tx\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_a8643a7d64b0cebcdba66207e36c2b1c6}{}\label{classns3_1_1MinstrelWifiManager_a8643a7d64b0cebcdba66207e36c2b1c6}
Get R\+TS transmit vector


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classns3_1_1WifiTxVector}{Wifi\+Tx\+Vector} 
\end{DoxyReturn}

\begin{DoxyCode}
379 \{
380   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
381   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoGetRtsMode m\_txrate="} << station->m\_txrate);
382   uint32\_t channelWidth = \hyperlink{classns3_1_1WifiRemoteStationManager_a918213c5b9fa629c4986f6d90521bbd4}{GetChannelWidth} (station);
383   \textcolor{keywordflow}{if} (channelWidth > 20 && channelWidth != 22)
384     \{
385       \textcolor{comment}{//avoid to use legacy rate adaptation algorithms for IEEE 802.11n/ac}
386       channelWidth = 20;
387     \}
388   WifiTxVector rtsTxVector;
389   WifiMode mode;
390   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1WifiRemoteStationManager_a2d3d93f08995e554960a177a52f90f2f}{GetUseNonErpProtection} () == \textcolor{keyword}{false})
391     \{
392       mode = \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, 0);
393     \}
394   \textcolor{keywordflow}{else}
395     \{
396       mode = \hyperlink{classns3_1_1WifiRemoteStationManager_a3df8f1931f1fce653e5990a2821b44c6}{GetNonErpSupported} (station, 0);
397     \}
398   rtsTxVector = WifiTxVector (mode, \hyperlink{classns3_1_1WifiRemoteStationManager_acff2fc859ee6b4c66ea7a83dd075b5d6}{GetDefaultTxPowerLevel} (), 
      \hyperlink{classns3_1_1WifiRemoteStationManager_ad61157a9a56cf668f3255730f6a416b2}{GetShortRetryCount} (station), \hyperlink{classns3_1_1WifiRemoteStationManager_a0f44967cbd7488baada4802ebc642110}{GetPreambleForTransmission} (mode,
       \hyperlink{classns3_1_1WifiRemoteStationManager_ac9ccc8c514bd8d2af05c290e63461a2a}{GetAddress} (station)), 800, 1, 1, 0, channelWidth, \hyperlink{classns3_1_1WifiRemoteStationManager_a5421c8d510cb16eebeac9f2ea9dd73c3}{GetAggregation} (station), \textcolor{keyword}{false})
      ;
399   \textcolor{keywordflow}{return} rtsTxVector;
400 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 24




Here is the caller graph for this function\+:
% FIG 25


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MinstrelWifiManager_a8b141ec57751ef251c719c47d25c4961}{}\label{classns3_1_1MinstrelWifiManager_a8b141ec57751ef251c719c47d25c4961}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
51 \{
52   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::MinstrelWifiManager"})
53     .SetParent<\hyperlink{classns3_1_1WifiRemoteStationManager_a78524840f5900e1937e8e2d6df48954d}{WifiRemoteStationManager}> ()
54     .SetGroupName (\textcolor{stringliteral}{"Wifi"})
55     .AddConstructor<\hyperlink{classns3_1_1MinstrelWifiManager_aabb10b7ccc2f7298fe491b00880954f4}{MinstrelWifiManager}> ()
56     .AddAttribute (\textcolor{stringliteral}{"UpdateStatistics"},
57                    \textcolor{stringliteral}{"The interval between updating statistics table "},
58                    TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.1)),
59                    MakeTimeAccessor (&\hyperlink{classns3_1_1MinstrelWifiManager_abd6d6339afd6875826c0ffa11297ad65}{MinstrelWifiManager::m\_updateStats})
      ,
60                    \hyperlink{group__time_ga7032965bd4afa578691d88c09e4481c1}{MakeTimeChecker} ())
61     .AddAttribute (\textcolor{stringliteral}{"LookAroundRate"},
62                    \textcolor{stringliteral}{"the percentage to try other rates"},
63                    DoubleValue (10),
64                    MakeDoubleAccessor (&\hyperlink{classns3_1_1MinstrelWifiManager_aebf6e38fb43af62f59490829d46e0e1d}{MinstrelWifiManager::m\_lookAroundRate}
      ),
65                    MakeDoubleChecker<double> ())
66     .AddAttribute (\textcolor{stringliteral}{"EWMA"},
67                    \textcolor{stringliteral}{"EWMA level"},
68                    DoubleValue (75),
69                    MakeDoubleAccessor (&\hyperlink{classns3_1_1MinstrelWifiManager_a528f4990b2e92f3b38ee1a4f764f0166}{MinstrelWifiManager::m\_ewmaLevel}),
70                    MakeDoubleChecker<double> ())
71     .AddAttribute (\textcolor{stringliteral}{"SampleColumn"},
72                    \textcolor{stringliteral}{"The number of columns used for sampling"},
73                    UintegerValue (10),
74                    MakeUintegerAccessor (&\hyperlink{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}{MinstrelWifiManager::m\_sampleCol})
      ,
75                    MakeUintegerChecker <uint32\_t> ())
76     .AddAttribute (\textcolor{stringliteral}{"PacketLength"},
77                    \textcolor{stringliteral}{"The packet length used for calculating mode TxTime"},
78                    UintegerValue (1200),
79                    MakeUintegerAccessor (&\hyperlink{classns3_1_1MinstrelWifiManager_a425848a251a8fc4db5d9acb2d8c21538}{MinstrelWifiManager::m\_pktLen}),
80                    MakeUintegerChecker <uint32\_t> ())
81     .AddAttribute (\textcolor{stringliteral}{"PrintStats"},
82                    \textcolor{stringliteral}{"Print statistics table"},
83                    BooleanValue (\textcolor{keyword}{false}),
84                    MakeBooleanAccessor (&\hyperlink{classns3_1_1MinstrelWifiManager_a81802688a5cc3f6136f54264f2e3bcd5}{MinstrelWifiManager::m\_printStats}
      ),
85                    MakeBooleanChecker ())
86     .AddTraceSource (\textcolor{stringliteral}{"Rate"},
87                      \textcolor{stringliteral}{"Traced value for rate changes (b/s)"},
88                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1MinstrelWifiManager_aba1b46b41de3b8b0b4279d0c5adad57e}{MinstrelWifiManager::m\_currentRate}),
89                      \textcolor{stringliteral}{"ns3::TracedValueCallback::Uint64"})
90   ;
91   \textcolor{keywordflow}{return} tid;
92 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 26


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Init\+Sample\+Table@{Init\+Sample\+Table}}
\index{Init\+Sample\+Table@{Init\+Sample\+Table}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Init\+Sample\+Table(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{InitSampleTable(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Init\+Sample\+Table (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_ab873a0ab43bec476e589db6b260e2ee5}{}\label{classns3_1_1MinstrelWifiManager_ab873a0ab43bec476e589db6b260e2ee5}
initialize Sample Table


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}
The next two lines basically tries to generate a random number between 0 and the number of available rates
\begin{DoxyCode}
974 \{
975   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"InitSampleTable="} << \textcolor{keyword}{this});
976 
977   station->m\_col = station->m\_index = 0;
978 
979   \textcolor{comment}{//for off-setting to make rates fall between 0 and nModes}
980   uint32\_t numSampleRates = station->m\_nModes;
981 
982   uint32\_t newIndex;
983   \textcolor{keywordflow}{for} (uint32\_t col = 0; col < \hyperlink{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}{m\_sampleCol}; col++)
984     \{
985       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numSampleRates; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++ )
986         \{
991           \textcolor{keywordtype}{int} uv = \hyperlink{classns3_1_1MinstrelWifiManager_a63a489eb04c046ac3fe29b514d5eb028}{m\_uniformRandomVariable}->\hyperlink{classns3_1_1RandomVariableStream_a66cd94e6305ce7f000f1a9ff0fcb9aef}{GetInteger} (0, numSampleRates)
      ;
992           newIndex = (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} + uv) % numSampleRates;
993 
994           \textcolor{comment}{//this loop is used for filling in other uninitialized places}
995           \textcolor{keywordflow}{while} (station->m\_sampleTable[newIndex][col] != 0)
996             \{
997               newIndex = (newIndex + 1) % station->m\_nModes;
998             \}
999           station->m\_sampleTable[newIndex][col] = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
1000         \}
1001     \}
1002 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27




Here is the caller graph for this function\+:
% FIG 28


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Is\+Low\+Latency@{Is\+Low\+Latency}}
\index{Is\+Low\+Latency@{Is\+Low\+Latency}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Is\+Low\+Latency(void) const }{IsLowLatency(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Is\+Low\+Latency (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a9df8c8eb858bb3e9eb223510e1861206}{}\label{classns3_1_1MinstrelWifiManager_a9df8c8eb858bb3e9eb223510e1861206}
\begin{DoxyReturn}{Returns}
whether this manager is a manager designed to work in low-\/latency environments.
\end{DoxyReturn}
Note\+: In this context, low vs high latency is defined in {\itshape I\+E\+EE 802.\+11 Rate Adaptation\+: A Practical Approach}, by M. Lacage, M.\+H. Manshaei, and T. Turletti. 

Implements \hyperlink{classns3_1_1WifiRemoteStationManager_a3b5ae71dce8e994b493ddfdb1d2f57f6}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
876 \{
877   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
878   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
879 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Print\+Sample\+Table@{Print\+Sample\+Table}}
\index{Print\+Sample\+Table@{Print\+Sample\+Table}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Print\+Sample\+Table(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{PrintSampleTable(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Print\+Sample\+Table (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a3d6d9c8bebe531a6437dd63fb25aea7b}{}\label{classns3_1_1MinstrelWifiManager_a3d6d9c8bebe531a6437dd63fb25aea7b}
printing Sample Table


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1006 \{
1007   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"PrintSampleTable="} << station);
1008 
1009   uint32\_t numSampleRates = station->m\_nModes;
1010   std::stringstream table;
1011   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numSampleRates; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1012     \{
1013       \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}{m\_sampleCol}; j++)
1014         \{
1015           table << station->m\_sampleTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}][j] << \textcolor{stringliteral}{"\(\backslash\)t"};
1016         \}
1017       table << std::endl;
1018     \}
1019   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (table.str ());
1020 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Print\+Table@{Print\+Table}}
\index{Print\+Table@{Print\+Table}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Print\+Table(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{PrintTable(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Print\+Table (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_ae0f9ad3c56685b57053b76180924a619}{}\label{classns3_1_1MinstrelWifiManager_ae0f9ad3c56685b57053b76180924a619}
printing Minstrel Table


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1024 \{
1025   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
1026   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"PrintTable="} << station);
1027 
1028   station->m\_statsFile << \textcolor{stringliteral}{"best   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_rate\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_    \_\_\_\_\_\_\_\_statistics\_\_\_\_\_\_\_\_   
       \_\_\_\_\_\_\_\_last\_\_\_\_\_\_\_    \_\_\_\_\_\_sum-of\_\_\_\_\_\_\_\_\(\backslash\)n"} <<
1029     \textcolor{stringliteral}{"rate  [      name       idx airtime max\_tp]  [avg(tp) avg(prob) sd(prob)]  [prob.|retry|suc|att] 
       [#success | #attempts]\(\backslash\)n"};
1030 
1031   uint32\_t maxTpRate = station->m\_maxTpRate;
1032   uint32\_t maxTpRate2 = station->m\_maxTpRate2;
1033   uint32\_t maxProbRate = station->m\_maxProbRate;
1034 
1035   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < station->m\_nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1036     \{
1037       RateInfo rate = station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
1038 
1039       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == maxTpRate)
1040         \{
1041           station->m\_statsFile << \textcolor{charliteral}{'A'};
1042         \}
1043       \textcolor{keywordflow}{else}
1044         \{
1045           station->m\_statsFile << \textcolor{charliteral}{' '};
1046         \}
1047       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == maxTpRate2)
1048         \{
1049           station->m\_statsFile << \textcolor{charliteral}{'B'};
1050         \}
1051       \textcolor{keywordflow}{else}
1052         \{
1053           station->m\_statsFile << \textcolor{charliteral}{' '};
1054         \}
1055       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == maxProbRate)
1056         \{
1057           station->m\_statsFile << \textcolor{charliteral}{'P'};
1058         \}
1059       \textcolor{keywordflow}{else}
1060         \{
1061           station->m\_statsFile << \textcolor{charliteral}{' '};
1062         \}
1063 
1064       \textcolor{keywordtype}{float} tmpTh = rate.throughput / 100000.0;
1065       station->m\_statsFile << \textcolor{stringliteral}{"   "} <<
1066         std::setw (17) << \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) << \textcolor{stringliteral}{"  "} <<
1067         std::setw (2) << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{"  "} <<
1068         std::setw (4) << rate.perfectTxTime.GetMicroSeconds () <<
1069         std::setw (8) << \textcolor{stringliteral}{"    -----    "} <<
1070         std::setw (8) << tmpTh << \textcolor{stringliteral}{"    "} <<
1071         std::setw (3) << rate.ewmaProb / 180 <<
1072         std::setw (3) << \textcolor{stringliteral}{"       ---      "} <<
1073         std::setw (3) << rate.prob / 180 << \textcolor{stringliteral}{"     "} <<
1074         std::setw (1) << rate.adjustedRetryCount << \textcolor{stringliteral}{"   "} <<
1075         std::setw (3) << rate.prevNumRateSuccess << \textcolor{stringliteral}{" "} <<
1076         std::setw (3) << rate.prevNumRateAttempt << \textcolor{stringliteral}{"   "} <<
1077         std::setw (9) << rate.successHist << \textcolor{stringliteral}{"   "} <<
1078         std::setw (9) << rate.attemptHist << \textcolor{stringliteral}{"\(\backslash\)n"};
1079     \}
1080   station->m\_statsFile << \textcolor{stringliteral}{"\(\backslash\)nTotal packet count:    ideal "} << station->m\_totalPacketsCount - station->
      m\_samplePacketsCount
1081                        << \textcolor{stringliteral}{"      lookaround "} << station->m\_samplePacketsCount << \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n"};
1082 
1083   station->m\_statsFile.flush ();
1084 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 29




Here is the caller graph for this function\+:
% FIG 30


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Rate\+Init@{Rate\+Init}}
\index{Rate\+Init@{Rate\+Init}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Rate\+Init(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{RateInit(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Rate\+Init (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a418f952e90b383f28fcf00f2bd816cb6}{}\label{classns3_1_1MinstrelWifiManager_a418f952e90b383f28fcf00f2bd816cb6}
initialize Minstrel Table


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
904 \{
905   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (station);
906 
907   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < station->m\_nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
908     \{
909       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Initializing rate index "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" "} << 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
910       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt = 0;
911       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess = 0;
912       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateSuccess = 0;
913       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateAttempt = 0;
914       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].successHist = 0;
915       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].attemptHist = 0;
916       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numSamplesSkipped = 0;
917       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prob = 0;
918       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb = 0;
919       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput = 0;
920       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].perfectTxTime = \hyperlink{classns3_1_1MinstrelWifiManager_a2d62faa20d151fd80b663fcefeaa63db}{GetCalcTxTime} (
      \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
921       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" perfectTxTime = "} << station->m\_minstrelTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].perfectTxTime);
922       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].retryCount = 1;
923       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].adjustedRetryCount = 1;
924       \textcolor{comment}{//Emulating minstrel.c::ath\_rate\_ctl\_reset}
925       \textcolor{comment}{//We only check from 2 to 10 retries. This guarantee that}
926       \textcolor{comment}{//at least one retry is permitter.}
927       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} totalTxTimeWithGivenRetries = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0); \textcolor{comment}{//tx\_time in minstrel.c}
928       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" Calculating the number of retries"});
929       \textcolor{keywordflow}{for} (uint32\_t retries = 2; retries < 11; retries++)
930         \{
931           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"  Checking "} << retries << \textcolor{stringliteral}{" retries"});
932           totalTxTimeWithGivenRetries = \hyperlink{classns3_1_1MinstrelWifiManager_ab619fbd9813b4672149eaa5b0a9e8298}{CalculateTimeUnicastPacket} (station->
      m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].perfectTxTime, 0, retries);
933           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"   totalTxTimeWithGivenRetries = "} << totalTxTimeWithGivenRetries);
934           \textcolor{keywordflow}{if} (totalTxTimeWithGivenRetries > \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (6))
935             \{
936               \textcolor{keywordflow}{break};
937             \}
938           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].sampleLimit = -1;
939           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].retryCount = retries;
940           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].adjustedRetryCount = retries;
941         \}
942     \}
943   \hyperlink{classns3_1_1MinstrelWifiManager_a5702af5353375bbb7099b41b76fc7c21}{UpdateStats} (station);
944 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 31




Here is the caller graph for this function\+:
% FIG 32


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Set\+He\+Supported@{Set\+He\+Supported}}
\index{Set\+He\+Supported@{Set\+He\+Supported}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Set\+He\+Supported(bool enable)}{SetHeSupported(bool enable)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Set\+He\+Supported (
\begin{DoxyParamCaption}
\item[{bool}]{enable}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a0c96447be5c42b8970702e669026c17d}{}\label{classns3_1_1MinstrelWifiManager_a0c96447be5c42b8970702e669026c17d}
Enable or disable HE capability support.


\begin{DoxyParams}{Parameters}
{\em enable} & enable or disable HE capability support \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a18c218db519ceb78e910b6184a4e2992}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
1108 \{
1109   \textcolor{comment}{//HE is not supported by this algorithm.}
1110   \textcolor{keywordflow}{if} (enable)
1111     \{
1112       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"WifiRemoteStationManager selected does not support HE rates"});
1113     \}
1114 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Set\+Ht\+Supported@{Set\+Ht\+Supported}}
\index{Set\+Ht\+Supported@{Set\+Ht\+Supported}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Set\+Ht\+Supported(bool enable)}{SetHtSupported(bool enable)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Set\+Ht\+Supported (
\begin{DoxyParamCaption}
\item[{bool}]{enable}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a19dcde28785f3ceddb317bfb77adc861}{}\label{classns3_1_1MinstrelWifiManager_a19dcde28785f3ceddb317bfb77adc861}
Enable or disable HT capability support.


\begin{DoxyParams}{Parameters}
{\em enable} & enable or disable HT capability support \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a9078e641b9b16f237974d07d37d88af9}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
1088 \{
1089   \textcolor{comment}{//HT is not supported by this algorithm.}
1090   \textcolor{keywordflow}{if} (enable)
1091     \{
1092       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"WifiRemoteStationManager selected does not support HT rates"});
1093     \}
1094 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Setup\+Mac@{Setup\+Mac}}
\index{Setup\+Mac@{Setup\+Mac}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Setup\+Mac(\+Ptr$<$ Wifi\+Mac $>$ mac)}{SetupMac(Ptr< WifiMac > mac)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Setup\+Mac (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wifi\+Mac} $>$}]{mac}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a739a54f771a5dcc9b52b8b66346280ad}{}\label{classns3_1_1MinstrelWifiManager_a739a54f771a5dcc9b52b8b66346280ad}
Set up M\+AC associated with this device since it is the object that knows the full set of timing parameters (e.\+g. I\+FS).


\begin{DoxyParams}{Parameters}
{\em mac} & the M\+AC of this device \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a4e9a526ceb0023999870799817a06bb2}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
125 \{
126   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << mac);
127   \hyperlink{classns3_1_1WifiRemoteStationManager_a4e9a526ceb0023999870799817a06bb2}{WifiRemoteStationManager::SetupMac} (mac);
128 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 33


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Setup\+Phy@{Setup\+Phy}}
\index{Setup\+Phy@{Setup\+Phy}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Setup\+Phy(\+Ptr$<$ Wifi\+Phy $>$ phy)}{SetupPhy(Ptr< WifiPhy > phy)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Setup\+Phy (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Wifi\+Phy} $>$}]{phy}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_a0a2d2aaf96c2e8e07e4833dbc3e52fa0}{}\label{classns3_1_1MinstrelWifiManager_a0a2d2aaf96c2e8e07e4833dbc3e52fa0}
Set up P\+HY associated with this device since it is the object that knows the full set of transmit rates that are supported.


\begin{DoxyParams}{Parameters}
{\em phy} & the P\+HY of this device \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a823deffface82c9fe1daa06ce11c585b}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
109 \{
110   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << phy);
111   uint32\_t nModes = phy->\hyperlink{classns3_1_1WifiPhy_a2467e56b69d64bb2d648302f39397317}{GetNModes} ();
112   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
113     \{
114       WifiMode mode = phy->\hyperlink{classns3_1_1WifiPhy_ac35983a13a769a7fbaac43340b8cdaf2}{GetMode} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
115       WifiTxVector txVector;
116       txVector.SetMode (mode);
117       txVector.SetPreambleType (\hyperlink{group__wifi_gga5e94a56cb338a14ffbbb19c6a41251eba12f3d9468d1630bd38bbef20df1e3eda}{WIFI\_PREAMBLE\_LONG});
118       \hyperlink{classns3_1_1MinstrelWifiManager_a3be874da8d33b476f55ec0f2db03e4d3}{AddCalcTxTime} (mode, phy->\hyperlink{classns3_1_1WifiPhy_aee98c7241bb4f0bb8e6d90f5771dacc7}{CalculateTxDuration} (
      \hyperlink{classns3_1_1MinstrelWifiManager_a425848a251a8fc4db5d9acb2d8c21538}{m\_pktLen}, txVector, phy->\hyperlink{classns3_1_1WifiPhy_ad2508d94faf22d690d6b8b4367934fd1}{GetFrequency} ()));
119     \}
120   \hyperlink{classns3_1_1WifiRemoteStationManager_a823deffface82c9fe1daa06ce11c585b}{WifiRemoteStationManager::SetupPhy} (phy);
121 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 34


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Set\+Vht\+Supported@{Set\+Vht\+Supported}}
\index{Set\+Vht\+Supported@{Set\+Vht\+Supported}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Set\+Vht\+Supported(bool enable)}{SetVhtSupported(bool enable)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Set\+Vht\+Supported (
\begin{DoxyParamCaption}
\item[{bool}]{enable}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MinstrelWifiManager_aa6111fd646d8a703510e771bc9befe6b}{}\label{classns3_1_1MinstrelWifiManager_aa6111fd646d8a703510e771bc9befe6b}
Enable or disable V\+HT capability support.


\begin{DoxyParams}{Parameters}
{\em enable} & enable or disable V\+HT capability support \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classns3_1_1WifiRemoteStationManager_a149cf907f831f80e22162624a01f6c1a}{ns3\+::\+Wifi\+Remote\+Station\+Manager}.


\begin{DoxyCode}
1098 \{
1099   \textcolor{comment}{//VHT is not supported by this algorithm.}
1100   \textcolor{keywordflow}{if} (enable)
1101     \{
1102       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"WifiRemoteStationManager selected does not support VHT rates"});
1103     \}
1104 \}
\end{DoxyCode}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Update\+Packet\+Counters@{Update\+Packet\+Counters}}
\index{Update\+Packet\+Counters@{Update\+Packet\+Counters}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Packet\+Counters(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{UpdatePacketCounters(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Update\+Packet\+Counters (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_ac6a70510321a9f42af936e383c0e6865}{}\label{classns3_1_1MinstrelWifiManager_ac6a70510321a9f42af936e383c0e6865}
Update packet counters


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
803 \{
804   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
805 
806   station->m\_totalPacketsCount++;
807   \textcolor{comment}{// If it is a sampling frame and the sampleRate was used, increase counter}
808   \textcolor{keywordflow}{if} (station->m\_isSampling && (!station->m\_sampleDeferred || station->m\_longRetry >= station->
      m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount))
809     \{
810       station->m\_samplePacketsCount++;
811     \}
812 
813   \textcolor{keywordflow}{if} (station->m\_numSamplesDeferred > 0)
814     \{
815       station->m\_numSamplesDeferred--;
816     \}
817 
818   \textcolor{keywordflow}{if} (station->m\_totalPacketsCount == ~0)
819     \{
820       station->m\_numSamplesDeferred = 0;
821       station->m\_samplePacketsCount = 0;
822       station->m\_totalPacketsCount = 0;
823     \}
824   station->m\_isSampling = \textcolor{keyword}{false};
825   station->m\_sampleDeferred = \textcolor{keyword}{false};
826 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 35


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Update\+Rate@{Update\+Rate}}
\index{Update\+Rate@{Update\+Rate}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Rate(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{UpdateRate(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Update\+Rate (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_ac77228ed9059e348e18e230835c64dad}{}\label{classns3_1_1MinstrelWifiManager_ac77228ed9059e348e18e230835c64dad}
updating the rate


\begin{DoxyParams}{Parameters}
{\em station} & the station object\\
\hline
\end{DoxyParams}
Retry Chain table is implemented here

Try $\vert$ L\+O\+O\+K\+A\+R\+O\+U\+ND R\+A\+TE $\vert$ N\+O\+R\+M\+AL R\+A\+TE \subsubsection*{$\vert$ random $<$ best $\vert$ random $>$ best $\vert$ }

1 $\vert$ Best throughput $\vert$ Random rate $\vert$ Best throughput 2 $\vert$ Random rate $\vert$ Best throughput $\vert$ Next best throughput 3 $\vert$ Best probability $\vert$ Best probability $\vert$ Best probability 4 $\vert$ Lowest Baserate $\vert$ Lowest baserate $\vert$ Lowest baserate

Note\+: For clarity, multiple blocks of if\textquotesingle{}s and else\textquotesingle{}s are used After failing max retry times, Do\+Report\+Final\+Data\+Failed will be called 
\begin{DoxyCode}
225 \{
226   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
227   station->m\_longRetry++;
228   station->m\_minstrelTable[station->m\_txrate].numRateAttempt++;
229 
230   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"DoReportDataFailed "} << station << \textcolor{stringliteral}{" rate "} << station->m\_txrate << \textcolor{stringliteral}{"
       longRetry "} << station->m\_longRetry);
231 
232   \textcolor{comment}{//for normal rate, we're not currently sampling random rates}
233   \textcolor{keywordflow}{if} (!station->m\_isSampling)
234     \{
235       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Failed with normal rate: current="} << station->m\_txrate << \textcolor{stringliteral}{", sample="} << 
      station->m\_sampleRate << \textcolor{stringliteral}{", maxTp="} << station->m\_maxTpRate << \textcolor{stringliteral}{", maxTp2="} << station->m\_maxTpRate2 << \textcolor{stringliteral}{",
       maxProb="} << station->m\_maxProbRate);
236       \textcolor{comment}{//use best throughput rate}
237       \textcolor{keywordflow}{if} (station->m\_longRetry < station->m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount)
238         \{
239           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the maximum throughput rate."});
240           station->m\_txrate = station->m\_maxTpRate;
241         \}
242 
243       \textcolor{comment}{//use second best throughput rate}
244       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= (station->m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount +
245                                         station->m\_minstrelTable[station->m\_maxTpRate2].adjustedRetryCount)
      )
246         \{
247           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the second maximum throughput rate."});
248           station->m\_txrate = station->m\_maxTpRate2;
249         \}
250 
251       \textcolor{comment}{//use best probability rate}
252       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= (station->m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount +
253                                         station->m\_minstrelTable[station->m\_maxTpRate2].adjustedRetryCount 
      +
254                                         station->m\_minstrelTable[station->m\_maxProbRate].adjustedRetryCount
      ))
255         \{
256           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the maximum probability rate."});
257           station->m\_txrate = station->m\_maxProbRate;
258         \}
259 
260       \textcolor{comment}{//use lowest base rate}
261       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry > (station->m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount +
262                                        station->m\_minstrelTable[station->m\_maxTpRate2].adjustedRetryCount +
263                                        station->m\_minstrelTable[station->m\_maxProbRate].adjustedRetryCount)
      )
264         \{
265           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the base rate."});
266           station->m\_txrate = 0;
267         \}
268     \}
269 
270   \textcolor{comment}{//for look-around rate, we're currently sampling random rates}
271   \textcolor{keywordflow}{else}
272     \{
273       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Failed with look around rate: current="} << station->m\_txrate << \textcolor{stringliteral}{", sample=
      "} << station->m\_sampleRate << \textcolor{stringliteral}{", maxTp="} << station->m\_maxTpRate << \textcolor{stringliteral}{", maxTp2="} << station->m\_maxTpRate2 << \textcolor{stringliteral}{
      ", maxProb="} << station->m\_maxProbRate);
274       \textcolor{comment}{//current sampling rate is slower than the current best rate}
275       \textcolor{keywordflow}{if} (station->m\_sampleDeferred)
276         \{
277           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Look around rate is slower than the maximum throughput rate."});
278           \textcolor{comment}{//use best throughput rate}
279           \textcolor{keywordflow}{if} (station->m\_longRetry < station->m\_minstrelTable[station->m\_maxTpRate].adjustedRetryCount)
280             \{
281               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the maximum throughput rate."});
282               station->m\_txrate = station->m\_maxTpRate;
283             \}
284 
285           \textcolor{comment}{//use random rate}
286           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= (station->m\_minstrelTable[station->m\_maxTpRate].
      adjustedRetryCount +
287                                             station->m\_minstrelTable[station->m\_sampleRate].
      adjustedRetryCount))
288             \{
289               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the sampling rate."});
290               station->m\_txrate = station->m\_sampleRate;
291             \}
292 
293           \textcolor{comment}{//use max probability rate}
294           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= (station->m\_minstrelTable[station->m\_maxTpRate].
      adjustedRetryCount +
295                                             station->m\_minstrelTable[station->m\_sampleRate].
      adjustedRetryCount +
296                                             station->m\_minstrelTable[station->m\_maxProbRate].
      adjustedRetryCount ))
297             \{
298               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the maximum probability rate."});
299               station->m\_txrate = station->m\_maxProbRate;
300             \}
301 
302           \textcolor{comment}{//use lowest base rate}
303           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry > (station->m\_minstrelTable[station->m\_maxTpRate].
      adjustedRetryCount +
304                                            station->m\_minstrelTable[station->m\_sampleRate].
      adjustedRetryCount +
305                                            station->m\_minstrelTable[station->m\_maxProbRate].
      adjustedRetryCount))
306             \{
307               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the base rate."});
308               station->m\_txrate = 0;
309             \}
310         \}
311       \textcolor{comment}{//current sampling rate is better than current best rate}
312       \textcolor{keywordflow}{else}
313         \{
314           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Look around rate is faster than the maximum throughput rate."});
315           \textcolor{comment}{//use random rate}
316           \textcolor{keywordflow}{if} (station->m\_longRetry < station->m\_minstrelTable[station->m\_sampleRate].adjustedRetryCount)
317             \{
318               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the sampling rate."});
319               station->m\_txrate = station->m\_sampleRate;
320             \}
321 
322           \textcolor{comment}{//use the best throughput rate}
323           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= (station->m\_minstrelTable[station->m\_sampleRate].
      adjustedRetryCount +
324                                             station->m\_minstrelTable[station->m\_maxTpRate].
      adjustedRetryCount))
325             \{
326               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the maximum throughput rate."});
327               station->m\_txrate = station->m\_maxTpRate;
328             \}
329 
330           \textcolor{comment}{//use the best probability rate}
331           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry <= (station->m\_minstrelTable[station->m\_sampleRate].
      adjustedRetryCount +
332                                             station->m\_minstrelTable[station->m\_maxTpRate].
      adjustedRetryCount +
333                                             station->m\_minstrelTable[station->m\_maxProbRate].
      adjustedRetryCount))
334             \{
335               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the maximum probability rate."});
336               station->m\_txrate = station->m\_maxProbRate;
337             \}
338 
339           \textcolor{comment}{//use the lowest base rate}
340           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_longRetry > (station->m\_minstrelTable[station->m\_sampleRate].
      adjustedRetryCount +
341                                            station->m\_minstrelTable[station->m\_maxTpRate].
      adjustedRetryCount +
342                                            station->m\_minstrelTable[station->m\_maxProbRate].
      adjustedRetryCount))
343             \{
344               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{" More retries left for the base rate."});
345               station->m\_txrate = 0;
346             \}
347         \}
348     \}
349 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 36


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Update\+Retry@{Update\+Retry}}
\index{Update\+Retry@{Update\+Retry}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Retry(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{UpdateRetry(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Update\+Retry (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_af99109e3951c30e24f17519102959c81}{}\label{classns3_1_1MinstrelWifiManager_af99109e3951c30e24f17519102959c81}
update the number of retries and reset accordingly


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
830 \{
831   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
832   station->m\_retry = station->m\_shortRetry + station->m\_longRetry;
833   station->m\_shortRetry = 0;
834   station->m\_longRetry = 0;
835 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 37


\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!Update\+Stats@{Update\+Stats}}
\index{Update\+Stats@{Update\+Stats}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{Update\+Stats(\+Minstrel\+Wifi\+Remote\+Station $\ast$station)}{UpdateStats(MinstrelWifiRemoteStation *station)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Minstrel\+Wifi\+Manager\+::\+Update\+Stats (
\begin{DoxyParamCaption}
\item[{{\bf Minstrel\+Wifi\+Remote\+Station} $\ast$}]{station}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MinstrelWifiManager_a5702af5353375bbb7099b41b76fc7c21}{}\label{classns3_1_1MinstrelWifiManager_a5702af5353375bbb7099b41b76fc7c21}
updating the Minstrel Table every 1/10 seconds


\begin{DoxyParams}{Parameters}
{\em station} & the station object \\
\hline
\end{DoxyParams}
calculate the probability of success assume probability scales from 0 to 18000

See\+: \href{http://wireless.kernel.org/en/developers/Documentation/mac80211/RateControl/minstrel/}{\tt http\+://wireless.\+kernel.\+org/en/developers/\+Documentation/mac80211/\+Rate\+Control/minstrel/}

Analysis of information showed that the system was sampling too hard at some rates. For those rates that never work (54mb, 500m range) there is no point in retrying 10 sample packets ($<$ 6 ms time). Consequently, for the very low probability rates, we try at most twice when fails and not sample more than 4 times.
\begin{DoxyCode}
525 \{
526   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << station);
527   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () <  station->m\_nextStatsUpdate)
528     \{
529       \textcolor{keywordflow}{return};
530     \}
531 
532   \textcolor{keywordflow}{if} (!station->m\_initialized)
533     \{
534       \textcolor{keywordflow}{return};
535     \}
536   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
537   station->m\_nextStatsUpdate = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1MinstrelWifiManager_abd6d6339afd6875826c0ffa11297ad65}{m\_updateStats};
538   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Next update at "} << station->m\_nextStatsUpdate);
539   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Currently using rate: "} << station->m\_txrate << \textcolor{stringliteral}{" ("} << 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, station->m\_txrate) << \textcolor{stringliteral}{")"});
540 
541   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} txTime;
542   uint32\_t tempProb;
543 
544   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Index-Rate\(\backslash\)t\(\backslash\)tAttempt\(\backslash\)tSuccess"});
545   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < station->m\_nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
546     \{
547 
548       \textcolor{comment}{//calculate the perfect tx time for this rate}
549       txTime = station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].perfectTxTime;
550 
551       \textcolor{comment}{//just for initialization}
552       \textcolor{keywordflow}{if} (txTime.GetMicroSeconds () == 0)
553         \{
554           txTime = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1);
555         \}
556 
557       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" "} << \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) <<
558                     \textcolor{stringliteral}{"\(\backslash\)t"} << station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt <<
559                     \textcolor{stringliteral}{"\(\backslash\)t"} << station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess);
560 
561       \textcolor{comment}{//if we've attempted something}
562       \textcolor{keywordflow}{if} (station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt)
563         \{
564           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numSamplesSkipped = 0;
569           tempProb = (station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess * 18000) / station->m\_minstrelTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt;
570 
571           \textcolor{comment}{//bookeeping}
572           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prob = tempProb;
573 
574           \hyperlink{loss__ITU1238_8m_a419d895abe1313c35fa353c93802647e}{if} (station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].successHist == 0)
575             \{
576               station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb = tempProb;
577             \}
578           \textcolor{keywordflow}{else}
579             \{
580               \textcolor{comment}{//ewma probability (cast for gcc 3.4 compatibility)}
581               tempProb = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>} (((tempProb * (100 - \hyperlink{classns3_1_1MinstrelWifiManager_a528f4990b2e92f3b38ee1a4f764f0166}{m\_ewmaLevel})) + (station->
      m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb * \hyperlink{classns3_1_1MinstrelWifiManager_a528f4990b2e92f3b38ee1a4f764f0166}{m\_ewmaLevel}) ) / 100);
582 
583               station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb = tempProb;
584             \}
585 
586           \textcolor{comment}{//calculating throughput}
587           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput = tempProb * (1000000 / txTime.GetMicroSeconds ());
588 
589         \}
590       \textcolor{keywordflow}{else}
591         \{
592           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numSamplesSkipped++;
593         \}
594 
595       \textcolor{comment}{//bookeeping}
596       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].successHist += station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess;
597       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].attemptHist += station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt;
598       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateSuccess = station->m\_minstrelTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess;
599       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].prevNumRateAttempt = station->m\_minstrelTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt;
600       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateSuccess = 0;
601       station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].numRateAttempt = 0;
602 
603       \textcolor{comment}{//Sample less often below 10% and  above 95% of success}
604       \textcolor{keywordflow}{if} ((station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb > 17100) || (station->m\_minstrelTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb < 1800))
605         \{
613           \textcolor{keywordflow}{if} (station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].retryCount > 2)
614             \{
615               station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].adjustedRetryCount = 2;
616             \}
617           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].sampleLimit = 4;
618         \}
619       \textcolor{keywordflow}{else}
620         \{
621           \textcolor{comment}{// no sampling limit.}
622           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].sampleLimit = -1;
623           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].adjustedRetryCount = station->m\_minstrelTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].retryCount;
624         \}
625 
626       \textcolor{comment}{//if it's 0 allow two retries.}
627       \textcolor{keywordflow}{if} (station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].adjustedRetryCount == 0)
628         \{
629           station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].adjustedRetryCount = 2;
630         \}
631     \}
632 
633   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Attempt/success resetted to 0"});
634 
635   uint32\_t max\_tp = 0, index\_max\_tp = 0, index\_max\_tp2 = 0;
636 
637   \textcolor{comment}{//go find max throughput, second maximum throughput, high probability succ}
638   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Finding the maximum throughput, second maximum throughput, and highest
       probability"});
639   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Index-Rate\(\backslash\)t\(\backslash\)tT-put\(\backslash\)tEWMA"});
640   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < station->m\_nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
641     \{
642       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" "} << \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) <<
643                     \textcolor{stringliteral}{"\(\backslash\)t"} << station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput <<
644                     \textcolor{stringliteral}{"\(\backslash\)t"} << station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb);
645 
646       \textcolor{keywordflow}{if} (max\_tp < station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput)
647         \{
648           index\_max\_tp = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
649           max\_tp = station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput;
650         \}
651     \}
652 
653   max\_tp = 0;
654   \textcolor{comment}{//find the second highest max}
655   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < station->m\_nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
656     \{
657       \textcolor{keywordflow}{if} ((\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != index\_max\_tp) && (max\_tp < station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput))
658         \{
659           index\_max\_tp2 = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
660           max\_tp = station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput;
661         \}
662     \}
663 
664   uint32\_t max\_prob = 0, index\_max\_prob = 0;
665   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < station->m\_nModes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
666     \{
667       \textcolor{keywordflow}{if} ((station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb >= 95 * 180) && (station->m\_minstrelTable[
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].throughput >= station->m\_minstrelTable[index\_max\_prob].throughput))
668         \{
669           index\_max\_prob = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
670           max\_prob = station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb;
671         \}
672       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb >= max\_prob)
673         \{
674           index\_max\_prob = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
675           max\_prob = station->m\_minstrelTable[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].ewmaProb;
676         \}
677     \}
678 
679   station->m\_maxTpRate = index\_max\_tp;
680   station->m\_maxTpRate2 = index\_max\_tp2;
681   station->m\_maxProbRate = index\_max\_prob;
682 
683   \textcolor{keywordflow}{if} (index\_max\_tp > station->m\_txrate)
684     \{
685       station->m\_txrate = index\_max\_tp;
686     \}
687 
688   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"max throughput="} << index\_max\_tp << \textcolor{stringliteral}{"("} << 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, index\_max\_tp) <<
689                 \textcolor{stringliteral}{")\(\backslash\)tsecond max throughput="} << index\_max\_tp2 << \textcolor{stringliteral}{"("} << 
      \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, index\_max\_tp2) <<
690                 \textcolor{stringliteral}{")\(\backslash\)tmax prob="} << index\_max\_prob << \textcolor{stringliteral}{"("} << \hyperlink{classns3_1_1WifiRemoteStationManager_a995c8bae0d84b168fd3e8bc9ecaacdd4}{GetSupported} (station, 
      index\_max\_prob) << \textcolor{stringliteral}{")"});
691   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1MinstrelWifiManager_a81802688a5cc3f6136f54264f2e3bcd5}{m\_printStats})
692     \{
693       \hyperlink{classns3_1_1MinstrelWifiManager_ae0f9ad3c56685b57053b76180924a619}{PrintTable} (station);
694     \}
695 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 38




Here is the caller graph for this function\+:
% FIG 39




\subsection{Member Data Documentation}
\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+calc\+Tx\+Time@{m\+\_\+calc\+Tx\+Time}}
\index{m\+\_\+calc\+Tx\+Time@{m\+\_\+calc\+Tx\+Time}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+calc\+Tx\+Time}{m_calcTxTime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tx\+Time} ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+calc\+Tx\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a65d70d759a8699f6221159d4cdfee415}{}\label{classns3_1_1MinstrelWifiManager_a65d70d759a8699f6221159d4cdfee415}


to hold all the calculated Tx\+Time for all modes 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+current\+Rate@{m\+\_\+current\+Rate}}
\index{m\+\_\+current\+Rate@{m\+\_\+current\+Rate}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+current\+Rate}{m_currentRate}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<$uint64\+\_\+t$>$ ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+current\+Rate\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_aba1b46b41de3b8b0b4279d0c5adad57e}{}\label{classns3_1_1MinstrelWifiManager_aba1b46b41de3b8b0b4279d0c5adad57e}


Trace rate changes. 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+ewma\+Level@{m\+\_\+ewma\+Level}}
\index{m\+\_\+ewma\+Level@{m\+\_\+ewma\+Level}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+ewma\+Level}{m_ewmaLevel}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+ewma\+Level\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a528f4990b2e92f3b38ee1a4f764f0166}{}\label{classns3_1_1MinstrelWifiManager_a528f4990b2e92f3b38ee1a4f764f0166}


exponential weighted moving average 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+look\+Around\+Rate@{m\+\_\+look\+Around\+Rate}}
\index{m\+\_\+look\+Around\+Rate@{m\+\_\+look\+Around\+Rate}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+look\+Around\+Rate}{m_lookAroundRate}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+look\+Around\+Rate\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_aebf6e38fb43af62f59490829d46e0e1d}{}\label{classns3_1_1MinstrelWifiManager_aebf6e38fb43af62f59490829d46e0e1d}


the \% to try other rates than our current rate 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+pkt\+Len@{m\+\_\+pkt\+Len}}
\index{m\+\_\+pkt\+Len@{m\+\_\+pkt\+Len}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+pkt\+Len}{m_pktLen}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+pkt\+Len\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a425848a251a8fc4db5d9acb2d8c21538}{}\label{classns3_1_1MinstrelWifiManager_a425848a251a8fc4db5d9acb2d8c21538}


packet length used for calculate mode Tx\+Time 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+print\+Stats@{m\+\_\+print\+Stats}}
\index{m\+\_\+print\+Stats@{m\+\_\+print\+Stats}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+print\+Stats}{m_printStats}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+print\+Stats\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a81802688a5cc3f6136f54264f2e3bcd5}{}\label{classns3_1_1MinstrelWifiManager_a81802688a5cc3f6136f54264f2e3bcd5}


If statistics table should be printed. 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+sample\+Col@{m\+\_\+sample\+Col}}
\index{m\+\_\+sample\+Col@{m\+\_\+sample\+Col}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+sample\+Col}{m_sampleCol}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+sample\+Col\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}{}\label{classns3_1_1MinstrelWifiManager_a2112a731d89b8cd936a7f659aa678a15}


number of sample columns 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+uniform\+Random\+Variable@{m\+\_\+uniform\+Random\+Variable}}
\index{m\+\_\+uniform\+Random\+Variable@{m\+\_\+uniform\+Random\+Variable}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+uniform\+Random\+Variable}{m_uniformRandomVariable}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Uniform\+Random\+Variable}$>$ ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+uniform\+Random\+Variable\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_a63a489eb04c046ac3fe29b514d5eb028}{}\label{classns3_1_1MinstrelWifiManager_a63a489eb04c046ac3fe29b514d5eb028}


Provides uniform random variables. 

\index{ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}!m\+\_\+update\+Stats@{m\+\_\+update\+Stats}}
\index{m\+\_\+update\+Stats@{m\+\_\+update\+Stats}!ns3\+::\+Minstrel\+Wifi\+Manager@{ns3\+::\+Minstrel\+Wifi\+Manager}}
\subsubsection[{\texorpdfstring{m\+\_\+update\+Stats}{m_updateStats}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Minstrel\+Wifi\+Manager\+::m\+\_\+update\+Stats\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MinstrelWifiManager_abd6d6339afd6875826c0ffa11297ad65}{}\label{classns3_1_1MinstrelWifiManager_abd6d6339afd6875826c0ffa11297ad65}


how frequent do we calculate the stats (1/10 seconds) 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
wifi/model/\hyperlink{minstrel-wifi-manager_8h}{minstrel-\/wifi-\/manager.\+h}\item 
wifi/model/\hyperlink{minstrel-wifi-manager_8cc}{minstrel-\/wifi-\/manager.\+cc}\end{DoxyCompactItemize}
