\hypertarget{classns3_1_1MacTxMiddle}{}\section{ns3\+:\+:Mac\+Tx\+Middle Class Reference}
\label{classns3_1_1MacTxMiddle}\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}


{\ttfamily \#include $<$mac-\/tx-\/middle.\+h$>$}



Collaboration diagram for ns3\+:\+:Mac\+Tx\+Middle\+:
% FIG 0
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MacTxMiddle_ab55ef1d097603437bb6d3210db8fb65f}{Mac\+Tx\+Middle} ()
\item 
\hyperlink{classns3_1_1MacTxMiddle_a16daf84684222690ef1d14c2be9021d7}{$\sim$\+Mac\+Tx\+Middle} ()
\item 
uint16\+\_\+t \hyperlink{classns3_1_1MacTxMiddle_a791d277bf45e2b45b57b2fdb9417cc25}{Get\+Next\+Sequence\+Number\+For} (const \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} $\ast$hdr)
\item 
uint16\+\_\+t \hyperlink{classns3_1_1MacTxMiddle_a9ae98e7d98efae080431b7fe3b0a9a2d}{Peek\+Next\+Sequence\+Number\+For} (const \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} $\ast$hdr)
\item 
uint16\+\_\+t \hyperlink{classns3_1_1MacTxMiddle_ae25a26b35efc9a8f29f27d1348f8514c}{Get\+Next\+Seq\+Number\+By\+Tid\+And\+Address} (uint8\+\_\+t tid, \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} addr) const 
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ \hyperlink{classns3_1_1Mac48Address}{Mac48\+Address}, uint16\+\_\+t $\ast$ $>$ \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\+\_\+qos\+Sequences}
\begin{DoxyCompactList}\small\item\em Q\+OS sequences. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}{m\+\_\+sequence}
\begin{DoxyCompactList}\small\item\em current sequence number \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Handles sequence numbering of I\+E\+EE 802.\+11 data frames 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}!Mac\+Tx\+Middle@{Mac\+Tx\+Middle}}
\index{Mac\+Tx\+Middle@{Mac\+Tx\+Middle}!ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}
\subsubsection[{\texorpdfstring{Mac\+Tx\+Middle()}{MacTxMiddle()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mac\+Tx\+Middle\+::\+Mac\+Tx\+Middle (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacTxMiddle_ab55ef1d097603437bb6d3210db8fb65f}{}\label{classns3_1_1MacTxMiddle_ab55ef1d097603437bb6d3210db8fb65f}

\begin{DoxyCode}
33   : \hyperlink{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}{m\_sequence} (0)
34 \{
35   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
36 \}
\end{DoxyCode}
\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}!````~Mac\+Tx\+Middle@{$\sim$\+Mac\+Tx\+Middle}}
\index{````~Mac\+Tx\+Middle@{$\sim$\+Mac\+Tx\+Middle}!ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}
\subsubsection[{\texorpdfstring{$\sim$\+Mac\+Tx\+Middle()}{~MacTxMiddle()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mac\+Tx\+Middle\+::$\sim$\+Mac\+Tx\+Middle (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacTxMiddle_a16daf84684222690ef1d14c2be9021d7}{}\label{classns3_1_1MacTxMiddle_a16daf84684222690ef1d14c2be9021d7}

\begin{DoxyCode}
39 \{
40   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
41   \textcolor{keywordflow}{for} (std::map<Mac48Address,uint16\_t*>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.end (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
42     \{
43       \textcolor{keyword}{delete} [] \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second;
44     \}
45 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}!Get\+Next\+Seq\+Number\+By\+Tid\+And\+Address@{Get\+Next\+Seq\+Number\+By\+Tid\+And\+Address}}
\index{Get\+Next\+Seq\+Number\+By\+Tid\+And\+Address@{Get\+Next\+Seq\+Number\+By\+Tid\+And\+Address}!ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}
\subsubsection[{\texorpdfstring{Get\+Next\+Seq\+Number\+By\+Tid\+And\+Address(uint8\+\_\+t tid, Mac48\+Address addr) const }{GetNextSeqNumberByTidAndAddress(uint8_t tid, Mac48Address addr) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Mac\+Tx\+Middle\+::\+Get\+Next\+Seq\+Number\+By\+Tid\+And\+Address (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{tid, }
\item[{{\bf Mac48\+Address}}]{addr}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1MacTxMiddle_ae25a26b35efc9a8f29f27d1348f8514c}{}\label{classns3_1_1MacTxMiddle_ae25a26b35efc9a8f29f27d1348f8514c}
Return the next sequence number for the Traffic ID and destination.


\begin{DoxyParams}{Parameters}
{\em tid} & Traffic ID \\
\hline
{\em addr} & destination address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the next sequence number 
\end{DoxyReturn}

\begin{DoxyCode}
115 \{
116   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
117   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (tid < 16);
118   uint16\_t seq = 0;
119   std::map <Mac48Address,uint16\_t*>::const\_iterator it = \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.find (addr);
120   \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.end ())
121     \{
122       \textcolor{keywordflow}{return} it->second[tid];
123     \}
124   \textcolor{keywordflow}{return} seq;
125 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 1


\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}!Get\+Next\+Sequence\+Number\+For@{Get\+Next\+Sequence\+Number\+For}}
\index{Get\+Next\+Sequence\+Number\+For@{Get\+Next\+Sequence\+Number\+For}!ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}
\subsubsection[{\texorpdfstring{Get\+Next\+Sequence\+Number\+For(const Wifi\+Mac\+Header $\ast$hdr)}{GetNextSequenceNumberFor(const WifiMacHeader *hdr)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Mac\+Tx\+Middle\+::\+Get\+Next\+Sequence\+Number\+For (
\begin{DoxyParamCaption}
\item[{const {\bf Wifi\+Mac\+Header} $\ast$}]{hdr}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacTxMiddle_a791d277bf45e2b45b57b2fdb9417cc25}{}\label{classns3_1_1MacTxMiddle_a791d277bf45e2b45b57b2fdb9417cc25}
Return the next sequence number for the given header.


\begin{DoxyParams}{Parameters}
{\em hdr} & Wi-\/\+Fi header \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the next sequence number 
\end{DoxyReturn}

\begin{DoxyCode}
49 \{
50   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
51   uint16\_t retval;
52   \textcolor{keywordflow}{if} (hdr->IsQosData ()
53       && !hdr->GetAddr1 ().IsGroup ())
54     \{
55       uint8\_t tid = hdr->GetQosTid ();
56       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (tid < 16);
57       std::map<Mac48Address, uint16\_t*>::iterator it = \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.find (hdr->GetAddr1 ())
      ;
58       \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.end ())
59         \{
60           retval = it->second[tid];
61           it->second[tid]++;
62           it->second[tid] %= 4096;
63         \}
64       \textcolor{keywordflow}{else}
65         \{
66           retval = 0;
67           std::pair <Mac48Address,uint16\_t*> newSeq (hdr->GetAddr1 (), \textcolor{keyword}{new} uint16\_t[16]);
68           std::pair <std::map<Mac48Address,uint16\_t*>::iterator,\textcolor{keywordtype}{bool}> newIns = 
      \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.insert (newSeq);
69           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (newIns.second == \textcolor{keyword}{true});
70           \textcolor{keywordflow}{for} (uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 16; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
71             \{
72               newIns.first->second[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}] = 0;
73             \}
74           newIns.first->second[tid]++;
75         \}
76     \}
77   \textcolor{keywordflow}{else}
78     \{
79       retval = \hyperlink{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}{m\_sequence};
80       \hyperlink{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}{m\_sequence}++;
81       \hyperlink{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}{m\_sequence} %= 4096;
82     \}
83   \textcolor{keywordflow}{return} retval;
84 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}!Peek\+Next\+Sequence\+Number\+For@{Peek\+Next\+Sequence\+Number\+For}}
\index{Peek\+Next\+Sequence\+Number\+For@{Peek\+Next\+Sequence\+Number\+For}!ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}
\subsubsection[{\texorpdfstring{Peek\+Next\+Sequence\+Number\+For(const Wifi\+Mac\+Header $\ast$hdr)}{PeekNextSequenceNumberFor(const WifiMacHeader *hdr)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Mac\+Tx\+Middle\+::\+Peek\+Next\+Sequence\+Number\+For (
\begin{DoxyParamCaption}
\item[{const {\bf Wifi\+Mac\+Header} $\ast$}]{hdr}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MacTxMiddle_a9ae98e7d98efae080431b7fe3b0a9a2d}{}\label{classns3_1_1MacTxMiddle_a9ae98e7d98efae080431b7fe3b0a9a2d}
Return the next sequence number for the Traffic ID and destination, but do not pick it (i.\+e. the current sequence number remains unchanged). This functions is used for A-\/\+M\+P\+DU aggregation.


\begin{DoxyParams}{Parameters}
{\em hdr} & Wi-\/\+Fi header \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the next sequence number 
\end{DoxyReturn}

\begin{DoxyCode}
88 \{
89   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
90   uint16\_t retval;
91   \textcolor{keywordflow}{if} (hdr->IsQosData ()
92       && !hdr->GetAddr1 ().IsGroup ())
93     \{
94       uint8\_t tid = hdr->GetQosTid ();
95       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (tid < 16);
96       std::map<Mac48Address, uint16\_t*>::iterator it = \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.find (hdr->GetAddr1 ())
      ;
97       \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{m\_qosSequences}.end ())
98         \{
99           retval = it->second[tid];
100         \}
101       \textcolor{keywordflow}{else}
102         \{
103           retval = 0;
104         \}
105     \}
106   \textcolor{keywordflow}{else}
107     \{
108       retval = \hyperlink{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}{m\_sequence};
109     \}
110   \textcolor{keywordflow}{return} retval;
111 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5




\subsection{Member Data Documentation}
\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}!m\+\_\+qos\+Sequences@{m\+\_\+qos\+Sequences}}
\index{m\+\_\+qos\+Sequences@{m\+\_\+qos\+Sequences}!ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}
\subsubsection[{\texorpdfstring{m\+\_\+qos\+Sequences}{m_qosSequences}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Mac48\+Address},uint16\+\_\+t$\ast$$>$ ns3\+::\+Mac\+Tx\+Middle\+::m\+\_\+qos\+Sequences\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}{}\label{classns3_1_1MacTxMiddle_ac772ae494e77aa273bece9a75f002202}


Q\+OS sequences. 

\index{ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}!m\+\_\+sequence@{m\+\_\+sequence}}
\index{m\+\_\+sequence@{m\+\_\+sequence}!ns3\+::\+Mac\+Tx\+Middle@{ns3\+::\+Mac\+Tx\+Middle}}
\subsubsection[{\texorpdfstring{m\+\_\+sequence}{m_sequence}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Mac\+Tx\+Middle\+::m\+\_\+sequence\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}{}\label{classns3_1_1MacTxMiddle_a5b304f299ca20dc220dece4cab00d322}


current sequence number 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
wifi/model/\hyperlink{mac-tx-middle_8h}{mac-\/tx-\/middle.\+h}\item 
wifi/model/\hyperlink{mac-tx-middle_8cc}{mac-\/tx-\/middle.\+cc}\end{DoxyCompactItemize}
