\hypertarget{classGlobalRouteManagerImplTestCase}{}\section{Global\+Route\+Manager\+Impl\+Test\+Case Class Reference}
\label{classGlobalRouteManagerImplTestCase}\index{Global\+Route\+Manager\+Impl\+Test\+Case@{Global\+Route\+Manager\+Impl\+Test\+Case}}


Global Route Manager Test.  




Inheritance diagram for Global\+Route\+Manager\+Impl\+Test\+Case\+:
% FIG 0


Collaboration diagram for Global\+Route\+Manager\+Impl\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classGlobalRouteManagerImplTestCase_a70e31f146aeb56af61902bc017e438f2}{Global\+Route\+Manager\+Impl\+Test\+Case} ()
\item 
virtual void \hyperlink{classGlobalRouteManagerImplTestCase_aed56fd8ecbd7ecaa5473b9793d0befc1}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Global Route Manager Test. 

\subsection{Constructor \& Destructor Documentation}
\index{Global\+Route\+Manager\+Impl\+Test\+Case@{Global\+Route\+Manager\+Impl\+Test\+Case}!Global\+Route\+Manager\+Impl\+Test\+Case@{Global\+Route\+Manager\+Impl\+Test\+Case}}
\index{Global\+Route\+Manager\+Impl\+Test\+Case@{Global\+Route\+Manager\+Impl\+Test\+Case}!Global\+Route\+Manager\+Impl\+Test\+Case@{Global\+Route\+Manager\+Impl\+Test\+Case}}
\subsubsection[{\texorpdfstring{Global\+Route\+Manager\+Impl\+Test\+Case()}{GlobalRouteManagerImplTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Global\+Route\+Manager\+Impl\+Test\+Case\+::\+Global\+Route\+Manager\+Impl\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classGlobalRouteManagerImplTestCase_a70e31f146aeb56af61902bc017e438f2}{}\label{classGlobalRouteManagerImplTestCase_a70e31f146aeb56af61902bc017e438f2}

\begin{DoxyCode}
53   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"GlobalRouteManagerImplTestCase"})
54 \{
55 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Global\+Route\+Manager\+Impl\+Test\+Case@{Global\+Route\+Manager\+Impl\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Global\+Route\+Manager\+Impl\+Test\+Case@{Global\+Route\+Manager\+Impl\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Global\+Route\+Manager\+Impl\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classGlobalRouteManagerImplTestCase_aed56fd8ecbd7ecaa5473b9793d0befc1}{}\label{classGlobalRouteManagerImplTestCase_aed56fd8ecbd7ecaa5473b9793d0befc1}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. \begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000067}{Todo}]here we should do some verification of the routes built \end{DoxyRefDesc}


\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000068}{Todo}]Testing \end{DoxyRefDesc}


Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
58 \{
59   \hyperlink{classns3_1_1CandidateQueue}{CandidateQueue} candidate;
60 
61   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 100; ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
62     \{
63       \hyperlink{classns3_1_1SPFVertex}{SPFVertex} *v = \textcolor{keyword}{new} \hyperlink{classns3_1_1SPFVertex}{SPFVertex};
64       v->\hyperlink{classns3_1_1SPFVertex_a30885442cd0d8f7ae0e4690373b2c50a}{SetDistanceFromRoot} (std::rand () % 100);
65       candidate.\hyperlink{classns3_1_1CandidateQueue_a52f6bdb3651569f349f5e522ccc4d88f}{Push} (v);
66     \}
67 
68   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 100; ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
69     \{
70       \hyperlink{classns3_1_1SPFVertex}{SPFVertex} *v = candidate.\hyperlink{classns3_1_1CandidateQueue_a7a9b3855349e02e76cd6f67a556a2ac9}{Pop} ();
71       \textcolor{keyword}{delete} v;
72       v = 0;
73     \}
74 
75   \textcolor{comment}{// Build fake link state database; four routers (0-3), 3 point-to-point}
76   \textcolor{comment}{// links}
77   \textcolor{comment}{//}
78   \textcolor{comment}{//   n0}
79   \textcolor{comment}{//      \(\backslash\) link 0}
80   \textcolor{comment}{//       \(\backslash\)          link 2}
81   \textcolor{comment}{//        n2 -------------------------n3}
82   \textcolor{comment}{//       /}
83   \textcolor{comment}{//      / link 1}
84   \textcolor{comment}{//    n1}
85   \textcolor{comment}{//}
86   \textcolor{comment}{//  link0:  10.1.1.1/30, 10.1.1.2/30}
87   \textcolor{comment}{//  link1:  10.1.2.1/30, 10.1.2.2/30}
88   \textcolor{comment}{//  link2:  10.1.3.1/30, 10.1.3.2/30}
89   \textcolor{comment}{//}
90   \textcolor{comment}{// Router 0}
91   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr0 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
92       GlobalRoutingLinkRecord::PointToPoint,
93       \textcolor{stringliteral}{"0.0.0.2"}, \textcolor{comment}{// router ID 0.0.0.2}
94       \textcolor{stringliteral}{"10.1.1.1"}, \textcolor{comment}{// local ID}
95       1);       \textcolor{comment}{// metric}
96 
97   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr1 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
98       GlobalRoutingLinkRecord::StubNetwork,
99       \textcolor{stringliteral}{"10.1.1.1"},
100       \textcolor{stringliteral}{"255.255.255.252"},
101       1);
102 
103   \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA}* lsa0 = \textcolor{keyword}{new} \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA} ();
104   lsa0->\hyperlink{classns3_1_1GlobalRoutingLSA_a8f68a559296813ae47d5cabc5f566ddb}{SetLSType} (GlobalRoutingLSA::RouterLSA);
105   lsa0->\hyperlink{classns3_1_1GlobalRoutingLSA_af31bd5b6ff2fe784f3df4e5b921b4081}{SetLinkStateId} (\textcolor{stringliteral}{"0.0.0.0"});
106   lsa0->\hyperlink{classns3_1_1GlobalRoutingLSA_a97f6a00183d783cef4afb54c2216fa2f}{SetAdvertisingRouter} (\textcolor{stringliteral}{"0.0.0.0"});
107   lsa0->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr0);
108   lsa0->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr1);
109 
110   \textcolor{comment}{// Router 1}
111   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr2 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
112       GlobalRoutingLinkRecord::PointToPoint,
113       \textcolor{stringliteral}{"0.0.0.2"},
114       \textcolor{stringliteral}{"10.1.2.1"},
115       1);
116 
117   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr3 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
118       GlobalRoutingLinkRecord::StubNetwork,
119       \textcolor{stringliteral}{"10.1.2.1"},
120       \textcolor{stringliteral}{"255.255.255.252"},
121       1);
122 
123   \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA}* lsa1 = \textcolor{keyword}{new} \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA} ();
124   lsa1->\hyperlink{classns3_1_1GlobalRoutingLSA_a8f68a559296813ae47d5cabc5f566ddb}{SetLSType} (GlobalRoutingLSA::RouterLSA);
125   lsa1->\hyperlink{classns3_1_1GlobalRoutingLSA_af31bd5b6ff2fe784f3df4e5b921b4081}{SetLinkStateId} (\textcolor{stringliteral}{"0.0.0.1"});
126   lsa1->\hyperlink{classns3_1_1GlobalRoutingLSA_a97f6a00183d783cef4afb54c2216fa2f}{SetAdvertisingRouter} (\textcolor{stringliteral}{"0.0.0.1"});
127   lsa1->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr2);
128   lsa1->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr3);
129 
130   \textcolor{comment}{// Router 2 }
131   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr4 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
132       GlobalRoutingLinkRecord::PointToPoint,
133       \textcolor{stringliteral}{"0.0.0.0"},
134       \textcolor{stringliteral}{"10.1.1.2"},
135       1);
136 
137   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr5 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
138       GlobalRoutingLinkRecord::StubNetwork,
139       \textcolor{stringliteral}{"10.1.1.2"},
140       \textcolor{stringliteral}{"255.255.255.252"},
141       1);
142 
143   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr6 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
144       GlobalRoutingLinkRecord::PointToPoint,
145       \textcolor{stringliteral}{"0.0.0.1"},
146       \textcolor{stringliteral}{"10.1.2.2"},
147       1);
148 
149   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr7 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
150       GlobalRoutingLinkRecord::StubNetwork,
151       \textcolor{stringliteral}{"10.1.2.2"},
152       \textcolor{stringliteral}{"255.255.255.252"},
153       1);
154 
155   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr8 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
156       GlobalRoutingLinkRecord::PointToPoint,
157       \textcolor{stringliteral}{"0.0.0.3"},
158       \textcolor{stringliteral}{"10.1.3.2"},
159       1);
160 
161   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr9 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
162       GlobalRoutingLinkRecord::StubNetwork,
163       \textcolor{stringliteral}{"10.1.3.2"},
164       \textcolor{stringliteral}{"255.255.255.252"},
165       1);
166 
167   \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA}* lsa2 = \textcolor{keyword}{new} \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA} ();
168   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a8f68a559296813ae47d5cabc5f566ddb}{SetLSType} (GlobalRoutingLSA::RouterLSA);
169   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_af31bd5b6ff2fe784f3df4e5b921b4081}{SetLinkStateId} (\textcolor{stringliteral}{"0.0.0.2"});
170   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a97f6a00183d783cef4afb54c2216fa2f}{SetAdvertisingRouter} (\textcolor{stringliteral}{"0.0.0.2"});
171   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr4);
172   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr5);
173   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr6);
174   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr7);
175   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr8);
176   lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr9);
177 
178   \textcolor{comment}{// Router 3}
179   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr10 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
180       GlobalRoutingLinkRecord::PointToPoint,
181       \textcolor{stringliteral}{"0.0.0.2"},
182       \textcolor{stringliteral}{"10.1.2.1"},
183       1);
184 
185   \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord}* lr11 = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRoutingLinkRecord}{GlobalRoutingLinkRecord} (
186       GlobalRoutingLinkRecord::StubNetwork,
187       \textcolor{stringliteral}{"10.1.2.1"},
188       \textcolor{stringliteral}{"255.255.255.252"},
189       1);
190 
191   \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA}* lsa3 = \textcolor{keyword}{new} \hyperlink{classns3_1_1GlobalRoutingLSA}{GlobalRoutingLSA} ();
192   lsa3->\hyperlink{classns3_1_1GlobalRoutingLSA_a8f68a559296813ae47d5cabc5f566ddb}{SetLSType} (GlobalRoutingLSA::RouterLSA);
193   lsa3->\hyperlink{classns3_1_1GlobalRoutingLSA_af31bd5b6ff2fe784f3df4e5b921b4081}{SetLinkStateId} (\textcolor{stringliteral}{"0.0.0.3"});
194   lsa3->\hyperlink{classns3_1_1GlobalRoutingLSA_a97f6a00183d783cef4afb54c2216fa2f}{SetAdvertisingRouter} (\textcolor{stringliteral}{"0.0.0.3"});
195   lsa3->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr10);
196   lsa3->\hyperlink{classns3_1_1GlobalRoutingLSA_a2b2bdf9b121a61fe793c88ab216f4fb9}{AddLinkRecord} (lr11);
197 
198   \textcolor{comment}{// Test the database }
199   \hyperlink{classns3_1_1GlobalRouteManagerLSDB}{GlobalRouteManagerLSDB}* srmlsdb = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1GlobalRouteManagerLSDB}{GlobalRouteManagerLSDB} ();
200   srmlsdb->\hyperlink{classns3_1_1GlobalRouteManagerLSDB_a832fe8b5361c7b4f680edfd98763346d}{Insert} (lsa0->\hyperlink{classns3_1_1GlobalRoutingLSA_afc7dd85af408f8b9236bd73e1a78f5bd}{GetLinkStateId} (), lsa0);
201   srmlsdb->\hyperlink{classns3_1_1GlobalRouteManagerLSDB_a832fe8b5361c7b4f680edfd98763346d}{Insert} (lsa1->\hyperlink{classns3_1_1GlobalRoutingLSA_afc7dd85af408f8b9236bd73e1a78f5bd}{GetLinkStateId} (), lsa1);
202   srmlsdb->\hyperlink{classns3_1_1GlobalRouteManagerLSDB_a832fe8b5361c7b4f680edfd98763346d}{Insert} (lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_afc7dd85af408f8b9236bd73e1a78f5bd}{GetLinkStateId} (), lsa2);
203   srmlsdb->\hyperlink{classns3_1_1GlobalRouteManagerLSDB_a832fe8b5361c7b4f680edfd98763346d}{Insert} (lsa3->\hyperlink{classns3_1_1GlobalRoutingLSA_afc7dd85af408f8b9236bd73e1a78f5bd}{GetLinkStateId} (), lsa3);
204   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (lsa2 == srmlsdb->\hyperlink{classns3_1_1GlobalRouteManagerLSDB_a3504bf3573cc64a056835684c41e1aa5}{GetLSA} (lsa2->\hyperlink{classns3_1_1GlobalRoutingLSA_afc7dd85af408f8b9236bd73e1a78f5bd}{GetLinkStateId} ()));
205 
206   \textcolor{comment}{// next, calculate routes based on the manually created LSDB}
207   \hyperlink{classns3_1_1GlobalRouteManagerImpl}{GlobalRouteManagerImpl}* srm = \textcolor{keyword}{new} \hyperlink{classns3_1_1GlobalRouteManagerImpl}{GlobalRouteManagerImpl} ();
208   srm->\hyperlink{classns3_1_1GlobalRouteManagerImpl_a9e287c00be9cb2d6d5cbb1a7cbdb40e9}{DebugUseLsdb} (srmlsdb);  \textcolor{comment}{// manually add in an LSDB}
209   \textcolor{comment}{// Note-- this will succeed without any nodes in the topology}
210   \textcolor{comment}{// because the NodeList is empty}
211   srm->\hyperlink{classns3_1_1GlobalRouteManagerImpl_aaa692001ef22911e3483583b0de78909}{DebugSPFCalculate} (lsa0->\hyperlink{classns3_1_1GlobalRoutingLSA_afc7dd85af408f8b9236bd73e1a78f5bd}{GetLinkStateId} ());  \textcolor{comment}{// node n0}
212 
213   Simulator::Run ();
214 
216 
217   Simulator::Destroy ();
218 
219   \textcolor{comment}{// This delete clears the srm, which deletes the LSDB, which clears }
220   \textcolor{comment}{// all of the LSAs, which each destroys the attached LinkRecords.}
221   \textcolor{keyword}{delete} srm;
222 
224   \textcolor{comment}{// No testing has actually been done other than making sure that this code}
225   \textcolor{comment}{// does not crash}
226 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{global-route-manager-impl-test-suite_8cc}{global-\/route-\/manager-\/impl-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
