\hypertarget{lena-deactivate-bearer_8cc}{}\section{lte/examples/lena-\/deactivate-\/bearer.cc File Reference}
\label{lena-deactivate-bearer_8cc}\index{lte/examples/lena-\/deactivate-\/bearer.\+cc@{lte/examples/lena-\/deactivate-\/bearer.\+cc}}
{\ttfamily \#include \char`\"{}ns3/lte-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/epc-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/ipv4-\/global-\/routing-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/mobility-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/lte-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/applications-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/point-\/to-\/point-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/config-\/store.\+h\char`\"{}}\\*
Include dependency graph for lena-\/deactivate-\/bearer.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{lena-deactivate-bearer_8cc_a9198e83a9c99964ea75b01f03f92ebf0}{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Bearer\+Deactivate\+Example\char`\"{})
\item 
int \hyperlink{lena-deactivate-bearer_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{lena-\/deactivate-\/bearer.\+cc@{lena-\/deactivate-\/bearer.\+cc}!main@{main}}
\index{main@{main}!lena-\/deactivate-\/bearer.\+cc@{lena-\/deactivate-\/bearer.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{lena-deactivate-bearer_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{lena-deactivate-bearer_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
44 \{
45 
46   uint16\_t numberOfNodes = 1;
47   uint16\_t numberOfUeNodes = 3;
48   \textcolor{keywordtype}{double} simTime = 1.1;
49   \textcolor{keywordtype}{double} distance = 60.0;
50   \textcolor{keywordtype}{double} interPacketInterval = 100;
51 
52   \textcolor{comment}{// Command line arguments}
53   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
54   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"numberOfNodes"}, \textcolor{stringliteral}{"Number of eNodeBs + UE pairs"}, numberOfNodes);
55   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"simTime"}, \textcolor{stringliteral}{"Total duration of the simulation [s])"}, simTime);
56   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"distance"}, \textcolor{stringliteral}{"Distance between eNBs [m]"}, distance);
57   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"interPacketInterval"}, \textcolor{stringliteral}{"Inter packet interval [ms])"}, interPacketInterval);
58   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc, argv);
59 
60   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lteHelper = CreateObject<LteHelper> ();
61   \hyperlink{classns3_1_1Ptr}{Ptr<PointToPointEpcHelper>}  epcHelper = CreateObject<PointToPointEpcHelper> ();
62   lteHelper->\hyperlink{classns3_1_1LteHelper_a324079a1ccd54ce949786b83d6b95915}{SetEpcHelper} (epcHelper);
63 
64   \hyperlink{classns3_1_1ConfigStore}{ConfigStore} inputConfig;
65   inputConfig.\hyperlink{classns3_1_1ConfigStore_a0a6137574d7c847c3823af8b9d1bb886}{ConfigureDefaults} ();
66 
67   \textcolor{comment}{// parse again so you can override default values from the command line}
68   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc, argv);
69 
70   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} pgw = epcHelper->GetPgwNode ();
71 
72   \textcolor{comment}{// Enable Logging}
73   \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdb}{LogLevel} logLevel = (\hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdb}{LogLevel})(\hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba0dd332264f60317e9a365095e80037d1}{LOG\_PREFIX\_FUNC} | 
      \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba2b78ce26a040614a34c7d71db83024b9}{LOG\_PREFIX\_TIME} | \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba022b1237a4fd1b08d034471df3c58586}{LOG\_LEVEL\_ALL});
74 
75   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"BearerDeactivateExample"}, \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdba022b1237a4fd1b08d034471df3c58586}{LOG\_LEVEL\_ALL});
76   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"LteHelper"}, logLevel);
77   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"EpcHelper"}, logLevel);
78   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"EpcEnbApplication"}, logLevel);
79   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"EpcSgwPgwApplication"}, logLevel);
80   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"EpcMme"}, logLevel);
81   \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"LteEnbRrc"}, logLevel);
82 
83 
84   \textcolor{comment}{// Create a single RemoteHost}
85   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} remoteHostContainer;
86   remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
87   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} remoteHost = remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0);
88   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
89   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (remoteHostContainer);
90 
91   \textcolor{comment}{// Create the Internet}
92   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} p2ph;
93   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (\hyperlink{classns3_1_1DataRate}{DataRate} (\textcolor{stringliteral}{"100Gb/s"})));
94   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"Mtu"}, UintegerValue (1500));
95   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.010)));
96   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} internetDevices = p2ph.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (pgw, remoteHost);
97   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4h;
98   ipv4h.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"1.0.0.0"}, \textcolor{stringliteral}{"255.0.0.0"});
99   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} internetIpIfaces = ipv4h.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (internetDevices);
100   \textcolor{comment}{// interface 0 is localhost, 1 is the p2p device}
101   \hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} remoteHostAddr = internetIpIfaces.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (1);
102 
103   \hyperlink{classns3_1_1Ipv4StaticRoutingHelper}{Ipv4StaticRoutingHelper} ipv4RoutingHelper;
104   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} remoteHostStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (remoteHost->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());
105   remoteHostStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_a8bf5eaa7ba49fe33c78c70d5560b6c39}{AddNetworkRouteTo} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"7.0.0.0"}), 
      \hyperlink{classns3_1_1Ipv4Mask}{Ipv4Mask} (\textcolor{stringliteral}{"255.0.0.0"}), 1);
106 
107   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
108   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
109   enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (numberOfNodes);
110   ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (numberOfUeNodes);
111 
112   \textcolor{comment}{// Install Mobility Model}
113   \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} positionAlloc = CreateObject<ListPositionAllocator> 
      ();
114   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numberOfNodes; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
115     \{
116       positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (distance * \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}, 0, 0));
117     \}
118   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
119   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
120   mobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (positionAlloc);
121   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (enbNodes);
122   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (ueNodes);
123 
124   \textcolor{comment}{// Install LTE Devices to the nodes}
125   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbLteDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbNodes);
126   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueLteDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ueNodes);
127 
128   \textcolor{comment}{// Install the IP stack on the UEs}
129   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (ueNodes);
130   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ueIpIface;
131   ueIpIface = epcHelper->AssignUeIpv4Address (\hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} (ueLteDevs));
132   \textcolor{comment}{// Assign IP address to UEs, and install applications}
133   \textcolor{keywordflow}{for} (uint32\_t u = 0; u < ueNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} (); ++u)
134     \{
135       \hyperlink{classns3_1_1Ptr}{Ptr<Node>} ueNode = ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (u);
136       \textcolor{comment}{// Set the default gateway for the UE}
137       \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} ueStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (ueNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());
138       ueStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_aee30fa3246c2b42f122dabdff2725331}{SetDefaultRoute} (epcHelper->GetUeDefaultGatewayAddress (), 1);
139     \}
140 
141   \textcolor{comment}{// Attach a UE to a eNB}
142   lteHelper->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueLteDevs, enbLteDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
143 
144   \textcolor{comment}{// Activate an EPS bearer on all UEs}
145 
146   \textcolor{keywordflow}{for} (uint32\_t u = 0; u < ueNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} (); ++u)
147     \{
148       \hyperlink{classns3_1_1Ptr}{Ptr<NetDevice>} ueDevice = ueLteDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (u);
149       \hyperlink{structns3_1_1GbrQosInformation}{GbrQosInformation} qos;
150       qos.\hyperlink{structns3_1_1GbrQosInformation_a70b6106f5918d464d296bc23415ec801}{gbrDl} = 132;  \textcolor{comment}{// bit/s, considering IP, UDP, RLC, PDCP header size}
151       qos.\hyperlink{structns3_1_1GbrQosInformation_a8027f26c8fd5fd643d5af7a6a879860f}{gbrUl} = 132;
152       qos.\hyperlink{structns3_1_1GbrQosInformation_ac059dd3ad95475e8df63e52d9c2235e7}{mbrDl} = qos.\hyperlink{structns3_1_1GbrQosInformation_a70b6106f5918d464d296bc23415ec801}{gbrDl};
153       qos.\hyperlink{structns3_1_1GbrQosInformation_afce406e4f92771305075ace6cfe83e36}{mbrUl} = qos.\hyperlink{structns3_1_1GbrQosInformation_a8027f26c8fd5fd643d5af7a6a879860f}{gbrUl};
154 
155       \textcolor{keyword}{enum} \hyperlink{structns3_1_1EpsBearer_aecf0c67109c5eb4ec0b07226fff5885e}{EpsBearer::Qci} q = EpsBearer::GBR\_CONV\_VOICE;
156       \hyperlink{structns3_1_1EpsBearer}{EpsBearer} bearer (q, qos);
157       bearer.arp.priorityLevel = 15 - (u + 1);
158       bearer.arp.preemptionCapability = \textcolor{keyword}{true};
159       bearer.arp.preemptionVulnerability = \textcolor{keyword}{true};
160       lteHelper->\hyperlink{classns3_1_1LteHelper_af28041edd4c96bde1a2e07c90e363dcc}{ActivateDedicatedEpsBearer} (ueDevice, bearer, EpcTft::Default ()
      );
161     \}
162 
163 
164   \textcolor{comment}{// Install and start applications on UEs and remote host}
165   uint16\_t dlPort = 1234;
166   uint16\_t ulPort = 2000;
167   uint16\_t otherPort = 3000;
168   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} clientApps;
169   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} serverApps;
170   \textcolor{keywordflow}{for} (uint32\_t u = 0; u < ueNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} (); ++u)
171     \{
172       ++ulPort;
173       ++otherPort;
174       \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} dlPacketSinkHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), dlPort));
175       \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} ulPacketSinkHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), ulPort));
176       \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} packetSinkHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), otherPort));
177       serverApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (dlPacketSinkHelper.Install (ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (u)));
178       serverApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (ulPacketSinkHelper.Install (remoteHost));
179       serverApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (packetSinkHelper.Install (ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (u)));
180 
181       \hyperlink{classns3_1_1UdpClientHelper}{UdpClientHelper} dlClient (ueIpIface.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (u), dlPort);
182       dlClient.\hyperlink{classns3_1_1UdpClientHelper_a8bbae16a28f85ab3f3b5aa4642edfeae}{SetAttribute} (\textcolor{stringliteral}{"Interval"}, TimeValue (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (
      interPacketInterval)));
183       dlClient.SetAttribute (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (1000000));
184 
185       \hyperlink{classns3_1_1UdpClientHelper}{UdpClientHelper} ulClient (remoteHostAddr, ulPort);
186       ulClient.SetAttribute (\textcolor{stringliteral}{"Interval"}, TimeValue (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (interPacketInterval)));
187       ulClient.SetAttribute (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (1000000));
188 
189       \hyperlink{classns3_1_1UdpClientHelper}{UdpClientHelper} client (ueIpIface.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (u), otherPort);
190       client.\hyperlink{classns3_1_1UdpClientHelper_a8bbae16a28f85ab3f3b5aa4642edfeae}{SetAttribute} (\textcolor{stringliteral}{"Interval"}, TimeValue (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (interPacketInterval
      )));
191       client.SetAttribute (\textcolor{stringliteral}{"MaxPackets"}, UintegerValue (1000000));
192 
193       clientApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (dlClient.Install (remoteHost));
194       clientApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (ulClient.Install (ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (u)));
195       \textcolor{keywordflow}{if} (u + 1 < ueNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} ())
196         \{
197           clientApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (client.Install (ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (u + 1)));
198         \}
199       \textcolor{keywordflow}{else}
200         \{
201           clientApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (client.Install (ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0)));
202         \}
203     \}
204 
205   serverApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.030));
206   clientApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.030));
207 
208   \textcolor{keywordtype}{double} statsStartTime = 0.04; \textcolor{comment}{// need to allow for RRC connection establishment + SRS}
209   \textcolor{keywordtype}{double} statsDuration = 1.0;
210 
211   lteHelper->\hyperlink{classns3_1_1LteHelper_abadfdd04d30b261e9b6f0846b4784928}{EnableRlcTraces} ();
212   \hyperlink{classns3_1_1Ptr}{Ptr<RadioBearerStatsCalculator>} rlcStats = lteHelper->
      \hyperlink{classns3_1_1LteHelper_a6eb438ccf69642e3863adea4991fa2ca}{GetRlcStats} ();
213   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"StartTime"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsStartTime)));
214   rlcStats->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"EpochDuration"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (statsDuration)));
215 
216   \textcolor{comment}{//get ue device pointer for UE-ID 0 IMSI 1 and enb device pointer}
217   \hyperlink{classns3_1_1Ptr}{Ptr<NetDevice>} ueDevice = ueLteDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0);
218   \hyperlink{classns3_1_1Ptr}{Ptr<NetDevice>} enbDevice = enbLteDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0);
219 
220   \textcolor{comment}{/*}
221 \textcolor{comment}{   *   Instantiate De-activation using Simulator::Schedule() method which will initiate bearer
       de-activation after deActivateTime}
222 \textcolor{comment}{   *   Instantiate De-activation in sequence (Time const &time, MEM mem\_ptr, OBJ obj, T1 a1, T2 a2, T3 a3)}
223 \textcolor{comment}{   */}
224   \hyperlink{classns3_1_1Time}{Time} deActivateTime (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.5));
225   Simulator::Schedule (deActivateTime, &LteHelper::DeActivateDedicatedEpsBearer, lteHelper, ueDevice, 
      enbDevice, 2);
226 
227   \textcolor{comment}{//stop simulation after 3 seconds}
228   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (3.0));
229 
230   Simulator::Run ();
231   \textcolor{comment}{/*GtkConfigStore config;}
232 \textcolor{comment}{  config.ConfigureAttributes();*/}
233 
234   Simulator::Destroy ();
235   \textcolor{keywordflow}{return} 0;
236 
237 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{lena-\/deactivate-\/bearer.\+cc@{lena-\/deactivate-\/bearer.\+cc}!N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}}
\index{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}!lena-\/deactivate-\/bearer.\+cc@{lena-\/deactivate-\/bearer.\+cc}}
\subsubsection[{\texorpdfstring{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+N\+E(""Bearer\+Deactivate\+Example"")}{NS_LOG_COMPONENT_DEFINE("BearerDeactivateExample")}}]{\setlength{\rightskip}{0pt plus 5cm}N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE (
\begin{DoxyParamCaption}
\item[{\char`\"{}Bearer\+Deactivate\+Example\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{lena-deactivate-bearer_8cc_a9198e83a9c99964ea75b01f03f92ebf0}{}\label{lena-deactivate-bearer_8cc_a9198e83a9c99964ea75b01f03f92ebf0}
Sample simulation script for L\+T\+E+\+E\+PC. It instantiates one e\+NodeB, attaches three UE to e\+NodeB starts a flow for each UE to and from a remote host. It also instantiates one dedicated bearer per UE 