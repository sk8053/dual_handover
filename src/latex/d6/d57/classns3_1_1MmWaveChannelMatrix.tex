\hypertarget{classns3_1_1MmWaveChannelMatrix}{}\section{ns3\+:\+:Mm\+Wave\+Channel\+Matrix Class Reference}
\label{classns3_1_1MmWaveChannelMatrix}\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}


{\ttfamily \#include $<$mmwave-\/channel-\/matrix.\+h$>$}



Inheritance diagram for ns3\+:\+:Mm\+Wave\+Channel\+Matrix\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Mm\+Wave\+Channel\+Matrix\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MmWaveChannelMatrix_add4feba12917b68e698d28204e67b2cc}{Mm\+Wave\+Channel\+Matrix} ()
\item 
virtual \hyperlink{classns3_1_1MmWaveChannelMatrix_a078a11472a5d2fb7ad31315ba17a2930}{$\sim$\+Mm\+Wave\+Channel\+Matrix} ()
\item 
void \hyperlink{classns3_1_1MmWaveChannelMatrix_a7a20406655c992c2d0e2ffcb67646998}{Do\+Dispose} ()
\item 
void \hyperlink{classns3_1_1MmWaveChannelMatrix_a5ce6561e412404f9da4ef0cd4c6074b6}{Connect\+Devices} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ dev1, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ dev2)
\item 
void \hyperlink{classns3_1_1MmWaveChannelMatrix_ab33b65ac0dd3750c6b7856947150ec04}{Initial} (\hyperlink{classns3_1_1NetDeviceContainer}{Net\+Device\+Container} ue\+Devices, \hyperlink{classns3_1_1NetDeviceContainer}{Net\+Device\+Container} enb\+Devices)
\item 
void \hyperlink{classns3_1_1MmWaveChannelMatrix_ac296d6652dbde383f9c9b03494c1f8fe}{Set\+Configuration\+Parameters} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ ptr\+Config)
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_abd1ba6a33c5eb270875f54fabec7a19b}{Get\+Configuration\+Parameters} (void) const 
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_aa6524cfff31f5c6c2d8aca4915ff9f8d}{Calc\+Rx\+Power\+Spectral\+Density} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{tx\+Psd}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ a, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ \hyperlink{lte__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}) const 
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1MmWaveChannelMatrix_a7647e15736217d647c4d0d58fbe53612}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classns3_1_1MmWaveChannelMatrix_a6427b27c8ebd5fb5327c7403174caf31}{is\+Additional\+Mm\+Wave\+Phy} =\hyperlink{lte__cqi__generation_8m_ab1bef239d413c4da139c4bac92cd657a}{false}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_a707a28baf614560635774d0994a656f3}{Do\+Calc\+Rx\+Power\+Spectral\+Density} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{tx\+Psd}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ a, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ \hyperlink{lte__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}) const 
\item 
\hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2\+D\+Vector\+\_\+t} \hyperlink{classns3_1_1MmWaveChannelMatrix_a1395b9e11d00ccf0188e0b464a4b0fdb}{Gen\+Spatial\+Matrix} (std\+::vector$<$ uint16\+\_\+t $>$ cluster, \hyperlink{structns3_1_1Angles}{Angles} angle, uint8\+\_\+t $\ast$antenna\+Num) const 
\item 
\hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complex\+Vector\+\_\+t} \hyperlink{classns3_1_1MmWaveChannelMatrix_ae034ee8262dacddc18427ddbf21cb84b}{Gen\+Single\+Path} (double h\+Angle, double v\+Angle, uint8\+\_\+t $\ast$antenna\+Num) const 
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_a1c744518b5c26b1169cfc003c9662ee3}{Get\+Channel\+Gain} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{tx\+Psd}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{structns3_1_1mmWaveBeamFormingParams}{mm\+Wave\+Beam\+Forming\+Params} $>$ bf\+Params, double \hyperlink{mmwave-amc-test_8cc_a6dc6e6f3c75c509ce943163afb5dade7}{speed}) const 
\item 
double \hyperlink{classns3_1_1MmWaveChannelMatrix_a6a9cd8af5d1d6281329802644b8a3dd0}{Get\+System\+Bandwidth} () const 
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\+\_\+t}, int $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_a6c0f656e01119626c1f3887f0ba295e0}{m\+\_\+connected\+Pair}
\item 
std\+::map$<$ \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\+\_\+t}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{structns3_1_1ChannelParams}{Channel\+Params} $>$ $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_ad505ccb88c10f493fbba01d12732241f}{m\+\_\+channel\+Matrix\+Map}
\item 
double \hyperlink{classns3_1_1MmWaveChannelMatrix_a91d12a913567e33fc21fbc6275414008}{m\+\_\+antenna\+Separation}
\item 
double \hyperlink{classns3_1_1MmWaveChannelMatrix_a0111a9ed650a9e570974268aac7b2ef7}{m\+\_\+sub\+BW}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MmWaveChannelMatrix_a8ea4baeefad7cce0f0c702e93fd32d2b}{m\+\_\+num\+RB}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1MmWaveChannelMatrix_ad0bcea397bcd1f0a8f8487eadcab39b0}{m\+\_\+num\+S\+B\+Per\+RB}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1UniformRandomVariable}{Uniform\+Random\+Variable} $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\+\_\+uniform\+Rv}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1ExponentialRandomVariable}{Exponential\+Random\+Variable} $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_a7fee3ea2f2e3812df87e63e3baa743d0}{m\+\_\+exp\+Rv}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\+\_\+phy\+Mac\+Config}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Mm\+Wave\+Channel\+Matrix@{Mm\+Wave\+Channel\+Matrix}}
\index{Mm\+Wave\+Channel\+Matrix@{Mm\+Wave\+Channel\+Matrix}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Mm\+Wave\+Channel\+Matrix()}{MmWaveChannelMatrix()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Mm\+Wave\+Channel\+Matrix (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelMatrix_add4feba12917b68e698d28204e67b2cc}{}\label{classns3_1_1MmWaveChannelMatrix_add4feba12917b68e698d28204e67b2cc}

\begin{DoxyCode}
56         :\hyperlink{classns3_1_1MmWaveChannelMatrix_a91d12a913567e33fc21fbc6275414008}{m\_antennaSeparation}(0.5)
57 \{
58         \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv} = CreateObject<UniformRandomVariable> ();
59         \hyperlink{classns3_1_1MmWaveChannelMatrix_a7fee3ea2f2e3812df87e63e3baa743d0}{m\_expRv} = CreateObject<ExponentialRandomVariable> ();
60 
61 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!````~Mm\+Wave\+Channel\+Matrix@{$\sim$\+Mm\+Wave\+Channel\+Matrix}}
\index{````~Mm\+Wave\+Channel\+Matrix@{$\sim$\+Mm\+Wave\+Channel\+Matrix}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{$\sim$\+Mm\+Wave\+Channel\+Matrix()}{~MmWaveChannelMatrix()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::$\sim$\+Mm\+Wave\+Channel\+Matrix (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a078a11472a5d2fb7ad31315ba17a2930}{}\label{classns3_1_1MmWaveChannelMatrix_a078a11472a5d2fb7ad31315ba17a2930}

\begin{DoxyCode}
88 \{
89 
90 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Calc\+Rx\+Power\+Spectral\+Density@{Calc\+Rx\+Power\+Spectral\+Density}}
\index{Calc\+Rx\+Power\+Spectral\+Density@{Calc\+Rx\+Power\+Spectral\+Density}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Calc\+Rx\+Power\+Spectral\+Density(\+Ptr$<$ const Spectrum\+Value $>$ tx\+Psd, Ptr$<$ const Mobility\+Model $>$ a, Ptr$<$ const Mobility\+Model $>$ b) const }{CalcRxPowerSpectralDensity(Ptr< const SpectrumValue > txPsd, Ptr< const MobilityModel > a, Ptr< const MobilityModel > b) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Calc\+Rx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Spectrum\+Value} $>$}]{tx\+Psd, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{a, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{b}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1MmWaveChannelMatrix_aa6524cfff31f5c6c2d8aca4915ff9f8d}{}\label{classns3_1_1MmWaveChannelMatrix_aa6524cfff31f5c6c2d8aca4915ff9f8d}

\begin{DoxyCode}
638 \{
639         \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MmWaveChannelMatrix_a707a28baf614560635774d0994a656f3}{DoCalcRxPowerSpectralDensity}(\hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd}, a, 
      \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b});
640 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Connect\+Devices@{Connect\+Devices}}
\index{Connect\+Devices@{Connect\+Devices}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Connect\+Devices(\+Ptr$<$ Net\+Device $>$ dev1, Ptr$<$ Net\+Device $>$ dev2)}{ConnectDevices(Ptr< NetDevice > dev1, Ptr< NetDevice > dev2)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Connect\+Devices (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{dev1, }
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{dev2}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelMatrix_a5ce6561e412404f9da4ef0cd4c6074b6}{}\label{classns3_1_1MmWaveChannelMatrix_a5ce6561e412404f9da4ef0cd4c6074b6}

\begin{DoxyCode}
113 \{
114         \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\_t} key = std::make\_pair(dev1,dev2);
115 
116         std::map< key\_t, int >::iterator iter = \hyperlink{classns3_1_1MmWaveChannelMatrix_a6c0f656e01119626c1f3887f0ba295e0}{m\_connectedPair}.find(key);
117         \textcolor{keywordflow}{if} (iter != \hyperlink{classns3_1_1MmWaveChannelMatrix_a6c0f656e01119626c1f3887f0ba295e0}{m\_connectedPair}.end ())
118         \{
119                 \hyperlink{classns3_1_1MmWaveChannelMatrix_a6c0f656e01119626c1f3887f0ba295e0}{m\_connectedPair}.erase (iter);
120         \}
121         \hyperlink{classns3_1_1MmWaveChannelMatrix_a6c0f656e01119626c1f3887f0ba295e0}{m\_connectedPair}.insert(std::make\_pair(key,1));
122 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Do\+Calc\+Rx\+Power\+Spectral\+Density@{Do\+Calc\+Rx\+Power\+Spectral\+Density}}
\index{Do\+Calc\+Rx\+Power\+Spectral\+Density@{Do\+Calc\+Rx\+Power\+Spectral\+Density}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Do\+Calc\+Rx\+Power\+Spectral\+Density(\+Ptr$<$ const Spectrum\+Value $>$ tx\+Psd, Ptr$<$ const Mobility\+Model $>$ a, Ptr$<$ const Mobility\+Model $>$ b) const }{DoCalcRxPowerSpectralDensity(Ptr< const SpectrumValue > txPsd, Ptr< const MobilityModel > a, Ptr< const MobilityModel > b) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Do\+Calc\+Rx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Spectrum\+Value} $>$}]{tx\+Psd, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{a, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{b}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a707a28baf614560635774d0994a656f3}{}\label{classns3_1_1MmWaveChannelMatrix_a707a28baf614560635774d0994a656f3}

\begin{DoxyParams}{Parameters}
{\em tx\+Psd} & set of values Vs frequency representing the transmission power. See \hyperlink{classns3_1_1SpectrumChannel}{Spectrum\+Channel} for details. \\
\hline
{\em a} & sender mobility \\
\hline
{\em b} & receiver mobility\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
set of values Vs frequency representing the received power in the same units used for the tx\+Power parameter. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SpectrumPropagationLossModel_a84c0da581e8828ee013fe164a899e5c9}{ns3\+::\+Spectrum\+Propagation\+Loss\+Model}.


\begin{DoxyCode}
149 \{
150         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
151         Ptr<SpectrumValue> rxPsd = \hyperlink{namespacens3_a952d99f6d759fee74dda19f308451bc1}{Copy} (\hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd});
152         Ptr<AntennaArrayModel> txAntennaArray, rxAntennaArray;
153 
154         Ptr<NetDevice> txDevice = a->GetObject<Node> ()->GetDevice (0);
155         Ptr<NetDevice> rxDevice = \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}->GetObject<Node> ()->GetDevice (0);
156         Ptr<MmWaveEnbNetDevice> txEnb =
157                                         DynamicCast<MmWaveEnbNetDevice> (txDevice);
158         Ptr<MmWaveUeNetDevice> rxUe =
159                                         DynamicCast<MmWaveUeNetDevice> (rxDevice);
160 
161         uint8\_t txAntennaNum[2];
162         uint8\_t rxAntennaNum[2];
163 
164         \textcolor{keywordflow}{if}(txEnb!=0 && rxUe!=0)
165         \{
166                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is downlink case"});
167                 txAntennaNum[0] = sqrt (txEnb->GetAntennaNum ());
168                 txAntennaNum[1] = sqrt (txEnb->GetAntennaNum ());
169                 rxAntennaNum[0] = sqrt (rxUe->GetAntennaNum ());
170                 rxAntennaNum[1] = sqrt (rxUe->GetAntennaNum ());
171 
172                 txAntennaArray = DynamicCast<AntennaArrayModel> (
173                                         txEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
174                 rxAntennaArray = DynamicCast<AntennaArrayModel> (
175                                         rxUe->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
176         \}
177         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (txEnb!=0 && rxUe == 0)
178         \{
179                 Ptr<McUeNetDevice> mcRxUe = DynamicCast<McUeNetDevice> (rxDevice);
180                 \textcolor{keywordflow}{if} (mcRxUe != 0) 
181                 \{
182                         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is downlink case for MC device"});
183                         txAntennaNum[0] = sqrt (txEnb->GetAntennaNum ());
184                         txAntennaNum[1] = sqrt (txEnb->GetAntennaNum ());
185                         rxAntennaNum[0] = sqrt (mcRxUe->GetAntennaNum ());
186                         rxAntennaNum[1] = sqrt (mcRxUe->GetAntennaNum ());
187 
188                         txAntennaArray = DynamicCast<AntennaArrayModel> (
189                                                 txEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
190 
191                         \textcolor{keywordflow}{if}(\hyperlink{classns3_1_1MmWaveChannelMatrix_a6427b27c8ebd5fb5327c7403174caf31}{isAdditionalMmWavePhy}) \textcolor{comment}{//sjkang}
192                         rxAntennaArray = DynamicCast<AntennaArrayModel> (
193                                                 mcRxUe->GetMmWavePhy\_2 ()->GetDlSpectrumPhy ()->
      GetRxAntenna ());
194                         \textcolor{keywordflow}{else}
195                         rxAntennaArray = DynamicCast<AntennaArrayModel> (
196                                                 mcRxUe->GetMmWavePhy ()->GetDlSpectrumPhy ()->GetRxAntenna 
      ());
197                 \}
198         \}
199         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (txEnb==0 && rxUe==0 )
200         \{
201                 Ptr<MmWaveUeNetDevice> txUe =
202                                                 DynamicCast<MmWaveUeNetDevice> (txDevice);
203                 Ptr<MmWaveEnbNetDevice> rxEnb =
204                                                 DynamicCast<MmWaveEnbNetDevice> (rxDevice);
205                 \textcolor{keywordflow}{if} (txUe != 0)
206                 \{
207                         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is uplink case"});
208                         txAntennaNum[0] = sqrt (txUe->GetAntennaNum ());
209                         txAntennaNum[1] = sqrt (txUe->GetAntennaNum ());
210                         rxAntennaNum[0] = sqrt (rxEnb->GetAntennaNum ());
211                         rxAntennaNum[1] = sqrt (rxEnb->GetAntennaNum ());
212 
213                         txAntennaArray = DynamicCast<AntennaArrayModel> (
214                                                 txUe->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
215                         rxAntennaArray = DynamicCast<AntennaArrayModel> (
216                                                 rxEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
217                 \} 
218                 \textcolor{keywordflow}{else}
219                 \{
220                         Ptr<McUeNetDevice> mcTxUe = DynamicCast<McUeNetDevice> (txDevice);
221 
222                         \textcolor{keywordflow}{if} (mcTxUe != 0)
223                         \{
224                                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is MC uplink case"});
225                                 txAntennaNum[0] = sqrt (mcTxUe->GetAntennaNum ());
226                                 txAntennaNum[1] = sqrt (mcTxUe->GetAntennaNum ());
227                                 rxAntennaNum[0] = sqrt (rxEnb->GetAntennaNum ());
228                                 rxAntennaNum[1] = sqrt (rxEnb->GetAntennaNum ());
229                                 \textcolor{keywordflow}{if}(\hyperlink{classns3_1_1MmWaveChannelMatrix_a6427b27c8ebd5fb5327c7403174caf31}{isAdditionalMmWavePhy}) \textcolor{comment}{//sjkang}
230                                 txAntennaArray = DynamicCast<AntennaArrayModel> (
231                                                         mcTxUe->GetMmWavePhy\_2 ()->GetDlSpectrumPhy ()->
      GetRxAntenna ());
232                                 \textcolor{keywordflow}{else}
233                                         txAntennaArray = DynamicCast<AntennaArrayModel> (
234                                                         mcTxUe->GetMmWavePhy()->GetDlSpectrumPhy ()->
      GetRxAntenna ());
235 
236                                 rxAntennaArray = DynamicCast<AntennaArrayModel> (
237                                                         rxEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna
       ());
238                         \}
239                 \} 
240         \}
241         \textcolor{keywordflow}{else}
242         \{
243                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"enb to enb or ue to ue transmission, skip beamforming"});
244                 \textcolor{keywordflow}{return} rxPsd;
245         \}
246 
247         Ptr<mmWaveBeamFormingParams> bfParams = Create<mmWaveBeamFormingParams> ();
248         Angles txAngles (\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}->GetPosition (), a->GetPosition ());
249         Angles rxAngles (a->GetPosition (), \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}->GetPosition ());
250         \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\_t} key = std::make\_pair(txDevice,rxDevice);
251         std::map< key\_t, Ptr<ChannelParams> >::iterator it = \hyperlink{classns3_1_1MmWaveChannelMatrix_ad505ccb88c10f493fbba01d12732241f}{m\_channelMatrixMap}.find (key
      );
252         \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1MmWaveChannelMatrix_ad505ccb88c10f493fbba01d12732241f}{m\_channelMatrixMap}.end ())
253         \{
254                 \textcolor{comment}{/*make sure txAngles rxAngles exist, i.e., the position of tx and rx cannot be the same*/}
255 
256                 \textcolor{comment}{//Generate the cluster number depend on Poisson distribution.}
257                 \textcolor{keywordtype}{double} Pref = \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (0,1);
258                 std::vector<uint16\_t> cluster;
259                 uint16\_t clusterNum;
260                 \textcolor{keywordflow}{if} (Pref < \hyperlink{namespacens3_a0eb7871a74ed84d4c17051cf7a9d62a9}{CdfOfClusterNum}[0])
261                 \{
262                         clusterNum = 1;
263 
264                 \}
265                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (Pref < \hyperlink{namespacens3_a0eb7871a74ed84d4c17051cf7a9d62a9}{CdfOfClusterNum}[1])
266                 \{
267                         clusterNum = 2;
268 
269                 \}
270                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (Pref < \hyperlink{namespacens3_a0eb7871a74ed84d4c17051cf7a9d62a9}{CdfOfClusterNum}[2])
271                 \{
272                         clusterNum = 3;
273                 \}
274                 \textcolor{keywordflow}{else}
275                 \{
276                         clusterNum = 4;
277                 \}
278 
279                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < clusterNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
280                 \{
281                         uint16\_t subpath = \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv}->\hyperlink{classns3_1_1RandomVariableStream_a66cd94e6305ce7f000f1a9ff0fcb9aef}{GetInteger} (1,10);
282                         cluster.push\_back (subpath);
283                 \}
284 
285                 \textcolor{comment}{//Generate cluster power fraction for each cluster}
286                 \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{doubleVector\_t} clusterPowerFraction;
287                 Ptr<NormalRandomVariable> normalRv = CreateObject<NormalRandomVariable> ();
288                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < clusterNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
289                 \{
290                         \textcolor{keywordtype}{double} u = \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (0,1);
291                         \textcolor{keywordtype}{double} z = normalRv->GetValue()*4;
292                         \textcolor{comment}{//double p = std::pow(u,1.8)*std::pow(10,(-0.1)*z); this is the correct formula,
       but the result is not convincing}
293                         \textcolor{keywordtype}{double} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = std::pow(u,1.8)*std::pow(10,(0.1)*z)/cluster.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
294                         clusterPowerFraction.push\_back (p);
295                 \}
296                 \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{doubleVector\_t} powerFraction;
297                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < clusterNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
298                 \{
299 
300                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l} = 0; \hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l} < cluster.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}); \hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l}++)
301                         \{
302                                 powerFraction.push\_back (clusterPowerFraction. at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})*std::pow(10, \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue}(0, 0.6)));
303                         \}
304 
305                 \}
306                 std::sort (powerFraction.begin (), powerFraction.end (),std::greater<double>());
307 
308                 \textcolor{comment}{//normalize cluster power fraction}
309                 \textcolor{keywordtype}{double} powerSum = 0;
310                 uint32\_t \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = powerFraction.size ();
311                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j = 0; j< \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s}; j++)
312                 \{
313                         powerSum += powerFraction. at(j);
314                 \}
315                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j = 0; j< \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s}; j++)
316                 \{
317                         powerFraction.at (j) = powerFraction.at (j)/powerSum;
318                         \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND} (j<<\textcolor{stringliteral}{" "}<<powerFraction. at (j));
319                 \}
320 
321                 \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{doubleVector\_t} clusterDelay;
322                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < clusterNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
323                 \{
324                         \textcolor{keywordtype}{double} tao = \hyperlink{classns3_1_1MmWaveChannelMatrix_a7fee3ea2f2e3812df87e63e3baa743d0}{m\_expRv}->\hyperlink{classns3_1_1ExponentialRandomVariable_a5d7a50466c0b0f036ec0fc1aa478f2c3}{GetValue} (83,300);
325                         clusterDelay.push\_back (tao);
326                 \}
327                 std::sort (clusterDelay.begin (), clusterDelay.end ());
328                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < clusterNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
329                 \{
330                         \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == 0)
331                         \{
332                                 clusterDelay.at (0) = 0;
333                         \}
334                         \textcolor{keywordflow}{else}
335                         \{
336                         clusterDelay.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = (clusterDelay.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}-1)+clusterDelay.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})-clusterDelay.at (0)+25)*1e-9;
337                         \}
338                 \}
339 
340                 \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{doubleVector\_t} subpathDelay;
341                 \textcolor{keywordtype}{double} bandwidth = \hyperlink{classns3_1_1MmWaveChannelMatrix_a0111a9ed650a9e570974268aac7b2ef7}{m\_subBW}*\hyperlink{classns3_1_1MmWaveChannelMatrix_ad0bcea397bcd1f0a8f8487eadcab39b0}{m\_numSBPerRB}*
      \hyperlink{classns3_1_1MmWaveChannelMatrix_a8ea4baeefad7cce0f0c702e93fd32d2b}{m\_numRB};
342                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < clusterNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
343                 \{
344                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < cluster.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}); j++)
345                         \{
346                                 subpathDelay.push\_back (clusterDelay. at(\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})+std::pow(1/bandwidth*j, 
      \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue}(0,0.43)+1));
347                         \}
348                 \}
349 
350                 std::sort (subpathDelay.begin (), subpathDelay.end ());
351 
352                 \textcolor{comment}{/*debug----------------------------------*/}
353                 \textcolor{keywordtype}{int} counter = 0;
354                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < clusterNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
355                 \{
356                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < cluster.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}); j++)
357                         \{
358                                 \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND} (\textcolor{stringliteral}{"cluster"}<<\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}<<\textcolor{stringliteral}{"subpath"}<<j<<\textcolor{stringliteral}{":"}<<subpathDelay.
      at(counter));
359                                 counter++;
360                         \}
361                 \}
362                 \textcolor{comment}{/*----------------------------------end*/}
363 
364                 \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{doubleVector\_t} dopplerShift;
365                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < subpathDelay.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
366                 \{
367                         dopplerShift.push\_back(\hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (0,1));
368                 \}
369 
370 
371                 \hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2DVector\_t} txSpatialMatrix = 
      \hyperlink{classns3_1_1MmWaveChannelMatrix_a1395b9e11d00ccf0188e0b464a4b0fdb}{GenSpatialMatrix} (cluster,txAngles,txAntennaNum);
372                 \hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2DVector\_t} rxSpatialMatrix = 
      \hyperlink{classns3_1_1MmWaveChannelMatrix_a1395b9e11d00ccf0188e0b464a4b0fdb}{GenSpatialMatrix} (cluster,rxAngles,rxAntennaNum);
373                 Ptr<ChannelParams> channel = Create<ChannelParams> ();
374 
375                 channel->m\_txSpatialMatrix = txSpatialMatrix;
376                 channel->m\_rxSpatialMatrix = rxSpatialMatrix;
377                 channel->m\_powerFraction = powerFraction;
378                 channel->m\_delaySpread = subpathDelay;
379                 channel->m\_doppler = dopplerShift;
380 
381 
382                 \hyperlink{classns3_1_1MmWaveChannelMatrix_ad505ccb88c10f493fbba01d12732241f}{m\_channelMatrixMap}.insert(std::make\_pair(key,channel));
383 
384                 \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\_t} reverseKey = std::make\_pair(rxDevice,txDevice);
385                 Ptr<ChannelParams> reverseChannel = Create<ChannelParams> ();
386                 reverseChannel->m\_txSpatialMatrix = rxSpatialMatrix;
387                 reverseChannel->m\_rxSpatialMatrix = txSpatialMatrix;
388                 reverseChannel->m\_powerFraction = powerFraction;
389                 reverseChannel->m\_delaySpread = subpathDelay;
390                 reverseChannel->m\_doppler = dopplerShift;
391 
392                 \hyperlink{classns3_1_1MmWaveChannelMatrix_ad505ccb88c10f493fbba01d12732241f}{m\_channelMatrixMap}.insert(std::make\_pair(reverseKey,reverseChannel));
393 
394                 bfParams->m\_channelParams = channel;
395         \}
396         \textcolor{keywordflow}{else}
397         \{
398                 bfParams->m\_channelParams = (*it).second;
399         \}
400         \textcolor{comment}{//      calculate antenna weights, better method should be implemented}
401         bfParams->m\_txW = txAntennaArray->GetBeamformingVector();
402         bfParams->m\_rxW = rxAntennaArray->GetBeamformingVector();
403 
404         \textcolor{comment}{/*}
405 \textcolor{comment}{        std::map< key\_t, int >::iterator it1 = m\_connectedPair.find (key);}
406 \textcolor{comment}{        if(it1 != m\_connectedPair.end ())}
407 \textcolor{comment}{        \{}
408 \textcolor{comment}{                if (txW.empty() && rxW.empty ())}
409 \textcolor{comment}{                \{}
410 \textcolor{comment}{                        txW = CalcBeamformingVector(bfParams->m\_channelParams->m\_txSpatialMatrix);}
411 \textcolor{comment}{                        rxW = CalcBeamformingVector(bfParams->m\_channelParams->m\_rxSpatialMatrix);}
412 \textcolor{comment}{                        txAntennaArray->SetBeamformingVector(txW,rxDevice);}
413 \textcolor{comment}{                        rxAntennaArray->SetBeamformingVector(rxW,txDevice);}
414 \textcolor{comment}{                \}}
415 \textcolor{comment}{        \}}
416 \textcolor{comment}{        */}
417 
418         Vector rxSpeed = \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}->GetVelocity();
419         Vector txSpeed = a->GetVelocity();
420         \textcolor{keywordtype}{double} relativeSpeed = (rxSpeed.x-txSpeed.x)
421                         +(rxSpeed.y-txSpeed.y)+(rxSpeed.z-txSpeed.z);
422         Ptr<SpectrumValue> bfPsd = \hyperlink{classns3_1_1MmWaveChannelMatrix_a1c744518b5c26b1169cfc003c9662ee3}{GetChannelGain}(rxPsd,bfParams, relativeSpeed);
423 
424 
425         \textcolor{comment}{/*loging the beamforming gain for debug*/}
426         Values::iterator bfit = bfPsd->ValuesBegin ();
427         Values::iterator rxit = rxPsd->ValuesBegin ();
428         uint32\_t subChannel = 0;
429         \textcolor{keywordtype}{double} value=0;
430         \textcolor{keywordflow}{while} (bfit != bfPsd->ValuesEnd ())
431         \{
432                 value += (*bfit)/(*rxit);
433                 bfit++;
434                 rxit++;
435                 subChannel++;
436         \}
437         \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND}(\textcolor{stringliteral}{"Gain("}<<10*log10(value/72)<<\textcolor{stringliteral}{"dB)"});
438 
439         \textcolor{comment}{//NS\_LOG\_UNCOND ("TxAngle("<<txAngles.phi*180/M\_PI<<") RxAngle("<<rxAngles.phi*180/M\_PI}
440         \textcolor{comment}{//              <<") Speed["<<relativeSpeed<<"]");}
441         \hyperlink{log-macros-disabled_8h_a0b36e5e182b37194f85ef1c5e979fb2e}{NS\_LOG\_UNCOND} (\textcolor{stringliteral}{"Gain("}<<10*\hyperlink{namespacens3_a852286d6b0f3471ea9fed2ec66bd4536}{Log10}((*bfPsd)/(*\hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd}))<<\textcolor{stringliteral}{"dB)"});
442         \textcolor{keywordflow}{return} bfPsd;
443 
444 
445 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Do\+Dispose()}{DoDispose()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a7a20406655c992c2d0e2ffcb67646998}{}\label{classns3_1_1MmWaveChannelMatrix_a7a20406655c992c2d0e2ffcb67646998}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1MmWaveChannelMatrix_a7a20406655c992c2d0e2ffcb67646998}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1SpectrumPropagationLossModel_a26259057c97ea893d472b5ac52d6649e}{ns3\+::\+Spectrum\+Propagation\+Loss\+Model}.


\begin{DoxyCode}
94 \{
95         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
96 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Gen\+Single\+Path@{Gen\+Single\+Path}}
\index{Gen\+Single\+Path@{Gen\+Single\+Path}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Gen\+Single\+Path(double h\+Angle, double v\+Angle, uint8\+\_\+t $\ast$antenna\+Num) const }{GenSinglePath(double hAngle, double vAngle, uint8_t *antennaNum) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf complex\+Vector\+\_\+t} ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Gen\+Single\+Path (
\begin{DoxyParamCaption}
\item[{double}]{h\+Angle, }
\item[{double}]{v\+Angle, }
\item[{uint8\+\_\+t $\ast$}]{antenna\+Num}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_ae034ee8262dacddc18427ddbf21cb84b}{}\label{classns3_1_1MmWaveChannelMatrix_ae034ee8262dacddc18427ddbf21cb84b}

\begin{DoxyCode}
533 \{
534         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
535         \hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complexVector\_t} singlePath;
536         uint16\_t vSize = antennaNum[0];
537         uint16\_t hSize = antennaNum[1];
538 
539         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} vIndex = 0; vIndex < vSize; vIndex++)
540         \{
541                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} hIndex =0; hIndex < hSize; hIndex++)
542                 \{
543                         \textcolor{keywordtype}{double} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_afd61ec66f9d7b807eece6eb12c781844}{w} = (-2)*M\_PI*hIndex*\hyperlink{classns3_1_1MmWaveChannelMatrix_a91d12a913567e33fc21fbc6275414008}{m\_antennaSeparation}*cos(hAngle)
544                                                                                 + (-2)*M\_PI*vIndex*
      \hyperlink{classns3_1_1MmWaveChannelMatrix_a91d12a913567e33fc21fbc6275414008}{m\_antennaSeparation}*cos(vAngle);
545                         singlePath.push\_back (std::complex<double> (cos (w), sin (w)));
546                 \}
547         \}
548         \textcolor{keywordflow}{return} singlePath;
549 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Gen\+Spatial\+Matrix@{Gen\+Spatial\+Matrix}}
\index{Gen\+Spatial\+Matrix@{Gen\+Spatial\+Matrix}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Gen\+Spatial\+Matrix(std\+::vector$<$ uint16\+\_\+t $>$ cluster, Angles angle, uint8\+\_\+t $\ast$antenna\+Num) const }{GenSpatialMatrix(std::vector< uint16_t > cluster, Angles angle, uint8_t *antennaNum) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf complex2\+D\+Vector\+\_\+t} ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Gen\+Spatial\+Matrix (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ uint16\+\_\+t $>$}]{cluster, }
\item[{{\bf Angles}}]{angle, }
\item[{uint8\+\_\+t $\ast$}]{antenna\+Num}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a1395b9e11d00ccf0188e0b464a4b0fdb}{}\label{classns3_1_1MmWaveChannelMatrix_a1395b9e11d00ccf0188e0b464a4b0fdb}

\begin{DoxyCode}
501 \{
502         \hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2DVector\_t} spatialMatrix;
503         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} clusterIndex = 0; clusterIndex < cluster.size (); clusterIndex++)
504         \{
505                 \textcolor{keywordtype}{double} azimuthAngle;
506                 \textcolor{keywordtype}{double} verticalAngle;
507                 \textcolor{keywordflow}{if} (clusterIndex == 0)
508                 \{
509                         \textcolor{comment}{//directed cluster}
510                         azimuthAngle = angle.phi;
511                         verticalAngle = angle.theta;
512                 \}
513                 \textcolor{keywordflow}{else}
514                 \{
515                         \textcolor{comment}{//reflected cluster}
516                         azimuthAngle = \hyperlink{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{m\_uniformRv}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (-1*M\_PI,M\_PI);
517                         verticalAngle = angle.theta;
518                 \}
519                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} subpathIndex = 0; subpathIndex < cluster. at (clusterIndex); subpathIndex++)
520                 \{
521                         \hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complexVector\_t} singlePath;
522                         \textcolor{keywordtype}{double} subpathAngle = \hyperlink{classns3_1_1MmWaveChannelMatrix_a7fee3ea2f2e3812df87e63e3baa743d0}{m\_expRv}->\hyperlink{classns3_1_1ExponentialRandomVariable_a5d7a50466c0b0f036ec0fc1aa478f2c3}{GetValue} (0.178,0.7)/2;
523                         singlePath = \hyperlink{classns3_1_1MmWaveChannelMatrix_ae034ee8262dacddc18427ddbf21cb84b}{GenSinglePath} (azimuthAngle+std::pow(-1,subpathIndex)*
      subpathAngle, verticalAngle, antennaNum);
524                         spatialMatrix.push\_back(singlePath);
525                 \}
526         \}
527         \textcolor{keywordflow}{return} spatialMatrix;
528 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Get\+Channel\+Gain@{Get\+Channel\+Gain}}
\index{Get\+Channel\+Gain@{Get\+Channel\+Gain}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Get\+Channel\+Gain(\+Ptr$<$ const Spectrum\+Value $>$ tx\+Psd, Ptr$<$ mm\+Wave\+Beam\+Forming\+Params $>$ bf\+Params, double speed) const }{GetChannelGain(Ptr< const SpectrumValue > txPsd, Ptr< mmWaveBeamFormingParams > bfParams, double speed) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Get\+Channel\+Gain (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Spectrum\+Value} $>$}]{tx\+Psd, }
\item[{{\bf Ptr}$<$ {\bf mm\+Wave\+Beam\+Forming\+Params} $>$}]{bf\+Params, }
\item[{double}]{speed}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a1c744518b5c26b1169cfc003c9662ee3}{}\label{classns3_1_1MmWaveChannelMatrix_a1c744518b5c26b1169cfc003c9662ee3}

\begin{DoxyCode}
553 \{
554         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
555 
556         \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT}(bfParams->m\_channelParams->m\_rxSpatialMatrix.size () == bfParams->
      m\_channelParams->m\_txSpatialMatrix.size ());
557         uint16\_t pathNum = bfParams->m\_channelParams->m\_txSpatialMatrix.size ();
558         \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} time = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
559         \textcolor{keywordtype}{double} t = time.GetSeconds ();
560         Ptr<SpectrumValue> tempPsd = Copy<SpectrumValue> (\hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd});
561 
562         Values::iterator vit = tempPsd->ValuesBegin ();
563         uint16\_t iSubband = 0;
564 
565         \textcolor{keywordtype}{bool} noSpeed = \textcolor{keyword}{false};
566         \textcolor{keywordflow}{if} (\hyperlink{mmwave-amc-test_8cc_a6dc6e6f3c75c509ce943163afb5dade7}{speed} == 0)
567         \{
568                 noSpeed = \textcolor{keyword}{true};
569         \}
570 
571         \textcolor{keywordflow}{while} (vit != tempPsd->ValuesEnd ())
572         \{
573                 std::complex<double> subsbandGain (0.0,0.0);
574                 \textcolor{keywordflow}{if} ((*vit) != 0.00)
575                 \{
576                         \textcolor{keywordtype}{double} fsb = \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig}->
      \hyperlink{classns3_1_1MmWavePhyMacCommon_a0850d2e37c7075b9bce242723b722019}{GetCenterFrequency} () - \hyperlink{classns3_1_1MmWaveChannelMatrix_a6a9cd8af5d1d6281329802644b8a3dd0}{GetSystemBandwidth} ()/2 + 
      \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_acc801566d527f1893d67a618ea3be203}{GetChunkWidth} ()*iSubband ;
577                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} pathIndex = 0; pathIndex < pathNum; pathIndex++)
578                         \{
579 
580                                 std::complex<double> doppler;
581                                 \textcolor{keywordflow}{if} (noSpeed)
582                                 \{
583                                         doppler = std::complex<double> (1,0);
584                                 \}
585                                 \textcolor{keywordflow}{else}
586                                 \{
587                                         \textcolor{keywordtype}{double} f\_d = \hyperlink{mmwave-amc-test_8cc_a6dc6e6f3c75c509ce943163afb5dade7}{speed}*\hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig}->
      \hyperlink{classns3_1_1MmWavePhyMacCommon_a0850d2e37c7075b9bce242723b722019}{GetCenterFrequency} ()/3e8;
588                                         \textcolor{keywordtype}{double} temp\_Doppler = 2*M\_PI*t*f\_d*bfParams->m\_channelParams->
      m\_doppler.at (pathIndex);
589                                         doppler = std::complex<double> (cos (temp\_Doppler), sin (
      temp\_Doppler));
590                                 \}
591 
592                                 \textcolor{keywordtype}{double} temp\_delay = -2*M\_PI*fsb*bfParams->m\_channelParams->m\_delaySpread.at
       (pathIndex);
593                                 std::complex<double> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay} (cos (temp\_delay), sin (temp\_delay));
594 
595                                 std::complex<double> smallScaleFading = sqrt(bfParams->m\_channelParams->
      m\_powerFraction. at(pathIndex))*doppler*\hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay};
596 
597                                 \textcolor{keywordflow}{if}(bfParams->m\_txW.empty ()||bfParams->m\_rxW.empty ())
598                                 \{
599                                         \textcolor{comment}{/*antenna weights is empty, siso*/}
600                                         subsbandGain = subsbandGain + smallScaleFading;
601                                 \}
602                                 \textcolor{keywordflow}{else}
603                                 \{
604                                         \textcolor{comment}{/* beam forming*/}
605                                         std::complex<double> txSum, rxSum;
606                                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < bfParams->m\_txW.size (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
607                                         \{
608                                                 txSum += std::conj(bfParams->m\_channelParams->
      m\_txSpatialMatrix.at (pathIndex).at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}))*bfParams->m\_txW.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
609                                         \}
610                                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < bfParams->m\_rxW.size (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
611                                         \{
612                                                 rxSum += bfParams->m\_channelParams->m\_rxSpatialMatrix.at (
      pathIndex). at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})*std::conj(bfParams->m\_rxW.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
613                                         \}
614                                         subsbandGain = subsbandGain + txSum*rxSum*smallScaleFading;
615                                 \}
616                         \}
617                         *vit = (*vit)*(norm (subsbandGain));
618                 \}
619                 vit++;
620                 iSubband++;
621         \}
622         \textcolor{keywordflow}{return} tempPsd;
623 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Get\+Configuration\+Parameters@{Get\+Configuration\+Parameters}}
\index{Get\+Configuration\+Parameters@{Get\+Configuration\+Parameters}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Get\+Configuration\+Parameters(void) const }{GetConfigurationParameters(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Mm\+Wave\+Phy\+Mac\+Common} $>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Get\+Configuration\+Parameters (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1MmWaveChannelMatrix_abd1ba6a33c5eb270875f54fabec7a19b}{}\label{classns3_1_1MmWaveChannelMatrix_abd1ba6a33c5eb270875f54fabec7a19b}

\begin{DoxyCode}
106 \{
107         \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig};
108 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Get\+System\+Bandwidth@{Get\+System\+Bandwidth}}
\index{Get\+System\+Bandwidth@{Get\+System\+Bandwidth}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Get\+System\+Bandwidth() const }{GetSystemBandwidth() const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Get\+System\+Bandwidth (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a6a9cd8af5d1d6281329802644b8a3dd0}{}\label{classns3_1_1MmWaveChannelMatrix_a6a9cd8af5d1d6281329802644b8a3dd0}

\begin{DoxyCode}
627 \{
628         \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__spectrum__model_8m_a3f7228a3941f19f282647a09dd494528}{bw} = 0.00;
629         bw = \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_acc801566d527f1893d67a618ea3be203}{GetChunkWidth} () * 
      \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a8a303f463053dadea5902859a00d481f}{GetNumChunkPerRb} () * 
      \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a4c5f323fd722d6eec52efda5d76f97ad}{GetNumRb} ();
630         \textcolor{keywordflow}{return} \hyperlink{generate__test__data__lte__spectrum__model_8m_a3f7228a3941f19f282647a09dd494528}{bw};
631 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10




Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a7647e15736217d647c4d0d58fbe53612}{}\label{classns3_1_1MmWaveChannelMatrix_a7647e15736217d647c4d0d58fbe53612}

\begin{DoxyCode}
65 \{
66         \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::MmWaveChannelMatrix"})
67         .SetParent<\hyperlink{classns3_1_1Object_a40860402e64d8008fb42329df7097cdb}{Object}> ()
68         .AddAttribute (\textcolor{stringliteral}{"ChunkWidth"},
69                            \textcolor{stringliteral}{"Width of each chunk in Hz"},
70                            DoubleValue (13.889e6),
71                            MakeDoubleAccessor (&\hyperlink{classns3_1_1MmWaveChannelMatrix_a0111a9ed650a9e570974268aac7b2ef7}{MmWaveChannelMatrix::m\_subBW}),
72                            MakeDoubleChecker<double> ())
73         .AddAttribute (\textcolor{stringliteral}{"NumResourceBlocks"},
74                            \textcolor{stringliteral}{"Number of resource blocks in one slot"},
75                            UintegerValue (4),
76                            MakeUintegerAccessor (&\hyperlink{classns3_1_1MmWaveChannelMatrix_a8ea4baeefad7cce0f0c702e93fd32d2b}{MmWaveChannelMatrix::m\_numRB})
      ,
77                            MakeUintegerChecker<uint32\_t> ())
78         .AddAttribute (\textcolor{stringliteral}{"NumSubbandPerRB"},
79                            \textcolor{stringliteral}{"Number of sub-bands in one resource block"},
80                            UintegerValue (18),
81                            MakeUintegerAccessor (&
      \hyperlink{classns3_1_1MmWaveChannelMatrix_ad0bcea397bcd1f0a8f8487eadcab39b0}{MmWaveChannelMatrix::m\_numSBPerRB}),
82                            MakeUintegerChecker<uint32\_t> ())
83         ;
84         \textcolor{keywordflow}{return} tid;
85 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12


\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Initial@{Initial}}
\index{Initial@{Initial}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Initial(\+Net\+Device\+Container ue\+Devices, Net\+Device\+Container enb\+Devices)}{Initial(NetDeviceContainer ueDevices, NetDeviceContainer enbDevices)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Initial (
\begin{DoxyParamCaption}
\item[{{\bf Net\+Device\+Container}}]{ue\+Devices, }
\item[{{\bf Net\+Device\+Container}}]{enb\+Devices}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelMatrix_ab33b65ac0dd3750c6b7856947150ec04}{}\label{classns3_1_1MmWaveChannelMatrix_ab33b65ac0dd3750c6b7856947150ec04}

\begin{DoxyCode}
126 \{
127 
128         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (&ueDevices<<&enbDevices);
129         \textcolor{comment}{/*}
130 \textcolor{comment}{        for (NetDeviceContainer::Iterator i = ueDevices.Begin(); i != ueDevices.End(); i++)}
131 \textcolor{comment}{        \{}
132 \textcolor{comment}{                Ptr<MmWaveUeNetDevice> UeDev =}
133 \textcolor{comment}{                                                DynamicCast<MmWaveUeNetDevice> (*i);}
134 \textcolor{comment}{                if (UeDev->GetTargetEnb ())}
135 \textcolor{comment}{                \{}
136 \textcolor{comment}{                        Ptr<NetDevice> targetBs = UeDev->GetTargetEnb ();}
137 \textcolor{comment}{                        ConnectDevices (*i, targetBs);}
138 \textcolor{comment}{                        ConnectDevices (targetBs, *i);}
139 \textcolor{comment}{}
140 \textcolor{comment}{                \}}
141 \textcolor{comment}{        \}}
142 \textcolor{comment}{        */}
143 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!Set\+Configuration\+Parameters@{Set\+Configuration\+Parameters}}
\index{Set\+Configuration\+Parameters@{Set\+Configuration\+Parameters}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{Set\+Configuration\+Parameters(\+Ptr$<$ Mm\+Wave\+Phy\+Mac\+Common $>$ ptr\+Config)}{SetConfigurationParameters(Ptr< MmWavePhyMacCommon > ptrConfig)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::\+Set\+Configuration\+Parameters (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Mm\+Wave\+Phy\+Mac\+Common} $>$}]{ptr\+Config}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelMatrix_ac296d6652dbde383f9c9b03494c1f8fe}{}\label{classns3_1_1MmWaveChannelMatrix_ac296d6652dbde383f9c9b03494c1f8fe}

\begin{DoxyCode}
100 \{
101         \hyperlink{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{m\_phyMacConfig} = ptrConfig;
102 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!is\+Additional\+Mm\+Wave\+Phy@{is\+Additional\+Mm\+Wave\+Phy}}
\index{is\+Additional\+Mm\+Wave\+Phy@{is\+Additional\+Mm\+Wave\+Phy}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{is\+Additional\+Mm\+Wave\+Phy}{isAdditionalMmWavePhy}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::is\+Additional\+Mm\+Wave\+Phy ={\bf false}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a6427b27c8ebd5fb5327c7403174caf31}{}\label{classns3_1_1MmWaveChannelMatrix_a6427b27c8ebd5fb5327c7403174caf31}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+antenna\+Separation@{m\+\_\+antenna\+Separation}}
\index{m\+\_\+antenna\+Separation@{m\+\_\+antenna\+Separation}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+antenna\+Separation}{m_antennaSeparation}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+antenna\+Separation\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a91d12a913567e33fc21fbc6275414008}{}\label{classns3_1_1MmWaveChannelMatrix_a91d12a913567e33fc21fbc6275414008}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+channel\+Matrix\+Map@{m\+\_\+channel\+Matrix\+Map}}
\index{m\+\_\+channel\+Matrix\+Map@{m\+\_\+channel\+Matrix\+Map}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+channel\+Matrix\+Map}{m_channelMatrixMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ {\bf key\+\_\+t}, {\bf Ptr}$<${\bf Channel\+Params}$>$ $>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+channel\+Matrix\+Map\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_ad505ccb88c10f493fbba01d12732241f}{}\label{classns3_1_1MmWaveChannelMatrix_ad505ccb88c10f493fbba01d12732241f}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+connected\+Pair@{m\+\_\+connected\+Pair}}
\index{m\+\_\+connected\+Pair@{m\+\_\+connected\+Pair}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+connected\+Pair}{m_connectedPair}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ {\bf key\+\_\+t}, int $>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+connected\+Pair\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a6c0f656e01119626c1f3887f0ba295e0}{}\label{classns3_1_1MmWaveChannelMatrix_a6c0f656e01119626c1f3887f0ba295e0}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+exp\+Rv@{m\+\_\+exp\+Rv}}
\index{m\+\_\+exp\+Rv@{m\+\_\+exp\+Rv}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+exp\+Rv}{m_expRv}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Exponential\+Random\+Variable}$>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+exp\+Rv\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a7fee3ea2f2e3812df87e63e3baa743d0}{}\label{classns3_1_1MmWaveChannelMatrix_a7fee3ea2f2e3812df87e63e3baa743d0}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+num\+RB@{m\+\_\+num\+RB}}
\index{m\+\_\+num\+RB@{m\+\_\+num\+RB}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+num\+RB}{m_numRB}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+num\+RB\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a8ea4baeefad7cce0f0c702e93fd32d2b}{}\label{classns3_1_1MmWaveChannelMatrix_a8ea4baeefad7cce0f0c702e93fd32d2b}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+num\+S\+B\+Per\+RB@{m\+\_\+num\+S\+B\+Per\+RB}}
\index{m\+\_\+num\+S\+B\+Per\+RB@{m\+\_\+num\+S\+B\+Per\+RB}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+num\+S\+B\+Per\+RB}{m_numSBPerRB}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+num\+S\+B\+Per\+RB\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_ad0bcea397bcd1f0a8f8487eadcab39b0}{}\label{classns3_1_1MmWaveChannelMatrix_ad0bcea397bcd1f0a8f8487eadcab39b0}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+phy\+Mac\+Config@{m\+\_\+phy\+Mac\+Config}}
\index{m\+\_\+phy\+Mac\+Config@{m\+\_\+phy\+Mac\+Config}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+phy\+Mac\+Config}{m_phyMacConfig}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Mm\+Wave\+Phy\+Mac\+Common}$>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+phy\+Mac\+Config\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}{}\label{classns3_1_1MmWaveChannelMatrix_ad92dc270601be7284b3e8b42654307fa}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+sub\+BW@{m\+\_\+sub\+BW}}
\index{m\+\_\+sub\+BW@{m\+\_\+sub\+BW}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+sub\+BW}{m_subBW}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+sub\+BW\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a0111a9ed650a9e570974268aac7b2ef7}{}\label{classns3_1_1MmWaveChannelMatrix_a0111a9ed650a9e570974268aac7b2ef7}
\index{ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}!m\+\_\+uniform\+Rv@{m\+\_\+uniform\+Rv}}
\index{m\+\_\+uniform\+Rv@{m\+\_\+uniform\+Rv}!ns3\+::\+Mm\+Wave\+Channel\+Matrix@{ns3\+::\+Mm\+Wave\+Channel\+Matrix}}
\subsubsection[{\texorpdfstring{m\+\_\+uniform\+Rv}{m_uniformRv}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Uniform\+Random\+Variable}$>$ ns3\+::\+Mm\+Wave\+Channel\+Matrix\+::m\+\_\+uniform\+Rv\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}{}\label{classns3_1_1MmWaveChannelMatrix_a914afe40a958ddccd64a99f86190be0c}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
mmwave/model/\hyperlink{mmwave-channel-matrix_8h}{mmwave-\/channel-\/matrix.\+h}\item 
mmwave/model/\hyperlink{mmwave-channel-matrix_8cc}{mmwave-\/channel-\/matrix.\+cc}\end{DoxyCompactItemize}
