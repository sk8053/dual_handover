\hypertarget{classLteUeMeasurementsHandoverTestCase}{}\section{Lte\+Ue\+Measurements\+Handover\+Test\+Case Class Reference}
\label{classLteUeMeasurementsHandoverTestCase}\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}


Testing UE measurements in L\+TE with simulation of 2 e\+NodeB and 1 UE in a handover configuration.  




{\ttfamily \#include $<$lte-\/test-\/ue-\/measurements.\+h$>$}



Inheritance diagram for Lte\+Ue\+Measurements\+Handover\+Test\+Case\+:
% FIG 0


Collaboration diagram for Lte\+Ue\+Measurements\+Handover\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLteUeMeasurementsHandoverTestCase_a784b15d74295261bb3ea0b79aa3b12e5}{Lte\+Ue\+Measurements\+Handover\+Test\+Case} (std\+::string \hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name}, \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra}{Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra} $>$ source\+Config\+List, \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra}{Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra} $>$ target\+Config\+List, std\+::vector$<$ \hyperlink{classns3_1_1Time}{Time} $>$ expected\+Time, std\+::vector$<$ uint8\+\_\+t $>$ expected\+Rsrp, \hyperlink{classns3_1_1Time}{Time} duration)
\item 
virtual \hyperlink{classLteUeMeasurementsHandoverTestCase_a61747abb493dc70bcea3652b9b384fe6}{$\sim$\+Lte\+Ue\+Measurements\+Handover\+Test\+Case} ()
\item 
void \hyperlink{classLteUeMeasurementsHandoverTestCase_a84e6c207fcc76d63315df0b84660a9b5}{Recv\+Measurement\+Report\+Callback} (std\+::string context, uint64\+\_\+t imsi, uint16\+\_\+t cell\+Id, uint16\+\_\+t rnti, \hyperlink{structns3_1_1LteRrcSap_1_1MeasurementReport}{Lte\+Rrc\+Sap\+::\+Measurement\+Report} report)
\begin{DoxyCompactList}\small\item\em Triggers when either one of the e\+Node\+Bs receives measurement report from UE, then perform verification on it. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classLteUeMeasurementsHandoverTestCase_ae81c492f54cd25f174b26310458a7e5f}{Do\+Run} ()
\begin{DoxyCompactList}\small\item\em Setup the simulation with the intended UE measurement reporting configuration, run it, and connect the {\ttfamily Recv\+Measurement\+Report\+Callback} function to the {\ttfamily Lte\+Ue\+Rrc\+::\+Recv\+Measurement\+Report} trace source. \end{DoxyCompactList}\item 
virtual void \hyperlink{classLteUeMeasurementsHandoverTestCase_a9275985873ac95e843c4129672d4c94c}{Do\+Teardown} ()
\begin{DoxyCompactList}\small\item\em Runs at the end of the simulation, verifying that all expected measurement reports have been examined. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra}{Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra} $>$ \hyperlink{classLteUeMeasurementsHandoverTestCase_a49bb851aed531dfbf9a9e88284c4f0ef}{m\+\_\+source\+Config\+List}
\begin{DoxyCompactList}\small\item\em The list of active report triggering configuration for the source e\+NodeB. \end{DoxyCompactList}\item 
\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{structns3_1_1LteRrcSap_1_1ReportConfigEutra}{Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra} $>$ \hyperlink{classLteUeMeasurementsHandoverTestCase_ab87f6d3138c51c5996947ef91e25a1b8}{m\+\_\+target\+Config\+List}
\begin{DoxyCompactList}\small\item\em The list of active report triggering configuration for the target e\+NodeB. \end{DoxyCompactList}\item 
std\+::vector$<$ \hyperlink{classns3_1_1Time}{Time} $>$ \hyperlink{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}{m\+\_\+expected\+Time}
\begin{DoxyCompactList}\small\item\em The list of expected time when measurement reports are received by e\+NodeB. \end{DoxyCompactList}\item 
std\+::vector$<$ uint8\+\_\+t $>$ \hyperlink{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}{m\+\_\+expected\+Rsrp}
\begin{DoxyCompactList}\small\item\em The list of expected values of R\+S\+RP (in 3\+G\+PP range unit) from the measurement reports received. \end{DoxyCompactList}\item 
std\+::vector$<$ \hyperlink{classns3_1_1Time}{Time} $>$\+::iterator \hyperlink{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{m\+\_\+it\+Expected\+Time}
\begin{DoxyCompactList}\small\item\em Pointer to the element of {\ttfamily m\+\_\+expected\+Time} which is expected to occur next in the simulation. \end{DoxyCompactList}\item 
std\+::vector$<$ uint8\+\_\+t $>$\+::iterator \hyperlink{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}{m\+\_\+it\+Expected\+Rsrp}
\begin{DoxyCompactList}\small\item\em Pointer to the element of {\ttfamily m\+\_\+expected\+Rsrp} which is expected to occur next in the simulation. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classLteUeMeasurementsHandoverTestCase_a938131aebb85de0834fc408341950156}{m\+\_\+duration}
\begin{DoxyCompactList}\small\item\em Duration of simulation. \end{DoxyCompactList}\item 
std\+::set$<$ uint8\+\_\+t $>$ \hyperlink{classLteUeMeasurementsHandoverTestCase_aca431e1ebc93460a53628630a534c474}{m\+\_\+expected\+Source\+Cell\+Meas\+Id}
\begin{DoxyCompactList}\small\item\em The list of measurement identities being tested in the source cell. Measurement reports with different measurement identity (e.\+g. from handover algorithm and A\+NR) will be ignored. \end{DoxyCompactList}\item 
std\+::set$<$ uint8\+\_\+t $>$ \hyperlink{classLteUeMeasurementsHandoverTestCase_a63388a20a3de7adc15907242f6e4a8bf}{m\+\_\+expected\+Target\+Cell\+Meas\+Id}
\begin{DoxyCompactList}\small\item\em The list of measurement identities being tested in the target cell. Measurement reports with different measurement identity (e.\+g. from handover algorithm and A\+NR) will be ignored. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Testing UE measurements in L\+TE with simulation of 2 e\+NodeB and 1 UE in a handover configuration. 

The simulation will run for the specified duration, while the handover command will be issued exactly at the middle of simulation. 

\subsection{Constructor \& Destructor Documentation}
\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{Lte\+Ue\+Measurements\+Handover\+Test\+Case(std\+::string name, std\+::list$<$ Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra $>$ source\+Config\+List, std\+::list$<$ Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra $>$ target\+Config\+List, std\+::vector$<$ Time $>$ expected\+Time, std\+::vector$<$ uint8\+\_\+t $>$ expected\+Rsrp, Time duration)}{LteUeMeasurementsHandoverTestCase(std::string name, std::list< LteRrcSap::ReportConfigEutra > sourceConfigList, std::list< LteRrcSap::ReportConfigEutra > targetConfigList, std::vector< Time > expectedTime, std::vector< uint8_t > expectedRsrp, Time duration)}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::\+Lte\+Ue\+Measurements\+Handover\+Test\+Case (
\begin{DoxyParamCaption}
\item[{std\+::string}]{name, }
\item[{{\bf std\+::list}$<$ {\bf Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra} $>$}]{source\+Config\+List, }
\item[{{\bf std\+::list}$<$ {\bf Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra} $>$}]{target\+Config\+List, }
\item[{std\+::vector$<$ {\bf Time} $>$}]{expected\+Time, }
\item[{std\+::vector$<$ uint8\+\_\+t $>$}]{expected\+Rsrp, }
\item[{{\bf Time}}]{duration}
\end{DoxyParamCaption}
)}\hypertarget{classLteUeMeasurementsHandoverTestCase_a784b15d74295261bb3ea0b79aa3b12e5}{}\label{classLteUeMeasurementsHandoverTestCase_a784b15d74295261bb3ea0b79aa3b12e5}

\begin{DoxyCode}
1657   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name}),
1658     \hyperlink{classLteUeMeasurementsHandoverTestCase_a49bb851aed531dfbf9a9e88284c4f0ef}{m\_sourceConfigList} (sourceConfigList),
1659     \hyperlink{classLteUeMeasurementsHandoverTestCase_ab87f6d3138c51c5996947ef91e25a1b8}{m\_targetConfigList} (targetConfigList),
1660     \hyperlink{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}{m\_expectedTime} (expectedTime),
1661     \hyperlink{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}{m\_expectedRsrp} (expectedRsrp),
1662     \hyperlink{classLteUeMeasurementsHandoverTestCase_a938131aebb85de0834fc408341950156}{m\_duration} (duration)
1663 \{
1664   \textcolor{comment}{// input sanity check}
1665   uint16\_t size = \hyperlink{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}{m\_expectedTime}.size ();
1666 
1667   \textcolor{keywordflow}{if} (size != \hyperlink{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}{m\_expectedRsrp}.size ())
1668     \{
1669       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Vectors of expected results are not of the same size"});
1670     \}
1671 
1672   \hyperlink{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{m\_itExpectedTime} = \hyperlink{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}{m\_expectedTime}.begin ();
1673   \hyperlink{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}{m\_itExpectedRsrp} = \hyperlink{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}{m\_expectedRsrp}.begin ();
1674 
1675   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" name="} << \hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name});
1676 \}
\end{DoxyCode}
\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!````~Lte\+Ue\+Measurements\+Handover\+Test\+Case@{$\sim$\+Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\index{````~Lte\+Ue\+Measurements\+Handover\+Test\+Case@{$\sim$\+Lte\+Ue\+Measurements\+Handover\+Test\+Case}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Lte\+Ue\+Measurements\+Handover\+Test\+Case()}{~LteUeMeasurementsHandoverTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::$\sim$\+Lte\+Ue\+Measurements\+Handover\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a61747abb493dc70bcea3652b9b384fe6}{}\label{classLteUeMeasurementsHandoverTestCase_a61747abb493dc70bcea3652b9b384fe6}

\begin{DoxyCode}
1679 \{
1680   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1681 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run()}{DoRun()}}]{\setlength{\rightskip}{0pt plus 5cm}void Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_ae81c492f54cd25f174b26310458a7e5f}{}\label{classLteUeMeasurementsHandoverTestCase_ae81c492f54cd25f174b26310458a7e5f}


Setup the simulation with the intended UE measurement reporting configuration, run it, and connect the {\ttfamily Recv\+Measurement\+Report\+Callback} function to the {\ttfamily Lte\+Ue\+Rrc\+::\+Recv\+Measurement\+Report} trace source. 



Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
1685 \{
1686   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" "} << \hyperlink{classns3_1_1TestCase_a28f7bb59669c24dae1c290fc17fc9b62}{GetName} ());
1687 
1688   \hyperlink{classns3_1_1Ptr}{Ptr<LteHelper>} lteHelper = CreateObject<LteHelper> ();
1689   \hyperlink{classns3_1_1Ptr}{Ptr<PointToPointEpcHelper>} epcHelper = CreateObject<PointToPointEpcHelper> ();
1690   lteHelper->\hyperlink{classns3_1_1LteHelper_a324079a1ccd54ce949786b83d6b95915}{SetEpcHelper} (epcHelper);
1691   lteHelper->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"PathlossModel"},
1692                            StringValue (\textcolor{stringliteral}{"ns3::FriisSpectrumPropagationLossModel"}));
1693   lteHelper->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"UseIdealRrc"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}));
1694 
1695   \textcolor{comment}{//Disable Uplink Power Control}
1696   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteUePhy::EnableUplinkPowerControl"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
1697 
1698 
1699   \textcolor{comment}{// Create Nodes: eNodeB and UE}
1700   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
1701   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
1702   enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (2);
1703   ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
1704 
1705   \textcolor{comment}{/*}
1706 \textcolor{comment}{   * The topology is the following:}
1707 \textcolor{comment}{   *}
1708 \textcolor{comment}{   * eNodeB                   UE                     eNodeB}
1709 \textcolor{comment}{   *    |                     |                         |}
1710 \textcolor{comment}{   *    x ------------------- x ----------------------- x}
1711 \textcolor{comment}{   *             400 m                   500 m}
1712 \textcolor{comment}{   */}
1713 
1714   \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} positionAlloc = CreateObject<ListPositionAllocator> 
      ();
1715   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (0.0, 0.0, 0.0)); \textcolor{comment}{// Source eNodeB}
1716   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (900.0, 0.0, 0.0)); \textcolor{comment}{// Target eNodeB}
1717   positionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (Vector (400.0, 0.0, 0.0)); \textcolor{comment}{// UE}
1718   \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} mobility;
1719   mobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
1720   mobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator} (positionAlloc);
1721   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (enbNodes);
1722   mobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (ueNodes);
1723 
1724   \textcolor{comment}{// Create P-GW node}
1725   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} pgw = epcHelper->GetPgwNode ();
1726 
1727   \textcolor{comment}{// Create a single RemoteHost}
1728   \hyperlink{classns3_1_1NodeContainer}{NodeContainer} remoteHostContainer;
1729   remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
1730   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} remoteHost = remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0);
1731   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
1732   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (remoteHostContainer);
1733 
1734   \textcolor{comment}{// Create the Internet}
1735   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} p2ph;
1736   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (\hyperlink{classns3_1_1DataRate}{DataRate} (\textcolor{stringliteral}{"100Gb/s"})));
1737   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"Mtu"}, UintegerValue (1500));
1738   p2ph.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.010)));
1739   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} internetDevices = p2ph.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (pgw, remoteHost);
1740   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4h;
1741   ipv4h.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"1.0.0.0"}, \textcolor{stringliteral}{"255.0.0.0"});
1742   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} internetIpIfaces = ipv4h.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (internetDevices);
1743 
1744   \textcolor{comment}{// Routing of the Internet Host (towards the LTE network)}
1745   \hyperlink{classns3_1_1Ipv4StaticRoutingHelper}{Ipv4StaticRoutingHelper} ipv4RoutingHelper;
1746   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} remoteHostStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (remoteHost->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());
1747   remoteHostStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_a8bf5eaa7ba49fe33c78c70d5560b6c39}{AddNetworkRouteTo} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"7.0.0.0"}), 
      \hyperlink{classns3_1_1Ipv4Mask}{Ipv4Mask} (\textcolor{stringliteral}{"255.0.0.0"}), 1);
1748 
1749   \textcolor{comment}{// Enable layer-3 filtering}
1750   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteEnbRrc::RsrpFilterCoefficient"},
1751                       UintegerValue (4));
1752 
1753   \textcolor{comment}{// Disable control channel error model}
1754   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteSpectrumPhy::CtrlErrorModelEnabled"},
1755                       \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
1756 
1757   \textcolor{comment}{// Create Devices and install them in the Nodes (eNB and UE)}
1758   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbDevs;
1759   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} ueDevs;
1760   enbDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_a5e009ad35ef85f46b5a6099263f15a03}{InstallEnbDevice} (enbNodes);
1761   ueDevs = lteHelper->\hyperlink{classns3_1_1LteHelper_ac9cd932d7de92811cfa953c2e3b2fc9f}{InstallUeDevice} (ueNodes);
1762 
1763   \textcolor{comment}{// Setup UE measurement configuration in eNodeBs}
1764   uint8\_t measId;
1765   std::list<LteRrcSap::ReportConfigEutra>::const\_iterator itReportConfig;
1766   \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbRrc>} enbRrc1 = enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0)->GetObject<
      \hyperlink{classns3_1_1LteEnbNetDevice}{LteEnbNetDevice}> ()->GetRrc ();
1767   \hyperlink{classns3_1_1Ptr}{Ptr<LteEnbRrc>} enbRrc2 = enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1)->GetObject<
      \hyperlink{classns3_1_1LteEnbNetDevice}{LteEnbNetDevice}> ()->GetRrc ();
1768 
1769   \textcolor{keywordflow}{for} (itReportConfig = \hyperlink{classLteUeMeasurementsHandoverTestCase_a49bb851aed531dfbf9a9e88284c4f0ef}{m\_sourceConfigList}.begin ();
1770        itReportConfig != \hyperlink{classLteUeMeasurementsHandoverTestCase_a49bb851aed531dfbf9a9e88284c4f0ef}{m\_sourceConfigList}.end (); itReportConfig++)
1771     \{
1772       measId = enbRrc1->\hyperlink{classns3_1_1LteEnbRrc_a4b9348b6c39a805cd23d3ed4a5091ae5}{AddUeMeasReportConfig} (*itReportConfig);
1773       \hyperlink{classLteUeMeasurementsHandoverTestCase_aca431e1ebc93460a53628630a534c474}{m\_expectedSourceCellMeasId}.insert (measId);
1774     \}
1775 
1776   \textcolor{keywordflow}{for} (itReportConfig = \hyperlink{classLteUeMeasurementsHandoverTestCase_ab87f6d3138c51c5996947ef91e25a1b8}{m\_targetConfigList}.begin ();
1777        itReportConfig != \hyperlink{classLteUeMeasurementsHandoverTestCase_ab87f6d3138c51c5996947ef91e25a1b8}{m\_targetConfigList}.end (); itReportConfig++)
1778     \{
1779       measId = enbRrc2->\hyperlink{classns3_1_1LteEnbRrc_a4b9348b6c39a805cd23d3ed4a5091ae5}{AddUeMeasReportConfig} (*itReportConfig);
1780       \hyperlink{classLteUeMeasurementsHandoverTestCase_a63388a20a3de7adc15907242f6e4a8bf}{m\_expectedTargetCellMeasId}.insert (measId);
1781     \}
1782 
1783   \textcolor{comment}{// Install the IP stack on the UEs}
1784   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (ueNodes);
1785   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ueIpIfaces;
1786   ueIpIfaces = epcHelper->AssignUeIpv4Address (\hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} (ueDevs));
1787 
1788   \textcolor{comment}{// Assign IP address to UEs}
1789   \textcolor{keywordflow}{for} (uint32\_t u = 0; u < ueNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} (); ++u)
1790     \{
1791       \hyperlink{classns3_1_1Ptr}{Ptr<Node>} ueNode = ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (u);
1792       \textcolor{comment}{// Set the default gateway for the UE}
1793       \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} ueStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (ueNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());
1794       ueStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_aee30fa3246c2b42f122dabdff2725331}{SetDefaultRoute} (epcHelper->GetUeDefaultGatewayAddress (), 1);
1795     \}
1796 
1797   \textcolor{comment}{// Attach UE to serving eNodeB}
1798   lteHelper->\hyperlink{classns3_1_1LteHelper_a9466743f826aa2652a87907b7f0a1c87}{Attach} (ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0), enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0));
1799 
1800   \textcolor{comment}{// Add X2 interface}
1801   lteHelper->\hyperlink{classns3_1_1LteHelper_adbbd435f439200097e88a2965668bc26}{AddX2Interface} (enbNodes);
1802 
1803   \textcolor{comment}{// Connect to trace sources in source eNodeB}
1804   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/1/DeviceList/0/LteEnbRrc/RecvMeasurementReport"},
1805                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classLteUeMeasurementsHandoverTestCase_a84e6c207fcc76d63315df0b84660a9b5}{LteUeMeasurementsHandoverTestCase::RecvMeasurementReportCallback}
      ,
1806                                  \textcolor{keyword}{this}));
1807 
1808   \textcolor{comment}{// Connect to trace sources in target eNodeB}
1809   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/2/DeviceList/0/LteEnbRrc/RecvMeasurementReport"},
1810                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classLteUeMeasurementsHandoverTestCase_a84e6c207fcc76d63315df0b84660a9b5}{LteUeMeasurementsHandoverTestCase::RecvMeasurementReportCallback}
      ,
1811                                  \textcolor{keyword}{this}));
1812 
1813   \textcolor{comment}{// Schedule handover}
1814   lteHelper->\hyperlink{classns3_1_1LteHelper_a5b612c3b8d529e68b848cdca95838087}{HandoverRequest} (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (
      \hyperlink{classLteUeMeasurementsHandoverTestCase_a938131aebb85de0834fc408341950156}{m\_duration}.\hyperlink{classns3_1_1Time_aba3428a8b6c4c8d9014ce44145081f34}{GetMilliSeconds} () / 2),
1815                               ueDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0), enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (0), enbDevs.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1));
1816 
1817   \textcolor{comment}{// Run simulation}
1818   Simulator::Stop (\hyperlink{classLteUeMeasurementsHandoverTestCase_a938131aebb85de0834fc408341950156}{m\_duration});
1819   Simulator::Run ();
1820   Simulator::Destroy ();
1821 
1822 \} \textcolor{comment}{// end of void LteUeMeasurementsHandoverTestCase::DoRun ()}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!Do\+Teardown@{Do\+Teardown}}
\index{Do\+Teardown@{Do\+Teardown}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Teardown()}{DoTeardown()}}]{\setlength{\rightskip}{0pt plus 5cm}void Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::\+Do\+Teardown (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a9275985873ac95e843c4129672d4c94c}{}\label{classLteUeMeasurementsHandoverTestCase_a9275985873ac95e843c4129672d4c94c}


Runs at the end of the simulation, verifying that all expected measurement reports have been examined. 



Reimplemented from \hyperlink{classns3_1_1TestCase_a8917f1604e28d312a8086f76291e3c46}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
1826 \{
1827   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1828   \textcolor{keywordtype}{bool} hasEnded = \hyperlink{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{m\_itExpectedTime} == \hyperlink{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}{m\_expectedTime}.end ();
1829   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (hasEnded, \textcolor{keyword}{true},
1830                          \textcolor{stringliteral}{"Reporting should have occurred at "} << 
      \hyperlink{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{m\_itExpectedTime}->GetSeconds () << \textcolor{stringliteral}{"s"});
1831   hasEnded = \hyperlink{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}{m\_itExpectedRsrp} == \hyperlink{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}{m\_expectedRsrp}.end ();
1832   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (hasEnded);
1833 \}
\end{DoxyCode}
\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!Recv\+Measurement\+Report\+Callback@{Recv\+Measurement\+Report\+Callback}}
\index{Recv\+Measurement\+Report\+Callback@{Recv\+Measurement\+Report\+Callback}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{Recv\+Measurement\+Report\+Callback(std\+::string context, uint64\+\_\+t imsi, uint16\+\_\+t cell\+Id, uint16\+\_\+t rnti, Lte\+Rrc\+Sap\+::\+Measurement\+Report report)}{RecvMeasurementReportCallback(std::string context, uint64_t imsi, uint16_t cellId, uint16_t rnti, LteRrcSap::MeasurementReport report)}}]{\setlength{\rightskip}{0pt plus 5cm}void Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::\+Recv\+Measurement\+Report\+Callback (
\begin{DoxyParamCaption}
\item[{std\+::string}]{context, }
\item[{uint64\+\_\+t}]{imsi, }
\item[{uint16\+\_\+t}]{cell\+Id, }
\item[{uint16\+\_\+t}]{rnti, }
\item[{{\bf Lte\+Rrc\+Sap\+::\+Measurement\+Report}}]{report}
\end{DoxyParamCaption}
)}\hypertarget{classLteUeMeasurementsHandoverTestCase_a84e6c207fcc76d63315df0b84660a9b5}{}\label{classLteUeMeasurementsHandoverTestCase_a84e6c207fcc76d63315df0b84660a9b5}


Triggers when either one of the e\+Node\+Bs receives measurement report from UE, then perform verification on it. 

The trigger is set up beforehand by connecting to the {\ttfamily Lte\+Ue\+Rrc\+::\+Recv\+Measurement\+Report} trace source.

Verification consists of checking whether the report carries the right value of R\+S\+RP or not, and whether it occurs at the expected time or not. 
\begin{DoxyCode}
1839 \{
1840   uint8\_t measId = report.\hyperlink{structns3_1_1LteRrcSap_1_1MeasurementReport_a84a65ffec25d719fdcba03fb28ca5b86}{measResults}.\hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a1608bbea7e59da137c1b58d3bf55e907}{measId};
1841   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << context << (uint16\_t) measId);
1842 
1843   \textcolor{keywordtype}{bool} isCorrectMeasId;
1844   \textcolor{keywordflow}{if} (cellId == 1)
1845     \{
1846       std::set<uint8\_t>::iterator itMeasId = \hyperlink{classLteUeMeasurementsHandoverTestCase_aca431e1ebc93460a53628630a534c474}{m\_expectedSourceCellMeasId}.find (
      measId);
1847       isCorrectMeasId = (itMeasId != \hyperlink{classLteUeMeasurementsHandoverTestCase_aca431e1ebc93460a53628630a534c474}{m\_expectedSourceCellMeasId}.end ());
1848     \}
1849   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cellId == 2)
1850     \{
1851       std::set<uint8\_t>::iterator itMeasId = \hyperlink{classLteUeMeasurementsHandoverTestCase_a63388a20a3de7adc15907242f6e4a8bf}{m\_expectedTargetCellMeasId}.find (
      measId);
1852       isCorrectMeasId = (itMeasId != \hyperlink{classLteUeMeasurementsHandoverTestCase_a63388a20a3de7adc15907242f6e4a8bf}{m\_expectedTargetCellMeasId}.end ());
1853     \}
1854   \textcolor{keywordflow}{else}
1855     \{
1856       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Invalid cell ID "} << cellId);
1857     \}
1858 
1859   \textcolor{keywordflow}{if} (isCorrectMeasId)
1860     \{
1861       \textcolor{comment}{// verifying the report completeness}
1862       \hyperlink{structns3_1_1LteRrcSap_1_1MeasResults}{LteRrcSap::MeasResults} measResults = report.
      \hyperlink{structns3_1_1LteRrcSap_1_1MeasurementReport_a84a65ffec25d719fdcba03fb28ca5b86}{measResults};
1863       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Serving cellId="} << cellId
1864                          << \textcolor{stringliteral}{" rsrp="} << (uint16\_t) measResults.\hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a4d7bf8765525493fe5f5cccdbf94ab8b}{rsrpResult}
1865                          << \textcolor{stringliteral}{" ("} << EutranMeasurementMapping::RsrpRange2Dbm (measResults.
      \hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a4d7bf8765525493fe5f5cccdbf94ab8b}{rsrpResult}) << \textcolor{stringliteral}{" dBm)"}
1866                          << \textcolor{stringliteral}{" rsrq="} << (uint16\_t) measResults.\hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a6a64246cfa5d09eb42120890de3dca32}{rsrqResult}
1867                          << \textcolor{stringliteral}{" ("} << EutranMeasurementMapping::RsrqRange2Db (measResults.
      \hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a6a64246cfa5d09eb42120890de3dca32}{rsrqResult}) << \textcolor{stringliteral}{" dB)"});
1868 
1869       \textcolor{comment}{// verifying reported best cells}
1870       \textcolor{keywordflow}{if} (measResults.\hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a1fc2cdef154508dd522b46c71f854f03}{measResultListEutra}.size () == 0)
1871         \{
1872           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (measResults.
      \hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a1a102ebfb647fe85739933dcd2532736}{haveMeasResultNeighCells}, \textcolor{keyword}{false},
1873                                  \textcolor{stringliteral}{"Unexpected report content"});
1874         \}
1875       \textcolor{keywordflow}{else}
1876         \{
1877           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (measResults.
      \hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a1a102ebfb647fe85739933dcd2532736}{haveMeasResultNeighCells}, \textcolor{keyword}{true},
1878                                  \textcolor{stringliteral}{"Unexpected report content"});
1879           std::list<LteRrcSap::MeasResultEutra>::iterator it = measResults.
      \hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a1fc2cdef154508dd522b46c71f854f03}{measResultListEutra}.begin ();
1880           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (it != measResults.\hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a1fc2cdef154508dd522b46c71f854f03}{measResultListEutra}.end ());
1881           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (it->physCellId != cellId);
1882           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (it->physCellId <= 2);
1883           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (it->haveCgiInfo, \textcolor{keyword}{false},
1884                                  \textcolor{stringliteral}{"Report contains cgi-info, which is not supported"});
1885           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (it->haveRsrpResult, \textcolor{keyword}{true},
1886                                  \textcolor{stringliteral}{"Report does not contain measured RSRP result"});
1887           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (it->haveRsrqResult, \textcolor{keyword}{true},
1888                                  \textcolor{stringliteral}{"Report does not contain measured RSRQ result"});
1889           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Neighbour cellId="} << it->physCellId
1890                              << \textcolor{stringliteral}{" rsrp="} << (uint16\_t) it->rsrpResult
1891                              << \textcolor{stringliteral}{" ("} << EutranMeasurementMapping::RsrpRange2Dbm (it->rsrpResult) << \textcolor{stringliteral}{" dBm)"}
1892                              << \textcolor{stringliteral}{" rsrq="} << (uint16\_t) it->rsrqResult
1893                              << \textcolor{stringliteral}{" ("} << EutranMeasurementMapping::RsrqRange2Db (it->rsrqResult) << \textcolor{stringliteral}{" dB)"});
1894 
1895         \} \textcolor{comment}{// end of else of if (measResults.measResultListEutra.size () == 0)}
1896 
1897       \textcolor{comment}{// verifying the report timing}
1898       \textcolor{keywordtype}{bool} hasEnded = \hyperlink{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{m\_itExpectedTime} == \hyperlink{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}{m\_expectedTime}.end ();
1899       \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (hasEnded, \textcolor{keyword}{false},
1900                              \textcolor{stringliteral}{"Reporting should not have occurred at "}
1901                              << \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().GetSeconds () << \textcolor{stringliteral}{"s"});
1902       \textcolor{keywordflow}{if} (!hasEnded)
1903         \{
1904           hasEnded = \hyperlink{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}{m\_itExpectedRsrp} == \hyperlink{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}{m\_expectedRsrp}.end ();
1905           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (!hasEnded);
1906 
1907           \textcolor{comment}{// using milliseconds to avoid floating-point comparison}
1908           uint64\_t timeNowMs = \hyperlink{group__simulator_gac3635e2e87f7ce316c89290ee1b01d0d}{Simulator::Now} ().\hyperlink{classns3_1_1Time_aba3428a8b6c4c8d9014ce44145081f34}{GetMilliSeconds} ();
1909           uint64\_t timeExpectedMs = \hyperlink{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{m\_itExpectedTime}->GetMilliSeconds ();
1910           \hyperlink{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{m\_itExpectedTime}++;
1911 
1912           uint16\_t observedRsrp = measResults.\hyperlink{structns3_1_1LteRrcSap_1_1MeasResults_a4d7bf8765525493fe5f5cccdbf94ab8b}{rsrpResult};
1913           uint16\_t referenceRsrp = *\hyperlink{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}{m\_itExpectedRsrp};
1914           \hyperlink{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}{m\_itExpectedRsrp}++;
1915 
1916           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (timeNowMs, timeExpectedMs,
1917                                  \textcolor{stringliteral}{"Reporting should not have occurred at this time"});
1918           \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (observedRsrp, referenceRsrp,
1919                                  \textcolor{stringliteral}{"The RSRP observed differs with the reference RSRP"});
1920 
1921         \} \textcolor{comment}{// end of if (!hasEnded)}
1922 
1923     \} \textcolor{comment}{// end of if (report.measResults.measId == correctMeasId)}
1924 
1925 \} \textcolor{comment}{// end of void LteUeMeasurementsHandoverTestCase::RecvMeasurementReportCallback}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4




\subsection{Member Data Documentation}
\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+duration@{m\+\_\+duration}}
\index{m\+\_\+duration@{m\+\_\+duration}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+duration}{m_duration}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+duration\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a938131aebb85de0834fc408341950156}{}\label{classLteUeMeasurementsHandoverTestCase_a938131aebb85de0834fc408341950156}


Duration of simulation. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+expected\+Rsrp@{m\+\_\+expected\+Rsrp}}
\index{m\+\_\+expected\+Rsrp@{m\+\_\+expected\+Rsrp}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+expected\+Rsrp}{m_expectedRsrp}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$uint8\+\_\+t$>$ Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+expected\+Rsrp\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}{}\label{classLteUeMeasurementsHandoverTestCase_ad5e8838ca7085c4c64b0483709da1332}


The list of expected values of R\+S\+RP (in 3\+G\+PP range unit) from the measurement reports received. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+expected\+Source\+Cell\+Meas\+Id@{m\+\_\+expected\+Source\+Cell\+Meas\+Id}}
\index{m\+\_\+expected\+Source\+Cell\+Meas\+Id@{m\+\_\+expected\+Source\+Cell\+Meas\+Id}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+expected\+Source\+Cell\+Meas\+Id}{m_expectedSourceCellMeasId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::set$<$uint8\+\_\+t$>$ Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+expected\+Source\+Cell\+Meas\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_aca431e1ebc93460a53628630a534c474}{}\label{classLteUeMeasurementsHandoverTestCase_aca431e1ebc93460a53628630a534c474}


The list of measurement identities being tested in the source cell. Measurement reports with different measurement identity (e.\+g. from handover algorithm and A\+NR) will be ignored. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+expected\+Target\+Cell\+Meas\+Id@{m\+\_\+expected\+Target\+Cell\+Meas\+Id}}
\index{m\+\_\+expected\+Target\+Cell\+Meas\+Id@{m\+\_\+expected\+Target\+Cell\+Meas\+Id}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+expected\+Target\+Cell\+Meas\+Id}{m_expectedTargetCellMeasId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::set$<$uint8\+\_\+t$>$ Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+expected\+Target\+Cell\+Meas\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a63388a20a3de7adc15907242f6e4a8bf}{}\label{classLteUeMeasurementsHandoverTestCase_a63388a20a3de7adc15907242f6e4a8bf}


The list of measurement identities being tested in the target cell. Measurement reports with different measurement identity (e.\+g. from handover algorithm and A\+NR) will be ignored. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+expected\+Time@{m\+\_\+expected\+Time}}
\index{m\+\_\+expected\+Time@{m\+\_\+expected\+Time}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+expected\+Time}{m_expectedTime}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Time}$>$ Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+expected\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}{}\label{classLteUeMeasurementsHandoverTestCase_a3d9400d416e518e007955fff996b602d}


The list of expected time when measurement reports are received by e\+NodeB. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+it\+Expected\+Rsrp@{m\+\_\+it\+Expected\+Rsrp}}
\index{m\+\_\+it\+Expected\+Rsrp@{m\+\_\+it\+Expected\+Rsrp}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+it\+Expected\+Rsrp}{m_itExpectedRsrp}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$uint8\+\_\+t$>$\+::iterator Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+it\+Expected\+Rsrp\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}{}\label{classLteUeMeasurementsHandoverTestCase_a3536cc572e685490dd4e4fde364f39a3}


Pointer to the element of {\ttfamily m\+\_\+expected\+Rsrp} which is expected to occur next in the simulation. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+it\+Expected\+Time@{m\+\_\+it\+Expected\+Time}}
\index{m\+\_\+it\+Expected\+Time@{m\+\_\+it\+Expected\+Time}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+it\+Expected\+Time}{m_itExpectedTime}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Time}$>$\+::iterator Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+it\+Expected\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}{}\label{classLteUeMeasurementsHandoverTestCase_a95dfbfd7799a6d05744eb034fc490bb3}


Pointer to the element of {\ttfamily m\+\_\+expected\+Time} which is expected to occur next in the simulation. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+source\+Config\+List@{m\+\_\+source\+Config\+List}}
\index{m\+\_\+source\+Config\+List@{m\+\_\+source\+Config\+List}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+source\+Config\+List}{m_sourceConfigList}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std\+::list}$<${\bf Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra}$>$ Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+source\+Config\+List\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_a49bb851aed531dfbf9a9e88284c4f0ef}{}\label{classLteUeMeasurementsHandoverTestCase_a49bb851aed531dfbf9a9e88284c4f0ef}


The list of active report triggering configuration for the source e\+NodeB. 

\index{Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}!m\+\_\+target\+Config\+List@{m\+\_\+target\+Config\+List}}
\index{m\+\_\+target\+Config\+List@{m\+\_\+target\+Config\+List}!Lte\+Ue\+Measurements\+Handover\+Test\+Case@{Lte\+Ue\+Measurements\+Handover\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+target\+Config\+List}{m_targetConfigList}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std\+::list}$<${\bf Lte\+Rrc\+Sap\+::\+Report\+Config\+Eutra}$>$ Lte\+Ue\+Measurements\+Handover\+Test\+Case\+::m\+\_\+target\+Config\+List\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classLteUeMeasurementsHandoverTestCase_ab87f6d3138c51c5996947ef91e25a1b8}{}\label{classLteUeMeasurementsHandoverTestCase_ab87f6d3138c51c5996947ef91e25a1b8}


The list of active report triggering configuration for the target e\+NodeB. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/test/\hyperlink{lte-test-ue-measurements_8h}{lte-\/test-\/ue-\/measurements.\+h}\item 
lte/test/\hyperlink{lte-test-ue-measurements_8cc}{lte-\/test-\/ue-\/measurements.\+cc}\end{DoxyCompactItemize}
