\hypertarget{classFileHeaderTestCase}{}\section{File\+Header\+Test\+Case Class Reference}
\label{classFileHeaderTestCase}\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}


Inheritance diagram for File\+Header\+Test\+Case\+:
% FIG 0


Collaboration diagram for File\+Header\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classFileHeaderTestCase_aed216bec70c09a69cdcfdf6ac910573a}{File\+Header\+Test\+Case} ()
\item 
virtual \hyperlink{classFileHeaderTestCase_ad5ffb6a790733cae10f55cbcb9b443bc}{$\sim$\+File\+Header\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classFileHeaderTestCase_ac7487b9a10d955145e0ab0150aace4d2}{Do\+Setup} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classFileHeaderTestCase_a22d10594519437accb25ffb42e89068c}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
virtual void \hyperlink{classFileHeaderTestCase_a357f92b293e1638ee07ab2cae81700d0}{Do\+Teardown} (void)
\begin{DoxyCompactList}\small\item\em Implementation to do any local setup required for this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\+\_\+test\+Filename}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}!File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}
\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}!File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}
\subsubsection[{\texorpdfstring{File\+Header\+Test\+Case()}{FileHeaderTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}File\+Header\+Test\+Case\+::\+File\+Header\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classFileHeaderTestCase_aed216bec70c09a69cdcfdf6ac910573a}{}\label{classFileHeaderTestCase_aed216bec70c09a69cdcfdf6ac910573a}

\begin{DoxyCode}
432   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check to see that PcapFileHeader is managed correctly"})
433 \{
434 \}
\end{DoxyCode}
\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}!````~File\+Header\+Test\+Case@{$\sim$\+File\+Header\+Test\+Case}}
\index{````~File\+Header\+Test\+Case@{$\sim$\+File\+Header\+Test\+Case}!File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+File\+Header\+Test\+Case()}{~FileHeaderTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}File\+Header\+Test\+Case\+::$\sim$\+File\+Header\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classFileHeaderTestCase_ad5ffb6a790733cae10f55cbcb9b443bc}{}\label{classFileHeaderTestCase_ad5ffb6a790733cae10f55cbcb9b443bc}

\begin{DoxyCode}
437 \{
438 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void File\+Header\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classFileHeaderTestCase_a22d10594519437accb25ffb42e89068c}{}\label{classFileHeaderTestCase_a22d10594519437accb25ffb42e89068c}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
460 \{
461   \hyperlink{classns3_1_1PcapFile}{PcapFile} \hyperlink{buildings__pathloss_8m_aa52d3a6e3de5a80a97c12364caeaa125}{f};
462 
463   \textcolor{comment}{//}
464   \textcolor{comment}{// Create an uninitialized file using previously tested operations}
465   \textcolor{comment}{//}
466   f.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename}, std::ios::out);
467   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a2e00aa080890a0c9c3e9f5bd2d6c21d5}{Fail} (), \textcolor{keyword}{false}, \textcolor{stringliteral}{"Open ("} << 
      \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename} << 
468                          \textcolor{stringliteral}{", \(\backslash\)"std::ios::out\(\backslash\)") returns error"});
469 
470   \textcolor{comment}{//}
471   \textcolor{comment}{// Initialize the pcap file header.}
472   \textcolor{comment}{//}
473   f.\hyperlink{classns3_1_1PcapFile_a80c8adea1baa66e3f730df2927b0fc9b}{Init} (1234, 5678, 7);
474   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a2e00aa080890a0c9c3e9f5bd2d6c21d5}{Fail} (), \textcolor{keyword}{false}, 
475                          \textcolor{stringliteral}{"Init (1234, 5678, 7) returns error"});
476   f.\hyperlink{classns3_1_1PcapFile_ad3b6c28d464742ee1fa3a64628339a5b}{Close} ();
477 
478   \textcolor{comment}{//}
479   \textcolor{comment}{// Take a look and see what was done to the file}
480   \textcolor{comment}{//}
481   FILE *\hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = std::fopen (\hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename}.c\_str (), \textcolor{stringliteral}{"r+b"});
482   \hyperlink{group__testing_ga73d66fb0050a5111453fd144e767b91a}{NS\_TEST\_ASSERT\_MSG\_NE} (p, 0, \textcolor{stringliteral}{"fopen("} << \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename} << \textcolor{stringliteral}{") should
       have been able to open a correctly created pcap file"});
483 
484   uint32\_t val32;
485   uint16\_t val16;
486 
487   \textcolor{comment}{//}
488   \textcolor{comment}{// Because the regression tests require that pcap file output be compared }
489   \textcolor{comment}{// byte-by-byte, we had to decide on a single format for written pcap files.}
490   \textcolor{comment}{// This was little endian.  So we have to do something special with big-}
491   \textcolor{comment}{// endian machines here.}
492   \textcolor{comment}{//}
493   \textcolor{comment}{// When a big endian machine writes a pcap file, it is forced into swap}
494   \textcolor{comment}{// mode and actually writes little endian files.  This is automagically}
495   \textcolor{comment}{// fixed up when using a PcapFile to read the values, but when a big-}
496   \textcolor{comment}{// endian machine reads these values directly, they will be swapped.}
497   \textcolor{comment}{//}
498   \textcolor{comment}{// We can remove this nonsense when we get rid of the pcap-file-comparison}
499   \textcolor{comment}{// regression tests.}
500   \textcolor{comment}{//}
501   \textcolor{comment}{// So, determine the endian-ness of the running system, and if we're on}
502   \textcolor{comment}{// a big-endian machine, swap all of the results below before checking.}
503   \textcolor{comment}{//}
504   \textcolor{keyword}{union }\{
505     uint32\_t a;
506     uint8\_t  \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}[4];
507   \} u;
508 
509   u.a = 1;
510   \textcolor{keywordtype}{bool} bigEndian = u.b[3];
511 
512   \textcolor{keywordtype}{size\_t} result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
513   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() magic number"});
514   \textcolor{keywordflow}{if} (bigEndian) val32 = \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (val32);
515   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, 0xa1b2c3d4, \textcolor{stringliteral}{"Magic number written incorrectly"});
516 
517   result = std::fread (&val16, \textcolor{keyword}{sizeof}(val16), 1, p);
518   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() version major"});
519   \textcolor{keywordflow}{if} (bigEndian) val16 = \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (val16);
520   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val16, 2, \textcolor{stringliteral}{"Version major written incorrectly"});
521 
522   result = std::fread (&val16, \textcolor{keyword}{sizeof}(val16), 1, p);
523   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() version minor"});
524   \textcolor{keywordflow}{if} (bigEndian) val16 = \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (val16);
525   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val16, 4, \textcolor{stringliteral}{"Version minor written incorrectly"});
526 
527   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
528   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() time zone correction"});
529   \textcolor{keywordflow}{if} (bigEndian) val32 = \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (val32);
530   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, 7, \textcolor{stringliteral}{"Version minor written incorrectly"});
531 
532   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
533   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() sig figs"});
534   \textcolor{keywordflow}{if} (bigEndian) val32 = \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (val32);
535   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, 0, \textcolor{stringliteral}{"Sig figs written incorrectly"});
536 
537   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
538   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() snap length"});
539   \textcolor{keywordflow}{if} (bigEndian) val32 = \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (val32);
540   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, 5678, \textcolor{stringliteral}{"Snap length written incorrectly"});
541 
542   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
543   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() data link type"});
544   \textcolor{keywordflow}{if} (bigEndian) val32 = \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (val32);
545   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, 1234, \textcolor{stringliteral}{"Data length type written incorrectly"});
546 
547   std::fclose (p);
548   p = 0;
549 
550   \textcolor{comment}{//}
551   \textcolor{comment}{// We wrote a little-endian file out correctly, now let's see if we can read}
552   \textcolor{comment}{// it back in correctly.}
553   \textcolor{comment}{//}
554   \textcolor{comment}{// As mentioned above, when a big endian machine writes a pcap file, it is }
555   \textcolor{comment}{// forced into swap mode and actually writes little endian files.  This is }
556   \textcolor{comment}{// automagically fixed up when using a PcapFile to read the values, so we }
557   \textcolor{comment}{// don't have to do anything special here.}
558   \textcolor{comment}{//}
559   f.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename}, std::ios::in);
560   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a2e00aa080890a0c9c3e9f5bd2d6c21d5}{Fail} (), \textcolor{keyword}{false}, \textcolor{stringliteral}{"Open (existing-initialized-file "} << 
      \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename} << 
561                          \textcolor{stringliteral}{", \(\backslash\)"std::ios::in\(\backslash\)") returns error"});
562 
563   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_ac32dd628aa09604ae0280ad87bafe105}{GetMagic} (), 0xa1b2c3d4, \textcolor{stringliteral}{"Read back magic number
       incorrectly"});
564   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a182c0d559994abde0e1c5691bbb6f2bd}{GetVersionMajor} (), 2, \textcolor{stringliteral}{"Read back version
       major incorrectly"});
565   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_aec2a5893556ce03eface12adc8ef200d}{GetVersionMinor} (), 4, \textcolor{stringliteral}{"Read back version
       minor incorrectly"});
566   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_af2f76f02140b0cd7820f630382626d51}{GetTimeZoneOffset} (), 7, \textcolor{stringliteral}{"Read back time
       zone offset incorrectly"});
567   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a7074106d671684484d083f5970723c07}{GetSigFigs} (), 0, \textcolor{stringliteral}{"Read back sig figs incorrectly
      "});
568   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a1ad2956ada10389364ee11fae1937e6b}{GetSnapLen} (), 5678, \textcolor{stringliteral}{"Read back snap len
       incorrectly"});
569   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_aa3795e9a87e7a4151fb4d30747eaa072}{GetDataLinkType} (), 1234, \textcolor{stringliteral}{"Read back data
       link type incorrectly"});
570   f.\hyperlink{classns3_1_1PcapFile_ad3b6c28d464742ee1fa3a64628339a5b}{Close} ();
571 
572   \textcolor{comment}{//}
573   \textcolor{comment}{// Re-open the file to erase its contents.}
574   \textcolor{comment}{//}
575   f.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename}, std::ios::out);
576   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a2e00aa080890a0c9c3e9f5bd2d6c21d5}{Fail} (), \textcolor{keyword}{false}, \textcolor{stringliteral}{"Open ("} << 
      \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename} << 
577                          \textcolor{stringliteral}{", \(\backslash\)"std::ios::out\(\backslash\)") returns error"});
578 
579   \textcolor{comment}{//}
580   \textcolor{comment}{// Initialize the pcap file header, turning on swap mode manually to force}
581   \textcolor{comment}{// the pcap file header to be written out in foreign-endian form, whichever}
582   \textcolor{comment}{// endian-ness that might be.  Since big-endian machines are automatically }
583   \textcolor{comment}{// forced into swap mode, the <true> parameter to f.Init() below is actually}
584   \textcolor{comment}{// a no-op and we're always writing foreign-endian files.  In that case, }
585   \textcolor{comment}{// this test case is really just a duplicate of the previous.}
586   \textcolor{comment}{//}
587   f.\hyperlink{classns3_1_1PcapFile_a80c8adea1baa66e3f730df2927b0fc9b}{Init} (1234, 5678, 7, \textcolor{keyword}{true});
588   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a2e00aa080890a0c9c3e9f5bd2d6c21d5}{Fail} (), \textcolor{keyword}{false}, \textcolor{stringliteral}{"Init (1234, 5678, 7) returns error"});
589   f.\hyperlink{classns3_1_1PcapFile_ad3b6c28d464742ee1fa3a64628339a5b}{Close} ();
590 
591   \textcolor{comment}{//}
592   \textcolor{comment}{// Take a look and see what was done to the file.  Everything should now}
593   \textcolor{comment}{// appear byte-swapped.}
594   \textcolor{comment}{//}
595   p = std::fopen (\hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename}.c\_str (), \textcolor{stringliteral}{"r+b"});
596   \hyperlink{group__testing_ga73d66fb0050a5111453fd144e767b91a}{NS\_TEST\_ASSERT\_MSG\_NE} (p, 0, \textcolor{stringliteral}{"fopen("} << \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename} << \textcolor{stringliteral}{") should
       have been able to open a correctly created pcap file"});
597 
598   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
599   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() magic number"});
600   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (uint32\_t (0xa1b2c3d4)), \textcolor{stringliteral}{"Magic number
       written incorrectly"});
601 
602   result = std::fread (&val16, \textcolor{keyword}{sizeof}(val16), 1, p);
603   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() version major"});
604   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val16, \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (uint16\_t (2)), \textcolor{stringliteral}{"Version major written
       incorrectly"});
605 
606   result = std::fread (&val16, \textcolor{keyword}{sizeof}(val16), 1, p);
607   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() version minor"});
608   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val16, \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (uint16\_t (4)), \textcolor{stringliteral}{"Version minor written
       incorrectly"});
609 
610   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
611   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() time zone correction"});
612   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (uint32\_t (7)), \textcolor{stringliteral}{"Version minor written
       incorrectly"});
613 
614   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
615   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() sig figs"});
616   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, 0, \textcolor{stringliteral}{"Sig figs written incorrectly"});
617 
618   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
619   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() snap length"});
620   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (uint32\_t (5678)), \textcolor{stringliteral}{"Snap length written
       incorrectly"});
621 
622   result = std::fread (&val32, \textcolor{keyword}{sizeof}(val32), 1, p);
623   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (result, 1, \textcolor{stringliteral}{"Unable to fread() data link type"});
624   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (val32, \hyperlink{pcap-file-test-suite_8cc_a9baeceaeb66adfc7bddae33a81ad8fa7}{Swap} (uint32\_t (1234)), \textcolor{stringliteral}{"Data length type written
       incorrectly"});
625 
626   std::fclose (p);
627   p = 0;
628 
629   \textcolor{comment}{//}
630   \textcolor{comment}{// We wrote an opposite-endian file out correctly, now let's see if we can read}
631   \textcolor{comment}{// it back in correctly.  Again, in the case of a big-endian machine, we already}
632   \textcolor{comment}{// did this test and it is just a duplicate.  What we don't test on a big endian}
633   \textcolor{comment}{// machine is writing out a big-endian file by default, but we can't do that }
634   \textcolor{comment}{// since it breaks regression testing.}
635   \textcolor{comment}{//}
636   f.\hyperlink{classns3_1_1PcapFile_a064e8494e28e823d0bb4e40549f9f483}{Open} (\hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename}, std::ios::in);
637   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a2e00aa080890a0c9c3e9f5bd2d6c21d5}{Fail} (), \textcolor{keyword}{false}, \textcolor{stringliteral}{"Open (existing-initialized-file "} << 
      \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename} << 
638                          \textcolor{stringliteral}{", \(\backslash\)"std::ios::in\(\backslash\)") returns error"});
639 
640   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_af4e258052b9350be97672eb30f3428c2}{GetSwapMode} (), \textcolor{keyword}{true}, \textcolor{stringliteral}{"Byte-swapped file not
       correctly indicated"});
641 
642   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_ac32dd628aa09604ae0280ad87bafe105}{GetMagic} (), 0xa1b2c3d4, \textcolor{stringliteral}{"Read back magic number
       incorrectly"});
643   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a182c0d559994abde0e1c5691bbb6f2bd}{GetVersionMajor} (), 2, \textcolor{stringliteral}{"Read back version
       major incorrectly"});
644   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_aec2a5893556ce03eface12adc8ef200d}{GetVersionMinor} (), 4, \textcolor{stringliteral}{"Read back version
       minor incorrectly"});
645   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_af2f76f02140b0cd7820f630382626d51}{GetTimeZoneOffset} (), 7, \textcolor{stringliteral}{"Read back time
       zone offset incorrectly"});
646   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a7074106d671684484d083f5970723c07}{GetSigFigs} (), 0, \textcolor{stringliteral}{"Read back sig figs incorrectly
      "});
647   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_a1ad2956ada10389364ee11fae1937e6b}{GetSnapLen} (), 5678, \textcolor{stringliteral}{"Read back snap len
       incorrectly"});
648   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (f.\hyperlink{classns3_1_1PcapFile_aa3795e9a87e7a4151fb4d30747eaa072}{GetDataLinkType} (), 1234, \textcolor{stringliteral}{"Read back data
       link type incorrectly"});
649 
650   f.\hyperlink{classns3_1_1PcapFile_ad3b6c28d464742ee1fa3a64628339a5b}{Close} ();
651 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}!Do\+Setup@{Do\+Setup}}
\index{Do\+Setup@{Do\+Setup}!File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Setup(void)}{DoSetup(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void File\+Header\+Test\+Case\+::\+Do\+Setup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classFileHeaderTestCase_ac7487b9a10d955145e0ab0150aace4d2}{}\label{classFileHeaderTestCase_ac7487b9a10d955145e0ab0150aace4d2}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test setup before Do\+Run is invoked. 

Reimplemented from \hyperlink{classns3_1_1TestCase_a4a7e32ad32a10a508910815cd38e9177}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
442 \{
443   std::stringstream filename;
444   uint32\_t \hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n} = rand ();
445   filename << \hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n};
446   \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename} = \hyperlink{classns3_1_1TestCase_a8a04695a6fb9ba0f89e28e9523963f88}{CreateTempDirFilename} (filename.str () + \textcolor{stringliteral}{".pcap"});
447 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}!Do\+Teardown@{Do\+Teardown}}
\index{Do\+Teardown@{Do\+Teardown}!File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Teardown(void)}{DoTeardown(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void File\+Header\+Test\+Case\+::\+Do\+Teardown (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classFileHeaderTestCase_a357f92b293e1638ee07ab2cae81700d0}{}\label{classFileHeaderTestCase_a357f92b293e1638ee07ab2cae81700d0}


Implementation to do any local setup required for this Test\+Case. 

Subclasses should override this method to perform any costly per-\/test teardown 

Reimplemented from \hyperlink{classns3_1_1TestCase_a8917f1604e28d312a8086f76291e3c46}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
451 \{
452   \textcolor{keywordflow}{if} (\textcolor{keyword}{remove} (\hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename}.c\_str ()))
453     \{
454       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Failed to delete file "} << \hyperlink{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{m\_testFilename});
455     \}
456 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{File\+Header\+Test\+Case@{File\+Header\+Test\+Case}!m\+\_\+test\+Filename@{m\+\_\+test\+Filename}}
\index{m\+\_\+test\+Filename@{m\+\_\+test\+Filename}!File\+Header\+Test\+Case@{File\+Header\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+test\+Filename}{m_testFilename}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string File\+Header\+Test\+Case\+::m\+\_\+test\+Filename\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}{}\label{classFileHeaderTestCase_a4ab3078ae75680fcc90a3eca9f273cd2}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
network/test/\hyperlink{pcap-file-test-suite_8cc}{pcap-\/file-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
