\hypertarget{fatal-impl_8cc}{}\section{core/model/fatal-\/impl.cc File Reference}
\label{fatal-impl_8cc}\index{core/model/fatal-\/impl.\+cc@{core/model/fatal-\/impl.\+cc}}


Implementation of \hyperlink{group__fatalimpl_gad552ca3d6d85b95147b8c6a2eb4d4579}{Register\+Stream()}, \hyperlink{group__fatalimpl_ga2bf70e98e990f01912527b4ccfac27d0}{Unregister\+Stream()}, and \hyperlink{group__fatalimpl_gad96fb19ef26235aaccd15e6d2a72382f}{Flush\+Streams()}; see Implementation note!  


{\ttfamily \#include \char`\"{}fatal-\/impl.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}log.\+h\char`\"{}}\\*
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$list$>$}\\*
{\ttfamily \#include $<$cstdlib$>$}\\*
{\ttfamily \#include $<$cstdio$>$}\\*
{\ttfamily \#include $<$csignal$>$}\\*
Include dependency graph for fatal-\/impl.cc\+:
% FIG 0
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \hyperlink{namespacens3}{ns3}
\begin{DoxyCompactList}\small\item\em Here are defined all data structures needed by an O\+L\+SR node. \end{DoxyCompactList}\item 
 \hyperlink{namespacens3_1_1FatalImpl}{ns3\+::\+Fatal\+Impl}
\begin{DoxyCompactList}\small\item\em Implementation namespace for fatal error handlers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespacens3_aef38fba055d587c1ab583048e948f157}{ns3\+::\+N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Fatal\+Impl\char`\"{})
\item 
void \hyperlink{group__fatalimpl_gad552ca3d6d85b95147b8c6a2eb4d4579}{ns3\+::\+Fatal\+Impl\+::\+Register\+Stream} (std\+::ostream $\ast$stream)
\begin{DoxyCompactList}\small\item\em Register a stream to be flushed on abnormal exit. \end{DoxyCompactList}\item 
void \hyperlink{group__fatalimpl_ga2bf70e98e990f01912527b4ccfac27d0}{ns3\+::\+Fatal\+Impl\+::\+Unregister\+Stream} (std\+::ostream $\ast$stream)
\begin{DoxyCompactList}\small\item\em Unregister a stream for flushing on abnormal exit. \end{DoxyCompactList}\item 
void \hyperlink{group__fatalimpl_gad96fb19ef26235aaccd15e6d2a72382f}{ns3\+::\+Fatal\+Impl\+::\+Flush\+Streams} (void)
\begin{DoxyCompactList}\small\item\em Flush all currently registered streams. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implementation of \hyperlink{group__fatalimpl_gad552ca3d6d85b95147b8c6a2eb4d4579}{Register\+Stream()}, \hyperlink{group__fatalimpl_ga2bf70e98e990f01912527b4ccfac27d0}{Unregister\+Stream()}, and \hyperlink{group__fatalimpl_gad96fb19ef26235aaccd15e6d2a72382f}{Flush\+Streams()}; see Implementation note! 

\begin{DoxyNote}{Note}
Implementation.
\end{DoxyNote}
The singleton pattern we use here is tricky because we have to ensure\+:


\begin{DoxyItemize}
\item \hyperlink{group__fatalimpl_gad552ca3d6d85b95147b8c6a2eb4d4579}{Register\+Stream()} succeeds, even if called before {\ttfamily \hyperlink{namespacemodulegen____gcc__ILP32_aadf64690f6ba129a8d42469ea6da5a2d}{main()}} enters and before any constructor run in this file.
\item \hyperlink{group__fatalimpl_ga2bf70e98e990f01912527b4ccfac27d0}{Unregister\+Stream()} succeeds, whether or not \hyperlink{group__fatalimpl_gad96fb19ef26235aaccd15e6d2a72382f}{Flush\+Streams()} has been called.
\item All memory allocated with {\ttfamily new} is deleted properly before program exit.
\end{DoxyItemize}

This is why we go through all the painful hoops below. 