\hypertarget{classns3_1_1EpcX2}{}\section{ns3\+:\+:Epc\+X2 Class Reference}
\label{classns3_1_1EpcX2}\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}


{\ttfamily \#include $<$epc-\/x2.\+h$>$}



Inheritance diagram for ns3\+:\+:Epc\+X2\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Epc\+X2\+:
% FIG 1
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{classns3_1_1EpcX2_ada91fb41804269c279b9214a6f36a0cd}{Receive\+Traced\+Callback}) (uint16\+\_\+t source\+Cell\+Id, uint16\+\_\+t target\+Cell\+Id, uint32\+\_\+t bytes, uint64\+\_\+t \hyperlink{mmwave_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay}, bool \hyperlink{topology-example-sim_8cc_a26c65296e316af77b787dc77469bb2a4}{data})
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1EpcX2_abb1f73b452bf9552772b910e0aa5cdd5}{Epc\+X2} ()
\item 
virtual \hyperlink{classns3_1_1EpcX2_a3b818e925c4a5894a011d53af38bdde5}{$\sim$\+Epc\+X2} (void)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_accf3543ad5e0150d238edd6bbf626435}{Do\+Dispose} (void)
\item 
void \hyperlink{classns3_1_1EpcX2_ae91f9247984c4e0f55f5712cb062074e}{Set\+Epc\+X2\+Sap\+User} (\hyperlink{classns3_1_1EpcX2SapUser}{Epc\+X2\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
\hyperlink{classns3_1_1EpcX2SapProvider}{Epc\+X2\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1EpcX2_a8e0c457eda78448e403f6769be8e25c9}{Get\+Epc\+X2\+Sap\+Provider} ()
\item 
\hyperlink{classns3_1_1EpcX2PdcpProvider}{Epc\+X2\+Pdcp\+Provider} $\ast$ \hyperlink{classns3_1_1EpcX2_a22c4df71e275c74e0d27fc01b5a72366}{Get\+Epc\+X2\+Pdcp\+Provider} ()
\item 
void \hyperlink{classns3_1_1EpcX2_ae17788af334e346dc55c027034e46843}{Set\+Epc\+X2\+Pdcp\+User} (\hyperlink{classns3_1_1EpcX2PdcpUser}{Epc\+X2\+Pdcp\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
\hyperlink{classns3_1_1EpcX2RlcProvider}{Epc\+X2\+Rlc\+Provider} $\ast$ \hyperlink{classns3_1_1EpcX2_a5b8041e9ebefadbacbe216665bea7b90}{Get\+Epc\+X2\+Rlc\+Provider} ()
\item 
void \hyperlink{classns3_1_1EpcX2_aa0b669dc4ab9143970d80d4cdbcd076f}{Set\+Mc\+Epc\+X2\+Rlc\+User} (uint32\+\_\+t teid, \hyperlink{classns3_1_1EpcX2RlcUser}{Epc\+X2\+Rlc\+User} $\ast$rlc\+User)
\item 
void \hyperlink{classns3_1_1EpcX2_aa3a4bab218092ffdb478bf65066e2c33}{Set\+Mc\+Epc\+X2\+Rlc\+User\+\_\+2} (uint32\+\_\+t teid, \hyperlink{classns3_1_1EpcX2RlcUser}{Epc\+X2\+Rlc\+User} $\ast$rlc\+User)
\item 
void \hyperlink{classns3_1_1EpcX2_a9b7b0b62fb4a37e4551e159d9757a87a}{Set\+Mc\+Epc\+X2\+Pdcp\+User} (uint32\+\_\+t teid, \hyperlink{classns3_1_1EpcX2PdcpUser}{Epc\+X2\+Pdcp\+User} $\ast$pdcp\+User)
\item 
void \hyperlink{classns3_1_1EpcX2_afbf2008beffd05e00caa03f9be34cd40}{Set\+Mc\+Epc\+X2\+Pdcp\+User\+\_\+2} (uint32\+\_\+t teid, \hyperlink{classns3_1_1EpcX2PdcpUser}{Epc\+X2\+Pdcp\+User} $\ast$pdcp\+User)
\item 
void \hyperlink{classns3_1_1EpcX2_a4bcd4423802914da0356051ecf79d2f1}{Add\+X2\+Interface} (uint16\+\_\+t enb1\+Cell\+Id, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} enb1\+X2\+Address, uint16\+\_\+t enb2\+Cell\+Id, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} enb2\+X2\+Address)
\item 
void \hyperlink{classns3_1_1EpcX2_a72bf05af65397dab7bc65df72bb09ebf}{Recv\+From\+X2c\+Socket} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\item 
void \hyperlink{classns3_1_1EpcX2_af7142276a4a54af090466d51a31c796f}{Recv\+From\+X2u\+Socket} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1EpcX2_a4c5cfede886af2ff95ede07dda646e7d}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classns3_1_1EpcX2_a3cc979cc2ca388967ddb4ca05f2d601d}{is\+Additional\+Mm\+Wave} =\hyperlink{lte__cqi__generation_8m_ab1bef239d413c4da139c4bac92cd657a}{false}
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a11444fc4651106c67e0d0566c8b61e1b}{Do\+Receive\+Assistant\+Information} (\hyperlink{structns3_1_1EpcX2Sap_1_1AssistantInformationForSplitting}{Epc\+X2\+Sap\+::\+Assistant\+Information\+For\+Splitting} info)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a8008ce25fcdf78a02d7945768ae3084b}{Do\+Send\+Handover\+Request} (\hyperlink{structns3_1_1EpcX2Sap_1_1HandoverRequestParams}{Epc\+X2\+Sap\+Provider\+::\+Handover\+Request\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a856195e67f43bc851705e045eb876639}{Do\+Send\+Rlc\+Setup\+Request} (\hyperlink{structns3_1_1EpcX2Sap_1_1RlcSetupRequest}{Epc\+X2\+Sap\+Provider\+::\+Rlc\+Setup\+Request} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a46a90945c5f509e7098cb4668294b835}{Do\+Send\+Rlc\+Setup\+Completed} (\hyperlink{structns3_1_1EpcX2Sap_1_1UeDataParams}{Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params})
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a0c10744b59810accae456d5e7a5ebf3b}{Do\+Send\+Handover\+Request\+Ack} (\hyperlink{structns3_1_1EpcX2Sap_1_1HandoverRequestAckParams}{Epc\+X2\+Sap\+Provider\+::\+Handover\+Request\+Ack\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a6b426becb1b31625fc2aada18d825d70}{Do\+Send\+Handover\+Preparation\+Failure} (\hyperlink{structns3_1_1EpcX2Sap_1_1HandoverPreparationFailureParams}{Epc\+X2\+Sap\+Provider\+::\+Handover\+Preparation\+Failure\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_adab34a68d321212ad653935239fedd4e}{Do\+Send\+Sn\+Status\+Transfer} (\hyperlink{structns3_1_1EpcX2Sap_1_1SnStatusTransferParams}{Epc\+X2\+Sap\+Provider\+::\+Sn\+Status\+Transfer\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a21fd33c24044a655a707fc0b68961fef}{Do\+Send\+Ue\+Context\+Release} (\hyperlink{structns3_1_1EpcX2Sap_1_1UeContextReleaseParams}{Epc\+X2\+Sap\+Provider\+::\+Ue\+Context\+Release\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_aa6e72c1fe568b09e0527de001ac33d8e}{Do\+Send\+Load\+Information} (\hyperlink{structns3_1_1EpcX2Sap_1_1LoadInformationParams}{Epc\+X2\+Sap\+Provider\+::\+Load\+Information\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a556c1c456108f8e1dff65289073d9b55}{Do\+Send\+Resource\+Status\+Update} (\hyperlink{structns3_1_1EpcX2Sap_1_1ResourceStatusUpdateParams}{Epc\+X2\+Sap\+Provider\+::\+Resource\+Status\+Update\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a8a20256ed59b6f7f03095c3386ecc6d1}{Do\+Send\+Ue\+Data} (\hyperlink{structns3_1_1EpcX2Sap_1_1UeDataParams}{Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a641588d125f600122d56e34fa1fddd5c}{Do\+Send\+Mc\+Pdcp\+Pdu} (\hyperlink{structns3_1_1EpcX2Sap_1_1UeDataParams}{Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a48c9322fd4cfc56fbcfb78c98ee1b7f6}{Do\+Receive\+Mc\+Pdcp\+Sdu} (\hyperlink{structns3_1_1EpcX2Sap_1_1UeDataParams}{Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a54d091a779cfe55461d28fa9e81fd6ca}{Do\+Send\+Ue\+Sinr\+Update} (\hyperlink{structns3_1_1EpcX2Sap_1_1UeImsiSinrParams}{Epc\+X2\+Sap\+::\+Ue\+Imsi\+Sinr\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a7f811829874466c79c17a804dead4e90}{Do\+Send\+Mc\+Handover\+Request} (\hyperlink{structns3_1_1EpcX2Sap_1_1SecondaryHandoverParams}{Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_aa2ab1580f97cbebf950702b289032f9f}{Do\+Notify\+Lte\+Mm\+Wave\+Handover\+Completed} (\hyperlink{structns3_1_1EpcX2Sap_1_1SecondaryHandoverParams}{Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a89925408a45ab7cfaf98db08ad859e94}{Do\+Notify\+Coordinator\+Handover\+Failed} (\hyperlink{structns3_1_1EpcX2Sap_1_1HandoverFailedParams}{Epc\+X2\+Sap\+Provider\+::\+Handover\+Failed\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_abf288cbe6a364c4e9da3329f96dacfc5}{Do\+Send\+Switch\+Connection\+To\+Mm\+Wave} (\hyperlink{structns3_1_1EpcX2Sap_1_1SwitchConnectionParams}{Epc\+X2\+Sap\+Provider\+::\+Switch\+Connection\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a2ab46d3ece4e6af595249144a843ffbf}{Do\+Send\+Secondary\+Cell\+Handover\+Completed} (\hyperlink{structns3_1_1EpcX2Sap_1_1SecondaryHandoverCompletedParams}{Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Completed\+Params} params)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_a3011b0d30c590a60723b205ae0e9fd85}{Do\+Add\+Teid\+To\+Be\+Forwarded} (uint32\+\_\+t teid, uint16\+\_\+t target\+Cell\+Id)
\item 
virtual void \hyperlink{classns3_1_1EpcX2_aec62d502e62740d99b98ef7e64a90b50}{Do\+Remove\+Teid\+To\+Be\+Forwarded} (uint32\+\_\+t teid)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1EpcX2SapUser}{Epc\+X2\+Sap\+User} $\ast$ \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\+\_\+x2\+Sap\+User}
\item 
\hyperlink{classns3_1_1EpcX2SapProvider}{Epc\+X2\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1EpcX2_a0f18e63c998d9dc8771e80d325870fc2}{m\+\_\+x2\+Sap\+Provider}
\item 
std\+::map$<$ uint32\+\_\+t, \hyperlink{classns3_1_1EpcX2PdcpUser}{Epc\+X2\+Pdcp\+User} $\ast$ $>$ \hyperlink{classns3_1_1EpcX2_a0f79f52694f920d418c077441c73e2e6}{m\+\_\+x2\+Pdcp\+User\+Map}
\item 
std\+::map$<$ uint32\+\_\+t, \hyperlink{classns3_1_1EpcX2PdcpUser}{Epc\+X2\+Pdcp\+User} $\ast$ $>$ \hyperlink{classns3_1_1EpcX2_ab5cecb7cbdd0806ce336e52433751db1}{m\+\_\+x2\+Pdcp\+User\+Map\+\_\+2}
\item 
\hyperlink{classns3_1_1EpcX2PdcpProvider}{Epc\+X2\+Pdcp\+Provider} $\ast$ \hyperlink{classns3_1_1EpcX2_a18e51cbbd2e384251d4f4bdebde0b23d}{m\+\_\+x2\+Pdcp\+Provider}
\item 
\hyperlink{classns3_1_1EpcX2PdcpUser}{Epc\+X2\+Pdcp\+User} $\ast$ \hyperlink{classns3_1_1EpcX2_a520ef9a6812a81c5d122833ccae05bfb}{m\+\_\+x2\+Pdcp\+User}
\item 
std\+::map$<$ uint32\+\_\+t, \hyperlink{classns3_1_1EpcX2RlcUser}{Epc\+X2\+Rlc\+User} $\ast$ $>$ \hyperlink{classns3_1_1EpcX2_a1fca08301d8d13f29a81d66250e34746}{m\+\_\+x2\+Rlc\+User\+Map}
\item 
std\+::map$<$ uint32\+\_\+t, \hyperlink{classns3_1_1EpcX2RlcUser}{Epc\+X2\+Rlc\+User} $\ast$ $>$ \hyperlink{classns3_1_1EpcX2_a71669e6a9be4d7640d05d8ff9fc21e62}{m\+\_\+x2\+Rlc\+User\+Map\+\_\+2}
\item 
\hyperlink{classns3_1_1EpcX2RlcProvider}{Epc\+X2\+Rlc\+Provider} $\ast$ \hyperlink{classns3_1_1EpcX2_aa1bb6d6dbb18d9e41151177365109bf8}{m\+\_\+x2\+Rlc\+Provider}
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1X2IfaceInfo}{X2\+Iface\+Info} $>$ $>$ \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\+\_\+x2\+Interface\+Sockets}
\item 
std\+::map$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1X2CellInfo}{X2\+Cell\+Info} $>$ $>$ \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\+\_\+x2\+Interface\+Cell\+Ids}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\+\_\+x2c\+Udp\+Port}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}{m\+\_\+x2u\+Udp\+Port}
\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ uint16\+\_\+t, uint16\+\_\+t, uint32\+\_\+t, uint64\+\_\+t, bool $>$ \hyperlink{classns3_1_1EpcX2_a00f11080fe6a1d7020bfae006445eb59}{m\+\_\+rx\+Pdu}
\item 
std\+::map$<$ uint32\+\_\+t, uint16\+\_\+t $>$ \hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\+\_\+teid\+To\+Be\+Forwarded\+Map}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1EpcX2_a5fa3eadb39e71e0c9f7a469a8315c690}{Epc\+X2\+Specific\+Epc\+X2\+Sap\+Provider$<$ Epc\+X2 $>$}
\item 
class \hyperlink{classns3_1_1EpcX2_a372bb6d7b4f9b08802172b6cf02ecd2d}{Epc\+X2\+Pdcp\+Specific\+Provider$<$ Epc\+X2 $>$}
\item 
class \hyperlink{classns3_1_1EpcX2_ad723f727ad6075fde297057b65793220}{Epc\+X2\+Rlc\+Specific\+Provider$<$ Epc\+X2 $>$}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
This entity is installed inside an e\+NB and provides the functionality for the X2 interface 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Receive\+Traced\+Callback@{Receive\+Traced\+Callback}}
\index{Receive\+Traced\+Callback@{Receive\+Traced\+Callback}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Receive\+Traced\+Callback}{ReceiveTracedCallback}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$  ns3\+::\+Epc\+X2\+::\+Receive\+Traced\+Callback) (uint16\+\_\+t source\+Cell\+Id, uint16\+\_\+t target\+Cell\+Id, uint32\+\_\+t bytes, uint64\+\_\+t {\bf delay}, bool {\bf data})}\hypertarget{classns3_1_1EpcX2_ada91fb41804269c279b9214a6f36a0cd}{}\label{classns3_1_1EpcX2_ada91fb41804269c279b9214a6f36a0cd}
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback} signature for


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em source} & \\
\hline
\mbox{\tt in}  & {\em target} & \\
\hline
\mbox{\tt in}  & {\em bytes} & The packet size. \\
\hline
\mbox{\tt in}  & {\em delay} & Delay since sender timestamp, in ns. \\
\hline
\end{DoxyParams}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Epc\+X2@{Epc\+X2}}
\index{Epc\+X2@{Epc\+X2}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Epc\+X2()}{EpcX2()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Epc\+X2\+::\+Epc\+X2 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_abb1f73b452bf9552772b910e0aa5cdd5}{}\label{classns3_1_1EpcX2_abb1f73b452bf9552772b910e0aa5cdd5}
Constructor 
\begin{DoxyCode}
91   : \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort} (4444),
92     \hyperlink{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}{m\_x2uUdpPort} (2152)
93 \{
94   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
95 
96   \hyperlink{classns3_1_1EpcX2_a0f18e63c998d9dc8771e80d325870fc2}{m\_x2SapProvider} = \textcolor{keyword}{new} \hyperlink{classns3_1_1EpcX2_a5fa3eadb39e71e0c9f7a469a8315c690}{EpcX2SpecificEpcX2SapProvider<EpcX2>}
       (\textcolor{keyword}{this});
97   \hyperlink{classns3_1_1EpcX2_a18e51cbbd2e384251d4f4bdebde0b23d}{m\_x2PdcpProvider} = \textcolor{keyword}{new} \hyperlink{classns3_1_1EpcX2_a372bb6d7b4f9b08802172b6cf02ecd2d}{EpcX2PdcpSpecificProvider<EpcX2>} (\textcolor{keyword}{
      this});
98   \hyperlink{classns3_1_1EpcX2_aa1bb6d6dbb18d9e41151177365109bf8}{m\_x2RlcProvider} = \textcolor{keyword}{new} \hyperlink{classns3_1_1EpcX2_ad723f727ad6075fde297057b65793220}{EpcX2RlcSpecificProvider<EpcX2>} (\textcolor{keyword}{this}
      );
99   \hyperlink{classns3_1_1EpcX2_a520ef9a6812a81c5d122833ccae05bfb}{m\_x2PdcpUser} =0 ;\textcolor{comment}{//sjkang1114}
100 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!````~Epc\+X2@{$\sim$\+Epc\+X2}}
\index{````~Epc\+X2@{$\sim$\+Epc\+X2}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{$\sim$\+Epc\+X2(void)}{~EpcX2(void)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Epc\+X2\+::$\sim$\+Epc\+X2 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a3b818e925c4a5894a011d53af38bdde5}{}\label{classns3_1_1EpcX2_a3b818e925c4a5894a011d53af38bdde5}
Destructor 
\begin{DoxyCode}
103 \{
104   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
105 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Add\+X2\+Interface@{Add\+X2\+Interface}}
\index{Add\+X2\+Interface@{Add\+X2\+Interface}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Add\+X2\+Interface(uint16\+\_\+t enb1\+Cell\+Id, Ipv4\+Address enb1\+X2\+Address, uint16\+\_\+t enb2\+Cell\+Id, Ipv4\+Address enb2\+X2\+Address)}{AddX2Interface(uint16_t enb1CellId, Ipv4Address enb1X2Address, uint16_t enb2CellId, Ipv4Address enb2X2Address)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Add\+X2\+Interface (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{enb1\+Cell\+Id, }
\item[{{\bf Ipv4\+Address}}]{enb1\+X2\+Address, }
\item[{uint16\+\_\+t}]{enb2\+Cell\+Id, }
\item[{{\bf Ipv4\+Address}}]{enb2\+X2\+Address}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_a4bcd4423802914da0356051ecf79d2f1}{}\label{classns3_1_1EpcX2_a4bcd4423802914da0356051ecf79d2f1}
Add an X2 interface to this E\+PC X2 entity 
\begin{DoxyParams}{Parameters}
{\em enb1\+Cell\+Id} & the cell ID of the current e\+NodeB \\
\hline
{\em enb1\+X2\+Address} & the address of the current e\+NodeB \\
\hline
{\em enb2\+Cell\+Id} & the cell ID of the neighbouring e\+NodeB \\
\hline
{\em enb2\+X2\+Address} & the address of the neighbouring e\+NodeB \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
210 \{
211   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << localCellId << localX2Address << remoteCellId << remoteX2Address)
      ;
212 
213   \textcolor{keywordtype}{int} retval;
214 
215   \textcolor{comment}{// Get local eNB where this X2 entity belongs to}
216   Ptr<Node> localEnb = GetObject<Node> ();
217 \textcolor{comment}{//std::cout<< "-------------------------------------------------------------" <<std::endl;}
218   \textcolor{comment}{// Create X2-C socket for the local eNB}
219   Ptr<Socket> localX2cSocket = \hyperlink{classns3_1_1Socket_ad448a62bb50ad3dbac59c879a885a8d2}{Socket::CreateSocket} (localEnb, 
      \hyperlink{classns3_1_1TypeId_a119cf99c20931fdc294602cd360b180e}{TypeId::LookupByName} (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}));
220   retval = localX2cSocket->Bind (InetSocketAddress (localX2Address, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
221   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (retval == 0);
222   localX2cSocket->SetRecvCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1EpcX2_a72bf05af65397dab7bc65df72bb09ebf}{EpcX2::RecvFromX2cSocket}, \textcolor{keyword}{this}));
223 
224   \textcolor{comment}{// Create X2-U socket for the local eNB}
225   Ptr<Socket> localX2uSocket = \hyperlink{classns3_1_1Socket_ad448a62bb50ad3dbac59c879a885a8d2}{Socket::CreateSocket} (localEnb, 
      \hyperlink{classns3_1_1TypeId_a119cf99c20931fdc294602cd360b180e}{TypeId::LookupByName} (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}));
226   retval = localX2uSocket->Bind (InetSocketAddress (localX2Address, \hyperlink{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}{m\_x2uUdpPort}));
227   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (retval == 0);
228   localX2uSocket->SetRecvCallback (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1EpcX2_af7142276a4a54af090466d51a31c796f}{EpcX2::RecvFromX2uSocket}, \textcolor{keyword}{this}));
229 
230 
231   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (remoteCellId) == 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
232                  \textcolor{stringliteral}{"Mapping for remoteCellId = "} << remoteCellId << \textcolor{stringliteral}{" is already known"});
233   \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [remoteCellId] = Create<X2IfaceInfo> (remoteX2Address, 
      localX2cSocket, localX2uSocket);
234 
235   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds}.find (localX2cSocket) == 
      \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds}.end (),
236                  \textcolor{stringliteral}{"Mapping for control plane localSocket = "} << localX2cSocket << \textcolor{stringliteral}{" is already known"});
237   \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds} [localX2cSocket] = Create<X2CellInfo> (localCellId, remoteCellId
      );
238 
239   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (m\_x2InterfaceCellIds.find (localX2uSocket) == m\_x2InterfaceCellIds.end (),
240                  \textcolor{stringliteral}{"Mapping for data plane localSocket = "} << localX2uSocket << \textcolor{stringliteral}{" is already known"});
241   m\_x2InterfaceCellIds [localX2uSocket] = Create<X2CellInfo> (localCellId, remoteCellId);
242 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Add\+Teid\+To\+Be\+Forwarded@{Do\+Add\+Teid\+To\+Be\+Forwarded}}
\index{Do\+Add\+Teid\+To\+Be\+Forwarded@{Do\+Add\+Teid\+To\+Be\+Forwarded}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Add\+Teid\+To\+Be\+Forwarded(uint32\+\_\+t teid, uint16\+\_\+t target\+Cell\+Id)}{DoAddTeidToBeForwarded(uint32_t teid, uint16_t targetCellId)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Add\+Teid\+To\+Be\+Forwarded (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{teid, }
\item[{uint16\+\_\+t}]{target\+Cell\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a3011b0d30c590a60723b205ae0e9fd85}{}\label{classns3_1_1EpcX2_a3011b0d30c590a60723b205ae0e9fd85}

\begin{DoxyCode}
246 \{
247   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION}(\textcolor{keyword}{this} << \textcolor{stringliteral}{" add an entry to the map of teids to be forwarded: teid "} << 
      gtpTeid << \textcolor{stringliteral}{" targetCellId "} << targetCellId);
248   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG}(\hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.find(gtpTeid) == 
      \hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.end(), \textcolor{stringliteral}{"TEID already in the map"});
249   \hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.insert(std::pair<uint32\_t, uint16\_t> (gtpTeid, targetCellId)
      );
250 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_accf3543ad5e0150d238edd6bbf626435}{}\label{classns3_1_1EpcX2_accf3543ad5e0150d238edd6bbf626435}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1EpcX2_accf3543ad5e0150d238edd6bbf626435}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. sjkang 

Reimplemented from \hyperlink{classns3_1_1Object_a475d429a75d302d4775f4ae32479b287}{ns3\+::\+Object}.


\begin{DoxyCode}
109 \{
110   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
111 
112   \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.clear ();
113   \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds}.clear ();
114   \hyperlink{classns3_1_1EpcX2_a1fca08301d8d13f29a81d66250e34746}{m\_x2RlcUserMap}.clear ();
115   \hyperlink{classns3_1_1EpcX2_a0f79f52694f920d418c077441c73e2e6}{m\_x2PdcpUserMap}.clear ();
116   \hyperlink{classns3_1_1EpcX2_a71669e6a9be4d7640d05d8ff9fc21e62}{m\_x2RlcUserMap\_2}.clear (); \textcolor{comment}{//sjkang1016}
117   \hyperlink{classns3_1_1EpcX2_ab5cecb7cbdd0806ce336e52433751db1}{m\_x2PdcpUserMap\_2}.clear ();\textcolor{comment}{//sjakng1016}
118 
119   \textcolor{keyword}{delete} \hyperlink{classns3_1_1EpcX2_a0f18e63c998d9dc8771e80d325870fc2}{m\_x2SapProvider};
120   \textcolor{keyword}{delete} \hyperlink{classns3_1_1EpcX2_aa1bb6d6dbb18d9e41151177365109bf8}{m\_x2RlcProvider};
121   \textcolor{keyword}{delete} \hyperlink{classns3_1_1EpcX2_a18e51cbbd2e384251d4f4bdebde0b23d}{m\_x2PdcpProvider};
122   \textcolor{keyword}{delete} \hyperlink{classns3_1_1EpcX2_a520ef9a6812a81c5d122833ccae05bfb}{m\_x2PdcpUser}; 
123 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Notify\+Coordinator\+Handover\+Failed@{Do\+Notify\+Coordinator\+Handover\+Failed}}
\index{Do\+Notify\+Coordinator\+Handover\+Failed@{Do\+Notify\+Coordinator\+Handover\+Failed}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Notify\+Coordinator\+Handover\+Failed(\+Epc\+X2\+Sap\+Provider\+::\+Handover\+Failed\+Params params)}{DoNotifyCoordinatorHandoverFailed(EpcX2SapProvider::HandoverFailedParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Notify\+Coordinator\+Handover\+Failed (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Handover\+Failed\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a89925408a45ab7cfaf98db08ad859e94}{}\label{classns3_1_1EpcX2_a89925408a45ab7cfaf98db08ad859e94}

\begin{DoxyCode}
990 \{
991   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
992 
993   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"coordinator cellId "} << params.coordinatorId);
994   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
995   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
996   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"imsi = "} << params.imsi);
997 
998   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.coordinatorId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
999                  \textcolor{stringliteral}{"Socket infos not defined for coordinatorId = "} << params.coordinatorId);
1000 
1001   Ptr<Socket> localSocket = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.coordinatorId]->
      m\_localCtrlPlaneSocket;
1002   Ipv4Address remoteIpAddr = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.coordinatorId]->
      m\_remoteIpAddr;
1003 
1004   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"localSocket = "} << localSocket);
1005   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"remoteIpAddr = "} << remoteIpAddr);
1006 
1007   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: NOTIFY HANDOVER FAILED"});
1008 
1009   \textcolor{comment}{// Build the X2 message}
1010   EpcX2NotifyCoordinatorHandoverFailedHeader x2failHeader;
1011   x2failHeader.SetSourceCellId (params.sourceCellId);
1012   x2failHeader.SetTargetCellId (params.targetCellId);
1013   x2failHeader.SetImsi (params.imsi);
1014 
1015   EpcX2Header x2Header;
1016   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a32ae3f1f4f837ceb0b22d29a5acedaf5}{EpcX2Header::UnsuccessfulOutcome});
1017   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da92595dd83185f3f46f1ec3172b19148b}{EpcX2Header::NotifyCoordinatorHandoverFailed}
      );
1018   x2Header.SetLengthOfIes (x2failHeader.GetLengthOfIes ());
1019   x2Header.SetNumberOfIes (x2failHeader.GetNumberOfIes ());
1020 
1021   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1022   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 HandoverPrepFail header: "} << x2failHeader);
1023 
1024   \textcolor{comment}{// Build the X2 packet}
1025   Ptr<Packet> packet = Create <Packet> ();
1026   packet->AddHeader (x2failHeader);
1027   packet->AddHeader (x2Header);
1028 
1029   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1030   packet->AddPacketTag (tag);
1031 
1032   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1033 
1034   \textcolor{comment}{// Send the X2 message through the socket}
1035   localSocket->SendTo (packet, 0, InetSocketAddress (remoteIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1036 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Notify\+Lte\+Mm\+Wave\+Handover\+Completed@{Do\+Notify\+Lte\+Mm\+Wave\+Handover\+Completed}}
\index{Do\+Notify\+Lte\+Mm\+Wave\+Handover\+Completed@{Do\+Notify\+Lte\+Mm\+Wave\+Handover\+Completed}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Notify\+Lte\+Mm\+Wave\+Handover\+Completed(\+Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Params params)}{DoNotifyLteMmWaveHandoverCompleted(EpcX2SapProvider::SecondaryHandoverParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Notify\+Lte\+Mm\+Wave\+Handover\+Completed (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_aa2ab1580f97cbebf950702b289032f9f}{}\label{classns3_1_1EpcX2_aa2ab1580f97cbebf950702b289032f9f}

\begin{DoxyCode}
1481 \{
1482   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1483 
1484   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"lteCellId = "} << params.oldCellId);
1485   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"imsi = "} << params.imsi);
1486   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"MmWave cellId = "} << params.targetCellId);
1487 
1488   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.oldCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1489                  \textcolor{stringliteral}{"Missing infos for oldCellId = "} << params.oldCellId);
1490   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.oldCellId];
1491   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
1492   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1493 
1494   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1495   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1496 
1497   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: NOTIFY MMWAVE HANDOVER TO LTE"});
1498 
1499   \textcolor{comment}{// Build the X2 message}
1500   EpcX2McHandoverHeader x2mcHeader;
1501   x2mcHeader.SetTargetCellId(params.targetCellId);
1502   x2mcHeader.SetImsi(params.imsi);
1503   x2mcHeader.SetOldCellId(params.oldCellId);
1504 
1505   EpcX2Header x2Header;
1506   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1507   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dacda8cb8a58dac96f5ea9be813f3a42c0}{EpcX2Header::NotifyMmWaveLteHandover});
1508   x2Header.SetLengthOfIes (x2mcHeader.GetLengthOfIes ());
1509   x2Header.SetNumberOfIes (x2mcHeader.GetNumberOfIes ());
1510 
1511   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1512   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RequestMcHandover header: "} << x2mcHeader);
1513 
1514   \textcolor{comment}{// Build the X2 packet}
1515   Ptr<Packet> packet = Create <Packet> ();
1516   packet->AddHeader (x2mcHeader);
1517   packet->AddHeader (x2Header);
1518   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1519 
1520   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1521   packet->AddPacketTag (tag);
1522 
1523   \textcolor{comment}{// Send the X2 message through the socket}
1524   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1525 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Receive\+Assistant\+Information@{Do\+Receive\+Assistant\+Information}}
\index{Do\+Receive\+Assistant\+Information@{Do\+Receive\+Assistant\+Information}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Receive\+Assistant\+Information(\+Epc\+X2\+Sap\+::\+Assistant\+Information\+For\+Splitting info)}{DoReceiveAssistantInformation(EpcX2Sap::AssistantInformationForSplitting info)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Receive\+Assistant\+Information (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+::\+Assistant\+Information\+For\+Splitting}}]{info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a11444fc4651106c67e0d0566c8b61e1b}{}\label{classns3_1_1EpcX2_a11444fc4651106c67e0d0566c8b61e1b}

\begin{DoxyCode}
1345                                                                                    \{ \textcolor{comment}{//sjkang}
1346 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"received assistant information at X2"} << params.sourceCellId << \textcolor{stringliteral}{"\(\backslash\)t"} << params.
      targetCellId);
1347 \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1348 
1349  \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
1350  \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1351  \textcolor{comment}{//NS\_LOG\_INFO ("gtpTeid = " << params.gtpTeid);}
1352 
1353 \textcolor{comment}{// NS\_LOG\_UNCOND( m\_x2InterfaceSockets.find(params.targetCellId)== m\_x2InterfaceSockets.end() );}
1354 
1355  \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1356                 \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
1357  Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
1358  Ptr<Socket> sourceSocket = socketInfo->m\_localUserPlaneSocket;
1359  Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1360 
1361  \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1362  \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1363 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this});
1364  EpcX2AssistantInfoHeader assistantInfoHeader;
1365  assistantInfoHeader.SetReTxQueingDelay(params.Re\_Tx\_Q\_Delay);
1366  assistantInfoHeader.SetTxonQueingDelay(params.Tx\_On\_Q\_Delay);
1367  assistantInfoHeader.SetRetxQueue(params.Re\_TX\_Q\_Size);
1368  assistantInfoHeader.SetTxedQueue(params.Txed\_Q\_Size);
1369  assistantInfoHeader.SetTxonQueue(params.Tx\_On\_Q\_Size);
1370  assistantInfoHeader.SetSourceCellId(params.sourceCellId);
1371  assistantInfoHeader.SetDrbId(params.drbId);
1372  assistantInfoHeader.SetRnti(params.rnti);
1373  EpcX2Header epcX2Header;
1374  epcX2Header.SetMessageType(\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715ac5c673b39296b5c9b4cedf3575e0bb60}{EpcX2Header::McAssistantInfoForwarding});
1375  epcX2Header.SetProcedureCode(\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0daeab9c84ab3a33a09c4ae2fccfec2eecb}{EpcX2Header::SendingAssistantInformation}
      );
1376  epcX2Header.SetLengthOfIes(assistantInfoHeader.GetSerializedSize());
1377  epcX2Header.SetNumberOfIes(assistantInfoHeader.GetNumbefOfIes());
1378 
1379  Ptr<Packet> packet =Create<Packet>();
1380  packet->AddHeader(assistantInfoHeader);
1381  packet->AddHeader(epcX2Header);
1382 
1383  EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1384   packet->AddPacketTag (tag);
1385   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1386 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Receive\+Mc\+Pdcp\+Sdu@{Do\+Receive\+Mc\+Pdcp\+Sdu}}
\index{Do\+Receive\+Mc\+Pdcp\+Sdu@{Do\+Receive\+Mc\+Pdcp\+Sdu}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Receive\+Mc\+Pdcp\+Sdu(\+Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params params)}{DoReceiveMcPdcpSdu(EpcX2SapProvider::UeDataParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Receive\+Mc\+Pdcp\+Sdu (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a48c9322fd4cfc56fbcfb78c98ee1b7f6}{}\label{classns3_1_1EpcX2_a48c9322fd4cfc56fbcfb78c98ee1b7f6}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000077}{Todo}]This should be done in \hyperlink{classns3_1_1GtpuHeader}{Gtpu\+Header} \end{DoxyRefDesc}

\begin{DoxyCode}
1310 \{
1311   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1312 
1313   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
1314   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1315   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"gtpTeid = "} << params.gtpTeid);
1316 
1317  \textcolor{comment}{// NS\_LOG\_UNCOND( m\_x2InterfaceSockets.find(params.targetCellId)== m\_x2InterfaceSockets.end() );}
1318 
1319   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1320                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
1321   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
1322   Ptr<Socket> sourceSocket = socketInfo->m\_localUserPlaneSocket;
1323   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1324 
1325   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1326   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1327 
1328   \textcolor{comment}{// add a message type to the gtpu header, so that it is possible to distinguish at receiver}
1329   GtpuHeader gtpu;
1330   gtpu.SetTeid (params.gtpTeid);
1331   gtpu.SetMessageType(\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a57a81c6c7add0af11a6230b460268ce6}{EpcX2Header::McForwardUplinkData});
1332   gtpu.SetLength (params.ueData->GetSize () + gtpu.GetSerializedSize () - 8); 
1333   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"GTP-U header: "} << gtpu);
1334 
1335   Ptr<Packet> packet = params.ueData;
1336   packet->AddHeader (gtpu);
1337 
1338   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1339   packet->AddPacketTag (tag);
1340 
1341   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Forward MC UE DATA through X2 interface"});
1342   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}{m\_x2uUdpPort}));  
1343 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Remove\+Teid\+To\+Be\+Forwarded@{Do\+Remove\+Teid\+To\+Be\+Forwarded}}
\index{Do\+Remove\+Teid\+To\+Be\+Forwarded@{Do\+Remove\+Teid\+To\+Be\+Forwarded}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Remove\+Teid\+To\+Be\+Forwarded(uint32\+\_\+t teid)}{DoRemoveTeidToBeForwarded(uint32_t teid)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Remove\+Teid\+To\+Be\+Forwarded (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{teid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_aec62d502e62740d99b98ef7e64a90b50}{}\label{classns3_1_1EpcX2_aec62d502e62740d99b98ef7e64a90b50}

\begin{DoxyCode}
254 \{
255   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION}(\textcolor{keyword}{this} << \textcolor{stringliteral}{" remove and entry from the map of teids to be forwarded: teid "} 
      << gtpTeid);
256   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG}(\hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.find(gtpTeid) != 
      \hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.end(), \textcolor{stringliteral}{"TEID not in the map"});
257   \hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.erase(\hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.find(
      gtpTeid));
258 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Handover\+Preparation\+Failure@{Do\+Send\+Handover\+Preparation\+Failure}}
\index{Do\+Send\+Handover\+Preparation\+Failure@{Do\+Send\+Handover\+Preparation\+Failure}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Handover\+Preparation\+Failure(\+Epc\+X2\+Sap\+Provider\+::\+Handover\+Preparation\+Failure\+Params params)}{DoSendHandoverPreparationFailure(EpcX2SapProvider::HandoverPreparationFailureParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Handover\+Preparation\+Failure (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Handover\+Preparation\+Failure\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a6b426becb1b31625fc2aada18d825d70}{}\label{classns3_1_1EpcX2_a6b426becb1b31625fc2aada18d825d70}

\begin{DoxyCode}
939 \{
940   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
941 
942   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
943   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
944   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
945   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cause = "} << params.cause);
946   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"criticalityDiagnostics = "} << params.criticalityDiagnostics);
947 
948   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.sourceCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
949                  \textcolor{stringliteral}{"Socket infos not defined for sourceCellId = "} << params.sourceCellId);
950 
951   Ptr<Socket> localSocket = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.sourceCellId]->
      m\_localCtrlPlaneSocket;
952   Ipv4Address remoteIpAddr = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.sourceCellId]->m\_remoteIpAddr
      ;
953 
954   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"localSocket = "} << localSocket);
955   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"remoteIpAddr = "} << remoteIpAddr);
956 
957   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: HANDOVER PREPARATION FAILURE"});
958 
959   \textcolor{comment}{// Build the X2 message}
960   EpcX2HandoverPreparationFailureHeader x2HoPrepFailHeader;
961   x2HoPrepFailHeader.SetOldEnbUeX2apId (params.oldEnbUeX2apId);
962   x2HoPrepFailHeader.SetCause (params.cause);
963   x2HoPrepFailHeader.SetCriticalityDiagnostics (params.criticalityDiagnostics);
964 
965   EpcX2Header x2Header;
966   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a32ae3f1f4f837ceb0b22d29a5acedaf5}{EpcX2Header::UnsuccessfulOutcome});
967   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da90a8f9de7236863fdfeb02f5580fbe38}{EpcX2Header::HandoverPreparation});
968   x2Header.SetLengthOfIes (x2HoPrepFailHeader.GetLengthOfIes ());
969   x2Header.SetNumberOfIes (x2HoPrepFailHeader.GetNumberOfIes ());
970 
971   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
972   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 HandoverPrepFail header: "} << x2HoPrepFailHeader);
973 
974   \textcolor{comment}{// Build the X2 packet}
975   Ptr<Packet> packet = Create <Packet> ();
976   packet->AddHeader (x2HoPrepFailHeader);
977   packet->AddHeader (x2Header);
978 
979   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
980   packet->AddPacketTag (tag);
981 
982   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
983 
984   \textcolor{comment}{// Send the X2 message through the socket}
985   localSocket->SendTo (packet, 0, InetSocketAddress (remoteIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
986 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Handover\+Request@{Do\+Send\+Handover\+Request}}
\index{Do\+Send\+Handover\+Request@{Do\+Send\+Handover\+Request}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Handover\+Request(\+Epc\+X2\+Sap\+Provider\+::\+Handover\+Request\+Params params)}{DoSendHandoverRequest(EpcX2SapProvider::HandoverRequestParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Handover\+Request (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Handover\+Request\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a8008ce25fcdf78a02d7945768ae3084b}{}\label{classns3_1_1EpcX2_a8008ce25fcdf78a02d7945768ae3084b}

\begin{DoxyCode}
723 \{
724   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
725 
726   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
727   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
728   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
729   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeUeS1apId  = "} << params.mmeUeS1apId);
730 
731   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
732                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
733   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
734   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
735   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
736 
737   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
738   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
739 
740   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: HANDOVER REQUEST"});
741 
742   \textcolor{comment}{// Build the X2 message}
743   EpcX2HandoverRequestHeader x2HoReqHeader;
744   x2HoReqHeader.SetOldEnbUeX2apId (params.oldEnbUeX2apId);
745   x2HoReqHeader.SetCause (params.cause);
746   x2HoReqHeader.SetTargetCellId (params.targetCellId);
747   x2HoReqHeader.SetMmeUeS1apId (params.mmeUeS1apId);
748   x2HoReqHeader.SetUeAggregateMaxBitRateDownlink (params.ueAggregateMaxBitRateDownlink);
749   x2HoReqHeader.SetUeAggregateMaxBitRateUplink (params.ueAggregateMaxBitRateUplink);
750   x2HoReqHeader.SetBearers (params.bearers);
751   \textcolor{comment}{// For secondary cell handover}
752   x2HoReqHeader.SetRlcSetupRequests (params.rlcRequests);
753   x2HoReqHeader.SetIsMc (params.isMc);
754 
755   EpcX2Header x2Header;
756   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
757   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da90a8f9de7236863fdfeb02f5580fbe38}{EpcX2Header::HandoverPreparation});
758   x2Header.SetLengthOfIes (x2HoReqHeader.GetLengthOfIes ());
759   x2Header.SetNumberOfIes (x2HoReqHeader.GetNumberOfIes ());
760 
761   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
762   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 HandoverRequest header: "} << x2HoReqHeader);
763 
764   \textcolor{comment}{// Build the X2 packet}
765   Ptr<Packet> packet = (params.rrcContext != 0) ? (params.rrcContext) : (Create <Packet> ());
766   packet->AddHeader (x2HoReqHeader);
767   packet->AddHeader (x2Header);
768 
769   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
770   packet->AddPacketTag (tag);
771 
772   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
773 
774   \textcolor{comment}{// Send the X2 message through the socket}
775   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
776 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Handover\+Request\+Ack@{Do\+Send\+Handover\+Request\+Ack}}
\index{Do\+Send\+Handover\+Request\+Ack@{Do\+Send\+Handover\+Request\+Ack}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Handover\+Request\+Ack(\+Epc\+X2\+Sap\+Provider\+::\+Handover\+Request\+Ack\+Params params)}{DoSendHandoverRequestAck(EpcX2SapProvider::HandoverRequestAckParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Handover\+Request\+Ack (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Handover\+Request\+Ack\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a0c10744b59810accae456d5e7a5ebf3b}{}\label{classns3_1_1EpcX2_a0c10744b59810accae456d5e7a5ebf3b}

\begin{DoxyCode}
886 \{
887   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
888 
889   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
890   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"newEnbUeX2apId = "} << params.newEnbUeX2apId);
891   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
892   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
893 
894   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.sourceCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
895                  \textcolor{stringliteral}{"Socket infos not defined for sourceCellId = "} << params.sourceCellId);
896 
897   Ptr<Socket> localSocket = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.sourceCellId]->
      m\_localCtrlPlaneSocket;
898   Ipv4Address remoteIpAddr = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.sourceCellId]->m\_remoteIpAddr
      ;
899 
900   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"localSocket = "} << localSocket);
901   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"remoteIpAddr = "} << remoteIpAddr);
902 
903   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: HANDOVER REQUEST ACK"});
904 
905   \textcolor{comment}{// Build the X2 message}
906   EpcX2HandoverRequestAckHeader x2HoAckHeader;
907   x2HoAckHeader.SetOldEnbUeX2apId (params.oldEnbUeX2apId);
908   x2HoAckHeader.SetNewEnbUeX2apId (params.newEnbUeX2apId);
909   x2HoAckHeader.SetAdmittedBearers (params.admittedBearers);
910   x2HoAckHeader.SetNotAdmittedBearers (params.notAdmittedBearers);
911 
912   EpcX2Header x2Header;
913   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a21bd7a420a07fd4849d7271a5c381a44}{EpcX2Header::SuccessfulOutcome});
914   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da90a8f9de7236863fdfeb02f5580fbe38}{EpcX2Header::HandoverPreparation});
915   x2Header.SetLengthOfIes (x2HoAckHeader.GetLengthOfIes ());
916   x2Header.SetNumberOfIes (x2HoAckHeader.GetNumberOfIes ());
917 
918   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
919   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 HandoverAck header: "} << x2HoAckHeader);
920   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"RRC context: "} << params.rrcContext);
921 
922   \textcolor{comment}{// Build the X2 packet}
923   Ptr<Packet> packet = (params.rrcContext != 0) ? (params.rrcContext) : (Create <Packet> ());
924   packet->AddHeader (x2HoAckHeader);
925   packet->AddHeader (x2Header);
926 
927   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
928   packet->AddPacketTag (tag);
929 
930   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
931 
932   \textcolor{comment}{// Send the X2 message through the socket}
933   localSocket->SendTo (packet, 0, InetSocketAddress (remoteIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
934 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Load\+Information@{Do\+Send\+Load\+Information}}
\index{Do\+Send\+Load\+Information@{Do\+Send\+Load\+Information}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Load\+Information(\+Epc\+X2\+Sap\+Provider\+::\+Load\+Information\+Params params)}{DoSendLoadInformation(EpcX2SapProvider::LoadInformationParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Load\+Information (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Load\+Information\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_aa6e72c1fe568b09e0527de001ac33d8e}{}\label{classns3_1_1EpcX2_aa6e72c1fe568b09e0527de001ac33d8e}

\begin{DoxyCode}
1142 \{
1143   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1144 
1145   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1146   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cellInformationList size = "} << params.cellInformationList.size ());
1147 
1148   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1149                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
1150   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
1151   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
1152   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1153 
1154   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1155   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1156 
1157   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: LOAD INFORMATION"});
1158 
1159   \textcolor{comment}{// Build the X2 message}
1160   EpcX2LoadInformationHeader x2LoadInfoHeader;
1161   x2LoadInfoHeader.SetCellInformationList (params.cellInformationList);
1162 
1163   EpcX2Header x2Header;
1164   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1165   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dae86cf17c79745d2849a8c1efcec6a64d}{EpcX2Header::LoadIndication});
1166   x2Header.SetLengthOfIes (x2LoadInfoHeader.GetLengthOfIes ());
1167   x2Header.SetNumberOfIes (x2LoadInfoHeader.GetNumberOfIes ());
1168 
1169   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1170   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 LoadInformation header: "} << x2LoadInfoHeader);
1171 
1172   \textcolor{comment}{// Build the X2 packet}
1173   Ptr<Packet> packet = Create <Packet> ();
1174   packet->AddHeader (x2LoadInfoHeader);
1175   packet->AddHeader (x2Header);
1176 
1177   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1178   packet->AddPacketTag (tag);
1179 
1180   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1181 
1182   \textcolor{comment}{// Send the X2 message through the socket}
1183   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1184 
1185 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Mc\+Handover\+Request@{Do\+Send\+Mc\+Handover\+Request}}
\index{Do\+Send\+Mc\+Handover\+Request@{Do\+Send\+Mc\+Handover\+Request}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Mc\+Handover\+Request(\+Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Params params)}{DoSendMcHandoverRequest(EpcX2SapProvider::SecondaryHandoverParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Mc\+Handover\+Request (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a7f811829874466c79c17a804dead4e90}{}\label{classns3_1_1EpcX2_a7f811829874466c79c17a804dead4e90}

\begin{DoxyCode}
1434 \{
1435   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1436 
1437   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldCellId = "} << params.oldCellId);
1438   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"imsi = "} << params.imsi);
1439 
1440   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.oldCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1441                  \textcolor{stringliteral}{"Missing infos for oldCellId = "} << params.oldCellId);
1442   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.oldCellId];
1443   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
1444   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1445 
1446   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1447   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1448 
1449   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: REQUEST MC HANDOVER"});
1450 
1451   \textcolor{comment}{// Build the X2 message}
1452   EpcX2McHandoverHeader x2mcHeader;
1453   x2mcHeader.SetTargetCellId(params.targetCellId);
1454   x2mcHeader.SetImsi(params.imsi);
1455   x2mcHeader.SetOldCellId(params.oldCellId);
1456 
1457   EpcX2Header x2Header;
1458   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1459   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da10ebb8c46efe10d8f9bacbd89027d945}{EpcX2Header::RequestMcHandover});
1460   x2Header.SetLengthOfIes (x2mcHeader.GetLengthOfIes ());
1461   x2Header.SetNumberOfIes (x2mcHeader.GetNumberOfIes ());
1462 
1463   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1464   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RequestMcHandover header: "} << x2mcHeader);
1465 
1466   \textcolor{comment}{// Build the X2 packet}
1467   Ptr<Packet> packet = Create <Packet> ();
1468   packet->AddHeader (x2mcHeader);
1469   packet->AddHeader (x2Header);
1470   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1471 
1472   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1473   packet->AddPacketTag (tag);
1474 
1475   \textcolor{comment}{// Send the X2 message through the socket}
1476   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1477 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Mc\+Pdcp\+Pdu@{Do\+Send\+Mc\+Pdcp\+Pdu}}
\index{Do\+Send\+Mc\+Pdcp\+Pdu@{Do\+Send\+Mc\+Pdcp\+Pdu}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Mc\+Pdcp\+Pdu(\+Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params params)}{DoSendMcPdcpPdu(EpcX2SapProvider::UeDataParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Mc\+Pdcp\+Pdu (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a641588d125f600122d56e34fa1fddd5c}{}\label{classns3_1_1EpcX2_a641588d125f600122d56e34fa1fddd5c}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000076}{Todo}]This should be done in \hyperlink{classns3_1_1GtpuHeader}{Gtpu\+Header} \end{DoxyRefDesc}


should be transmitted to \hyperlink{classns3_1_1EpcX2}{Epc\+X2}\+:Recv\+From\+X2\+Socket 
\begin{DoxyCode}
1275 \{
1276   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1277 
1278   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
1279   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1280   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"gtpTeid = "} << params.gtpTeid);
1281 
1282   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1283                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
1284   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
1285   Ptr<Socket> sourceSocket = socketInfo->m\_localUserPlaneSocket;
1286   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1287 
1288   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1289   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1290 
1291   \textcolor{comment}{// add a message type to the gtpu header, so that it is possible to distinguish at receiver}
1292   GtpuHeader gtpu;
1293   gtpu.SetTeid (params.gtpTeid);
1294   gtpu.SetMessageType(\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a8a0607f112abe862244717f789ea9ba8}{EpcX2Header::McForwardDownlinkData});
1295   gtpu.SetLength (params.ueData->GetSize () + gtpu.GetSerializedSize () - 8); 
1296   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"GTP-U header: "} << gtpu);
1297 
1298   Ptr<Packet> packet = params.ueData;
1299   packet->AddHeader (gtpu);
1300 
1301 \textcolor{comment}{//  EpcX2Tag tag (Simulator::Now()); //sjkang1221}
1302  \textcolor{comment}{// packet->AddPacketTag (tag);}
1303 
1304   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Forward MC UE DATA through X2 interface"});
1305   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}{m\_x2uUdpPort}));  
1306 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12




Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Resource\+Status\+Update@{Do\+Send\+Resource\+Status\+Update}}
\index{Do\+Send\+Resource\+Status\+Update@{Do\+Send\+Resource\+Status\+Update}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Resource\+Status\+Update(\+Epc\+X2\+Sap\+Provider\+::\+Resource\+Status\+Update\+Params params)}{DoSendResourceStatusUpdate(EpcX2SapProvider::ResourceStatusUpdateParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Resource\+Status\+Update (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Resource\+Status\+Update\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a556c1c456108f8e1dff65289073d9b55}{}\label{classns3_1_1EpcX2_a556c1c456108f8e1dff65289073d9b55}

\begin{DoxyCode}
1190 \{
1191   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1192 
1193   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1194   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"enb1MeasurementId = "} << params.enb1MeasurementId);
1195   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"enb2MeasurementId = "} << params.enb2MeasurementId);
1196   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cellMeasurementResultList size = "} << params.cellMeasurementResultList.size ()
      );
1197 
1198   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1199                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
1200   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
1201   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
1202   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1203 
1204   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1205   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1206 
1207   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: RESOURCE STATUS UPDATE"});
1208 
1209   \textcolor{comment}{// Build the X2 message}
1210   EpcX2ResourceStatusUpdateHeader x2ResourceStatUpdHeader;
1211   x2ResourceStatUpdHeader.SetEnb1MeasurementId (params.enb1MeasurementId);
1212   x2ResourceStatUpdHeader.SetEnb2MeasurementId (params.enb2MeasurementId);
1213   x2ResourceStatUpdHeader.SetCellMeasurementResultList (params.cellMeasurementResultList);
1214 
1215   EpcX2Header x2Header;
1216   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1217   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da6761ec564ade1c9d61cfd1dc590535d0}{EpcX2Header::ResourceStatusReporting});
1218   x2Header.SetLengthOfIes (x2ResourceStatUpdHeader.GetLengthOfIes ());
1219   x2Header.SetNumberOfIes (x2ResourceStatUpdHeader.GetNumberOfIes ());
1220 
1221   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1222   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 ResourceStatusUpdate header: "} << x2ResourceStatUpdHeader);
1223 
1224   \textcolor{comment}{// Build the X2 packet}
1225   Ptr<Packet> packet = Create <Packet> ();
1226   packet->AddHeader (x2ResourceStatUpdHeader);
1227   packet->AddHeader (x2Header);
1228 
1229   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1230   packet->AddPacketTag (tag);
1231 
1232   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1233 
1234   \textcolor{comment}{// Send the X2 message through the socket}
1235   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1236 
1237 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Rlc\+Setup\+Completed@{Do\+Send\+Rlc\+Setup\+Completed}}
\index{Do\+Send\+Rlc\+Setup\+Completed@{Do\+Send\+Rlc\+Setup\+Completed}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Rlc\+Setup\+Completed(\+Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params)}{DoSendRlcSetupCompleted(EpcX2SapProvider::UeDataParams)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Rlc\+Setup\+Completed (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a46a90945c5f509e7098cb4668294b835}{}\label{classns3_1_1EpcX2_a46a90945c5f509e7098cb4668294b835}

\begin{DoxyCode}
837 \{
838   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
839 
840   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
841   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
842   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"teid  = "} << params.gtpTeid);
843 
844   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
845                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
846   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
847   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
848   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
849 
850   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
851   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
852 
853   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: RLC SETUP COMPLETED"});
854 
855   \textcolor{comment}{// Build the X2 message}
856   EpcX2RlcSetupCompletedHeader x2RlcHeader;
857   x2RlcHeader.SetSourceCellId(params.sourceCellId);
858   x2RlcHeader.SetTargetCellId(params.targetCellId);
859   x2RlcHeader.SetGtpTeid(params.gtpTeid);
860 
861   EpcX2Header x2Header;
862   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
863   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da8a3e97ca98e6cf28f14010bb1e9306cb}{EpcX2Header::RlcSetupCompleted});
864   x2Header.SetLengthOfIes (x2RlcHeader.GetLengthOfIes ());
865   x2Header.SetNumberOfIes (x2RlcHeader.GetNumberOfIes ());
866 
867   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
868   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RlcSetupCompleted header: "} << x2RlcHeader);
869 
870   \textcolor{comment}{// Build the X2 packet}
871   Ptr<Packet> packet = Create <Packet> ();
872   packet->AddHeader (x2RlcHeader);
873   packet->AddHeader (x2Header);
874 
875   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
876   packet->AddPacketTag (tag);
877 
878   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
879 
880   \textcolor{comment}{// Send the X2 message through the socket}
881   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
882 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Rlc\+Setup\+Request@{Do\+Send\+Rlc\+Setup\+Request}}
\index{Do\+Send\+Rlc\+Setup\+Request@{Do\+Send\+Rlc\+Setup\+Request}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Rlc\+Setup\+Request(\+Epc\+X2\+Sap\+Provider\+::\+Rlc\+Setup\+Request params)}{DoSendRlcSetupRequest(EpcX2SapProvider::RlcSetupRequest params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Rlc\+Setup\+Request (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Rlc\+Setup\+Request}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a856195e67f43bc851705e045eb876639}{}\label{classns3_1_1EpcX2_a856195e67f43bc851705e045eb876639}

\begin{DoxyCode}
780 \{
781   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
782 
783   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
784   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
785   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"teid  = "} << params.gtpTeid);
786   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"rnti = "} << params.mmWaveRnti);
787 \textcolor{comment}{//std::cout<<params.targetCellId << std::endl;}
788   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
789                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
790   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
791   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
792   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
793 
794   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
795   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
796 
797   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: RLC SETUP REQUEST"});
798 
799   \textcolor{comment}{// Build the X2 message}
800   EpcX2RlcSetupRequestHeader x2RlcHeader;
801   x2RlcHeader.SetSourceCellId(params.sourceCellId);
802   x2RlcHeader.SetTargetCellId(params.targetCellId);
803   x2RlcHeader.SetGtpTeid(params.gtpTeid);
804   x2RlcHeader.SetMmWaveRnti(params.mmWaveRnti);
805   x2RlcHeader.SetLteRnti(params.lteRnti);
806   x2RlcHeader.SetDrbid(params.drbid);
807   x2RlcHeader.SetLcInfo(params.lcinfo);
808   x2RlcHeader.SetRlcConfig(params.rlcConfig);
809   x2RlcHeader.SetLogicalChannelConfig(params.logicalChannelConfig);
810 
811   EpcX2Header x2Header;
812   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
813   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0daa1fc9674b00b57cf95b53ef94f00db86}{EpcX2Header::RlcSetupRequest});
814   x2Header.SetLengthOfIes (x2RlcHeader.GetLengthOfIes ());
815   x2Header.SetNumberOfIes (x2RlcHeader.GetNumberOfIes ());
816 
817   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
818   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RlcSetupRequest header: "} << x2RlcHeader);
819 
820   \textcolor{comment}{// Build the X2 packet}
821   Ptr<Packet> packet = Create <Packet> ();
822   packet->AddHeader (x2RlcHeader);
823   packet->AddHeader (x2Header);
824 
825   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
826   packet->AddPacketTag (tag);
827 
828   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
829 
830   \textcolor{comment}{// Send the X2 message through the socket}
831   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
832 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Secondary\+Cell\+Handover\+Completed@{Do\+Send\+Secondary\+Cell\+Handover\+Completed}}
\index{Do\+Send\+Secondary\+Cell\+Handover\+Completed@{Do\+Send\+Secondary\+Cell\+Handover\+Completed}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Secondary\+Cell\+Handover\+Completed(\+Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Completed\+Params params)}{DoSendSecondaryCellHandoverCompleted(EpcX2SapProvider::SecondaryHandoverCompletedParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Secondary\+Cell\+Handover\+Completed (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Secondary\+Handover\+Completed\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a2ab46d3ece4e6af595249144a843ffbf}{}\label{classns3_1_1EpcX2_a2ab46d3ece4e6af595249144a843ffbf}

\begin{DoxyCode}
1577 \{
1578   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1579 
1580   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"MmWaveRnti = "} << params.mmWaveRnti);
1581   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Imsi = "} << params.imsi);
1582   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
1583   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Dst cellId = "} << params.cellId);
1584 
1585   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.cellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1586                  \textcolor{stringliteral}{"Missing infos for cellId = "} << params.cellId);
1587   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.cellId];
1588   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
1589   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1590 
1591   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1592   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1593 
1594   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: SEND SECONDARY CELL HANDOVER COMPLETED MESSAGE"});
1595 
1596   \textcolor{comment}{// Build the X2 message}
1597   EpcX2SecondaryCellHandoverCompletedHeader x2hoHeader;
1598   x2hoHeader.SetMmWaveRnti(params.mmWaveRnti);
1599   x2hoHeader.SetImsi(params.imsi);
1600   x2hoHeader.SetOldEnbUeX2apId(params.oldEnbUeX2apId);
1601 
1602   EpcX2Header x2Header;
1603   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a21bd7a420a07fd4849d7271a5c381a44}{EpcX2Header::SuccessfulOutcome});
1604   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da3b5622b54cfa751687a29cea3845339b}{EpcX2Header::SecondaryCellHandoverCompleted}
      );
1605   x2Header.SetLengthOfIes (x2hoHeader.GetLengthOfIes ());
1606   x2Header.SetNumberOfIes (x2hoHeader.GetNumberOfIes ());
1607 
1608   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1609   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 SecondaryCellHandoverCompleted header: "} << x2hoHeader);
1610 
1611   \textcolor{comment}{// Build the X2 packet}
1612   Ptr<Packet> packet = Create <Packet> ();
1613   packet->AddHeader (x2hoHeader);
1614   packet->AddHeader (x2Header);
1615   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1616 
1617   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1618   packet->AddPacketTag (tag);
1619 
1620   \textcolor{comment}{// Send the X2 message through the socket}
1621   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1622 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Sn\+Status\+Transfer@{Do\+Send\+Sn\+Status\+Transfer}}
\index{Do\+Send\+Sn\+Status\+Transfer@{Do\+Send\+Sn\+Status\+Transfer}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Sn\+Status\+Transfer(\+Epc\+X2\+Sap\+Provider\+::\+Sn\+Status\+Transfer\+Params params)}{DoSendSnStatusTransfer(EpcX2SapProvider::SnStatusTransferParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Sn\+Status\+Transfer (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Sn\+Status\+Transfer\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_adab34a68d321212ad653935239fedd4e}{}\label{classns3_1_1EpcX2_adab34a68d321212ad653935239fedd4e}

\begin{DoxyCode}
1041 \{
1042   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1043 
1044   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
1045   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"newEnbUeX2apId = "} << params.newEnbUeX2apId);
1046   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
1047   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1048   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"erabsList size = "} << params.erabsSubjectToStatusTransferList.size ());
1049 
1050   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1051                  \textcolor{stringliteral}{"Socket infos not defined for targetCellId = "} << params.targetCellId);
1052 
1053   Ptr<Socket> localSocket = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId]->
      m\_localCtrlPlaneSocket;
1054   Ipv4Address remoteIpAddr = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId]->m\_remoteIpAddr
      ;
1055 
1056   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"localSocket = "} << localSocket);
1057   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"remoteIpAddr = "} << remoteIpAddr);
1058 
1059   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: SN STATUS TRANSFER"});
1060 
1061   \textcolor{comment}{// Build the X2 message}
1062   EpcX2SnStatusTransferHeader x2SnStatusXferHeader;
1063   x2SnStatusXferHeader.SetOldEnbUeX2apId (params.oldEnbUeX2apId);
1064   x2SnStatusXferHeader.SetNewEnbUeX2apId (params.newEnbUeX2apId);
1065   x2SnStatusXferHeader.SetErabsSubjectToStatusTransferList (params.erabsSubjectToStatusTransferList);
1066 
1067   EpcX2Header x2Header;
1068   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1069   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da61f2f7393e096b85367e74db07851ae4}{EpcX2Header::SnStatusTransfer});
1070   x2Header.SetLengthOfIes (x2SnStatusXferHeader.GetLengthOfIes ());
1071   x2Header.SetNumberOfIes (x2SnStatusXferHeader.GetNumberOfIes ());
1072 
1073   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1074   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 SnStatusTransfer header: "} << x2SnStatusXferHeader);
1075 
1076   \textcolor{comment}{// Build the X2 packet}
1077   Ptr<Packet> packet = Create <Packet> ();
1078   packet->AddHeader (x2SnStatusXferHeader);
1079   packet->AddHeader (x2Header);
1080 
1081   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1082   packet->AddPacketTag (tag);
1083 
1084   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1085 
1086   \textcolor{comment}{// Send the X2 message through the socket}
1087   localSocket->SendTo (packet, 0, InetSocketAddress (remoteIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1088 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 18


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Switch\+Connection\+To\+Mm\+Wave@{Do\+Send\+Switch\+Connection\+To\+Mm\+Wave}}
\index{Do\+Send\+Switch\+Connection\+To\+Mm\+Wave@{Do\+Send\+Switch\+Connection\+To\+Mm\+Wave}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Switch\+Connection\+To\+Mm\+Wave(\+Epc\+X2\+Sap\+Provider\+::\+Switch\+Connection\+Params params)}{DoSendSwitchConnectionToMmWave(EpcX2SapProvider::SwitchConnectionParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Switch\+Connection\+To\+Mm\+Wave (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Switch\+Connection\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_abf288cbe6a364c4e9da3329f96dacfc5}{}\label{classns3_1_1EpcX2_abf288cbe6a364c4e9da3329f96dacfc5}

\begin{DoxyCode}
1529 \{
1530   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1531 
1532   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"MmWaveCellId = "} << params.mmWaveCellId);
1533   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"MmWaveRnti = "} << params.mmWaveRnti);
1534   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"UseMmWaveConnection "} << params.useMmWaveConnection);
1535 
1536   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.mmWaveCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1537                  \textcolor{stringliteral}{"Missing infos for mmWaveCellId = "} << params.mmWaveCellId);
1538   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.mmWaveCellId];
1539   Ptr<Socket> sourceSocket = socketInfo->m\_localCtrlPlaneSocket;
1540   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1541 
1542   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1543   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1544 
1545   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: SEND CONNECTION SWITCH MESSAGE"});
1546 
1547   \textcolor{comment}{// Build the X2 message}
1548   EpcX2ConnectionSwitchHeader x2mcHeader;
1549   x2mcHeader.SetMmWaveRnti(params.mmWaveRnti);
1550   x2mcHeader.SetUseMmWaveConnection(params.useMmWaveConnection);
1551   x2mcHeader.SetDrbid(params.drbid);
1552 
1553   EpcX2Header x2Header;
1554   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1555   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dabadd277dc2cdf05400c9098c496cee3d}{EpcX2Header::SwitchConnection});
1556   x2Header.SetLengthOfIes (x2mcHeader.GetLengthOfIes ());
1557   x2Header.SetNumberOfIes (x2mcHeader.GetNumberOfIes ());
1558 
1559   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1560   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RequestMcHandover header: "} << x2mcHeader);
1561 
1562   \textcolor{comment}{// Build the X2 packet}
1563   Ptr<Packet> packet = Create <Packet> ();
1564   packet->AddHeader (x2mcHeader);
1565   packet->AddHeader (x2Header);
1566   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1567 
1568   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1569   packet->AddPacketTag (tag);
1570 
1571   \textcolor{comment}{// Send the X2 message through the socket}
1572   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1573 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Ue\+Context\+Release@{Do\+Send\+Ue\+Context\+Release}}
\index{Do\+Send\+Ue\+Context\+Release@{Do\+Send\+Ue\+Context\+Release}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Ue\+Context\+Release(\+Epc\+X2\+Sap\+Provider\+::\+Ue\+Context\+Release\+Params params)}{DoSendUeContextRelease(EpcX2SapProvider::UeContextReleaseParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Ue\+Context\+Release (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Ue\+Context\+Release\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a21fd33c24044a655a707fc0b68961fef}{}\label{classns3_1_1EpcX2_a21fd33c24044a655a707fc0b68961fef}

\begin{DoxyCode}
1093 \{
1094   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1095 
1096   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
1097   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"newEnbUeX2apId = "} << params.newEnbUeX2apId);
1098   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
1099 
1100   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.sourceCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1101                  \textcolor{stringliteral}{"Socket infos not defined for sourceCellId = "} << params.sourceCellId);
1102 
1103   Ptr<Socket> localSocket = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.sourceCellId]->
      m\_localCtrlPlaneSocket;
1104   Ipv4Address remoteIpAddr = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.sourceCellId]->m\_remoteIpAddr
      ;
1105 
1106   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"localSocket = "} << localSocket);
1107   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"remoteIpAddr = "} << remoteIpAddr);
1108 
1109   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Send X2 message: UE CONTEXT RELEASE"});
1110 
1111   \textcolor{comment}{// Build the X2 message}
1112   EpcX2UeContextReleaseHeader x2UeCtxReleaseHeader;
1113   x2UeCtxReleaseHeader.SetOldEnbUeX2apId (params.oldEnbUeX2apId);
1114   x2UeCtxReleaseHeader.SetNewEnbUeX2apId (params.newEnbUeX2apId);
1115 
1116   EpcX2Header x2Header;
1117   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1118   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dafaf7b3969cec8182c5b3843d2113bbcc}{EpcX2Header::UeContextRelease});
1119   x2Header.SetLengthOfIes (x2UeCtxReleaseHeader.GetLengthOfIes ());
1120   x2Header.SetNumberOfIes (x2UeCtxReleaseHeader.GetNumberOfIes ());
1121 
1122   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1123   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 UeContextRelease header: "} << x2UeCtxReleaseHeader);
1124 
1125   \textcolor{comment}{// Build the X2 packet}
1126   Ptr<Packet> packet = Create <Packet> ();
1127   packet->AddHeader (x2UeCtxReleaseHeader);
1128   packet->AddHeader (x2Header);
1129 
1130   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1131   packet->AddPacketTag (tag);
1132 
1133   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1134 
1135   \textcolor{comment}{// Send the X2 message through the socket}
1136   localSocket->SendTo (packet, 0, InetSocketAddress (remoteIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1137 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Ue\+Data@{Do\+Send\+Ue\+Data}}
\index{Do\+Send\+Ue\+Data@{Do\+Send\+Ue\+Data}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Ue\+Data(\+Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params params)}{DoSendUeData(EpcX2SapProvider::UeDataParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Ue\+Data (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+Provider\+::\+Ue\+Data\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a8a20256ed59b6f7f03095c3386ecc6d1}{}\label{classns3_1_1EpcX2_a8a20256ed59b6f7f03095c3386ecc6d1}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000075}{Todo}]This should be done in \hyperlink{classns3_1_1GtpuHeader}{Gtpu\+Header} \end{DoxyRefDesc}

\begin{DoxyCode}
1242 \{
1243   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1244 
1245   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
1246   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1247   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"gtpTeid = "} << params.gtpTeid);
1248 
1249   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1250                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
1251   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
1252   Ptr<Socket> sourceSocket = socketInfo->m\_localUserPlaneSocket;
1253   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1254 
1255   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1256   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1257 
1258   GtpuHeader gtpu;
1259   gtpu.SetTeid (params.gtpTeid);
1260   gtpu.SetLength (params.ueData->GetSize () + gtpu.GetSerializedSize () - 8); 
1261   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"GTP-U header: "} << gtpu);
1262 
1263   Ptr<Packet> packet = params.ueData;
1264   packet->AddHeader (gtpu);
1265 
1266   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1267   packet->AddPacketTag (tag);
1268 
1269   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Forward UE DATA through X2 interface"});
1270   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}{m\_x2uUdpPort}));
1271 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Do\+Send\+Ue\+Sinr\+Update@{Do\+Send\+Ue\+Sinr\+Update}}
\index{Do\+Send\+Ue\+Sinr\+Update@{Do\+Send\+Ue\+Sinr\+Update}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Do\+Send\+Ue\+Sinr\+Update(\+Epc\+X2\+Sap\+::\+Ue\+Imsi\+Sinr\+Params params)}{DoSendUeSinrUpdate(EpcX2Sap::UeImsiSinrParams params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Do\+Send\+Ue\+Sinr\+Update (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+::\+Ue\+Imsi\+Sinr\+Params}}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1EpcX2_a54d091a779cfe55461d28fa9e81fd6ca}{}\label{classns3_1_1EpcX2_a54d091a779cfe55461d28fa9e81fd6ca}

\begin{DoxyCode}
1389 \{
1390  \textcolor{comment}{// NS\_LOG\_FUNCTION(this);}
1391 
1392   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
1393   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
1394 
1395   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.find (params.targetCellId) != 
      \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets}.end (),
1396                  \textcolor{stringliteral}{"Missing infos for targetCellId = "} << params.targetCellId);
1397   Ptr<X2IfaceInfo> socketInfo = \hyperlink{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{m\_x2InterfaceSockets} [params.targetCellId];
1398   Ptr<Socket> sourceSocket = socketInfo->m\_localUserPlaneSocket;
1399   Ipv4Address targetIpAddr = socketInfo->m\_remoteIpAddr;
1400 \textcolor{comment}{//std::cout << this <<"\(\backslash\)t"<<  targetIpAddr << " from  DoSendUeSinrUpdaat "<<params.targetCellId<<std::endl;}
1401   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceSocket = "} << sourceSocket);
1402   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetIpAddr = "} << targetIpAddr);
1403 
1404   \textcolor{comment}{// Build the X2 message}
1405   EpcX2UeImsiSinrUpdateHeader x2imsiSinrHeader;
1406   x2imsiSinrHeader.SetUeImsiSinrMap (params.ueImsiSinrMap);
1407   x2imsiSinrHeader.SetSourceCellId (params.sourceCellId);
1408   x2imsiSinrHeader.SetSecondCellId(params.secondBestCellId); \textcolor{comment}{//sjkang}
1409   EpcX2Header x2Header;
1410   x2Header.SetMessageType (\hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage});
1411   x2Header.SetProcedureCode (\hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da031eb5cb9e5a3611fbf6476448d6549f}{EpcX2Header::UpdateUeSinr});
1412   x2Header.SetLengthOfIes (x2imsiSinrHeader.GetLengthOfIes ());
1413   x2Header.SetNumberOfIes (x2imsiSinrHeader.GetNumberOfIes ());
1414 
1415   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
1416   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 UeImsiSinrUpdate header: "} << x2imsiSinrHeader);
1417 
1418   \textcolor{comment}{// Build the X2 packet}
1419   Ptr<Packet> packet = Create <Packet> ();
1420   packet->AddHeader (x2imsiSinrHeader);
1421   packet->AddHeader (x2Header);
1422   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
1423 
1424   EpcX2Tag tag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}());
1425   packet->AddPacketTag (tag);
1426 \textcolor{comment}{//std::cout << targetIpAddr<< std::endl;}
1427   \textcolor{comment}{// Send the X2 message through the socket}
1428   sourceSocket->SendTo (packet, 0, InetSocketAddress (targetIpAddr, \hyperlink{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{m\_x2cUdpPort}));
1429 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 22


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Get\+Epc\+X2\+Pdcp\+Provider@{Get\+Epc\+X2\+Pdcp\+Provider}}
\index{Get\+Epc\+X2\+Pdcp\+Provider@{Get\+Epc\+X2\+Pdcp\+Provider}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Get\+Epc\+X2\+Pdcp\+Provider()}{GetEpcX2PdcpProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Pdcp\+Provider} $\ast$ ns3\+::\+Epc\+X2\+::\+Get\+Epc\+X2\+Pdcp\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_a22c4df71e275c74e0d27fc01b5a72366}{}\label{classns3_1_1EpcX2_a22c4df71e275c74e0d27fc01b5a72366}
\begin{DoxyReturn}{Returns}
the X2 Pdcp Provider interface offered by this E\+PC X2 entity 
\end{DoxyReturn}

\begin{DoxyCode}
158 \{
159   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION}(\textcolor{keyword}{this});
160   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1EpcX2_a18e51cbbd2e384251d4f4bdebde0b23d}{m\_x2PdcpProvider};
161 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Get\+Epc\+X2\+Rlc\+Provider@{Get\+Epc\+X2\+Rlc\+Provider}}
\index{Get\+Epc\+X2\+Rlc\+Provider@{Get\+Epc\+X2\+Rlc\+Provider}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Get\+Epc\+X2\+Rlc\+Provider()}{GetEpcX2RlcProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Rlc\+Provider} $\ast$ ns3\+::\+Epc\+X2\+::\+Get\+Epc\+X2\+Rlc\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_a5b8041e9ebefadbacbe216665bea7b90}{}\label{classns3_1_1EpcX2_a5b8041e9ebefadbacbe216665bea7b90}
\begin{DoxyReturn}{Returns}
the X2 Rlc Provider interface offered by this E\+PC X2 entity 
\end{DoxyReturn}

\begin{DoxyCode}
165 \{
166   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1EpcX2_aa1bb6d6dbb18d9e41151177365109bf8}{m\_x2RlcProvider};
167 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Get\+Epc\+X2\+Sap\+Provider@{Get\+Epc\+X2\+Sap\+Provider}}
\index{Get\+Epc\+X2\+Sap\+Provider@{Get\+Epc\+X2\+Sap\+Provider}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Get\+Epc\+X2\+Sap\+Provider()}{GetEpcX2SapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Sap\+Provider} $\ast$ ns3\+::\+Epc\+X2\+::\+Get\+Epc\+X2\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_a8e0c457eda78448e403f6769be8e25c9}{}\label{classns3_1_1EpcX2_a8e0c457eda78448e403f6769be8e25c9}
\begin{DoxyReturn}{Returns}
the X2 S\+AP Provider interface offered by this E\+PC X2 entity 
\end{DoxyReturn}

\begin{DoxyCode}
150 \{
151   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
152   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1EpcX2_a0f18e63c998d9dc8771e80d325870fc2}{m\_x2SapProvider};
153 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Epc\+X2\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1EpcX2_a4c5cfede886af2ff95ede07dda646e7d}{}\label{classns3_1_1EpcX2_a4c5cfede886af2ff95ede07dda646e7d}

\begin{DoxyCode}
127 \{
128   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::EpcX2"})
129     .SetParent<\hyperlink{classns3_1_1Object_a40860402e64d8008fb42329df7097cdb}{Object}> ()
130     .SetGroupName(\textcolor{stringliteral}{"Lte"})
131     .AddTraceSource (\textcolor{stringliteral}{"RxPDU"},
132                      \textcolor{stringliteral}{"PDU received."},
133                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1EpcX2_a00f11080fe6a1d7020bfae006445eb59}{EpcX2::m\_rxPdu}),
134                      \textcolor{stringliteral}{"ns3::EpcX2::ReceiveTracedCallback"});
135   \textcolor{keywordflow}{return} tid;
136 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Recv\+From\+X2c\+Socket@{Recv\+From\+X2c\+Socket}}
\index{Recv\+From\+X2c\+Socket@{Recv\+From\+X2c\+Socket}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Recv\+From\+X2c\+Socket(\+Ptr$<$ Socket $>$ socket)}{RecvFromX2cSocket(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Recv\+From\+X2c\+Socket (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_a72bf05af65397dab7bc65df72bb09ebf}{}\label{classns3_1_1EpcX2_a72bf05af65397dab7bc65df72bb09ebf}
Method to be assigned to the recv callback of the X2-\/C (X2 Control Plane) socket. It is called when the e\+NB receives a packet from the peer e\+NB of the X2-\/C interface


\begin{DoxyParams}{Parameters}
{\em socket} & socket of the X2-\/C interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
263 \{
264   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
265 
266   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: from Socket"});
267   Ptr<Packet> packet = socket->\hyperlink{classns3_1_1Socket_a8949b1f844aae563446f2f4c5be8827a}{Recv} ();
268   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
269 
270   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds}.find (socket) != 
      \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds}.end (),
271                  \textcolor{stringliteral}{"Missing infos of local and remote CellId"});
272   Ptr<X2CellInfo> cellsInfo = \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds} [socket];
273 
274   EpcX2Tag epcX2Tag;
275   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay};
276   \textcolor{keywordflow}{if} (packet->PeekPacketTag(epcX2Tag))
277     \{
278       delay = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}() - epcX2Tag.GetSenderTimestamp ();
279       packet->RemovePacketTag(epcX2Tag);
280     \}
281 
282   \hyperlink{classns3_1_1EpcX2_a00f11080fe6a1d7020bfae006445eb59}{m\_rxPdu}(cellsInfo->m\_remoteCellId, cellsInfo->m\_localCellId, packet->GetSize (), delay.
      GetNanoSeconds (), 0);
283 
284   EpcX2Header x2Header;
285   packet->RemoveHeader (x2Header);
286 
287   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"X2 header: "} << x2Header);
288 
289   uint8\_t messageType = x2Header.GetMessageType ();
290   uint8\_t procedureCode = x2Header.GetProcedureCode ();
291  \textcolor{comment}{// std::cout<<(uint16\_t) messageType <<std::endl;}
292 
293 
294   \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da90a8f9de7236863fdfeb02f5580fbe38}{EpcX2Header::HandoverPreparation})
295     \{
296       \textcolor{keywordflow}{if} (messageType == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage})
297         \{
298           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: HANDOVER REQUEST"});
299 
300           EpcX2HandoverRequestHeader x2HoReqHeader;
301           packet->RemoveHeader (x2HoReqHeader);
302 
303           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 HandoverRequest header: "} << x2HoReqHeader);
304 
305           EpcX2SapUser::HandoverRequestParams params;
306           params.oldEnbUeX2apId = x2HoReqHeader.GetOldEnbUeX2apId ();
307           params.cause          = x2HoReqHeader.GetCause ();
308           params.sourceCellId   = cellsInfo->m\_remoteCellId;
309           params.targetCellId   = x2HoReqHeader.GetTargetCellId ();
310           params.mmeUeS1apId    = x2HoReqHeader.GetMmeUeS1apId ();
311           params.ueAggregateMaxBitRateDownlink = x2HoReqHeader.GetUeAggregateMaxBitRateDownlink ();
312           params.ueAggregateMaxBitRateUplink   = x2HoReqHeader.GetUeAggregateMaxBitRateUplink ();
313           params.bearers        = x2HoReqHeader.GetBearers ();
314           \textcolor{comment}{// RlcRequests for secondary cell HO}
315           params.rlcRequests    = x2HoReqHeader.GetRlcSetupRequests();
316           params.rrcContext     = packet;
317           params.isMc           = x2HoReqHeader.GetIsMc ();
318 
319           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
320           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
321           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
322           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"mmeUeS1apId = "} << params.mmeUeS1apId);
323           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cellsInfo->m\_localCellId = "} << cellsInfo->m\_localCellId);
324           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (params.targetCellId == cellsInfo->m\_localCellId,
325                          \textcolor{stringliteral}{"TargetCellId mismatches with localCellId"});
326 
327           \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_ac89cf3449fc971960e4c7a7a9af23c7d}{RecvHandoverRequest} (params);
328         \}
329       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (messageType == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a21bd7a420a07fd4849d7271a5c381a44}{EpcX2Header::SuccessfulOutcome})
330         \{
331           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: HANDOVER REQUEST ACK"});
332 
333           EpcX2HandoverRequestAckHeader x2HoReqAckHeader;
334           packet->RemoveHeader (x2HoReqAckHeader);
335 
336           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 HandoverRequestAck header: "} << x2HoReqAckHeader);
337 
338           EpcX2SapUser::HandoverRequestAckParams params;          
339           params.oldEnbUeX2apId = x2HoReqAckHeader.GetOldEnbUeX2apId ();
340           params.newEnbUeX2apId = x2HoReqAckHeader.GetNewEnbUeX2apId ();
341           params.sourceCellId   = cellsInfo->m\_localCellId;
342           params.targetCellId   = cellsInfo->m\_remoteCellId;
343           params.admittedBearers = x2HoReqAckHeader.GetAdmittedBearers ();
344           params.notAdmittedBearers = x2HoReqAckHeader.GetNotAdmittedBearers ();
345           params.rrcContext     = packet;
346 
347           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
348           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"newEnbUeX2apId = "} << params.newEnbUeX2apId);
349           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
350           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
351 
352           \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a5e390d132f3f8433838aec1719a52bc2}{RecvHandoverRequestAck} (params);
353         \}
354       \textcolor{keywordflow}{else} \textcolor{comment}{// messageType == EpcX2Header::UnsuccessfulOutcome}
355         \{
356           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: HANDOVER PREPARATION FAILURE"});
357 
358           EpcX2HandoverPreparationFailureHeader x2HoPrepFailHeader;
359           packet->RemoveHeader (x2HoPrepFailHeader);
360 
361           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 HandoverPreparationFailure header: "} << x2HoPrepFailHeader);
362 
363           EpcX2SapUser::HandoverPreparationFailureParams params;          
364           params.oldEnbUeX2apId = x2HoPrepFailHeader.GetOldEnbUeX2apId ();
365           params.sourceCellId   = cellsInfo->m\_localCellId;
366           params.targetCellId   = cellsInfo->m\_remoteCellId;
367           params.cause          = x2HoPrepFailHeader.GetCause ();
368           params.criticalityDiagnostics = x2HoPrepFailHeader.GetCriticalityDiagnostics ();
369 
370           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
371           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
372           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
373           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cause = "} << params.cause);
374           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"criticalityDiagnostics = "} << params.criticalityDiagnostics);
375 
376           \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a805d5df676c49aedd76711dbdb980e17}{RecvHandoverPreparationFailure} (params);
377         \}
378     \}
379   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dae86cf17c79745d2849a8c1efcec6a64d}{EpcX2Header::LoadIndication})
380     \{
381       \textcolor{keywordflow}{if} (messageType == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage})
382         \{
383           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: LOAD INFORMATION"});
384 
385           EpcX2LoadInformationHeader x2LoadInfoHeader;
386           packet->RemoveHeader (x2LoadInfoHeader);
387 
388           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 LoadInformation header: "} << x2LoadInfoHeader);
389 
390           EpcX2SapUser::LoadInformationParams params;
391           params.cellInformationList = x2LoadInfoHeader.GetCellInformationList ();
392 
393           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cellInformationList size = "} << params.cellInformationList.size ());
394 
395           \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a3f780370974059b6ec3d115f5b1757d8}{RecvLoadInformation} (params);
396         \}
397     \}
398   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da61f2f7393e096b85367e74db07851ae4}{EpcX2Header::SnStatusTransfer})
399     \{
400       \textcolor{keywordflow}{if} (messageType == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage})
401         \{
402           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: SN STATUS TRANSFER"});
403 
404             EpcX2SnStatusTransferHeader x2SnStatusXferHeader;
405             packet->RemoveHeader (x2SnStatusXferHeader);
406 
407             \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 SnStatusTransfer header: "} << x2SnStatusXferHeader);
408 
409             EpcX2SapUser::SnStatusTransferParams params;
410             params.oldEnbUeX2apId = x2SnStatusXferHeader.GetOldEnbUeX2apId ();
411             params.newEnbUeX2apId = x2SnStatusXferHeader.GetNewEnbUeX2apId ();
412             params.sourceCellId   = cellsInfo->m\_remoteCellId;
413             params.targetCellId   = cellsInfo->m\_localCellId;
414             params.erabsSubjectToStatusTransferList = x2SnStatusXferHeader.
      GetErabsSubjectToStatusTransferList ();
415 
416             \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
417             \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"newEnbUeX2apId = "} << params.newEnbUeX2apId);
418             \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"sourceCellId = "} << params.sourceCellId);
419             \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"targetCellId = "} << params.targetCellId);
420             \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"erabsList size = "} << params.erabsSubjectToStatusTransferList.size (
      ));
421 
422             \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a261f30dd348d5abc9a270ef904c986c0}{RecvSnStatusTransfer} (params);
423         \}
424     \}
425   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dafaf7b3969cec8182c5b3843d2113bbcc}{EpcX2Header::UeContextRelease})
426     \{
427       \textcolor{keywordflow}{if} (messageType == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage})
428         \{
429           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: UE CONTEXT RELEASE"});
430 
431           EpcX2UeContextReleaseHeader x2UeCtxReleaseHeader;
432           packet->RemoveHeader (x2UeCtxReleaseHeader);
433 
434           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 UeContextRelease header: "} << x2UeCtxReleaseHeader);
435 
436           EpcX2SapUser::UeContextReleaseParams params;
437           params.oldEnbUeX2apId = x2UeCtxReleaseHeader.GetOldEnbUeX2apId ();
438           params.newEnbUeX2apId = x2UeCtxReleaseHeader.GetNewEnbUeX2apId ();
439           params.sourceCellId = cellsInfo->m\_remoteCellId;
440 
441           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"oldEnbUeX2apId = "} << params.oldEnbUeX2apId);
442           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"newEnbUeX2apId = "} << params.newEnbUeX2apId);
443 
444           \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a141e3d6880234990ccde32a16554e7d6}{RecvUeContextRelease} (params);
445         \}
446     \}
447   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da6761ec564ade1c9d61cfd1dc590535d0}{EpcX2Header::ResourceStatusReporting})
448     \{
449       \textcolor{keywordflow}{if} (messageType == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a5761e50c3c1918a44e3a5ebc86f17435}{EpcX2Header::InitiatingMessage})
450         \{
451           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: RESOURCE STATUS UPDATE"});
452 
453           EpcX2ResourceStatusUpdateHeader x2ResStatUpdHeader;
454           packet->RemoveHeader (x2ResStatUpdHeader);
455 
456           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 ResourceStatusUpdate header: "} << x2ResStatUpdHeader);
457 
458           EpcX2SapUser::ResourceStatusUpdateParams params;
459           params.targetCellId = 0;
460           params.enb1MeasurementId = x2ResStatUpdHeader.GetEnb1MeasurementId ();
461           params.enb2MeasurementId = x2ResStatUpdHeader.GetEnb2MeasurementId ();
462           params.cellMeasurementResultList = x2ResStatUpdHeader.GetCellMeasurementResultList ();
463 
464           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"enb1MeasurementId = "} << params.enb1MeasurementId);
465           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"enb2MeasurementId = "} << params.enb2MeasurementId);
466           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"cellMeasurementResultList size = "} << params.cellMeasurementResultList
      .size ());
467 
468           \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a7d0fa47a75bd24b12f15f4b5a1c7b253}{RecvResourceStatusUpdate} (params);
469         \}
470     \}
471   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0daa1fc9674b00b57cf95b53ef94f00db86}{EpcX2Header::RlcSetupRequest})
472     \{
473       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: RLC SETUP REQUEST"});
474 
475       EpcX2RlcSetupRequestHeader x2RlcHeader;
476       packet->RemoveHeader (x2RlcHeader);
477 
478       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RlcSetupRequest header: "} << x2RlcHeader);
479 
480       EpcX2SapUser::RlcSetupRequest params;
481       params.targetCellId = x2RlcHeader.GetTargetCellId();
482       params.sourceCellId = x2RlcHeader.GetSourceCellId ();
483       params.mmWaveRnti = x2RlcHeader.GetMmWaveRnti ();
484       params.gtpTeid = x2RlcHeader.GetGtpTeid ();
485       params.lteRnti = x2RlcHeader.GetLteRnti ();
486       params.drbid = x2RlcHeader.GetDrbid ();
487       params.lcinfo = x2RlcHeader.GetLcInfo();
488       params.rlcConfig = x2RlcHeader.GetRlcConfig();
489       params.logicalChannelConfig = x2RlcHeader.GetLogicalChannelConfig();
490 
491       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"GtpTeid = "} << params.gtpTeid);
492       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"MmWaveRnti = "} << params.mmWaveRnti);
493       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"SourceCellID = "} << params.sourceCellId);
494       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"TargetCellID = "} << params.targetCellId);
495       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Drbid = "} << params.drbid);
496 
497       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_af982d60c31e400c220777b2930470474}{RecvRlcSetupRequest} (params);
498     \}
499   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da8a3e97ca98e6cf28f14010bb1e9306cb}{EpcX2Header::RlcSetupCompleted})
500     \{
501       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: RLC SETUP COMPLETED"});
502 
503       EpcX2RlcSetupCompletedHeader x2RlcHeader;
504       packet->RemoveHeader (x2RlcHeader);
505 
506       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RlcSetupCompleted header: "} << x2RlcHeader);
507 
508       EpcX2SapUser::UeDataParams params;
509       params.targetCellId = x2RlcHeader.GetTargetCellId();
510       params.sourceCellId = x2RlcHeader.GetSourceCellId ();
511       params.gtpTeid = x2RlcHeader.GetGtpTeid ();
512 
513       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"GtpTeid = "} << params.gtpTeid);
514       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"SourceCellID = "} << params.sourceCellId);
515       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"TargetCellID = "} << params.targetCellId);
516 
517       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a6aea3dfa4b9483ef32463a0564eaa098}{RecvRlcSetupCompleted} (params);
518     \}
519   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da031eb5cb9e5a3611fbf6476448d6549f}{EpcX2Header::UpdateUeSinr})
520     \{
521       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: UPDATE UE SINR"});
522       
523       EpcX2UeImsiSinrUpdateHeader x2ueSinrUpdateHeader;
524       packet->RemoveHeader(x2ueSinrUpdateHeader);
525 
526       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 SinrUpdateHeader header: "} << x2ueSinrUpdateHeader);
527       EpcX2SapUser::UeImsiSinrParams params;
528       params.ueImsiSinrMap = x2ueSinrUpdateHeader.GetUeImsiSinrMap();
529       params.sourceCellId = x2ueSinrUpdateHeader.GetSourceCellId();
530       params.secondBestCellId=x2ueSinrUpdateHeader.GetSecondCellId(); \textcolor{comment}{//sjkang1015}
531       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_ab14ff4814fc40ca604d03654ab310a44}{RecvUeSinrUpdate}(params);  
532       \textcolor{comment}{//std::cout<< params.sourceCellId << std::endl;}
533 
534     \}
535   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da10ebb8c46efe10d8f9bacbd89027d945}{EpcX2Header::RequestMcHandover})
536     \{
537       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: REQUEST MC HANDOVER"});
538       
539       EpcX2McHandoverHeader x2mcHeader;
540       packet->RemoveHeader(x2mcHeader);
541 
542       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 RequestMcHandover header: "} << x2mcHeader);
543 
544       EpcX2SapUser::SecondaryHandoverParams params;
545       params.targetCellId = x2mcHeader.GetTargetCellId();
546       params.imsi = x2mcHeader.GetImsi();
547       params.oldCellId = x2mcHeader.GetOldCellId();
548 
549       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a7eecce34706ef7c77ccdc9623822ce33}{RecvMcHandoverRequest}(params);  
550     \}
551   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dacda8cb8a58dac96f5ea9be813f3a42c0}{EpcX2Header::NotifyMmWaveLteHandover})
552     \{
553       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: NOTIFY MMWAVE HANDOVER TO LTE"});
554       
555       EpcX2McHandoverHeader x2mcHeader;
556       packet->RemoveHeader(x2mcHeader);
557 
558       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 McHandover header: "} << x2mcHeader);
559 
560       EpcX2SapUser::SecondaryHandoverParams params;
561       params.targetCellId = x2mcHeader.GetTargetCellId(); \textcolor{comment}{// the new MmWave cell to which the UE is
       connected}
562       params.imsi = x2mcHeader.GetImsi(); 
563       params.oldCellId = x2mcHeader.GetOldCellId(); \textcolor{comment}{// actually, the LTE cell ID}
564 
565       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a900e3a0a064301f257351bab3288753d}{RecvLteMmWaveHandoverCompleted}(params);  
566     \}
567   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0dabadd277dc2cdf05400c9098c496cee3d}{EpcX2Header::SwitchConnection})
568     \{
569       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: SWITCH CONNECTION"});
570       
571       EpcX2ConnectionSwitchHeader x2mcHeader;
572       packet->RemoveHeader(x2mcHeader);
573 
574       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"X2 SwitchConnection header: "} << x2mcHeader);
575 
576       EpcX2SapUser::SwitchConnectionParams params;
577       params.mmWaveRnti = x2mcHeader.GetMmWaveRnti();
578       params.useMmWaveConnection = x2mcHeader.GetUseMmWaveConnection();
579       params.drbid = x2mcHeader.GetDrbid();
580 
581       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_ae11a4786c547ba2c41aba6c5d4c9d1da}{RecvConnectionSwitchToMmWave}(params);
582     \}
583   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0da3b5622b54cfa751687a29cea3845339b}{EpcX2Header::SecondaryCellHandoverCompleted}
      )
584     \{
585       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv X2 message: SECONDARY CELL HANDOVER COMPLETED"});
586 
587       EpcX2SecondaryCellHandoverCompletedHeader x2hoHeader;
588       packet->RemoveHeader(x2hoHeader);
589 
590       EpcX2SapUser::SecondaryHandoverCompletedParams params;
591       params.mmWaveRnti = x2hoHeader.GetMmWaveRnti();
592       params.imsi = x2hoHeader.GetImsi();
593       params.oldEnbUeX2apId = x2hoHeader.GetOldEnbUeX2apId();
594       params.cellId = cellsInfo->m\_remoteCellId;
595 
596       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_adb0b6750c0bf917699fe87e84270aebb}{RecvSecondaryCellHandoverCompleted}(params);
597     \}
598   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(procedureCode == \hyperlink{classns3_1_1EpcX2Header_afd178c1ed3c47948c587955698a15b0daeab9c84ab3a33a09c4ae2fccfec2eecb}{EpcX2Header::SendingAssistantInformation}
      )\{ \textcolor{comment}{//sjkang1114}
599 
600         \textcolor{keywordflow}{if} (messageType == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715ac5c673b39296b5c9b4cedf3575e0bb60}{EpcX2Header::McAssistantInfoForwarding})\{ \textcolor{comment}{
      //sjkang1114}
601                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Recv X2 message: from Socket"});
602                 EpcX2AssistantInfoHeader epcX2AssistantHeader;
603                 packet->RemoveHeader(epcX2AssistantHeader);
604                 EpcX2SapUser::AssistantInformationForSplitting params;
605                 params.Tx\_On\_Q\_Size = epcX2AssistantHeader.GetTxonQueue();
606                 params.Txed\_Q\_Delay =epcX2AssistantHeader.GetTxedQueue();
607                 params.Re\_TX\_Q\_Size =epcX2AssistantHeader.GetRetxQueue();
608                 params.Tx\_On\_Q\_Delay = epcX2AssistantHeader.GetTxonQueingDelay();
609                 params.Re\_Tx\_Q\_Delay = epcX2AssistantHeader.GetReTxQueuingDelay();
610                 params.sourceCellId = epcX2AssistantHeader.GetSourceCellId();
611                 params.rnti = epcX2AssistantHeader.GetRnti();
612                 params.drbId = epcX2AssistantHeader.GetDrbId();
613            \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser} ->\hyperlink{classns3_1_1EpcX2SapUser_a4c52bc66e831a21ec8049e28760e2209}{RecvAssistantInformation}(params); \textcolor{comment}{//sjkang1115}
614           \textcolor{comment}{// m\_x2PdcpUser->ReceiveAssistantInformation(params);}
615                 \}
616     \}
617   \textcolor{keywordflow}{else}
618     \{
619       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\textcolor{keyword}{false}, \textcolor{stringliteral}{"ProcedureCode NOT SUPPORTED!!!"});
620     \}
621 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 24




Here is the caller graph for this function\+:
% FIG 25


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Recv\+From\+X2u\+Socket@{Recv\+From\+X2u\+Socket}}
\index{Recv\+From\+X2u\+Socket@{Recv\+From\+X2u\+Socket}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Recv\+From\+X2u\+Socket(\+Ptr$<$ Socket $>$ socket)}{RecvFromX2uSocket(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Recv\+From\+X2u\+Socket (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_af7142276a4a54af090466d51a31c796f}{}\label{classns3_1_1EpcX2_af7142276a4a54af090466d51a31c796f}
Method to be assigned to the recv callback of the X2-\/U (X2 User Plane) socket. It is called when the e\+NB receives a packet from the peer e\+NB of the X2-\/U interface


\begin{DoxyParams}{Parameters}
{\em socket} & socket of the X2-\/U interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
626 \{
627   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << socket);
628 
629   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Recv UE DATA through X2-U interface from Socket"});
630   Ptr<Packet> packet = socket->\hyperlink{classns3_1_1Socket_a8949b1f844aae563446f2f4c5be8827a}{Recv} ();
631   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"packetLen = "} << packet->GetSize ());
632 
633   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds}.find (socket) != 
      \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds}.end (),
634                  \textcolor{stringliteral}{"Missing infos of local and remote CellId"});
635   Ptr<X2CellInfo> cellsInfo = \hyperlink{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{m\_x2InterfaceCellIds} [socket];
636 
637   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"localCellId = "} << cellsInfo->m\_localCellId);
638   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"remoteCellId = "} << cellsInfo->m\_remoteCellId);
639 
640   EpcX2Tag epcX2Tag;
641   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay};
642   \textcolor{keywordflow}{if} (packet->PeekPacketTag(epcX2Tag))
643     \{
644       delay = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}() - epcX2Tag.GetSenderTimestamp ();
645       packet->RemovePacketTag(epcX2Tag);
646     \}
647   \hyperlink{classns3_1_1EpcX2_a00f11080fe6a1d7020bfae006445eb59}{m\_rxPdu}(cellsInfo->m\_localCellId, cellsInfo->m\_remoteCellId, packet->GetSize (), delay.
      GetNanoSeconds (), 1);
648 
649   GtpuHeader gtpu;
650   packet->RemoveHeader (gtpu);
651   \textcolor{comment}{//SocketAddressTag satag;}
652   \textcolor{comment}{//packet->RemovePacketTag(satag);}
653 
654   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"GTP-U header: "} << gtpu);
655 
656   EpcX2SapUser::UeDataParams params;
657   params.sourceCellId = cellsInfo->m\_remoteCellId;
658   params.targetCellId = cellsInfo->m\_localCellId;
659   params.gtpTeid = gtpu.GetTeid ();
660   params.ueData = packet;
661 
662   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"Received packet on X2 u, size "} << packet->GetSize() 
663     << \textcolor{stringliteral}{" source "} << params.sourceCellId << \textcolor{stringliteral}{" target "} << params.targetCellId << \textcolor{stringliteral}{" type "} << gtpu.
      GetMessageType());
664 
665   \textcolor{keywordflow}{if}(\hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.find(params.gtpTeid) == 
      \hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.end())
666   \{
667     \textcolor{keywordflow}{if}(gtpu.GetMessageType() == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a8a0607f112abe862244717f789ea9ba8}{EpcX2Header::McForwardDownlinkData})
668     \{
669       \textcolor{comment}{// add PdcpTag}
670       PdcpTag pdcpTag (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ());
671       params.ueData->AddByteTag (pdcpTag);
672       \textcolor{comment}{// call rlc interface}
673       EpcX2RlcUser* user = \hyperlink{classns3_1_1EpcX2_a1fca08301d8d13f29a81d66250e34746}{m\_x2RlcUserMap}.find(params.gtpTeid)->second;
674       EpcX2RlcUser* user\_2 = \hyperlink{classns3_1_1EpcX2_a71669e6a9be4d7640d05d8ff9fc21e62}{m\_x2RlcUserMap\_2}.find(params.gtpTeid)->second; \textcolor{comment}{//sjkang1016}
675 
676       \textcolor{keywordflow}{if}(user != 0 && !\hyperlink{classns3_1_1EpcX2_a3cc979cc2ca388967ddb4ca05f2d601d}{isAdditionalMmWave}) \textcolor{comment}{//sjkang1016}
677       \{
678         user -> SendMcPdcpSdu(params);
679       \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (user\_2 !=0 && \hyperlink{classns3_1_1EpcX2_a3cc979cc2ca388967ddb4ca05f2d601d}{isAdditionalMmWave}) \textcolor{comment}{//sjkang1016}
680       \{ \textcolor{comment}{//sjkang1016}
681         \textcolor{comment}{//  std::cout << "call user\_2--------------- " <<std::endl;}
682           user\_2 ->SendMcPdcpSdu(params);
683       \}
684       \textcolor{keywordflow}{else}
685       \{
686         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"Not implemented: Forward to the other cell or to LTE"});
687       \}
688     \} 
689     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (gtpu.GetMessageType() == \hyperlink{classns3_1_1EpcX2Header_a0e69b043a20eaee4c570f223f4eca715a57a81c6c7add0af11a6230b460268ce6}{EpcX2Header::McForwardUplinkData})
690     \{
691       \textcolor{comment}{// call pdcp interface}
692       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"Call PDCP interface"});
693 
694  \textcolor{comment}{//     if(!isAdditionalMmWave) //sjkang1016}
695    \textcolor{comment}{//   \{}
696         \textcolor{comment}{//  std::cout << "call to user\_2---------------for uplink " <<std::endl;}
697       \hyperlink{classns3_1_1EpcX2_a0f79f52694f920d418c077441c73e2e6}{m\_x2PdcpUserMap}[params.gtpTeid] -> ReceiveMcPdcpPdu(params);
698     \textcolor{comment}{//  \}}
699      \textcolor{comment}{// else\{}
700         \textcolor{comment}{//  std::cout << "call to user\_2---------------for uplink2 " <<std::endl;}
701         \textcolor{comment}{//  m\_x2PdcpUserMap\_2[params.gtpTeid] -> ReceiveMcPdcpPdu(params);}
702       \textcolor{comment}{//\}}
703     \}
704     \textcolor{keywordflow}{else}
705     \{
706       \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser}->\hyperlink{classns3_1_1EpcX2SapUser_a0a351188eaed5eb135daee0ee01950f0}{RecvUeData} (params);
707     \}
708   \}
709   \textcolor{keywordflow}{else} \textcolor{comment}{// the packet was received during a secondary cell HO, forward to the target cell}
710   \{
711     params.sourceCellId = cellsInfo->m\_remoteCellId;
712     params.targetCellId = \hyperlink{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{m\_teidToBeForwardedMap}.find(params.gtpTeid)->second;
713     \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC}(\textcolor{stringliteral}{"Forward from "} << cellsInfo->m\_localCellId << \textcolor{stringliteral}{" to "} << params.targetCellId);
714     \hyperlink{classns3_1_1EpcX2_a641588d125f600122d56e34fa1fddd5c}{DoSendMcPdcpPdu}(params);
715   \}
716 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 26




Here is the caller graph for this function\+:
% FIG 27


\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Set\+Epc\+X2\+Pdcp\+User@{Set\+Epc\+X2\+Pdcp\+User}}
\index{Set\+Epc\+X2\+Pdcp\+User@{Set\+Epc\+X2\+Pdcp\+User}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Set\+Epc\+X2\+Pdcp\+User(\+Epc\+X2\+Pdcp\+User $\ast$s)}{SetEpcX2PdcpUser(EpcX2PdcpUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Set\+Epc\+X2\+Pdcp\+User (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Pdcp\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_ae17788af334e346dc55c027034e46843}{}\label{classns3_1_1EpcX2_ae17788af334e346dc55c027034e46843}

\begin{DoxyCode}
138                                        \{ \textcolor{comment}{//sjkang 1114}
139         \hyperlink{classns3_1_1EpcX2_a520ef9a6812a81c5d122833ccae05bfb}{m\_x2PdcpUser} =\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} ;
140 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Set\+Epc\+X2\+Sap\+User@{Set\+Epc\+X2\+Sap\+User}}
\index{Set\+Epc\+X2\+Sap\+User@{Set\+Epc\+X2\+Sap\+User}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Set\+Epc\+X2\+Sap\+User(\+Epc\+X2\+Sap\+User $\ast$s)}{SetEpcX2SapUser(EpcX2SapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Set\+Epc\+X2\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Epc\+X2\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_ae91f9247984c4e0f55f5712cb062074e}{}\label{classns3_1_1EpcX2_ae91f9247984c4e0f55f5712cb062074e}

\begin{DoxyParams}{Parameters}
{\em s} & the X2 S\+AP User to be used by this E\+PC X2 entity \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
143 \{
144   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
145   \hyperlink{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{m\_x2SapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
146 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Set\+Mc\+Epc\+X2\+Pdcp\+User@{Set\+Mc\+Epc\+X2\+Pdcp\+User}}
\index{Set\+Mc\+Epc\+X2\+Pdcp\+User@{Set\+Mc\+Epc\+X2\+Pdcp\+User}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Set\+Mc\+Epc\+X2\+Pdcp\+User(uint32\+\_\+t teid, Epc\+X2\+Pdcp\+User $\ast$pdcp\+User)}{SetMcEpcX2PdcpUser(uint32_t teid, EpcX2PdcpUser *pdcpUser)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Set\+Mc\+Epc\+X2\+Pdcp\+User (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{teid, }
\item[{{\bf Epc\+X2\+Pdcp\+User} $\ast$}]{pdcp\+User}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_a9b7b0b62fb4a37e4551e159d9757a87a}{}\label{classns3_1_1EpcX2_a9b7b0b62fb4a37e4551e159d9757a87a}

\begin{DoxyParams}{Parameters}
{\em the} & teid of the MC device \\
\hline
{\em the} & X2 Pdcp User interface associated to the teid \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
181 \{
182   \textcolor{comment}{// TODO it may change (for the same teid) on handover between secondary cells, as in
       LteEnbRrc::RecvRlcSetupRequest}
183   \textcolor{comment}{//NS\_ASSERT\_MSG(m\_x2PdcpUserMap.find(teid) == m\_x2PdcpUserMap.end(), "Teid " << teid}
184   \textcolor{comment}{//  << " is already setup\(\backslash\)n");}
185   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"Add EpcX2PdcpUser for teid "} << teid);
186   \hyperlink{classns3_1_1EpcX2_a0f79f52694f920d418c077441c73e2e6}{m\_x2PdcpUserMap}[teid] = pdcpUser;
187 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Set\+Mc\+Epc\+X2\+Pdcp\+User\+\_\+2@{Set\+Mc\+Epc\+X2\+Pdcp\+User\+\_\+2}}
\index{Set\+Mc\+Epc\+X2\+Pdcp\+User\+\_\+2@{Set\+Mc\+Epc\+X2\+Pdcp\+User\+\_\+2}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Set\+Mc\+Epc\+X2\+Pdcp\+User\+\_\+2(uint32\+\_\+t teid, Epc\+X2\+Pdcp\+User $\ast$pdcp\+User)}{SetMcEpcX2PdcpUser_2(uint32_t teid, EpcX2PdcpUser *pdcpUser)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Set\+Mc\+Epc\+X2\+Pdcp\+User\+\_\+2 (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{teid, }
\item[{{\bf Epc\+X2\+Pdcp\+User} $\ast$}]{pdcp\+User}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_afbf2008beffd05e00caa03f9be34cd40}{}\label{classns3_1_1EpcX2_afbf2008beffd05e00caa03f9be34cd40}

\begin{DoxyCode}
200 \{
201   \textcolor{comment}{// TODO it may change (for the same teid) on handover between secondary cells, as in
       LteEnbRrc::RecvRlcSetupRequest}
202   \textcolor{comment}{//NS\_ASSERT\_MSG(m\_x2PdcpUserMap.find(teid) == m\_x2PdcpUserMap.end(), "Teid " << teid}
203   \textcolor{comment}{//  << " is already setup\(\backslash\)n");}
204   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"Add EpcX2PdcpUser for teid "} << teid);
205   \hyperlink{classns3_1_1EpcX2_ab5cecb7cbdd0806ce336e52433751db1}{m\_x2PdcpUserMap\_2}[teid] = pdcpUser;
206 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Set\+Mc\+Epc\+X2\+Rlc\+User@{Set\+Mc\+Epc\+X2\+Rlc\+User}}
\index{Set\+Mc\+Epc\+X2\+Rlc\+User@{Set\+Mc\+Epc\+X2\+Rlc\+User}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Set\+Mc\+Epc\+X2\+Rlc\+User(uint32\+\_\+t teid, Epc\+X2\+Rlc\+User $\ast$rlc\+User)}{SetMcEpcX2RlcUser(uint32_t teid, EpcX2RlcUser *rlcUser)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Set\+Mc\+Epc\+X2\+Rlc\+User (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{teid, }
\item[{{\bf Epc\+X2\+Rlc\+User} $\ast$}]{rlc\+User}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_aa0b669dc4ab9143970d80d4cdbcd076f}{}\label{classns3_1_1EpcX2_aa0b669dc4ab9143970d80d4cdbcd076f}

\begin{DoxyParams}{Parameters}
{\em the} & teid of the MC device \\
\hline
{\em the} & X2 Rlc User interface associated to the teid \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
171 \{
172   \textcolor{comment}{// TODO it may change (for the same teid) on handover between secondary cells, as in
       LteEnbRrc::RecvRlcSetupRequest}
173   \textcolor{comment}{//NS\_ASSERT\_MSG(m\_x2RlcUserMap.find(teid) == m\_x2RlcUserMap.end(), "Teid " << teid}
174   \textcolor{comment}{//  << " is already setup\(\backslash\)n");}
175   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"Add EpcX2RlcUser for teid "} << teid);
176   \hyperlink{classns3_1_1EpcX2_a1fca08301d8d13f29a81d66250e34746}{m\_x2RlcUserMap}[teid] = rlcUser;
177 \}
\end{DoxyCode}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Set\+Mc\+Epc\+X2\+Rlc\+User\+\_\+2@{Set\+Mc\+Epc\+X2\+Rlc\+User\+\_\+2}}
\index{Set\+Mc\+Epc\+X2\+Rlc\+User\+\_\+2@{Set\+Mc\+Epc\+X2\+Rlc\+User\+\_\+2}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Set\+Mc\+Epc\+X2\+Rlc\+User\+\_\+2(uint32\+\_\+t teid, Epc\+X2\+Rlc\+User $\ast$rlc\+User)}{SetMcEpcX2RlcUser_2(uint32_t teid, EpcX2RlcUser *rlcUser)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Epc\+X2\+::\+Set\+Mc\+Epc\+X2\+Rlc\+User\+\_\+2 (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{teid, }
\item[{{\bf Epc\+X2\+Rlc\+User} $\ast$}]{rlc\+User}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1EpcX2_aa3a4bab218092ffdb478bf65066e2c33}{}\label{classns3_1_1EpcX2_aa3a4bab218092ffdb478bf65066e2c33}

\begin{DoxyCode}
190 \{
191   \textcolor{comment}{// TODO it may change (for the same teid) on handover between secondary cells, as in
       LteEnbRrc::RecvRlcSetupRequest}
192   \textcolor{comment}{//NS\_ASSERT\_MSG(m\_x2RlcUserMap.find(teid) == m\_x2RlcUserMap.end(), "Teid " << teid}
193   \textcolor{comment}{//  << " is already setup\(\backslash\)n");}
194   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(\textcolor{stringliteral}{"Add EpcX2RlcUser for teid "} << teid);
195   \hyperlink{classns3_1_1EpcX2_a71669e6a9be4d7640d05d8ff9fc21e62}{m\_x2RlcUserMap\_2}[teid] = rlcUser;
196 \}
\end{DoxyCode}


\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Epc\+X2\+Pdcp\+Specific\+Provider$<$ Epc\+X2 $>$@{Epc\+X2\+Pdcp\+Specific\+Provider$<$ Epc\+X2 $>$}}
\index{Epc\+X2\+Pdcp\+Specific\+Provider$<$ Epc\+X2 $>$@{Epc\+X2\+Pdcp\+Specific\+Provider$<$ Epc\+X2 $>$}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Epc\+X2\+Pdcp\+Specific\+Provider$<$ Epc\+X2 $>$}{EpcX2PdcpSpecificProvider< EpcX2 >}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Epc\+X2\+Pdcp\+Specific\+Provider}$<$ {\bf Epc\+X2} $>$\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1EpcX2_a372bb6d7b4f9b08802172b6cf02ecd2d}{}\label{classns3_1_1EpcX2_a372bb6d7b4f9b08802172b6cf02ecd2d}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Epc\+X2\+Rlc\+Specific\+Provider$<$ Epc\+X2 $>$@{Epc\+X2\+Rlc\+Specific\+Provider$<$ Epc\+X2 $>$}}
\index{Epc\+X2\+Rlc\+Specific\+Provider$<$ Epc\+X2 $>$@{Epc\+X2\+Rlc\+Specific\+Provider$<$ Epc\+X2 $>$}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Epc\+X2\+Rlc\+Specific\+Provider$<$ Epc\+X2 $>$}{EpcX2RlcSpecificProvider< EpcX2 >}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Epc\+X2\+Rlc\+Specific\+Provider}$<$ {\bf Epc\+X2} $>$\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1EpcX2_ad723f727ad6075fde297057b65793220}{}\label{classns3_1_1EpcX2_ad723f727ad6075fde297057b65793220}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!Epc\+X2\+Specific\+Epc\+X2\+Sap\+Provider$<$ Epc\+X2 $>$@{Epc\+X2\+Specific\+Epc\+X2\+Sap\+Provider$<$ Epc\+X2 $>$}}
\index{Epc\+X2\+Specific\+Epc\+X2\+Sap\+Provider$<$ Epc\+X2 $>$@{Epc\+X2\+Specific\+Epc\+X2\+Sap\+Provider$<$ Epc\+X2 $>$}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{Epc\+X2\+Specific\+Epc\+X2\+Sap\+Provider$<$ Epc\+X2 $>$}{EpcX2SpecificEpcX2SapProvider< EpcX2 >}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Epc\+X2\+Specific\+Epc\+X2\+Sap\+Provider}$<$ {\bf Epc\+X2} $>$\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1EpcX2_a5fa3eadb39e71e0c9f7a469a8315c690}{}\label{classns3_1_1EpcX2_a5fa3eadb39e71e0c9f7a469a8315c690}


\subsection{Member Data Documentation}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!is\+Additional\+Mm\+Wave@{is\+Additional\+Mm\+Wave}}
\index{is\+Additional\+Mm\+Wave@{is\+Additional\+Mm\+Wave}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{is\+Additional\+Mm\+Wave}{isAdditionalMmWave}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Epc\+X2\+::is\+Additional\+Mm\+Wave ={\bf false}}\hypertarget{classns3_1_1EpcX2_a3cc979cc2ca388967ddb4ca05f2d601d}{}\label{classns3_1_1EpcX2_a3cc979cc2ca388967ddb4ca05f2d601d}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+rx\+Pdu@{m\+\_\+rx\+Pdu}}
\index{m\+\_\+rx\+Pdu@{m\+\_\+rx\+Pdu}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+rx\+Pdu}{m_rxPdu}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<$uint16\+\_\+t, uint16\+\_\+t, uint32\+\_\+t, uint64\+\_\+t, bool$>$ ns3\+::\+Epc\+X2\+::m\+\_\+rx\+Pdu\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcX2_a00f11080fe6a1d7020bfae006445eb59}{}\label{classns3_1_1EpcX2_a00f11080fe6a1d7020bfae006445eb59}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+teid\+To\+Be\+Forwarded\+Map@{m\+\_\+teid\+To\+Be\+Forwarded\+Map}}
\index{m\+\_\+teid\+To\+Be\+Forwarded\+Map@{m\+\_\+teid\+To\+Be\+Forwarded\+Map}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+teid\+To\+Be\+Forwarded\+Map}{m_teidToBeForwardedMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$uint32\+\_\+t, uint16\+\_\+t$>$ ns3\+::\+Epc\+X2\+::m\+\_\+teid\+To\+Be\+Forwarded\+Map\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}{}\label{classns3_1_1EpcX2_a18b54cbbfdd1a869ce3c504274294ab6}
Map the gtp\+Teid to the target\+Cell\+Id to which the packet should be forwarded during a secondary cell handover \index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2c\+Udp\+Port@{m\+\_\+x2c\+Udp\+Port}}
\index{m\+\_\+x2c\+Udp\+Port@{m\+\_\+x2c\+Udp\+Port}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2c\+Udp\+Port}{m_x2cUdpPort}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Epc\+X2\+::m\+\_\+x2c\+Udp\+Port\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}{}\label{classns3_1_1EpcX2_aa2fe730659f6fc10fcd8c44272f96dde}
U\+DP ports to be used for the X2 interfaces\+: X2-\/C and X2-\/U \index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Interface\+Cell\+Ids@{m\+\_\+x2\+Interface\+Cell\+Ids}}
\index{m\+\_\+x2\+Interface\+Cell\+Ids@{m\+\_\+x2\+Interface\+Cell\+Ids}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Interface\+Cell\+Ids}{m_x2InterfaceCellIds}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ {\bf Ptr}$<${\bf Socket}$>$, {\bf Ptr}$<${\bf X2\+Cell\+Info}$>$ $>$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Interface\+Cell\+Ids\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}{}\label{classns3_1_1EpcX2_ac2a7cd7a712f47a9f429254842762482}
Map the local\+Socket (the one receiving the X2 message) to the corresponding (source\+Cell\+Id, target\+Cell\+Id) associated with the X2 interface \index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Interface\+Sockets@{m\+\_\+x2\+Interface\+Sockets}}
\index{m\+\_\+x2\+Interface\+Sockets@{m\+\_\+x2\+Interface\+Sockets}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Interface\+Sockets}{m_x2InterfaceSockets}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Ptr}$<${\bf X2\+Iface\+Info}$>$ $>$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Interface\+Sockets\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}{}\label{classns3_1_1EpcX2_a0665276228b9b99a52ef6d5e9bdb306d}
Map the target\+Cell\+Id to the corresponding (source\+Socket, remote\+Ip\+Addr) to be used to send the X2 message \index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Pdcp\+Provider@{m\+\_\+x2\+Pdcp\+Provider}}
\index{m\+\_\+x2\+Pdcp\+Provider@{m\+\_\+x2\+Pdcp\+Provider}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Pdcp\+Provider}{m_x2PdcpProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Pdcp\+Provider}$\ast$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Pdcp\+Provider\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_a18e51cbbd2e384251d4f4bdebde0b23d}{}\label{classns3_1_1EpcX2_a18e51cbbd2e384251d4f4bdebde0b23d}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Pdcp\+User@{m\+\_\+x2\+Pdcp\+User}}
\index{m\+\_\+x2\+Pdcp\+User@{m\+\_\+x2\+Pdcp\+User}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Pdcp\+User}{m_x2PdcpUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Pdcp\+User}$\ast$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Pdcp\+User\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_a520ef9a6812a81c5d122833ccae05bfb}{}\label{classns3_1_1EpcX2_a520ef9a6812a81c5d122833ccae05bfb}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Pdcp\+User\+Map@{m\+\_\+x2\+Pdcp\+User\+Map}}
\index{m\+\_\+x2\+Pdcp\+User\+Map@{m\+\_\+x2\+Pdcp\+User\+Map}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Pdcp\+User\+Map}{m_x2PdcpUserMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint32\+\_\+t, {\bf Epc\+X2\+Pdcp\+User}$\ast$ $>$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Pdcp\+User\+Map\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_a0f79f52694f920d418c077441c73e2e6}{}\label{classns3_1_1EpcX2_a0f79f52694f920d418c077441c73e2e6}
Map the Pdcp\+User to a certain teid \index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Pdcp\+User\+Map\+\_\+2@{m\+\_\+x2\+Pdcp\+User\+Map\+\_\+2}}
\index{m\+\_\+x2\+Pdcp\+User\+Map\+\_\+2@{m\+\_\+x2\+Pdcp\+User\+Map\+\_\+2}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Pdcp\+User\+Map\+\_\+2}{m_x2PdcpUserMap_2}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint32\+\_\+t, {\bf Epc\+X2\+Pdcp\+User}$\ast$ $>$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Pdcp\+User\+Map\+\_\+2\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_ab5cecb7cbdd0806ce336e52433751db1}{}\label{classns3_1_1EpcX2_ab5cecb7cbdd0806ce336e52433751db1}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Rlc\+Provider@{m\+\_\+x2\+Rlc\+Provider}}
\index{m\+\_\+x2\+Rlc\+Provider@{m\+\_\+x2\+Rlc\+Provider}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Rlc\+Provider}{m_x2RlcProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Rlc\+Provider}$\ast$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Rlc\+Provider\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_aa1bb6d6dbb18d9e41151177365109bf8}{}\label{classns3_1_1EpcX2_aa1bb6d6dbb18d9e41151177365109bf8}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Rlc\+User\+Map@{m\+\_\+x2\+Rlc\+User\+Map}}
\index{m\+\_\+x2\+Rlc\+User\+Map@{m\+\_\+x2\+Rlc\+User\+Map}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Rlc\+User\+Map}{m_x2RlcUserMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint32\+\_\+t, {\bf Epc\+X2\+Rlc\+User}$\ast$ $>$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Rlc\+User\+Map\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_a1fca08301d8d13f29a81d66250e34746}{}\label{classns3_1_1EpcX2_a1fca08301d8d13f29a81d66250e34746}
Map the Rlc\+User to a certain teid \index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Rlc\+User\+Map\+\_\+2@{m\+\_\+x2\+Rlc\+User\+Map\+\_\+2}}
\index{m\+\_\+x2\+Rlc\+User\+Map\+\_\+2@{m\+\_\+x2\+Rlc\+User\+Map\+\_\+2}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Rlc\+User\+Map\+\_\+2}{m_x2RlcUserMap_2}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint32\+\_\+t, {\bf Epc\+X2\+Rlc\+User}$\ast$ $>$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Rlc\+User\+Map\+\_\+2\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_a71669e6a9be4d7640d05d8ff9fc21e62}{}\label{classns3_1_1EpcX2_a71669e6a9be4d7640d05d8ff9fc21e62}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Sap\+Provider@{m\+\_\+x2\+Sap\+Provider}}
\index{m\+\_\+x2\+Sap\+Provider@{m\+\_\+x2\+Sap\+Provider}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Sap\+Provider}{m_x2SapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Sap\+Provider}$\ast$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Sap\+Provider\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_a0f18e63c998d9dc8771e80d325870fc2}{}\label{classns3_1_1EpcX2_a0f18e63c998d9dc8771e80d325870fc2}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2\+Sap\+User@{m\+\_\+x2\+Sap\+User}}
\index{m\+\_\+x2\+Sap\+User@{m\+\_\+x2\+Sap\+User}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2\+Sap\+User}{m_x2SapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Epc\+X2\+Sap\+User}$\ast$ ns3\+::\+Epc\+X2\+::m\+\_\+x2\+Sap\+User\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}{}\label{classns3_1_1EpcX2_a0a74a3c19067fe18af3021c7b4c24c19}
\index{ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}!m\+\_\+x2u\+Udp\+Port@{m\+\_\+x2u\+Udp\+Port}}
\index{m\+\_\+x2u\+Udp\+Port@{m\+\_\+x2u\+Udp\+Port}!ns3\+::\+Epc\+X2@{ns3\+::\+Epc\+X2}}
\subsubsection[{\texorpdfstring{m\+\_\+x2u\+Udp\+Port}{m_x2uUdpPort}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Epc\+X2\+::m\+\_\+x2u\+Udp\+Port\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}{}\label{classns3_1_1EpcX2_aa0e3b62bf699a12b65309cb25f232974}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/model/\hyperlink{epc-x2_8h}{epc-\/x2.\+h}\item 
lte/model/\hyperlink{epc-x2_8cc}{epc-\/x2.\+cc}\end{DoxyCompactItemize}
