\hypertarget{classns3_1_1FqCoDelIpv4PacketFilter}{}\section{ns3\+:\+:Fq\+Co\+Del\+Ipv4\+Packet\+Filter Class Reference}
\label{classns3_1_1FqCoDelIpv4PacketFilter}\index{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}


{\ttfamily \#include $<$ipv4-\/packet-\/filter.\+h$>$}



Inheritance diagram for ns3\+:\+:Fq\+Co\+Del\+Ipv4\+Packet\+Filter\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Fq\+Co\+Del\+Ipv4\+Packet\+Filter\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_a243719198c32c9d009ef760d73f086ad}{Fq\+Co\+Del\+Ipv4\+Packet\+Filter} ()
\item 
virtual \hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_a9d68ada2059fcd12053de1549aa10f8d}{$\sim$\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_a4e1209791db9c9ec2432056f3bb41a1d}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual int32\+\_\+t \hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_a30e9d58fd5f789f3117e8c56676f04b8}{Do\+Classify} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1QueueDiscItem}{Queue\+Disc\+Item} $>$ item) const 
\begin{DoxyCompactList}\small\item\em Classify a packet. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}{m\+\_\+perturbation}
\begin{DoxyCompactList}\small\item\em hash perturbation value \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\hyperlink{classns3_1_1FqCoDelIpv4PacketFilter}{Fq\+Co\+Del\+Ipv4\+Packet\+Filter} is the filter to be added to the F\+Q\+Co\+Del queue disc to simulate the behavior of the fq-\/codel Linux queue disc. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}!Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}
\index{Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{Fq\+Co\+Del\+Ipv4\+Packet\+Filter}!ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}
\subsubsection[{\texorpdfstring{Fq\+Co\+Del\+Ipv4\+Packet\+Filter()}{FqCoDelIpv4PacketFilter()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1FqCoDelIpv4PacketFilter_a243719198c32c9d009ef760d73f086ad}{}\label{classns3_1_1FqCoDelIpv4PacketFilter_a243719198c32c9d009ef760d73f086ad}

\begin{DoxyCode}
86 \{
87   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
88 \}
\end{DoxyCode}
\index{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}!````~Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{$\sim$\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}
\index{````~Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{$\sim$\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}!ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}
\subsubsection[{\texorpdfstring{$\sim$\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter()}{~FqCoDelIpv4PacketFilter()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter\+::$\sim$\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1FqCoDelIpv4PacketFilter_a9d68ada2059fcd12053de1549aa10f8d}{}\label{classns3_1_1FqCoDelIpv4PacketFilter_a9d68ada2059fcd12053de1549aa10f8d}

\begin{DoxyCode}
91 \{
92   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
93 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}!Do\+Classify@{Do\+Classify}}
\index{Do\+Classify@{Do\+Classify}!ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}
\subsubsection[{\texorpdfstring{Do\+Classify(\+Ptr$<$ Queue\+Disc\+Item $>$ item) const }{DoClassify(Ptr< QueueDiscItem > item) const }}]{\setlength{\rightskip}{0pt plus 5cm}int32\+\_\+t ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter\+::\+Do\+Classify (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Queue\+Disc\+Item} $>$}]{item}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1FqCoDelIpv4PacketFilter_a30e9d58fd5f789f3117e8c56676f04b8}{}\label{classns3_1_1FqCoDelIpv4PacketFilter_a30e9d58fd5f789f3117e8c56676f04b8}


Classify a packet. 


\begin{DoxyParams}{Parameters}
{\em item} & the packet to classify.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 if the item does not match the filter conditions, or the configured return value otherwise. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Ipv4PacketFilter_a6761e159f66f21fa508ebda57103f2dd}{ns3\+::\+Ipv4\+Packet\+Filter}.


\begin{DoxyCode}
97 \{
98   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << item);
99   Ptr<Ipv4QueueDiscItem> ipv4Item = DynamicCast<Ipv4QueueDiscItem> (item);
100 
101   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ipv4Item != 0);
102 
103   Ipv4Header hdr = ipv4Item->GetHeader ();
104   Ipv4Address src = hdr.GetSource ();
105   Ipv4Address dest = hdr.GetDestination ();
106   uint8\_t prot = hdr.GetProtocol ();
107   uint16\_t fragOffset = hdr.GetFragmentOffset ();
108 
109   TcpHeader tcpHdr;
110   UdpHeader udpHdr;
111   uint16\_t srcPort = 0;
112   uint16\_t destPort = 0;
113 
114   Ptr<Packet> pkt = ipv4Item->GetPacket ();
115 
116   \textcolor{keywordflow}{if} (prot == 6 && fragOffset == 0) \textcolor{comment}{// TCP}
117     \{
118       pkt->PeekHeader (tcpHdr);
119       srcPort = tcpHdr.GetSourcePort ();
120       destPort = tcpHdr.GetDestinationPort ();
121     \}
122   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (prot == 17 && fragOffset == 0) \textcolor{comment}{// UDP}
123     \{
124       pkt->PeekHeader (udpHdr);
125       srcPort = udpHdr.GetSourcePort ();
126       destPort = udpHdr.GetDestinationPort ();
127     \}
128 
129   \textcolor{comment}{/* serialize the 5-tuple and the perturbation in buf */}
130   uint8\_t buf[17];
131   src.Serialize (buf);
132   dest.Serialize (buf + 4);
133   buf[8] = prot;
134   buf[9] = (srcPort >> 8) & 0xff;
135   buf[10] = srcPort & 0xff;
136   buf[11] = (destPort >> 8) & 0xff;
137   buf[12] = destPort & 0xff;
138   buf[13] = (\hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}{m\_perturbation} >> 24) & 0xff;
139   buf[14] = (\hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}{m\_perturbation} >> 16) & 0xff;
140   buf[15] = (\hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}{m\_perturbation} >> 8) & 0xff;
141   buf[16] = \hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}{m\_perturbation} & 0xff;
142 
143   \textcolor{comment}{/* Linux calculates the jhash2 (jenkins hash), we calculate the murmur3 */}
144   uint32\_t hash = \hyperlink{group__hash_ga7245e12aa78a81c7d008dd8fba67aeb4}{Hash32} ((\textcolor{keywordtype}{char}*) buf, 17);
145 
146   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Found Ipv4 packet; hash value "} << hash);
147 
148   \textcolor{keywordflow}{return} hash;
149 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1FqCoDelIpv4PacketFilter_a4e1209791db9c9ec2432056f3bb41a1d}{}\label{classns3_1_1FqCoDelIpv4PacketFilter_a4e1209791db9c9ec2432056f3bb41a1d}


Get the type ID. 

\begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
71 \{
72   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::FqCoDelIpv4PacketFilter"})
73     .SetParent<\hyperlink{classns3_1_1Ipv4PacketFilter_ac6976be81e13087af0e26c95b991fe53}{Ipv4PacketFilter}> ()
74     .SetGroupName (\textcolor{stringliteral}{"Internet"})
75     .AddConstructor<\hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_a243719198c32c9d009ef760d73f086ad}{FqCoDelIpv4PacketFilter}> ()
76     .AddAttribute (\textcolor{stringliteral}{"Perturbation"},
77                    \textcolor{stringliteral}{"The salt used as an additional input to the hash function of this filter"},
78                    UintegerValue (0),
79                    MakeUintegerAccessor (&
      \hyperlink{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}{FqCoDelIpv4PacketFilter::m\_perturbation}),
80                    MakeUintegerChecker<uint32\_t> ())
81   ;
82   \textcolor{keywordflow}{return} tid;
83 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




\subsection{Member Data Documentation}
\index{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}!m\+\_\+perturbation@{m\+\_\+perturbation}}
\index{m\+\_\+perturbation@{m\+\_\+perturbation}!ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter@{ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter}}
\subsubsection[{\texorpdfstring{m\+\_\+perturbation}{m_perturbation}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Fq\+Co\+Del\+Ipv4\+Packet\+Filter\+::m\+\_\+perturbation\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}{}\label{classns3_1_1FqCoDelIpv4PacketFilter_ad0cee61da1eb090b0a66c1a7722e991c}


hash perturbation value 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
internet/model/\hyperlink{ipv4-packet-filter_8h}{ipv4-\/packet-\/filter.\+h}\item 
internet/model/\hyperlink{ipv4-packet-filter_8cc}{ipv4-\/packet-\/filter.\+cc}\end{DoxyCompactItemize}
