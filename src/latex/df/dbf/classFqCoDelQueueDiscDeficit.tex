\hypertarget{classFqCoDelQueueDiscDeficit}{}\section{Fq\+Co\+Del\+Queue\+Disc\+Deficit Class Reference}
\label{classFqCoDelQueueDiscDeficit}\index{Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}}


Inheritance diagram for Fq\+Co\+Del\+Queue\+Disc\+Deficit\+:
% FIG 0


Collaboration diagram for Fq\+Co\+Del\+Queue\+Disc\+Deficit\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classFqCoDelQueueDiscDeficit_af7f4728ac0851379941c1cc979cf9aaf}{Fq\+Co\+Del\+Queue\+Disc\+Deficit} ()
\item 
virtual \hyperlink{classFqCoDelQueueDiscDeficit_a58900bee333ba9abba49e31c0f727746}{$\sim$\+Fq\+Co\+Del\+Queue\+Disc\+Deficit} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classFqCoDelQueueDiscDeficit_a9172161f28767de8a6893a8e0e320538}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}{Add\+Packet} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1FqCoDelQueueDisc}{Fq\+Co\+Del\+Queue\+Disc} $>$ queue, \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} hdr)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
This class tests the deficit per flow 

\subsection{Constructor \& Destructor Documentation}
\index{Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}!Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}}
\index{Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}!Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}}
\subsubsection[{\texorpdfstring{Fq\+Co\+Del\+Queue\+Disc\+Deficit()}{FqCoDelQueueDiscDeficit()}}]{\setlength{\rightskip}{0pt plus 5cm}Fq\+Co\+Del\+Queue\+Disc\+Deficit\+::\+Fq\+Co\+Del\+Queue\+Disc\+Deficit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classFqCoDelQueueDiscDeficit_af7f4728ac0851379941c1cc979cf9aaf}{}\label{classFqCoDelQueueDiscDeficit_af7f4728ac0851379941c1cc979cf9aaf}

\begin{DoxyCode}
177   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Test credits and flows status"})
178 \{
179 \}
\end{DoxyCode}
\index{Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}!````~Fq\+Co\+Del\+Queue\+Disc\+Deficit@{$\sim$\+Fq\+Co\+Del\+Queue\+Disc\+Deficit}}
\index{````~Fq\+Co\+Del\+Queue\+Disc\+Deficit@{$\sim$\+Fq\+Co\+Del\+Queue\+Disc\+Deficit}!Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}}
\subsubsection[{\texorpdfstring{$\sim$\+Fq\+Co\+Del\+Queue\+Disc\+Deficit()}{~FqCoDelQueueDiscDeficit()}}]{\setlength{\rightskip}{0pt plus 5cm}Fq\+Co\+Del\+Queue\+Disc\+Deficit\+::$\sim$\+Fq\+Co\+Del\+Queue\+Disc\+Deficit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classFqCoDelQueueDiscDeficit_a58900bee333ba9abba49e31c0f727746}{}\label{classFqCoDelQueueDiscDeficit_a58900bee333ba9abba49e31c0f727746}

\begin{DoxyCode}
182 \{
183 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}!Add\+Packet@{Add\+Packet}}
\index{Add\+Packet@{Add\+Packet}!Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}}
\subsubsection[{\texorpdfstring{Add\+Packet(\+Ptr$<$ Fq\+Co\+Del\+Queue\+Disc $>$ queue, Ipv4\+Header hdr)}{AddPacket(Ptr< FqCoDelQueueDisc > queue, Ipv4Header hdr)}}]{\setlength{\rightskip}{0pt plus 5cm}void Fq\+Co\+Del\+Queue\+Disc\+Deficit\+::\+Add\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Fq\+Co\+Del\+Queue\+Disc} $>$}]{queue, }
\item[{{\bf Ipv4\+Header}}]{hdr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}{}\label{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}

\begin{DoxyCode}
187 \{
188   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = Create<Packet> (100);
189   \hyperlink{classns3_1_1Address}{Address} dest;
190   \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4QueueDiscItem>} item = Create<Ipv4QueueDiscItem> (
      \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p}, dest, 0, hdr);
191   queue->\hyperlink{classns3_1_1QueueDisc_af452fb01b98fed312125163f1fe85431}{Enqueue} (item);
192 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Fq\+Co\+Del\+Queue\+Disc\+Deficit@{Fq\+Co\+Del\+Queue\+Disc\+Deficit}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Fq\+Co\+Del\+Queue\+Disc\+Deficit\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classFqCoDelQueueDiscDeficit_a9172161f28767de8a6893a8e0e320538}{}\label{classFqCoDelQueueDiscDeficit_a9172161f28767de8a6893a8e0e320538}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
196 \{
197   \hyperlink{classns3_1_1Ptr}{Ptr<FqCoDelQueueDisc>} queueDisc = CreateObjectWithAttributes<FqCoDelQueueDisc> ();
198   \hyperlink{classns3_1_1Ptr}{Ptr<FqCoDelIpv6PacketFilter>} ipv6Filter = 
      CreateObject<FqCoDelIpv6PacketFilter> ();
199   \hyperlink{classns3_1_1Ptr}{Ptr<FqCoDelIpv4PacketFilter>} ipv4Filter = 
      CreateObject<FqCoDelIpv4PacketFilter> ();
200   queueDisc->\hyperlink{classns3_1_1QueueDisc_a45efdc512f64cb8e0d57ad4f208ed4b7}{AddPacketFilter} (ipv6Filter);
201   queueDisc->\hyperlink{classns3_1_1QueueDisc_a45efdc512f64cb8e0d57ad4f208ed4b7}{AddPacketFilter} (ipv4Filter);
202 
203   queueDisc->\hyperlink{classns3_1_1FqCoDelQueueDisc_a3d7f222490f1df11be26ee4b3f0dfce5}{SetQuantum} (90);
204   queueDisc->\hyperlink{classns3_1_1Object_af4411cb29971772fcd09203474a95078}{Initialize} ();
205 
206   \hyperlink{classns3_1_1Ipv4Header}{Ipv4Header} hdr;
207   hdr.\hyperlink{classns3_1_1Ipv4Header_a3e961181f7839619a68bb7a2dcd483b0}{SetPayloadSize} (100);
208   hdr.\hyperlink{classns3_1_1Ipv4Header_af3c8c140e302ec4aa1dc885ce1dcc070}{SetSource} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"10.10.1.1"}));
209   hdr.\hyperlink{classns3_1_1Ipv4Header_a154e584fb5418de7a5ce34dbb852de02}{SetDestination} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"10.10.1.2"}));
210   hdr.\hyperlink{classns3_1_1Ipv4Header_aca424df8132b7717fb4c315fcb4ce4bf}{SetProtocol} (7);
211 
212   \textcolor{comment}{// Add a packet from the first flow}
213   \hyperlink{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}{AddPacket} (queueDisc, hdr);
214   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 1, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
215   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 1, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
216   \hyperlink{classns3_1_1Ptr}{Ptr<FqCoDelFlow>} flow1 = StaticCast<FqCoDelFlow> (queueDisc->
      \hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0));
217   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetDeficit (), \textcolor{keyword}{static\_cast<}int32\_t\textcolor{keyword}{>} (queueDisc->
      \hyperlink{classns3_1_1FqCoDelQueueDisc_aa3825612fcd4bec24bd0d52e97bd89b5}{GetQuantum} ()), \textcolor{stringliteral}{"the deficit of the first flow must equal the quantum"});
218   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetStatus (), FqCoDelFlow::NEW\_FLOW, \textcolor{stringliteral}{"the first flow
       must be in the list of new queues"});
219   \textcolor{comment}{// Dequeue a packet}
220   queueDisc->\hyperlink{classns3_1_1QueueDisc_a6c13fc489822c1487f61c2289f2e3629}{Dequeue} ();
221   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 0, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
222   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 0, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
223   \textcolor{comment}{// the deficit for the first flow becomes 90 - (100+20) = -30}
224   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetDeficit (), -30, \textcolor{stringliteral}{"unexpected deficit for the first
       flow"});
225 
226   \textcolor{comment}{// Add two packets from the first flow}
227   \hyperlink{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}{AddPacket} (queueDisc, hdr);
228   \hyperlink{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}{AddPacket} (queueDisc, hdr);
229   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 2, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
230   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 2, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
231   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetStatus (), FqCoDelFlow::NEW\_FLOW, \textcolor{stringliteral}{"the first flow
       must still be in the list of new queues"});
232 
233   \textcolor{comment}{// Add two packets from the second flow}
234   hdr.\hyperlink{classns3_1_1Ipv4Header_a154e584fb5418de7a5ce34dbb852de02}{SetDestination} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"10.10.1.10"}));
235   \hyperlink{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}{AddPacket} (queueDisc, hdr);
236   \hyperlink{classFqCoDelQueueDiscDeficit_a366b7108078d16452276b4be0b679ac9}{AddPacket} (queueDisc, hdr);
237   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 4, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
238   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 2, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
239   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (1)->
      GetQueueDisc ()->GetNPackets (), 2, \textcolor{stringliteral}{"unexpected number of packets in the second flow queue"});
240   \hyperlink{classns3_1_1Ptr}{Ptr<FqCoDelFlow>} flow2 = StaticCast<FqCoDelFlow> (queueDisc->
      \hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (1));
241   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetDeficit (), \textcolor{keyword}{static\_cast<}int32\_t\textcolor{keyword}{>} (queueDisc->
      \hyperlink{classns3_1_1FqCoDelQueueDisc_aa3825612fcd4bec24bd0d52e97bd89b5}{GetQuantum} ()), \textcolor{stringliteral}{"the deficit of the second flow must equal the quantum"});
242   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetStatus (), FqCoDelFlow::NEW\_FLOW, \textcolor{stringliteral}{"the second flow
       must be in the list of new queues"});
243 
244   \textcolor{comment}{// Dequeue a packet (from the second flow, as the first flow has a negative deficit)}
245   queueDisc->\hyperlink{classns3_1_1QueueDisc_a6c13fc489822c1487f61c2289f2e3629}{Dequeue} ();
246   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 3, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
247   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 2, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
248   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (1)->
      GetQueueDisc ()->GetNPackets (), 1, \textcolor{stringliteral}{"unexpected number of packets in the second flow queue"});
249   \textcolor{comment}{// the first flow got a quantum of deficit (-30+90=60) and has been moved to the end of the list of old
       queues}
250   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetDeficit (), 60, \textcolor{stringliteral}{"unexpected deficit for the first
       flow"});
251   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetStatus (), FqCoDelFlow::OLD\_FLOW, \textcolor{stringliteral}{"the first flow
       must be in the list of old queues"});
252   \textcolor{comment}{// the second flow has a negative deficit (-30) and is still in the list of new queues}
253   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetDeficit (), -30, \textcolor{stringliteral}{"unexpected deficit for the second
       flow"});
254   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetStatus (), FqCoDelFlow::NEW\_FLOW, \textcolor{stringliteral}{"the second flow
       must be in the list of new queues"});
255 
256   \textcolor{comment}{// Dequeue a packet (from the first flow, as the second flow has a negative deficit)}
257   queueDisc->\hyperlink{classns3_1_1QueueDisc_a6c13fc489822c1487f61c2289f2e3629}{Dequeue} ();
258   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 2, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
259   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 1, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
260   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (1)->
      GetQueueDisc ()->GetNPackets (), 1, \textcolor{stringliteral}{"unexpected number of packets in the second flow queue"});
261   \textcolor{comment}{// the first flow has a negative deficit (60-(100+20)= -60) and stays in the list of old queues}
262   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetDeficit (), -60, \textcolor{stringliteral}{"unexpected deficit for the first
       flow"});
263   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetStatus (), FqCoDelFlow::OLD\_FLOW, \textcolor{stringliteral}{"the first flow
       must be in the list of old queues"});
264   \textcolor{comment}{// the second flow got a quantum of deficit (-30+90=60) and has been moved to the end of the list of old
       queues}
265   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetDeficit (), 60, \textcolor{stringliteral}{"unexpected deficit for the second
       flow"});
266   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetStatus (), FqCoDelFlow::OLD\_FLOW, \textcolor{stringliteral}{"the second flow
       must be in the list of new queues"});
267 
268   \textcolor{comment}{// Dequeue a packet (from the second flow, as the first flow has a negative deficit)}
269   queueDisc->\hyperlink{classns3_1_1QueueDisc_a6c13fc489822c1487f61c2289f2e3629}{Dequeue} ();
270   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 1, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
271   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 1, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
272   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (1)->
      GetQueueDisc ()->GetNPackets (), 0, \textcolor{stringliteral}{"unexpected number of packets in the second flow queue"});
273   \textcolor{comment}{// the first flow got a quantum of deficit (-60+90=30) and has been moved to the end of the list of old
       queues}
274   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetDeficit (), 30, \textcolor{stringliteral}{"unexpected deficit for the first
       flow"});
275   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetStatus (), FqCoDelFlow::OLD\_FLOW, \textcolor{stringliteral}{"the first flow
       must be in the list of old queues"});
276   \textcolor{comment}{// the second flow has a negative deficit (60-(100+20)= -60)}
277   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetDeficit (), -60, \textcolor{stringliteral}{"unexpected deficit for the second
       flow"});
278   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetStatus (), FqCoDelFlow::OLD\_FLOW, \textcolor{stringliteral}{"the second flow
       must be in the list of new queues"});
279 
280   \textcolor{comment}{// Dequeue a packet (from the first flow, as the second flow has a negative deficit)}
281   queueDisc->\hyperlink{classns3_1_1QueueDisc_a6c13fc489822c1487f61c2289f2e3629}{Dequeue} ();
282   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->QueueDisc::GetNPackets (), 0, \textcolor{stringliteral}{"unexpected number
       of packets in the queue disc"});
283   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (0)->
      GetQueueDisc ()->GetNPackets (), 0, \textcolor{stringliteral}{"unexpected number of packets in the first flow queue"});
284   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (queueDisc->\hyperlink{classns3_1_1QueueDisc_a584d228f7bff3f754d32793a38134556}{GetQueueDiscClass} (1)->
      GetQueueDisc ()->GetNPackets (), 0, \textcolor{stringliteral}{"unexpected number of packets in the second flow queue"});
285   \textcolor{comment}{// the first flow has a negative deficit (30-(100+20)= -90)}
286   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetDeficit (), -90, \textcolor{stringliteral}{"unexpected deficit for the first
       flow"});
287   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetStatus (), FqCoDelFlow::OLD\_FLOW, \textcolor{stringliteral}{"the first flow
       must be in the list of old queues"});
288   \textcolor{comment}{// the second flow got a quantum of deficit (-60+90=30) and has been moved to the end of the list of old
       queues}
289   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetDeficit (), 30, \textcolor{stringliteral}{"unexpected deficit for the second
       flow"});
290   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetStatus (), FqCoDelFlow::OLD\_FLOW, \textcolor{stringliteral}{"the second flow
       must be in the list of new queues"});
291 
292   \textcolor{comment}{// Dequeue a packet}
293   queueDisc->\hyperlink{classns3_1_1QueueDisc_a6c13fc489822c1487f61c2289f2e3629}{Dequeue} ();
294   \textcolor{comment}{// the first flow is at the head of the list of old queues but has a negative deficit, thus it gets a
       quantun}
295   \textcolor{comment}{// of deficit (-90+90=0) and is moved to the end of the list of old queues. Then, the second flow (which
       has a}
296   \textcolor{comment}{// positive deficit) is selected, but the second flow is empty and thus it is set to inactive. The first
       flow is}
297   \textcolor{comment}{// reconsidered, but it has a null deficit, hence it gets another quantum of deficit (0+90=90). Then, the
       first}
298   \textcolor{comment}{// flow is reconsidered again, now it has a positive deficit and hence it is selected. But, it is empty
       and}
299   \textcolor{comment}{// therefore is set to inactive, too.}
300   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetDeficit (), 90, \textcolor{stringliteral}{"unexpected deficit for the first
       flow"});
301   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow1->GetStatus (), FqCoDelFlow::INACTIVE, \textcolor{stringliteral}{"the first flow
       must be inactive"});
302   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetDeficit (), 30, \textcolor{stringliteral}{"unexpected deficit for the second
       flow"});
303   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (flow2->GetStatus (), FqCoDelFlow::INACTIVE, \textcolor{stringliteral}{"the second flow
       must be inactive"});
304 
305   Simulator::Destroy ();
306 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/ns3tc/\hyperlink{fq-codel-queue-disc-test-suite_8cc}{fq-\/codel-\/queue-\/disc-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
