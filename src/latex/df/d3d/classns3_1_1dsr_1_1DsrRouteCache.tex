\hypertarget{classns3_1_1dsr_1_1DsrRouteCache}{}\section{ns3\+:\+:dsr\+:\+:Dsr\+Route\+Cache Class Reference}
\label{classns3_1_1dsr_1_1DsrRouteCache}\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}


D\+SR route request queue Since D\+SR is an on demand routing we queue requests while looking for route.  




{\ttfamily \#include $<$dsr-\/rcache.\+h$>$}



Inheritance diagram for ns3\+:\+:dsr\+:\+:Dsr\+Route\+Cache\+:
% FIG 0


Collaboration diagram for ns3\+:\+:dsr\+:\+:Dsr\+Route\+Cache\+:
% FIG 1
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structns3_1_1dsr_1_1DsrRouteCache_1_1Neighbor}{Neighbor}
\begin{DoxyCompactList}\small\item\em \hyperlink{structns3_1_1dsr_1_1DsrRouteCache_1_1Neighbor}{Neighbor} description. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR} $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a055f612eb8c2e05b634db24523adb1e5}{route\+Vector}
\begin{DoxyCompactList}\small\item\em Define the vector of route entries. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a160d3e218ffa72ba6965e1adc762acdb}{Dsr\+Route\+Cache} ()
\item 
virtual \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a73c24c18055fd681989ae5936f7707bb}{$\sim$\+Dsr\+Route\+Cache} ()
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ad02a476e6b440f517898c11bffac4f27}{Remove\+Last\+Entry} (\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} $>$ \&rt\+Vector)
\begin{DoxyCompactList}\small\item\em Remove the aged route cache entries when the route cache is full. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab76148a6e265c638634afe659e78e5e9}{Get\+Sub\+Route} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab2f735c580ae565f66b394e816b65379}{Set\+Sub\+Route} (bool sub\+Route)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_afa374702182edc67c96a395d0f7ef282}{Get\+Max\+Cache\+Len} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5632a123b828a0e9d8f095312d47f24d}{Set\+Max\+Cache\+Len} (uint32\+\_\+t len)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a1bacac337434c239c93b0f2c2c05320a}{Get\+Cache\+Timeout} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_abf1f0b065a008e6d03ab0628a18857f4}{Set\+Cache\+Timeout} (\hyperlink{classns3_1_1Time}{Time} t)
\item 
uint32\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_abb6ef065b4ba2dde024e9b2f168dc55c}{Get\+Max\+Entries\+Each\+Dst} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a75392ef964c119da3f5c4ccbbb8264f7}{Set\+Max\+Entries\+Each\+Dst} (uint32\+\_\+t entries)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8f62123e7da2576be2ca294c11092355}{Get\+Bad\+Link\+Lifetime} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0827bf4c2148fbcd10f2a64244547ad5}{Set\+Bad\+Link\+Lifetime} (\hyperlink{classns3_1_1Time}{Time} t)
\item 
uint64\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_abcf38af360eb4478b02312fbd0507005}{Get\+Stability\+Decr\+Factor} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a22f56fe8b03dda3e55e50c7ad1ceef70}{Set\+Stability\+Decr\+Factor} (uint64\+\_\+t decr\+Factor)
\item 
uint64\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5483251b00f51f742e104c0bcb67766a}{Get\+Stability\+Incr\+Factor} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_acc5143f73a6a7afcb55d92287822d0f3}{Set\+Stability\+Incr\+Factor} (uint64\+\_\+t incr\+Factor)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a321108b583f5c4f443c87a51cf5a0940}{Get\+Init\+Stability} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a194d5a177dcdaea80edc1979b27780c9}{Set\+Init\+Stability} (\hyperlink{classns3_1_1Time}{Time} init\+Stability)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ad29c3416ce230f84b96f51717c8d00a4}{Get\+Min\+Life\+Time} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a473fb8e279e37d25ef6de9ebee5c68c7}{Set\+Min\+Life\+Time} (\hyperlink{classns3_1_1Time}{Time} min\+Life\+Time)
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aeb5763060d894cd9a08b1f08761c5a23}{Get\+Use\+Extends} () const 
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a91aa79ee0a12600154097f1e379154b6}{Set\+Use\+Extends} (\hyperlink{classns3_1_1Time}{Time} use\+Extends)
\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_acce562219fbd57b6fc9b6659f444d700}{Update\+Route\+Entry} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} dst)
\begin{DoxyCompactList}\small\item\em Update route cache entry if it has been recently used and successfully delivered the data packet. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aff3dfb9a3d25a73e79363e8d6d977003}{Add\+Route} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} \&rt)
\begin{DoxyCompactList}\small\item\em Add route cache entry if it doesn\textquotesingle{}t yet exist in route cache. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a563d72057fbabedafb85907ea79d692f}{Lookup\+Route} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} id, \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} \&rt)
\begin{DoxyCompactList}\small\item\em Lookup route cache entry with destination address dst. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a9d47644d07a4b6f1ec0c429cdb1bdf37}{Print\+Vector} (std\+::vector$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} $>$ \&vec)
\begin{DoxyCompactList}\small\item\em Print the route vector elements. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa6b0573d528ac382538d387aded36655}{Print\+Route\+Vector} (\hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} $>$ route)
\begin{DoxyCompactList}\small\item\em Print all the route vector elements from the route list. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a881db5104e9bb9b45e4ec836b0a802da}{Find\+Same\+Route} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} \&rt, \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} $>$ \&rt\+Vector)
\begin{DoxyCompactList}\small\item\em Find the same route in the route cache. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa3ad8c714828a57eeaae558320ee6523}{Delete\+Route} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} dst)
\begin{DoxyCompactList}\small\item\em Delete the route with certain destination address. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aee8f202a8c07cdfa27778f2f0be38e05}{Delete\+All\+Routes\+Include\+Link} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} error\+Src, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} unreach\+Node, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} node)
\begin{DoxyCompactList}\small\item\em Delete all the routes which includes the link from next hop address that has just been notified as unreachable. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a88c1ac52574db108dc113322d8045b8f}{Clear} ()
\begin{DoxyCompactList}\small\item\em Delete all entries from routing table. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge} ()
\begin{DoxyCompactList}\small\item\em Delete all outdated entries and invalidate valid entry if Lifetime is expired. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_abd7f2670cf78e5d4d45e9499c3d351c4}{Print} (std\+::ostream \&os)
\begin{DoxyCompactList}\small\item\em Print route cache. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a362f807c462851d08207689c252edbba}{Check\+Unique\+Ack\+Id} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} next\+Hop)
\begin{DoxyCompactList}\small\item\em Check for duplicate ids and save new entries if the id is not present in the table. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5aedc12debf59f97bb1de1c4fe2f7987}{Get\+Ack\+Size} ()
\begin{DoxyCompactList}\small\item\em Get the ack table size. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa9a8137b8eb12cdc8961fb1c51b0a3f4}{Get\+Expire\+Time} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} addr)
\begin{DoxyCompactList}\small\item\em Return expire time for neighbor node with address addr, if exists, else return 0. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aef8f383fea545e8836c932909d9feaac}{Is\+Neighbor} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} addr)
\begin{DoxyCompactList}\small\item\em Check that node with address addr is neighbor. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_acfa1d1263cce66806fa910f6a3de342a}{Update\+Neighbor} (std\+::vector$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} $>$ node\+List, \hyperlink{classns3_1_1Time}{Time} expire)
\begin{DoxyCompactList}\small\item\em Update expire time for entry with address addr, if it exists, else add new entry. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aff6d75f7d80d35771b811c16a98af867}{Add\+Neighbor} (std\+::vector$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} $>$ node\+List, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} own\+Address, \hyperlink{classns3_1_1Time}{Time} expire)
\begin{DoxyCompactList}\small\item\em Add to the neighbor list. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{Purge\+Mac} ()
\begin{DoxyCompactList}\small\item\em Remove all expired mac entries. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a1464bf3f9e4391942447afd1ce11c219}{Schedule\+Timer} ()
\begin{DoxyCompactList}\small\item\em Schedule m\+\_\+ntimer. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a901a02e075ccbd32082b1cb8cfe91607}{Clear\+Mac} ()
\begin{DoxyCompactList}\small\item\em Remove all entries. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aec3d7186e2b737e3f6d65a24145a3168}{Add\+Arp\+Cache} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1ArpCache}{Arp\+Cache} $>$)
\begin{DoxyCompactList}\small\item\em Add A\+RP cache to be used to allow layer 2 notifications processing. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab2f4b5f658cd9e9829dc68290799fe1e}{Del\+Arp\+Cache} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1ArpCache}{Arp\+Cache} $>$)
\begin{DoxyCompactList}\small\item\em Don\textquotesingle{}t use given A\+RP cache any more (interface is down) \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} const \& $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_add47d5b114fc61306122d31427e7a944}{Get\+Tx\+Error\+Callback} () const 
\begin{DoxyCompactList}\small\item\em Get callback to Process\+Tx\+Error, this callback is trying to use the wifi mac tx error header to notify a link layer drop event, however, it is not fully supported yet. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ad755962e071177f5bc81bcf4302803c0}{Set\+Callback} (\hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, uint8\+\_\+t $>$ cb)
\begin{DoxyCompactList}\small\item\em Handle link failure callback. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, uint8\+\_\+t $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a95e45b0d9b788e926acfdd8666732399}{Get\+Callback} () const 
\begin{DoxyCompactList}\small\item\em Handle link failure callback. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2076176adf8cb2c75770b0df74b04e12}{Set\+Cache\+Type} (std\+::string \hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type})
\begin{DoxyCompactList}\small\item\em Dijsktra algorithm to get the best route from m\+\_\+net\+Graph and update the m\+\_\+best\+Routes\+Table\+\_\+link when current graph information has changed. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a3ec7cfaaf07c337cf71aa21793059293}{Is\+Link\+Cache} ()
\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a75cc32c929563b2a44ad73b2fda9c577}{Add\+Route\+\_\+\+Link} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR} nodelist, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} node)
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a1b90d61ebb580a83ee9c1306bbc230dd}{Rebuild\+Best\+Route\+Table} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} source)
\begin{DoxyCompactList}\small\item\em U\+SE M\+A\+X\+W\+E\+I\+G\+HT TO R\+E\+P\+R\+E\+S\+E\+NT M\+AX; U\+SE B\+R\+O\+A\+D\+C\+A\+ST A\+D\+D\+R\+E\+SS TO R\+E\+P\+R\+E\+S\+E\+NT N\+U\+LL P\+R\+E\+C\+E\+E\+D\+I\+NG A\+D\+D\+R\+E\+SS. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0a053ff3dc1d3872188e85e30d1afb7e}{Purge\+Link\+Node} ()
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a806392bc615a83d0b3e3f251ab9d1fdf}{Use\+Extends} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR} rt)
\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_afab8a17441a368141d8b766e296c7165}{Update\+Net\+Graph} ()
\begin{DoxyCompactList}\small\item\em Update the Net Graph for the link and node cache has changed. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Mac48Address}{Mac48\+Address} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a37fef2c4a1dab164dca35aafd3ceff7b}{Lookup\+Mac\+Address} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address})
\begin{DoxyCompactList}\small\item\em Find M\+AC address by IP using list of A\+RP caches. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a132956e044267e07f4d7265e1541d83c}{Process\+Tx\+Error} (\hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} const \&)
\begin{DoxyCompactList}\small\item\em Process layer 2 TX error notification. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a05b0ddede171b486247c73d1a3e52c48}{Get\+Type\+Id} ()
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, uint8\+\_\+t $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ac784b52b7d230343a1c7c236dfe91aa6}{m\+\_\+handle\+Link\+Failure}
\begin{DoxyCompactList}\small\item\em link failure callback \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1WifiMacHeader}{Wifi\+Mac\+Header} const \& $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a797049d1a514f43ed1fc286a0fd7649f}{m\+\_\+tx\+Error\+Callback}
\begin{DoxyCompactList}\small\item\em TX error callback. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Timer}{Timer} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\+\_\+ntimer}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Timer}{Timer} for neighbor\textquotesingle{}s list. Schedule \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge()}. \end{DoxyCompactList}\item 
std\+::vector$<$ \hyperlink{structns3_1_1dsr_1_1DsrRouteCache_1_1Neighbor}{Neighbor} $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\+\_\+nb}
\begin{DoxyCompactList}\small\item\em vector of entries \end{DoxyCompactList}\item 
std\+::vector$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1ArpCache}{Arp\+Cache} $>$ $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\+\_\+arp}
\begin{DoxyCompactList}\small\item\em list of A\+RP cached to be used for layer 2 notifications processing \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa3ab752671f0fabc953a166e265eab7c}{m\+\_\+delay}
\begin{DoxyCompactList}\small\item\em This timeout deals with the passive ack. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{std\+::list}$<$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a21c35649779d4e4c85b8e128dbcc0971}{route\+Entry\+Vector}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1dsr_1_1DsrRouteCache}{Dsr\+Route\+Cache} \& \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a62f4b1c216987d53a951402cb8de0362}{operator=} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache}{Dsr\+Route\+Cache} const \&)
\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ac9fcf2d3676a0e05cd567988cb29fe5a}{Lookup\+Route\+\_\+\+Link} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} id, \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry}{Dsr\+Route\+Cache\+Entry} \&rt)
\begin{DoxyCompactList}\small\item\em used by Lookup\+Route when Link\+Cache \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa638a140150404cc82a5937bcc622395}{Inc\+Stability} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} node)
\begin{DoxyCompactList}\small\item\em increase the stability of the node \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_af32b977b15a417429c72f2fdf4bcd920}{Dec\+Stability} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} node)
\begin{DoxyCompactList}\small\item\em decrease the stability of the node \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8f89664e7c7f0b9027462066f301f460}{m\+\_\+vector}
\begin{DoxyCompactList}\small\item\em The route vector to save the ip addresses for intermediate nodes. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7c2e4d18d325c59346bde655057682c2}{m\+\_\+max\+Cache\+Len}
\begin{DoxyCompactList}\small\item\em The maximum number of packets that we allow a routing protocol to buffer. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a6a2bdf2226910392a4578cc82216acaf}{Route\+Cache\+Timeout}
\begin{DoxyCompactList}\small\item\em The maximum period of time that dsr is allowed to for an unused route. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7ab3daa7c72f3320d4eb70742a4c819d}{m\+\_\+bad\+Link\+Lifetime}
\begin{DoxyCompactList}\small\item\em The time for which the neighboring node is put into the blacklist. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a019b992bfd50af4ce7a3d7e13bc0c38a}{m\+\_\+stability\+Decr\+Factor}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a4fb68651a11cfafbb027660a4b42734e}{m\+\_\+stability\+Incr\+Factor}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\+\_\+init\+Stability}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab1fe273b756ac95e21cf000728e33d12}{m\+\_\+min\+Life\+Time}
\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaa148075ecbecd459f1de62d7e43146a}{m\+\_\+use\+Extends}
\item 
std\+::map$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a21c35649779d4e4c85b8e128dbcc0971}{route\+Entry\+Vector} $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\+\_\+sorted\+Routes}
\begin{DoxyCompactList}\small\item\em Map the ipv4\+Address to route entry vector. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a21c35649779d4e4c85b8e128dbcc0971}{route\+Entry\+Vector} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}{m\+\_\+route\+Entry\+Vector}
\begin{DoxyCompactList}\small\item\em Define the route vector. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa6b2bd241ac25da54f0ee83d6a9946be}{m\+\_\+max\+Entries\+Each\+Dst}
\begin{DoxyCompactList}\small\item\em number of entries for each destination \end{DoxyCompactList}\item 
std\+::map$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, uint16\+\_\+t $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{m\+\_\+ack\+Id\+Cache}
\begin{DoxyCompactList}\small\item\em The id cache to ensure all the ids are unique. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}{m\+\_\+is\+Link\+Cache}
\begin{DoxyCompactList}\small\item\em Check if the route is using path cache or link cache. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aea55a575fdabc0a2cdf7cde483549d1f}{m\+\_\+sub\+Route}
\begin{DoxyCompactList}\small\item\em Check if save the sub route entries or not. \end{DoxyCompactList}\item 
std\+::map$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, std\+::map$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, uint32\+\_\+t $>$ $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\+\_\+net\+Graph}
\item 
std\+::map$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR} $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aeff05d869cb32e13605d4792a0a0d841}{m\+\_\+best\+Routes\+Table\+\_\+link}
\begin{DoxyCompactList}\small\item\em for link route cache \end{DoxyCompactList}\item 
std\+::map$<$ \hyperlink{structns3_1_1dsr_1_1Link}{Link}, \hyperlink{classns3_1_1dsr_1_1DsrLinkStab}{Dsr\+Link\+Stab} $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\+\_\+link\+Cache}
\begin{DoxyCompactList}\small\item\em The data structure to store link info. \end{DoxyCompactList}\item 
std\+::map$<$ \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, \hyperlink{classns3_1_1dsr_1_1DsrNodeStab}{Dsr\+Node\+Stab} $>$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\+\_\+node\+Cache}
\begin{DoxyCompactList}\small\item\em The data structure to store node info. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
D\+SR route request queue Since D\+SR is an on demand routing we queue requests while looking for route. 

\subsection{Member Typedef Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!route\+Entry\+Vector@{route\+Entry\+Vector}}
\index{route\+Entry\+Vector@{route\+Entry\+Vector}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{route\+Entry\+Vector}{routeEntryVector}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<${\bf Dsr\+Route\+Cache\+Entry}$>$ {\bf ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::route\+Entry\+Vector}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a21c35649779d4e4c85b8e128dbcc0971}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a21c35649779d4e4c85b8e128dbcc0971}
Define the route cache data structure \index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!route\+Vector@{route\+Vector}}
\index{route\+Vector@{route\+Vector}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{route\+Vector}{routeVector}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std\+::list}$<${\bf Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR}$>$ {\bf ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::route\+Vector}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a055f612eb8c2e05b634db24523adb1e5}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a055f612eb8c2e05b634db24523adb1e5}


Define the vector of route entries. 



\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Dsr\+Route\+Cache@{Dsr\+Route\+Cache}}
\index{Dsr\+Route\+Cache@{Dsr\+Route\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Dsr\+Route\+Cache()}{DsrRouteCache()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Dsr\+Route\+Cache (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a160d3e218ffa72ba6965e1adc762acdb}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a160d3e218ffa72ba6965e1adc762acdb}

\begin{DoxyCode}
148   : \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8f89664e7c7f0b9027462066f301f460}{m\_vector} (0),
149     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa6b2bd241ac25da54f0ee83d6a9946be}{m\_maxEntriesEachDst} (3),
150     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}{m\_isLinkCache} (\textcolor{keyword}{false}),
151     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\_ntimer} (\hyperlink{classns3_1_1Timer_a816309b83cd2a35bea47d9bbc6bbf721a07a9dd5063b32fb6cf1f813c6ee7e28e}{Timer::CANCEL\_ON\_DESTROY}),
152     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa3ab752671f0fabc953a166e265eab7c}{m\_delay} (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (100))
153 \{
154   \textcolor{comment}{/*}
155 \textcolor{comment}{   * The timer to set layer 2 notification, not fully supported by ns3 yet}
156 \textcolor{comment}{   */}
157   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\_ntimer}.\hyperlink{classns3_1_1Timer_a02ac85f61e64a2bc3a104914859504c9}{SetDelay} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa3ab752671f0fabc953a166e265eab7c}{m\_delay});
158   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\_ntimer}.\hyperlink{classns3_1_1Timer_a044b29030c9de99298d51ac0ccfc104c}{SetFunction} (&\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{DsrRouteCache::PurgeMac}, \textcolor{keyword}{this});
159   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a797049d1a514f43ed1fc286a0fd7649f}{m\_txErrorCallback} = \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a132956e044267e07f4d7265e1541d83c}{DsrRouteCache::ProcessTxError}, \textcolor{keyword}{this});
160 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!````~Dsr\+Route\+Cache@{$\sim$\+Dsr\+Route\+Cache}}
\index{````~Dsr\+Route\+Cache@{$\sim$\+Dsr\+Route\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{$\sim$\+Dsr\+Route\+Cache()}{~DsrRouteCache()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::$\sim$\+Dsr\+Route\+Cache (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a73c24c18055fd681989ae5936f7707bb}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a73c24c18055fd681989ae5936f7707bb}

\begin{DoxyCode}
163 \{
164   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
165   \textcolor{comment}{// clear the route cache when done}
166   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.clear ();
167 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Add\+Arp\+Cache@{Add\+Arp\+Cache}}
\index{Add\+Arp\+Cache@{Add\+Arp\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Add\+Arp\+Cache(\+Ptr$<$ Arp\+Cache $>$)}{AddArpCache(Ptr< ArpCache >)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Add\+Arp\+Cache (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Arp\+Cache} $>$}]{a}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aec3d7186e2b737e3f6d65a24145a3168}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aec3d7186e2b737e3f6d65a24145a3168}


Add A\+RP cache to be used to allow layer 2 notifications processing. 


\begin{DoxyCode}
1207 \{
1208   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\_arp}.push\_back (a);
1209 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Add\+Neighbor@{Add\+Neighbor}}
\index{Add\+Neighbor@{Add\+Neighbor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Add\+Neighbor(std\+::vector$<$ Ipv4\+Address $>$ node\+List, Ipv4\+Address own\+Address, Time expire)}{AddNeighbor(std::vector< Ipv4Address > nodeList, Ipv4Address ownAddress, Time expire)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Add\+Neighbor (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ {\bf Ipv4\+Address} $>$}]{node\+List, }
\item[{{\bf Ipv4\+Address}}]{own\+Address, }
\item[{{\bf Time}}]{expire}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aff6d75f7d80d35771b811c16a98af867}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aff6d75f7d80d35771b811c16a98af867}


Add to the neighbor list. 


\begin{DoxyCode}
1144 \{
1145   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Add neighbor number "} << nodeList.size ());
1146   \textcolor{keywordflow}{for} (std::vector<Ipv4Address>::iterator j = nodeList.begin (); j != nodeList.end ();)
1147     \{
1148       Ipv4Address addr = *j;
1149       \textcolor{keywordflow}{if} (addr == ownAddress)
1150         \{
1151           j = nodeList.erase (j);
1152           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The node list size "} << nodeList.size ());
1153         \}
1154       \textcolor{keywordflow}{else}
1155         \{
1156           ++j;
1157         \}
1158       Neighbor neighbor (addr, \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a37fef2c4a1dab164dca35aafd3ceff7b}{LookupMacAddress} (addr), expire + 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ());
1159       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.push\_back (neighbor);
1160       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{PurgeMac} ();
1161     \}
1162 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Add\+Route@{Add\+Route}}
\index{Add\+Route@{Add\+Route}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Add\+Route(\+Dsr\+Route\+Cache\+Entry \&rt)}{AddRoute(DsrRouteCacheEntry &rt)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Add\+Route (
\begin{DoxyParamCaption}
\item[{{\bf Dsr\+Route\+Cache\+Entry} \&}]{rt}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aff3dfb9a3d25a73e79363e8d6d977003}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aff3dfb9a3d25a73e79363e8d6d977003}


Add route cache entry if it doesn\textquotesingle{}t yet exist in route cache. 


\begin{DoxyParams}{Parameters}
{\em rt} & route cache entry \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true in success 
\end{DoxyReturn}
Save the new route cache along with the destination address in map

Drop the most aged packet when buffer reaches to max

Save the new route cache along with the destination address in map
\begin{DoxyCode}
658 \{
659   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
660   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge} ();
661   std::list<DsrRouteCacheEntry> rtVector;   \textcolor{comment}{// Declare the route cache entry vector}
662   Ipv4Address dst = rt.GetDestination ();
663   std::vector<Ipv4Address> route = rt.GetVector ();
664 
665   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route destination we have "} << dst);
666   std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} =
667     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.find (dst);
668 
669   \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.end ())
670     \{
671       rtVector.push\_back (rt);
672       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (dst);   \textcolor{comment}{// Erase the route entries for dst first}
676 \textcolor{comment}{}      std::pair<std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator, \textcolor{keywordtype}{bool}> result =
677         \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.insert (std::make\_pair (dst, rtVector));
678       \textcolor{keywordflow}{return} result.second;
679     \}
680   \textcolor{keywordflow}{else}
681     \{
682       rtVector = i->second;
683       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The existing route size "} << rtVector.size () << \textcolor{stringliteral}{" for destination address
       "} << dst);
687       \textcolor{keywordflow}{if} (rtVector.size () >= \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa6b2bd241ac25da54f0ee83d6a9946be}{m\_maxEntriesEachDst})
688         \{
689           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ad02a476e6b440f517898c11bffac4f27}{RemoveLastEntry} (rtVector);         \textcolor{comment}{// Drop the last entry for the sorted route
       cache, the route has already been sorted}
690         \}
691 
692       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a881db5104e9bb9b45e4ec836b0a802da}{FindSameRoute} (rt, rtVector))
693         \{
694           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Find same vector, the FindSameRoute function will update the route
       expire time"});
695           \textcolor{keywordflow}{return} \textcolor{keyword}{true};
696         \}
697       \textcolor{keywordflow}{else}
698         \{
699           \textcolor{comment}{// Check if the expire time for the new route has expired or not}
700           \textcolor{keywordflow}{if} (rt.GetExpireTime () > \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (0))
701             \{
702               rtVector.push\_back (rt);
703               \textcolor{comment}{// This sort function will sort the route cache entries based on the size of route in each of
       the}
704               \textcolor{comment}{// route entries}
705               rtVector.sort (\hyperlink{namespacens3_1_1dsr_a53bce2b069de9151de0203d96468684e}{CompareRoutesExpire});
706               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The first time"} << rtVector.front ().GetExpireTime ().GetSeconds (
      ) << \textcolor{stringliteral}{" The second time "}
707                                              << rtVector.back ().GetExpireTime ().GetSeconds ());
708               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The first hop"} << rtVector.front ().GetVector ().size () << \textcolor{stringliteral}{" The
       second hop "}
709                                             << rtVector.back ().GetVector ().size ());
710               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (dst);               \textcolor{comment}{// erase the route entries for dst
       first}
714 \textcolor{comment}{}              std::pair<std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator, \textcolor{keywordtype}{bool}> result =
715                 \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.insert (std::make\_pair (dst, rtVector));
716               \textcolor{keywordflow}{return} result.second;
717             \}
718           \textcolor{keywordflow}{else}
719             \{
720               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The newly found route is already expired"});
721             \}
722         \}
723     \}
724   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
725 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Add\+Route\+\_\+\+Link@{Add\+Route\+\_\+\+Link}}
\index{Add\+Route\+\_\+\+Link@{Add\+Route\+\_\+\+Link}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Add\+Route\+\_\+\+Link(\+Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+O\+R nodelist, Ipv4\+Address node)}{AddRoute_Link(DsrRouteCacheEntry::IP_VECTOR nodelist, Ipv4Address node)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Add\+Route\+\_\+\+Link (
\begin{DoxyParamCaption}
\item[{{\bf Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR}}]{nodelist, }
\item[{{\bf Ipv4\+Address}}]{node}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a75cc32c929563b2a44ad73b2fda9c577}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a75cc32c929563b2a44ad73b2fda9c577}
Purge the link node cache first

This is the node stability

\hyperlink{structns3_1_1dsr_1_1Link}{Link} represent the one link for the route

\hyperlink{structns3_1_1dsr_1_1Link}{Link} stability

Set the link stability as the smallest node stability

Set the link stability as the m)min\+Life\+Time, default is 1 second 
\begin{DoxyCode}
563 \{
564   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << source);
565   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Use Link Cache"});
567   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0a053ff3dc1d3872188e85e30d1afb7e}{PurgeLinkNode} ();
568   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < nodelist.size () - 1; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
569     \{
570       DsrNodeStab ns;                
571       ns.SetNodeStability (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability});
572 
573       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.find (nodelist[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]) == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end ())
574         \{
575           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[nodelist[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}]] = ns;
576         \}
577       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.find (nodelist[i + 1]) == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end ())
578         \{
579           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[nodelist[i + 1]] = ns;
580         \}
581       Link link (nodelist[i], nodelist[i + 1]);         
582       DsrLinkStab stab;                
583       stab.SetLinkStability (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability});
585       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[nodelist[i]].GetNodeStability () < \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[nodelist[i + 1]]
      .GetNodeStability ())
586         \{
587           stab.SetLinkStability (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[nodelist[i]].GetNodeStability ());
588         \}
589       \textcolor{keywordflow}{else}
590         \{
591           stab.SetLinkStability (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[nodelist[i + 1]].GetNodeStability ());
592         \}
593       \textcolor{keywordflow}{if} (stab.GetLinkStability () < \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab1fe273b756ac95e21cf000728e33d12}{m\_minLifeTime})
594         \{
595           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Stability: "} << stab.GetLinkStability ().GetSeconds ());
597           stab.SetLinkStability (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab1fe273b756ac95e21cf000728e33d12}{m\_minLifeTime});
598         \}
599       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}[link] = stab;
600       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Add a new link"});
601       link.Print ();
602       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Link Info"});
603       stab.Print ();
604     \}
605   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_afab8a17441a368141d8b766e296c7165}{UpdateNetGraph} ();
606   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a1b90d61ebb580a83ee9c1306bbc230dd}{RebuildBestRouteTable} (source);
607   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
608 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Check\+Unique\+Ack\+Id@{Check\+Unique\+Ack\+Id}}
\index{Check\+Unique\+Ack\+Id@{Check\+Unique\+Ack\+Id}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Check\+Unique\+Ack\+Id(\+Ipv4\+Address next\+Hop)}{CheckUniqueAckId(Ipv4Address nextHop)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Check\+Unique\+Ack\+Id (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{next\+Hop}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a362f807c462851d08207689c252edbba}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a362f807c462851d08207689c252edbba}


Check for duplicate ids and save new entries if the id is not present in the table. 

This part of code maintains an Acknowledgment id cache for next hop and remove duplicate ids 
\begin{DoxyCode}
1052 \{
1053   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1054   std::map<Ipv4Address, uint16\_t>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} =
1055     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{m\_ackIdCache}.find (nextHop);
1056   \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{m\_ackIdCache}.end ())
1057     \{
1058       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"No Ack id for "} << nextHop << \textcolor{stringliteral}{" found and use id 1 for the first network
       ack id"});
1059       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{m\_ackIdCache}[nextHop] = 1;
1060       \textcolor{keywordflow}{return} 1;
1061     \}
1062   \textcolor{keywordflow}{else}
1063     \{
1064       uint16\_t ackId = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{m\_ackIdCache}[nextHop];
1065       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Ack id for "} << nextHop << \textcolor{stringliteral}{" found in the cache has value "} << ackId);
1066       ackId++;
1067       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{m\_ackIdCache}[nextHop] = ackId;
1068       \textcolor{keywordflow}{return} ackId;
1069     \}
1070 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Clear@{Clear}}
\index{Clear@{Clear}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Clear()}{Clear()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Clear (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a88c1ac52574db108dc113322d8045b8f}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a88c1ac52574db108dc113322d8045b8f}


Delete all entries from routing table. 


\begin{DoxyCode}
436   \{
437     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}{m\_routeEntryVector}.erase (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}{m\_routeEntryVector}.begin (), 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}{m\_routeEntryVector}.end ());
438   \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Clear\+Mac@{Clear\+Mac}}
\index{Clear\+Mac@{Clear\+Mac}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Clear\+Mac()}{ClearMac()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Clear\+Mac (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a901a02e075ccbd32082b1cb8cfe91607}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a901a02e075ccbd32082b1cb8cfe91607}


Remove all entries. 


\begin{DoxyCode}
504   \{
505     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.clear ();
506   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Dec\+Stability@{Dec\+Stability}}
\index{Dec\+Stability@{Dec\+Stability}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Dec\+Stability(\+Ipv4\+Address node)}{DecStability(Ipv4Address node)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Dec\+Stability (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{node}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_af32b977b15a417429c72f2fdf4bcd920}{}\label{classns3_1_1dsr_1_1DsrRouteCache_af32b977b15a417429c72f2fdf4bcd920}


decrease the stability of the node 


\begin{DoxyParams}{Parameters}
{\em node} & the ip address of the node we want to decrease stability \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000018}{Todo}]remove it here \end{DoxyRefDesc}

\begin{DoxyCode}
540 \{
541   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << node);
542   std::map<Ipv4Address, DsrNodeStab>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.find (node);
543   \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end ())
544     \{
545       DsrNodeStab ns (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability});
546       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[node] = ns;
547       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
548     \}
549   \textcolor{keywordflow}{else}
550     \{
552       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The stability here "} << i->second.GetNodeStability ().GetSeconds ());
553       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The stability here "} << \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (i->second.GetNodeStability () / 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a019b992bfd50af4ce7a3d7e13bc0c38a}{m\_stabilityDecrFactor}).GetSeconds ());
554       DsrNodeStab ns (\hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (i->second.GetNodeStability () / 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a019b992bfd50af4ce7a3d7e13bc0c38a}{m\_stabilityDecrFactor}));
555       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[node] = ns;
556       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
557     \}
558   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
559 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Del\+Arp\+Cache@{Del\+Arp\+Cache}}
\index{Del\+Arp\+Cache@{Del\+Arp\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Del\+Arp\+Cache(\+Ptr$<$ Arp\+Cache $>$)}{DelArpCache(Ptr< ArpCache >)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Del\+Arp\+Cache (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Arp\+Cache} $>$}]{a}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ab2f4b5f658cd9e9829dc68290799fe1e}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ab2f4b5f658cd9e9829dc68290799fe1e}


Don\textquotesingle{}t use given A\+RP cache any more (interface is down) 


\begin{DoxyCode}
1213 \{
1214   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\_arp}.erase (std::remove (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\_arp}.begin (), \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\_arp}.end (), a), 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\_arp}.end ());
1215 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Delete\+All\+Routes\+Include\+Link@{Delete\+All\+Routes\+Include\+Link}}
\index{Delete\+All\+Routes\+Include\+Link@{Delete\+All\+Routes\+Include\+Link}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Delete\+All\+Routes\+Include\+Link(\+Ipv4\+Address error\+Src, Ipv4\+Address unreach\+Node, Ipv4\+Address node)}{DeleteAllRoutesIncludeLink(Ipv4Address errorSrc, Ipv4Address unreachNode, Ipv4Address node)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Delete\+All\+Routes\+Include\+Link (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{error\+Src, }
\item[{{\bf Ipv4\+Address}}]{unreach\+Node, }
\item[{{\bf Ipv4\+Address}}]{node}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aee8f202a8c07cdfa27778f2f0be38e05}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aee8f202a8c07cdfa27778f2f0be38e05}


Delete all the routes which includes the link from next hop address that has just been notified as unreachable. 


\begin{DoxyParams}{Parameters}
{\em error\+Src} & The error source address \\
\hline
{\em unreach\+Node} & The unreachable node \\
\hline
{\em node} & This node\textquotesingle{}s ip address \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000020}{Todo}]get rid of this one \end{DoxyRefDesc}

\begin{DoxyCode}
775 \{
776   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << errorSrc << unreachNode << node);
777   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a3ec7cfaaf07c337cf71aa21793059293}{IsLinkCache} ())
778     \{
779       \textcolor{comment}{// Purge the link node cache first}
780       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0a053ff3dc1d3872188e85e30d1afb7e}{PurgeLinkNode} ();
781       \textcolor{comment}{/*}
782 \textcolor{comment}{       * The followings are for cleaning the broken link in link cache}
783 \textcolor{comment}{       * We basically remove the link between errorSrc and unreachNode}
784 \textcolor{comment}{       */}
785       Link link1 (errorSrc, unreachNode);
786       Link link2 (unreachNode, errorSrc);
787       \textcolor{comment}{// erase the two kind of links to make sure the link is removed from the link cache}
788       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Erase the route"});
789       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.erase (link1);
791       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The link cache size "} << \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.size());
792       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.erase (link2);
793       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The link cache size "} << \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.size());
794 
795       std::map<Ipv4Address, DsrNodeStab>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.find (errorSrc);
796       \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end ())
797         \{
798           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Update the node stability unsuccessfully"});
799         \}
800       \textcolor{keywordflow}{else}
801         \{
802           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_af32b977b15a417429c72f2fdf4bcd920}{DecStability} (i->first);
803         \}
804       i = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.find (unreachNode);
805       \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end ())
806         \{
807           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Update the node stability unsuccessfully"});
808         \}
809       \textcolor{keywordflow}{else}
810         \{
811           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_af32b977b15a417429c72f2fdf4bcd920}{DecStability} (i->first);
812         \}
813       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_afab8a17441a368141d8b766e296c7165}{UpdateNetGraph} ();
814       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a1b90d61ebb580a83ee9c1306bbc230dd}{RebuildBestRouteTable} (node);
815     \}
816   \textcolor{keywordflow}{else}
817     \{
818       \textcolor{comment}{/*}
819 \textcolor{comment}{       * the followings are for cleaning the broken link in pathcache}
820 \textcolor{comment}{       *}
821 \textcolor{comment}{       */}
822       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge} ();
823       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.empty ())
824         \{
825           \textcolor{keywordflow}{return};
826         \}
827       \textcolor{comment}{/*}
828 \textcolor{comment}{       * Loop all the routes saved in the route cache}
829 \textcolor{comment}{       */}
830       \textcolor{keywordflow}{for} (std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator j =
831              \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.begin (); j != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.end (); )
832         \{
833           std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator jtmp = j;
834           Ipv4Address address = j->first;
835           std::list<DsrRouteCacheEntry> rtVector = j->second;
836           \textcolor{comment}{/*}
837 \textcolor{comment}{           * Loop all the routes for a single destination}
838 \textcolor{comment}{           */}
839           \textcolor{keywordflow}{for} (std::list<DsrRouteCacheEntry>::iterator k = rtVector.begin (); k != rtVector.end (); )
840             \{
841               \textcolor{comment}{// return the first route in the route vector}
842               \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a055f612eb8c2e05b634db24523adb1e5}{routeVector} = k->GetVector ();
843               \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} changeVector;
844               \textcolor{comment}{/*}
845 \textcolor{comment}{               * Loop the ip addresses within a single route entry}
846 \textcolor{comment}{               */}
847               \textcolor{keywordflow}{for} (DsrRouteCacheEntry::IP\_VECTOR::iterator i = routeVector.begin (); i != routeVector.end (
      ); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
848                 \{
849                   \textcolor{keywordflow}{if} (*i != errorSrc)
850                     \{
851                       changeVector.push\_back (*i);
852                     \}
853                   \textcolor{keywordflow}{else}
854                     \{
855                       \textcolor{keywordflow}{if} (*(i + 1) == unreachNode)
856                         \{
857                           changeVector.push\_back (*i);
858                           \textcolor{keywordflow}{break};
859                         \}
860                       \textcolor{keywordflow}{else}
861                         \{
862                           changeVector.push\_back (*i);
863                         \}
864                     \}
865                 \}
866               \textcolor{comment}{/*}
867 \textcolor{comment}{               * Verify if need to remove some affected links}
868 \textcolor{comment}{               */}
869               \textcolor{keywordflow}{if} (changeVector.size () == routeVector.size ())
870                 \{
871                   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route does not contain the broken link"});
872                   ++k;
873                 \}
874               \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((changeVector.size () < routeVector.size ()) && (changeVector.size () > 1))
875                 \{
876                   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"sub route "} << \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aea55a575fdabc0a2cdf7cde483549d1f}{m\_subRoute});
877                   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aea55a575fdabc0a2cdf7cde483549d1f}{m\_subRoute})
878                     \{
879                       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} expire = k->GetExpireTime ();
880                       \textcolor{comment}{/*}
881 \textcolor{comment}{                       * Remove the route first}
882 \textcolor{comment}{                       */}
883                       k = rtVector.erase (k);
884                       DsrRouteCacheEntry changeEntry;
885                       changeEntry.SetVector (changeVector);
886                       Ipv4Address destination = changeVector.back ();
887                       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The destination of the newly formed route "} << destination
       << \textcolor{stringliteral}{" and the size of the route "} << changeVector.size ());
888                       changeEntry.SetDestination (destination);
889                       changeEntry.SetExpireTime (expire); \textcolor{comment}{// Initialize the timeout value to the one it has}
890                       rtVector.push\_back (changeEntry);  \textcolor{comment}{// Add the route entry to the route list}
891                       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"We have a sub-route to "} << destination);
892                     \}
893                   \textcolor{keywordflow}{else}
894                     \{
895                       \textcolor{comment}{/*}
896 \textcolor{comment}{                       * Remove the route}
897 \textcolor{comment}{                       */}
898                       k = rtVector.erase (k);
899                     \}
900                 \}
901               \textcolor{keywordflow}{else}
902                 \{
903                   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Cut route unsuccessful and erase the route"});
904                   \textcolor{comment}{/*}
905 \textcolor{comment}{                   * Remove the route}
906 \textcolor{comment}{                   */}
907                   k = rtVector.erase (k);
908                 \}
909             \}
910           ++j;
911           \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a3ec7cfaaf07c337cf71aa21793059293}{IsLinkCache} ())
912             \{
913               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (jtmp);
914             \}
915           \textcolor{keywordflow}{if} (rtVector.size ())
916             \{
917               \textcolor{comment}{/*}
918 \textcolor{comment}{               * Save the new route cache along with the destination address in map}
919 \textcolor{comment}{               */}
920               rtVector.sort (\hyperlink{namespacens3_1_1dsr_a53bce2b069de9151de0203d96468684e}{CompareRoutesExpire});
921               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}[address] = rtVector;
922             \}
923           \textcolor{keywordflow}{else}
924             \{
925               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"There is no route left for that destination "} << address);
926             \}
927         \}
928     \}
929 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Delete\+Route@{Delete\+Route}}
\index{Delete\+Route@{Delete\+Route}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Delete\+Route(\+Ipv4\+Address dst)}{DeleteRoute(Ipv4Address dst)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Delete\+Route (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{dst}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aa3ad8c714828a57eeaae558320ee6523}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aa3ad8c714828a57eeaae558320ee6523}


Delete the route with certain destination address. 


\begin{DoxyParams}{Parameters}
{\em dst} & the destination address of the routes that should be deleted \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
761 \{
762   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << dst);
763   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge} (); \textcolor{comment}{// purge the route cache first to remove timeout entries}
764   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (dst) != 0)
765     \{
766       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route deletion to "} << dst << \textcolor{stringliteral}{" successful"});
767       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
768     \}
769   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route deletion to "} << dst << \textcolor{stringliteral}{" not successful"});
770   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
771 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10




Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Find\+Same\+Route@{Find\+Same\+Route}}
\index{Find\+Same\+Route@{Find\+Same\+Route}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Find\+Same\+Route(\+Dsr\+Route\+Cache\+Entry \&rt, std\+::list$<$ Dsr\+Route\+Cache\+Entry $>$ \&rt\+Vector)}{FindSameRoute(DsrRouteCacheEntry &rt, std::list< DsrRouteCacheEntry > &rtVector)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Find\+Same\+Route (
\begin{DoxyParamCaption}
\item[{{\bf Dsr\+Route\+Cache\+Entry} \&}]{rt, }
\item[{{\bf std\+::list}$<$ {\bf Dsr\+Route\+Cache\+Entry} $>$ \&}]{rt\+Vector}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a881db5104e9bb9b45e4ec836b0a802da}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a881db5104e9bb9b45e4ec836b0a802da}


Find the same route in the route cache. 


\begin{DoxyParams}{Parameters}
{\em rt} & entry with destination address dst, if exists \\
\hline
{\em rt\+Vector} & the route vector \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
728 \{
729   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
730   \textcolor{keywordflow}{for} (std::list<DsrRouteCacheEntry>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = rtVector.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != rtVector.end (); ++
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
731     \{
732       \textcolor{comment}{// return the first route in the route vector}
733       \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a055f612eb8c2e05b634db24523adb1e5}{routeVector} = 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->GetVector ();
734       \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} newVector = rt.GetVector ();
735 
736       \textcolor{keywordflow}{if} (routeVector == newVector)
737         \{
738           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Found same routes in the route cache with the vector size "}
739                         << rt.GetDestination () << \textcolor{stringliteral}{" "} << rtVector.size ());
740           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The new route expire time "} << rt.GetExpireTime ().GetSeconds ()
741                                                      << \textcolor{stringliteral}{" the original expire time "} << 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->GetExpireTime ().GetSeconds ());
742           \textcolor{keywordflow}{if} (rt.GetExpireTime () > \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->GetExpireTime ())
743             \{
744               \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->SetExpireTime (rt.GetExpireTime ());
745             \}
746           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (rt.GetDestination ()); \textcolor{comment}{// erase the entry first}
747           rtVector.sort (\hyperlink{namespacens3_1_1dsr_a53bce2b069de9151de0203d96468684e}{CompareRoutesExpire});  \textcolor{comment}{// sort the route vector first}
748           \textcolor{comment}{/*}
749 \textcolor{comment}{           * Save the new route cache along with the destination address in map}
750 \textcolor{comment}{           */}
751           std::pair<std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator, \textcolor{keywordtype}{bool}> result =
752             \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.insert (std::make\_pair (rt.GetDestination (), rtVector));
753           \textcolor{keywordflow}{return} result.second;
754         \}
755     \}
756   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
757 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12




Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Ack\+Size@{Get\+Ack\+Size}}
\index{Get\+Ack\+Size@{Get\+Ack\+Size}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Ack\+Size()}{GetAckSize()}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Ack\+Size (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a5aedc12debf59f97bb1de1c4fe2f7987}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a5aedc12debf59f97bb1de1c4fe2f7987}


Get the ack table size. 


\begin{DoxyCode}
1074 \{
1075   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{m\_ackIdCache}.size ();
1076 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Bad\+Link\+Lifetime@{Get\+Bad\+Link\+Lifetime}}
\index{Get\+Bad\+Link\+Lifetime@{Get\+Bad\+Link\+Lifetime}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Bad\+Link\+Lifetime() const }{GetBadLinkLifetime() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Bad\+Link\+Lifetime (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a8f62123e7da2576be2ca294c11092355}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a8f62123e7da2576be2ca294c11092355}

\begin{DoxyCode}
337   \{
338     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7ab3daa7c72f3320d4eb70742a4c819d}{m\_badLinkLifetime};
339   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Cache\+Timeout@{Get\+Cache\+Timeout}}
\index{Get\+Cache\+Timeout@{Get\+Cache\+Timeout}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Cache\+Timeout() const }{GetCacheTimeout() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Cache\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a1bacac337434c239c93b0f2c2c05320a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a1bacac337434c239c93b0f2c2c05320a}

\begin{DoxyCode}
321   \{
322     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a6a2bdf2226910392a4578cc82216acaf}{RouteCacheTimeout};
323   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Callback@{Get\+Callback}}
\index{Get\+Callback@{Get\+Callback}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Callback() const }{GetCallback() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Callback}$<$void, {\bf Ipv4\+Address}, uint8\+\_\+t $>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Callback (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a95e45b0d9b788e926acfdd8666732399}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a95e45b0d9b788e926acfdd8666732399}


Handle link failure callback. 


\begin{DoxyCode}
531   \{
532     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ac784b52b7d230343a1c7c236dfe91aa6}{m\_handleLinkFailure};
533   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Expire\+Time@{Get\+Expire\+Time}}
\index{Get\+Expire\+Time@{Get\+Expire\+Time}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Expire\+Time(\+Ipv4\+Address addr)}{GetExpireTime(Ipv4Address addr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Expire\+Time (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{addr}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aa9a8137b8eb12cdc8961fb1c51b0a3f4}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aa9a8137b8eb12cdc8961fb1c51b0a3f4}


Return expire time for neighbor node with address addr, if exists, else return 0. 


\begin{DoxyCode}
1100 \{
1101   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1102   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{PurgeMac} ();
1103   \textcolor{keywordflow}{for} (std::vector<Neighbor>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}
1104        != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1105     \{
1106       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_neighborAddress == addr)
1107         \{
1108           \textcolor{keywordflow}{return} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_expireTime - \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ());
1109         \}
1110     \}
1111   \textcolor{keywordflow}{return} \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0);
1112 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Init\+Stability@{Get\+Init\+Stability}}
\index{Get\+Init\+Stability@{Get\+Init\+Stability}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Init\+Stability() const }{GetInitStability() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Init\+Stability (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a321108b583f5c4f443c87a51cf5a0940}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a321108b583f5c4f443c87a51cf5a0940}

\begin{DoxyCode}
361   \{
362     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability};
363   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Max\+Cache\+Len@{Get\+Max\+Cache\+Len}}
\index{Get\+Max\+Cache\+Len@{Get\+Max\+Cache\+Len}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Max\+Cache\+Len() const }{GetMaxCacheLen() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Max\+Cache\+Len (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_afa374702182edc67c96a395d0f7ef282}{}\label{classns3_1_1dsr_1_1DsrRouteCache_afa374702182edc67c96a395d0f7ef282}

\begin{DoxyCode}
313   \{
314     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7c2e4d18d325c59346bde655057682c2}{m\_maxCacheLen};
315   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Max\+Entries\+Each\+Dst@{Get\+Max\+Entries\+Each\+Dst}}
\index{Get\+Max\+Entries\+Each\+Dst@{Get\+Max\+Entries\+Each\+Dst}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Max\+Entries\+Each\+Dst() const }{GetMaxEntriesEachDst() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Max\+Entries\+Each\+Dst (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_abb6ef065b4ba2dde024e9b2f168dc55c}{}\label{classns3_1_1dsr_1_1DsrRouteCache_abb6ef065b4ba2dde024e9b2f168dc55c}

\begin{DoxyCode}
329   \{
330     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa6b2bd241ac25da54f0ee83d6a9946be}{m\_maxEntriesEachDst};
331   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Min\+Life\+Time@{Get\+Min\+Life\+Time}}
\index{Get\+Min\+Life\+Time@{Get\+Min\+Life\+Time}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Min\+Life\+Time() const }{GetMinLifeTime() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Min\+Life\+Time (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ad29c3416ce230f84b96f51717c8d00a4}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ad29c3416ce230f84b96f51717c8d00a4}

\begin{DoxyCode}
369   \{
370     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab1fe273b756ac95e21cf000728e33d12}{m\_minLifeTime};
371   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Stability\+Decr\+Factor@{Get\+Stability\+Decr\+Factor}}
\index{Get\+Stability\+Decr\+Factor@{Get\+Stability\+Decr\+Factor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Stability\+Decr\+Factor() const }{GetStabilityDecrFactor() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Stability\+Decr\+Factor (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_abcf38af360eb4478b02312fbd0507005}{}\label{classns3_1_1dsr_1_1DsrRouteCache_abcf38af360eb4478b02312fbd0507005}

\begin{DoxyCode}
345   \{
346     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a019b992bfd50af4ce7a3d7e13bc0c38a}{m\_stabilityDecrFactor};
347   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Stability\+Incr\+Factor@{Get\+Stability\+Incr\+Factor}}
\index{Get\+Stability\+Incr\+Factor@{Get\+Stability\+Incr\+Factor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Stability\+Incr\+Factor() const }{GetStabilityIncrFactor() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Stability\+Incr\+Factor (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a5483251b00f51f742e104c0bcb67766a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a5483251b00f51f742e104c0bcb67766a}

\begin{DoxyCode}
353   \{
354     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a4fb68651a11cfafbb027660a4b42734e}{m\_stabilityIncrFactor};
355   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Sub\+Route@{Get\+Sub\+Route}}
\index{Get\+Sub\+Route@{Get\+Sub\+Route}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Sub\+Route() const }{GetSubRoute() const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Sub\+Route (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ab76148a6e265c638634afe659e78e5e9}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ab76148a6e265c638634afe659e78e5e9}

\begin{DoxyCode}
305   \{
306     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aea55a575fdabc0a2cdf7cde483549d1f}{m\_subRoute};
307   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Tx\+Error\+Callback@{Get\+Tx\+Error\+Callback}}
\index{Get\+Tx\+Error\+Callback@{Get\+Tx\+Error\+Callback}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Tx\+Error\+Callback() const }{GetTxErrorCallback() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Callback}$<$void, {\bf Wifi\+Mac\+Header} const \&$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Tx\+Error\+Callback (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_add47d5b114fc61306122d31427e7a944}{}\label{classns3_1_1dsr_1_1DsrRouteCache_add47d5b114fc61306122d31427e7a944}


Get callback to Process\+Tx\+Error, this callback is trying to use the wifi mac tx error header to notify a link layer drop event, however, it is not fully supported yet. 


\begin{DoxyCode}
520   \{
521     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a797049d1a514f43ed1fc286a0fd7649f}{m\_txErrorCallback};
522   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id()}{GetTypeId()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a05b0ddede171b486247c73d1a3e52c48}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a05b0ddede171b486247c73d1a3e52c48}

\begin{DoxyCode}
138 \{
139   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::dsr::DsrRouteCache"})
140     .SetParent<\hyperlink{classns3_1_1Object_a40860402e64d8008fb42329df7097cdb}{Object}> ()
141     .SetGroupName (\textcolor{stringliteral}{"Dsr"})
142     .AddConstructor<\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a160d3e218ffa72ba6965e1adc762acdb}{DsrRouteCache}> ()
143   ;
144   \textcolor{keywordflow}{return} tid;
145 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Get\+Use\+Extends@{Get\+Use\+Extends}}
\index{Get\+Use\+Extends@{Get\+Use\+Extends}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Get\+Use\+Extends() const }{GetUseExtends() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Get\+Use\+Extends (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aeb5763060d894cd9a08b1f08761c5a23}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aeb5763060d894cd9a08b1f08761c5a23}

\begin{DoxyCode}
377   \{
378     \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaa148075ecbecd459f1de62d7e43146a}{m\_useExtends};
379   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Inc\+Stability@{Inc\+Stability}}
\index{Inc\+Stability@{Inc\+Stability}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Inc\+Stability(\+Ipv4\+Address node)}{IncStability(Ipv4Address node)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Inc\+Stability (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{node}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aa638a140150404cc82a5937bcc622395}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aa638a140150404cc82a5937bcc622395}


increase the stability of the node 


\begin{DoxyParams}{Parameters}
{\em node} & the ip address of the node we want to increase stability \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000017}{Todo}]get rid of the debug here \end{DoxyRefDesc}

\begin{DoxyCode}
516 \{
517   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << node);
518   std::map<Ipv4Address, DsrNodeStab>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.find (node);
519   \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end ())
520     \{
521       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The initial stability "} << \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability}.
      \hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds} ());
522       DsrNodeStab ns (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability});
523       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[node] = ns;
524       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
525     \}
526   \textcolor{keywordflow}{else}
527     \{
529       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The node stability "} << i->second.GetNodeStability ().GetSeconds ());
530       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The stability here "} << \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (i->second.GetNodeStability () * 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a4fb68651a11cfafbb027660a4b42734e}{m\_stabilityIncrFactor}).GetSeconds ());
531       DsrNodeStab ns (\hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (i->second.GetNodeStability () * 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a4fb68651a11cfafbb027660a4b42734e}{m\_stabilityIncrFactor}));
532       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[node] = ns;
533       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
534     \}
535   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
536 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16




Here is the caller graph for this function\+:
% FIG 17


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Is\+Link\+Cache@{Is\+Link\+Cache}}
\index{Is\+Link\+Cache@{Is\+Link\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Is\+Link\+Cache()}{IsLinkCache()}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Is\+Link\+Cache (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a3ec7cfaaf07c337cf71aa21793059293}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a3ec7cfaaf07c337cf71aa21793059293}

\begin{DoxyCode}
311 \{
312   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
313   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}{m\_isLinkCache};
314 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 18


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Is\+Neighbor@{Is\+Neighbor}}
\index{Is\+Neighbor@{Is\+Neighbor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Is\+Neighbor(\+Ipv4\+Address addr)}{IsNeighbor(Ipv4Address addr)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Is\+Neighbor (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{addr}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aef8f383fea545e8836c932909d9feaac}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aef8f383fea545e8836c932909d9feaac}


Check that node with address addr is neighbor. 

This part maintains a neighbor list to handle unidirectional links and link-\/layer acks 
\begin{DoxyCode}
1084 \{
1085   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1086   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{PurgeMac} ();  \textcolor{comment}{// purge the mac cache}
1087   \textcolor{keywordflow}{for} (std::vector<Neighbor>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.begin ();
1088        \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1089     \{
1090       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_neighborAddress == addr)
1091         \{
1092           \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1093         \}
1094     \}
1095   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1096 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Lookup\+Mac\+Address@{Lookup\+Mac\+Address}}
\index{Lookup\+Mac\+Address@{Lookup\+Mac\+Address}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Lookup\+Mac\+Address(\+Ipv4\+Address)}{LookupMacAddress(Ipv4Address)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Mac48\+Address} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Lookup\+Mac\+Address (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{addr}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a37fef2c4a1dab164dca35aafd3ceff7b}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a37fef2c4a1dab164dca35aafd3ceff7b}


Find M\+AC address by IP using list of A\+RP caches. 


\begin{DoxyCode}
1219 \{
1220   Mac48Address hwaddr;
1221   \textcolor{keywordflow}{for} (std::vector<Ptr<ArpCache> >::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\_arp}.begin ();
1222        \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{m\_arp}.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1223     \{
1224       ArpCache::Entry * entry = (*i)->Lookup (addr);
1225       \textcolor{keywordflow}{if} (entry != 0 && (entry->IsAlive () || entry->IsPermanent ()) && !entry->IsExpired ())
1226         \{
1227           hwaddr = \hyperlink{classns3_1_1Mac48Address_a911ce13603a9ef837545a032b6523ae4}{Mac48Address::ConvertFrom} (entry->GetMacAddress ());
1228           \textcolor{keywordflow}{break};
1229         \}
1230     \}
1231   \textcolor{keywordflow}{return} hwaddr;
1232 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20




Here is the caller graph for this function\+:
% FIG 21


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Lookup\+Route@{Lookup\+Route}}
\index{Lookup\+Route@{Lookup\+Route}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Lookup\+Route(\+Ipv4\+Address id, Dsr\+Route\+Cache\+Entry \&rt)}{LookupRoute(Ipv4Address id, DsrRouteCacheEntry &rt)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Lookup\+Route (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{id, }
\item[{{\bf Dsr\+Route\+Cache\+Entry} \&}]{rt}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a563d72057fbabedafb85907ea79d692f}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a563d72057fbabedafb85907ea79d692f}


Lookup route cache entry with destination address dst. 


\begin{DoxyParams}{Parameters}
{\em id} & destination address \\
\hline
{\em rt} & entry with destination address id, if exists \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}

\begin{DoxyCode}
209 \{
210   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{keywordtype}{id});
211   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a3ec7cfaaf07c337cf71aa21793059293}{IsLinkCache} ())
212     \{
213       \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ac9fcf2d3676a0e05cd567988cb29fe5a}{LookupRoute\_Link} (\textcolor{keywordtype}{id}, rt);
214     \}
215   \textcolor{keywordflow}{else}
216     \{
217       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge} ();  \textcolor{comment}{// Purge first to remove expired entries}
218       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.empty ())
219         \{
220           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route to "} << \textcolor{keywordtype}{id} << \textcolor{stringliteral}{" not found; m\_sortedRoutes is empty"});
221           \textcolor{keywordflow}{return} \textcolor{keyword}{false};
222         \}
223       std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.find (\textcolor{keywordtype}{id});
224       \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.end ())
225         \{
226           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"No Direct Route to "} << \textcolor{keywordtype}{id} << \textcolor{stringliteral}{" found"});
227           \textcolor{keywordflow}{for} (std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::const\_iterator j =
228                  \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.begin (); j != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.end (); ++j)
229             \{
230               std::list<DsrRouteCacheEntry> rtVector = j->second; \textcolor{comment}{// The route cache vector linked with
       destination address}
231               \textcolor{comment}{/*}
232 \textcolor{comment}{               * Loop through the possibly multiple routes within the route vector}
233 \textcolor{comment}{               */}
234               \textcolor{keywordflow}{for} (std::list<DsrRouteCacheEntry>::const\_iterator k = rtVector.begin (); k != rtVector.end (
      ); ++k)
235                 \{
236                   \textcolor{comment}{// return the first route in the route vector}
237                   \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a055f612eb8c2e05b634db24523adb1e5}{routeVector} = k->GetVector ();
238                   \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} changeVector;
239 
240                   \textcolor{keywordflow}{for} (DsrRouteCacheEntry::IP\_VECTOR::iterator \hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l} = routeVector.begin (); 
      \hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l} != routeVector.end (); ++\hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l})
241                     \{
242                       \textcolor{keywordflow}{if} (*\hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l} != \textcolor{keywordtype}{id})
243                         \{
244                           changeVector.push\_back (*\hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l});
245                         \}
246                       \textcolor{keywordflow}{else}
247                         \{
248                           changeVector.push\_back (*\hyperlink{buildings__pathloss_8m_a5b54c0a045f179bcbbbc9abcb8b5cd4c}{l});
249                           \textcolor{keywordflow}{break};
250                         \}
251                     \}
252                   \textcolor{comment}{/*}
253 \textcolor{comment}{                   * When the changed vector is smaller in size and larger than 1, which means we have
       found a route with the destination}
254 \textcolor{comment}{                   * address we are looking for}
255 \textcolor{comment}{                   */}
256                   \textcolor{keywordflow}{if} ((changeVector.size () < routeVector.size ())  && (changeVector.size () > 1))
257                     \{
258                       DsrRouteCacheEntry changeEntry; \textcolor{comment}{// Create the route entry}
259                       changeEntry.SetVector (changeVector);
260                       changeEntry.SetDestination (\textcolor{keywordtype}{id});
261                       \textcolor{comment}{// Use the expire time from original route entry}
262                       changeEntry.SetExpireTime (k->GetExpireTime ());
263                       \textcolor{comment}{// We need to add new route entry here}
264                       std::list<DsrRouteCacheEntry> newVector;
265                       newVector.push\_back (changeEntry);
266                       newVector.sort (\hyperlink{namespacens3_1_1dsr_a53bce2b069de9151de0203d96468684e}{CompareRoutesExpire});  \textcolor{comment}{// sort the route vector
       first}
267                       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}[id] = newVector;   \textcolor{comment}{// Only get the first sub route and
       add it in route cache}
268                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"We have a sub-route to "} << \textcolor{keywordtype}{id} << \textcolor{stringliteral}{" add it in route cache"});
269                     \}
270                 \}
271             \}
272         \}
273       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Here we check the route cache again after updated the sub routes"});
274       std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::const\_iterator m = 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.find (\textcolor{keywordtype}{id});
275       \textcolor{keywordflow}{if} (m == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.end ())
276         \{
277           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"No updated route till last time"});
278           \textcolor{keywordflow}{return} \textcolor{keyword}{false};
279         \}
280       \textcolor{comment}{/*}
281 \textcolor{comment}{       * We have a direct route to the destination address}
282 \textcolor{comment}{       */}
283       std::list<DsrRouteCacheEntry> rtVector = m->second;
284       rt = rtVector.front ();  \textcolor{comment}{// use the first entry in the route vector}
285       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route to "} << \textcolor{keywordtype}{id} << \textcolor{stringliteral}{" with route size "} << rtVector.size ());
286       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
287     \}
288 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 22




Here is the caller graph for this function\+:
% FIG 23


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Lookup\+Route\+\_\+\+Link@{Lookup\+Route\+\_\+\+Link}}
\index{Lookup\+Route\+\_\+\+Link@{Lookup\+Route\+\_\+\+Link}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Lookup\+Route\+\_\+\+Link(\+Ipv4\+Address id, Dsr\+Route\+Cache\+Entry \&rt)}{LookupRoute_Link(Ipv4Address id, DsrRouteCacheEntry &rt)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Lookup\+Route\+\_\+\+Link (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{id, }
\item[{{\bf Dsr\+Route\+Cache\+Entry} \&}]{rt}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ac9fcf2d3676a0e05cd567988cb29fe5a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ac9fcf2d3676a0e05cd567988cb29fe5a}


used by Lookup\+Route when Link\+Cache 


\begin{DoxyParams}{Parameters}
{\em id} & the ip address we are looking for \\
\hline
{\em rt} & the route cache entry to store the found one \\
\hline
\end{DoxyParams}
We need to purge the link node cache 
\begin{DoxyCode}
434 \{
435   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{keywordtype}{id});
437   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0a053ff3dc1d3872188e85e30d1afb7e}{PurgeLinkNode} ();
438   std::map<Ipv4Address, DsrRouteCacheEntry::IP\_VECTOR>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aeff05d869cb32e13605d4792a0a0d841}{m\_bestRoutesTable\_link}.find (\textcolor{keywordtype}{id});
439   \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aeff05d869cb32e13605d4792a0a0d841}{m\_bestRoutesTable\_link}.end ())
440     \{
441       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"No route find to "} << \textcolor{keywordtype}{id});
442       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
443     \}
444   \textcolor{keywordflow}{else}
445     \{
446       \textcolor{keywordflow}{if} (i->second.size () < 2)
447         \{
448           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route to "} << \textcolor{keywordtype}{id} << \textcolor{stringliteral}{" error"});
449           \textcolor{keywordflow}{return} \textcolor{keyword}{false};
450         \}
451 
452       DsrRouteCacheEntry newEntry; \textcolor{comment}{// Create the route entry}
453       newEntry.SetVector (i->second);
454       newEntry.SetDestination (\textcolor{keywordtype}{id});
455       newEntry.SetExpireTime (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a6a2bdf2226910392a4578cc82216acaf}{RouteCacheTimeout});
456       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Route to "} << \textcolor{keywordtype}{id} << \textcolor{stringliteral}{" found with the length "} << i->second.size ());
457       rt = newEntry;
458       std::vector<Ipv4Address> path = rt.GetVector ();
459       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a9d47644d07a4b6f1ec0c429cdb1bdf37}{PrintVector} (path);
460       \textcolor{keywordflow}{return} \textcolor{keyword}{true};
461     \}
462 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 24




Here is the caller graph for this function\+:
% FIG 25


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!operator=@{operator=}}
\index{operator=@{operator=}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{operator=(\+Dsr\+Route\+Cache const \&)}{operator=(DsrRouteCache const &)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Dsr\+Route\+Cache}\& ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::operator= (
\begin{DoxyParamCaption}
\item[{{\bf Dsr\+Route\+Cache} const \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a62f4b1c216987d53a951402cb8de0362}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a62f4b1c216987d53a951402cb8de0362}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Print@{Print}}
\index{Print@{Print}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Print(std\+::ostream \&os)}{Print(std::ostream &os)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Print (
\begin{DoxyParamCaption}
\item[{std\+::ostream \&}]{os}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_abd7f2670cf78e5d4d45e9499c3d351c4}{}\label{classns3_1_1dsr_1_1DsrRouteCache_abd7f2670cf78e5d4d45e9499c3d351c4}


Print route cache. 


\begin{DoxyCode}
1033 \{
1034   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1035   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge} ();
1036   os << \textcolor{stringliteral}{"\(\backslash\)nDSR Route Cache\(\backslash\)n"}
1037      << \textcolor{stringliteral}{"Destination\(\backslash\)tGateway\(\backslash\)t\(\backslash\)tInterface\(\backslash\)tFlag\(\backslash\)tExpire\(\backslash\)tHops\(\backslash\)n"};
1038   \textcolor{keywordflow}{for} (std::list<DsrRouteCacheEntry>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} =
1039          \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}{m\_routeEntryVector}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}{m\_routeEntryVector}.end (); 
      ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1040     \{
1041       \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->Print (os);
1042     \}
1043   os << \textcolor{stringliteral}{"\(\backslash\)n"};
1044 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 26


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Print\+Route\+Vector@{Print\+Route\+Vector}}
\index{Print\+Route\+Vector@{Print\+Route\+Vector}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Print\+Route\+Vector(std\+::list$<$ Dsr\+Route\+Cache\+Entry $>$ route)}{PrintRouteVector(std::list< DsrRouteCacheEntry > route)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Print\+Route\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf std\+::list}$<$ {\bf Dsr\+Route\+Cache\+Entry} $>$}]{route}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aa6b0573d528ac382538d387aded36655}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aa6b0573d528ac382538d387aded36655}


Print all the route vector elements from the route list. 


\begin{DoxyParams}{Parameters}
{\em route} & the route list \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
954 \{
955   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
956   \textcolor{keywordflow}{for} (std::list<DsrRouteCacheEntry>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = route.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != route.end (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
957     \{
958       std::vector<Ipv4Address> path = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->GetVector ();
959       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Route NO. "});
960       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a9d47644d07a4b6f1ec0c429cdb1bdf37}{PrintVector} (path);
961     \}
962 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Print\+Vector@{Print\+Vector}}
\index{Print\+Vector@{Print\+Vector}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Print\+Vector(std\+::vector$<$ Ipv4\+Address $>$ \&vec)}{PrintVector(std::vector< Ipv4Address > &vec)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Print\+Vector (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ {\bf Ipv4\+Address} $>$ \&}]{vec}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a9d47644d07a4b6f1ec0c429cdb1bdf37}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a9d47644d07a4b6f1ec0c429cdb1bdf37}


Print the route vector elements. 


\begin{DoxyParams}{Parameters}
{\em vec} & the route vector \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
933 \{
934   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
935   \textcolor{comment}{/*}
936 \textcolor{comment}{   * Check elements in a route vector, used when one wants to check the IP addresses saved in}
937 \textcolor{comment}{   */}
938   \textcolor{keywordflow}{if} (!vec.size ())
939     \{
940       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The vector is empty"});
941     \}
942   \textcolor{keywordflow}{else}
943     \{
944       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Print all the elements in a vector"});
945       \textcolor{keywordflow}{for} (std::vector<Ipv4Address>::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = vec.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != vec.end (); ++
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
946         \{
947           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The ip address "} << *\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
948         \}
949     \}
950 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 28


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Process\+Tx\+Error@{Process\+Tx\+Error}}
\index{Process\+Tx\+Error@{Process\+Tx\+Error}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Process\+Tx\+Error(\+Wifi\+Mac\+Header const \&)}{ProcessTxError(WifiMacHeader const &)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Process\+Tx\+Error (
\begin{DoxyParamCaption}
\item[{{\bf Wifi\+Mac\+Header} const \&}]{hdr}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a132956e044267e07f4d7265e1541d83c}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a132956e044267e07f4d7265e1541d83c}


Process layer 2 TX error notification. 


\begin{DoxyCode}
1236 \{
1237   Mac48Address addr = hdr.GetAddr1 ();
1238 
1239   \textcolor{keywordflow}{for} (std::vector<Neighbor>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.end (); ++
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1240     \{
1241       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_hardwareAddress == addr)
1242         \{
1243           \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->close = \textcolor{keyword}{true};
1244         \}
1245     \}
1246   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{PurgeMac} ();
1247 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 29




Here is the caller graph for this function\+:
% FIG 30


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Purge@{Purge}}
\index{Purge@{Purge}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Purge()}{Purge()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Purge (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}


Delete all outdated entries and invalidate valid entry if Lifetime is expired. 


\begin{DoxyCode}
966 \{
967   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
968   \textcolor{comment}{//Trying to purge the route cache}
969   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.empty ())
970     \{
971       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route cache is empty"});
972       \textcolor{keywordflow}{return};
973     \}
974   \textcolor{keywordflow}{for} (std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} =
975          \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.end (); )
976     \{
977       \textcolor{comment}{// Loop of route cache entry with the route size}
978       std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator itmp = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
979       \textcolor{comment}{/*}
980 \textcolor{comment}{       * The route cache entry vector}
981 \textcolor{comment}{       */}
982       Ipv4Address dst = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first;
983       std::list<DsrRouteCacheEntry> rtVector = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second;
984       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route vector size of 1 "} << dst << \textcolor{stringliteral}{" "} << rtVector.size ());
985       \textcolor{keywordflow}{if} (rtVector.size ())
986         \{
987           \textcolor{keywordflow}{for} (std::list<DsrRouteCacheEntry>::iterator j = rtVector.begin (); j != rtVector.end (); )
988             \{
989               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The expire time of every entry with expire time "} << j->
      GetExpireTime ());
990               \textcolor{comment}{/*}
991 \textcolor{comment}{               * First verify if the route has expired or not}
992 \textcolor{comment}{               */}
993               \textcolor{keywordflow}{if} (j->GetExpireTime () <= \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0))
994                 \{
995                   \textcolor{comment}{/*}
996 \textcolor{comment}{                   * When the expire time has passed, erase the certain route}
997 \textcolor{comment}{                   */}
998                   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Erase the expired route for "} << dst << \textcolor{stringliteral}{" with expire time "} 
      << j->GetExpireTime ());
999                   j = rtVector.erase (j);
1000                 \}
1001               \textcolor{keywordflow}{else}
1002                 \{
1003                   ++j;
1004                 \}
1005             \}
1006           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route vector size of 2 "} << dst << \textcolor{stringliteral}{" "} << rtVector.size ());
1007           \textcolor{keywordflow}{if} (rtVector.size ())
1008             \{
1009               ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
1010               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (itmp); \textcolor{comment}{// erase the entry first}
1011               \textcolor{comment}{/*}
1012 \textcolor{comment}{               * Save the new route cache along with the destination address in map}
1013 \textcolor{comment}{               */}
1014               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.insert (std::make\_pair (dst, rtVector));
1015             \}
1016           \textcolor{keywordflow}{else}
1017             \{
1018               ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
1019               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (itmp);
1020             \}
1021         \}
1022       \textcolor{keywordflow}{else}
1023         \{
1024           ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
1025           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (itmp);
1026         \}
1027     \}
1028   \textcolor{keywordflow}{return};
1029 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 31




Here is the caller graph for this function\+:
% FIG 32


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Purge\+Link\+Node@{Purge\+Link\+Node}}
\index{Purge\+Link\+Node@{Purge\+Link\+Node}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Purge\+Link\+Node()}{PurgeLinkNode()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Purge\+Link\+Node (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a0a053ff3dc1d3872188e85e30d1afb7e}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a0a053ff3dc1d3872188e85e30d1afb7e}
may need to remove them after verify 
\begin{DoxyCode}
466 \{
467   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
468   \textcolor{keywordflow}{for} (std::map<Link, DsrLinkStab>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.end (); )
469     \{
470       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The link stability "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second.GetLinkStability ().GetSeconds ());
471       std::map<Link, DsrLinkStab>::iterator itmp = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
472       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second.GetLinkStability () <= \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0))
473         \{
474           ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
475           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.erase (itmp);
476         \}
477       \textcolor{keywordflow}{else}
478         \{
479           ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
480         \}
481     \}
483   \textcolor{keywordflow}{for} (std::map<Ipv4Address, DsrNodeStab>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end (); )
484     \{
485       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The node stability "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second.GetNodeStability ().GetSeconds ());
486       std::map<Ipv4Address, DsrNodeStab>::iterator itmp = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
487       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second.GetNodeStability () <= \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0))
488         \{
489           ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
490           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.erase (itmp);
491         \}
492       \textcolor{keywordflow}{else}
493         \{
494           ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
495         \}
496     \}
497 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 33




Here is the caller graph for this function\+:
% FIG 34


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Purge\+Mac@{Purge\+Mac}}
\index{Purge\+Mac@{Purge\+Mac}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Purge\+Mac()}{PurgeMac()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Purge\+Mac (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}


Remove all expired mac entries. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000021}{Todo}]disable temporarily \end{DoxyRefDesc}

\begin{DoxyCode}
1174 \{
1175   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.empty ())
1176     \{
1177       \textcolor{keywordflow}{return};
1178     \}
1179 
1180   CloseNeighbor pred;
1181   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ac784b52b7d230343a1c7c236dfe91aa6}{m\_handleLinkFailure}.IsNull ())
1182     \{
1183       \textcolor{keywordflow}{for} (std::vector<Neighbor>::iterator j = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.begin (); j != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.end (); ++j)
1184         \{
1185           \textcolor{keywordflow}{if} (pred (*j))
1186             \{
1187               \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Close link to "} << j->m\_neighborAddress);
1189 \textcolor{comment}{//              m\_handleLinkFailure (j->m\_neighborAddress);}
1190             \}
1191         \}
1192     \}
1193   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.erase (std::remove\_if (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.begin (), \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.end (), pred), 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.end ());
1194   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\_ntimer}.\hyperlink{classns3_1_1Timer_ac8261489cfc3361ab869ea2387cfc841}{Cancel} ();
1195   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\_ntimer}.\hyperlink{classns3_1_1Timer_ac3345d696887578f518b19f359f7f94b}{Schedule} ();
1196 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 35




Here is the caller graph for this function\+:
% FIG 36


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Rebuild\+Best\+Route\+Table@{Rebuild\+Best\+Route\+Table}}
\index{Rebuild\+Best\+Route\+Table@{Rebuild\+Best\+Route\+Table}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Rebuild\+Best\+Route\+Table(\+Ipv4\+Address source)}{RebuildBestRouteTable(Ipv4Address source)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Rebuild\+Best\+Route\+Table (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{source}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a1b90d61ebb580a83ee9c1306bbc230dd}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a1b90d61ebb580a83ee9c1306bbc230dd}


U\+SE M\+A\+X\+W\+E\+I\+G\+HT TO R\+E\+P\+R\+E\+S\+E\+NT M\+AX; U\+SE B\+R\+O\+A\+D\+C\+A\+ST A\+D\+D\+R\+E\+SS TO R\+E\+P\+R\+E\+S\+E\+NT N\+U\+LL P\+R\+E\+C\+E\+E\+D\+I\+NG A\+D\+D\+R\+E\+SS. 


\begin{DoxyParams}{Parameters}
{\em source} & The source address the routes based on \\
\hline
\end{DoxyParams}
The followings are initialize-\/single-\/source

The followings are core of dijskra algorithm
\begin{DoxyCode}
318 \{
319   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << source);
323   \textcolor{comment}{// @d shortest-path estimate}
324   std::map<Ipv4Address, uint32\_t> \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d};
325   \textcolor{comment}{// @pre preceeding node}
326   std::map<Ipv4Address, Ipv4Address> pre;
327   \textcolor{keywordflow}{for} (std::map<Ipv4Address, std::map<Ipv4Address, uint32\_t> >::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
328     \{
329       \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second.find (source) != \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second.end ())
330         \{
331           d[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first] = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second[source];
332           pre[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first] = source;
333         \}
334       \textcolor{keywordflow}{else}
335         \{
336           d[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first] = \hyperlink{dsr-rcache_8h_a667684b091336e57674db9e4480b61b7}{MAXWEIGHT};
337           pre[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first] = Ipv4Address (\textcolor{stringliteral}{"255.255.255.255"});
338         \}
339     \}
340   d[source] = 0;
344   \textcolor{comment}{// the node set which shortest distance has been calculated, if true calculated}
345   std::map<Ipv4Address, bool> \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
346   \textcolor{keywordtype}{double} temp = \hyperlink{dsr-rcache_8h_a667684b091336e57674db9e4480b61b7}{MAXWEIGHT};
347   Ipv4Address tempip = Ipv4Address (\textcolor{stringliteral}{"255.255.255.255"});
348   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
349     \{
350       temp = \hyperlink{dsr-rcache_8h_a667684b091336e57674db9e4480b61b7}{MAXWEIGHT};
351       \textcolor{keywordflow}{for} (std::map<Ipv4Address,uint32\_t>::const\_iterator j = d.begin (); j != d.end (); ++j)
352         \{
353           Ipv4Address ip = j->first;
354           \textcolor{keywordflow}{if} (s.find (ip) == s.end ())
355             \{
356               \textcolor{comment}{/*}
357 \textcolor{comment}{               * \(\backslash\)brief The followings are for comparison}
358 \textcolor{comment}{               */}
359               \textcolor{keywordflow}{if} (j->second <= temp)
360                 \{
361                   temp = j->second;
362                   tempip = ip;
363                 \}
364             \}
365         \}
366       \textcolor{keywordflow}{if} (!tempip.IsBroadcast ())
367         \{
368           s[tempip] = \textcolor{keyword}{true};
369           \textcolor{keywordflow}{for} (std::map<Ipv4Address, uint32\_t>::const\_iterator k = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}[tempip].begin (); k
       != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}[tempip].end (); ++k)
370             \{
371               \textcolor{keywordflow}{if} (s.find (k->first) == s.end () && d[k->first] > d[tempip] + k->second)
372                 \{
373                   d[k->first] = d[tempip] + k->second;
374                   pre[k->first] = tempip;
375                 \}
376               \textcolor{comment}{/*}
377 \textcolor{comment}{               *  Selects the shortest-length route that has the longest expected lifetime}
378 \textcolor{comment}{               *  (highest minimum timeout of any link in the route)}
379 \textcolor{comment}{               *  For the computation overhead and complexity}
380 \textcolor{comment}{               *  Here I just implement kind of greedy strategy to select link with the longest expected
       lifetime when there is two options}
381 \textcolor{comment}{               */}
382               \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (d[k->first] == d[tempip] + k->second)
383                 \{
384                   std::map<Link, DsrLinkStab>::iterator oldlink = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.find (Link (k->
      first, pre[k->first]));
385                   std::map<Link, DsrLinkStab>::iterator newlink = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.find (Link (k->
      first, tempip));
386                   \textcolor{keywordflow}{if} (oldlink != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.end () && newlink != 
      \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.end ())
387                     \{
388                       \textcolor{keywordflow}{if} (oldlink->second.GetLinkStability () < newlink->second.GetLinkStability ())
389                         \{
390                           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Select the link with longest expected lifetime"});
391                           d[k->first] = d[tempip] + k->second;
392                           pre[k->first] = tempip;
393                         \}
394                     \}
395                   \textcolor{keywordflow}{else}
396                     \{
397                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Link Stability Info Corrupt"});
398                     \}
399                 \}
400             \}
401         \}
402     \}
403   \textcolor{comment}{// clean the best route table}
404   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aeff05d869cb32e13605d4792a0a0d841}{m\_bestRoutesTable\_link}.clear ();
405   \textcolor{keywordflow}{for} (std::map<Ipv4Address, Ipv4Address>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = pre.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != pre.end (); ++
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
406     \{
407       \textcolor{comment}{// loop for all vertexes}
408       \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} route;
409       Ipv4Address iptemp = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first;
410 
411       \textcolor{keywordflow}{if} (!\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->second.IsBroadcast () && iptemp != source)
412         \{
413           \textcolor{keywordflow}{while} (iptemp != source)
414             \{
415               route.push\_back (iptemp);
416               iptemp = pre[iptemp];
417             \}
418           route.push\_back (source);
419           \textcolor{comment}{// Reverse the route}
420           \hyperlink{classns3_1_1dsr_1_1DsrRouteCacheEntry_ab834177006bdbfd2e3fa607c2a88cbdf}{DsrRouteCacheEntry::IP\_VECTOR} reverseroute;
421           \textcolor{keywordflow}{for} (DsrRouteCacheEntry::IP\_VECTOR::reverse\_iterator j = route.rbegin (); j != route.rend (); ++j
      )
422             \{
423               reverseroute.push\_back (*j);
424             \}
425           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Add newly calculated best routes"});
426           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a9d47644d07a4b6f1ec0c429cdb1bdf37}{PrintVector} (reverseroute);
427           \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aeff05d869cb32e13605d4792a0a0d841}{m\_bestRoutesTable\_link}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first] = reverseroute;
428         \}
429     \}
430 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 37




Here is the caller graph for this function\+:
% FIG 38


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Remove\+Last\+Entry@{Remove\+Last\+Entry}}
\index{Remove\+Last\+Entry@{Remove\+Last\+Entry}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Remove\+Last\+Entry(std\+::list$<$ Dsr\+Route\+Cache\+Entry $>$ \&rt\+Vector)}{RemoveLastEntry(std::list< DsrRouteCacheEntry > &rtVector)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Remove\+Last\+Entry (
\begin{DoxyParamCaption}
\item[{{\bf std\+::list}$<$ {\bf Dsr\+Route\+Cache\+Entry} $>$ \&}]{rt\+Vector}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ad02a476e6b440f517898c11bffac4f27}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ad02a476e6b440f517898c11bffac4f27}


Remove the aged route cache entries when the route cache is full. 


\begin{DoxyCode}
171 \{
172   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
173   \textcolor{comment}{// Release the last entry of route list}
174   rtVector.pop\_back ();
175 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 39


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Schedule\+Timer@{Schedule\+Timer}}
\index{Schedule\+Timer@{Schedule\+Timer}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Schedule\+Timer()}{ScheduleTimer()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Schedule\+Timer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a1464bf3f9e4391942447afd1ce11c219}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a1464bf3f9e4391942447afd1ce11c219}


Schedule m\+\_\+ntimer. 


\begin{DoxyCode}
1200 \{
1201   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\_ntimer}.\hyperlink{classns3_1_1Timer_ac8261489cfc3361ab869ea2387cfc841}{Cancel} ();
1202   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{m\_ntimer}.\hyperlink{classns3_1_1Timer_ac3345d696887578f518b19f359f7f94b}{Schedule} ();
1203 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 40


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Bad\+Link\+Lifetime@{Set\+Bad\+Link\+Lifetime}}
\index{Set\+Bad\+Link\+Lifetime@{Set\+Bad\+Link\+Lifetime}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Bad\+Link\+Lifetime(\+Time t)}{SetBadLinkLifetime(Time t)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Bad\+Link\+Lifetime (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a0827bf4c2148fbcd10f2a64244547ad5}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a0827bf4c2148fbcd10f2a64244547ad5}

\begin{DoxyCode}
341   \{
342     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7ab3daa7c72f3320d4eb70742a4c819d}{m\_badLinkLifetime} = t;
343   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Cache\+Timeout@{Set\+Cache\+Timeout}}
\index{Set\+Cache\+Timeout@{Set\+Cache\+Timeout}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Cache\+Timeout(\+Time t)}{SetCacheTimeout(Time t)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Cache\+Timeout (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_abf1f0b065a008e6d03ab0628a18857f4}{}\label{classns3_1_1dsr_1_1DsrRouteCache_abf1f0b065a008e6d03ab0628a18857f4}

\begin{DoxyCode}
325   \{
326     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a6a2bdf2226910392a4578cc82216acaf}{RouteCacheTimeout} = t;
327   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Cache\+Type@{Set\+Cache\+Type}}
\index{Set\+Cache\+Type@{Set\+Cache\+Type}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Cache\+Type(std\+::string type)}{SetCacheType(std::string type)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Cache\+Type (
\begin{DoxyParamCaption}
\item[{std\+::string}]{type}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a2076176adf8cb2c75770b0df74b04e12}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a2076176adf8cb2c75770b0df74b04e12}


Dijsktra algorithm to get the best route from m\+\_\+net\+Graph and update the m\+\_\+best\+Routes\+Table\+\_\+link when current graph information has changed. 


\begin{DoxyParams}{Parameters}
{\em type} & The type of the cache \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
292 \{
293   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type});
294   \textcolor{keywordflow}{if} (\hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type} == std::string (\textcolor{stringliteral}{"LinkCache"}))
295     \{
296       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}{m\_isLinkCache} = \textcolor{keyword}{true};
297     \}
298   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{visualizer-ideas_8txt_add98db9e15e2a58cf2b57623e7aa893a}{type} == std::string (\textcolor{stringliteral}{"PathCache"}))
299     \{
300       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}{m\_isLinkCache} = \textcolor{keyword}{false};
301     \}
302   \textcolor{keywordflow}{else}
303     \{
304       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}{m\_isLinkCache} = \textcolor{keyword}{true};             \textcolor{comment}{// use link cache as default}
305       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Error Cache Type"});
306     \}
307 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Callback@{Set\+Callback}}
\index{Set\+Callback@{Set\+Callback}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Callback(\+Callback$<$ void, Ipv4\+Address, uint8\+\_\+t $>$ cb)}{SetCallback(Callback< void, Ipv4Address, uint8_t > cb)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Callback}$<$ void, {\bf Ipv4\+Address}, uint8\+\_\+t $>$}]{cb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ad755962e071177f5bc81bcf4302803c0}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ad755962e071177f5bc81bcf4302803c0}


Handle link failure callback. 


\begin{DoxyCode}
526   \{
527     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ac784b52b7d230343a1c7c236dfe91aa6}{m\_handleLinkFailure} = cb;
528   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Init\+Stability@{Set\+Init\+Stability}}
\index{Set\+Init\+Stability@{Set\+Init\+Stability}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Init\+Stability(\+Time init\+Stability)}{SetInitStability(Time initStability)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Init\+Stability (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{init\+Stability}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a194d5a177dcdaea80edc1979b27780c9}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a194d5a177dcdaea80edc1979b27780c9}

\begin{DoxyCode}
365   \{
366     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability} = initStability;
367   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Max\+Cache\+Len@{Set\+Max\+Cache\+Len}}
\index{Set\+Max\+Cache\+Len@{Set\+Max\+Cache\+Len}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Max\+Cache\+Len(uint32\+\_\+t len)}{SetMaxCacheLen(uint32_t len)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Max\+Cache\+Len (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a5632a123b828a0e9d8f095312d47f24d}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a5632a123b828a0e9d8f095312d47f24d}

\begin{DoxyCode}
317   \{
318     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a7c2e4d18d325c59346bde655057682c2}{m\_maxCacheLen} = len;
319   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Max\+Entries\+Each\+Dst@{Set\+Max\+Entries\+Each\+Dst}}
\index{Set\+Max\+Entries\+Each\+Dst@{Set\+Max\+Entries\+Each\+Dst}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Max\+Entries\+Each\+Dst(uint32\+\_\+t entries)}{SetMaxEntriesEachDst(uint32_t entries)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Max\+Entries\+Each\+Dst (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{entries}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a75392ef964c119da3f5c4ccbbb8264f7}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a75392ef964c119da3f5c4ccbbb8264f7}

\begin{DoxyCode}
333   \{
334     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa6b2bd241ac25da54f0ee83d6a9946be}{m\_maxEntriesEachDst} = entries;
335   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Min\+Life\+Time@{Set\+Min\+Life\+Time}}
\index{Set\+Min\+Life\+Time@{Set\+Min\+Life\+Time}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Min\+Life\+Time(\+Time min\+Life\+Time)}{SetMinLifeTime(Time minLifeTime)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Min\+Life\+Time (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{min\+Life\+Time}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a473fb8e279e37d25ef6de9ebee5c68c7}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a473fb8e279e37d25ef6de9ebee5c68c7}

\begin{DoxyCode}
373   \{
374     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_ab1fe273b756ac95e21cf000728e33d12}{m\_minLifeTime} = minLifeTime;
375   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Stability\+Decr\+Factor@{Set\+Stability\+Decr\+Factor}}
\index{Set\+Stability\+Decr\+Factor@{Set\+Stability\+Decr\+Factor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Stability\+Decr\+Factor(uint64\+\_\+t decr\+Factor)}{SetStabilityDecrFactor(uint64_t decrFactor)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Stability\+Decr\+Factor (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{decr\+Factor}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a22f56fe8b03dda3e55e50c7ad1ceef70}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a22f56fe8b03dda3e55e50c7ad1ceef70}

\begin{DoxyCode}
349   \{
350     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a019b992bfd50af4ce7a3d7e13bc0c38a}{m\_stabilityDecrFactor} = decrFactor;
351   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Stability\+Incr\+Factor@{Set\+Stability\+Incr\+Factor}}
\index{Set\+Stability\+Incr\+Factor@{Set\+Stability\+Incr\+Factor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Stability\+Incr\+Factor(uint64\+\_\+t incr\+Factor)}{SetStabilityIncrFactor(uint64_t incrFactor)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Stability\+Incr\+Factor (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{incr\+Factor}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_acc5143f73a6a7afcb55d92287822d0f3}{}\label{classns3_1_1dsr_1_1DsrRouteCache_acc5143f73a6a7afcb55d92287822d0f3}

\begin{DoxyCode}
357   \{
358     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a4fb68651a11cfafbb027660a4b42734e}{m\_stabilityIncrFactor} = incrFactor;
359   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Sub\+Route@{Set\+Sub\+Route}}
\index{Set\+Sub\+Route@{Set\+Sub\+Route}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Sub\+Route(bool sub\+Route)}{SetSubRoute(bool subRoute)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Sub\+Route (
\begin{DoxyParamCaption}
\item[{bool}]{sub\+Route}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ab2f735c580ae565f66b394e816b65379}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ab2f735c580ae565f66b394e816b65379}

\begin{DoxyCode}
309   \{
310     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aea55a575fdabc0a2cdf7cde483549d1f}{m\_subRoute} = subRoute;
311   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Set\+Use\+Extends@{Set\+Use\+Extends}}
\index{Set\+Use\+Extends@{Set\+Use\+Extends}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Set\+Use\+Extends(\+Time use\+Extends)}{SetUseExtends(Time useExtends)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Set\+Use\+Extends (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{use\+Extends}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a91aa79ee0a12600154097f1e379154b6}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a91aa79ee0a12600154097f1e379154b6}

\begin{DoxyCode}
381   \{
382     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaa148075ecbecd459f1de62d7e43146a}{m\_useExtends} = useExtends;
383   \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Update\+Neighbor@{Update\+Neighbor}}
\index{Update\+Neighbor@{Update\+Neighbor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Update\+Neighbor(std\+::vector$<$ Ipv4\+Address $>$ node\+List, Time expire)}{UpdateNeighbor(std::vector< Ipv4Address > nodeList, Time expire)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Update\+Neighbor (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ {\bf Ipv4\+Address} $>$}]{node\+List, }
\item[{{\bf Time}}]{expire}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_acfa1d1263cce66806fa910f6a3de342a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_acfa1d1263cce66806fa910f6a3de342a}


Update expire time for entry with address addr, if it exists, else add new entry. 


\begin{DoxyCode}
1116 \{
1117   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1118   \textcolor{keywordflow}{for} (std::vector<Neighbor>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.end (); ++
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
1119     \{
1120       \textcolor{keywordflow}{for} (std::vector<Ipv4Address>::iterator j = nodeList.begin (); j != nodeList.end (); ++j)
1121         \{
1122           \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_neighborAddress == (*j))
1123             \{
1124               \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_expireTime
1125                 = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (expire + \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} (), \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_expireTime);
1126               \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_hardwareAddress == Mac48Address ())
1127                 \{
1128                   \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_hardwareAddress = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a37fef2c4a1dab164dca35aafd3ceff7b}{LookupMacAddress} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->m\_neighborAddress);
1129                 \}
1130               \textcolor{keywordflow}{return};
1131             \}
1132         \}
1133     \}
1134 
1135   Ipv4Address addr;
1136   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Open link to "} << addr);
1137   Neighbor neighbor (addr, \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a37fef2c4a1dab164dca35aafd3ceff7b}{LookupMacAddress} (addr), expire + 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ());
1138   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{m\_nb}.push\_back (neighbor);
1139   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8067511b3243452bd0af4c892d093168}{PurgeMac} ();
1140 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 41


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Update\+Net\+Graph@{Update\+Net\+Graph}}
\index{Update\+Net\+Graph@{Update\+Net\+Graph}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Update\+Net\+Graph()}{UpdateNetGraph()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Update\+Net\+Graph (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_afab8a17441a368141d8b766e296c7165}{}\label{classns3_1_1dsr_1_1DsrRouteCache_afab8a17441a368141d8b766e296c7165}


Update the Net Graph for the link and node cache has changed. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000016}{Todo}]May need to set different weight for different link here later \end{DoxyRefDesc}

\begin{DoxyCode}
501 \{
502   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
503   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}.clear ();
504   \textcolor{keywordflow}{for} (std::map<Link, DsrLinkStab>::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.begin (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
505     \{
506       \textcolor{comment}{// Here the weight is set as 1}
508 \textcolor{comment}{}      uint32\_t weight = 1;
509       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first.m\_low][\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first.m\_high] = weight;
510       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{m\_netGraph}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first.m\_high][\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->first.m\_low] = weight;
511     \}
512 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 42


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Update\+Route\+Entry@{Update\+Route\+Entry}}
\index{Update\+Route\+Entry@{Update\+Route\+Entry}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Update\+Route\+Entry(\+Ipv4\+Address dst)}{UpdateRouteEntry(Ipv4Address dst)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Update\+Route\+Entry (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{dst}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_acce562219fbd57b6fc9b6659f444d700}{}\label{classns3_1_1dsr_1_1DsrRouteCache_acce562219fbd57b6fc9b6659f444d700}


Update route cache entry if it has been recently used and successfully delivered the data packet. 


\begin{DoxyParams}{Parameters}
{\em dst} & destination address of the route \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true in success 
\end{DoxyReturn}

\begin{DoxyCode}
179 \{
180   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << dst);
181   std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::const\_iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} =
182     \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.find (dst);
183   \textcolor{keywordflow}{if} (i == \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.end ())
184     \{
185       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Failed to find the route entry for the destination "} << dst);
186       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
187     \}
188   \textcolor{keywordflow}{else}
189     \{
190       std::list<DsrRouteCacheEntry> rtVector = i->second;
191       DsrRouteCacheEntry successEntry = rtVector.front ();
192       successEntry.SetExpireTime (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a6a2bdf2226910392a4578cc82216acaf}{RouteCacheTimeout});
193       rtVector.pop\_front ();
194       rtVector.push\_back (successEntry);
195       rtVector.sort (\hyperlink{namespacens3_1_1dsr_a53bce2b069de9151de0203d96468684e}{CompareRoutesExpire});      \textcolor{comment}{// sort the route vector first}
196       \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.erase (dst);               \textcolor{comment}{// erase the entry first}
197       \textcolor{comment}{/*}
198 \textcolor{comment}{       * Save the new route cache along with the destination address in map}
199 \textcolor{comment}{       */}
200       std::pair<std::map<Ipv4Address, std::list<DsrRouteCacheEntry> >::iterator, \textcolor{keywordtype}{bool}> result =
201         \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{m\_sortedRoutes}.insert (std::make\_pair (dst, rtVector));
202       \textcolor{keywordflow}{return} result.second;
203     \}
204   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
205 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 43


\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Use\+Extends@{Use\+Extends}}
\index{Use\+Extends@{Use\+Extends}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Use\+Extends(\+Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+O\+R rt)}{UseExtends(DsrRouteCacheEntry::IP_VECTOR rt)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Use\+Extends (
\begin{DoxyParamCaption}
\item[{{\bf Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR}}]{rt}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a806392bc615a83d0b3e3f251ab9d1fdf}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a806392bc615a83d0b3e3f251ab9d1fdf}
When a link from the Route Cache is used in routing a packet originated or salvaged by that node, the stability metric for each of the two endpoint nodes of that link is incremented by the amount of time since that link was last used. When a link is used in a route chosen for a packet originated or salvaged by this node, the link\textquotesingle{}s lifetime is set to be at least Use\+Extends into the future Purge the link node cache first

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000019}{Todo}]remove after debug \end{DoxyRefDesc}


Increase the stability of the node cache 
\begin{DoxyCode}
612 \{
613   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
615   \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0a053ff3dc1d3872188e85e30d1afb7e}{PurgeLinkNode} ();
616   \textcolor{keywordflow}{if} (rt.size () < 2)
617     \{
618       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The route is too short"});
619       \textcolor{keywordflow}{return};
620     \}
621   \textcolor{keywordflow}{for} (DsrRouteCacheEntry::IP\_VECTOR::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = rt.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != rt.end () - 1; ++
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
622     \{
623       Link link (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}, *(\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} + 1));
624       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.find (link) != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}.end ())
625         \{
626           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}[link].GetLinkStability () < \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaa148075ecbecd459f1de62d7e43146a}{m\_useExtends})
627             \{
628               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}[link].SetLinkStability (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aaa148075ecbecd459f1de62d7e43146a}{m\_useExtends});
630               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The time of the link "} << \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{m\_linkCache}[link].
      GetLinkStability ().GetSeconds ());
631             \}
632         \}
633       \textcolor{keywordflow}{else}
634         \{
635           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"We cannot find a link in cache"});
636         \}
637     \}
639   \textcolor{keywordflow}{for} (DsrRouteCacheEntry::IP\_VECTOR::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = rt.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != rt.end (); ++
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
640     \{
641       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.find (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) != \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}.end ())
642         \{
643           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Increase the stability"});
644           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{m\_nodeCache}[*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}].GetNodeStability () <= \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{m\_initStability})
645             \{
646               \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_aa638a140150404cc82a5937bcc622395}{IncStability} (*\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
647             \}
648           \textcolor{keywordflow}{else}
649             \{
650               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"The node stability has already been increased"});
651             \}
652         \}
653     \}
654 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 44




\subsection{Member Data Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+ack\+Id\+Cache@{m\+\_\+ack\+Id\+Cache}}
\index{m\+\_\+ack\+Id\+Cache@{m\+\_\+ack\+Id\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+ack\+Id\+Cache}{m_ackIdCache}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Ipv4\+Address}, uint16\+\_\+t$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+ack\+Id\+Cache\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a5f4c097ed11c2c1447699214bc4be0e0}


The id cache to ensure all the ids are unique. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+arp@{m\+\_\+arp}}
\index{m\+\_\+arp@{m\+\_\+arp}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+arp}{m_arp}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Ptr}$<${\bf Arp\+Cache}$>$ $>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+arp}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a7e39c179e1fb9968ff73c11eac4a4605}


list of A\+RP cached to be used for layer 2 notifications processing 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+bad\+Link\+Lifetime@{m\+\_\+bad\+Link\+Lifetime}}
\index{m\+\_\+bad\+Link\+Lifetime@{m\+\_\+bad\+Link\+Lifetime}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+bad\+Link\+Lifetime}{m_badLinkLifetime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+bad\+Link\+Lifetime\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a7ab3daa7c72f3320d4eb70742a4c819d}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a7ab3daa7c72f3320d4eb70742a4c819d}


The time for which the neighboring node is put into the blacklist. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+best\+Routes\+Table\+\_\+link@{m\+\_\+best\+Routes\+Table\+\_\+link}}
\index{m\+\_\+best\+Routes\+Table\+\_\+link@{m\+\_\+best\+Routes\+Table\+\_\+link}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+best\+Routes\+Table\+\_\+link}{m_bestRoutesTable_link}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Ipv4\+Address}, {\bf Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR}$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+best\+Routes\+Table\+\_\+link\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aeff05d869cb32e13605d4792a0a0d841}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aeff05d869cb32e13605d4792a0a0d841}


for link route cache 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+delay@{m\+\_\+delay}}
\index{m\+\_\+delay@{m\+\_\+delay}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+delay}{m_delay}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+delay}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aa3ab752671f0fabc953a166e265eab7c}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aa3ab752671f0fabc953a166e265eab7c}


This timeout deals with the passive ack. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+handle\+Link\+Failure@{m\+\_\+handle\+Link\+Failure}}
\index{m\+\_\+handle\+Link\+Failure@{m\+\_\+handle\+Link\+Failure}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+handle\+Link\+Failure}{m_handleLinkFailure}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Callback}$<$void, {\bf Ipv4\+Address}, uint8\+\_\+t $>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+handle\+Link\+Failure}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ac784b52b7d230343a1c7c236dfe91aa6}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ac784b52b7d230343a1c7c236dfe91aa6}


link failure callback 

The following code handles link-\/layer acks \index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+init\+Stability@{m\+\_\+init\+Stability}}
\index{m\+\_\+init\+Stability@{m\+\_\+init\+Stability}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+init\+Stability}{m_initStability}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+init\+Stability\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a33fe450058c846a3ebdd386ad5a11208}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+is\+Link\+Cache@{m\+\_\+is\+Link\+Cache}}
\index{m\+\_\+is\+Link\+Cache@{m\+\_\+is\+Link\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+is\+Link\+Cache}{m_isLinkCache}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+is\+Link\+Cache\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aa30aef1d07ad115a3697a5ddaaaa755a}


Check if the route is using path cache or link cache. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+link\+Cache@{m\+\_\+link\+Cache}}
\index{m\+\_\+link\+Cache@{m\+\_\+link\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+link\+Cache}{m_linkCache}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Link}, {\bf Dsr\+Link\+Stab}$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+link\+Cache\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a0cce90def8da7bd0953a59cf1cfd2a66}


The data structure to store link info. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+max\+Cache\+Len@{m\+\_\+max\+Cache\+Len}}
\index{m\+\_\+max\+Cache\+Len@{m\+\_\+max\+Cache\+Len}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+max\+Cache\+Len}{m_maxCacheLen}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+max\+Cache\+Len\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a7c2e4d18d325c59346bde655057682c2}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a7c2e4d18d325c59346bde655057682c2}


The maximum number of packets that we allow a routing protocol to buffer. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+max\+Entries\+Each\+Dst@{m\+\_\+max\+Entries\+Each\+Dst}}
\index{m\+\_\+max\+Entries\+Each\+Dst@{m\+\_\+max\+Entries\+Each\+Dst}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+max\+Entries\+Each\+Dst}{m_maxEntriesEachDst}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+max\+Entries\+Each\+Dst\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aa6b2bd241ac25da54f0ee83d6a9946be}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aa6b2bd241ac25da54f0ee83d6a9946be}


number of entries for each destination 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+min\+Life\+Time@{m\+\_\+min\+Life\+Time}}
\index{m\+\_\+min\+Life\+Time@{m\+\_\+min\+Life\+Time}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+min\+Life\+Time}{m_minLifeTime}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+min\+Life\+Time\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_ab1fe273b756ac95e21cf000728e33d12}{}\label{classns3_1_1dsr_1_1DsrRouteCache_ab1fe273b756ac95e21cf000728e33d12}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+nb@{m\+\_\+nb}}
\index{m\+\_\+nb@{m\+\_\+nb}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+nb}{m_nb}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Neighbor}$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+nb}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aaab1b839f2609fdb6545124dcde67ea1}


vector of entries 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+net\+Graph@{m\+\_\+net\+Graph}}
\index{m\+\_\+net\+Graph@{m\+\_\+net\+Graph}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+net\+Graph}{m_netGraph}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Ipv4\+Address}, std\+::map$<${\bf Ipv4\+Address}, uint32\+\_\+t$>$ $>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+net\+Graph\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a001b3261dc9f91bf3713b73c32206ee6}
Current network graph state for this node, double is weight, which is calculated by the node information and link information, any time some changes of link cache and node cache change the weight and then recompute the best choice for each node \index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+node\+Cache@{m\+\_\+node\+Cache}}
\index{m\+\_\+node\+Cache@{m\+\_\+node\+Cache}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+node\+Cache}{m_nodeCache}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Ipv4\+Address}, {\bf Dsr\+Node\+Stab}$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+node\+Cache\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a2ad918da9614405b305be6c18ed04502}


The data structure to store node info. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+ntimer@{m\+\_\+ntimer}}
\index{m\+\_\+ntimer@{m\+\_\+ntimer}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+ntimer}{m_ntimer}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Timer} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+ntimer}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}{}\label{classns3_1_1dsr_1_1DsrRouteCache_adc0e73e78b967981ebb4fc79723517c2}


\hyperlink{classns3_1_1Timer}{Timer} for neighbor\textquotesingle{}s list. Schedule \hyperlink{classns3_1_1dsr_1_1DsrRouteCache_a33ac58361cc0e1cbe1b561db26f5dc82}{Purge()}. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+route\+Entry\+Vector@{m\+\_\+route\+Entry\+Vector}}
\index{m\+\_\+route\+Entry\+Vector@{m\+\_\+route\+Entry\+Vector}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+route\+Entry\+Vector}{m_routeEntryVector}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf route\+Entry\+Vector} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+route\+Entry\+Vector\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a28e5d3670fcebc5a5b3b437f5e8be34a}


Define the route vector. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+sorted\+Routes@{m\+\_\+sorted\+Routes}}
\index{m\+\_\+sorted\+Routes@{m\+\_\+sorted\+Routes}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+sorted\+Routes}{m_sortedRoutes}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<${\bf Ipv4\+Address}, {\bf route\+Entry\+Vector}$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+sorted\+Routes\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a8d3530713c7152dbe42d0b616d9c1d96}


Map the ipv4\+Address to route entry vector. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+stability\+Decr\+Factor@{m\+\_\+stability\+Decr\+Factor}}
\index{m\+\_\+stability\+Decr\+Factor@{m\+\_\+stability\+Decr\+Factor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+stability\+Decr\+Factor}{m_stabilityDecrFactor}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+stability\+Decr\+Factor\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a019b992bfd50af4ce7a3d7e13bc0c38a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a019b992bfd50af4ce7a3d7e13bc0c38a}
Define the parameters for link cache type \index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+stability\+Incr\+Factor@{m\+\_\+stability\+Incr\+Factor}}
\index{m\+\_\+stability\+Incr\+Factor@{m\+\_\+stability\+Incr\+Factor}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+stability\+Incr\+Factor}{m_stabilityIncrFactor}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+stability\+Incr\+Factor\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a4fb68651a11cfafbb027660a4b42734e}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a4fb68651a11cfafbb027660a4b42734e}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+sub\+Route@{m\+\_\+sub\+Route}}
\index{m\+\_\+sub\+Route@{m\+\_\+sub\+Route}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+sub\+Route}{m_subRoute}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+sub\+Route\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aea55a575fdabc0a2cdf7cde483549d1f}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aea55a575fdabc0a2cdf7cde483549d1f}


Check if save the sub route entries or not. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+tx\+Error\+Callback@{m\+\_\+tx\+Error\+Callback}}
\index{m\+\_\+tx\+Error\+Callback@{m\+\_\+tx\+Error\+Callback}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+tx\+Error\+Callback}{m_txErrorCallback}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Callback}$<$void, {\bf Wifi\+Mac\+Header} const \&$>$ ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+tx\+Error\+Callback}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a797049d1a514f43ed1fc286a0fd7649f}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a797049d1a514f43ed1fc286a0fd7649f}


TX error callback. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+use\+Extends@{m\+\_\+use\+Extends}}
\index{m\+\_\+use\+Extends@{m\+\_\+use\+Extends}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+use\+Extends}{m_useExtends}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+use\+Extends\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_aaa148075ecbecd459f1de62d7e43146a}{}\label{classns3_1_1dsr_1_1DsrRouteCache_aaa148075ecbecd459f1de62d7e43146a}
\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!m\+\_\+vector@{m\+\_\+vector}}
\index{m\+\_\+vector@{m\+\_\+vector}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{m\+\_\+vector}{m_vector}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Dsr\+Route\+Cache\+Entry\+::\+I\+P\+\_\+\+V\+E\+C\+T\+OR} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::m\+\_\+vector\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a8f89664e7c7f0b9027462066f301f460}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a8f89664e7c7f0b9027462066f301f460}


The route vector to save the ip addresses for intermediate nodes. 

\index{ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}!Route\+Cache\+Timeout@{Route\+Cache\+Timeout}}
\index{Route\+Cache\+Timeout@{Route\+Cache\+Timeout}!ns3\+::dsr\+::\+Dsr\+Route\+Cache@{ns3\+::dsr\+::\+Dsr\+Route\+Cache}}
\subsubsection[{\texorpdfstring{Route\+Cache\+Timeout}{RouteCacheTimeout}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::dsr\+::\+Dsr\+Route\+Cache\+::\+Route\+Cache\+Timeout\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrRouteCache_a6a2bdf2226910392a4578cc82216acaf}{}\label{classns3_1_1dsr_1_1DsrRouteCache_a6a2bdf2226910392a4578cc82216acaf}


The maximum period of time that dsr is allowed to for an unused route. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
dsr/model/\hyperlink{dsr-rcache_8h}{dsr-\/rcache.\+h}\item 
dsr/model/\hyperlink{dsr-rcache_8cc}{dsr-\/rcache.\+cc}\end{DoxyCompactItemize}
