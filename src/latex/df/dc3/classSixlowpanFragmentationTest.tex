\hypertarget{classSixlowpanFragmentationTest}{}\section{Sixlowpan\+Fragmentation\+Test Class Reference}
\label{classSixlowpanFragmentationTest}\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}


6\+Lo\+W\+P\+AN Fragmentation Test  




Inheritance diagram for Sixlowpan\+Fragmentation\+Test\+:
% FIG 0


Collaboration diagram for Sixlowpan\+Fragmentation\+Test\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classSixlowpanFragmentationTest_ae85beebff8e7d4f8c1e108beb17df274}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
\hyperlink{classSixlowpanFragmentationTest_a9596a1aafaa4ef82bfcff50ea07d875e}{Sixlowpan\+Fragmentation\+Test} ()
\item 
\hyperlink{classSixlowpanFragmentationTest_adf5a60cb165d64f9d9f40065c897d192}{$\sim$\+Sixlowpan\+Fragmentation\+Test} ()
\item 
void \hyperlink{classSixlowpanFragmentationTest_a2b70baf58418b5e3c1daec1d77f06a84}{Start\+Server} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ server\+Node)
\item 
void \hyperlink{classSixlowpanFragmentationTest_a8c6d98a798be3bd6eebfda06691a5e9e}{Handle\+Read\+Server} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\item 
void \hyperlink{classSixlowpanFragmentationTest_a24ee0242d6fa09b786a3280b20607445}{Start\+Client} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ client\+Node)
\item 
void \hyperlink{classSixlowpanFragmentationTest_aaa094eb5910c6a8b462a6c6678258713}{Handle\+Read\+Client} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\item 
void \hyperlink{classSixlowpanFragmentationTest_a74e986c4c910d19a1d6b16866f712c06}{Handle\+Read\+Icmp\+Client} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6\+Address} icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)
\item 
void \hyperlink{classSixlowpanFragmentationTest_a6c1d0fec44562f79a8a9b78385d4d7d4}{Set\+Fill} (uint8\+\_\+t $\ast$fill, uint32\+\_\+t fill\+Size, uint32\+\_\+t data\+Size)
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classSixlowpanFragmentationTest_abf4cbe3df8958b6275ef164cb6a7aea5}{Send\+Client} (void)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classSixlowpanFragmentationTest_a0931362b2249617e59dde62b9a8d41dc}{m\+\_\+sent\+Packet\+Client}
\begin{DoxyCompactList}\small\item\em Packet sent by client. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classSixlowpanFragmentationTest_aef2a91785b934e5a820b0286dbbec514}{m\+\_\+received\+Packet\+Client}
\begin{DoxyCompactList}\small\item\em Packet received by the client. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\+\_\+received\+Packet\+Server}
\begin{DoxyCompactList}\small\item\em packet received by the server. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ \hyperlink{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{m\+\_\+socket\+Server}
\begin{DoxyCompactList}\small\item\em Socket on the server. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ \hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\+\_\+socket\+Client}
\begin{DoxyCompactList}\small\item\em Socket on the client. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{m\+\_\+data\+Size}
\begin{DoxyCompactList}\small\item\em Size of the data (if any). \end{DoxyCompactList}\item 
uint8\+\_\+t $\ast$ \hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\+\_\+data}
\begin{DoxyCompactList}\small\item\em Data to be carried in the packet. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classSixlowpanFragmentationTest_abf8b0d59da8d99e941ec337a40f5548a}{m\+\_\+size}
\begin{DoxyCompactList}\small\item\em Size of the packet if no data has been provided. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classSixlowpanFragmentationTest_a0754fe2c0e0ade8b02cfe76ff5125171}{m\+\_\+icmp\+Type}
\begin{DoxyCompactList}\small\item\em I\+C\+MP type. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classSixlowpanFragmentationTest_a4fe3e1f6ca813a3972b675c4250eb154}{m\+\_\+icmp\+Code}
\begin{DoxyCompactList}\small\item\em I\+C\+MP code. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
6\+Lo\+W\+P\+AN Fragmentation Test 

\subsection{Constructor \& Destructor Documentation}
\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Sixlowpan\+Fragmentation\+Test()}{SixlowpanFragmentationTest()}}]{\setlength{\rightskip}{0pt plus 5cm}Sixlowpan\+Fragmentation\+Test\+::\+Sixlowpan\+Fragmentation\+Test (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_a9596a1aafaa4ef82bfcff50ea07d875e}{}\label{classSixlowpanFragmentationTest_a9596a1aafaa4ef82bfcff50ea07d875e}

\begin{DoxyCode}
124   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Verify the 6LoWPAN protocol fragmentation and reassembly"})
125 \{
126   \hyperlink{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{m\_socketServer} = 0;
127   \hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data} = 0;
128   \hyperlink{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{m\_dataSize} = 0;
129   \hyperlink{classSixlowpanFragmentationTest_abf8b0d59da8d99e941ec337a40f5548a}{m\_size} = 0;
130   \hyperlink{classSixlowpanFragmentationTest_a0754fe2c0e0ade8b02cfe76ff5125171}{m\_icmpType} = 0;
131   \hyperlink{classSixlowpanFragmentationTest_a4fe3e1f6ca813a3972b675c4250eb154}{m\_icmpCode} = 0;
132 \}
\end{DoxyCode}
\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!````~Sixlowpan\+Fragmentation\+Test@{$\sim$\+Sixlowpan\+Fragmentation\+Test}}
\index{````~Sixlowpan\+Fragmentation\+Test@{$\sim$\+Sixlowpan\+Fragmentation\+Test}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{$\sim$\+Sixlowpan\+Fragmentation\+Test()}{~SixlowpanFragmentationTest()}}]{\setlength{\rightskip}{0pt plus 5cm}Sixlowpan\+Fragmentation\+Test\+::$\sim$\+Sixlowpan\+Fragmentation\+Test (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_adf5a60cb165d64f9d9f40065c897d192}{}\label{classSixlowpanFragmentationTest_adf5a60cb165d64f9d9f40065c897d192}

\begin{DoxyCode}
135 \{
136   \textcolor{keywordflow}{if} ( \hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data} )
137     \{
138       \textcolor{keyword}{delete}[] \hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data};
139     \}
140   \hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data} = 0;
141   \hyperlink{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{m\_dataSize} = 0;
142 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Sixlowpan\+Fragmentation\+Test\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classSixlowpanFragmentationTest_ae85beebff8e7d4f8c1e108beb17df274}{}\label{classSixlowpanFragmentationTest_ae85beebff8e7d4f8c1e108beb17df274}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
264 \{
265   \textcolor{comment}{// Create topology}
266   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
267   internet.\hyperlink{classns3_1_1InternetStackHelper_a10e2a35f410d0d1c90d979542c8bfd6e}{SetIpv4StackInstall} (\textcolor{keyword}{false});
268   Packet::EnablePrinting ();
269 
270   \textcolor{comment}{// Receiver Node}
271   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} serverNode = CreateObject<Node> ();
272   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (serverNode);
273   \hyperlink{classns3_1_1Ptr}{Ptr<SimpleNetDevice>} serverDev;
274   \hyperlink{classns3_1_1Ptr}{Ptr<BinaryErrorModel>} serverDevErrorModel = CreateObject<BinaryErrorModel> ();
275   \{
276     \hyperlink{classns3_1_1Ptr}{Ptr<Icmpv6L4Protocol>} icmpv6l4 = serverNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1Icmpv6L4Protocol}{Icmpv6L4Protocol}> ();
277     icmpv6l4->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"DAD"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
278 
279     serverDev = CreateObject<SimpleNetDevice> ();
280     serverDev->\hyperlink{classns3_1_1SimpleNetDevice_a968ef3e7318bac29d5f1d7d977029af4}{SetAddress} (Mac48Address::ConvertFrom (Mac48Address::Allocate ()));
281     serverDev->\hyperlink{classns3_1_1SimpleNetDevice_ab41676e626a91832291bcfbd55ee454a}{SetMtu} (1500);
282     serverDev->\hyperlink{classns3_1_1SimpleNetDevice_a8674cbc75fa8504bbf6c27b2ca1f5129}{SetReceiveErrorModel} (serverDevErrorModel);
283     serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
284     serverNode->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (serverDev);
285 
286     \hyperlink{classns3_1_1Ptr}{Ptr<SixLowPanNetDevice>} serverSix = CreateObject<SixLowPanNetDevice> ();
287     serverSix->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"ForceEtherType"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}) );
288     serverNode->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (serverSix);
289     serverSix->\hyperlink{classns3_1_1SixLowPanNetDevice_a81c74a5dc06e3fbad1a8b1c59d1f68fa}{SetNetDevice} (serverDev);
290 
291     \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6>} ipv6 = serverNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv6}{Ipv6}> ();
292     ipv6->\hyperlink{classns3_1_1Ipv6_a4fd7da82c16b8abf9ca15f982918e6a4}{AddInterface} (serverDev);
293     uint32\_t netdev\_idx = ipv6->\hyperlink{classns3_1_1Ipv6_a4fd7da82c16b8abf9ca15f982918e6a4}{AddInterface} (serverSix);
294     \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:0100::1"}), \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
295     ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (netdev\_idx, ipv6Addr);
296     ipv6->\hyperlink{classns3_1_1Ipv6_a8e61d85ec7fd342ed38fef2d040ed1b9}{SetUp} (netdev\_idx);
297 
298   \}
299   \hyperlink{classSixlowpanFragmentationTest_a2b70baf58418b5e3c1daec1d77f06a84}{StartServer} (serverNode);
300 
301   \textcolor{comment}{// Sender Node}
302   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} clientNode = CreateObject<Node> ();
303   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (clientNode);
304   \hyperlink{classns3_1_1Ptr}{Ptr<SimpleNetDevice>} clientDev;
305   \hyperlink{classns3_1_1Ptr}{Ptr<BinaryErrorModel>} clientDevErrorModel = CreateObject<BinaryErrorModel> ();
306   \{
307     \hyperlink{classns3_1_1Ptr}{Ptr<Icmpv6L4Protocol>} icmpv6l4 = clientNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1Icmpv6L4Protocol}{Icmpv6L4Protocol}> ();
308     icmpv6l4->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"DAD"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{false}));
309 
310     clientDev = CreateObject<SimpleNetDevice> ();
311     clientDev->\hyperlink{classns3_1_1SimpleNetDevice_a968ef3e7318bac29d5f1d7d977029af4}{SetAddress} (Mac48Address::ConvertFrom (Mac48Address::Allocate ()));
312     clientDev->\hyperlink{classns3_1_1SimpleNetDevice_ab41676e626a91832291bcfbd55ee454a}{SetMtu} (150);
313     clientDev->\hyperlink{classns3_1_1SimpleNetDevice_a8674cbc75fa8504bbf6c27b2ca1f5129}{SetReceiveErrorModel} (clientDevErrorModel);
314     clientDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
315     clientNode->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (clientDev);
316 
317     \hyperlink{classns3_1_1Ptr}{Ptr<SixLowPanNetDevice>} clientSix = CreateObject<SixLowPanNetDevice> ();
318     clientSix->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"ForceEtherType"}, \hyperlink{classns3_1_1BooleanValue}{BooleanValue} (\textcolor{keyword}{true}) );
319     clientNode->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (clientSix);
320     clientSix->\hyperlink{classns3_1_1SixLowPanNetDevice_a81c74a5dc06e3fbad1a8b1c59d1f68fa}{SetNetDevice} (clientDev);
321 
322     \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6>} ipv6 = clientNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv6}{Ipv6}> ();
323     ipv6->\hyperlink{classns3_1_1Ipv6_a4fd7da82c16b8abf9ca15f982918e6a4}{AddInterface} (clientDev);
324     uint32\_t netdev\_idx = ipv6->\hyperlink{classns3_1_1Ipv6_a4fd7da82c16b8abf9ca15f982918e6a4}{AddInterface} (clientSix);
325     \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:0100::2"}), \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (64));
326     ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (netdev\_idx, ipv6Addr);
327     ipv6->\hyperlink{classns3_1_1Ipv6_a8e61d85ec7fd342ed38fef2d040ed1b9}{SetUp} (netdev\_idx);
328   \}
329   \hyperlink{classSixlowpanFragmentationTest_a24ee0242d6fa09b786a3280b20607445}{StartClient} (clientNode);
330 
331   \textcolor{comment}{// link the two nodes}
332   \hyperlink{classns3_1_1Ptr}{Ptr<ErrorChannel>} channel = CreateObject<ErrorChannel> ();
333   serverDev->\hyperlink{classns3_1_1SimpleNetDevice_af9e9828ad584b5ba538f18f645f162e0}{SetChannel} (channel);
334   clientDev->\hyperlink{classns3_1_1SimpleNetDevice_af9e9828ad584b5ba538f18f645f162e0}{SetChannel} (channel);
335 
336 
337   \textcolor{comment}{// some small packets, some rather big ones}
338   uint32\_t packetSizes[5] = \{200, 300, 400, 500, 600\};
339 
340   \textcolor{comment}{// using the alphabet}
341   uint8\_t fillData[78];
342   \textcolor{keywordflow}{for} ( uint32\_t k = 48; k <= 125; k++ )
343     \{
344       fillData[k - 48] = k;
345     \}
346 
347   \textcolor{comment}{// First test: normal channel, no errors, no delays}
348   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
349     \{
350       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
351 
352       \hyperlink{classSixlowpanFragmentationTest_a6c1d0fec44562f79a8a9b78385d4d7d4}{SetFill} (fillData, 78, packetSize);
353 
354       \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer} = Create<Packet> ();
355       Simulator::ScheduleWithContext (\hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
356                                       &\hyperlink{classSixlowpanFragmentationTest_abf4cbe3df8958b6275ef164cb6a7aea5}{SixlowpanFragmentationTest::SendClient}
      , \textcolor{keyword}{this});
357       Simulator::Run ();
358 
359       uint8\_t recvBuffer[65000];
360 
361       uint16\_t recvSize = \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
362 
363       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (recvSize, packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}],
364                              \textcolor{stringliteral}{"Packet size not correct: recvSize: "} << recvSize << \textcolor{stringliteral}{" packetSizes["} << i << \textcolor{stringliteral}{"
      ]: "} << packetSizes[i] );
365 
366       \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (recvBuffer, 65000);
367       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (memcmp (\hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data}, recvBuffer, 
      \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()),
368                              0, \textcolor{stringliteral}{"Packet content differs"});
369     \}
370 
371   \textcolor{comment}{// Second test: normal channel, no errors, delays each 2 packets.}
372   \textcolor{comment}{// Each other fragment will arrive out-of-order.}
373   \textcolor{comment}{// The packets should be received correctly since reassembly will reorder the fragments.}
374   channel->\hyperlink{classns3_1_1ErrorChannel_aa30b3b76ca1fc19aa68e28bd21431131}{SetJumpingMode} (\textcolor{keyword}{true});
375   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
376     \{
377       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
378 
379       \hyperlink{classSixlowpanFragmentationTest_a6c1d0fec44562f79a8a9b78385d4d7d4}{SetFill} (fillData, 78, packetSize);
380 
381       \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer} = Create<Packet> ();
382       Simulator::ScheduleWithContext (\hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
383                                       &\hyperlink{classSixlowpanFragmentationTest_abf4cbe3df8958b6275ef164cb6a7aea5}{SixlowpanFragmentationTest::SendClient}
      , \textcolor{keyword}{this});
384       Simulator::Run ();
385 
386       uint8\_t recvBuffer[65000];
387 
388       uint16\_t recvSize = \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
389 
390       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (recvSize, packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}],
391                              \textcolor{stringliteral}{"Packet size not correct: recvSize: "} << recvSize << \textcolor{stringliteral}{" packetSizes["} << i << \textcolor{stringliteral}{"
      ]: "} << packetSizes[i] );
392 
393       \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (recvBuffer, 65000);
394       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (memcmp (\hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data}, recvBuffer, 
      \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()),
395                              0, \textcolor{stringliteral}{"Packet content differs"});
396     \}
397   channel->\hyperlink{classns3_1_1ErrorChannel_aa30b3b76ca1fc19aa68e28bd21431131}{SetJumpingMode} (\textcolor{keyword}{false});
398 
399 
400   \textcolor{comment}{// Third test: normal channel, some packets are duplicate.}
401   \textcolor{comment}{// The duplicate fragments should be discarded, so no error should be fired.}
402   channel->\hyperlink{classns3_1_1ErrorChannel_ac9d7a41e47d7b4d505f776d289889eaf}{SetDuplicateMode} (\textcolor{keyword}{true});
403   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 1; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
404     \{
405       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
406 
407       \hyperlink{classSixlowpanFragmentationTest_a6c1d0fec44562f79a8a9b78385d4d7d4}{SetFill} (fillData, 78, packetSize);
408 
409       \textcolor{comment}{// reset the model, we want to receive the very first fragment.}
410       serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a6b7cbe56c27562e5ba6daf2f04bcd282}{Reset} ();
411 
412       \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer} = Create<Packet> ();
413       \hyperlink{classSixlowpanFragmentationTest_a0754fe2c0e0ade8b02cfe76ff5125171}{m\_icmpType} = 0;
414       \hyperlink{classSixlowpanFragmentationTest_a4fe3e1f6ca813a3972b675c4250eb154}{m\_icmpCode} = 0;
415       Simulator::ScheduleWithContext (\hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
416                                       &\hyperlink{classSixlowpanFragmentationTest_abf4cbe3df8958b6275ef164cb6a7aea5}{SixlowpanFragmentationTest::SendClient}
      , \textcolor{keyword}{this});
417       Simulator::Run ();
418 
419       uint8\_t recvBuffer[65000];
420 
421       uint16\_t recvSize = \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
422 
423       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (recvSize, packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}],
424                              \textcolor{stringliteral}{"Packet size not correct: recvSize: "} << recvSize << \textcolor{stringliteral}{" packetSizes["} << i << \textcolor{stringliteral}{"
      ]: "} << packetSizes[i] );
425 
426       \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (recvBuffer, 65000);
427       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (memcmp (\hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data}, recvBuffer, 
      \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()),
428                              0, \textcolor{stringliteral}{"Packet content differs"});
429     \}
430   channel->\hyperlink{classns3_1_1ErrorChannel_ac9d7a41e47d7b4d505f776d289889eaf}{SetDuplicateMode} (\textcolor{keyword}{false});
431 
432   \textcolor{comment}{// Fourth test: normal channel, some errors, no delays.}
433   \textcolor{comment}{// The reassembly procedure does NOT fire any ICMP, so we do not expect any reply from the server.}
434   \textcolor{comment}{// Client -> Server : errors enabled}
435   \textcolor{comment}{// Server -> Client : errors disabled}
436   clientDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
437   serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a571d61a2fc9ce2d30df95da7e87b763c}{Enable} ();
438   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 1; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
439     \{
440       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
441 
442       \hyperlink{classSixlowpanFragmentationTest_a6c1d0fec44562f79a8a9b78385d4d7d4}{SetFill} (fillData, 78, packetSize);
443 
444       \textcolor{comment}{// reset the model, we want to receive the very first fragment.}
445       serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a6b7cbe56c27562e5ba6daf2f04bcd282}{Reset} ();
446 
447       \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer} = Create<Packet> ();
448       m\_icmpType = 0;
449       \hyperlink{classSixlowpanFragmentationTest_a4fe3e1f6ca813a3972b675c4250eb154}{m\_icmpCode} = 0;
450       Simulator::ScheduleWithContext (\hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
451                                       &\hyperlink{classSixlowpanFragmentationTest_abf4cbe3df8958b6275ef164cb6a7aea5}{SixlowpanFragmentationTest::SendClient}
      , \textcolor{keyword}{this});
452       Simulator::Run ();
453 
454       uint16\_t recvSize = \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
455 
456       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} ((recvSize == 0), \textcolor{keyword}{true}, \textcolor{stringliteral}{"Server got a packet, something
       wrong"});
457       \textcolor{comment}{// Note that a 6LoWPAN fragment timeout does NOT send any ICMPv6.}
458     \}
459 
460   Simulator::Destroy ();
461 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Handle\+Read\+Client@{Handle\+Read\+Client}}
\index{Handle\+Read\+Client@{Handle\+Read\+Client}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Handle\+Read\+Client(\+Ptr$<$ Socket $>$ socket)}{HandleReadClient(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Sixlowpan\+Fragmentation\+Test\+::\+Handle\+Read\+Client (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_aaa094eb5910c6a8b462a6c6678258713}{}\label{classSixlowpanFragmentationTest_aaa094eb5910c6a8b462a6c6678258713}
Handles incoming packets in the client. 
\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
197 \{
198   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} packet;
199   \hyperlink{classns3_1_1Address}{Address} \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from};
200   \textcolor{keywordflow}{while} ((packet = socket->\hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{RecvFrom} (from)))
201     \{
202       \textcolor{keywordflow}{if} (Inet6SocketAddress::IsMatchingType (from))
203         \{
204           \hyperlink{classSixlowpanFragmentationTest_aef2a91785b934e5a820b0286dbbec514}{m\_receivedPacketClient} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
205         \}
206     \}
207 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Handle\+Read\+Icmp\+Client@{Handle\+Read\+Icmp\+Client}}
\index{Handle\+Read\+Icmp\+Client@{Handle\+Read\+Icmp\+Client}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Handle\+Read\+Icmp\+Client(\+Ipv6\+Address icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)}{HandleReadIcmpClient(Ipv6Address icmpSource, uint8_t icmpTtl, uint8_t icmpType, uint8_t icmpCode, uint32_t icmpInfo)}}]{\setlength{\rightskip}{0pt plus 5cm}void Sixlowpan\+Fragmentation\+Test\+::\+Handle\+Read\+Icmp\+Client (
\begin{DoxyParamCaption}
\item[{{\bf Ipv6\+Address}}]{icmp\+Source, }
\item[{uint8\+\_\+t}]{icmp\+Ttl, }
\item[{uint8\+\_\+t}]{icmp\+Type, }
\item[{uint8\+\_\+t}]{icmp\+Code, }
\item[{uint32\+\_\+t}]{icmp\+Info}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_a74e986c4c910d19a1d6b16866f712c06}{}\label{classSixlowpanFragmentationTest_a74e986c4c910d19a1d6b16866f712c06}
Handles incoming I\+C\+MP packets in the client. 
\begin{DoxyParams}{Parameters}
{\em icmp\+Source} & I\+C\+MP sender address. \\
\hline
{\em icmp\+Ttl} & I\+C\+MP T\+TL. \\
\hline
{\em icmp\+Type} & I\+C\+MP type. \\
\hline
{\em icmp\+Code} & I\+C\+MP code. \\
\hline
{\em icmp\+Info} & I\+C\+MP info. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
213 \{
214   \hyperlink{classSixlowpanFragmentationTest_a0754fe2c0e0ade8b02cfe76ff5125171}{m\_icmpType} = icmpType;
215   \hyperlink{classSixlowpanFragmentationTest_a4fe3e1f6ca813a3972b675c4250eb154}{m\_icmpCode} = icmpCode;
216 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 5


\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Handle\+Read\+Server@{Handle\+Read\+Server}}
\index{Handle\+Read\+Server@{Handle\+Read\+Server}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Handle\+Read\+Server(\+Ptr$<$ Socket $>$ socket)}{HandleReadServer(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Sixlowpan\+Fragmentation\+Test\+::\+Handle\+Read\+Server (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_a8c6d98a798be3bd6eebfda06691a5e9e}{}\label{classSixlowpanFragmentationTest_a8c6d98a798be3bd6eebfda06691a5e9e}
Handles incoming packets in the server. 
\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
163 \{
164   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} packet;
165   \hyperlink{classns3_1_1Address}{Address} \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from};
166   \textcolor{keywordflow}{while} ((packet = socket->\hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{RecvFrom} (from)))
167     \{
168       \textcolor{keywordflow}{if} (Inet6SocketAddress::IsMatchingType (from))
169         \{
170           packet->\hyperlink{classns3_1_1Packet_a6c7bc5d1067c1d7fbd0fd70289182e8b}{RemoveAllPacketTags} ();
171           packet->\hyperlink{classns3_1_1Packet_a083f54c9db31aeff30551a9e20fcda42}{RemoveAllByteTags} ();
172 
173           \hyperlink{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{m\_receivedPacketServer} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
174         \}
175     \}
176 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Send\+Client@{Send\+Client}}
\index{Send\+Client@{Send\+Client}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Send\+Client(void)}{SendClient(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Packet} $>$ Sixlowpan\+Fragmentation\+Test\+::\+Send\+Client (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_abf4cbe3df8958b6275ef164cb6a7aea5}{}\label{classSixlowpanFragmentationTest_abf4cbe3df8958b6275ef164cb6a7aea5}
Send a packet to the server. \begin{DoxyReturn}{Returns}
The packet sent. 
\end{DoxyReturn}

\begin{DoxyCode}
247 \{
248   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p};
249   \textcolor{keywordflow}{if} (\hyperlink{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{m\_dataSize})
250     \{
251       p = Create<Packet> (\hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data}, \hyperlink{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{m\_dataSize});
252     \}
253   \textcolor{keywordflow}{else}
254     \{
255       p = Create<Packet> (\hyperlink{classSixlowpanFragmentationTest_abf8b0d59da8d99e941ec337a40f5548a}{m\_size});
256     \}
257   \hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_a036901c8f485fe5b6eab93b7f2ec289d}{Send} (p);
258 
259   \textcolor{keywordflow}{return} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p};
260 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Set\+Fill@{Set\+Fill}}
\index{Set\+Fill@{Set\+Fill}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Set\+Fill(uint8\+\_\+t $\ast$fill, uint32\+\_\+t fill\+Size, uint32\+\_\+t data\+Size)}{SetFill(uint8_t *fill, uint32_t fillSize, uint32_t dataSize)}}]{\setlength{\rightskip}{0pt plus 5cm}void Sixlowpan\+Fragmentation\+Test\+::\+Set\+Fill (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{fill, }
\item[{uint32\+\_\+t}]{fill\+Size, }
\item[{uint32\+\_\+t}]{data\+Size}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_a6c1d0fec44562f79a8a9b78385d4d7d4}{}\label{classSixlowpanFragmentationTest_a6c1d0fec44562f79a8a9b78385d4d7d4}
Set the packet optional content. 
\begin{DoxyParams}{Parameters}
{\em fill} & Pointer to an array of data. \\
\hline
{\em fill\+Size} & Size of the array of data. \\
\hline
{\em data\+Size} & Size of the packet -\/ if fill\+Size is less than data\+Size, the data is repeated. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
220 \{
221   \textcolor{keywordflow}{if} (dataSize != \hyperlink{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{m\_dataSize})
222     \{
223       \textcolor{keyword}{delete} [] \hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data};
224       \hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data} = \textcolor{keyword}{new} uint8\_t [dataSize];
225       \hyperlink{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{m\_dataSize} = dataSize;
226     \}
227 
228   \textcolor{keywordflow}{if} (fillSize >= dataSize)
229     \{
230       memcpy (\hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data}, fill, dataSize);
231       \textcolor{keywordflow}{return};
232     \}
233 
234   uint32\_t filled = 0;
235   \textcolor{keywordflow}{while} (filled + fillSize < dataSize)
236     \{
237       memcpy (&\hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data}[filled], fill, fillSize);
238       filled += fillSize;
239     \}
240 
241   memcpy (&\hyperlink{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{m\_data}[filled], fill, dataSize - filled);
242 
243   \hyperlink{classSixlowpanFragmentationTest_abf8b0d59da8d99e941ec337a40f5548a}{m\_size} = dataSize;
244 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 10


\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Start\+Client@{Start\+Client}}
\index{Start\+Client@{Start\+Client}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Start\+Client(\+Ptr$<$ Node $>$ client\+Node)}{StartClient(Ptr< Node > clientNode)}}]{\setlength{\rightskip}{0pt plus 5cm}void Sixlowpan\+Fragmentation\+Test\+::\+Start\+Client (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{client\+Node}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_a24ee0242d6fa09b786a3280b20607445}{}\label{classSixlowpanFragmentationTest_a24ee0242d6fa09b786a3280b20607445}
Start the client node. 
\begin{DoxyParams}{Parameters}
{\em client\+Node} & The client node. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
180 \{
181 
182   \textcolor{keywordflow}{if} (\hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient} == 0)
183     \{
184       \hyperlink{classns3_1_1TypeId}{TypeId} tid = TypeId::LookupByName (\textcolor{stringliteral}{"ns3::UdpSocketFactory"});
185       \hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient} = Socket::CreateSocket (clientNode, tid);
186       \hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (\hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (Ipv6Address::GetAny (),
       9));
187       \hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_a97f08aaf37b8fd7d4b5cad4dfdd4022a}{Connect} (\hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:0100::1"}), 9));
188       \hyperlink{classns3_1_1CallbackValue}{CallbackValue} cbValue = \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classSixlowpanFragmentationTest_a74e986c4c910d19a1d6b16866f712c06}{SixlowpanFragmentationTest::HandleReadIcmpClient}, \textcolor{keyword}{this});
189       \hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"IcmpCallback6"}, cbValue);
190     \}
191 
192   \hyperlink{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{m\_socketClient}->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classSixlowpanFragmentationTest_aaa094eb5910c6a8b462a6c6678258713}{SixlowpanFragmentationTest::HandleReadClient}, \textcolor{keyword}{this}));
193 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!Start\+Server@{Start\+Server}}
\index{Start\+Server@{Start\+Server}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Start\+Server(\+Ptr$<$ Node $>$ server\+Node)}{StartServer(Ptr< Node > serverNode)}}]{\setlength{\rightskip}{0pt plus 5cm}void Sixlowpan\+Fragmentation\+Test\+::\+Start\+Server (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{server\+Node}
\end{DoxyParamCaption}
)}\hypertarget{classSixlowpanFragmentationTest_a2b70baf58418b5e3c1daec1d77f06a84}{}\label{classSixlowpanFragmentationTest_a2b70baf58418b5e3c1daec1d77f06a84}
Start the server node. 
\begin{DoxyParams}{Parameters}
{\em server\+Node} & The server node. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
147 \{
148 
149   \textcolor{keywordflow}{if} (\hyperlink{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{m\_socketServer} == 0)
150     \{
151       \hyperlink{classns3_1_1TypeId}{TypeId} tid = TypeId::LookupByName (\textcolor{stringliteral}{"ns3::UdpSocketFactory"});
152       \hyperlink{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{m\_socketServer} = Socket::CreateSocket (serverNode, tid);
153       \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} local = \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001:0100::1"}), 9);
154       \hyperlink{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{m\_socketServer}->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (local);
155       \hyperlink{classns3_1_1Ptr}{Ptr<UdpSocket>} udpSocket = DynamicCast<UdpSocket> (
      \hyperlink{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{m\_socketServer});
156     \}
157 
158   \hyperlink{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{m\_socketServer}->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classSixlowpanFragmentationTest_a8c6d98a798be3bd6eebfda06691a5e9e}{SixlowpanFragmentationTest::HandleReadServer}, \textcolor{keyword}{this}));
159 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14




\subsection{Member Data Documentation}
\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+data@{m\+\_\+data}}
\index{m\+\_\+data@{m\+\_\+data}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+data}{m_data}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t$\ast$ Sixlowpan\+Fragmentation\+Test\+::m\+\_\+data\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}{}\label{classSixlowpanFragmentationTest_afba3c6fb71866d031b594068f548207f}


Data to be carried in the packet. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+data\+Size@{m\+\_\+data\+Size}}
\index{m\+\_\+data\+Size@{m\+\_\+data\+Size}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+data\+Size}{m_dataSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Sixlowpan\+Fragmentation\+Test\+::m\+\_\+data\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}{}\label{classSixlowpanFragmentationTest_a9abb242135d4b3661d3d04d11202c03d}


Size of the data (if any). 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+icmp\+Code@{m\+\_\+icmp\+Code}}
\index{m\+\_\+icmp\+Code@{m\+\_\+icmp\+Code}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+icmp\+Code}{m_icmpCode}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t Sixlowpan\+Fragmentation\+Test\+::m\+\_\+icmp\+Code\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_a4fe3e1f6ca813a3972b675c4250eb154}{}\label{classSixlowpanFragmentationTest_a4fe3e1f6ca813a3972b675c4250eb154}


I\+C\+MP code. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+icmp\+Type@{m\+\_\+icmp\+Type}}
\index{m\+\_\+icmp\+Type@{m\+\_\+icmp\+Type}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+icmp\+Type}{m_icmpType}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t Sixlowpan\+Fragmentation\+Test\+::m\+\_\+icmp\+Type\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_a0754fe2c0e0ade8b02cfe76ff5125171}{}\label{classSixlowpanFragmentationTest_a0754fe2c0e0ade8b02cfe76ff5125171}


I\+C\+MP type. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+received\+Packet\+Client@{m\+\_\+received\+Packet\+Client}}
\index{m\+\_\+received\+Packet\+Client@{m\+\_\+received\+Packet\+Client}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+received\+Packet\+Client}{m_receivedPacketClient}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Sixlowpan\+Fragmentation\+Test\+::m\+\_\+received\+Packet\+Client\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_aef2a91785b934e5a820b0286dbbec514}{}\label{classSixlowpanFragmentationTest_aef2a91785b934e5a820b0286dbbec514}


Packet received by the client. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+received\+Packet\+Server@{m\+\_\+received\+Packet\+Server}}
\index{m\+\_\+received\+Packet\+Server@{m\+\_\+received\+Packet\+Server}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+received\+Packet\+Server}{m_receivedPacketServer}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Sixlowpan\+Fragmentation\+Test\+::m\+\_\+received\+Packet\+Server\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}{}\label{classSixlowpanFragmentationTest_a783ec541df1eacec01158508ad4a03cb}


packet received by the server. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+sent\+Packet\+Client@{m\+\_\+sent\+Packet\+Client}}
\index{m\+\_\+sent\+Packet\+Client@{m\+\_\+sent\+Packet\+Client}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+sent\+Packet\+Client}{m_sentPacketClient}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Sixlowpan\+Fragmentation\+Test\+::m\+\_\+sent\+Packet\+Client\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_a0931362b2249617e59dde62b9a8d41dc}{}\label{classSixlowpanFragmentationTest_a0931362b2249617e59dde62b9a8d41dc}


Packet sent by client. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+size@{m\+\_\+size}}
\index{m\+\_\+size@{m\+\_\+size}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+size}{m_size}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Sixlowpan\+Fragmentation\+Test\+::m\+\_\+size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_abf8b0d59da8d99e941ec337a40f5548a}{}\label{classSixlowpanFragmentationTest_abf8b0d59da8d99e941ec337a40f5548a}


Size of the packet if no data has been provided. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+socket\+Client@{m\+\_\+socket\+Client}}
\index{m\+\_\+socket\+Client@{m\+\_\+socket\+Client}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+socket\+Client}{m_socketClient}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Socket}$>$ Sixlowpan\+Fragmentation\+Test\+::m\+\_\+socket\+Client\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}{}\label{classSixlowpanFragmentationTest_a3d87ff33f33f43ba585f5772c0bdbd83}


Socket on the client. 

\index{Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}!m\+\_\+socket\+Server@{m\+\_\+socket\+Server}}
\index{m\+\_\+socket\+Server@{m\+\_\+socket\+Server}!Sixlowpan\+Fragmentation\+Test@{Sixlowpan\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+socket\+Server}{m_socketServer}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Socket}$>$ Sixlowpan\+Fragmentation\+Test\+::m\+\_\+socket\+Server\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}{}\label{classSixlowpanFragmentationTest_a385f27651f5ad9a16d8c8327a65abef9}


Socket on the server. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
sixlowpan/test/\hyperlink{sixlowpan-fragmentation-test_8cc}{sixlowpan-\/fragmentation-\/test.\+cc}\end{DoxyCompactItemize}
