\hypertarget{classNscTcpLossTestCase2}{}\section{Nsc\+Tcp\+Loss\+Test\+Case2 Class Reference}
\label{classNscTcpLossTestCase2}\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}


Inheritance diagram for Nsc\+Tcp\+Loss\+Test\+Case2\+:
% FIG 0


Collaboration diagram for Nsc\+Tcp\+Loss\+Test\+Case2\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classNscTcpLossTestCase2_a2d8f98307d2a568f2c568a57a61b0379}{Nsc\+Tcp\+Loss\+Test\+Case2} ()
\item 
virtual \hyperlink{classNscTcpLossTestCase2_a2d5a1d6293b0b72b58138da6a9322ae8}{$\sim$\+Nsc\+Tcp\+Loss\+Test\+Case2} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classNscTcpLossTestCase2_ad364f063ed7754e73344898da12a442f}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
void \hyperlink{classNscTcpLossTestCase2_aeef1e531cd0f4fd69dd40fad015594d3}{Sink\+Rx} (std\+::string path, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1Address}{Address} \&address)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classNscTcpLossTestCase2_a9a6f06deb7a2687aaa2feafbf7c39fa4}{m\+\_\+write\+Results}
\item 
\hyperlink{classns3_1_1TestVectors}{Test\+Vectors}$<$ uint32\+\_\+t $>$ \hyperlink{classNscTcpLossTestCase2_aeec3235eed328a98fed8cbac38d06d01}{m\+\_\+inputs}
\item 
\hyperlink{classns3_1_1TestVectors}{Test\+Vectors}$<$ uint32\+\_\+t $>$ \hyperlink{classNscTcpLossTestCase2_ace5e314367a0b601262aaf186e172d30}{m\+\_\+responses}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\subsubsection[{\texorpdfstring{Nsc\+Tcp\+Loss\+Test\+Case2()}{NscTcpLossTestCase2()}}]{\setlength{\rightskip}{0pt plus 5cm}Nsc\+Tcp\+Loss\+Test\+Case2\+::\+Nsc\+Tcp\+Loss\+Test\+Case2 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classNscTcpLossTestCase2_a2d8f98307d2a568f2c568a57a61b0379}{}\label{classNscTcpLossTestCase2_a2d8f98307d2a568f2c568a57a61b0379}

\begin{DoxyCode}
175   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check that nsc TCP survives loss of first data packet"}),
176     \hyperlink{classNscTcpLossTestCase2_a9a6f06deb7a2687aaa2feafbf7c39fa4}{m\_writeResults} (\textcolor{keyword}{false})
177 \{
178 \}
\end{DoxyCode}
\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!````~Nsc\+Tcp\+Loss\+Test\+Case2@{$\sim$\+Nsc\+Tcp\+Loss\+Test\+Case2}}
\index{````~Nsc\+Tcp\+Loss\+Test\+Case2@{$\sim$\+Nsc\+Tcp\+Loss\+Test\+Case2}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\subsubsection[{\texorpdfstring{$\sim$\+Nsc\+Tcp\+Loss\+Test\+Case2()}{~NscTcpLossTestCase2()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual Nsc\+Tcp\+Loss\+Test\+Case2\+::$\sim$\+Nsc\+Tcp\+Loss\+Test\+Case2 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classNscTcpLossTestCase2_a2d5a1d6293b0b72b58138da6a9322ae8}{}\label{classNscTcpLossTestCase2_a2d5a1d6293b0b72b58138da6a9322ae8}

\begin{DoxyCode}
162 \{\}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Function Documentation}
\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Nsc\+Tcp\+Loss\+Test\+Case2\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classNscTcpLossTestCase2_ad364f063ed7754e73344898da12a442f}{}\label{classNscTcpLossTestCase2_ad364f063ed7754e73344898da12a442f}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
188 \{
189   uint16\_t sinkPort = 50000;
190   \textcolor{keywordtype}{double} sinkStopTime = 40;  \textcolor{comment}{// sec; will trigger Socket::Close}
191   \textcolor{keywordtype}{double} writerStopTime = 12;  \textcolor{comment}{// sec; will trigger Socket::Close}
192   \textcolor{keywordtype}{double} simStopTime = 60;  \textcolor{comment}{// sec}
193   \hyperlink{classns3_1_1Time}{Time} sinkStopTimeObj = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (sinkStopTime);
194   \hyperlink{classns3_1_1Time}{Time} writerStopTimeObj = \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (writerStopTime);
195   \hyperlink{classns3_1_1Time}{Time} simStopTimeObj= \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (simStopTime);
196 
197   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n0 = CreateObject<Node> ();
198   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n1 = CreateObject<Node> ();
199 
200   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} pointToPoint;
201   pointToPoint.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, StringValue (\textcolor{stringliteral}{"5Mbps"}));
202   pointToPoint.SetChannelAttribute (\textcolor{stringliteral}{"Delay"}, StringValue (\textcolor{stringliteral}{"200ms"}));
203 
204   \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} devices;
205   devices = pointToPoint.Install (n0, n1);
206 
207   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
208   internet.\hyperlink{classns3_1_1InternetStackHelper_ac76e9cf493ef559f311c4ef85945129f}{SetTcp} (\textcolor{stringliteral}{"ns3::NscTcpL4Protocol"}, \textcolor{stringliteral}{"Library"}, StringValue (\textcolor{stringliteral}{"liblinux2.6.26.so"}));
209   internet.\hyperlink{classns3_1_1InternetStackHelper_a6cfa73782fd4071c4cfbd73ebf1bbb44}{InstallAll} ();
210 
211   \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} address;
212   address.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"10.1.1.0"}, \textcolor{stringliteral}{"255.255.255.252"});
213   \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ifContainer = address.\hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (devices);
214 
215   \hyperlink{classns3_1_1Ptr}{Ptr<SocketWriter>} socketWriter = CreateObject<SocketWriter> ();
216   \hyperlink{classns3_1_1Address}{Address} sinkAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (ifContainer.
      \hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (1), sinkPort));
217   socketWriter->\hyperlink{classns3_1_1SocketWriter_a79db65c3883555f22681d8ffabd206e4}{Setup} (n0, sinkAddress);
218   n0->\hyperlink{classns3_1_1Node_ab98b4fdc4aadc86366b80e8a79a53f47}{AddApplication} (socketWriter);
219   socketWriter->\hyperlink{classns3_1_1Application_a8360a49748e30c52ffdcc7a305c3cd48}{SetStartTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.));
220   socketWriter->\hyperlink{classns3_1_1Application_a732c1fdadf0be176c753a2ce6e27dff9}{SetStopTime} (writerStopTimeObj);
221 
222   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} sink (\textcolor{stringliteral}{"ns3::TcpSocketFactory"},
223                          \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), sinkPort));
224   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} apps = sink.Install (n1);
225   \textcolor{comment}{// Start the sink application at time zero, and stop it at sinkStopTime}
226   apps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0));
227   apps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (sinkStopTimeObj);
228 
229   \hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{Config::Connect} (\textcolor{stringliteral}{"/NodeList/*/ApplicationList/*/$ns3::PacketSink/Rx"},
230                    \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{classNscTcpLossTestCase2_aeef1e531cd0f4fd69dd40fad015594d3}{NscTcpLossTestCase2::SinkRx}, \textcolor{keyword}{this})
      );
231 
232   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2), &\hyperlink{group__config_ga4014f151241cd0939b6cb64409605736}{SocketWriter::Connect}, socketWriter);
233   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10), &SocketWriter::Write, socketWriter, 500);
234   \hyperlink{classNscTcpLossTestCase2_aeec3235eed328a98fed8cbac38d06d01}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (500);
235   Simulator::Schedule (writerStopTimeObj, &SocketWriter::Close, socketWriter);
236 
237   std::list<uint32\_t> sampleList;
238   \textcolor{comment}{// Lose first data segment}
239   sampleList.push\_back (2);
240   \textcolor{comment}{// This time, we'll explicitly create the error model we want}
241   \hyperlink{classns3_1_1Ptr}{Ptr<ReceiveListErrorModel>} pem = CreateObject<ReceiveListErrorModel> ();
242   pem->\hyperlink{classns3_1_1ReceiveListErrorModel_ae710ec96d43c47bedb5d941351a4d809}{SetList} (sampleList);
243   devices.\hyperlink{classns3_1_1NetDeviceContainer_a677d62594b5c9d2dea155cc5045f4d0b}{Get} (1)->SetAttribute (\textcolor{stringliteral}{"ReceiveErrorModel"}, \hyperlink{classns3_1_1PointerValue}{PointerValue} (pem));
244 
245   \textcolor{keywordflow}{if} (\hyperlink{classNscTcpLossTestCase2_a9a6f06deb7a2687aaa2feafbf7c39fa4}{m\_writeResults})
246     \{
247       pointToPoint.EnablePcapAll (\textcolor{stringliteral}{"nsc-tcp-loss-test-case-2"});
248       pointToPoint.EnableAsciiAll (\textcolor{stringliteral}{"nsc-tcp-loss-test-case-2"});
249     \}
250 
251   Simulator::Stop (simStopTimeObj);
252   Simulator::Run ();
253   Simulator::Destroy ();
254 
255   \textcolor{comment}{// Compare inputs and outputs}
256   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classNscTcpLossTestCase2_aeec3235eed328a98fed8cbac38d06d01}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_a2da99bd673577006c95a8b17b550d809}{GetN} (), 
      \hyperlink{classNscTcpLossTestCase2_ace5e314367a0b601262aaf186e172d30}{m\_responses}.\hyperlink{classns3_1_1TestVectors_a2da99bd673577006c95a8b17b550d809}{GetN} (), \textcolor{stringliteral}{"Incorrect number of expected receive events"});
257   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classNscTcpLossTestCase2_ace5e314367a0b601262aaf186e172d30}{m\_responses}.\hyperlink{classns3_1_1TestVectors_a2da99bd673577006c95a8b17b550d809}{GetN} (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
258     \{
259       uint32\_t in = \hyperlink{classNscTcpLossTestCase2_aeec3235eed328a98fed8cbac38d06d01}{m\_inputs}.\hyperlink{classns3_1_1TestVectors_acbb2624ad8cf403a44aa77c0ee3db85d}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
260       uint32\_t out = \hyperlink{classNscTcpLossTestCase2_ace5e314367a0b601262aaf186e172d30}{m\_responses}.\hyperlink{classns3_1_1TestVectors_acbb2624ad8cf403a44aa77c0ee3db85d}{Get} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
261       \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (in, out, \textcolor{stringliteral}{"Mismatch:  expected "} << in << \textcolor{stringliteral}{" bytes, got "} 
      << out << \textcolor{stringliteral}{" bytes"});
262     \}
263 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!Sink\+Rx@{Sink\+Rx}}
\index{Sink\+Rx@{Sink\+Rx}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\subsubsection[{\texorpdfstring{Sink\+Rx(std\+::string path, Ptr$<$ const Packet $>$ p, const Address \&address)}{SinkRx(std::string path, Ptr< const Packet > p, const Address &address)}}]{\setlength{\rightskip}{0pt plus 5cm}void Nsc\+Tcp\+Loss\+Test\+Case2\+::\+Sink\+Rx (
\begin{DoxyParamCaption}
\item[{std\+::string}]{path, }
\item[{{\bf Ptr}$<$ const {\bf Packet} $>$}]{p, }
\item[{const {\bf Address} \&}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNscTcpLossTestCase2_aeef1e531cd0f4fd69dd40fad015594d3}{}\label{classNscTcpLossTestCase2_aeef1e531cd0f4fd69dd40fad015594d3}

\begin{DoxyCode}
182 \{
183   \hyperlink{classNscTcpLossTestCase2_ace5e314367a0b601262aaf186e172d30}{m\_responses}.\hyperlink{classns3_1_1TestVectors_a59ceaabfb75eb96a93f607405868bfc0}{Add} (p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ());
184 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5




\subsection{Member Data Documentation}
\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!m\+\_\+inputs@{m\+\_\+inputs}}
\index{m\+\_\+inputs@{m\+\_\+inputs}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\subsubsection[{\texorpdfstring{m\+\_\+inputs}{m_inputs}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Test\+Vectors}$<$uint32\+\_\+t$>$ Nsc\+Tcp\+Loss\+Test\+Case2\+::m\+\_\+inputs\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNscTcpLossTestCase2_aeec3235eed328a98fed8cbac38d06d01}{}\label{classNscTcpLossTestCase2_aeec3235eed328a98fed8cbac38d06d01}
\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!m\+\_\+responses@{m\+\_\+responses}}
\index{m\+\_\+responses@{m\+\_\+responses}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\subsubsection[{\texorpdfstring{m\+\_\+responses}{m_responses}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Test\+Vectors}$<$uint32\+\_\+t$>$ Nsc\+Tcp\+Loss\+Test\+Case2\+::m\+\_\+responses\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNscTcpLossTestCase2_ace5e314367a0b601262aaf186e172d30}{}\label{classNscTcpLossTestCase2_ace5e314367a0b601262aaf186e172d30}
\index{Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}!m\+\_\+write\+Results@{m\+\_\+write\+Results}}
\index{m\+\_\+write\+Results@{m\+\_\+write\+Results}!Nsc\+Tcp\+Loss\+Test\+Case2@{Nsc\+Tcp\+Loss\+Test\+Case2}}
\subsubsection[{\texorpdfstring{m\+\_\+write\+Results}{m_writeResults}}]{\setlength{\rightskip}{0pt plus 5cm}bool Nsc\+Tcp\+Loss\+Test\+Case2\+::m\+\_\+write\+Results\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classNscTcpLossTestCase2_a9a6f06deb7a2687aaa2feafbf7c39fa4}{}\label{classNscTcpLossTestCase2_a9a6f06deb7a2687aaa2feafbf7c39fa4}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
test/ns3tcp/\hyperlink{nsctcp-loss-test-suite_8cc}{nsctcp-\/loss-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
