\hypertarget{classTwoRayGroundPropagationLossModelTestCase}{}\section{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case Class Reference}
\label{classTwoRayGroundPropagationLossModelTestCase}\index{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}}


Inheritance diagram for Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case\+:
% FIG 0


Collaboration diagram for Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case\+:
% FIG 1
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structTwoRayGroundPropagationLossModelTestCase_1_1TestVector}{Test\+Vector}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTwoRayGroundPropagationLossModelTestCase_a302c675daa97f94efd182a21b3e44340}{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case} ()
\item 
virtual \hyperlink{classTwoRayGroundPropagationLossModelTestCase_aa46a29927dfa161626f700824c248572}{$\sim$\+Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab9c944227a539d51afe1bcd969c6dfd6}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1TestVectors}{Test\+Vectors}$<$ \hyperlink{structTwoRayGroundPropagationLossModelTestCase_1_1TestVector}{Test\+Vector} $>$ \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\+\_\+test\+Vectors}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}!Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}}
\index{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}!Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case()}{TwoRayGroundPropagationLossModelTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case\+::\+Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classTwoRayGroundPropagationLossModelTestCase_a302c675daa97f94efd182a21b3e44340}{}\label{classTwoRayGroundPropagationLossModelTestCase_a302c675daa97f94efd182a21b3e44340}

\begin{DoxyCode}
156   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Check to see that the ns-3 TwoRayGround propagation loss model provides correct
       received power"}),
157     \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors} ()
158 \{
159 \}
\end{DoxyCode}
\index{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}!````~Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{$\sim$\+Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}}
\index{````~Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{$\sim$\+Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}!Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case()}{~TwoRayGroundPropagationLossModelTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case\+::$\sim$\+Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classTwoRayGroundPropagationLossModelTestCase_aa46a29927dfa161626f700824c248572}{}\label{classTwoRayGroundPropagationLossModelTestCase_aa46a29927dfa161626f700824c248572}

\begin{DoxyCode}
162 \{
163 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classTwoRayGroundPropagationLossModelTestCase_ab9c944227a539d51afe1bcd969c6dfd6}{}\label{classTwoRayGroundPropagationLossModelTestCase_ab9c944227a539d51afe1bcd969c6dfd6}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
167 \{
168   \textcolor{comment}{// the test vectors have been determined for a wavelength of 0.125 m }
169   \textcolor{comment}{// which corresponds to a frequency of 2398339664.0 Hz in the vacuum}
170   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TwoRayGroundPropagationLossModel::Frequency"}, DoubleValue (23
      98339664.0));
171   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TwoRayGroundPropagationLossModel::SystemLoss"}, DoubleValue (1
      .0));
172 
173   \textcolor{comment}{// set antenna height to 1.5m above z coordinate}
174   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::TwoRayGroundPropagationLossModel::HeightAboveZ"}, DoubleValue 
      (1.5));
175 
176   \textcolor{comment}{// Select a reference transmit power of 17.0206 dBm}
177   \textcolor{comment}{// Pt = 10^(17.0206/10)/10^3 = .05035702 W}
178   \textcolor{keywordtype}{double} txPowerW = 0.05035702;
179   \textcolor{keywordtype}{double} txPowerdBm = 10 * std::log10 (txPowerW) + 30;
180 
181   \textcolor{comment}{//}
182   \textcolor{comment}{// As with the Friis tests above, we want to test the propagation loss }
183   \textcolor{comment}{// model calculations at a few chosen distances and compare the results }
184   \textcolor{comment}{// to those we can manually calculate. Let us test the ns-3 calculated }
185   \textcolor{comment}{// value for agreement to be within 5e-16, as above.}
186   \textcolor{comment}{//}
187   TestVector testVector;
188 
189   \textcolor{comment}{// Below the Crossover distance use Friis so this test should be the same as that above}
190   \textcolor{comment}{// Crossover = (4 * PI * TxAntennaHeight * RxAntennaHeight) / Lamdba}
191   \textcolor{comment}{// Crossover = (4 * PI * 1.5 * 1.5) / 0.125 = 226.1946m}
192 
193   testVector.m\_position = Vector (100, 0, 0);
194   testVector.m\_pt = txPowerdBm;
195   testVector.m\_pr = 4.98265e-10;
196   testVector.m\_tolerance = 5e-16;
197   \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Add (testVector);
198 
199   \textcolor{comment}{// These values are above the crossover distance and therefore use the Two Ray calculation}
200 
201   testVector.m\_position = Vector (500, 0, 0);
202   testVector.m\_pt = txPowerdBm;
203   testVector.m\_pr = 4.07891862e-12;
204   testVector.m\_tolerance = 5e-16;
205   \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Add (testVector);
206 
207   testVector.m\_position = Vector (1000, 0, 0);
208   testVector.m\_pt = txPowerdBm;
209   testVector.m\_pr = 2.5493241375e-13;
210   testVector.m\_tolerance = 5e-16;
211   \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Add (testVector);
212 
213   testVector.m\_position = Vector (2000, 0, 0);
214   testVector.m\_pt = txPowerdBm;
215   testVector.m\_pr = 1.593327585938e-14;
216   testVector.m\_tolerance = 5e-16;
217   \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Add (testVector);
218 
219   \textcolor{comment}{// Repeat the tests for non-zero z coordinates}
220 
221   \textcolor{comment}{// Pr = (0.05035702 * (1.5*1.5) * (2.5*2.5)) / (500*500*500*500) = 1.13303295e-11}
222   \textcolor{comment}{// dCross = (4 * pi * 1.5 * 2.5) / 0.125 = 376.99m}
223   testVector.m\_position = Vector (500, 0, 1);
224   testVector.m\_pt = txPowerdBm;
225   testVector.m\_pr = 1.13303295e-11;
226   testVector.m\_tolerance = 5e-16;
227   \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Add (testVector);
228 
229   \textcolor{comment}{// Pr = (0.05035702 * (1.5*1.5) * (5.5*5.5)) / (1000*1000*1000*1000) = 3.42742467375e-12}
230   \textcolor{comment}{// dCross = (4 * pi * 1.5 * 5.5) / 0.125 = 829.38m}
231   testVector.m\_position = Vector (1000, 0, 4);
232   testVector.m\_pt = txPowerdBm;
233   testVector.m\_pr = 3.42742467375e-12;
234   testVector.m\_tolerance = 5e-16;
235   \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Add (testVector);
236 
237   \textcolor{comment}{// Pr = (0.05035702 * (1.5*1.5) * (11.5*11.5)) / (2000*2000*2000*2000) = 9.36522547734e-13}
238   \textcolor{comment}{// dCross = (4 * pi * 1.5 * 11.5) / 0.125 = 1734.15m}
239   testVector.m\_position = Vector (2000, 0, 10);
240   testVector.m\_pt = txPowerdBm;
241   testVector.m\_pr = 9.36522547734e-13;
242   testVector.m\_tolerance = 5e-16;
243   \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Add (testVector);
244 
245 
246   \textcolor{comment}{// Now, check that the received power values are expected}
247 
248   \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} a = CreateObject<ConstantPositionMobilityModel> (); 
249   a->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0,0,0));
250   \hyperlink{classns3_1_1Ptr}{Ptr<MobilityModel>} \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b} = CreateObject<ConstantPositionMobilityModel> (); 
251 
252   \hyperlink{classns3_1_1Ptr}{Ptr<TwoRayGroundPropagationLossModel>} lossModel = 
      CreateObject<TwoRayGroundPropagationLossModel> (); 
253   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.GetN (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
254     \{
255       testVector = \hyperlink{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{m\_testVectors}.Get (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
256       b->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (testVector.m\_position);
257       \textcolor{keywordtype}{double} resultdBm = lossModel->CalcRxPower (testVector.m\_pt, a, b);
258       \textcolor{keywordtype}{double} resultW = std::pow (10.0, resultdBm / 10.0) / 1000;
259       \hyperlink{group__testing_ga7927b376d1fed5e576c7a3d69d26e8a0}{NS\_TEST\_EXPECT\_MSG\_EQ\_TOL} (resultW, testVector.m\_pr, testVector.m\_tolerance,
       \textcolor{stringliteral}{"Got unexpected rcv power"});
260     \}
261 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}!m\+\_\+test\+Vectors@{m\+\_\+test\+Vectors}}
\index{m\+\_\+test\+Vectors@{m\+\_\+test\+Vectors}!Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case@{Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+test\+Vectors}{m_testVectors}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Test\+Vectors}$<${\bf Test\+Vector}$>$ Two\+Ray\+Ground\+Propagation\+Loss\+Model\+Test\+Case\+::m\+\_\+test\+Vectors\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}{}\label{classTwoRayGroundPropagationLossModelTestCase_ab0bd335163cae1eb85b9947c853e28a5}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
propagation/test/\hyperlink{propagation-loss-model-test-suite_8cc}{propagation-\/loss-\/model-\/test-\/suite.\+cc}\end{DoxyCompactItemize}
