\hypertarget{classns3_1_1UanPhyPerUmodem}{}\section{ns3\+:\+:Uan\+Phy\+Per\+Umodem Class Reference}
\label{classns3_1_1UanPhyPerUmodem}\index{ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}}


{\ttfamily \#include $<$uan-\/phy-\/gen.\+h$>$}



Inheritance diagram for ns3\+:\+:Uan\+Phy\+Per\+Umodem\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Uan\+Phy\+Per\+Umodem\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1UanPhyPerUmodem_ab81f8659d42e9d845004d1bb2745124d}{Uan\+Phy\+Per\+Umodem} ()
\item 
virtual \hyperlink{classns3_1_1UanPhyPerUmodem_ae8a5beefb575ef6e33f578dabc223e58}{$\sim$\+Uan\+Phy\+Per\+Umodem} ()
\item 
virtual double \hyperlink{classns3_1_1UanPhyPerUmodem_a9a6f46eb34ec23e1492d2a53b701cfff}{Calc\+Per} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ pkt, double sinr\+Db, \hyperlink{classns3_1_1UanTxMode}{Uan\+Tx\+Mode} mode)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1UanPhyPerUmodem_a1c53fffcff18ee0aa75f373d0fd90b91}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classns3_1_1UanPhyPerUmodem_aa76cc90b685b1bf88a1ecbc76f9c229d}{N\+ChooseK} (uint32\+\_\+t \hyperlink{lte__link__budget__x2__handover__measures_8m_abdb05bc5a064cf642a06c83b3392f148}{n}, uint32\+\_\+t k)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\hyperlink{classns3_1_1Packet}{Packet} error rate calculation assuming W\+H\+OI Micromodem-\/like P\+HY.

Calculates P\+ER assuming rate 1/2 convolutional code with constraint length 9 with soft decision viterbi decoding and a C\+RC capable of correcting 1 bit error. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}!Uan\+Phy\+Per\+Umodem@{Uan\+Phy\+Per\+Umodem}}
\index{Uan\+Phy\+Per\+Umodem@{Uan\+Phy\+Per\+Umodem}!ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}}
\subsubsection[{\texorpdfstring{Uan\+Phy\+Per\+Umodem()}{UanPhyPerUmodem()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Uan\+Phy\+Per\+Umodem\+::\+Uan\+Phy\+Per\+Umodem (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1UanPhyPerUmodem_ab81f8659d42e9d845004d1bb2745124d}{}\label{classns3_1_1UanPhyPerUmodem_ab81f8659d42e9d845004d1bb2745124d}
Constructor 
\begin{DoxyCode}
248 \{
249 
250 \}
\end{DoxyCode}
\index{ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}!````~Uan\+Phy\+Per\+Umodem@{$\sim$\+Uan\+Phy\+Per\+Umodem}}
\index{````~Uan\+Phy\+Per\+Umodem@{$\sim$\+Uan\+Phy\+Per\+Umodem}!ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}}
\subsubsection[{\texorpdfstring{$\sim$\+Uan\+Phy\+Per\+Umodem()}{~UanPhyPerUmodem()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Uan\+Phy\+Per\+Umodem\+::$\sim$\+Uan\+Phy\+Per\+Umodem (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1UanPhyPerUmodem_ae8a5beefb575ef6e33f578dabc223e58}{}\label{classns3_1_1UanPhyPerUmodem_ae8a5beefb575ef6e33f578dabc223e58}
Destructor 
\begin{DoxyCode}
252 \{
253 
254 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}!Calc\+Per@{Calc\+Per}}
\index{Calc\+Per@{Calc\+Per}!ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}}
\subsubsection[{\texorpdfstring{Calc\+Per(\+Ptr$<$ Packet $>$ pkt, double sinr\+Db, Uan\+Tx\+Mode mode)}{CalcPer(Ptr< Packet > pkt, double sinrDb, UanTxMode mode)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Uan\+Phy\+Per\+Umodem\+::\+Calc\+Per (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{pkt, }
\item[{double}]{sinr\+Db, }
\item[{{\bf Uan\+Tx\+Mode}}]{mode}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1UanPhyPerUmodem_a9a6f46eb34ec23e1492d2a53b701cfff}{}\label{classns3_1_1UanPhyPerUmodem_a9a6f46eb34ec23e1492d2a53b701cfff}
Calculate the packet error probability based on S\+I\+NR at the receiver and a tx mode.

This implementation uses calculations for binary F\+SK modulation coded by a rate 1/2 convolutional code with constraint length = 9 and a viterbi decoder and finally a C\+RC capable of correcting one bit error. These equations can be found in the book, Digital Communications, by Proakis (any version I think).


\begin{DoxyParams}{Parameters}
{\em pkt} & \hyperlink{classns3_1_1Packet}{Packet} which is under consideration. \\
\hline
{\em sinr\+Db} & S\+I\+NR at receiver. \\
\hline
{\em mode} & TX mode used to transmit packet. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Probability of packet error. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1UanPhyPer_abda67b8507b942f2f6d043297242181f}{ns3\+::\+Uan\+Phy\+Per}.


\begin{DoxyCode}
288 \{
289   uint32\_t \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d}[] =
290   \{ 12, 14, 16, 18, 20, 22, 24, 26, 28 \};
291   \textcolor{keywordtype}{double} Bd[] =
292   \{
293     33, 281, 2179, 15035LLU, 105166LLU, 692330LLU, 4580007LLU, 29692894LLU,
294     190453145LLU
295   \};
296 
297   \textcolor{comment}{// double Rc = 1.0 / 2.0;}
298   \textcolor{keywordtype}{double} ebno = std::pow (10.0, sinr / 10.0);
299   \textcolor{keywordtype}{double} perror = 1.0 / (2.0 + ebno);
300   \textcolor{keywordtype}{double} P[9];
301 
302   \textcolor{keywordflow}{if} (sinr >= 10)
303     \{
304       \textcolor{keywordflow}{return} 0;
305     \}
306   \textcolor{keywordflow}{if} (sinr <= 6)
307     \{
308       \textcolor{keywordflow}{return} 1;
309     \}
310 
311   \textcolor{keywordflow}{for} (uint32\_t r = 0; r < 9; r++)
312     \{
313       \textcolor{keywordtype}{double} sumd = 0;
314       \textcolor{keywordflow}{for} (uint32\_t k = 0; k < d[r]; k++)
315         \{
316           sumd = sumd + \hyperlink{classns3_1_1UanPhyPerUmodem_aa76cc90b685b1bf88a1ecbc76f9c229d}{NChooseK} (d[r] - 1 + k, k) * std::pow (1 - perror, (\textcolor{keywordtype}{double}) k);
317         \}
318       P[r] = std::pow (perror, (\textcolor{keywordtype}{double}) d[r]) * sumd;
319 
320     \}
321 
322   \textcolor{keywordtype}{double} Pb = 0;
323   \textcolor{keywordflow}{for} (uint32\_t r = 0; r < 8; r++)
324     \{
325       Pb = Pb + Bd[r] * P[r];
326     \}
327 
328   \textcolor{comment}{// cout << "Pb = " << Pb << endl;}
329   uint32\_t bits = pkt->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () * 8;
330 
331   \textcolor{keywordtype}{double} Ppacket = 1;
332   \textcolor{keywordtype}{double} temp = \hyperlink{classns3_1_1UanPhyPerUmodem_aa76cc90b685b1bf88a1ecbc76f9c229d}{NChooseK} (bits, 0);
333   temp *= std::pow ( (1 - Pb), (\textcolor{keywordtype}{double}) bits);
334   Ppacket -= temp;
335   temp = \hyperlink{classns3_1_1UanPhyPerUmodem_aa76cc90b685b1bf88a1ecbc76f9c229d}{NChooseK} (288, 1) * Pb * std::pow ( (1 - Pb), bits - 1.0);
336   Ppacket -= temp;
337 
338   \textcolor{keywordflow}{if} (Ppacket > 1)
339     \{
340       \textcolor{keywordflow}{return} 1;
341     \}
342   \textcolor{keywordflow}{else}
343     \{
344       \textcolor{keywordflow}{return} Ppacket;
345     \}
346 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Uan\+Phy\+Per\+Umodem\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1UanPhyPerUmodem_a1c53fffcff18ee0aa75f373d0fd90b91}{}\label{classns3_1_1UanPhyPerUmodem_a1c53fffcff18ee0aa75f373d0fd90b91}
Register this type. \begin{DoxyReturn}{Returns}
The \hyperlink{classns3_1_1TypeId}{Type\+Id}. 
\end{DoxyReturn}

\begin{DoxyCode}
257 \{
258   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::UanPhyPerUmodem"})
259     .SetParent<UanPhyPer> ()
260     .SetGroupName (\textcolor{stringliteral}{"Uan"})
261     .AddConstructor<\hyperlink{classns3_1_1UanPhyPerUmodem_ab81f8659d42e9d845004d1bb2745124d}{UanPhyPerUmodem}> ()
262   ;
263   \textcolor{keywordflow}{return} tid;
264 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}!N\+ChooseK@{N\+ChooseK}}
\index{N\+ChooseK@{N\+ChooseK}!ns3\+::\+Uan\+Phy\+Per\+Umodem@{ns3\+::\+Uan\+Phy\+Per\+Umodem}}
\subsubsection[{\texorpdfstring{N\+Choose\+K(uint32\+\_\+t n, uint32\+\_\+t k)}{NChooseK(uint32_t n, uint32_t k)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Uan\+Phy\+Per\+Umodem\+::\+N\+ChooseK (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{n, }
\item[{uint32\+\_\+t}]{k}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1UanPhyPerUmodem_aa76cc90b685b1bf88a1ecbc76f9c229d}{}\label{classns3_1_1UanPhyPerUmodem_aa76cc90b685b1bf88a1ecbc76f9c229d}
Binomial coefficient


\begin{DoxyParams}{Parameters}
{\em n} & Pool size. \\
\hline
{\em k} & Number of draws. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Binomial coefficient n choose k. 
\end{DoxyReturn}

\begin{DoxyCode}
268 \{
269   \textcolor{keywordtype}{double} result;
270 
271   result = 1.0;
272 
273   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (k,\hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n} - k) + 1; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= \hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n}; ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
274     \{
275       result *= \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
276     \}
277 
278   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 2; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} <= \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (k,\hyperlink{namespacesample-rng-plot_aeb5ee5c431e338ef39b7ac5431242e1d}{n} - k); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
279     \{
280       result /= \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
281     \}
282 
283   \textcolor{keywordflow}{return} result;
284 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
uan/model/\hyperlink{uan-phy-gen_8h}{uan-\/phy-\/gen.\+h}\item 
uan/model/\hyperlink{uan-phy-gen_8cc}{uan-\/phy-\/gen.\+cc}\end{DoxyCompactItemize}
