\hypertarget{star-animation_8cc}{}\section{netanim/examples/star-\/animation.cc File Reference}
\label{star-animation_8cc}\index{netanim/examples/star-\/animation.\+cc@{netanim/examples/star-\/animation.\+cc}}
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/netanim-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/point-\/to-\/point-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/applications-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/point-\/to-\/point-\/layout-\/module.\+h\char`\"{}}\\*
Include dependency graph for star-\/animation.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{star-animation_8cc_a352b41c691862f5965d837da9491a1d6}{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Star\+Animation\char`\"{})
\item 
int \hyperlink{star-animation_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{star-\/animation.\+cc@{star-\/animation.\+cc}!main@{main}}
\index{main@{main}!star-\/animation.\+cc@{star-\/animation.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{star-animation_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{star-animation_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
44 \{
45 
46   \textcolor{comment}{//}
47   \textcolor{comment}{// Set up some default values for the simulation.}
48   \textcolor{comment}{//}
49   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::OnOffApplication::PacketSize"}, UintegerValue (137));
50 
51   \textcolor{comment}{// ??? try and stick 15kb/s into the data rate}
52   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::OnOffApplication::DataRate"}, StringValue (\textcolor{stringliteral}{"14kb/s"}));
53 
54   \textcolor{comment}{//}
55   \textcolor{comment}{// Default number of nodes in the star.  Overridable by command line argument.}
56   \textcolor{comment}{//}
57   uint32\_t nSpokes = 8;
58   std::string animFile = \textcolor{stringliteral}{"star-animation.xml"};
59   uint8\_t useIpv6 = 0;
60   \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} ipv6AddressBase = \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address}(\textcolor{stringliteral}{"2001::"});
61   \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} ipv6AddressPrefix = \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix}(64);
62 
63   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
64   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"nSpokes"}, \textcolor{stringliteral}{"Number of spoke nodes to place in the star"}, nSpokes);
65   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"animFile"},  \textcolor{stringliteral}{"File Name for Animation Output"}, animFile);
66   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"useIpv6"},   \textcolor{stringliteral}{"use Ipv6"}, useIpv6);
67 
68   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc, argv);
69 
70   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Build star topology."});
71   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} pointToPoint;
72   pointToPoint.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, StringValue (\textcolor{stringliteral}{"5Mbps"}));
73   pointToPoint.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, StringValue (\textcolor{stringliteral}{"2ms"}));
74   \hyperlink{classns3_1_1PointToPointStarHelper}{PointToPointStarHelper} star (nSpokes, pointToPoint);
75 
76   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Install internet stack on all nodes."});
77   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
78   star.InstallStack (internet);
79 
80   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Assign IP Addresses."});
81   \textcolor{keywordflow}{if} (useIpv6 == 0)
82     \{
83       star.AssignIpv4Addresses (\hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} (\textcolor{stringliteral}{"10.1.1.0"}, \textcolor{stringliteral}{"255.255.255.0"}));
84     \}
85   \textcolor{keywordflow}{else}
86     \{
87       star.AssignIpv6Addresses (ipv6AddressBase, ipv6AddressPrefix);
88     \}
89 
90   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Create applications."});
91   \textcolor{comment}{//}
92   \textcolor{comment}{// Create a packet sink on the star "hub" to receive packets.}
93   \textcolor{comment}{// }
94   uint16\_t \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = 50000;
95   \hyperlink{classns3_1_1Address}{Address} hubLocalAddress;
96   \textcolor{keywordflow}{if} (useIpv6 == 0)
97     \{
98       hubLocalAddress = \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), port);
99     \}
100   \textcolor{keywordflow}{else}
101     \{
102       hubLocalAddress = \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (Ipv6Address::GetAny (), port);
103     \}
104   \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} packetSinkHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, hubLocalAddress);
105   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} hubApp = packetSinkHelper.Install (star.GetHub ());
106   hubApp.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
107   hubApp.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
108 
109   \textcolor{comment}{//}
110   \textcolor{comment}{// Create OnOff applications to send TCP to the hub, one on each spoke node.}
111   \textcolor{comment}{//}
112   \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} onOffHelper (\textcolor{stringliteral}{"ns3::TcpSocketFactory"}, \hyperlink{classns3_1_1Address}{Address} ());
113   onOffHelper.SetAttribute (\textcolor{stringliteral}{"OnTime"}, StringValue (\textcolor{stringliteral}{"ns3::ConstantRandomVariable[Constant=1]"}));
114   onOffHelper.SetAttribute (\textcolor{stringliteral}{"OffTime"}, StringValue (\textcolor{stringliteral}{"ns3::ConstantRandomVariable[Constant=0]"}));
115 
116   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} spokeApps;
117 
118   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < star.SpokeCount (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
119     \{
120       AddressValue remoteAddress;
121       \textcolor{keywordflow}{if} (useIpv6 == 0)
122         \{
123           remoteAddress = AddressValue(\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (star.GetHubIpv4Address (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}));
124         \}
125       \textcolor{keywordflow}{else}
126         \{
127           remoteAddress = AddressValue(\hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (star.GetHubIpv6Address (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}));
128         \}
129       onOffHelper.SetAttribute (\textcolor{stringliteral}{"Remote"}, remoteAddress);
130       spokeApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (onOffHelper.Install (star.GetSpokeNode (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})));
131     \}
132   spokeApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0));
133   spokeApps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
134 
135   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Enable static global routing."});
136   \textcolor{comment}{//}
137   \textcolor{comment}{// Turn on global static routing so we can actually be routed across the star.}
138   \textcolor{comment}{//}
139   \textcolor{keywordflow}{if} (useIpv6 == 0)
140     \{
141       Ipv4GlobalRoutingHelper::PopulateRoutingTables ();
142     \}
143 
144   \textcolor{comment}{// Set the bounding box for animation}
145   star.BoundingBox (1, 1, 100, 100);
146 
147   \textcolor{comment}{// Create the animation object and configure for specified output}
148   \hyperlink{classns3_1_1AnimationInterface}{AnimationInterface} anim (animFile);
149 
150   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Run Simulation."});
151   Simulator::Run ();
152   Simulator::Destroy ();
153   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Done."});
154 
155   \textcolor{keywordflow}{return} 0;
156 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{star-\/animation.\+cc@{star-\/animation.\+cc}!N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}}
\index{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}!star-\/animation.\+cc@{star-\/animation.\+cc}}
\subsubsection[{\texorpdfstring{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+N\+E(""Star\+Animation"")}{NS_LOG_COMPONENT_DEFINE("StarAnimation")}}]{\setlength{\rightskip}{0pt plus 5cm}N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE (
\begin{DoxyParamCaption}
\item[{\char`\"{}Star\+Animation\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{star-animation_8cc_a352b41c691862f5965d837da9491a1d6}{}\label{star-animation_8cc_a352b41c691862f5965d837da9491a1d6}
