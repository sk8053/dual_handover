\hypertarget{mmwave-epc-tdma_8cc}{}\section{mmwave/examples/mmwave-\/epc-\/tdma.cc File Reference}
\label{mmwave-epc-tdma_8cc}\index{mmwave/examples/mmwave-\/epc-\/tdma.\+cc@{mmwave/examples/mmwave-\/epc-\/tdma.\+cc}}
{\ttfamily \#include \char`\"{}ns3/mmwave-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/epc-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/ipv4-\/global-\/routing-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/mobility-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/applications-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/point-\/to-\/point-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/config-\/store.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/mmwave-\/point-\/to-\/point-\/epc-\/helper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/rng-\/seed-\/manager.\+h\char`\"{}}\\*
{\ttfamily \#include $<$sstream$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
Include dependency graph for mmwave-\/epc-\/tdma.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{mmwave-epc-tdma_8cc_a4b6e3fef4d253f684454852e5c4d3396}{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Mm\+Wave\+Epc\+Tdma\char`\"{})
\item 
int \hyperlink{mmwave-epc-tdma_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{mmwave-\/epc-\/tdma.\+cc@{mmwave-\/epc-\/tdma.\+cc}!main@{main}}
\index{main@{main}!mmwave-\/epc-\/tdma.\+cc@{mmwave-\/epc-\/tdma.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{mmwave-epc-tdma_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{mmwave-epc-tdma_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
55 \{
56         \textcolor{comment}{//LogComponentEnable ("LteUeRrc", LOG\_LEVEL\_ALL);}
57         \textcolor{comment}{//LogComponentEnable ("LteEnbRrc", LOG\_LEVEL\_ALL);}
58         \textcolor{comment}{//      LogComponentEnable("mmWavePointToPointEpcHelper",LOG\_LEVEL\_ALL);}
59         \textcolor{comment}{//      LogComponentEnable("EpcUeNas",LOG\_LEVEL\_ALL);}
60 \textcolor{comment}{//              LogComponentEnable ("MmWaveSpectrumPhy", LOG\_LEVEL\_DEBUG);}
61 \textcolor{comment}{//      LogComponentEnable ("MmWaveBeamforming", LOG\_LEVEL\_DEBUG);}
62 \textcolor{comment}{//      LogComponentEnable ("MmWaveUePhy", LOG\_LEVEL\_DEBUG);}
63 \textcolor{comment}{//      LogComponentEnable ("MmWaveEnbPhy", LOG\_LEVEL\_DEBUG);}
64 \textcolor{comment}{//      LogComponentEnable ("MmWaveFlexTtiMacScheduler", LOG\_LEVEL\_DEBUG);}
65         \hyperlink{namespacens3_adc4ef4f00bb2f5f4edae67fc3bc27f20}{LogComponentEnable} (\textcolor{stringliteral}{"MmWaveFlexTtiMaxWeightMacScheduler"}, 
      \hyperlink{namespacens3_aa6464a4d69551a9cc968e17a65f39bdbabc85ae851e992c4d8577705c712061ef}{LOG\_LEVEL\_DEBUG});
66         \textcolor{comment}{//LogComponentEnable ("OnOffApplication", LOG\_LEVEL\_INFO);}
67 \textcolor{comment}{//      LogComponentEnable ("LteRlcAm", LOG\_LEVEL\_LOGIC);}
68         \textcolor{comment}{//LogComponentEnable ("LteRlcUm", LOG\_LEVEL\_LOGIC);}
69         \textcolor{comment}{//LogComponentEnable ("MmWaveUeMac", LOG\_LEVEL\_LOGIC);}
70         \textcolor{comment}{//LogComponentEnable ("UdpClient", LOG\_LEVEL\_INFO);}
71         \textcolor{comment}{//LogComponentEnable ("PacketSink", LOG\_LEVEL\_INFO);}
72         \textcolor{comment}{//LogComponentEnable("PropagationLossModel",LOG\_LEVEL\_ALL);}
73 
74 
75         uint16\_t numEnb = 1;
76         uint16\_t numUe = 1;
77         \textcolor{keywordtype}{double} simTime = 5.0;
78         \textcolor{keywordtype}{double} interPacketInterval = 100;  \textcolor{comment}{// 500 microseconds}
79         \textcolor{keywordtype}{double} minDistance = 10.0;  \textcolor{comment}{// eNB-UE distance in meters}
80         \textcolor{keywordtype}{double} maxDistance = 200.0;  \textcolor{comment}{// eNB-UE distance in meters}
81         \textcolor{keywordtype}{bool} harqEnabled = \textcolor{keyword}{true};
82         \textcolor{keywordtype}{bool} rlcAmEnabled = \textcolor{keyword}{false};
83         \textcolor{keywordtype}{bool} fixedTti = \textcolor{keyword}{false};
84         \textcolor{keywordtype}{unsigned} symPerSf = 24;
85         \textcolor{keywordtype}{double} sfPeriod = 100.0;
86         \textcolor{keywordtype}{unsigned} \hyperlink{generate__test__data__lte__spectrum__value__txpsd_8m_a093eaf8ac95b223aafb28e4668160d1f}{run} = 0;
87 
88 
89         \textcolor{comment}{// Command line arguments}
90         \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
91         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"numEnb"}, \textcolor{stringliteral}{"Number of eNBs"}, numEnb);
92         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"numUe"}, \textcolor{stringliteral}{"Number of UEs per eNB"}, numUe);
93         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"simTime"}, \textcolor{stringliteral}{"Total duration of the simulation [s])"}, simTime);
94         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"interPacketInterval"}, \textcolor{stringliteral}{"Inter-packet interval [us])"}, interPacketInterval);
95         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"harq"}, \textcolor{stringliteral}{"Enable Hybrid ARQ"}, harqEnabled);
96         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"rlcAm"}, \textcolor{stringliteral}{"Enable RLC-AM"}, rlcAmEnabled);
97         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"symPerSf"}, \textcolor{stringliteral}{"OFDM symbols per subframe"}, symPerSf);
98         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"sfPeriod"}, \textcolor{stringliteral}{"Subframe period = 4.16 * symPerSf"}, sfPeriod);
99         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"fixedTti"}, \textcolor{stringliteral}{"Fixed TTI scheduler"}, fixedTti);
100         cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue}(\textcolor{stringliteral}{"run"}, \textcolor{stringliteral}{"run for RNG (for generating different deterministic sequences for
       different drops)"}, fixedTti);
101         cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse}(argc, argv);
102 
103         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWaveHelper::RlcAmEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue}(rlcAmEnabled));
104         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWaveHelper::HarqEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue}(harqEnabled));
105         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWaveFlexTtiMacScheduler::HarqEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue}(harqEnabled));
106         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWaveFlexTtiMaxWeightMacScheduler::HarqEnabled"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue}(harqEnabled));
107         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWaveFlexTtiMaxWeightMacScheduler::FixedTti"}, 
      \hyperlink{classns3_1_1BooleanValue}{BooleanValue}(fixedTti));
108         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWaveFlexTtiMaxWeightMacScheduler::SymPerSlot"}, 
      UintegerValue(6));
109         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWavePhyMacCommon::ResourceBlockNum"}, UintegerValue(1)
      );
110         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWavePhyMacCommon::ChunkPerRB"}, UintegerValue(72));
111         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWavePhyMacCommon::SymbolsPerSubframe"}, UintegerValue(
      symPerSf));
112         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWavePhyMacCommon::SubframePeriod"}, DoubleValue(
      sfPeriod));
113         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWavePhyMacCommon::TbDecodeLatency"}, UintegerValue(200
      .0));
114         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::MmWaveBeamforming::LongTermUpdatePeriod"}, TimeValue (
      \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (100000.0)));
115         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteEnbRrc::SystemInformationPeriodicity"}, TimeValue (
      \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (5.0)));
116         \textcolor{comment}{//Config::SetDefault ("ns3::MmWavePropagationLossModel::ChannelStates", StringValue ("n"));}
117         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteRlcAm::ReportBufferStatusTimer"}, TimeValue(
      \hyperlink{group__timecivil_ga17465a639c8d1464e76538afdd78a9f0}{MicroSeconds}(100.0)));
118         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteRlcUmLowLat::ReportBufferStatusTimer"}, TimeValue(
      \hyperlink{group__timecivil_ga17465a639c8d1464e76538afdd78a9f0}{MicroSeconds}(100.0)));
119         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteEnbRrc::SrsPeriodicity"}, UintegerValue (320));
120         \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::LteEnbRrc::FirstSibTime"}, UintegerValue (2));
121 
122         RngSeedManager::SetSeed (1234);
123         RngSeedManager::SetRun (run);
124 
125         \hyperlink{classns3_1_1Ptr}{Ptr<MmWaveHelper>} mmwaveHelper = CreateObject<MmWaveHelper> ();
126         mmwaveHelper->\hyperlink{classns3_1_1MmWaveHelper_ae38f5e96d749ab63dda7746f43dfbe84}{SetSchedulerType} (\textcolor{stringliteral}{"ns3::MmWaveFlexTtiMaxWeightMacScheduler"});
127         \textcolor{comment}{//mmwaveHelper->SetSchedulerType ("ns3::MmWaveFlexTtiMacScheduler");}
128         \hyperlink{classns3_1_1Ptr}{Ptr<MmWavePointToPointEpcHelper>}  epcHelper = 
      CreateObject<MmWavePointToPointEpcHelper> ();
129         mmwaveHelper->\hyperlink{classns3_1_1MmWaveHelper_a54fc98a649a710153b479d0878558733}{SetEpcHelper} (epcHelper);
130         mmwaveHelper->\hyperlink{classns3_1_1MmWaveHelper_af211a02952ab5f4eabe0219cf53e7e1c}{SetHarqEnabled} (harqEnabled);
131 
132         \hyperlink{classns3_1_1ConfigStore}{ConfigStore} inputConfig;
133         inputConfig.\hyperlink{classns3_1_1ConfigStore_a0a6137574d7c847c3823af8b9d1bb886}{ConfigureDefaults}();
134 
135         \textcolor{comment}{// parse again so you can override default values from the command line}
136         cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse}(argc, argv);
137 
138         \hyperlink{classns3_1_1Ptr}{Ptr<Node>} pgw = epcHelper->\hyperlink{classns3_1_1MmWavePointToPointEpcHelper_a586f072ee5b09376531ba605b3fed05f}{GetPgwNode} ();
139 
140         \textcolor{comment}{// Create a single RemoteHost}
141         \hyperlink{classns3_1_1NodeContainer}{NodeContainer} remoteHostContainer;
142         remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create} (1);
143         \hyperlink{classns3_1_1Ptr}{Ptr<Node>} remoteHost = remoteHostContainer.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (0);
144         \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
145         internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (remoteHostContainer);
146 
147         \textcolor{comment}{// Create the Internet}
148         \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} p2ph;
149         p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"DataRate"}, DataRateValue (
      \hyperlink{classns3_1_1DataRate}{DataRate} (\textcolor{stringliteral}{"100Gb/s"})));
150         p2ph.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute} (\textcolor{stringliteral}{"Mtu"}, UintegerValue (1500));
151         p2ph.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, TimeValue (
      \hyperlink{group__timecivil_ga17465a639c8d1464e76538afdd78a9f0}{MicroSeconds} (100.0)));
152         \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} internetDevices = p2ph.\hyperlink{classns3_1_1PointToPointHelper_ab9162fea3e88722666fed1106df1f9ec}{Install} (pgw, remoteHost);
153         \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} ipv4h;
154         ipv4h.\hyperlink{classns3_1_1Ipv4AddressHelper_acf7b16dd25bac67e00f5e25f90a9a035}{SetBase} (\textcolor{stringliteral}{"1.0.0.0"}, \textcolor{stringliteral}{"255.0.0.0"});
155         \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} internetIpIfaces = ipv4h.
      \hyperlink{classns3_1_1Ipv4AddressHelper_af8e7f4a1a7e74c00014a1eac445a27af}{Assign} (internetDevices);
156         \textcolor{comment}{// interface 0 is localhost, 1 is the p2p device}
157         \textcolor{comment}{//Ipv4Address remoteHostAddr = internetIpIfaces.GetAddress (1);}
158 
159         \hyperlink{classns3_1_1Ipv4StaticRoutingHelper}{Ipv4StaticRoutingHelper} ipv4RoutingHelper;
160         \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} remoteHostStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (remoteHost->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());
161         remoteHostStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_a8bf5eaa7ba49fe33c78c70d5560b6c39}{AddNetworkRouteTo} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4Address} (\textcolor{stringliteral}{"7.0.0.0"}), 
      \hyperlink{classns3_1_1Ipv4Mask}{Ipv4Mask} (\textcolor{stringliteral}{"255.0.0.0"}), 1);
162 
163         \hyperlink{classns3_1_1NodeContainer}{NodeContainer} ueNodes;
164         \hyperlink{classns3_1_1NodeContainer}{NodeContainer} enbNodes;
165         enbNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create}(numEnb);
166         ueNodes.\hyperlink{classns3_1_1NodeContainer_a787f059e2813e8b951cc6914d11dfe69}{Create}(numUe);
167 
168         \textcolor{comment}{// Install Mobility Model}
169         \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} enbPositionAlloc = 
      CreateObject<ListPositionAllocator> ();
170         enbPositionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (0.0, 0.0, 0.0));
171         \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} enbmobility;
172         enbmobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
173         enbmobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator}(enbPositionAlloc);
174         enbmobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (enbNodes);
175 
176         \hyperlink{classns3_1_1MobilityHelper}{MobilityHelper} uemobility;
177         \hyperlink{classns3_1_1Ptr}{Ptr<ListPositionAllocator>} uePositionAlloc = 
      CreateObject<ListPositionAllocator> ();
178         \hyperlink{classns3_1_1Ptr}{Ptr<UniformRandomVariable>} distRv = CreateObject<UniformRandomVariable> (
      );
179 
180         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < numUe; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
181         \{
182                 \textcolor{keywordtype}{double} dist = distRv->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (minDistance, maxDistance);
183                 uePositionAlloc->\hyperlink{classns3_1_1ListPositionAllocator_a460e82f015ac012a73ba0ea0cccb3486}{Add} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (dist, 0.0, 0.0));
184         \}
185         uemobility.\hyperlink{classns3_1_1MobilityHelper_a030275011b6f40682e70534d30280aba}{SetMobilityModel} (\textcolor{stringliteral}{"ns3::ConstantPositionMobilityModel"});
186         uemobility.\hyperlink{classns3_1_1MobilityHelper_ac59d5295076be3cc11021566713a28c5}{SetPositionAllocator}(uePositionAlloc);
187         uemobility.\hyperlink{classns3_1_1MobilityHelper_a07737960ee95c0777109cf2994dd97ae}{Install} (ueNodes);
188 
189         \textcolor{comment}{// Install mmWave Devices to the nodes}
190         \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} enbmmWaveDevs = mmwaveHelper->InstallEnbDevice (enbNodes);
191         \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} uemmWaveDevs = mmwaveHelper->
      \hyperlink{classns3_1_1MmWaveHelper_a9311c819d7ee539c8710c5b7e98df37a}{InstallUeDevice} (ueNodes);
192 
193         \textcolor{comment}{// Install the IP stack on the UEs}
194         internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (ueNodes);
195         \hyperlink{classns3_1_1Ipv4InterfaceContainer}{Ipv4InterfaceContainer} ueIpIface;
196         ueIpIface = epcHelper->\hyperlink{classns3_1_1MmWavePointToPointEpcHelper_ad96757d4c63d33f683dce1b5d6bca3b9}{AssignUeIpv4Address} (
      \hyperlink{classns3_1_1NetDeviceContainer}{NetDeviceContainer} (uemmWaveDevs));
197         \textcolor{comment}{// Assign IP address to UEs, and install applications}
198         \textcolor{keywordflow}{for} (uint32\_t u = 0; u < ueNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} (); ++u)
199         \{
200                 \hyperlink{classns3_1_1Ptr}{Ptr<Node>} ueNode = ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get} (u);
201                 \textcolor{comment}{// Set the default gateway for the UE}
202                 \hyperlink{classns3_1_1Ptr}{Ptr<Ipv4StaticRouting>} ueStaticRouting = ipv4RoutingHelper.
      \hyperlink{classns3_1_1Ipv4StaticRoutingHelper_a731206e50d305695dac7fb2ef963a4bb}{GetStaticRouting} (ueNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv4}{Ipv4}> ());
203                 ueStaticRouting->\hyperlink{classns3_1_1Ipv4StaticRouting_aee30fa3246c2b42f122dabdff2725331}{SetDefaultRoute} (epcHelper->
      \hyperlink{classns3_1_1MmWavePointToPointEpcHelper_afefac14ad79ff059b052305013d2beb3}{GetUeDefaultGatewayAddress} (), 1);
204         \}
205 
206         mmwaveHelper->\hyperlink{classns3_1_1MmWaveHelper_a202baea67b0af0d4fb6069de73766dc6}{AttachToClosestEnb} (uemmWaveDevs, enbmmWaveDevs);
207 
208         \textcolor{comment}{// Install and start applications on UEs and remote host}
209         uint16\_t dlPort = 1234;
210         uint16\_t ulPort = 2000;
211         uint16\_t otherPort = 3000;
212         \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} clientApps;
213         \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} serverApps;
214         uint32\_t packetSize = 1400;
215 
216         \textcolor{keywordtype}{double} dataRateMB = 100e6;  \textcolor{comment}{// 100 MBps}
217         \textcolor{keywordtype}{double} onTimeSec = 5e-6; \textcolor{comment}{//packetSize / dataRateMB;}
218         std::stringstream ss;
219         ss << \textcolor{stringliteral}{"ns3::ConstantRandomVariable[Constant="} << onTimeSec << \textcolor{stringliteral}{"]"};
220         std::cout << \textcolor{stringliteral}{"OnTime == "} << ss.str() << std::endl;
221         \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} dlClient (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), dlPort));
222         \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} ulClient (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), ulPort));
223         dlClient.SetAttribute (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (packetSize));
224         ulClient.SetAttribute (\textcolor{stringliteral}{"PacketSize"}, UintegerValue (packetSize));
225         dlClient.SetAttribute (\textcolor{stringliteral}{"DataRate"}, DataRateValue (8*dataRateMB));
226         ulClient.SetAttribute (\textcolor{stringliteral}{"DataRate"}, DataRateValue (8*dataRateMB));
227         dlClient.SetAttribute (\textcolor{stringliteral}{"OnTime"}, StringValue (ss.str ()));
228         ulClient.SetAttribute (\textcolor{stringliteral}{"OnTime"}, StringValue (ss.str ()));
229         ss.str(\textcolor{stringliteral}{""});
230         ss << \textcolor{stringliteral}{"ns3::ExponentialRandomVariable[Mean="} << interPacketInterval*1e-6 << \textcolor{stringliteral}{"]"};
231         std::cout << \textcolor{stringliteral}{"OffTime == "} << ss.str() << std::endl;
232         dlClient.SetAttribute (\textcolor{stringliteral}{"OffTime"}, StringValue (ss.str ()));
233         ulClient.SetAttribute (\textcolor{stringliteral}{"OffTime"}, StringValue (ss.str ()));
234 
235         \textcolor{keywordflow}{for} (uint32\_t u = 0; u < ueNodes.\hyperlink{classns3_1_1NodeContainer_aed647ac56d0407a7706aba02eb44b951}{GetN} (); ++u)
236         \{
237                 ++ulPort;
238                 ++otherPort;
239                 \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} dlPacketSinkHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), dlPort));
240                 \hyperlink{classns3_1_1PacketSinkHelper}{PacketSinkHelper} ulPacketSinkHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, 
      \hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (Ipv4Address::GetAny (), ulPort));
241                 serverApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (dlPacketSinkHelper.Install (ueNodes.\hyperlink{classns3_1_1NodeContainer_a9ed96e2ecc22e0f5a3d4842eb9bf90bf}{Get}(u)));
242                 serverApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (ulPacketSinkHelper.Install (remoteHost));
243 
244 \textcolor{comment}{//              UdpClientHelper dlClient (ueIpIface.GetAddress (u), dlPort);}
245 \textcolor{comment}{//              dlClient.SetAttribute ("Interval", TimeValue (MicroSeconds(interPacketInterval)));}
246 \textcolor{comment}{//              dlClient.SetAttribute ("MaxPackets", UintegerValue(1000000));}
247 \textcolor{comment}{//              dlClient.SetAttribute ("PacketSize", UintegerValue(packetSize));}
248 \textcolor{comment}{//}
249 \textcolor{comment}{//              UdpClientHelper ulClient (remoteHostAddr, ulPort);}
250 \textcolor{comment}{//              ulClient.SetAttribute ("Interval", TimeValue (MicroSeconds(interPacketInterval)));}
251 \textcolor{comment}{//              ulClient.SetAttribute ("MaxPackets", UintegerValue(1000000));}
252 \textcolor{comment}{//              ulClient.SetAttribute ("PacketSize", UintegerValue(packetSize));}
253 
254                 \textcolor{comment}{//UdpClientHelper client (ueIpIface.GetAddress (u), otherPort);}
255                 \textcolor{comment}{//client.SetAttribute ("Interval", TimeValue (MicroSeconds(interPacketInterval)));}
256                 \textcolor{comment}{//client.SetAttribute ("MaxPackets", UintegerValue(1000000));}
257                 dlClient.SetAttribute (\textcolor{stringliteral}{"Remote"}, AddressValue (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (
      ueIpIface.\hyperlink{classns3_1_1Ipv4InterfaceContainer_ae63208dcd222be986822937ee4aa828c}{GetAddress} (u), dlPort)));
258                 \textcolor{comment}{//ulClient.SetAttribute ("Remote", AddressValue (InetSocketAddress (remoteHostAddr,
       ulPort)));}
259 
260                 clientApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (dlClient.Install (remoteHost));
261 \textcolor{comment}{//              clientApps.Add (ulClient.Install (ueNodes.Get(u)));}
262 \textcolor{comment}{//              if (u+1 < ueNodes.GetN ())}
263 \textcolor{comment}{//              \{}
264 \textcolor{comment}{//                      clientApps.Add (client.Install (ueNodes.Get(u+1)));}
265 \textcolor{comment}{//              \}}
266 \textcolor{comment}{//              else}
267 \textcolor{comment}{//              \{}
268 \textcolor{comment}{//                      clientApps.Add (client.Install (ueNodes.Get(0)));}
269 \textcolor{comment}{//              \}}
270         \}
271         serverApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.003));
272         clientApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.003));
273         mmwaveHelper->\hyperlink{classns3_1_1MmWaveHelper_a4eae3871876b62965d612d9a56ed21bc}{EnableTraces} ();
274         \textcolor{comment}{// Uncomment to enable PCAP tracing}
275         \textcolor{comment}{//p2ph.EnablePcapAll("mmwave-epc-simple");}
276 
277         Simulator::Stop(\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds}(simTime));
278         Simulator::Run();
279 
280         \textcolor{comment}{/*GtkConfigStore config;}
281 \textcolor{comment}{  config.ConfigureAttributes();*/}
282 
283         Simulator::Destroy();
284         \textcolor{keywordflow}{return} 0;
285 
286 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{mmwave-\/epc-\/tdma.\+cc@{mmwave-\/epc-\/tdma.\+cc}!N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}}
\index{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}!mmwave-\/epc-\/tdma.\+cc@{mmwave-\/epc-\/tdma.\+cc}}
\subsubsection[{\texorpdfstring{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+N\+E(""Mm\+Wave\+Epc\+Tdma"")}{NS_LOG_COMPONENT_DEFINE("MmWaveEpcTdma")}}]{\setlength{\rightskip}{0pt plus 5cm}N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE (
\begin{DoxyParamCaption}
\item[{\char`\"{}Mm\+Wave\+Epc\+Tdma\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{mmwave-epc-tdma_8cc_a4b6e3fef4d253f684454852e5c4d3396}{}\label{mmwave-epc-tdma_8cc_a4b6e3fef4d253f684454852e5c4d3396}
Sample simulation script for L\+T\+E+\+E\+PC. It instantiates several e\+NodeB, attaches one UE per e\+NodeB starts a flow for each UE to and from a remote host. It also starts yet another flow between each UE pair. 