\hypertarget{classTcpHtcpIncrementTest}{}\section{Tcp\+Htcp\+Increment\+Test Class Reference}
\label{classTcpHtcpIncrementTest}\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}


Testing the congestion avoidance increment on Tcp\+Htcp.  




Inheritance diagram for Tcp\+Htcp\+Increment\+Test\+:
% FIG 0


Collaboration diagram for Tcp\+Htcp\+Increment\+Test\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTcpHtcpIncrementTest_ad98fd33adc71a8c8c6225575cff5f223}{Tcp\+Htcp\+Increment\+Test} (uint32\+\_\+t c\+Wnd, uint32\+\_\+t segment\+Size, uint32\+\_\+t segments\+Acked, \hyperlink{classns3_1_1Time}{Time} last\+Congestion, \hyperlink{classns3_1_1Time}{Time} first\+Ack, \hyperlink{classns3_1_1Time}{Time} second\+Ack, uint32\+\_\+t expected\+Cwnd, const std\+::string \&\hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name})
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classTcpHtcpIncrementTest_a0fa1bb539a4ff1b134949e80608d0ffa}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Since the calculation depends on the throughput and its associated timing, we schedule a few exact events. We get the value from H\+T\+CP methods during the simulation and compare them with their associated expected values calculated from the algorithm by hand. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \hyperlink{classTcpHtcpIncrementTest_a76dde1fff1851661480d009b05064d5d}{m\+\_\+c\+Wnd}
\begin{DoxyCompactList}\small\item\em Congestion window. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpHtcpIncrementTest_ad8ec2faf12b693a0cbddd454af54aa70}{m\+\_\+segment\+Size}
\begin{DoxyCompactList}\small\item\em Segment size. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}{m\+\_\+segments\+Acked}
\begin{DoxyCompactList}\small\item\em Segments already A\+C\+Ked. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classTcpHtcpIncrementTest_a497d4d2a1569ce8d34bbd358a71d1148}{m\+\_\+last\+Congestion}
\begin{DoxyCompactList}\small\item\em Last congestion time. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classTcpHtcpIncrementTest_ae12dc2d9ff37347a0e7e11c1fa61ccf4}{m\+\_\+first\+Ack}
\begin{DoxyCompactList}\small\item\em First A\+CK time. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classTcpHtcpIncrementTest_a3e1e1e7ec629ab9a9f923749cfff3c5b}{m\+\_\+second\+Ack}
\begin{DoxyCompactList}\small\item\em Second A\+CK time. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classTcpHtcpIncrementTest_acb68aafab99bed10ddc20740386adb90}{m\+\_\+expected\+Cwnd}
\begin{DoxyCompactList}\small\item\em Expected c\+Wnd. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} $>$ \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\+\_\+state}
\begin{DoxyCompactList}\small\item\em T\+CP socket state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Testing the congestion avoidance increment on Tcp\+Htcp. 

\subsection{Constructor \& Destructor Documentation}
\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{Tcp\+Htcp\+Increment\+Test(uint32\+\_\+t c\+Wnd, uint32\+\_\+t segment\+Size, uint32\+\_\+t segments\+Acked, Time last\+Congestion, Time first\+Ack, Time second\+Ack, uint32\+\_\+t expected\+Cwnd, const std\+::string \&name)}{TcpHtcpIncrementTest(uint32_t cWnd, uint32_t segmentSize, uint32_t segmentsAcked, Time lastCongestion, Time firstAck, Time secondAck, uint32_t expectedCwnd, const std::string &name)}}]{\setlength{\rightskip}{0pt plus 5cm}Tcp\+Htcp\+Increment\+Test\+::\+Tcp\+Htcp\+Increment\+Test (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{c\+Wnd, }
\item[{uint32\+\_\+t}]{segment\+Size, }
\item[{uint32\+\_\+t}]{segments\+Acked, }
\item[{{\bf Time}}]{last\+Congestion, }
\item[{{\bf Time}}]{first\+Ack, }
\item[{{\bf Time}}]{second\+Ack, }
\item[{uint32\+\_\+t}]{expected\+Cwnd, }
\item[{const std\+::string \&}]{name}
\end{DoxyParamCaption}
)}\hypertarget{classTcpHtcpIncrementTest_ad98fd33adc71a8c8c6225575cff5f223}{}\label{classTcpHtcpIncrementTest_ad98fd33adc71a8c8c6225575cff5f223}


Constructor. 


\begin{DoxyParams}{Parameters}
{\em c\+Wnd} & Congestion window. \\
\hline
{\em segment\+Size} & Segment size. \\
\hline
{\em segments\+Acked} & Segments already A\+C\+Ked. \\
\hline
{\em last\+Congestion} & Last congestion time. \\
\hline
{\em first\+Ack} & First A\+CK time. \\
\hline
{\em second\+Ack} & Second A\+CK time. \\
\hline
{\em expected\+Cwnd} & Expected c\+Wnd. \\
\hline
{\em name} & Test description. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
78   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\hyperlink{generate__test__data__lte__spectrum__model_8m_ab74e6bf80237ddc4109968cedc58c151}{name}),
79     \hyperlink{classTcpHtcpIncrementTest_a76dde1fff1851661480d009b05064d5d}{m\_cWnd} (cWnd),
80     \hyperlink{classTcpHtcpIncrementTest_ad8ec2faf12b693a0cbddd454af54aa70}{m\_segmentSize} (segmentSize),
81     \hyperlink{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}{m\_segmentsAcked} (segmentsAcked),
82     \hyperlink{classTcpHtcpIncrementTest_a497d4d2a1569ce8d34bbd358a71d1148}{m\_lastCongestion} (lastCongestion),
83     \hyperlink{classTcpHtcpIncrementTest_ae12dc2d9ff37347a0e7e11c1fa61ccf4}{m\_firstAck} (firstAck),
84     \hyperlink{classTcpHtcpIncrementTest_a3e1e1e7ec629ab9a9f923749cfff3c5b}{m\_secondAck} (secondAck),
85     \hyperlink{classTcpHtcpIncrementTest_acb68aafab99bed10ddc20740386adb90}{m\_expectedCwnd} (expectedCwnd)
86 \{
87 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\+Htcp\+Increment\+Test\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classTcpHtcpIncrementTest_a0fa1bb539a4ff1b134949e80608d0ffa}{}\label{classTcpHtcpIncrementTest_a0fa1bb539a4ff1b134949e80608d0ffa}


Since the calculation depends on the throughput and its associated timing, we schedule a few exact events. We get the value from H\+T\+CP methods during the simulation and compare them with their associated expected values calculated from the algorithm by hand. 



Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
97 \{
98   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
99   \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state} = CreateObject<TcpSocketState> ();
100 
101   \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} = \hyperlink{classTcpHtcpIncrementTest_a76dde1fff1851661480d009b05064d5d}{m\_cWnd};
102   \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize} = \hyperlink{classTcpHtcpIncrementTest_ad8ec2faf12b693a0cbddd454af54aa70}{m\_segmentSize};
103 
104   \hyperlink{classns3_1_1Ptr}{Ptr<TcpHtcp>} cong = CreateObject<TcpHtcp> ();
105   \hyperlink{classns3_1_1Time}{Time} lastCongestion;
106 
107   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"m\_cWnd: "} << \hyperlink{classTcpHtcpIncrementTest_a76dde1fff1851661480d009b05064d5d}{m\_cWnd} << \textcolor{stringliteral}{" m\_segmentSize: "} << 
      \hyperlink{classTcpHtcpIncrementTest_ad8ec2faf12b693a0cbddd454af54aa70}{m\_segmentSize} <<
108                 \textcolor{stringliteral}{" m\_segmentsAcked: "} << \hyperlink{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}{m\_segmentsAcked} << \textcolor{stringliteral}{" m\_lastCongestion"} << 
      \hyperlink{classTcpHtcpIncrementTest_a497d4d2a1569ce8d34bbd358a71d1148}{m\_lastCongestion});
109   Simulator::Schedule (\hyperlink{classns3_1_1Time}{Time} (\hyperlink{classTcpHtcpIncrementTest_a497d4d2a1569ce8d34bbd358a71d1148}{m\_lastCongestion}), &TcpHtcp::GetSsThresh, cong,
110                        \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state}, \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd});
111   lastCongestion = \hyperlink{classTcpHtcpIncrementTest_a497d4d2a1569ce8d34bbd358a71d1148}{m\_lastCongestion};
112   Simulator::Schedule (\hyperlink{classns3_1_1Time}{Time} (\hyperlink{classTcpHtcpIncrementTest_ae12dc2d9ff37347a0e7e11c1fa61ccf4}{m\_firstAck}), &TcpHtcp::PktsAcked, cong, 
      \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state},
113                        \hyperlink{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}{m\_segmentsAcked}, \hyperlink{classns3_1_1Time}{Time} (
      \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{ns3::MilliSeconds} (80)));
114   Simulator::Schedule (\hyperlink{classns3_1_1Time}{Time} (\hyperlink{classTcpHtcpIncrementTest_a3e1e1e7ec629ab9a9f923749cfff3c5b}{m\_secondAck}), &TcpHtcp::PktsAcked, cong, 
      \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state},
115                        \hyperlink{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}{m\_segmentsAcked}, \hyperlink{classns3_1_1Time}{Time} (
      \hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{ns3::MilliSeconds} (100)));
116 
117   Simulator::Run ();
118   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Simulation ran for the scheduled events"});
119 
120   cong->\hyperlink{classns3_1_1TcpNewReno_a11db8ae90f4cebacc15524a793b0741a}{IncreaseWindow} (\hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state}, \hyperlink{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}{m\_segmentsAcked});
121   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} ( \textcolor{stringliteral}{"m\_cwnd from function: "} << \hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} << \textcolor{stringliteral}{" expected cWnd
       calculated: "} << \hyperlink{classTcpHtcpIncrementTest_acb68aafab99bed10ddc20740386adb90}{m\_expectedCwnd});
122 
123   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{m\_state}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} (), 
      \hyperlink{classTcpHtcpIncrementTest_acb68aafab99bed10ddc20740386adb90}{m\_expectedCwnd},
124                          \textcolor{stringliteral}{"CWnd has not updated correctly"});
125 
126   Simulator::Destroy ();
127 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




\subsection{Member Data Documentation}
\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+c\+Wnd@{m\+\_\+c\+Wnd}}
\index{m\+\_\+c\+Wnd@{m\+\_\+c\+Wnd}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+c\+Wnd}{m_cWnd}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Htcp\+Increment\+Test\+::m\+\_\+c\+Wnd\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_a76dde1fff1851661480d009b05064d5d}{}\label{classTcpHtcpIncrementTest_a76dde1fff1851661480d009b05064d5d}


Congestion window. 

\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+expected\+Cwnd@{m\+\_\+expected\+Cwnd}}
\index{m\+\_\+expected\+Cwnd@{m\+\_\+expected\+Cwnd}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+expected\+Cwnd}{m_expectedCwnd}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Htcp\+Increment\+Test\+::m\+\_\+expected\+Cwnd\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_acb68aafab99bed10ddc20740386adb90}{}\label{classTcpHtcpIncrementTest_acb68aafab99bed10ddc20740386adb90}


Expected c\+Wnd. 

\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+first\+Ack@{m\+\_\+first\+Ack}}
\index{m\+\_\+first\+Ack@{m\+\_\+first\+Ack}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+first\+Ack}{m_firstAck}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} Tcp\+Htcp\+Increment\+Test\+::m\+\_\+first\+Ack\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_ae12dc2d9ff37347a0e7e11c1fa61ccf4}{}\label{classTcpHtcpIncrementTest_ae12dc2d9ff37347a0e7e11c1fa61ccf4}


First A\+CK time. 

\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+last\+Congestion@{m\+\_\+last\+Congestion}}
\index{m\+\_\+last\+Congestion@{m\+\_\+last\+Congestion}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+last\+Congestion}{m_lastCongestion}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} Tcp\+Htcp\+Increment\+Test\+::m\+\_\+last\+Congestion\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_a497d4d2a1569ce8d34bbd358a71d1148}{}\label{classTcpHtcpIncrementTest_a497d4d2a1569ce8d34bbd358a71d1148}


Last congestion time. 

\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+second\+Ack@{m\+\_\+second\+Ack}}
\index{m\+\_\+second\+Ack@{m\+\_\+second\+Ack}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+second\+Ack}{m_secondAck}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} Tcp\+Htcp\+Increment\+Test\+::m\+\_\+second\+Ack\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_a3e1e1e7ec629ab9a9f923749cfff3c5b}{}\label{classTcpHtcpIncrementTest_a3e1e1e7ec629ab9a9f923749cfff3c5b}


Second A\+CK time. 

\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+segments\+Acked@{m\+\_\+segments\+Acked}}
\index{m\+\_\+segments\+Acked@{m\+\_\+segments\+Acked}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+segments\+Acked}{m_segmentsAcked}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Htcp\+Increment\+Test\+::m\+\_\+segments\+Acked\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}{}\label{classTcpHtcpIncrementTest_a6f33c48257c870135c934ae9f1772432}


Segments already A\+C\+Ked. 

\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+segment\+Size@{m\+\_\+segment\+Size}}
\index{m\+\_\+segment\+Size@{m\+\_\+segment\+Size}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+segment\+Size}{m_segmentSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Tcp\+Htcp\+Increment\+Test\+::m\+\_\+segment\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_ad8ec2faf12b693a0cbddd454af54aa70}{}\label{classTcpHtcpIncrementTest_ad8ec2faf12b693a0cbddd454af54aa70}


Segment size. 

\index{Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}!m\+\_\+state@{m\+\_\+state}}
\index{m\+\_\+state@{m\+\_\+state}!Tcp\+Htcp\+Increment\+Test@{Tcp\+Htcp\+Increment\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+state}{m_state}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Tcp\+Socket\+State}$>$ Tcp\+Htcp\+Increment\+Test\+::m\+\_\+state\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}{}\label{classTcpHtcpIncrementTest_acdf9e9924087e9410acd0f0060dd3131}


T\+CP socket state. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{tcp-htcp-test_8cc}{tcp-\/htcp-\/test.\+cc}\end{DoxyCompactItemize}
