\hypertarget{classns3_1_1PfFfMacScheduler}{}\section{ns3\+:\+:Pf\+Ff\+Mac\+Scheduler Class Reference}
\label{classns3_1_1PfFfMacScheduler}\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}


Implements the S\+C\+H\+ED S\+AP and C\+S\+C\+H\+ED S\+AP for a Proportional Fair scheduler.  




{\ttfamily \#include $<$pf-\/ff-\/mac-\/scheduler.\+h$>$}



Inheritance diagram for ns3\+:\+:Pf\+Ff\+Mac\+Scheduler\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Pf\+Ff\+Mac\+Scheduler\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1PfFfMacScheduler_ad972377fd4997d9bf0b8193e69f20a16}{Pf\+Ff\+Mac\+Scheduler} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1PfFfMacScheduler_a5393a928efa6e15a722b4017ce6e1722}{$\sim$\+Pf\+Ff\+Mac\+Scheduler} ()
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_a8dcc458e09d58658d878ac38e6ab53b2}{Do\+Dispose} (void)
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_a321a45d0b943975e8a4d6864e7d1c77a}{Set\+Ff\+Mac\+Csched\+Sap\+User} (\hyperlink{classns3_1_1FfMacCschedSapUser}{Ff\+Mac\+Csched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_a8a140242b29416a972e7cbec6437dda6}{Set\+Ff\+Mac\+Sched\+Sap\+User} (\hyperlink{classns3_1_1FfMacSchedSapUser}{Ff\+Mac\+Sched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1FfMacCschedSapProvider}{Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_abcd84721f95e8b9d01fb8f54f58b906b}{Get\+Ff\+Mac\+Csched\+Sap\+Provider} ()
\item 
virtual \hyperlink{classns3_1_1FfMacSchedSapProvider}{Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a14eca80f3c7bcfbc6c05ad343f06f5cf}{Get\+Ff\+Mac\+Sched\+Sap\+Provider} ()
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_afa1704390f12e82562177e34113df9ab}{Set\+Lte\+Ffr\+Sap\+Provider} (\hyperlink{classns3_1_1LteFfrSapProvider}{Lte\+Ffr\+Sap\+Provider} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1LteFfrSapUser}{Lte\+Ffr\+Sap\+User} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a82ba8d180a3861f267f76d79c62a724b}{Get\+Lte\+Ffr\+Sap\+User} ()
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a1f5050d19fecb18a52f429ae7ec14964}{Transmission\+Mode\+Configuration\+Update} (uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)
\item 
\hyperlink{classns3_1_1PfFfMacScheduler_ad972377fd4997d9bf0b8193e69f20a16}{Pf\+Ff\+Mac\+Scheduler} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1PfFfMacScheduler_aa25efcda60eeeb32487ee4fbff5cf0b4}{$\sim$\+Pf\+Ff\+Mac\+Scheduler} ()
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_ab77ff38d8dedac8bd5c87142429cdf8d}{Do\+Dispose} (void)
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_ab229f1aa309ec79607ac0d3797d842ff}{Set\+Ff\+Mac\+Csched\+Sap\+User} (\hyperlink{classns3_1_1FfMacCschedSapUser}{Ff\+Mac\+Csched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_a6e7053dd95a82c17010442cc20e3879f}{Set\+Ff\+Mac\+Sched\+Sap\+User} (\hyperlink{classns3_1_1FfMacSchedSapUser}{Ff\+Mac\+Sched\+Sap\+User} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1FfMacCschedSapProvider}{Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a7ff8ac4c9fede4ff56ac1cc69072bfd2}{Get\+Ff\+Mac\+Csched\+Sap\+Provider} ()
\item 
virtual \hyperlink{classns3_1_1FfMacSchedSapProvider}{Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a62b59c7a3df5edd4e12d4c1798bd7f9f}{Get\+Ff\+Mac\+Sched\+Sap\+Provider} ()
\item 
virtual void \hyperlink{classns3_1_1PfFfMacScheduler_ac871ac9e42f185a234071e9bbaa6a243}{Set\+Lte\+Ffr\+Sap\+Provider} (\hyperlink{classns3_1_1LteFfrSapProvider}{Lte\+Ffr\+Sap\+Provider} $\ast$\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s})
\item 
virtual \hyperlink{classns3_1_1LteFfrSapUser}{Lte\+Ffr\+Sap\+User} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a63dbbbc0299a19b252237705779b9e41}{Get\+Lte\+Ffr\+Sap\+User} ()
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a1f5050d19fecb18a52f429ae7ec14964}{Transmission\+Mode\+Configuration\+Update} (uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1PfFfMacScheduler_aa1971c9fcca7029177496d2d21a3fe62}{Get\+Type\+Id} (void)
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1PfFfMacScheduler_ac6cb0b61516c6ca6864bb0c02826602c}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a3b00a50e02e97984baaf5c1f7af073fe}{Do\+Csched\+Cell\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a14c5c3a11693cb0cd2b62c619cdeac38}{Do\+Csched\+Ue\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_acad2f80717b80b448f9a369e1191083f}{Do\+Csched\+Lc\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a6b70af9fc752ab7169daa365ef507cf9}{Do\+Csched\+Lc\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a5dd16a8b96789473248e706923a76583}{Do\+Csched\+Ue\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a3f7ff526905ef203693d1da9d0afff18}{Do\+Sched\+Dl\+Rlc\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRlcBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_aa13d56a7aa8b5045cfbc03146adad2a5}{Do\+Sched\+Dl\+Paging\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlPagingBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a889258e14e1ddfb0f9cab43cb5576eee}{Do\+Sched\+Dl\+Mac\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlMacBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a837f4e59a9df97e0baeda35cf1edbd38}{Do\+Sched\+Dl\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_ada4d1a7cb1fffb89d091f5b54a1a7f42}{Do\+Sched\+Dl\+Rach\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRachInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a0f35f72e423d648ee9464146ed4f4454}{Do\+Sched\+Dl\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a31f30c23ae2d06b51dc81f24cb397e4b}{Do\+Sched\+Ul\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a39febc9ac141bb97d26fa01578a5d07d}{Do\+Sched\+Ul\+Noise\+Interference\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlNoiseInterferenceReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a87361eb8a2ed138ae4030b5c0cc36a22}{Do\+Sched\+Ul\+Sr\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlSrInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a48cf6979a777cda384ae128948bc763a}{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlMacCtrlInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_aee839d62cb98ea021c3f8f92f7348ada}{Do\+Sched\+Ul\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
int \hyperlink{classns3_1_1PfFfMacScheduler_ae707fd496af66bc87fc7e51d212bafc3}{Get\+Rbg\+Size} (int dlbandwidth)
\item 
int \hyperlink{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}{Lc\+Active\+Per\+Flow} (uint16\+\_\+t rnti)
\item 
double \hyperlink{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}{Estimate\+Ul\+Sinr} (uint16\+\_\+t rnti, uint16\+\_\+t rb)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a5388e0f10ab7d36f49d4eb66e53504bd}{Refresh\+Dl\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a6256dfa03daee0f6fcff485dfb6914d4}{Refresh\+Ul\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_aca3332c10f1c59e1279001247ca7da79}{Update\+Dl\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a5c0ac12d11b85ed7b27e81b278ded55d}{Update\+Ul\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint16\+\_\+t size)
\item 
uint8\+\_\+t \hyperlink{classns3_1_1PfFfMacScheduler_ac9ae283895ee58f636597117be34f959}{Update\+Harq\+Process\+Id} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Update and return a new process Id for the R\+N\+TI specified. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}{Harq\+Process\+Availability} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Return the availability of free process for the R\+N\+TI specified. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a00c00addd2a64aea7844298088f66e30}{Refresh\+Harq\+Processes} ()
\begin{DoxyCompactList}\small\item\em Refresh H\+A\+RQ processes according to the timers. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a3b00a50e02e97984baaf5c1f7af073fe}{Do\+Csched\+Cell\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a14c5c3a11693cb0cd2b62c619cdeac38}{Do\+Csched\+Ue\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_acad2f80717b80b448f9a369e1191083f}{Do\+Csched\+Lc\+Config\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a6b70af9fc752ab7169daa365ef507cf9}{Do\+Csched\+Lc\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedLcReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a5dd16a8b96789473248e706923a76583}{Do\+Csched\+Ue\+Release\+Req} (const struct \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedUeReleaseReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a3f7ff526905ef203693d1da9d0afff18}{Do\+Sched\+Dl\+Rlc\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRlcBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_aa13d56a7aa8b5045cfbc03146adad2a5}{Do\+Sched\+Dl\+Paging\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlPagingBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a889258e14e1ddfb0f9cab43cb5576eee}{Do\+Sched\+Dl\+Mac\+Buffer\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlMacBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a837f4e59a9df97e0baeda35cf1edbd38}{Do\+Sched\+Dl\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_ada4d1a7cb1fffb89d091f5b54a1a7f42}{Do\+Sched\+Dl\+Rach\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRachInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a0f35f72e423d648ee9464146ed4f4454}{Do\+Sched\+Dl\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a31f30c23ae2d06b51dc81f24cb397e4b}{Do\+Sched\+Ul\+Trigger\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlTriggerReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a39febc9ac141bb97d26fa01578a5d07d}{Do\+Sched\+Ul\+Noise\+Interference\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlNoiseInterferenceReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a87361eb8a2ed138ae4030b5c0cc36a22}{Do\+Sched\+Ul\+Sr\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlSrInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a48cf6979a777cda384ae128948bc763a}{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlMacCtrlInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&params)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_aee839d62cb98ea021c3f8f92f7348ada}{Do\+Sched\+Ul\+Cqi\+Info\+Req} (const struct \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedUlCqiInfoReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&params)
\item 
int \hyperlink{classns3_1_1PfFfMacScheduler_ae707fd496af66bc87fc7e51d212bafc3}{Get\+Rbg\+Size} (int dlbandwidth)
\item 
int \hyperlink{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}{Lc\+Active\+Per\+Flow} (uint16\+\_\+t rnti)
\item 
double \hyperlink{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}{Estimate\+Ul\+Sinr} (uint16\+\_\+t rnti, uint16\+\_\+t rb)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a5388e0f10ab7d36f49d4eb66e53504bd}{Refresh\+Dl\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a6256dfa03daee0f6fcff485dfb6914d4}{Refresh\+Ul\+Cqi\+Maps} (void)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_aca3332c10f1c59e1279001247ca7da79}{Update\+Dl\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)
\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a5c0ac12d11b85ed7b27e81b278ded55d}{Update\+Ul\+Rlc\+Buffer\+Info} (uint16\+\_\+t rnti, uint16\+\_\+t size)
\item 
uint8\+\_\+t \hyperlink{classns3_1_1PfFfMacScheduler_ac9ae283895ee58f636597117be34f959}{Update\+Harq\+Process\+Id} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Update and return a new process Id for the R\+N\+TI specified. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}{Harq\+Process\+Availability} (uint16\+\_\+t rnti)
\begin{DoxyCompactList}\small\item\em Return the availability of free process for the R\+N\+TI specified. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1PfFfMacScheduler_a00c00addd2a64aea7844298088f66e30}{Refresh\+Harq\+Processes} ()
\begin{DoxyCompactList}\small\item\em Refresh H\+A\+RQ processes according to the timers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1LteAmc}{Lte\+Amc} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\+\_\+amc}
\item 
std\+::map$<$ \hyperlink{structns3_1_1LteFlowId__t}{Lte\+Flow\+Id\+\_\+t}, \hyperlink{structns3_1_1FfMacSchedSapProvider_1_1SchedDlRlcBufferReqParameters}{Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\+\_\+rlc\+Buffer\+Req}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1pfsFlowPerf__t}{pfs\+Flow\+Perf\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\+\_\+flow\+Stats\+Dl}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1pfsFlowPerf__t}{pfs\+Flow\+Perf\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{m\+\_\+flow\+Stats\+Ul}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{m\+\_\+p10\+Cqi\+Rxed}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}{m\+\_\+p10\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{structns3_1_1SbMeasResult__s}{Sb\+Meas\+Result\+\_\+s} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\+\_\+a30\+Cqi\+Rxed}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}{m\+\_\+a30\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ uint16\+\_\+t $>$ $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}{m\+\_\+allocation\+Maps}
\item 
std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ double $>$ $>$ \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\+\_\+ue\+Cqi}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\+\_\+ue\+Cqi\+Timers}
\item 
std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\+\_\+ce\+Bsr\+Rxed}
\item 
\hyperlink{classns3_1_1FfMacCschedSapUser}{Ff\+Mac\+Csched\+Sap\+User} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a8c2e26441f7ea338051bbdf73ce1303a}{m\+\_\+csched\+Sap\+User}
\item 
\hyperlink{classns3_1_1FfMacSchedSapUser}{Ff\+Mac\+Sched\+Sap\+User} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{m\+\_\+sched\+Sap\+User}
\item 
\hyperlink{classns3_1_1FfMacCschedSapProvider}{Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a18621fc8ff9d0fc2ff92977f9ac60b2b}{m\+\_\+csched\+Sap\+Provider}
\item 
\hyperlink{classns3_1_1FfMacSchedSapProvider}{Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_aa647c4209dac594ac05c56ec0335b692}{m\+\_\+sched\+Sap\+Provider}
\item 
\hyperlink{classns3_1_1LteFfrSapUser}{Lte\+Ffr\+Sap\+User} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a6a08e9753aa517cced82305cd4fbc0ec}{m\+\_\+ffr\+Sap\+User}
\item 
\hyperlink{classns3_1_1LteFfrSapProvider}{Lte\+Ffr\+Sap\+Provider} $\ast$ \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\+\_\+ffr\+Sap\+Provider}
\item 
\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters}{Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\+\_\+csched\+Cell\+Config}
\item 
double \hyperlink{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}{m\+\_\+time\+Window}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\+\_\+next\+Rnti\+Ul}
\item 
uint32\+\_\+t \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\+\_\+cqi\+Timers\+Threshold}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\+\_\+ues\+Tx\+Mode}
\item 
bool \hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\+\_\+harq\+On}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{m\+\_\+dl\+Harq\+Current\+Process\+Id}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a457b3571b67ff17d042e9894e90e2ce2}{Dl\+Harq\+Processes\+Status\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\+\_\+dl\+Harq\+Processes\+Status}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a39413ade536de4b1c82d6c0074cc703e}{Dl\+Harq\+Processes\+Timer\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\+\_\+dl\+Harq\+Processes\+Timer}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_af25599bf8f9f564075c005759c9af18c}{Dl\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a4c0cbd1e72f1c667f8b5879655f13210}{Dl\+Harq\+Rlc\+Pdu\+List\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}
\item 
std\+::vector$<$ \hyperlink{structns3_1_1DlInfoListElement__s}{Dl\+Info\+List\+Element\+\_\+s} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\+\_\+dl\+Info\+List\+Buffered}
\item 
std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\+\_\+ul\+Harq\+Current\+Process\+Id}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_af765c4daaafe4ea4809c1041fc196629}{Ul\+Harq\+Processes\+Status\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\+\_\+ul\+Harq\+Processes\+Status}
\item 
std\+::map$<$ uint16\+\_\+t, \hyperlink{namespacens3_a042cbd6bf67e73911cba35b8c070223d}{Ul\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}
\item 
std\+::vector$<$ struct \hyperlink{structns3_1_1RachListElement__s}{Rach\+List\+Element\+\_\+s} $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a850a31ab66c0a1d24207311ceee03ce7}{m\+\_\+rach\+List}
\item 
std\+::vector$<$ uint16\+\_\+t $>$ \hyperlink{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{m\+\_\+rach\+Allocation\+Map}
\item 
uint8\+\_\+t \hyperlink{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{m\+\_\+ul\+Grant\+Mcs}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1PfFfMacScheduler_a9af91d8421385b7fbfac42c06f7c6897}{Pf\+Scheduler\+Member\+Csched\+Sap\+Provider}
\item 
class \hyperlink{classns3_1_1PfFfMacScheduler_a8d60388d4d593b8f3525af75c0f6ffd4}{Pf\+Scheduler\+Member\+Sched\+Sap\+Provider}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Implements the S\+C\+H\+ED S\+AP and C\+S\+C\+H\+ED S\+AP for a Proportional Fair scheduler. 

This class implements the interface defined by the \hyperlink{classns3_1_1FfMacScheduler}{Ff\+Mac\+Scheduler} abstract class 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Pf\+Ff\+Mac\+Scheduler@{Pf\+Ff\+Mac\+Scheduler}}
\index{Pf\+Ff\+Mac\+Scheduler@{Pf\+Ff\+Mac\+Scheduler}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Pf\+Ff\+Mac\+Scheduler()}{PfFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Pf\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PfFfMacScheduler_ad972377fd4997d9bf0b8193e69f20a16}{}\label{classns3_1_1PfFfMacScheduler_ad972377fd4997d9bf0b8193e69f20a16}


Constructor. 

Creates the M\+AC \hyperlink{classns3_1_1Scheduler}{Scheduler} interface implementation 
\begin{DoxyCode}
217   :   \hyperlink{classns3_1_1PfFfMacScheduler_a8c2e26441f7ea338051bbdf73ce1303a}{m\_cschedSapUser} (0),
218     \hyperlink{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{m\_schedSapUser} (0),
219     \hyperlink{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}{m\_timeWindow} (99.0),
220     \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl} (0)
221 \{
222   \hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc} = CreateObject <LteAmc> ();
223   \hyperlink{classns3_1_1PfFfMacScheduler_a18621fc8ff9d0fc2ff92977f9ac60b2b}{m\_cschedSapProvider} = \textcolor{keyword}{new} 
      \hyperlink{classns3_1_1PfFfMacScheduler_a9af91d8421385b7fbfac42c06f7c6897}{PfSchedulerMemberCschedSapProvider} (\textcolor{keyword}{this});
224   \hyperlink{classns3_1_1PfFfMacScheduler_aa647c4209dac594ac05c56ec0335b692}{m\_schedSapProvider} = \textcolor{keyword}{new} \hyperlink{classns3_1_1PfFfMacScheduler_a8d60388d4d593b8f3525af75c0f6ffd4}{PfSchedulerMemberSchedSapProvider}
       (\textcolor{keyword}{this});
225   \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider} = 0;
226   \hyperlink{classns3_1_1PfFfMacScheduler_a6a08e9753aa517cced82305cd4fbc0ec}{m\_ffrSapUser} = \textcolor{keyword}{new} MemberLteFfrSapUser<PfFfMacScheduler> (\textcolor{keyword}{this});
227 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!````~Pf\+Ff\+Mac\+Scheduler@{$\sim$\+Pf\+Ff\+Mac\+Scheduler}}
\index{````~Pf\+Ff\+Mac\+Scheduler@{$\sim$\+Pf\+Ff\+Mac\+Scheduler}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{$\sim$\+Pf\+Ff\+Mac\+Scheduler()}{~PfFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::$\sim$\+Pf\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5393a928efa6e15a722b4017ce6e1722}{}\label{classns3_1_1PfFfMacScheduler_a5393a928efa6e15a722b4017ce6e1722}
Destructor 
\begin{DoxyCode}
230 \{
231   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
232 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Pf\+Ff\+Mac\+Scheduler@{Pf\+Ff\+Mac\+Scheduler}}
\index{Pf\+Ff\+Mac\+Scheduler@{Pf\+Ff\+Mac\+Scheduler}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Pf\+Ff\+Mac\+Scheduler()}{PfFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Pf\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PfFfMacScheduler_ad972377fd4997d9bf0b8193e69f20a16}{}\label{classns3_1_1PfFfMacScheduler_ad972377fd4997d9bf0b8193e69f20a16}


Constructor. 

Creates the M\+AC \hyperlink{classns3_1_1Scheduler}{Scheduler} interface implementation \index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!````~Pf\+Ff\+Mac\+Scheduler@{$\sim$\+Pf\+Ff\+Mac\+Scheduler}}
\index{````~Pf\+Ff\+Mac\+Scheduler@{$\sim$\+Pf\+Ff\+Mac\+Scheduler}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{$\sim$\+Pf\+Ff\+Mac\+Scheduler()}{~PfFfMacScheduler()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::$\sim$\+Pf\+Ff\+Mac\+Scheduler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_aa25efcda60eeeb32487ee4fbff5cf0b4}{}\label{classns3_1_1PfFfMacScheduler_aa25efcda60eeeb32487ee4fbff5cf0b4}
Destructor 

\subsection{Member Function Documentation}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}}
\index{Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Cell\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters \&params)}{DoCschedCellConfigReq(const struct FfMacCschedSapProvider::CschedCellConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Cell\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a3b00a50e02e97984baaf5c1f7af073fe}{}\label{classns3_1_1PfFfMacScheduler_a3b00a50e02e97984baaf5c1f7af073fe}

\begin{DoxyCode}
316 \{
317   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
318   \textcolor{comment}{// Read the subset of parameters used}
319   \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig} = params;
320   \hyperlink{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
321   FfMacCschedSapUser::CschedUeConfigCnfParameters cnf;
322   cnf.m\_result = \hyperlink{namespacens3_a7acf2b7f9e0781dfe43a6bc54d6ecd07a4e8f5e8f6e514152d0a9fbd6b1607fd0}{SUCCESS};
323   \hyperlink{classns3_1_1PfFfMacScheduler_a8c2e26441f7ea338051bbdf73ce1303a}{m\_cschedSapUser}->\hyperlink{classns3_1_1FfMacCschedSapUser_aecc852478a4ba7e4cd868dae75e01b68}{CschedUeConfigCnf} (cnf);
324   \textcolor{keywordflow}{return};
325 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}}
\index{Do\+Csched\+Cell\+Config\+Req@{Do\+Csched\+Cell\+Config\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Cell\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters \&params)}{DoCschedCellConfigReq(const struct FfMacCschedSapProvider::CschedCellConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Cell\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a3b00a50e02e97984baaf5c1f7af073fe}{}\label{classns3_1_1PfFfMacScheduler_a3b00a50e02e97984baaf5c1f7af073fe}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}}
\index{Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters \&params)}{DoCschedLcConfigReq(const struct FfMacCschedSapProvider::CschedLcConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_acad2f80717b80b448f9a369e1191083f}{}\label{classns3_1_1PfFfMacScheduler_acad2f80717b80b448f9a369e1191083f}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}}
\index{Do\+Csched\+Lc\+Config\+Req@{Do\+Csched\+Lc\+Config\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters \&params)}{DoCschedLcConfigReq(const struct FfMacCschedSapProvider::CschedLcConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_acad2f80717b80b448f9a369e1191083f}{}\label{classns3_1_1PfFfMacScheduler_acad2f80717b80b448f9a369e1191083f}

\begin{DoxyCode}
368 \{
369   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" New LC, rnti: "}  << params.m\_rnti);
370 
371   std::map <uint16\_t, pfsFlowPerf\_t>::iterator it;
372   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_logicalChannelConfigList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
373     \{
374       it = \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.find (params.m\_rnti);
375 
376       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.end ())
377         \{
378           pfsFlowPerf\_t flowStatsDl;
379           flowStatsDl.flowStart = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
380           flowStatsDl.totalBytesTransmitted = 0;
381           flowStatsDl.lastTtiBytesTrasmitted = 0;
382           flowStatsDl.lastAveragedThroughput = 1;
383           \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.insert (std::pair<uint16\_t, pfsFlowPerf\_t> (params.m\_rnti, flowStatsDl
      ));
384           pfsFlowPerf\_t flowStatsUl;
385           flowStatsUl.flowStart = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
386           flowStatsUl.totalBytesTransmitted = 0;
387           flowStatsUl.lastTtiBytesTrasmitted = 0;
388           flowStatsUl.lastAveragedThroughput = 1;
389           \hyperlink{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{m\_flowStatsUl}.insert (std::pair<uint16\_t, pfsFlowPerf\_t> (params.m\_rnti, flowStatsUl
      ));
390         \}
391     \}
392 
393   \textcolor{keywordflow}{return};
394 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}}
\index{Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters \&params)}{DoCschedLcReleaseReq(const struct FfMacCschedSapProvider::CschedLcReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a6b70af9fc752ab7169daa365ef507cf9}{}\label{classns3_1_1PfFfMacScheduler_a6b70af9fc752ab7169daa365ef507cf9}

\begin{DoxyCode}
398 \{
399   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
400   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_logicalChannelIdentity.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
401     \{
402       std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it = 
      \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.begin ();
403       std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator temp;
404       \textcolor{keywordflow}{while} (it!=\hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.end ())
405         \{
406           \textcolor{keywordflow}{if} (((*it).first.m\_rnti == params.m\_rnti) && ((*it).first.m\_lcId == params.
      m\_logicalChannelIdentity.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})))
407             \{
408               temp = it;
409               it++;
410               \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.erase (temp);
411             \}
412           \textcolor{keywordflow}{else}
413             \{
414               it++;
415             \}
416         \}
417     \}
418   \textcolor{keywordflow}{return};
419 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}}
\index{Do\+Csched\+Lc\+Release\+Req@{Do\+Csched\+Lc\+Release\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Lc\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters \&params)}{DoCschedLcReleaseReq(const struct FfMacCschedSapProvider::CschedLcReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Lc\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Lc\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a6b70af9fc752ab7169daa365ef507cf9}{}\label{classns3_1_1PfFfMacScheduler_a6b70af9fc752ab7169daa365ef507cf9}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}}
\index{Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters \&params)}{DoCschedUeConfigReq(const struct FfMacCschedSapProvider::CschedUeConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a14c5c3a11693cb0cd2b62c619cdeac38}{}\label{classns3_1_1PfFfMacScheduler_a14c5c3a11693cb0cd2b62c619cdeac38}

\begin{DoxyCode}
329 \{
330   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << params.m\_rnti << \textcolor{stringliteral}{" txMode "} << (uint16\_t)params.
      m\_transmissionMode);
331   std::map <uint16\_t,uint8\_t>::iterator it = \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.find (params.m\_rnti);
332   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.end ())
333     \{
334       \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.insert (std::pair <uint16\_t, double> (params.m\_rnti, params.m\_transmissionMode
      ));
335       \textcolor{comment}{// generate HARQ buffers}
336       \hyperlink{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{m\_dlHarqCurrentProcessId}.insert (std::pair <uint16\_t,uint8\_t > (params.m\_rnti
      , 0));
337       \hyperlink{namespacens3_a457b3571b67ff17d042e9894e90e2ce2}{DlHarqProcessesStatus\_t} dlHarqPrcStatus;
338       dlHarqPrcStatus.resize (8,0);
339       \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.insert (std::pair <uint16\_t, DlHarqProcessesStatus\_t> 
      (params.m\_rnti, dlHarqPrcStatus));
340       \hyperlink{namespacens3_a39413ade536de4b1c82d6c0074cc703e}{DlHarqProcessesTimer\_t} dlHarqProcessesTimer;
341       dlHarqProcessesTimer.resize (8,0);
342       \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.insert (std::pair <uint16\_t, DlHarqProcessesTimer\_t> (
      params.m\_rnti, dlHarqProcessesTimer));
343       \hyperlink{namespacens3_af25599bf8f9f564075c005759c9af18c}{DlHarqProcessesDciBuffer\_t} dlHarqdci;
344       dlHarqdci.resize (8);
345       \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\_dlHarqProcessesDciBuffer}.insert (std::pair <uint16\_t,
       DlHarqProcessesDciBuffer\_t> (params.m\_rnti, dlHarqdci));
346       \hyperlink{namespacens3_a4c0cbd1e72f1c667f8b5879655f13210}{DlHarqRlcPduListBuffer\_t} dlHarqRlcPdu;
347       dlHarqRlcPdu.resize (2);
348       dlHarqRlcPdu.at (0).resize (8);
349       dlHarqRlcPdu.at (1).resize (8);
350       \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.insert (std::pair <uint16\_t,
       DlHarqRlcPduListBuffer\_t> (params.m\_rnti, dlHarqRlcPdu));
351       \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.insert (std::pair <uint16\_t,uint8\_t > (params.m\_rnti
      , 0));
352       \hyperlink{namespacens3_af765c4daaafe4ea4809c1041fc196629}{UlHarqProcessesStatus\_t} ulHarqPrcStatus;
353       ulHarqPrcStatus.resize (8,0);
354       \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\_ulHarqProcessesStatus}.insert (std::pair <uint16\_t, UlHarqProcessesStatus\_t> 
      (params.m\_rnti, ulHarqPrcStatus));
355       \hyperlink{namespacens3_a042cbd6bf67e73911cba35b8c070223d}{UlHarqProcessesDciBuffer\_t} ulHarqdci;
356       ulHarqdci.resize (8);
357       \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.insert (std::pair <uint16\_t,
       UlHarqProcessesDciBuffer\_t> (params.m\_rnti, ulHarqdci));
358     \}
359   \textcolor{keywordflow}{else}
360     \{
361       (*it).second = params.m\_transmissionMode;
362     \}
363   \textcolor{keywordflow}{return};
364 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}}
\index{Do\+Csched\+Ue\+Config\+Req@{Do\+Csched\+Ue\+Config\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Config\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters \&params)}{DoCschedUeConfigReq(const struct FfMacCschedSapProvider::CschedUeConfigReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Config\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Config\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a14c5c3a11693cb0cd2b62c619cdeac38}{}\label{classns3_1_1PfFfMacScheduler_a14c5c3a11693cb0cd2b62c619cdeac38}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}}
\index{Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters \&params)}{DoCschedUeReleaseReq(const struct FfMacCschedSapProvider::CschedUeReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5dd16a8b96789473248e706923a76583}{}\label{classns3_1_1PfFfMacScheduler_a5dd16a8b96789473248e706923a76583}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}}
\index{Do\+Csched\+Ue\+Release\+Req@{Do\+Csched\+Ue\+Release\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Csched\+Ue\+Release\+Req(const struct Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters \&params)}{DoCschedUeReleaseReq(const struct FfMacCschedSapProvider::CschedUeReleaseReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Csched\+Ue\+Release\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Ue\+Release\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5dd16a8b96789473248e706923a76583}{}\label{classns3_1_1PfFfMacScheduler_a5dd16a8b96789473248e706923a76583}

\begin{DoxyCode}
423 \{
424   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
425 
426   \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.erase (params.m\_rnti);
427   \hyperlink{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{m\_dlHarqCurrentProcessId}.erase (params.m\_rnti);
428   \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.erase  (params.m\_rnti);
429   \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.erase (params.m\_rnti);
430   \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\_dlHarqProcessesDciBuffer}.erase  (params.m\_rnti);
431   \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.erase  (params.m\_rnti);
432   \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.erase  (params.m\_rnti);
433   \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\_ulHarqProcessesStatus}.erase  (params.m\_rnti);
434   \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.erase  (params.m\_rnti);
435   \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.erase  (params.m\_rnti);
436   \hyperlink{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{m\_flowStatsUl}.erase  (params.m\_rnti);
437   \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.erase (params.m\_rnti);
438   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it = 
      \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.begin ();
439   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator temp;
440   \textcolor{keywordflow}{while} (it!=\hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.end ())
441     \{
442       \textcolor{keywordflow}{if} ((*it).first.m\_rnti == params.m\_rnti)
443         \{
444           temp = it;
445           it++;
446           \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.erase (temp);
447         \}
448       \textcolor{keywordflow}{else}
449         \{
450           it++;
451         \}
452     \}
453   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl} == params.m\_rnti)
454     \{
455       \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl} = 0;
456     \}
457 
458   \textcolor{keywordflow}{return};
459 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_ab77ff38d8dedac8bd5c87142429cdf8d}{}\label{classns3_1_1PfFfMacScheduler_ab77ff38d8dedac8bd5c87142429cdf8d}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1PfFfMacScheduler_a8dcc458e09d58658d878ac38e6ab53b2}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1FfMacScheduler_a771411e455992b81d8399681779debd9}{ns3\+::\+Ff\+Mac\+Scheduler}.

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Dispose(void)}{DoDispose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a8dcc458e09d58658d878ac38e6ab53b2}{}\label{classns3_1_1PfFfMacScheduler_a8dcc458e09d58658d878ac38e6ab53b2}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1PfFfMacScheduler_a8dcc458e09d58658d878ac38e6ab53b2}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1FfMacScheduler_a771411e455992b81d8399681779debd9}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
236 \{
237   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
238   \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\_dlHarqProcessesDciBuffer}.clear ();
239   \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.clear ();
240   \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.clear ();
241   \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.clear ();
242   \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.clear ();
243   \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\_ulHarqProcessesStatus}.clear ();
244   \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.clear ();
245   \textcolor{keyword}{delete} \hyperlink{classns3_1_1PfFfMacScheduler_a18621fc8ff9d0fc2ff92977f9ac60b2b}{m\_cschedSapProvider};
246   \textcolor{keyword}{delete} \hyperlink{classns3_1_1PfFfMacScheduler_aa647c4209dac594ac05c56ec0335b692}{m\_schedSapProvider};
247   \textcolor{keyword}{delete} \hyperlink{classns3_1_1PfFfMacScheduler_a6a08e9753aa517cced82305cd4fbc0ec}{m\_ffrSapUser};
248 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedDlCqiInfoReq(const struct FfMacSchedSapProvider::SchedDlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a0f35f72e423d648ee9464146ed4f4454}{}\label{classns3_1_1PfFfMacScheduler_a0f35f72e423d648ee9464146ed4f4454}

\begin{DoxyCode}
1411 \{
1412   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1413   \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a9b28572b241707f364405a269f79dbd8}{ReportDlCqiInfo} (params);
1414 
1415   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_cqiList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1416     \{
1417       \textcolor{keywordflow}{if} ( params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_cqiType == \hyperlink{structns3_1_1CqiListElement__s_a8f1bd827fd9842e7c07e39265d88299aa9db5a80433fbf06a4c98935e28ad26e8}{CqiListElement\_s::P10} )
1418         \{
1419           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"wideband CQI "} <<  (uint32\_t) params.m\_cqiList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0) << \textcolor{stringliteral}{" reported"});
1420           std::map <uint16\_t,uint8\_t>::iterator it;
1421           uint16\_t rnti = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1422           it = \hyperlink{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{m\_p10CqiRxed}.find (rnti);
1423           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{m\_p10CqiRxed}.end ())
1424             \{
1425               \textcolor{comment}{// create the new entry}
1426               \hyperlink{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{m\_p10CqiRxed}.insert ( std::pair<uint16\_t, uint8\_t > (rnti, params.m\_cqiList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0)) ); \textcolor{comment}{// only codeword 0 at this stage (SISO)}
1427               \textcolor{comment}{// generate correspondent timer}
1428               \hyperlink{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}{m\_p10CqiTimers}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold}));
1429             \}
1430           \textcolor{keywordflow}{else}
1431             \{
1432               \textcolor{comment}{// update the CQI value and refresh correspondent timer}
1433               (*it).second = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_wbCqi.at (0);
1434               \textcolor{comment}{// update correspondent timer}
1435               std::map <uint16\_t,uint32\_t>::iterator itTimers;
1436               itTimers = \hyperlink{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}{m\_p10CqiTimers}.find (rnti);
1437               (*itTimers).second = \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold};
1438             \}
1439         \}
1440       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_cqiType == \hyperlink{structns3_1_1CqiListElement__s_a8f1bd827fd9842e7c07e39265d88299aab9a9d64494e36c89d7932a00edb056a7}{CqiListElement\_s::A30} )
1441         \{
1442           \textcolor{comment}{// subband CQI reporting high layer configured}
1443           std::map <uint16\_t,SbMeasResult\_s>::iterator it;
1444           uint16\_t rnti = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1445           it = \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.find (rnti);
1446           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.end ())
1447             \{
1448               \textcolor{comment}{// create the new entry}
1449               \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.insert ( std::pair<uint16\_t, SbMeasResult\_s > (rnti, params.
      m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbMeasResult) );
1450               \hyperlink{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}{m\_a30CqiTimers}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold}));
1451             \}
1452           \textcolor{keywordflow}{else}
1453             \{
1454               \textcolor{comment}{// update the CQI value and refresh correspondent timer}
1455               (*it).second = params.m\_cqiList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbMeasResult;
1456               std::map <uint16\_t,uint32\_t>::iterator itTimers;
1457               itTimers = \hyperlink{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}{m\_a30CqiTimers}.find (rnti);
1458               (*itTimers).second = \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold};
1459             \}
1460         \}
1461       \textcolor{keywordflow}{else}
1462         \{
1463           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" CQI type unknown"});
1464         \}
1465     \}
1466 
1467   \textcolor{keywordflow}{return};
1468 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Dl\+Cqi\+Info\+Req@{Do\+Sched\+Dl\+Cqi\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedDlCqiInfoReq(const struct FfMacSchedSapProvider::SchedDlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a0f35f72e423d648ee9464146ed4f4454}{}\label{classns3_1_1PfFfMacScheduler_a0f35f72e423d648ee9464146ed4f4454}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Mac\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters \&params)}{DoSchedDlMacBufferReq(const struct FfMacSchedSapProvider::SchedDlMacBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Mac\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a889258e14e1ddfb0f9cab43cb5576eee}{}\label{classns3_1_1PfFfMacScheduler_a889258e14e1ddfb0f9cab43cb5576eee}

\begin{DoxyCode}
496 \{
497   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
498   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"method not implemented"});
499   \textcolor{keywordflow}{return};
500 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 11


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Mac\+Buffer\+Req@{Do\+Sched\+Dl\+Mac\+Buffer\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Mac\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters \&params)}{DoSchedDlMacBufferReq(const struct FfMacSchedSapProvider::SchedDlMacBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Mac\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Mac\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a889258e14e1ddfb0f9cab43cb5576eee}{}\label{classns3_1_1PfFfMacScheduler_a889258e14e1ddfb0f9cab43cb5576eee}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Paging\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters \&params)}{DoSchedDlPagingBufferReq(const struct FfMacSchedSapProvider::SchedDlPagingBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Paging\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aa13d56a7aa8b5045cfbc03146adad2a5}{}\label{classns3_1_1PfFfMacScheduler_aa13d56a7aa8b5045cfbc03146adad2a5}

\begin{DoxyCode}
488 \{
489   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
490   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"method not implemented"});
491   \textcolor{keywordflow}{return};
492 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Paging\+Buffer\+Req@{Do\+Sched\+Dl\+Paging\+Buffer\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Paging\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters \&params)}{DoSchedDlPagingBufferReq(const struct FfMacSchedSapProvider::SchedDlPagingBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Paging\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Paging\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aa13d56a7aa8b5045cfbc03146adad2a5}{}\label{classns3_1_1PfFfMacScheduler_aa13d56a7aa8b5045cfbc03146adad2a5}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}}
\index{Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rach\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters \&params)}{DoSchedDlRachInfoReq(const struct FfMacSchedSapProvider::SchedDlRachInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rach\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ada4d1a7cb1fffb89d091f5b54a1a7f42}{}\label{classns3_1_1PfFfMacScheduler_ada4d1a7cb1fffb89d091f5b54a1a7f42}

\begin{DoxyCode}
1401 \{
1402   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1403 
1404   \hyperlink{classns3_1_1PfFfMacScheduler_a850a31ab66c0a1d24207311ceee03ce7}{m\_rachList} = params.m\_rachList;
1405 
1406   \textcolor{keywordflow}{return};
1407 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 13


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}}
\index{Do\+Sched\+Dl\+Rach\+Info\+Req@{Do\+Sched\+Dl\+Rach\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rach\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters \&params)}{DoSchedDlRachInfoReq(const struct FfMacSchedSapProvider::SchedDlRachInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rach\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rach\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ada4d1a7cb1fffb89d091f5b54a1a7f42}{}\label{classns3_1_1PfFfMacScheduler_ada4d1a7cb1fffb89d091f5b54a1a7f42}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rlc\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters \&params)}{DoSchedDlRlcBufferReq(const struct FfMacSchedSapProvider::SchedDlRlcBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rlc\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a3f7ff526905ef203693d1da9d0afff18}{}\label{classns3_1_1PfFfMacScheduler_a3f7ff526905ef203693d1da9d0afff18}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}}
\index{Do\+Sched\+Dl\+Rlc\+Buffer\+Req@{Do\+Sched\+Dl\+Rlc\+Buffer\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Rlc\+Buffer\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters \&params)}{DoSchedDlRlcBufferReq(const struct FfMacSchedSapProvider::SchedDlRlcBufferReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Rlc\+Buffer\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a3f7ff526905ef203693d1da9d0afff18}{}\label{classns3_1_1PfFfMacScheduler_a3f7ff526905ef203693d1da9d0afff18}

\begin{DoxyCode}
464 \{
465   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << params.m\_rnti << (uint32\_t) params.m\_logicalChannelIdentity);
466   \textcolor{comment}{// API generated by RLC for updating RLC parameters on a LC (tx and retx queues)}
467 
468   std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
469 
470   LteFlowId\_t flow (params.m\_rnti, params.m\_logicalChannelIdentity);
471 
472   it =  \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.find (flow);
473 
474   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.end ())
475     \{
476       \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.insert (std::pair <LteFlowId\_t,
       FfMacSchedSapProvider::SchedDlRlcBufferReqParameters> (flow, params));
477     \}
478   \textcolor{keywordflow}{else}
479     \{
480       (*it).second = params;
481     \}
482 
483   \textcolor{keywordflow}{return};
484 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}}
\index{Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters \&params)}{DoSchedDlTriggerReq(const struct FfMacSchedSapProvider::SchedDlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a837f4e59a9df97e0baeda35cf1edbd38}{}\label{classns3_1_1PfFfMacScheduler_a837f4e59a9df97e0baeda35cf1edbd38}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000106}{Todo}]check correct value according the D\+C\+Is txed \end{DoxyRefDesc}


\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000132}{Todo}]check correct value according the D\+C\+Is txed \end{DoxyRefDesc}

\begin{DoxyCode}
649 \{
650   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{" subframe no. "} << (0
      xF & params.m\_sfnSf));
651   \textcolor{comment}{// API generated by RLC for triggering the scheduling of a DL subframe}
652 
653 
654   \textcolor{comment}{// evaluate the relative channel quality indicator for each UE per each RBG}
655   \textcolor{comment}{// (since we are using allocation type 0 the small unit of allocation is RBG)}
656   \textcolor{comment}{// Resource allocation type 0 (see sec 7.1.6.1 of 36.213)}
657 
658   \hyperlink{classns3_1_1PfFfMacScheduler_a5388e0f10ab7d36f49d4eb66e53504bd}{RefreshDlCqiMaps} ();
659 
660   \textcolor{keywordtype}{int} rbgSize = \hyperlink{classns3_1_1PfFfMacScheduler_ae707fd496af66bc87fc7e51d212bafc3}{GetRbgSize} (\hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth});
661   \textcolor{keywordtype}{int} rbgNum = \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth} / rbgSize;
662   std::map <uint16\_t, std::vector <uint16\_t> > allocationMap; \textcolor{comment}{// RBs map per RNTI}
663   std::vector <bool> rbgMap;  \textcolor{comment}{// global RBGs map}
664   uint16\_t rbgAllocatedNum = 0;
665   std::set <uint16\_t> rntiAllocated;
666   rbgMap.resize (\hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_ad18c695bd3c9d7f742ba1dab4a941e8a}{m\_dlBandwidth} / rbgSize, \textcolor{keyword}{false});
667 
668   rbgMap = \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_ad60306dae43b74dc25b65f81d6587a24}{GetAvailableDlRbg} ();
669   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = rbgMap.begin (); it != rbgMap.end (); it++)
670     \{
671       \textcolor{keywordflow}{if} ((*it) == true )
672         \{
673           rbgAllocatedNum++;
674         \}
675     \}
676 
677   FfMacSchedSapUser::SchedDlConfigIndParameters ret;
678 
679   \textcolor{comment}{//   update UL HARQ proc id}
680   std::map <uint16\_t, uint8\_t>::iterator itProcId;
681   \textcolor{keywordflow}{for} (itProcId = \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.begin (); itProcId != 
      \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.end (); itProcId++)
682     \{
683       (*itProcId).second = ((*itProcId).second + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
684     \}
685 
686 
687   \textcolor{comment}{// RACH Allocation}
688   uint16\_t rbAllocatedNum = 0;
689   std::vector <bool> ulRbMap;
690   ulRbMap.resize (\hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, \textcolor{keyword}{false});
691   ulRbMap = \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_aafd23b22a27ec83e03d54795c122d175}{GetAvailableUlRbg} ();
692   uint8\_t maxContinuousUlBandwidth = 0;
693   uint8\_t tmpMinBandwidth = 0;
694   uint16\_t ffrRbStartOffset = 0;
695   uint16\_t tmpFfrRbStartOffset = 0;
696   uint16\_t index = 0;
697 
698   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = ulRbMap.begin (); it != ulRbMap.end (); it++)
699     \{
700       \textcolor{keywordflow}{if} ((*it) == true )
701         \{
702           rbAllocatedNum++;
703           \textcolor{keywordflow}{if} (tmpMinBandwidth > maxContinuousUlBandwidth)
704             \{
705               maxContinuousUlBandwidth = tmpMinBandwidth;
706               ffrRbStartOffset = tmpFfrRbStartOffset;
707             \}
708           tmpMinBandwidth = 0;
709         \}
710       \textcolor{keywordflow}{else}
711         \{
712           \textcolor{keywordflow}{if} (tmpMinBandwidth == 0)
713             \{
714               tmpFfrRbStartOffset = index;
715             \}
716           tmpMinBandwidth++;
717         \}
718       index++;
719     \}
720 
721   \textcolor{keywordflow}{if} (tmpMinBandwidth > maxContinuousUlBandwidth)
722     \{
723       maxContinuousUlBandwidth = tmpMinBandwidth;
724       ffrRbStartOffset = tmpFfrRbStartOffset;
725     \}
726 
727   \hyperlink{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
728   uint16\_t rbStart = 0;
729   rbStart = ffrRbStartOffset;
730   std::vector <struct RachListElement\_s>::iterator itRach;
731   \textcolor{keywordflow}{for} (itRach = \hyperlink{classns3_1_1PfFfMacScheduler_a850a31ab66c0a1d24207311ceee03ce7}{m\_rachList}.begin (); itRach != \hyperlink{classns3_1_1PfFfMacScheduler_a850a31ab66c0a1d24207311ceee03ce7}{m\_rachList}.end (); itRach++)
732     \{
733       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetTbSizeFromMcs (\hyperlink{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{m\_ulGrantMcs}, 
      \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) > (*itRach).m\_estimatedSize, \textcolor{stringliteral}{" Default UL
       Grant MCS does not allow to send RACH messages"});
734       BuildRarListElement\_s newRar;
735       newRar.m\_rnti = (*itRach).m\_rnti;
736       \textcolor{comment}{// DL-RACH Allocation}
737       \textcolor{comment}{// Ideal: no needs of configuring m\_dci}
738       \textcolor{comment}{// UL-RACH Allocation}
739       newRar.m\_grant.m\_rnti = newRar.m\_rnti;
740       newRar.m\_grant.m\_mcs = \hyperlink{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{m\_ulGrantMcs};
741       uint16\_t rbLen = 1;
742       uint16\_t tbSizeBits = 0;
743       \textcolor{comment}{// find lowest TB size that fits UL grant estimated size}
744       \textcolor{keywordflow}{while} ((tbSizeBits < (*itRach).m\_estimatedSize) && (rbStart + rbLen < (ffrRbStartOffset + 
      maxContinuousUlBandwidth)))
745         \{
746           rbLen++;
747           tbSizeBits = \hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetTbSizeFromMcs (\hyperlink{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{m\_ulGrantMcs}, rbLen);
748         \}
749       \textcolor{keywordflow}{if} (tbSizeBits < (*itRach).m\_estimatedSize)
750         \{
751           \textcolor{comment}{// no more allocation space: finish allocation}
752           \textcolor{keywordflow}{break};
753         \}
754       newRar.m\_grant.m\_rbStart = rbStart;
755       newRar.m\_grant.m\_rbLen = rbLen;
756       newRar.m\_grant.m\_tbSize = tbSizeBits / 8;
757       newRar.m\_grant.m\_hopping = \textcolor{keyword}{false};
758       newRar.m\_grant.m\_tpc = 0;
759       newRar.m\_grant.m\_cqiRequest = \textcolor{keyword}{false};
760       newRar.m\_grant.m\_ulDelay = \textcolor{keyword}{false};
761       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL grant allocated to RNTI "} << (*itRach).m\_rnti << \textcolor{stringliteral}{" rbStart "} << 
      rbStart << \textcolor{stringliteral}{" rbLen "} << rbLen << \textcolor{stringliteral}{" MCS "} << \hyperlink{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{m\_ulGrantMcs} << \textcolor{stringliteral}{" tbSize "} << newRar.m\_grant.
      m\_tbSize);
762       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < rbStart + rbLen; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
763         \{
764           \hyperlink{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{m\_rachAllocationMap}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = (*itRach).m\_rnti;
765         \}
766       
767       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\_harqOn} == \textcolor{keyword}{true})
768         \{
769           \textcolor{comment}{// generate UL-DCI for HARQ retransmissions}
770           UlDciListElement\_s uldci;
771           uldci.m\_rnti = newRar.m\_rnti;
772           uldci.m\_rbLen = rbLen;
773           uldci.m\_rbStart = rbStart;
774           uldci.m\_mcs = \hyperlink{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{m\_ulGrantMcs};
775           uldci.m\_tbSize = tbSizeBits / 8;
776           uldci.m\_ndi = 1;
777           uldci.m\_cceIndex = 0;
778           uldci.m\_aggrLevel = 1;
779           uldci.m\_ueTxAntennaSelection = 3; \textcolor{comment}{// antenna selection OFF}
780           uldci.m\_hopping = \textcolor{keyword}{false};
781           uldci.m\_n2Dmrs = 0;
782           uldci.m\_tpc = 0; \textcolor{comment}{// no power control}
783           uldci.m\_cqiRequest = \textcolor{keyword}{false}; \textcolor{comment}{// only period CQI at this stage}
784           uldci.m\_ulIndex = 0; \textcolor{comment}{// TDD parameter}
785           uldci.m\_dai = 1; \textcolor{comment}{// TDD parameter}
786           uldci.m\_freqHopping = 0;
787           uldci.m\_pdcchPowerOffset = 0; \textcolor{comment}{// not used}
788 
789           uint8\_t harqId = 0;
790           std::map <uint16\_t, uint8\_t>::iterator itProcId;
791           itProcId = \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.find (uldci.m\_rnti);
792           \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.end ())
793             \{
794               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << uldci.m\_rnti);
795             \}
796           harqId = (*itProcId).second;
797           std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.find (uldci.m\_rnti);
798           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.end ())
799             \{
800               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in UL DCI HARQ buffer for RNTI "} << 
      uldci.m\_rnti);
801             \}
802           (*itDci).second.at (harqId) = uldci;
803         \}
804       
805       rbStart = rbStart + rbLen;
806       ret.m\_buildRarList.push\_back (newRar);
807     \}
808   \hyperlink{classns3_1_1PfFfMacScheduler_a850a31ab66c0a1d24207311ceee03ce7}{m\_rachList}.clear ();
809 
810 
811   \textcolor{comment}{// Process DL HARQ feedback}
812   \hyperlink{classns3_1_1PfFfMacScheduler_a00c00addd2a64aea7844298088f66e30}{RefreshHarqProcesses} ();
813   \textcolor{comment}{// retrieve past HARQ retx buffered}
814   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.size () > 0)
815     \{
816       \textcolor{keywordflow}{if} (params.m\_dlInfoList.size () > 0)
817         \{
818           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Received DL-HARQ feedback"});
819           \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.insert (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.end (),
       params.m\_dlInfoList.begin (), params.m\_dlInfoList.end ());
820         \}
821     \}
822   \textcolor{keywordflow}{else}
823     \{
824       \textcolor{keywordflow}{if} (params.m\_dlInfoList.size () > 0)
825         \{
826           \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered} = params.m\_dlInfoList;
827         \}
828     \}
829   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\_harqOn} == \textcolor{keyword}{false})
830     \{
831       \textcolor{comment}{// Ignore HARQ feedback}
832       \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.clear ();
833     \}
834   std::vector <struct DlInfoListElement\_s> dlInfoListUntxed;
835   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
836     \{
837       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find (
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
838       \textcolor{keywordflow}{if} (itRnti != rntiAllocated.end ())
839         \{
840           \textcolor{comment}{// RNTI already allocated for retx}
841           \textcolor{keywordflow}{continue};
842         \}
843       uint8\_t nLayers = \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.size ();
844       std::vector <bool> retx;
845       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Processing DLHARQ feedback"});
846       \textcolor{keywordflow}{if} (nLayers == 1)
847         \{
848           retx.push\_back (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (0) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
849           retx.push\_back (\textcolor{keyword}{false});
850         \}
851       \textcolor{keywordflow}{else}
852         \{
853           retx.push\_back (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (0) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
854           retx.push\_back (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqStatus.at (1) == 
      \hyperlink{structns3_1_1DlInfoListElement__s_a3e55b89f756b7bd8909c8116a202a17aaf90e76e67c86729b4ee21927b7fb1770}{DlInfoListElement\_s::NACK});
855         \}
856       \textcolor{keywordflow}{if} (retx.at (0) || retx.at (1))
857         \{
858           \textcolor{comment}{// retrieve HARQ process information}
859           uint16\_t rnti = \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
860           uint8\_t harqId = \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId;
861           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ retx RNTI "} << rnti << \textcolor{stringliteral}{" harqId "} << (uint16\_t)harqId);
862           std::map <uint16\_t, DlHarqProcessesDciBuffer\_t>::iterator itHarq = 
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\_dlHarqProcessesDciBuffer}.find (rnti);
863           \textcolor{keywordflow}{if} (itHarq == \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\_dlHarqProcessesDciBuffer}.end ())
864             \{
865               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << rnti);
866             \}
867 
868           DlDciListElement\_s dci = (*itHarq).second.at (harqId);
869           \textcolor{keywordtype}{int} rv = 0;
870           \textcolor{keywordflow}{if} (dci.m\_rv.size () == 1)
871             \{
872               rv = dci.m\_rv.at (0);
873             \}
874           \textcolor{keywordflow}{else}
875             \{
876               rv = (dci.m\_rv.at (0) > dci.m\_rv.at (1) ? dci.m\_rv.at (0) : dci.m\_rv.at (1));
877             \}
878 
879           \textcolor{keywordflow}{if} (rv == 3)
880             \{
881               \textcolor{comment}{// maximum number of retx reached -> drop process}
882               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Maximum number of retransmissions reached -> drop process"});
883               std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator it = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.find (rnti);
884               \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.end ())
885                 \{
886                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
887                 \}
888               (*it).second.at (harqId) = 0;
889               std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.find (rnti);
890               \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
891                 \{
892                   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << 
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
893                 \}
894               \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.size (); k++)
895                 \{
896                   (*itRlcPdu).second.at (k).at (harqId).clear ();
897                 \}
898               \textcolor{keywordflow}{continue};
899             \}
900           \textcolor{comment}{// check the feasibility of retransmitting on the same RBGs}
901           \textcolor{comment}{// translate the DCI to Spectrum framework}
902           std::vector <int> dciRbg;
903           uint32\_t mask = 0x1;
904           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Original RBGs "} << dci.m\_rbBitmap << \textcolor{stringliteral}{" rnti "} << dci.m\_rnti);
905           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 32; j++)
906             \{
907               \textcolor{keywordflow}{if} (((dci.m\_rbBitmap & mask) >> j) == 1)
908                 \{
909                   dciRbg.push\_back (j);
910                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)t"} << j);
911                 \}
912               mask = (mask << 1);
913             \}
914           \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
915           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < dciRbg.size (); j++)
916             \{
917               \textcolor{keywordflow}{if} (rbgMap.at (dciRbg.at (j)) == \textcolor{keyword}{true})
918                 \{
919                   free = \textcolor{keyword}{false};
920                   \textcolor{keywordflow}{break};
921                 \}
922             \}
923           \textcolor{keywordflow}{if} (free)
924             \{
925               \textcolor{comment}{// use the same RBGs for the retx}
926               \textcolor{comment}{// reserve RBGs}
927               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < dciRbg.size (); j++)
928                 \{
929                   rbgMap.at (dciRbg.at (j)) = \textcolor{keyword}{true};
930                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"RBG "} << dciRbg.at (j) << \textcolor{stringliteral}{" assigned"});
931                   rbgAllocatedNum++;
932                 \}
933 
934               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Send retx in the same RBGs"});
935             \}
936           \textcolor{keywordflow}{else}
937             \{
938               \textcolor{comment}{// find RBGs for sending HARQ retx}
939               uint8\_t j = 0;
940               uint8\_t rbgId = (dciRbg.at (dciRbg.size () - 1) + 1) % rbgNum;
941               uint8\_t startRbg = dciRbg.at (dciRbg.size () - 1);
942               std::vector <bool> rbgMapCopy = rbgMap;
943               \textcolor{keywordflow}{while} ((j < dciRbg.size ())&&(startRbg != rbgId))
944                 \{
945                   \textcolor{keywordflow}{if} (rbgMapCopy.at (rbgId) == \textcolor{keyword}{false})
946                     \{
947                       rbgMapCopy.at (rbgId) = \textcolor{keyword}{true};
948                       dciRbg.at (j) = rbgId;
949                       j++;
950                     \}
951                   rbgId = (rbgId + 1) % rbgNum;
952                 \}
953               \textcolor{keywordflow}{if} (j == dciRbg.size ())
954                 \{
955                   \textcolor{comment}{// find new RBGs -> update DCI map}
956                   uint32\_t rbgMask = 0;
957                   \textcolor{keywordflow}{for} (uint16\_t k = 0; k < dciRbg.size (); k++)
958                     \{
959                       rbgMask = rbgMask + (0x1 << dciRbg.at (k));
960                       rbgAllocatedNum++;
961                     \}
962                   dci.m\_rbBitmap = rbgMask;
963                   rbgMap = rbgMapCopy;
964                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Move retx in RBGs "} << dciRbg.size ());
965                 \}
966               \textcolor{keywordflow}{else}
967                 \{
968                   \textcolor{comment}{// HARQ retx cannot be performed on this TTI -> store it}
969                   dlInfoListUntxed.push\_back (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
970                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" No resource for this retx -> buffer it"});
971                 \}
972             \}
973           \textcolor{comment}{// retrieve RLC PDU list for retx TBsize and update DCI}
974           BuildDataListElement\_s newEl;
975           std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.find (rnti);
976           \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
977             \{
978               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << rnti);
979             \}
980           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayers; j++)
981             \{
982               \textcolor{keywordflow}{if} (retx.at (j))
983                 \{
984                   \textcolor{keywordflow}{if} (j >= dci.m\_ndi.size ())
985                     \{
986                       \textcolor{comment}{// for avoiding errors in MIMO transient phases}
987                       dci.m\_ndi.push\_back (0);
988                       dci.m\_rv.push\_back (0);
989                       dci.m\_mcs.push\_back (0);
990                       dci.m\_tbsSize.push\_back (0);
991                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" no txed (MIMO
       transition)"});
992                     \}
993                   \textcolor{keywordflow}{else}
994                     \{
995                       dci.m\_ndi.at (j) = 0;
996                       dci.m\_rv.at (j)++;
997                       (*itHarq).second.at (harqId).m\_rv.at (j)++;
998                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" RV "} << (uint16\_t)dci.
      m\_rv.at (j));
999                     \}
1000                 \}
1001               \textcolor{keywordflow}{else}
1002                 \{
1003                   \textcolor{comment}{// empty TB of layer j}
1004                   dci.m\_ndi.at (j) = 0;
1005                   dci.m\_rv.at (j) = 0;
1006                   dci.m\_mcs.at (j) = 0;
1007                   dci.m\_tbsSize.at (j) = 0;
1008                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" layer "} << (uint16\_t)j << \textcolor{stringliteral}{" no retx"});
1009                 \}
1010             \}
1011           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.at (0).at (dci.m\_harqProcess).size (); k++)
1012             \{
1013               std::vector <struct RlcPduListElement\_s> rlcPduListPerLc;
1014               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayers; j++)
1015                 \{
1016                   \textcolor{keywordflow}{if} (retx.at (j))
1017                     \{
1018                       \textcolor{keywordflow}{if} (j < dci.m\_ndi.size ())
1019                         \{
1020                           rlcPduListPerLc.push\_back ((*itRlcPdu).second.at (j).at (dci.m\_harqProcess).at (k
      ));
1021                         \}
1022                     \}
1023                 \}
1024 
1025               \textcolor{keywordflow}{if} (rlcPduListPerLc.size () > 0)
1026                 \{
1027                   newEl.m\_rlcPduList.push\_back (rlcPduListPerLc);
1028                 \}
1029             \}
1030           newEl.m\_rnti = rnti;
1031           newEl.m\_dci = dci;
1032           (*itHarq).second.at (harqId).m\_rv = dci.m\_rv;
1033           \textcolor{comment}{// refresh timer}
1034           std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itHarqTimer = 
      \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.find (rnti);
1035           \textcolor{keywordflow}{if} (itHarqTimer== \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.end ())
1036             \{
1037               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find HARQ timer for RNTI "} << (uint16\_t)rnti);
1038             \}
1039           (*itHarqTimer).second.at (harqId) = 0;
1040           ret.m\_buildDataList.push\_back (newEl);
1041           rntiAllocated.insert (rnti);
1042         \}
1043       \textcolor{keywordflow}{else}
1044         \{
1045           \textcolor{comment}{// update HARQ process status}
1046           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ received ACK for UE "} << 
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1047           std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator it = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.find (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1048           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.end ())
1049             \{
1050               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << 
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1051             \}
1052           (*it).second.at (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId) = 0;
1053           std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.find (
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1054           \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.end ())
1055             \{
1056               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI "} << 
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1057             \}
1058           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itRlcPdu).second.size (); k++)
1059             \{
1060               (*itRlcPdu).second.at (k).at (\hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_harqProcessId).clear ();
1061             \}
1062         \}
1063     \}
1064   \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered}.clear ();
1065   \hyperlink{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{m\_dlInfoListBuffered} = dlInfoListUntxed;
1066 
1067   \textcolor{keywordflow}{if} (rbgAllocatedNum == rbgNum)
1068     \{
1069       \textcolor{comment}{// all the RBGs are already allocated -> exit}
1070       \textcolor{keywordflow}{if} ((ret.m\_buildDataList.size () > 0) || (ret.m\_buildRarList.size () > 0))
1071         \{
1072           \hyperlink{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a28f8484af5a32a45ee6c0e51770d83f7}{SchedDlConfigInd} (ret);
1073         \}
1074       \textcolor{keywordflow}{return};
1075     \}
1076 
1077 
1078 
1079   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < rbgNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1080     \{
1081       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" ALLOCATION for RBG "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" of "} << rbgNum);
1082       \textcolor{keywordflow}{if} (rbgMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) == \textcolor{keyword}{false})
1083         \{
1084           std::map <uint16\_t, pfsFlowPerf\_t>::iterator it;
1085           std::map <uint16\_t, pfsFlowPerf\_t>::iterator itMax = \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.end ();
1086           \textcolor{keywordtype}{double} rcqiMax = 0.0;
1087           \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.begin (); it != \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.end (); it++)
1088             \{
1089               \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a91f4de3c794d2a32fae5bcfafd88b6fa}{IsDlRbgAvailableForUe} (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}, (*it).first)) == \textcolor{keyword}{false})
1090                 \textcolor{keywordflow}{continue};
1091 
1092               std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
1093               \textcolor{keywordflow}{if} ((itRnti != rntiAllocated.end ())||(!\hyperlink{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}{HarqProcessAvailability} ((*it)
      .first)))
1094                 \{
1095                   \textcolor{comment}{// UE already allocated for HARQ or without HARQ process available -> drop it}
1096                   \textcolor{keywordflow}{if} (itRnti != rntiAllocated.end ())
1097                     \{
1098                       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI discared for HARQ tx"} << (uint16\_t)(*it).
      first);
1099                     \}
1100                   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}{HarqProcessAvailability} ((*it).first))
1101                     \{
1102                       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI discared for HARQ id"} << (uint16\_t)(*it).
      first);
1103                     \}
1104                   \textcolor{keywordflow}{continue};
1105                 \}
1106               std::map <uint16\_t,SbMeasResult\_s>::iterator itCqi;
1107               itCqi = \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.find ((*it).first);
1108               std::map <uint16\_t,uint8\_t>::iterator itTxMode;
1109               itTxMode = \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.find ((*it).first);
1110               \textcolor{keywordflow}{if} (itTxMode == \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.end ())
1111                 \{
1112                   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Transmission Mode info on user "} << (*it).first);
1113                 \}
1114               \textcolor{keywordtype}{int} nLayer = \hyperlink{classns3_1_1TransmissionModesLayers_a31f608b7bfaa77440fe4cb85ad035329}{TransmissionModesLayers::TxMode2LayerNum}
       ((*itTxMode).second);
1115               std::vector <uint8\_t> sbCqi;
1116               \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.end ())
1117                 \{
1118                   \textcolor{keywordflow}{for} (uint8\_t k = 0; k < nLayer; k++)
1119                     \{
1120                       sbCqi.push\_back (1);  \textcolor{comment}{// start with lowest value}
1121                     \}
1122                 \}
1123               \textcolor{keywordflow}{else}
1124                 \{
1125                   sbCqi = (*itCqi).second.m\_higherLayerSelected.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_sbCqi;
1126                 \}
1127               uint8\_t cqi1 = sbCqi.at (0);
1128               uint8\_t cqi2 = 1;
1129               \textcolor{keywordflow}{if} (sbCqi.size () > 1)
1130                 \{
1131                   cqi2 = sbCqi.at (1);
1132                 \}
1133 
1134               \textcolor{keywordflow}{if} ((cqi1 > 0)||(cqi2 > 0)) \textcolor{comment}{// CQI == 0 means "out of range" (see table 7.2.3-1 of 36.213)}
1135                 \{
1136                   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}{LcActivePerFlow} ((*it).first) > 0)
1137                     \{
1138                       \textcolor{comment}{// this UE has data to transmit}
1139                       \textcolor{keywordtype}{double} achievableRate = 0.0;
1140                       uint8\_t mcs = 0;
1141                       \textcolor{keywordflow}{for} (uint8\_t k = 0; k < nLayer; k++)
1142                         \{
1143                           \textcolor{keywordflow}{if} (sbCqi.size () > k)
1144                             \{
1145                               mcs = \hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetMcsFromCqi (sbCqi.at (k));
1146                             \}
1147                           \textcolor{keywordflow}{else}
1148                             \{
1149                               \textcolor{comment}{// no info on this subband -> worst MCS}
1150                               mcs = 0;
1151                             \}
1152                           achievableRate += ((\hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetTbSizeFromMcs (mcs, rbgSize) / 8) / 0.001);   \textcolor{comment}{
      // = TB size / TTI}
1153                         \}
1154 
1155                       \textcolor{keywordtype}{double} rcqi = achievableRate / (*it).second.lastAveragedThroughput;
1156                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << (*it).first << \textcolor{stringliteral}{" MCS "} << (uint32\_t)mcs 
      << \textcolor{stringliteral}{" achievableRate "} << achievableRate << \textcolor{stringliteral}{" avgThr "} << (*it).second.lastAveragedThroughput << \textcolor{stringliteral}{" RCQI "} << 
      rcqi);
1157 
1158                       \textcolor{keywordflow}{if} (rcqi > rcqiMax)
1159                         \{
1160                           rcqiMax = rcqi;
1161                           itMax = it;
1162                         \}
1163                     \}
1164                 \}   \textcolor{comment}{// end if cqi}
1165             \} \textcolor{comment}{// end for m\_rlcBufferReq}
1166 
1167           \textcolor{keywordflow}{if} (itMax == \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.end ())
1168             \{
1169               \textcolor{comment}{// no UE available for this RB}
1170               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" any UE found"});
1171             \}
1172           \textcolor{keywordflow}{else}
1173             \{
1174               rbgMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = \textcolor{keyword}{true};
1175               std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap;
1176               itMap = allocationMap.find ((*itMax).first);
1177               \textcolor{keywordflow}{if} (itMap == allocationMap.end ())
1178                 \{
1179                   \textcolor{comment}{// insert new element}
1180                   std::vector <uint16\_t> tempMap;
1181                   tempMap.push\_back (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1182                   allocationMap.insert (std::pair <uint16\_t, std::vector <uint16\_t> > ((*itMax).first, 
      tempMap));
1183                 \}
1184               \textcolor{keywordflow}{else}
1185                 \{
1186                   (*itMap).second.push\_back (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1187                 \}
1188               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE assigned "} << (*itMax).first);
1189             \}
1190         \} \textcolor{comment}{// end for RBG free}
1191     \} \textcolor{comment}{// end for RBGs}
1192 
1193   \textcolor{comment}{// reset TTI stats of users}
1194   std::map <uint16\_t, pfsFlowPerf\_t>::iterator itStats;
1195   \textcolor{keywordflow}{for} (itStats = \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.begin (); itStats != \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.end (); itStats
      ++)
1196     \{
1197       (*itStats).second.lastTtiBytesTrasmitted = 0;
1198     \}
1199 
1200   \textcolor{comment}{// generate the transmission opportunities by grouping the RBGs of the same RNTI and}
1201   \textcolor{comment}{// creating the correspondent DCIs}
1202   std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap = allocationMap.begin ();
1203   \textcolor{keywordflow}{while} (itMap != allocationMap.end ())
1204     \{
1205       \textcolor{comment}{// create new BuildDataListElement\_s for this LC}
1206       BuildDataListElement\_s newEl;
1207       newEl.m\_rnti = (*itMap).first;
1208       \textcolor{comment}{// create the DlDciListElement\_s}
1209       DlDciListElement\_s newDci;
1210       newDci.m\_rnti = (*itMap).first;
1211       newDci.m\_harqProcess = \hyperlink{classns3_1_1PfFfMacScheduler_ac9ae283895ee58f636597117be34f959}{UpdateHarqProcessId} ((*itMap).first);
1212 
1213       uint16\_t lcActives = \hyperlink{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}{LcActivePerFlow} ((*itMap).first);
1214       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"Allocate user "} << newEl.m\_rnti << \textcolor{stringliteral}{" rbg "} << lcActives);
1215       \textcolor{keywordflow}{if} (lcActives == 0)
1216         \{
1217           \textcolor{comment}{// Set to max value, to avoid divide by 0 below}
1218           lcActives = (uint16\_t)65535; \textcolor{comment}{// UINT16\_MAX;}
1219         \}
1220       uint16\_t RgbPerRnti = (*itMap).second.size ();
1221       std::map <uint16\_t,SbMeasResult\_s>::iterator itCqi;
1222       itCqi = \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.find ((*itMap).first);
1223       std::map <uint16\_t,uint8\_t>::iterator itTxMode;
1224       itTxMode = \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.find ((*itMap).first);
1225       \textcolor{keywordflow}{if} (itTxMode == \hyperlink{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{m\_uesTxMode}.end ())
1226         \{
1227           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Transmission Mode info on user "} << (*itMap).first);
1228         \}
1229       \textcolor{keywordtype}{int} nLayer = \hyperlink{classns3_1_1TransmissionModesLayers_a31f608b7bfaa77440fe4cb85ad035329}{TransmissionModesLayers::TxMode2LayerNum} (
      (*itTxMode).second);
1230       std::vector <uint8\_t> worstCqi (2, 15);
1231       \textcolor{keywordflow}{if} (itCqi != \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.end ())
1232         \{
1233           \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itMap).second.size (); k++)
1234             \{
1235               \textcolor{keywordflow}{if} ((*itCqi).second.m\_higherLayerSelected.size () > (*itMap).second.at (k))
1236                 \{
1237                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RBG "} << (*itMap).second.at (k) << \textcolor{stringliteral}{" CQI "} << (uint16\_t
      )((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).m\_sbCqi.at (0)) );
1238                   \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1239                     \{
1240                       \textcolor{keywordflow}{if} ((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).m\_sbCqi.size ()
       > j)
1241                         \{
1242                           \textcolor{keywordflow}{if} (((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.at (k)).m\_sbCqi.at
       (j)) < worstCqi.at (j))
1243                             \{
1244                               worstCqi.at (j) = ((*itCqi).second.m\_higherLayerSelected.at ((*itMap).second.
      at (k)).m\_sbCqi.at (j));
1245                             \}
1246                         \}
1247                       \textcolor{keywordflow}{else}
1248                         \{
1249                           \textcolor{comment}{// no CQI for this layer of this suband -> worst one}
1250                           worstCqi.at (j) = 1;
1251                         \}
1252                     \}
1253                 \}
1254               \textcolor{keywordflow}{else}
1255                 \{
1256                   \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1257                     \{
1258                       worstCqi.at (j) = 1; \textcolor{comment}{// try with lowest MCS in RBG with no info on channel}
1259                     \}
1260                 \}
1261             \}
1262         \}
1263       \textcolor{keywordflow}{else}
1264         \{
1265           \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1266             \{
1267               worstCqi.at (j) = 1; \textcolor{comment}{// try with lowest MCS in RBG with no info on channel}
1268             \}
1269         \}
1270       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1271         \{
1272           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Layer "} << (uint16\_t)j << \textcolor{stringliteral}{" CQI selected "} << (uint16\_t)
      worstCqi.at (j));
1273         \}
1274       uint32\_t bytesTxed = 0;
1275       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1276         \{
1277           newDci.m\_mcs.push\_back (\hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetMcsFromCqi (worstCqi.at (j)));
1278           \textcolor{keywordtype}{int} tbSize = (\hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetTbSizeFromMcs (newDci.m\_mcs.at (j), RgbPerRnti * rbgSize) / 8); \textcolor{comment}{//
       (size of TB in bytes according to table 7.1.7.2.1-1 of 36.213)}
1279           newDci.m\_tbsSize.push\_back (tbSize);
1280           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Layer "} << (uint16\_t)j << \textcolor{stringliteral}{" MCS selected"} << 
      \hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetMcsFromCqi (worstCqi.at (j)));
1281           bytesTxed += tbSize;
1282         \}
1283 
1284       newDci.m\_resAlloc = 0;  \textcolor{comment}{// only allocation type 0 at this stage}
1285       newDci.m\_rbBitmap = 0; \textcolor{comment}{// TBD (32 bit bitmap see 7.1.6 of 36.213)}
1286       uint32\_t rbgMask = 0;
1287       \textcolor{keywordflow}{for} (uint16\_t k = 0; k < (*itMap).second.size (); k++)
1288         \{
1289           rbgMask = rbgMask + (0x1 << (*itMap).second.at (k));
1290           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Allocated RBG "} << (*itMap).second.at (k));
1291         \}
1292       newDci.m\_rbBitmap = rbgMask; \textcolor{comment}{// (32 bit bitmap see 7.1.6 of 36.213)}
1293 
1294       \textcolor{comment}{// create the rlc PDUs -> equally divide resources among actives LCs}
1295       std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator itBufReq;
1296       \textcolor{keywordflow}{for} (itBufReq = \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.begin (); itBufReq != 
      \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.end (); itBufReq++)
1297         \{
1298           \textcolor{keywordflow}{if} (((*itBufReq).first.m\_rnti == (*itMap).first)
1299               && (((*itBufReq).second.m\_rlcTransmissionQueueSize > 0)
1300                   || ((*itBufReq).second.m\_rlcRetransmissionQueueSize > 0)
1301                   || ((*itBufReq).second.m\_rlcStatusPduSize > 0) ))
1302             \{
1303               std::vector <struct RlcPduListElement\_s> newRlcPduLe;
1304               \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1305                 \{
1306                   RlcPduListElement\_s newRlcEl;
1307                   newRlcEl.m\_logicalChannelIdentity = (*itBufReq).first.m\_lcId;
1308                   newRlcEl.m\_size = newDci.m\_tbsSize.at (j) / lcActives;
1309                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" LCID "} << (uint32\_t) newRlcEl.m\_logicalChannelIdentity 
      << \textcolor{stringliteral}{" size "} << newRlcEl.m\_size << \textcolor{stringliteral}{" layer "} << (uint16\_t)j);
1310                   newRlcPduLe.push\_back (newRlcEl);
1311                   \hyperlink{classns3_1_1PfFfMacScheduler_aca3332c10f1c59e1279001247ca7da79}{UpdateDlRlcBufferInfo} (newDci.m\_rnti, newRlcEl.
      m\_logicalChannelIdentity, newRlcEl.m\_size);
1312                   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\_harqOn} == \textcolor{keyword}{true})
1313                     \{
1314                       \textcolor{comment}{// store RLC PDU list for HARQ}
1315                       std::map <uint16\_t, DlHarqRlcPduListBuffer\_t>::iterator itRlcPdu =  
      \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.find ((*itMap).first);
1316                       \textcolor{keywordflow}{if} (itRlcPdu == \hyperlink{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{m\_dlHarqProcessesRlcPduListBuffer}.
      end ())
1317                         \{
1318                           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RlcPdcList in HARQ buffer for RNTI 
      "} << (*itMap).first);
1319                         \}
1320                       (*itRlcPdu).second.at (j).at (newDci.m\_harqProcess).push\_back (newRlcEl);
1321                     \}
1322                 \}
1323               newEl.m\_rlcPduList.push\_back (newRlcPduLe);
1324             \}
1325           \textcolor{keywordflow}{if} ((*itBufReq).first.m\_rnti > (*itMap).first)
1326             \{
1327               \textcolor{keywordflow}{break};
1328             \}
1329         \}
1330       \textcolor{keywordflow}{for} (uint8\_t j = 0; j < nLayer; j++)
1331         \{
1332           newDci.m\_ndi.push\_back (1);
1333           newDci.m\_rv.push\_back (0);
1334         \}
1335 
1336       newDci.m\_tpc = \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a0021d72c12fdaddd3817ef0eb5a7cd4e}{GetTpc} ((*itMap).first);
1337 
1338       newEl.m\_dci = newDci;
1339 
1340       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\_harqOn} == \textcolor{keyword}{true})
1341         \{
1342           \textcolor{comment}{// store DCI for HARQ}
1343           std::map <uint16\_t, DlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\_dlHarqProcessesDciBuffer}.find (newEl.m\_rnti);
1344           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{m\_dlHarqProcessesDciBuffer}.end ())
1345             \{
1346               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in DCI HARQ buffer for RNTI "} << 
      newEl.m\_rnti);
1347             \}
1348           (*itDci).second.at (newDci.m\_harqProcess) = newDci;
1349           \textcolor{comment}{// refresh timer}
1350           std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itHarqTimer =  
      \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.find (newEl.m\_rnti);
1351           \textcolor{keywordflow}{if} (itHarqTimer== \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.end ())
1352             \{
1353               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find HARQ timer for RNTI "} << (uint16\_t)newEl.m\_rnti
      );
1354             \}
1355           (*itHarqTimer).second.at (newDci.m\_harqProcess) = 0;
1356         \}
1357 
1358       \textcolor{comment}{// ...more parameters -> ingored in this version}
1359 
1360       ret.m\_buildDataList.push\_back (newEl);
1361       \textcolor{comment}{// update UE stats}
1362       std::map <uint16\_t, pfsFlowPerf\_t>::iterator it;
1363       it = \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.find ((*itMap).first);
1364       \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.end ())
1365         \{
1366           (*it).second.lastTtiBytesTrasmitted = bytesTxed;
1367           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE total bytes txed "} << (*it).second.lastTtiBytesTrasmitted);
1368 
1369 
1370         \}
1371       \textcolor{keywordflow}{else}
1372         \{
1373           \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" No Stats for this allocated UE"});
1374         \}
1375 
1376       itMap++;
1377     \} \textcolor{comment}{// end while allocation}
1378   ret.m\_nrOfPdcchOfdmSymbols = 1;   
1379 
1380 
1381   \textcolor{comment}{// update UEs stats}
1382   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Update UEs statistics"});
1383   \textcolor{keywordflow}{for} (itStats = \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.begin (); itStats != \hyperlink{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{m\_flowStatsDl}.end (); itStats
      ++)
1384     \{
1385       (*itStats).second.totalBytesTransmitted += (*itStats).second.lastTtiBytesTrasmitted;
1386       \textcolor{comment}{// update average throughput (see eq. 12.3 of Sec 12.3.1.2 of LTE – The UMTS Long Term Evolution, Ed
       Wiley)}
1387       (*itStats).second.lastAveragedThroughput = ((1.0 - (1.0 / \hyperlink{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}{m\_timeWindow})) * (*itStats).
      second.lastAveragedThroughput) + ((1.0 / \hyperlink{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}{m\_timeWindow}) * (double)((*itStats).second.
      lastTtiBytesTrasmitted / 0.001));
1388       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE total bytes "} << (*itStats).second.totalBytesTransmitted);
1389       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE average throughput "} << (*itStats).second.lastAveragedThroughput
      );
1390       (*itStats).second.lastTtiBytesTrasmitted = 0;
1391     \}
1392 
1393   \hyperlink{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a28f8484af5a32a45ee6c0e51770d83f7}{SchedDlConfigInd} (ret);
1394 
1395 
1396   \textcolor{keywordflow}{return};
1397 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15




Here is the caller graph for this function\+:
% FIG 16


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}}
\index{Do\+Sched\+Dl\+Trigger\+Req@{Do\+Sched\+Dl\+Trigger\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Dl\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters \&params)}{DoSchedDlTriggerReq(const struct FfMacSchedSapProvider::SchedDlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Dl\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a837f4e59a9df97e0baeda35cf1edbd38}{}\label{classns3_1_1PfFfMacScheduler_a837f4e59a9df97e0baeda35cf1edbd38}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedUlCqiInfoReq(const struct FfMacSchedSapProvider::SchedUlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aee839d62cb98ea021c3f8f92f7348ada}{}\label{classns3_1_1PfFfMacScheduler_aee839d62cb98ea021c3f8f92f7348ada}

\begin{DoxyCode}
1971 \{
1972   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1973   \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a14e6bcaf7db6afcb42f75122717313b1}{ReportUlCqiInfo} (params);
1974 
1975 \textcolor{comment}{// retrieve the allocation for this subframe}
1976   \textcolor{keywordflow}{switch} (\hyperlink{classns3_1_1FfMacScheduler_adae16e66a1c4231da80a1221297442cf}{m\_ulCqiFilter})
1977     \{
1978     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52af2e0df473ba2c8f9cb131cb760591aed}{FfMacScheduler::SRS\_UL\_CQI}:
1979       \{
1980         \textcolor{comment}{// filter all the CQIs that are not SRS based}
1981         \textcolor{keywordflow}{if} (params.m\_ulCqi.m\_type != \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af4b6dba4243636562c910c4d4761dd7e}{UlCqi\_s::SRS})
1982           \{
1983             \textcolor{keywordflow}{return};
1984           \}
1985       \}
1986       \textcolor{keywordflow}{break};
1987     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52a4a833bc779439b15bd904e1dd8eaa563}{FfMacScheduler::PUSCH\_UL\_CQI}:
1988       \{
1989         \textcolor{comment}{// filter all the CQIs that are not SRS based}
1990         \textcolor{keywordflow}{if} (params.m\_ulCqi.m\_type != \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a9716b20a3095c473ae3fde1eb5d0bb63}{UlCqi\_s::PUSCH})
1991           \{
1992             \textcolor{keywordflow}{return};
1993           \}
1994       \}
1995     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1FfMacScheduler_aa47a9eb25f2c558c825b0be645304a52a84059a597c72335f0a5963c3efcbda71}{FfMacScheduler::ALL\_UL\_CQI}:
1996       \textcolor{keywordflow}{break};
1997 
1998     \textcolor{keywordflow}{default}:
1999       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unknown UL CQI type"});
2000     \}
2001 
2002   \textcolor{keywordflow}{switch} (params.m\_ulCqi.m\_type)
2003     \{
2004     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a9716b20a3095c473ae3fde1eb5d0bb63}{UlCqi\_s::PUSCH}:
2005       \{
2006         std::map <uint16\_t, std::vector <uint16\_t> >::iterator itMap;
2007         std::map <uint16\_t, std::vector <double> >::iterator itCqi;
2008         \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Collect PUSCH CQIs of Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{"
       subframe no. "} << (0xF & params.m\_sfnSf));
2009         itMap = \hyperlink{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}{m\_allocationMaps}.find (params.m\_sfnSf);
2010         \textcolor{keywordflow}{if} (itMap == \hyperlink{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}{m\_allocationMaps}.end ())
2011           \{
2012             \textcolor{keywordflow}{return};
2013           \}
2014         \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < (*itMap).second.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2015           \{
2016             \textcolor{comment}{// convert from fixed point notation Sxxxxxxxxxxx.xxx to double}
2017             \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2018             itCqi = \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.find ((*itMap).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2019             \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.end ())
2020               \{
2021                 \textcolor{comment}{// create a new entry}
2022                 std::vector <double> newCqi;
2023                 \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2024                   \{
2025                     \textcolor{keywordflow}{if} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} == j)
2026                       \{
2027                         newCqi.push\_back (sinr);
2028                       \}
2029                     \textcolor{keywordflow}{else}
2030                       \{
2031                         \textcolor{comment}{// initialize with NO\_SINR value.}
2032                         newCqi.push\_back (\hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR});
2033                       \}
2034 
2035                   \}
2036                 \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.insert (std::pair <uint16\_t, std::vector <double> > ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), newCqi));
2037                 \textcolor{comment}{// generate correspondent timer}
2038                 \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\_ueCqiTimers}.insert (std::pair <uint16\_t, uint32\_t > ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold}));
2039               \}
2040             \textcolor{keywordflow}{else}
2041               \{
2042                 \textcolor{comment}{// update the value}
2043                 (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = sinr;
2044                 \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << (*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) << \textcolor{stringliteral}{" RB "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" SINR "} << sinr);
2045                 \textcolor{comment}{// update correspondent timer}
2046                 std::map <uint16\_t, uint32\_t>::iterator itTimers;
2047                 itTimers = \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\_ueCqiTimers}.find ((*itMap).second.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
2048                 (*itTimers).second = \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold};
2049 
2050               \}
2051 
2052           \}
2053         \textcolor{comment}{// remove obsolete info on allocation}
2054         \hyperlink{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}{m\_allocationMaps}.erase (itMap);
2055       \}
2056       \textcolor{keywordflow}{break};
2057     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af4b6dba4243636562c910c4d4761dd7e}{UlCqi\_s::SRS}:
2058       \{
2059          \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Collect SRS CQIs of Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{"
       subframe no. "} << (0xF & params.m\_sfnSf));
2060         \textcolor{comment}{// get the RNTI from vendor specific parameters}
2061         uint16\_t rnti = 0;
2062         \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (params.m\_vendorSpecificList.size () > 0);
2063         \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_vendorSpecificList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
2064           \{
2065             \textcolor{keywordflow}{if} (params.m\_vendorSpecificList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_type == \hyperlink{lte-vendor-specific-parameters_8h_a3b5e6e766032ab4a8e374a1cfd237a26}{SRS\_CQI\_RNTI\_VSP})
2066               \{
2067                 Ptr<SrsCqiRntiVsp> vsp = DynamicCast<SrsCqiRntiVsp> (params.m\_vendorSpecificList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_value);
2068                 rnti = vsp->GetRnti ();
2069               \}
2070           \}
2071         std::map <uint16\_t, std::vector <double> >::iterator itCqi;
2072         itCqi = \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.find (rnti);
2073         \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.end ())
2074           \{
2075             \textcolor{comment}{// create a new entry}
2076             std::vector <double> newCqi;
2077             \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2078               \{
2079                 \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (j));
2080                 newCqi.push\_back (sinr);
2081                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" new SRS-CQI for RB  "} << j << \textcolor{stringliteral}{" value
       "} << sinr);
2082 
2083               \}
2084             \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.insert (std::pair <uint16\_t, std::vector <double> > (rnti, newCqi));
2085             \textcolor{comment}{// generate correspondent timer}
2086             \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\_ueCqiTimers}.insert (std::pair <uint16\_t, uint32\_t > (rnti, 
      \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold}));
2087           \}
2088         \textcolor{keywordflow}{else}
2089           \{
2090             \textcolor{comment}{// update the values}
2091             \textcolor{keywordflow}{for} (uint32\_t j = 0; j < \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; j++)
2092               \{
2093                 \textcolor{keywordtype}{double} sinr = \hyperlink{classns3_1_1LteFfConverter_aa5d8c2a8f988dbd63da91818c18666eb}{LteFfConverter::fpS11dot3toDouble} (params.
      m\_ulCqi.m\_sinr.at (j));
2094                 (*itCqi).second.at (j) = sinr;
2095                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" update SRS-CQI for RB  "} << j << \textcolor{stringliteral}{"
       value "} << sinr);
2096               \}
2097             \textcolor{comment}{// update correspondent timer}
2098             std::map <uint16\_t, uint32\_t>::iterator itTimers;
2099             itTimers = \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\_ueCqiTimers}.find (rnti);
2100             (*itTimers).second = \hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold};
2101 
2102           \}
2103 
2104 
2105       \}
2106       \textcolor{keywordflow}{break};
2107     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a05ca6554bc6fcd96a0a51fbaa8e794c7}{UlCqi\_s::PUCCH\_1}:
2108     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57a35664b4bda6f1cd6acfe9edc84c7571d}{UlCqi\_s::PUCCH\_2}:
2109     \textcolor{keywordflow}{case} \hyperlink{structns3_1_1UlCqi__s_aece9e5ebea42eb9ff1744c72c8459b57af93f36792cb1eed08f6119e4abfe58e8}{UlCqi\_s::PRACH}:
2110       \{
2111         \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"PfFfMacScheduler supports only PUSCH and SRS UL-CQIs"});
2112       \}
2113       \textcolor{keywordflow}{break};
2114     \textcolor{keywordflow}{default}:
2115       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unknown type of UL-CQI"});
2116     \}
2117   \textcolor{keywordflow}{return};
2118 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17




Here is the caller graph for this function\+:
% FIG 18


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}}
\index{Do\+Sched\+Ul\+Cqi\+Info\+Req@{Do\+Sched\+Ul\+Cqi\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Cqi\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters \&params)}{DoSchedUlCqiInfoReq(const struct FfMacSchedSapProvider::SchedUlCqiInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Cqi\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Cqi\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aee839d62cb98ea021c3f8f92f7348ada}{}\label{classns3_1_1PfFfMacScheduler_aee839d62cb98ea021c3f8f92f7348ada}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}}
\index{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters \&params)}{DoSchedUlMacCtrlInfoReq(const struct FfMacSchedSapProvider::SchedUlMacCtrlInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a48cf6979a777cda384ae128948bc763a}{}\label{classns3_1_1PfFfMacScheduler_a48cf6979a777cda384ae128948bc763a}

\begin{DoxyCode}
1927 \{
1928   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1929 
1930   std::map <uint16\_t,uint32\_t>::iterator it;
1931 
1932   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_macCeList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1933     \{
1934       \textcolor{keywordflow}{if} ( params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_macCeType == \hyperlink{structns3_1_1MacCeListElement__s_a270a6526dfc7da02e9dc91823c290f6bac50796b01160b1825ec34efa1ad9f051}{MacCeListElement\_s::BSR} )
1935         \{
1936           \textcolor{comment}{// buffer status report}
1937           \textcolor{comment}{// note that this scheduler does not differentiate the}
1938           \textcolor{comment}{// allocation according to which LCGs have more/less bytes}
1939           \textcolor{comment}{// to send.}
1940           \textcolor{comment}{// Hence the BSR of different LCGs are just summed up to get}
1941           \textcolor{comment}{// a total queue size that is used for allocation purposes.}
1942 
1943           uint32\_t buffer = 0;
1944           \textcolor{keywordflow}{for} (uint8\_t lcg = 0; lcg < 4; ++lcg)
1945             \{
1946               uint8\_t bsrId = params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_macCeValue.m\_bufferStatus.at (lcg);
1947               buffer += \hyperlink{classns3_1_1BufferSizeLevelBsr_a67fc905f267ed8ac5a617fe229699122}{BufferSizeLevelBsr::BsrId2BufferSize} (bsrId);
1948             \}
1949 
1950           uint16\_t rnti = params.m\_macCeList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1951           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"RNTI="} << rnti << \textcolor{stringliteral}{" buffer="} << buffer);
1952           it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.find (rnti);
1953           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end ())
1954             \{
1955               \textcolor{comment}{// create the new entry}
1956               \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.insert ( std::pair<uint16\_t, uint32\_t > (rnti, buffer));
1957             \}
1958           \textcolor{keywordflow}{else}
1959             \{
1960               \textcolor{comment}{// update the buffer size value}
1961               (*it).second = buffer;
1962             \}
1963         \}
1964     \}
1965 
1966   \textcolor{keywordflow}{return};
1967 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19




Here is the caller graph for this function\+:
% FIG 20


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}}
\index{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req@{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters \&params)}{DoSchedUlMacCtrlInfoReq(const struct FfMacSchedSapProvider::SchedUlMacCtrlInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Mac\+Ctrl\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a48cf6979a777cda384ae128948bc763a}{}\label{classns3_1_1PfFfMacScheduler_a48cf6979a777cda384ae128948bc763a}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}}
\index{Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Noise\+Interference\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters \&params)}{DoSchedUlNoiseInterferenceReq(const struct FfMacSchedSapProvider::SchedUlNoiseInterferenceReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Noise\+Interference\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a39febc9ac141bb97d26fa01578a5d07d}{}\label{classns3_1_1PfFfMacScheduler_a39febc9ac141bb97d26fa01578a5d07d}

\begin{DoxyCode}
1913 \{
1914   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1915   \textcolor{keywordflow}{return};
1916 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 21


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}}
\index{Do\+Sched\+Ul\+Noise\+Interference\+Req@{Do\+Sched\+Ul\+Noise\+Interference\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Noise\+Interference\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters \&params)}{DoSchedUlNoiseInterferenceReq(const struct FfMacSchedSapProvider::SchedUlNoiseInterferenceReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Noise\+Interference\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Noise\+Interference\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a39febc9ac141bb97d26fa01578a5d07d}{}\label{classns3_1_1PfFfMacScheduler_a39febc9ac141bb97d26fa01578a5d07d}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}}
\index{Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Sr\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters \&params)}{DoSchedUlSrInfoReq(const struct FfMacSchedSapProvider::SchedUlSrInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Sr\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a87361eb8a2ed138ae4030b5c0cc36a22}{}\label{classns3_1_1PfFfMacScheduler_a87361eb8a2ed138ae4030b5c0cc36a22}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}}
\index{Do\+Sched\+Ul\+Sr\+Info\+Req@{Do\+Sched\+Ul\+Sr\+Info\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Sr\+Info\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters \&params)}{DoSchedUlSrInfoReq(const struct FfMacSchedSapProvider::SchedUlSrInfoReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Sr\+Info\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Sr\+Info\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a87361eb8a2ed138ae4030b5c0cc36a22}{}\label{classns3_1_1PfFfMacScheduler_a87361eb8a2ed138ae4030b5c0cc36a22}

\begin{DoxyCode}
1920 \{
1921   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1922   \textcolor{keywordflow}{return};
1923 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 22


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}}
\index{Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters \&params)}{DoSchedUlTriggerReq(const struct FfMacSchedSapProvider::SchedUlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a31f30c23ae2d06b51dc81f24cb397e4b}{}\label{classns3_1_1PfFfMacScheduler_a31f30c23ae2d06b51dc81f24cb397e4b}

\begin{DoxyCode}
1504 \{
1505   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL - Frame no. "} << (params.m\_sfnSf >> 4) << \textcolor{stringliteral}{" subframe no. "} 
      << (0xF & params.m\_sfnSf) << \textcolor{stringliteral}{" size "} << params.m\_ulInfoList.size ());
1506 
1507   \hyperlink{classns3_1_1PfFfMacScheduler_a6256dfa03daee0f6fcff485dfb6914d4}{RefreshUlCqiMaps} ();
1508   \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a14e6bcaf7db6afcb42f75122717313b1}{ReportUlCqiInfo} (\hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi});
1509 
1510   \textcolor{comment}{// Generate RBs map}
1511   FfMacSchedSapUser::SchedUlConfigIndParameters ret;
1512   std::vector <bool> rbMap;
1513   uint16\_t rbAllocatedNum = 0;
1514   std::set <uint16\_t> rntiAllocated;
1515   std::vector <uint16\_t> rbgAllocationMap;
1516   \textcolor{comment}{// update with RACH allocation map}
1517   rbgAllocationMap = \hyperlink{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{m\_rachAllocationMap};
1518   \textcolor{comment}{//rbgAllocationMap.resize (m\_cschedCellConfig.m\_ulBandwidth, 0);}
1519   \hyperlink{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{m\_rachAllocationMap}.clear ();
1520   \hyperlink{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{m\_rachAllocationMap}.resize (\hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, 0);
1521 
1522   rbMap.resize (\hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}, \textcolor{keyword}{false});
1523   rbMap = \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_aafd23b22a27ec83e03d54795c122d175}{GetAvailableUlRbg} ();
1524 
1525   \textcolor{keywordflow}{for} (std::vector<bool>::iterator it = rbMap.begin (); it != rbMap.end (); it++)
1526     \{
1527       \textcolor{keywordflow}{if} ((*it) == true )
1528         \{
1529           rbAllocatedNum++;
1530         \}
1531     \}
1532 
1533   uint8\_t minContinuousUlBandwidth = \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->
      \hyperlink{classns3_1_1LteFfrSapProvider_a78c8a0c801d8a7d4f2e853f5138fd577}{GetMinContinuousUlBandwidth} ();
1534   uint8\_t ffrUlBandwidth = \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocatedNum
      ;
1535 
1536   \textcolor{comment}{// remove RACH allocation}
1537   \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1538     \{
1539       \textcolor{keywordflow}{if} (rbgAllocationMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) != 0)
1540         \{
1541           rbMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = \textcolor{keyword}{true};
1542           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Allocated for RACH "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1543         \}
1544     \}
1545 
1546 
1547   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\_harqOn} == \textcolor{keyword}{true})
1548     \{
1549       \textcolor{comment}{//   Process UL HARQ feedback}
1550 
1551       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < params.m\_ulInfoList.size (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1552         \{
1553           \textcolor{keywordflow}{if} (params.m\_ulInfoList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_receptionStatus == 
      \hyperlink{structns3_1_1UlInfoListElement__s_a2a4dff5145d25c81086660e991db6f61a98aed738fd24811d3461668e394a53c8}{UlInfoListElement\_s::NotOk})
1554             \{
1555               \textcolor{comment}{// retx correspondent block: retrieve the UL-DCI}
1556               uint16\_t rnti = params.m\_ulInfoList.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti;
1557               std::map <uint16\_t, uint8\_t>::iterator itProcId = 
      \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.find (rnti);
1558               \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.end ())
1559                 \{
1560                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1561                 \}
1562               uint8\_t harqId = (uint8\_t)((*itProcId).second - \hyperlink{lte-common_8h_a275321ee206f130c3ddc81fcdaa13cfd}{HARQ\_PERIOD}) % 
      \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
1563               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-HARQ retx RNTI "} << rnti << \textcolor{stringliteral}{" harqId "} << (uint16\_t)
      harqId << \textcolor{stringliteral}{" i "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" size "}  << params.m\_ulInfoList.size ());
1564               std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itHarq = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.find (rnti);
1565               \textcolor{keywordflow}{if} (itHarq == \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.end ())
1566                 \{
1567                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1568                   \textcolor{keywordflow}{continue};
1569                 \}
1570               UlDciListElement\_s dci = (*itHarq).second.at (harqId);
1571               std::map <uint16\_t, UlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\_ulHarqProcessesStatus}.find (rnti);
1572               \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\_ulHarqProcessesStatus}.end ())
1573                 \{
1574                   \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << 
      rnti);
1575                 \}
1576               \textcolor{keywordflow}{if} ((*itStat).second.at (harqId) >= 3)
1577                 \{
1578                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Max number of retransmissions reached (UL)-> drop process"});
1579                   \textcolor{keywordflow}{continue};
1580                 \}
1581               \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
1582               \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = dci.m\_rbStart; j < dci.m\_rbStart + dci.m\_rbLen; j++)
1583                 \{
1584                   \textcolor{keywordflow}{if} (rbMap.at (j) == \textcolor{keyword}{true})
1585                     \{
1586                       free = \textcolor{keyword}{false};
1587                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" BUSY "} << j);
1588                     \}
1589                 \}
1590               \textcolor{keywordflow}{if} (free)
1591                 \{
1592                   \textcolor{comment}{// retx on the same RBs}
1593                   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = dci.m\_rbStart; j < dci.m\_rbStart + dci.m\_rbLen; j++)
1594                     \{
1595                       rbMap.at (j) = \textcolor{keyword}{true};
1596                       rbgAllocationMap.at (j) = dci.m\_rnti;
1597                       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"\(\backslash\)tRB "} << j);
1598                       rbAllocatedNum++;
1599                     \}
1600                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Send retx in the same RBs "} << (uint16\_t)dci.m\_rbStart 
      << \textcolor{stringliteral}{" to "} << dci.m\_rbStart + dci.m\_rbLen << \textcolor{stringliteral}{" RV "} << (*itStat).second.at (harqId) + 1);
1601                 \}
1602               \textcolor{keywordflow}{else}
1603                 \{
1604                   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Cannot allocate retx due to RACH allocations for UE "} << rnti);
1605                   \textcolor{keywordflow}{continue};
1606                 \}
1607               dci.m\_ndi = 0;
1608               \textcolor{comment}{// Update HARQ buffers with new HarqId}
1609               (*itStat).second.at ((*itProcId).second) = (*itStat).second.at (harqId) + 1;
1610               (*itStat).second.at (harqId) = 0;
1611               (*itHarq).second.at ((*itProcId).second) = dci;
1612               ret.m\_dciList.push\_back (dci);
1613               rntiAllocated.insert (dci.m\_rnti);
1614             \}
1615           \textcolor{keywordflow}{else}
1616             \{
1617               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" HARQ-ACK feedback from RNTI "} << params.m\_ulInfoList.at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}).m\_rnti);
1618             \}
1619         \}
1620     \}
1621 
1622   std::map <uint16\_t,uint32\_t>::iterator it;
1623   \textcolor{keywordtype}{int} nflows = 0;
1624 
1625   \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.begin (); it != \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end (); it++)
1626     \{
1627       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
1628       \textcolor{comment}{// select UEs with queues not empty and not yet allocated for HARQ}
1629       \textcolor{keywordflow}{if} (((*it).second > 0)&&(itRnti == rntiAllocated.end ()))
1630         \{
1631           nflows++;
1632         \}
1633     \}
1634 
1635   \textcolor{keywordflow}{if} (nflows == 0)
1636     \{
1637       \textcolor{keywordflow}{if} (ret.m\_dciList.size () > 0)
1638         \{
1639           \hyperlink{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}{m\_allocationMaps}.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.
      m\_sfnSf, rbgAllocationMap));
1640           \hyperlink{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a1b89636256701a84d990db7db8aea874}{SchedUlConfigInd} (ret);
1641         \}
1642 
1643       \textcolor{keywordflow}{return};  \textcolor{comment}{// no flows to be scheduled}
1644     \}
1645 
1646 
1647   \textcolor{comment}{// Divide the remaining resources equally among the active users starting from the subsequent one served
       last scheduling trigger}
1648   uint16\_t tempRbPerFlow = (ffrUlBandwidth) / (nflows + rntiAllocated.size ());
1649   uint16\_t rbPerFlow = (minContinuousUlBandwidth < tempRbPerFlow) ? minContinuousUlBandwidth : 
      tempRbPerFlow;
1650 
1651   \textcolor{keywordflow}{if} (rbPerFlow < 3)
1652     \{
1653       rbPerFlow = 3;  \textcolor{comment}{// at least 3 rbg per flow (till available resource) to ensure TxOpportunity >= 7
       bytes}
1654     \}
1655 
1656   \textcolor{keywordtype}{int} rbAllocated = 0;
1657 
1658   std::map <uint16\_t, pfsFlowPerf\_t>::iterator itStats;
1659   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl} != 0)
1660     \{
1661       \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.begin (); it != \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end (); it++)
1662         \{
1663           \textcolor{keywordflow}{if} ((*it).first == \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl})
1664             \{
1665               \textcolor{keywordflow}{break};
1666             \}
1667         \}
1668       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end ())
1669         \{
1670           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" no user found"});
1671         \}
1672     \}
1673   \textcolor{keywordflow}{else}
1674     \{
1675       it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.begin ();
1676       \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl} = (*it).first;
1677     \}
1678   \textcolor{keywordflow}{do}
1679     \{
1680       std::set <uint16\_t>::iterator itRnti = rntiAllocated.find ((*it).first);
1681       \textcolor{keywordflow}{if} ((itRnti != rntiAllocated.end ())||((*it).second == 0))
1682         \{
1683           \textcolor{comment}{// UE already allocated for UL-HARQ -> skip it}
1684           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE already allocated in HARQ -> discared, RNTI "} << (*it).
      first);
1685           it++;
1686           \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end ())
1687             \{
1688               \textcolor{comment}{// restart from the first}
1689               it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.begin ();
1690             \}
1691           \textcolor{keywordflow}{continue};
1692         \}
1693       \textcolor{keywordflow}{if} (rbAllocated + rbPerFlow - 1 > \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth})
1694         \{
1695           \textcolor{comment}{// limit to physical resources last resource assignment}
1696           rbPerFlow = \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocated;
1697           \textcolor{comment}{// at least 3 rbg per flow to ensure TxOpportunity >= 7 bytes}
1698           \textcolor{keywordflow}{if} (rbPerFlow < 3)
1699             \{
1700               \textcolor{comment}{// terminate allocation}
1701               rbPerFlow = 0;
1702             \}
1703         \}
1704 
1705       rbAllocated = 0;
1706       UlDciListElement\_s uldci;
1707       uldci.m\_rnti = (*it).first;
1708       uldci.m\_rbLen = rbPerFlow;
1709       \textcolor{keywordtype}{bool} allocated = \textcolor{keyword}{false};
1710 
1711       \textcolor{keywordflow}{while} ((!allocated)&&((rbAllocated + rbPerFlow - \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) < 1) && (rbPerFlow != 0))
1712         \{
1713           \textcolor{comment}{// check availability}
1714           \textcolor{keywordtype}{bool} free = \textcolor{keyword}{true};
1715           \textcolor{keywordflow}{for} (uint16\_t j = rbAllocated; j < rbAllocated + rbPerFlow; j++)
1716             \{
1717               \textcolor{keywordflow}{if} (rbMap.at (j) == \textcolor{keyword}{true})
1718                 \{
1719                   free = \textcolor{keyword}{false};
1720                   \textcolor{keywordflow}{break};
1721                 \}
1722               \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider}->\hyperlink{classns3_1_1LteFfrSapProvider_a3ef80840549b8ea3d50d2cef8a9866e2}{IsUlRbgAvailableForUe} (j, (*it).
      first)) == \textcolor{keyword}{false})
1723                 \{
1724                   free = \textcolor{keyword}{false};
1725                   \textcolor{keywordflow}{break};
1726                 \}
1727             \}
1728           \textcolor{keywordflow}{if} (free)
1729             \{
1730               \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"RNTI: "}<< (*it).first<< \textcolor{stringliteral}{" RB Allocated "} << rbAllocated << \textcolor{stringliteral}{"
       rbPerFlow "} << rbPerFlow << \textcolor{stringliteral}{" flows "} << nflows);
1731               uldci.m\_rbStart = rbAllocated;
1732 
1733               \textcolor{keywordflow}{for} (uint16\_t j = rbAllocated; j < rbAllocated + rbPerFlow; j++)
1734                 \{
1735                   rbMap.at (j) = \textcolor{keyword}{true};
1736                   \textcolor{comment}{// store info on allocation for managing ul-cqi interpretation}
1737                   rbgAllocationMap.at (j) = (*it).first;
1738                 \}
1739               rbAllocated += rbPerFlow;
1740               allocated = \textcolor{keyword}{true};
1741               \textcolor{keywordflow}{break};
1742             \}
1743           rbAllocated++;
1744           \textcolor{keywordflow}{if} (rbAllocated + rbPerFlow - 1 > \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth})
1745             \{
1746               \textcolor{comment}{// limit to physical resources last resource assignment}
1747               rbPerFlow = \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth} - rbAllocated;
1748               \textcolor{comment}{// at least 3 rbg per flow to ensure TxOpportunity >= 7 bytes}
1749               \textcolor{keywordflow}{if} (rbPerFlow < 3)
1750                 \{
1751                   \textcolor{comment}{// terminate allocation}
1752                   rbPerFlow = 0;
1753                 \}
1754             \}
1755         \}
1756       \textcolor{keywordflow}{if} (!allocated)
1757         \{
1758           \textcolor{comment}{// unable to allocate new resource: finish scheduling}
1759           \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl} = (*it).first;
1760 \textcolor{comment}{//          if (ret.m\_dciList.size () > 0)}
1761 \textcolor{comment}{//            \{}
1762 \textcolor{comment}{//              m\_schedSapUser->SchedUlConfigInd (ret);}
1763 \textcolor{comment}{//            \}}
1764 \textcolor{comment}{//          m\_allocationMaps.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.m\_sfnSf,
       rbgAllocationMap));}
1765 \textcolor{comment}{//          return;}
1766           \textcolor{keywordflow}{break};
1767         \}
1768 
1769 
1770 
1771       std::map <uint16\_t, std::vector <double> >::iterator itCqi = \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.find ((*it).first);
1772       \textcolor{keywordtype}{int} cqi = 0;
1773       \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.end ())
1774         \{
1775           \textcolor{comment}{// no cqi info about this UE}
1776           uldci.m\_mcs = 0; \textcolor{comment}{// MCS 0 -> UL-AMC TBD}
1777         \}
1778       \textcolor{keywordflow}{else}
1779         \{
1780           \textcolor{comment}{// take the lowest CQI value (worst RB)}
1781           \textcolor{keywordtype}{double} minSinr = (*itCqi).second.at (uldci.m\_rbStart);
1782           \textcolor{keywordflow}{if} (minSinr == \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
1783             \{
1784               minSinr = \hyperlink{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}{EstimateUlSinr} ((*it).first, uldci.m\_rbStart);
1785             \}
1786           \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = uldci.m\_rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < uldci.m\_rbStart + uldci.m\_rbLen; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1787             \{
1788               \textcolor{keywordtype}{double} sinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1789               \textcolor{keywordflow}{if} (sinr == \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
1790                 \{
1791                   sinr = \hyperlink{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}{EstimateUlSinr} ((*it).first, \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1792                 \}
1793               \textcolor{keywordflow}{if} ((*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) < minSinr)
1794                 \{
1795                   minSinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1796                 \}
1797             \}
1798 
1799           \textcolor{comment}{// translate SINR -> cqi: WILD ACK: same as DL}
1800           \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = log2 ( 1 + (
1801                               std::pow (10, minSinr / 10 )  /
1802                               ( (-std::log (5.0 * 0.00005 )) / 1.5) ));
1803           cqi = \hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetCqiFromSpectralEfficiency (s);
1804           \textcolor{keywordflow}{if} (cqi == 0)
1805             \{
1806               it++;
1807               \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end ())
1808                 \{
1809                   \textcolor{comment}{// restart from the first}
1810                   it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.begin ();
1811                 \}
1812               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE discared for CQI=0, RNTI "} << uldci.m\_rnti);
1813               \textcolor{comment}{// remove UE from allocation map}
1814               \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = uldci.m\_rbStart; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < uldci.m\_rbStart + uldci.m\_rbLen; 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1815                 \{
1816                   rbgAllocationMap.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
1817                 \}
1818               \textcolor{keywordflow}{continue}; \textcolor{comment}{// CQI == 0 means "out of range" (see table 7.2.3-1 of 36.213)}
1819             \}
1820           uldci.m\_mcs = \hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetMcsFromCqi (cqi);
1821         \}
1822 
1823       uldci.m\_tbSize = (\hyperlink{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{m\_amc}->GetTbSizeFromMcs (uldci.m\_mcs, rbPerFlow) / 8);
1824       \hyperlink{classns3_1_1PfFfMacScheduler_a5c0ac12d11b85ed7b27e81b278ded55d}{UpdateUlRlcBufferInfo} (uldci.m\_rnti, uldci.m\_tbSize);
1825       uldci.m\_ndi = 1;
1826       uldci.m\_cceIndex = 0;
1827       uldci.m\_aggrLevel = 1;
1828       uldci.m\_ueTxAntennaSelection = 3; \textcolor{comment}{// antenna selection OFF}
1829       uldci.m\_hopping = \textcolor{keyword}{false};
1830       uldci.m\_n2Dmrs = 0;
1831       uldci.m\_tpc = 0; \textcolor{comment}{// no power control}
1832       uldci.m\_cqiRequest = \textcolor{keyword}{false}; \textcolor{comment}{// only period CQI at this stage}
1833       uldci.m\_ulIndex = 0; \textcolor{comment}{// TDD parameter}
1834       uldci.m\_dai = 1; \textcolor{comment}{// TDD parameter}
1835       uldci.m\_freqHopping = 0;
1836       uldci.m\_pdcchPowerOffset = 0; \textcolor{comment}{// not used}
1837       ret.m\_dciList.push\_back (uldci);
1838       \textcolor{comment}{// store DCI for HARQ\_PERIOD}
1839       uint8\_t harqId = 0;
1840       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\_harqOn} == \textcolor{keyword}{true})
1841         \{
1842           std::map <uint16\_t, uint8\_t>::iterator itProcId;
1843           itProcId = \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.find (uldci.m\_rnti);
1844           \textcolor{keywordflow}{if} (itProcId == \hyperlink{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{m\_ulHarqCurrentProcessId}.end ())
1845             \{
1846               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE "} << uldci.m\_rnti);
1847             \}
1848           harqId = (*itProcId).second;
1849           std::map <uint16\_t, UlHarqProcessesDciBuffer\_t>::iterator itDci = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.find (uldci.m\_rnti);
1850           \textcolor{keywordflow}{if} (itDci == \hyperlink{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{m\_ulHarqProcessesDciBuffer}.end ())
1851             \{
1852               \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"Unable to find RNTI entry in UL DCI HARQ buffer for RNTI "} << 
      uldci.m\_rnti);
1853             \}
1854           (*itDci).second.at (harqId) = uldci;
1855           \textcolor{comment}{// Update HARQ process status (RV 0)}
1856           std::map <uint16\_t, UlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\_ulHarqProcessesStatus}.find (uldci.m\_rnti);
1857           \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{m\_ulHarqProcessesStatus}.end ())
1858             \{
1859               \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"No info find in HARQ buffer for UE (might change eNB) "} << uldci.
      m\_rnti);
1860             \}
1861           (*itStat).second.at (harqId) = 0;
1862         \}
1863 
1864       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE Allocation RNTI "} << (*it).first << \textcolor{stringliteral}{" startPRB "} << (uint32\_t)
      uldci.m\_rbStart << \textcolor{stringliteral}{" nPRB "} << (uint32\_t)uldci.m\_rbLen << \textcolor{stringliteral}{" CQI "} << cqi << \textcolor{stringliteral}{" MCS "} << (uint32\_t)uldci.m\_mcs 
      << \textcolor{stringliteral}{" TBsize "} << uldci.m\_tbSize << \textcolor{stringliteral}{" RbAlloc "} << rbAllocated << \textcolor{stringliteral}{" harqId "} << (uint16\_t)harqId);
1865 
1866       \textcolor{comment}{// update TTI  UE stats}
1867       itStats = \hyperlink{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{m\_flowStatsUl}.find ((*it).first);
1868       \textcolor{keywordflow}{if} (itStats != \hyperlink{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{m\_flowStatsUl}.end ())
1869         \{
1870           (*itStats).second.lastTtiBytesTrasmitted =  uldci.m\_tbSize;
1871         \}
1872       \textcolor{keywordflow}{else}
1873         \{
1874           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" No Stats for this allocated UE"});
1875         \}
1876 
1877 
1878       it++;
1879       \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end ())
1880         \{
1881           \textcolor{comment}{// restart from the first}
1882           it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.begin ();
1883         \}
1884       \textcolor{keywordflow}{if} ((rbAllocated == \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.\hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}) || (rbPerFlow ==
       0))
1885         \{
1886           \textcolor{comment}{// Stop allocation: no more PRBs}
1887           \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl} = (*it).first;
1888           \textcolor{keywordflow}{break};
1889         \}
1890     \}
1891   \textcolor{keywordflow}{while} (((*it).first != \hyperlink{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{m\_nextRntiUl})&&(rbPerFlow!=0));
1892 
1893 
1894   \textcolor{comment}{// Update global UE stats}
1895   \textcolor{comment}{// update UEs stats}
1896   \textcolor{keywordflow}{for} (itStats = \hyperlink{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{m\_flowStatsUl}.begin (); itStats != \hyperlink{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{m\_flowStatsUl}.end (); itStats
      ++)
1897     \{
1898       (*itStats).second.totalBytesTransmitted += (*itStats).second.lastTtiBytesTrasmitted;
1899       \textcolor{comment}{// update average throughput (see eq. 12.3 of Sec 12.3.1.2 of LTE – The UMTS Long Term Evolution, Ed
       Wiley)}
1900       (*itStats).second.lastAveragedThroughput = ((1.0 - (1.0 / \hyperlink{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}{m\_timeWindow})) * (*itStats).
      second.lastAveragedThroughput) + ((1.0 / \hyperlink{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}{m\_timeWindow}) * (double)((*itStats).second.
      lastTtiBytesTrasmitted / 0.001));
1901       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE total bytes "} << (*itStats).second.totalBytesTransmitted);
1902       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE average throughput "} << (*itStats).second.lastAveragedThroughput
      );
1903       (*itStats).second.lastTtiBytesTrasmitted = 0;
1904     \}
1905   \hyperlink{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}{m\_allocationMaps}.insert (std::pair <uint16\_t, std::vector <uint16\_t> > (params.m\_sfnSf, 
      rbgAllocationMap));
1906   \hyperlink{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{m\_schedSapUser}->\hyperlink{classns3_1_1FfMacSchedSapUser_a1b89636256701a84d990db7db8aea874}{SchedUlConfigInd} (ret);
1907 
1908   \textcolor{keywordflow}{return};
1909 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23




Here is the caller graph for this function\+:
% FIG 24


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}}
\index{Do\+Sched\+Ul\+Trigger\+Req@{Do\+Sched\+Ul\+Trigger\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Do\+Sched\+Ul\+Trigger\+Req(const struct Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters \&params)}{DoSchedUlTriggerReq(const struct FfMacSchedSapProvider::SchedUlTriggerReqParameters &params)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Do\+Sched\+Ul\+Trigger\+Req (
\begin{DoxyParamCaption}
\item[{const struct {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Ul\+Trigger\+Req\+Parameters} \&}]{params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a31f30c23ae2d06b51dc81f24cb397e4b}{}\label{classns3_1_1PfFfMacScheduler_a31f30c23ae2d06b51dc81f24cb397e4b}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}}
\index{Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Estimate\+Ul\+Sinr(uint16\+\_\+t rnti, uint16\+\_\+t rb)}{EstimateUlSinr(uint16_t rnti, uint16_t rb)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Estimate\+Ul\+Sinr (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{rb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}{}\label{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}

\begin{DoxyCode}
1473 \{
1474   std::map <uint16\_t, std::vector <double> >::iterator itCqi = \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.find (rnti);
1475   \textcolor{keywordflow}{if} (itCqi == \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.end ())
1476     \{
1477       \textcolor{comment}{// no cqi info about this UE}
1478       \textcolor{keywordflow}{return} (\hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR});
1479 
1480     \}
1481   \textcolor{keywordflow}{else}
1482     \{
1483       \textcolor{comment}{// take the average SINR value among the available}
1484       \textcolor{keywordtype}{double} sinrSum = 0;
1485       \textcolor{keywordtype}{int} sinrNum = 0;
1486       \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{m\_cschedCellConfig}.
      \hyperlink{structns3_1_1FfMacCschedSapProvider_1_1CschedCellConfigReqParameters_a5ab5b102878e6e7e7727a14af4a64d2f}{m\_ulBandwidth}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
1487         \{
1488           \textcolor{keywordtype}{double} sinr = (*itCqi).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
1489           \textcolor{keywordflow}{if} (sinr != \hyperlink{cqa-ff-mac-scheduler_8h_a520d71777be043568160c783a9c65fd5}{NO\_SINR})
1490             \{
1491               sinrSum += sinr;
1492               sinrNum++;
1493             \}
1494         \}
1495       \textcolor{keywordtype}{double} estimatedSinr = (sinrNum > 0) ? (sinrSum / sinrNum) : DBL\_MAX;
1496       \textcolor{comment}{// store the value}
1497       (*itCqi).second.at (rb) = estimatedSinr;
1498       \textcolor{keywordflow}{return} (estimatedSinr);
1499     \}
1500 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 25


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}}
\index{Estimate\+Ul\+Sinr@{Estimate\+Ul\+Sinr}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Estimate\+Ul\+Sinr(uint16\+\_\+t rnti, uint16\+\_\+t rb)}{EstimateUlSinr(uint16_t rnti, uint16_t rb)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Estimate\+Ul\+Sinr (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{rb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}{}\label{classns3_1_1PfFfMacScheduler_a1aa80e0dfaceffc9619450c0b31bee01}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Csched\+Sap\+Provider()}{GetFfMacCschedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf Ff\+Mac\+Csched\+Sap\+Provider}$\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Csched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a7ff8ac4c9fede4ff56ac1cc69072bfd2}{}\label{classns3_1_1PfFfMacScheduler_a7ff8ac4c9fede4ff56ac1cc69072bfd2}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Csched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a458388c88c892d32e2d7a48883947379}{ns3\+::\+Ff\+Mac\+Scheduler}.

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Csched\+Sap\+Provider@{Get\+Ff\+Mac\+Csched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Csched\+Sap\+Provider()}{GetFfMacCschedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Csched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_abcd84721f95e8b9d01fb8f54f58b906b}{}\label{classns3_1_1PfFfMacScheduler_abcd84721f95e8b9d01fb8f54f58b906b}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Csched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a458388c88c892d32e2d7a48883947379}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
292 \{
293   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1PfFfMacScheduler_a18621fc8ff9d0fc2ff92977f9ac60b2b}{m\_cschedSapProvider};
294 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Sched\+Sap\+Provider()}{GetFfMacSchedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf Ff\+Mac\+Sched\+Sap\+Provider}$\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Sched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a62b59c7a3df5edd4e12d4c1798bd7f9f}{}\label{classns3_1_1PfFfMacScheduler_a62b59c7a3df5edd4e12d4c1798bd7f9f}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Sched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_ad3a2aca6f1c01fbddf88bfbf19cc07a4}{ns3\+::\+Ff\+Mac\+Scheduler}.

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}}
\index{Get\+Ff\+Mac\+Sched\+Sap\+Provider@{Get\+Ff\+Mac\+Sched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Ff\+Mac\+Sched\+Sap\+Provider()}{GetFfMacSchedSapProvider()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Ff\+Mac\+Sched\+Sap\+Provider (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a14eca80f3c7bcfbc6c05ad343f06f5cf}{}\label{classns3_1_1PfFfMacScheduler_a14eca80f3c7bcfbc6c05ad343f06f5cf}
\begin{DoxyReturn}{Returns}
the Provider part of the Ff\+Mac\+Sched\+Sap provided by the \hyperlink{classns3_1_1Scheduler}{Scheduler} 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_ad3a2aca6f1c01fbddf88bfbf19cc07a4}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
298 \{
299   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1PfFfMacScheduler_aa647c4209dac594ac05c56ec0335b692}{m\_schedSapProvider};
300 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}}
\index{Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Lte\+Ffr\+Sap\+User()}{GetLteFfrSapUser()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+User} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Lte\+Ffr\+Sap\+User (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a82ba8d180a3861f267f76d79c62a724b}{}\label{classns3_1_1PfFfMacScheduler_a82ba8d180a3861f267f76d79c62a724b}
\begin{DoxyReturn}{Returns}
the User part of the Lte\+Ffr\+Sap provided by the Ffr\+Algorithm 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a32fe62051fd6ac175116417df11e6c4e}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
310 \{
311   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1PfFfMacScheduler_a6a08e9753aa517cced82305cd4fbc0ec}{m\_ffrSapUser};
312 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}}
\index{Get\+Lte\+Ffr\+Sap\+User@{Get\+Lte\+Ffr\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Lte\+Ffr\+Sap\+User()}{GetLteFfrSapUser()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf Lte\+Ffr\+Sap\+User}$\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Lte\+Ffr\+Sap\+User (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a63dbbbc0299a19b252237705779b9e41}{}\label{classns3_1_1PfFfMacScheduler_a63dbbbc0299a19b252237705779b9e41}
\begin{DoxyReturn}{Returns}
the User part of the Lte\+Ffr\+Sap provided by the Ffr\+Algorithm 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1FfMacScheduler_a32fe62051fd6ac175116417df11e6c4e}{ns3\+::\+Ff\+Mac\+Scheduler}.

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Rbg\+Size@{Get\+Rbg\+Size}}
\index{Get\+Rbg\+Size@{Get\+Rbg\+Size}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Rbg\+Size(int dlbandwidth)}{GetRbgSize(int dlbandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Rbg\+Size (
\begin{DoxyParamCaption}
\item[{int}]{dlbandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ae707fd496af66bc87fc7e51d212bafc3}{}\label{classns3_1_1PfFfMacScheduler_ae707fd496af66bc87fc7e51d212bafc3}

\begin{DoxyCode}
504 \{
505   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 4; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
506     \{
507       \textcolor{keywordflow}{if} (dlbandwidth < \hyperlink{namespacens3_a072a6e44a09f8902b3de89550190b42b}{PfType0AllocationRbg}[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}])
508         \{
509           \textcolor{keywordflow}{return} (i + 1);
510         \}
511     \}
512 
513   \textcolor{keywordflow}{return} (-1);
514 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 26


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Rbg\+Size@{Get\+Rbg\+Size}}
\index{Get\+Rbg\+Size@{Get\+Rbg\+Size}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Rbg\+Size(int dlbandwidth)}{GetRbgSize(int dlbandwidth)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Rbg\+Size (
\begin{DoxyParamCaption}
\item[{int}]{dlbandwidth}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ae707fd496af66bc87fc7e51d212bafc3}{}\label{classns3_1_1PfFfMacScheduler_ae707fd496af66bc87fc7e51d212bafc3}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Type\+Id} ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1PfFfMacScheduler_ac6cb0b61516c6ca6864bb0c02826602c}{}\label{classns3_1_1PfFfMacScheduler_ac6cb0b61516c6ca6864bb0c02826602c}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1PfFfMacScheduler_aa1971c9fcca7029177496d2d21a3fe62}{}\label{classns3_1_1PfFfMacScheduler_aa1971c9fcca7029177496d2d21a3fe62}

\begin{DoxyCode}
252 \{
253   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::PfFfMacScheduler"})
254     .SetParent<\hyperlink{classns3_1_1FfMacScheduler_aa4c8ce28dbba2c19ff3328533c444045}{FfMacScheduler}> ()
255     .SetGroupName(\textcolor{stringliteral}{"Lte"})
256     .AddConstructor<\hyperlink{classns3_1_1PfFfMacScheduler_ad972377fd4997d9bf0b8193e69f20a16}{PfFfMacScheduler}> ()
257     .AddAttribute (\textcolor{stringliteral}{"CqiTimerThreshold"},
258                    \textcolor{stringliteral}{"The number of TTIs a CQI is valid (default 1000 - 1 sec.)"},
259                    UintegerValue (1000),
260                    MakeUintegerAccessor (&\hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{PfFfMacScheduler::m\_cqiTimersThreshold}
      ),
261                    MakeUintegerChecker<uint32\_t> ())
262     .AddAttribute (\textcolor{stringliteral}{"HarqEnabled"},
263                    \textcolor{stringliteral}{"Activate/Deactivate the HARQ [by default is active]."},
264                    BooleanValue (\textcolor{keyword}{true}),
265                    MakeBooleanAccessor (&\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{PfFfMacScheduler::m\_harqOn}),
266                    MakeBooleanChecker ())
267     .AddAttribute (\textcolor{stringliteral}{"UlGrantMcs"},
268                    \textcolor{stringliteral}{"The MCS of the UL grant, must be [0..15] (default 0)"},
269                    UintegerValue (0),
270                    MakeUintegerAccessor (&\hyperlink{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{PfFfMacScheduler::m\_ulGrantMcs}),
271                    MakeUintegerChecker<uint8\_t> ())
272   ;
273   \textcolor{keywordflow}{return} tid;
274 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Harq\+Process\+Availability@{Harq\+Process\+Availability}}
\index{Harq\+Process\+Availability@{Harq\+Process\+Availability}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Harq\+Process\+Availability(uint16\+\_\+t rnti)}{HarqProcessAvailability(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Harq\+Process\+Availability (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}{}\label{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}


Return the availability of free process for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}

\begin{DoxyCode}
542 \{
543   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti);
544 
545   std::map <uint16\_t, uint8\_t>::iterator it = \hyperlink{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{m\_dlHarqCurrentProcessId}.find (rnti);
546   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{m\_dlHarqCurrentProcessId}.end ())
547     \{
548       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id found for this RNTI "} << rnti);
549     \}
550   std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.find (rnti);
551   \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.end ())
552     \{
553       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Statusfound for this RNTI "} << rnti);
554     \}
555   uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = (*it).second;
556   \textcolor{keywordflow}{do}
557     \{
558       i = (i + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
559     \}
560   \textcolor{keywordflow}{while} ( ((*itStat).second.at (i) != 0)&&(i != (*it).second));
561   \textcolor{keywordflow}{if} ((*itStat).second.at (i) == 0)
562     \{
563       \textcolor{keywordflow}{return} (\textcolor{keyword}{true});
564     \}
565   \textcolor{keywordflow}{else}
566     \{
567       \textcolor{keywordflow}{return} (\textcolor{keyword}{false}); \textcolor{comment}{// return a not valid harq proc id}
568     \}
569 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 28


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Harq\+Process\+Availability@{Harq\+Process\+Availability}}
\index{Harq\+Process\+Availability@{Harq\+Process\+Availability}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Harq\+Process\+Availability(uint16\+\_\+t rnti)}{HarqProcessAvailability(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Harq\+Process\+Availability (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}{}\label{classns3_1_1PfFfMacScheduler_abe0908df952c152cd48cc185e6ea1272}


Return the availability of free process for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}}
\index{Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Lc\+Active\+Per\+Flow(uint16\+\_\+t rnti)}{LcActivePerFlow(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Lc\+Active\+Per\+Flow (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}{}\label{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}}
\index{Lc\+Active\+Per\+Flow@{Lc\+Active\+Per\+Flow}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Lc\+Active\+Per\+Flow(uint16\+\_\+t rnti)}{LcActivePerFlow(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Lc\+Active\+Per\+Flow (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}{}\label{classns3_1_1PfFfMacScheduler_a97f6912a6bb4987ab0a718852b6f8d29}

\begin{DoxyCode}
519 \{
520   std::map <LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
521   \textcolor{keywordtype}{int} lcActive = 0;
522   \textcolor{keywordflow}{for} (it = \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.begin (); it != \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.end (); it++)
523     \{
524       \textcolor{keywordflow}{if} (((*it).first.m\_rnti == rnti) && (((*it).second.m\_rlcTransmissionQueueSize > 0)
525                                            || ((*it).second.m\_rlcRetransmissionQueueSize > 0)
526                                            || ((*it).second.m\_rlcStatusPduSize > 0) ))
527         \{
528           lcActive++;
529         \}
530       \textcolor{keywordflow}{if} ((*it).first.m\_rnti > rnti)
531         \{
532           \textcolor{keywordflow}{break};
533         \}
534     \}
535   \textcolor{keywordflow}{return} (lcActive);
536 
537 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 29


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}}
\index{Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Dl\+Cqi\+Maps(void)}{RefreshDlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Refresh\+Dl\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5388e0f10ab7d36f49d4eb66e53504bd}{}\label{classns3_1_1PfFfMacScheduler_a5388e0f10ab7d36f49d4eb66e53504bd}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}}
\index{Refresh\+Dl\+Cqi\+Maps@{Refresh\+Dl\+Cqi\+Maps}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Dl\+Cqi\+Maps(void)}{RefreshDlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Refresh\+Dl\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5388e0f10ab7d36f49d4eb66e53504bd}{}\label{classns3_1_1PfFfMacScheduler_a5388e0f10ab7d36f49d4eb66e53504bd}

\begin{DoxyCode}
2122 \{
2123   \textcolor{comment}{// refresh DL CQI P01 Map}
2124   std::map <uint16\_t,uint32\_t>::iterator itP10 = \hyperlink{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}{m\_p10CqiTimers}.begin ();
2125   \textcolor{keywordflow}{while} (itP10 != \hyperlink{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}{m\_p10CqiTimers}.end ())
2126     \{
2127       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" P10-CQI for user "} << (*itP10).first << \textcolor{stringliteral}{" is "} << (uint32\_t)
      (*itP10).second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold});
2128       \textcolor{keywordflow}{if} ((*itP10).second == 0)
2129         \{
2130           \textcolor{comment}{// delete correspondent entries}
2131           std::map <uint16\_t,uint8\_t>::iterator itMap = \hyperlink{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{m\_p10CqiRxed}.find ((*itP10).first);
2132           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{m\_p10CqiRxed}.end (), \textcolor{stringliteral}{" Does not find CQI report
       for user "} << (*itP10).first);
2133           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" P10-CQI expired for user "} << (*itP10).first);
2134           \hyperlink{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{m\_p10CqiRxed}.erase (itMap);
2135           std::map <uint16\_t,uint32\_t>::iterator temp = itP10;
2136           itP10++;
2137           \hyperlink{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}{m\_p10CqiTimers}.erase (temp);
2138         \}
2139       \textcolor{keywordflow}{else}
2140         \{
2141           (*itP10).second--;
2142           itP10++;
2143         \}
2144     \}
2145 
2146   \textcolor{comment}{// refresh DL CQI A30 Map}
2147   std::map <uint16\_t,uint32\_t>::iterator itA30 = \hyperlink{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}{m\_a30CqiTimers}.begin ();
2148   \textcolor{keywordflow}{while} (itA30 != \hyperlink{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}{m\_a30CqiTimers}.end ())
2149     \{
2150       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" A30-CQI for user "} << (*itA30).first << \textcolor{stringliteral}{" is "} << (uint32\_t)
      (*itA30).second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold});
2151       \textcolor{keywordflow}{if} ((*itA30).second == 0)
2152         \{
2153           \textcolor{comment}{// delete correspondent entries}
2154           std::map <uint16\_t,SbMeasResult\_s>::iterator itMap = \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.find ((*itA30).
      first);
2155           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.end (), \textcolor{stringliteral}{" Does not find CQI report
       for user "} << (*itA30).first);
2156           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" A30-CQI expired for user "} << (*itA30).first);
2157           \hyperlink{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{m\_a30CqiRxed}.erase (itMap);
2158           std::map <uint16\_t,uint32\_t>::iterator temp = itA30;
2159           itA30++;
2160           \hyperlink{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}{m\_a30CqiTimers}.erase (temp);
2161         \}
2162       \textcolor{keywordflow}{else}
2163         \{
2164           (*itA30).second--;
2165           itA30++;
2166         \}
2167     \}
2168 
2169   \textcolor{keywordflow}{return};
2170 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 30


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}}
\index{Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Harq\+Processes()}{RefreshHarqProcesses()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Refresh\+Harq\+Processes (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a00c00addd2a64aea7844298088f66e30}{}\label{classns3_1_1PfFfMacScheduler_a00c00addd2a64aea7844298088f66e30}


Refresh H\+A\+RQ processes according to the timers. 


\begin{DoxyCode}
616 \{
617   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
618 
619   std::map <uint16\_t, DlHarqProcessesTimer\_t>::iterator itTimers;
620   \textcolor{keywordflow}{for} (itTimers = \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.begin (); itTimers != 
      \hyperlink{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{m\_dlHarqProcessesTimer}.end (); itTimers++)
621     \{
622       \textcolor{keywordflow}{for} (uint16\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM}; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
623         \{
624           \textcolor{keywordflow}{if} ((*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) == \hyperlink{cqa-ff-mac-scheduler_8h_add9e0c4889dc1b5b25686480b31ad166}{HARQ\_DL\_TIMEOUT})
625             \{
626               \textcolor{comment}{// reset HARQ process}
627 
628               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Reset HARQ proc "} << \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} << \textcolor{stringliteral}{" for RNTI "} << (*itTimers).
      first);
629               std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.find ((*itTimers).first);
630               \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.end ())
631                 \{
632                   \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Status found for this RNTI "} << (*itTimers).
      first);
633                 \}
634               (*itStat).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
635               (*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = 0;
636             \}
637           \textcolor{keywordflow}{else}
638             \{
639               (*itTimers).second.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})++;
640             \}
641         \}
642     \}
643 
644 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 31


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}}
\index{Refresh\+Harq\+Processes@{Refresh\+Harq\+Processes}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Harq\+Processes()}{RefreshHarqProcesses()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Refresh\+Harq\+Processes (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a00c00addd2a64aea7844298088f66e30}{}\label{classns3_1_1PfFfMacScheduler_a00c00addd2a64aea7844298088f66e30}


Refresh H\+A\+RQ processes according to the timers. 

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}}
\index{Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Ul\+Cqi\+Maps(void)}{RefreshUlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Refresh\+Ul\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a6256dfa03daee0f6fcff485dfb6914d4}{}\label{classns3_1_1PfFfMacScheduler_a6256dfa03daee0f6fcff485dfb6914d4}

\begin{DoxyCode}
2175 \{
2176   \textcolor{comment}{// refresh UL CQI  Map}
2177   std::map <uint16\_t,uint32\_t>::iterator itUl = \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\_ueCqiTimers}.begin ();
2178   \textcolor{keywordflow}{while} (itUl != \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\_ueCqiTimers}.end ())
2179     \{
2180       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-CQI for user "} << (*itUl).first << \textcolor{stringliteral}{" is "} << (uint32\_t)(*itUl).
      second << \textcolor{stringliteral}{" thr "} << (uint32\_t)\hyperlink{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{m\_cqiTimersThreshold});
2181       \textcolor{keywordflow}{if} ((*itUl).second == 0)
2182         \{
2183           \textcolor{comment}{// delete correspondent entries}
2184           std::map <uint16\_t, std::vector <double> >::iterator itMap = \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.find ((*itUl).first);
2185           \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (itMap != \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.end (), \textcolor{stringliteral}{" Does not find CQI report for user "}
       << (*itUl).first);
2186           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UL-CQI exired for user "} << (*itUl).first);
2187           (*itMap).second.clear ();
2188           \hyperlink{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{m\_ueCqi}.erase (itMap);
2189           std::map <uint16\_t,uint32\_t>::iterator temp = itUl;
2190           itUl++;
2191           \hyperlink{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{m\_ueCqiTimers}.erase (temp);
2192         \}
2193       \textcolor{keywordflow}{else}
2194         \{
2195           (*itUl).second--;
2196           itUl++;
2197         \}
2198     \}
2199 
2200   \textcolor{keywordflow}{return};
2201 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 32


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}}
\index{Refresh\+Ul\+Cqi\+Maps@{Refresh\+Ul\+Cqi\+Maps}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Refresh\+Ul\+Cqi\+Maps(void)}{RefreshUlCqiMaps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Refresh\+Ul\+Cqi\+Maps (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a6256dfa03daee0f6fcff485dfb6914d4}{}\label{classns3_1_1PfFfMacScheduler_a6256dfa03daee0f6fcff485dfb6914d4}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Csched\+Sap\+User(\+Ff\+Mac\+Csched\+Sap\+User $\ast$s)}{SetFfMacCschedSapUser(FfMacCschedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Csched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Csched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_ab229f1aa309ec79607ac0d3797d842ff}{}\label{classns3_1_1PfFfMacScheduler_ab229f1aa309ec79607ac0d3797d842ff}
set the user part of the Ff\+Mac\+Csched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a3984d8478223218fd4432a9f9ead328b}{ns3\+::\+Ff\+Mac\+Scheduler}.

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Csched\+Sap\+User@{Set\+Ff\+Mac\+Csched\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Csched\+Sap\+User(\+Ff\+Mac\+Csched\+Sap\+User $\ast$s)}{SetFfMacCschedSapUser(FfMacCschedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Csched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Csched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a321a45d0b943975e8a4d6864e7d1c77a}{}\label{classns3_1_1PfFfMacScheduler_a321a45d0b943975e8a4d6864e7d1c77a}
set the user part of the Ff\+Mac\+Csched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a3984d8478223218fd4432a9f9ead328b}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
280 \{
281   \hyperlink{classns3_1_1PfFfMacScheduler_a8c2e26441f7ea338051bbdf73ce1303a}{m\_cschedSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
282 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Sched\+Sap\+User(\+Ff\+Mac\+Sched\+Sap\+User $\ast$s)}{SetFfMacSchedSapUser(FfMacSchedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Sched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Sched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a6e7053dd95a82c17010442cc20e3879f}{}\label{classns3_1_1PfFfMacScheduler_a6e7053dd95a82c17010442cc20e3879f}
set the user part of the Ff\+Mac\+Sched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_aa45093350c367b9a33263d5b6eecee34}{ns3\+::\+Ff\+Mac\+Scheduler}.

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}}
\index{Set\+Ff\+Mac\+Sched\+Sap\+User@{Set\+Ff\+Mac\+Sched\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Ff\+Mac\+Sched\+Sap\+User(\+Ff\+Mac\+Sched\+Sap\+User $\ast$s)}{SetFfMacSchedSapUser(FfMacSchedSapUser *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Set\+Ff\+Mac\+Sched\+Sap\+User (
\begin{DoxyParamCaption}
\item[{{\bf Ff\+Mac\+Sched\+Sap\+User} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_a8a140242b29416a972e7cbec6437dda6}{}\label{classns3_1_1PfFfMacScheduler_a8a140242b29416a972e7cbec6437dda6}
set the user part of the Ff\+Mac\+Sched\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with. Normally this part of the S\+AP is exported by the M\+AC.


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_aa45093350c367b9a33263d5b6eecee34}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
286 \{
287   \hyperlink{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{m\_schedSapUser} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
288 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}}
\index{Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Lte\+Ffr\+Sap\+Provider(\+Lte\+Ffr\+Sap\+Provider $\ast$s)}{SetLteFfrSapProvider(LteFfrSapProvider *s)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Set\+Lte\+Ffr\+Sap\+Provider (
\begin{DoxyParamCaption}
\item[{{\bf Lte\+Ffr\+Sap\+Provider} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_afa1704390f12e82562177e34113df9ab}{}\label{classns3_1_1PfFfMacScheduler_afa1704390f12e82562177e34113df9ab}
Set the Provider part of the Lte\+Ffr\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a2b3a1635ada88804f035984277371926}{ns3\+::\+Ff\+Mac\+Scheduler}.


\begin{DoxyCode}
304 \{
305   \hyperlink{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{m\_ffrSapProvider} = \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
306 \}
\end{DoxyCode}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}}
\index{Set\+Lte\+Ffr\+Sap\+Provider@{Set\+Lte\+Ffr\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Set\+Lte\+Ffr\+Sap\+Provider(\+Lte\+Ffr\+Sap\+Provider $\ast$s)}{SetLteFfrSapProvider(LteFfrSapProvider *s)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Set\+Lte\+Ffr\+Sap\+Provider (
\begin{DoxyParamCaption}
\item[{{\bf Lte\+Ffr\+Sap\+Provider} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1PfFfMacScheduler_ac871ac9e42f185a234071e9bbaa6a243}{}\label{classns3_1_1PfFfMacScheduler_ac871ac9e42f185a234071e9bbaa6a243}
Set the Provider part of the Lte\+Ffr\+Sap that this \hyperlink{classns3_1_1Scheduler}{Scheduler} will interact with


\begin{DoxyParams}{Parameters}
{\em s} & \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1FfMacScheduler_a2b3a1635ada88804f035984277371926}{ns3\+::\+Ff\+Mac\+Scheduler}.

\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}}
\index{Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Transmission\+Mode\+Configuration\+Update(uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)}{TransmissionModeConfigurationUpdate(uint16_t rnti, uint8_t txMode)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Transmission\+Mode\+Configuration\+Update (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{tx\+Mode}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PfFfMacScheduler_a1f5050d19fecb18a52f429ae7ec14964}{}\label{classns3_1_1PfFfMacScheduler_a1f5050d19fecb18a52f429ae7ec14964}

\begin{DoxyCode}
2282 \{
2283   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" RNTI "} << rnti << \textcolor{stringliteral}{" txMode "} << (uint16\_t)txMode);
2284   FfMacCschedSapUser::CschedUeConfigUpdateIndParameters params;
2285   params.m\_rnti = rnti;
2286   params.m\_transmissionMode = txMode;
2287   \hyperlink{classns3_1_1PfFfMacScheduler_a8c2e26441f7ea338051bbdf73ce1303a}{m\_cschedSapUser}->\hyperlink{classns3_1_1FfMacCschedSapUser_a63f3fa5bac0cc7234a17c3241bff6a04}{CschedUeConfigUpdateInd} (params);
2288 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 33


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}}
\index{Transmission\+Mode\+Configuration\+Update@{Transmission\+Mode\+Configuration\+Update}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Transmission\+Mode\+Configuration\+Update(uint16\+\_\+t rnti, uint8\+\_\+t tx\+Mode)}{TransmissionModeConfigurationUpdate(uint16_t rnti, uint8_t txMode)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Transmission\+Mode\+Configuration\+Update (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{tx\+Mode}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1PfFfMacScheduler_a1f5050d19fecb18a52f429ae7ec14964}{}\label{classns3_1_1PfFfMacScheduler_a1f5050d19fecb18a52f429ae7ec14964}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}}
\index{Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Dl\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)}{UpdateDlRlcBufferInfo(uint16_t rnti, uint8_t lcid, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Update\+Dl\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{lcid, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aca3332c10f1c59e1279001247ca7da79}{}\label{classns3_1_1PfFfMacScheduler_aca3332c10f1c59e1279001247ca7da79}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}}
\index{Update\+Dl\+Rlc\+Buffer\+Info@{Update\+Dl\+Rlc\+Buffer\+Info}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Dl\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint8\+\_\+t lcid, uint16\+\_\+t size)}{UpdateDlRlcBufferInfo(uint16_t rnti, uint8_t lcid, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Update\+Dl\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint8\+\_\+t}]{lcid, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aca3332c10f1c59e1279001247ca7da79}{}\label{classns3_1_1PfFfMacScheduler_aca3332c10f1c59e1279001247ca7da79}

\begin{DoxyCode}
2205 \{
2206   std::map<LteFlowId\_t, FfMacSchedSapProvider::SchedDlRlcBufferReqParameters>::iterator it;
2207   LteFlowId\_t flow (rnti, lcid);
2208   it = \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.find (flow);
2209   \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{m\_rlcBufferReq}.end ())
2210     \{
2211       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE "} << rnti << \textcolor{stringliteral}{" LC "} << (uint16\_t)lcid << \textcolor{stringliteral}{" txqueue "} << (*it).
      second.m\_rlcTransmissionQueueSize << \textcolor{stringliteral}{" retxqueue "} << (*it).second.m\_rlcRetransmissionQueueSize << \textcolor{stringliteral}{" status "} 
      << (*it).second.m\_rlcStatusPduSize << \textcolor{stringliteral}{" decrease "} << size);
2212       \textcolor{comment}{// Update queues: RLC tx order Status, ReTx, Tx}
2213       \textcolor{comment}{// Update status queue}
2214       \textcolor{keywordflow}{if} (((*it).second.m\_rlcStatusPduSize > 0) && (size >= (*it).second.m\_rlcStatusPduSize))
2215         \{
2216           (*it).second.m\_rlcStatusPduSize = 0;
2217         \}
2218       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (((*it).second.m\_rlcRetransmissionQueueSize > 0) && (size >= (*it).second.
      m\_rlcRetransmissionQueueSize))
2219         \{
2220           (*it).second.m\_rlcRetransmissionQueueSize = 0;
2221         \}
2222       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((*it).second.m\_rlcTransmissionQueueSize > 0)
2223         \{
2224           uint32\_t rlcOverhead;
2225           \textcolor{keywordflow}{if} (lcid == 1)
2226             \{
2227               \textcolor{comment}{// for SRB1 (using RLC AM) it's better to}
2228               \textcolor{comment}{// overestimate RLC overhead rather than}
2229               \textcolor{comment}{// underestimate it and risk unneeded}
2230               \textcolor{comment}{// segmentation which increases delay }
2231               rlcOverhead = 4;
2232             \}
2233           \textcolor{keywordflow}{else}
2234             \{
2235               \textcolor{comment}{// minimum RLC overhead due to header}
2236               rlcOverhead = 2;
2237             \}
2238           \textcolor{comment}{// update transmission queue}
2239           \textcolor{keywordflow}{if} ((*it).second.m\_rlcTransmissionQueueSize <= size - rlcOverhead)
2240             \{
2241               (*it).second.m\_rlcTransmissionQueueSize = 0;
2242             \}
2243           \textcolor{keywordflow}{else}
2244             \{
2245               (*it).second.m\_rlcTransmissionQueueSize -= size - rlcOverhead;
2246             \}
2247         \}
2248     \}
2249   \textcolor{keywordflow}{else}
2250     \{
2251       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Does not find DL RLC Buffer Report of UE "} << rnti);
2252     \}
2253 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 34


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}}
\index{Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Harq\+Process\+Id(uint16\+\_\+t rnti)}{UpdateHarqProcessId(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Update\+Harq\+Process\+Id (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ac9ae283895ee58f636597117be34f959}{}\label{classns3_1_1PfFfMacScheduler_ac9ae283895ee58f636597117be34f959}


Update and return a new process Id for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}

\begin{DoxyCode}
575 \{
576   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << rnti);
577 
578   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{m\_harqOn} == \textcolor{keyword}{false})
579     \{
580       \textcolor{keywordflow}{return} (0);
581     \}
582 
583 
584   std::map <uint16\_t, uint8\_t>::iterator it = \hyperlink{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{m\_dlHarqCurrentProcessId}.find (rnti);
585   \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{m\_dlHarqCurrentProcessId}.end ())
586     \{
587       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id found for this RNTI "} << rnti);
588     \}
589   std::map <uint16\_t, DlHarqProcessesStatus\_t>::iterator itStat = 
      \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.find (rnti);
590   \textcolor{keywordflow}{if} (itStat == \hyperlink{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{m\_dlHarqProcessesStatus}.end ())
591     \{
592       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Process Id Statusfound for this RNTI "} << rnti);
593     \}
594   uint8\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = (*it).second;
595   \textcolor{keywordflow}{do}
596     \{
597       i = (i + 1) % \hyperlink{cqa-ff-mac-scheduler_8h_a9185d8d7d2b2979181d4a7044a3d3555}{HARQ\_PROC\_NUM};
598     \}
599   \textcolor{keywordflow}{while} ( ((*itStat).second.at (i) != 0)&&(i != (*it).second));
600   \textcolor{keywordflow}{if} ((*itStat).second.at (i) == 0)
601     \{
602       (*it).second = \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
603       (*itStat).second.at (i) = 1;
604     \}
605   \textcolor{keywordflow}{else}
606     \{
607       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No HARQ process available for RNTI "} << rnti << \textcolor{stringliteral}{" check before update
       with HarqProcessAvailability"});
608     \}
609 
610   \textcolor{keywordflow}{return} ((*it).second);
611 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 35


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}}
\index{Update\+Harq\+Process\+Id@{Update\+Harq\+Process\+Id}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Harq\+Process\+Id(uint16\+\_\+t rnti)}{UpdateHarqProcessId(uint16_t rnti)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Update\+Harq\+Process\+Id (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ac9ae283895ee58f636597117be34f959}{}\label{classns3_1_1PfFfMacScheduler_ac9ae283895ee58f636597117be34f959}


Update and return a new process Id for the R\+N\+TI specified. 


\begin{DoxyParams}{Parameters}
{\em rnti} & the R\+N\+TI of the UE to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the process id value 
\end{DoxyReturn}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}}
\index{Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Ul\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint16\+\_\+t size)}{UpdateUlRlcBufferInfo(uint16_t rnti, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Update\+Ul\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5c0ac12d11b85ed7b27e81b278ded55d}{}\label{classns3_1_1PfFfMacScheduler_a5c0ac12d11b85ed7b27e81b278ded55d}

\begin{DoxyCode}
2257 \{
2258 
2259   size = size - 2; \textcolor{comment}{// remove the minimum RLC overhead}
2260   std::map <uint16\_t,uint32\_t>::iterator it = \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.find (rnti);
2261   \textcolor{keywordflow}{if} (it != \hyperlink{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{m\_ceBsrRxed}.end ())
2262     \{
2263       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" UE "} << rnti << \textcolor{stringliteral}{" size "} << size << \textcolor{stringliteral}{" BSR "} << (*it).second);
2264       \textcolor{keywordflow}{if} ((*it).second >= size)
2265         \{
2266           (*it).second -= size;
2267         \}
2268       \textcolor{keywordflow}{else}
2269         \{
2270           (*it).second = 0;
2271         \}
2272     \}
2273   \textcolor{keywordflow}{else}
2274     \{
2275       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Does not find BSR report info of UE "} << rnti);
2276     \}
2277 
2278 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 36


\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}}
\index{Update\+Ul\+Rlc\+Buffer\+Info@{Update\+Ul\+Rlc\+Buffer\+Info}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Update\+Ul\+Rlc\+Buffer\+Info(uint16\+\_\+t rnti, uint16\+\_\+t size)}{UpdateUlRlcBufferInfo(uint16_t rnti, uint16_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::\+Update\+Ul\+Rlc\+Buffer\+Info (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{rnti, }
\item[{uint16\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5c0ac12d11b85ed7b27e81b278ded55d}{}\label{classns3_1_1PfFfMacScheduler_a5c0ac12d11b85ed7b27e81b278ded55d}


\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Pf\+Scheduler\+Member\+Csched\+Sap\+Provider@{Pf\+Scheduler\+Member\+Csched\+Sap\+Provider}}
\index{Pf\+Scheduler\+Member\+Csched\+Sap\+Provider@{Pf\+Scheduler\+Member\+Csched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Pf\+Scheduler\+Member\+Csched\+Sap\+Provider}{PfSchedulerMemberCschedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pf\+Scheduler\+Member\+Csched\+Sap\+Provider}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1PfFfMacScheduler_a9af91d8421385b7fbfac42c06f7c6897}{}\label{classns3_1_1PfFfMacScheduler_a9af91d8421385b7fbfac42c06f7c6897}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!Pf\+Scheduler\+Member\+Sched\+Sap\+Provider@{Pf\+Scheduler\+Member\+Sched\+Sap\+Provider}}
\index{Pf\+Scheduler\+Member\+Sched\+Sap\+Provider@{Pf\+Scheduler\+Member\+Sched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{Pf\+Scheduler\+Member\+Sched\+Sap\+Provider}{PfSchedulerMemberSchedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pf\+Scheduler\+Member\+Sched\+Sap\+Provider}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1PfFfMacScheduler_a8d60388d4d593b8f3525af75c0f6ffd4}{}\label{classns3_1_1PfFfMacScheduler_a8d60388d4d593b8f3525af75c0f6ffd4}


\subsection{Member Data Documentation}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+a30\+Cqi\+Rxed@{m\+\_\+a30\+Cqi\+Rxed}}
\index{m\+\_\+a30\+Cqi\+Rxed@{m\+\_\+a30\+Cqi\+Rxed}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+a30\+Cqi\+Rxed}{m_a30CqiRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Sb\+Meas\+Result\+\_\+s} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+a30\+Cqi\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}{}\label{classns3_1_1PfFfMacScheduler_a4bf7d1844112028aa3f7bc21e580a7bd}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+a30\+Cqi\+Timers@{m\+\_\+a30\+Cqi\+Timers}}
\index{m\+\_\+a30\+Cqi\+Timers@{m\+\_\+a30\+Cqi\+Timers}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+a30\+Cqi\+Timers}{m_a30CqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+a30\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}{}\label{classns3_1_1PfFfMacScheduler_abfaea62231103e914d6d66d66a127966}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+allocation\+Maps@{m\+\_\+allocation\+Maps}}
\index{m\+\_\+allocation\+Maps@{m\+\_\+allocation\+Maps}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+allocation\+Maps}{m_allocationMaps}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ uint16\+\_\+t $>$ $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+allocation\+Maps\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}{}\label{classns3_1_1PfFfMacScheduler_a372b18540784762ebc10292caf8ca40f}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+amc@{m\+\_\+amc}}
\index{m\+\_\+amc@{m\+\_\+amc}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+amc}{m_amc}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Lte\+Amc} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+amc\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}{}\label{classns3_1_1PfFfMacScheduler_a8ed3fd6ae921b6161a10c2c9b0e869a4}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ce\+Bsr\+Rxed@{m\+\_\+ce\+Bsr\+Rxed}}
\index{m\+\_\+ce\+Bsr\+Rxed@{m\+\_\+ce\+Bsr\+Rxed}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ce\+Bsr\+Rxed}{m_ceBsrRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ce\+Bsr\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}{}\label{classns3_1_1PfFfMacScheduler_a9d4cd2380a8e04f1e7d69ac67628b9cc}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+cqi\+Timers\+Threshold@{m\+\_\+cqi\+Timers\+Threshold}}
\index{m\+\_\+cqi\+Timers\+Threshold@{m\+\_\+cqi\+Timers\+Threshold}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+cqi\+Timers\+Threshold}{m_cqiTimersThreshold}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+cqi\+Timers\+Threshold\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}{}\label{classns3_1_1PfFfMacScheduler_ad2377e8bcc02252e2f0d3ca0fc2895b9}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Cell\+Config@{m\+\_\+csched\+Cell\+Config}}
\index{m\+\_\+csched\+Cell\+Config@{m\+\_\+csched\+Cell\+Config}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Cell\+Config}{m_cschedCellConfig}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider\+::\+Csched\+Cell\+Config\+Req\+Parameters} ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Cell\+Config\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}{}\label{classns3_1_1PfFfMacScheduler_a0be1f7a1e78824b031e48208b8af1048}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Sap\+Provider@{m\+\_\+csched\+Sap\+Provider}}
\index{m\+\_\+csched\+Sap\+Provider@{m\+\_\+csched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Sap\+Provider}{m_cschedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+Provider} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a18621fc8ff9d0fc2ff92977f9ac60b2b}{}\label{classns3_1_1PfFfMacScheduler_a18621fc8ff9d0fc2ff92977f9ac60b2b}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+csched\+Sap\+User@{m\+\_\+csched\+Sap\+User}}
\index{m\+\_\+csched\+Sap\+User@{m\+\_\+csched\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+csched\+Sap\+User}{m_cschedSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Csched\+Sap\+User} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+csched\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a8c2e26441f7ea338051bbdf73ce1303a}{}\label{classns3_1_1PfFfMacScheduler_a8c2e26441f7ea338051bbdf73ce1303a}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Current\+Process\+Id@{m\+\_\+dl\+Harq\+Current\+Process\+Id}}
\index{m\+\_\+dl\+Harq\+Current\+Process\+Id@{m\+\_\+dl\+Harq\+Current\+Process\+Id}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Current\+Process\+Id}{m_dlHarqCurrentProcessId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Current\+Process\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}{}\label{classns3_1_1PfFfMacScheduler_a792f015651334a9e688d534367f29155}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}}
\index{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer}{m_dlHarqProcessesDciBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Dci\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}{}\label{classns3_1_1PfFfMacScheduler_af3c0c393dc246b7b6a907539362c935b}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}}
\index{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer@{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer}{m_dlHarqProcessesRlcPduListBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Dl\+Harq\+Rlc\+Pdu\+List\+Buffer\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Rlc\+Pdu\+List\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}{}\label{classns3_1_1PfFfMacScheduler_acf9952b5bb3d26644b5e25054ca6e385}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Status@{m\+\_\+dl\+Harq\+Processes\+Status}}
\index{m\+\_\+dl\+Harq\+Processes\+Status@{m\+\_\+dl\+Harq\+Processes\+Status}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Status}{m_dlHarqProcessesStatus}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Status\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}{}\label{classns3_1_1PfFfMacScheduler_a438c2319e01eaac65f64cbd82b3e8089}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Harq\+Processes\+Timer@{m\+\_\+dl\+Harq\+Processes\+Timer}}
\index{m\+\_\+dl\+Harq\+Processes\+Timer@{m\+\_\+dl\+Harq\+Processes\+Timer}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Harq\+Processes\+Timer}{m_dlHarqProcessesTimer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Dl\+Harq\+Processes\+Timer\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Harq\+Processes\+Timer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}{}\label{classns3_1_1PfFfMacScheduler_ab115ef9abb936f35aeb5979a8ed8928d}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+dl\+Info\+List\+Buffered@{m\+\_\+dl\+Info\+List\+Buffered}}
\index{m\+\_\+dl\+Info\+List\+Buffered@{m\+\_\+dl\+Info\+List\+Buffered}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+dl\+Info\+List\+Buffered}{m_dlInfoListBuffered}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ {\bf Dl\+Info\+List\+Element\+\_\+s} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+dl\+Info\+List\+Buffered\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}{}\label{classns3_1_1PfFfMacScheduler_af3c266623addc28fc6ecd97901183a2f}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ffr\+Sap\+Provider@{m\+\_\+ffr\+Sap\+Provider}}
\index{m\+\_\+ffr\+Sap\+Provider@{m\+\_\+ffr\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ffr\+Sap\+Provider}{m_ffrSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+Provider} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ffr\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}{}\label{classns3_1_1PfFfMacScheduler_a40519746bd3f39a4b664db3036f2e3fd}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ffr\+Sap\+User@{m\+\_\+ffr\+Sap\+User}}
\index{m\+\_\+ffr\+Sap\+User@{m\+\_\+ffr\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ffr\+Sap\+User}{m_ffrSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Lte\+Ffr\+Sap\+User} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ffr\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a6a08e9753aa517cced82305cd4fbc0ec}{}\label{classns3_1_1PfFfMacScheduler_a6a08e9753aa517cced82305cd4fbc0ec}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+flow\+Stats\+Dl@{m\+\_\+flow\+Stats\+Dl}}
\index{m\+\_\+flow\+Stats\+Dl@{m\+\_\+flow\+Stats\+Dl}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+flow\+Stats\+Dl}{m_flowStatsDl}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf pfs\+Flow\+Perf\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+flow\+Stats\+Dl\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}{}\label{classns3_1_1PfFfMacScheduler_a00b148349167b85ab9170570e2530b92}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+flow\+Stats\+Ul@{m\+\_\+flow\+Stats\+Ul}}
\index{m\+\_\+flow\+Stats\+Ul@{m\+\_\+flow\+Stats\+Ul}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+flow\+Stats\+Ul}{m_flowStatsUl}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf pfs\+Flow\+Perf\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+flow\+Stats\+Ul\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}{}\label{classns3_1_1PfFfMacScheduler_a1c3919a5dcda7ca29e667e2bca774ca5}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+harq\+On@{m\+\_\+harq\+On}}
\index{m\+\_\+harq\+On@{m\+\_\+harq\+On}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+harq\+On}{m_harqOn}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+harq\+On\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}{}\label{classns3_1_1PfFfMacScheduler_a20ee9882187d440870b2a88b63fcb7e9}
m\+\_\+harq\+On when false inhibit te H\+A\+RQ mechanisms (by default active) \index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+next\+Rnti\+Ul@{m\+\_\+next\+Rnti\+Ul}}
\index{m\+\_\+next\+Rnti\+Ul@{m\+\_\+next\+Rnti\+Ul}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+next\+Rnti\+Ul}{m_nextRntiUl}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+next\+Rnti\+Ul\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}{}\label{classns3_1_1PfFfMacScheduler_ad4bed67ae396b364734c2cc0acc7e2ec}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+p10\+Cqi\+Rxed@{m\+\_\+p10\+Cqi\+Rxed}}
\index{m\+\_\+p10\+Cqi\+Rxed@{m\+\_\+p10\+Cqi\+Rxed}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+p10\+Cqi\+Rxed}{m_p10CqiRxed}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+p10\+Cqi\+Rxed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}{}\label{classns3_1_1PfFfMacScheduler_a06151884f0dc769c017ceb00b3a8f409}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+p10\+Cqi\+Timers@{m\+\_\+p10\+Cqi\+Timers}}
\index{m\+\_\+p10\+Cqi\+Timers@{m\+\_\+p10\+Cqi\+Timers}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+p10\+Cqi\+Timers}{m_p10CqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+p10\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}{}\label{classns3_1_1PfFfMacScheduler_a5e1e3c699bc1b53b4c11f5bb454f7e1f}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+rach\+Allocation\+Map@{m\+\_\+rach\+Allocation\+Map}}
\index{m\+\_\+rach\+Allocation\+Map@{m\+\_\+rach\+Allocation\+Map}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rach\+Allocation\+Map}{m_rachAllocationMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ uint16\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+rach\+Allocation\+Map\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}{}\label{classns3_1_1PfFfMacScheduler_a755c1bfd84bd392a07aa370cb4ced071}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+rach\+List@{m\+\_\+rach\+List}}
\index{m\+\_\+rach\+List@{m\+\_\+rach\+List}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rach\+List}{m_rachList}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ struct {\bf Rach\+List\+Element\+\_\+s} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+rach\+List\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a850a31ab66c0a1d24207311ceee03ce7}{}\label{classns3_1_1PfFfMacScheduler_a850a31ab66c0a1d24207311ceee03ce7}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+rlc\+Buffer\+Req@{m\+\_\+rlc\+Buffer\+Req}}
\index{m\+\_\+rlc\+Buffer\+Req@{m\+\_\+rlc\+Buffer\+Req}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+rlc\+Buffer\+Req}{m_rlcBufferReq}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ {\bf Lte\+Flow\+Id\+\_\+t}, {\bf Ff\+Mac\+Sched\+Sap\+Provider\+::\+Sched\+Dl\+Rlc\+Buffer\+Req\+Parameters} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+rlc\+Buffer\+Req\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}{}\label{classns3_1_1PfFfMacScheduler_aaad15dd674acb600fb8dc9263fcfa2bc}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+sched\+Sap\+Provider@{m\+\_\+sched\+Sap\+Provider}}
\index{m\+\_\+sched\+Sap\+Provider@{m\+\_\+sched\+Sap\+Provider}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+sched\+Sap\+Provider}{m_schedSapProvider}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+Provider} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+sched\+Sap\+Provider\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aa647c4209dac594ac05c56ec0335b692}{}\label{classns3_1_1PfFfMacScheduler_aa647c4209dac594ac05c56ec0335b692}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+sched\+Sap\+User@{m\+\_\+sched\+Sap\+User}}
\index{m\+\_\+sched\+Sap\+User@{m\+\_\+sched\+Sap\+User}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+sched\+Sap\+User}{m_schedSapUser}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ff\+Mac\+Sched\+Sap\+User} $\ast$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+sched\+Sap\+User\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}{}\label{classns3_1_1PfFfMacScheduler_a16d9c49b69668f9343e9e7409179b8ae}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+time\+Window@{m\+\_\+time\+Window}}
\index{m\+\_\+time\+Window@{m\+\_\+time\+Window}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+time\+Window}{m_timeWindow}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+time\+Window\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}{}\label{classns3_1_1PfFfMacScheduler_aaa362a4608a53cc70f16fdfedf221bd4}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ue\+Cqi@{m\+\_\+ue\+Cqi}}
\index{m\+\_\+ue\+Cqi@{m\+\_\+ue\+Cqi}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ue\+Cqi}{m_ueCqi}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, std\+::vector$<$ double $>$ $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ue\+Cqi\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}{}\label{classns3_1_1PfFfMacScheduler_acf67c0074356c705e8bd89bb49ddd5ad}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ue\+Cqi\+Timers@{m\+\_\+ue\+Cqi\+Timers}}
\index{m\+\_\+ue\+Cqi\+Timers@{m\+\_\+ue\+Cqi\+Timers}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ue\+Cqi\+Timers}{m_ueCqiTimers}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint32\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ue\+Cqi\+Timers\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}{}\label{classns3_1_1PfFfMacScheduler_abe22b494875155dfe6a503734ad4bbad}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ues\+Tx\+Mode@{m\+\_\+ues\+Tx\+Mode}}
\index{m\+\_\+ues\+Tx\+Mode@{m\+\_\+ues\+Tx\+Mode}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ues\+Tx\+Mode}{m_uesTxMode}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ues\+Tx\+Mode\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}{}\label{classns3_1_1PfFfMacScheduler_afde3fb192a83a5fafc27ed9a0df82de9}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Grant\+Mcs@{m\+\_\+ul\+Grant\+Mcs}}
\index{m\+\_\+ul\+Grant\+Mcs@{m\+\_\+ul\+Grant\+Mcs}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Grant\+Mcs}{m_ulGrantMcs}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Grant\+Mcs\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}{}\label{classns3_1_1PfFfMacScheduler_a915ee203b48875c6cb276bb46d866c2b}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Current\+Process\+Id@{m\+\_\+ul\+Harq\+Current\+Process\+Id}}
\index{m\+\_\+ul\+Harq\+Current\+Process\+Id@{m\+\_\+ul\+Harq\+Current\+Process\+Id}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Current\+Process\+Id}{m_ulHarqCurrentProcessId}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, uint8\+\_\+t $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Current\+Process\+Id\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}{}\label{classns3_1_1PfFfMacScheduler_aff9dac165a5c80c99f237adf365321d6}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}}
\index{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer@{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer}{m_ulHarqProcessesDciBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Ul\+Harq\+Processes\+Dci\+Buffer\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Processes\+Dci\+Buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}{}\label{classns3_1_1PfFfMacScheduler_a694ef4299832b3652468b0898601b2de}
\index{ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}!m\+\_\+ul\+Harq\+Processes\+Status@{m\+\_\+ul\+Harq\+Processes\+Status}}
\index{m\+\_\+ul\+Harq\+Processes\+Status@{m\+\_\+ul\+Harq\+Processes\+Status}!ns3\+::\+Pf\+Ff\+Mac\+Scheduler@{ns3\+::\+Pf\+Ff\+Mac\+Scheduler}}
\subsubsection[{\texorpdfstring{m\+\_\+ul\+Harq\+Processes\+Status}{m_ulHarqProcessesStatus}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ uint16\+\_\+t, {\bf Ul\+Harq\+Processes\+Status\+\_\+t} $>$ ns3\+::\+Pf\+Ff\+Mac\+Scheduler\+::m\+\_\+ul\+Harq\+Processes\+Status\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}{}\label{classns3_1_1PfFfMacScheduler_a5d5e9dcdbb7d0a291fe397ba7b746d04}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lte/model/\hyperlink{lte_2model_2pf-ff-mac-scheduler_8h}{pf-\/ff-\/mac-\/scheduler.\+h}\item 
lte/model/\hyperlink{lte_2model_2pf-ff-mac-scheduler_8cc}{pf-\/ff-\/mac-\/scheduler.\+cc}\end{DoxyCompactItemize}
