\hypertarget{classns3_1_1TcpSocketBase}{}\section{ns3\+:\+:Tcp\+Socket\+Base Class Reference}
\label{classns3_1_1TcpSocketBase}\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}


A base class for implementation of a stream socket using T\+CP.  




{\ttfamily \#include $<$tcp-\/socket-\/base.\+h$>$}



Inheritance diagram for ns3\+:\+:Tcp\+Socket\+Base\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Tcp\+Socket\+Base\+:
% FIG 1
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{classns3_1_1TcpSocketBase_adf72372176d8a74b77ddc5a54db02048}{Tcp\+Tx\+Rx\+Traced\+Callback}) (const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&header, const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} $>$ socket)
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1TcpSocketBase_a37790b71ae253df6aea9f25b80657b67}{Get\+Instance\+Type\+Id} () const 
\begin{DoxyCompactList}\small\item\em Get the instance \hyperlink{classns3_1_1TypeId}{Type\+Id}. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TcpSocketBase_a89e51540a8ac03d929349ae2ec56239b}{Tcp\+Socket\+Base} (void)
\item 
\hyperlink{classns3_1_1TcpSocketBase_a88ad90b1dca7d8a470225c9351198736}{Tcp\+Socket\+Base} (const \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} \&sock)
\item 
virtual \hyperlink{classns3_1_1TcpSocketBase_a4b736ccb66957dbee78b4f7a27c082e4}{$\sim$\+Tcp\+Socket\+Base} (void)
\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a1e1f8e39307c73a0d35aaa88a05caac1}{Set\+Node} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ node)
\begin{DoxyCompactList}\small\item\em Set the associated node. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a283ba18630a9de25d561a884c66d9538}{Set\+Tcp} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpL4Protocol}{Tcp\+L4\+Protocol} $>$ tcp)
\begin{DoxyCompactList}\small\item\em Set the associated T\+CP L4 protocol. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a520a55f6b7d9a02f06258928882ea3b6}{Set\+Rtt} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1RttEstimator}{Rtt\+Estimator} $>$ rtt)
\begin{DoxyCompactList}\small\item\em Set the associated R\+TT estimator. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_af99b7fe3341051dead8b4e26a5b2c12b}{Set\+Min\+Rto} (\hyperlink{classns3_1_1Time}{Time} min\+Rto)
\begin{DoxyCompactList}\small\item\em Sets the Minimum R\+TO. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a7a2d5935f65b598dba9e2c01506cdbb3}{Get\+Min\+Rto} (void) const 
\begin{DoxyCompactList}\small\item\em Get the Minimum R\+TO. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a9164b842ec64a11e42f5b5e87cb2cecc}{Set\+Clock\+Granularity} (\hyperlink{classns3_1_1Time}{Time} clock\+Granularity)
\begin{DoxyCompactList}\small\item\em Sets the Clock Granularity (used in R\+TO calcs). \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a4c47e3add9c7e8023884e0df5a88c489}{Get\+Clock\+Granularity} (void) const 
\begin{DoxyCompactList}\small\item\em Get the Clock Granularity (used in R\+TO calcs). \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpTxBuffer}{Tcp\+Tx\+Buffer} $>$ \hyperlink{classns3_1_1TcpSocketBase_aea4dd16496e03e7cc96d0ed8c51256fa}{Get\+Tx\+Buffer} (void) const 
\begin{DoxyCompactList}\small\item\em Get a pointer to the Tx buffer. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpRxBuffer}{Tcp\+Rx\+Buffer} $>$ \hyperlink{classns3_1_1TcpSocketBase_a4107fd640582c5e35641994386e11b55}{Get\+Rx\+Buffer} (void) const 
\begin{DoxyCompactList}\small\item\em Get a pointer to the Rx buffer. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_af45fbd60c8ccde3357801e31e93e163d}{Update\+Cwnd} (uint32\+\_\+t old\+Value, uint32\+\_\+t new\+Value)
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} congestion window. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_aa1abe21f8c190e2ab5a4b454ffc466e3}{Update\+Ss\+Thresh} (uint32\+\_\+t old\+Value, uint32\+\_\+t new\+Value)
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} slow start threshold. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a8c31591889130527c14c4b2a5d0a2a4b}{Update\+Cong\+State} (\hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19}{Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t} old\+Value, \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19}{Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t} new\+Value)
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} congestion state. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a4a2122af95f0f40965e4b8a894fd4814}{Update\+High\+Tx\+Mark} (\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} old\+Value, \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} new\+Value)
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} high tx mark. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_ad97775a4eaa42d5fea38ea20674889c4}{Update\+Next\+Tx\+Sequence} (\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} old\+Value, \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} new\+Value)
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} next tx sequence. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_acc21ee26be8b33d0b4e82703153a7fc8}{Set\+Congestion\+Control\+Algorithm} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpCongestionOps}{Tcp\+Congestion\+Ops} $>$ algo)
\begin{DoxyCompactList}\small\item\em Install a congestion control algorithm on this socket. \end{DoxyCompactList}\item 
virtual enum \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6cca}{Socket\+Errno} \hyperlink{classns3_1_1TcpSocketBase_a7ea2ab815e861e653803fbe82787c92f}{Get\+Errno} (void) const 
\begin{DoxyCompactList}\small\item\em Get last error number. \end{DoxyCompactList}\item 
virtual enum \hyperlink{classns3_1_1Socket_a698fbcc486a48b7a0d2b0e4ab863d571}{Socket\+Type} \hyperlink{classns3_1_1TcpSocketBase_ab491cb3bfc9f1a0f77f5c53d3e813727}{Get\+Socket\+Type} (void) const 
\item 
virtual \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ \hyperlink{classns3_1_1TcpSocketBase_afaca88563d7dc2bb8d5abdb8d9ace59b}{Get\+Node} (void) const 
\begin{DoxyCompactList}\small\item\em Return the node this socket is associated with. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind} (void)
\begin{DoxyCompactList}\small\item\em Allocate a local I\+Pv4 endpoint for this socket. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_abe62bb701ac4f057199d5c34938a96a9}{Bind6} (void)
\begin{DoxyCompactList}\small\item\em Allocate a local I\+Pv6 endpoint for this socket. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_a86469a9087181185895314d8da713f35}{Bind} (const \hyperlink{classns3_1_1Address}{Address} \&address)
\begin{DoxyCompactList}\small\item\em Allocate a local endpoint for this socket. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}{Connect} (const \hyperlink{classns3_1_1Address}{Address} \&address)
\begin{DoxyCompactList}\small\item\em Initiate a connection to a remote host. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_a4d6c4cf0d65fd6e50aa969964ccc029b}{Listen} (void)
\begin{DoxyCompactList}\small\item\em Listen for incoming connections. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_adab0076d02811c29ea9ced8b10e7a878}{Close} (void)
\begin{DoxyCompactList}\small\item\em Close a socket. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_ab972c5b46c62fed0c30b387e03753ca7}{Shutdown\+Send} (void)
\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_a76be46f62b71156137ec760524aa47fa}{Shutdown\+Recv} (void)
\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_a172e373bab86078af4462fc1415c59e4}{Send} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, uint32\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em Send data (or dummy data) to the remote host. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_ac7bd6956cd3d723c454814698bc8f094}{Send\+To} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, uint32\+\_\+t flags, const \hyperlink{classns3_1_1Address}{Address} \&to\+Address)
\begin{DoxyCompactList}\small\item\em Send data to a specified peer. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classns3_1_1TcpSocketBase_a114fc3153ceac81813f31651a4f9df9a}{Recv} (uint32\+\_\+t max\+Size, uint32\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em Read data from the socket. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classns3_1_1TcpSocketBase_afbfc81cc21495573d75cb0546502da9a}{Recv\+From} (uint32\+\_\+t max\+Size, uint32\+\_\+t flags, \hyperlink{classns3_1_1Address}{Address} \&from\+Address)
\begin{DoxyCompactList}\small\item\em Read a single packet from the socket and retrieve the sender address. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{Get\+Tx\+Available} (void) const 
\begin{DoxyCompactList}\small\item\em Returns the number of bytes which can be sent in a single call to Send. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_acc09fa5cc37944a1630be0d1bdcec33e}{Get\+Rx\+Available} (void) const 
\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_a0a1ee7f59726c5da47a1a6ab4dad46e8}{Get\+Sock\+Name} (\hyperlink{classns3_1_1Address}{Address} \&address) const 
\begin{DoxyCompactList}\small\item\em Get socket address. \end{DoxyCompactList}\item 
virtual int \hyperlink{classns3_1_1TcpSocketBase_a3fe3f208498b8735a9ed0754940ec06c}{Get\+Peer\+Name} (\hyperlink{classns3_1_1Address}{Address} \&address) const 
\begin{DoxyCompactList}\small\item\em Get the peer address of a connected socket. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a88b552dfa0a85e0224ed8a7dc140f190}{Bind\+To\+Net\+Device} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ netdevice)
\begin{DoxyCompactList}\small\item\em Bind a socket to specific device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1TcpSocketBase_a7aa3d6dfe929e6b61ead2217bc5a646a}{Get\+Type\+Id} (void)
\begin{DoxyCompactList}\small\item\em Get the type ID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ uint32\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1TcpSocketBase_a53183f9cee6315bcb73742b9b9d14970}{m\+\_\+c\+Wnd\+Trace}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} pointer for c\+Wnd trace chaining. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ uint32\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1TcpSocketBase_aba33c4aa346eeb1a205a97844d8ed689}{m\+\_\+ss\+Th\+Trace}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} pointer for ss\+Th trace chaining. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19}{Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t}, \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19}{Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t} $>$ \hyperlink{classns3_1_1TcpSocketBase_a682c31efa86a22cbffae1f4ba7c0bbc4}{m\+\_\+cong\+State\+Trace}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} pointer for congestion state trace chaining. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32}, \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} $>$ \hyperlink{classns3_1_1TcpSocketBase_abe31167cc73bc1917e616aa210fa1041}{m\+\_\+high\+Tx\+Mark\+Trace}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} pointer for high tx mark chaining. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32}, \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} $>$ \hyperlink{classns3_1_1TcpSocketBase_a4f6e09e3f0132fbf82af53bcd9c49acc}{m\+\_\+next\+Tx\+Sequence\+Trace}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Callback}{Callback} pointer for next tx sequence chaining. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_ad74ab3c8d10069de9f24337009e19a65}{Set\+Snd\+Buf\+Size} (uint32\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Set the send buffer size. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_ab2ff28ba55771f51fa607dee6c7d629d}{Get\+Snd\+Buf\+Size} (void) const 
\begin{DoxyCompactList}\small\item\em Get the send buffer size. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a400be1b74a19f5e381e29cdfe1f9fa28}{Set\+Rcv\+Buf\+Size} (uint32\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Set the receive buffer size. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_accd0cb0f4780dc2dc3849b78da7f343b}{Get\+Rcv\+Buf\+Size} (void) const 
\begin{DoxyCompactList}\small\item\em Get the receive buffer size. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a03735ecd86c296e081c1825efd945bd6}{Set\+Seg\+Size} (uint32\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Set the segment size. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_acd5e25608675522197d8f7784e2ed03d}{Get\+Seg\+Size} (void) const 
\begin{DoxyCompactList}\small\item\em Get the segment size. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_adf3850adfe73a0bf0e40f6b81ec30e41}{Set\+Initial\+S\+S\+Thresh} (uint32\+\_\+t threshold)
\begin{DoxyCompactList}\small\item\em Set the initial Slow Start Threshold. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_aa2237283f17696ffbf78040668c44138}{Get\+Initial\+S\+S\+Thresh} (void) const 
\begin{DoxyCompactList}\small\item\em Get the initial Slow Start Threshold. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_aa3735c7914a19141ea1751b862e42eab}{Set\+Initial\+Cwnd} (uint32\+\_\+t cwnd)
\begin{DoxyCompactList}\small\item\em Set the initial Congestion Window. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a2ac4eb2a33a8db482f4265f3bf119b76}{Get\+Initial\+Cwnd} (void) const 
\begin{DoxyCompactList}\small\item\em Get the initial Congestion Window. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a3d0bf93406d7def639741d5ea132d66e}{Set\+Conn\+Timeout} (\hyperlink{classns3_1_1Time}{Time} \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout})
\begin{DoxyCompactList}\small\item\em Set the connection timeout. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a523cfca900c9e27b6687bbb983e2585e}{Get\+Conn\+Timeout} (void) const 
\begin{DoxyCompactList}\small\item\em Get the connection timeout. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a79b5050d650fcb425531ae9a8561250f}{Set\+Syn\+Retries} (uint32\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Set the number of connection retries before giving up. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_aa27e11abd33d64abce31784cc0685bc0}{Get\+Syn\+Retries} (void) const 
\begin{DoxyCompactList}\small\item\em Get the number of connection retries before giving up. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a6a29b086aee1d5cec7eee34a6d3e9621}{Set\+Data\+Retries} (uint32\+\_\+t retries)
\begin{DoxyCompactList}\small\item\em Set the number of data transmission retries before giving up. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_ae6bc66f86e59e933d9681561e18774ce}{Get\+Data\+Retries} (void) const 
\begin{DoxyCompactList}\small\item\em Get the number of data transmission retries before giving up. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a2c23d993022a027c7377c14b790433d6}{Set\+Del\+Ack\+Timeout} (\hyperlink{classns3_1_1Time}{Time} \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout})
\begin{DoxyCompactList}\small\item\em Set the time to delay an A\+CK. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a82c0837e768770ca28cb95f70af0a1dc}{Get\+Del\+Ack\+Timeout} (void) const 
\begin{DoxyCompactList}\small\item\em Get the time to delay an A\+CK. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_aac71f522f7742d83a71d39dfebf76188}{Set\+Del\+Ack\+Max\+Count} (uint32\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Set the number of packet to fire an A\+CK before delay timeout. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a807fa9a8f8d4faeb78f34dab8cd112d2}{Get\+Del\+Ack\+Max\+Count} (void) const 
\begin{DoxyCompactList}\small\item\em Get the number of packet to fire an A\+CK before delay timeout. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a5dc1ed5b7d5eacc77b0300229e1a0236}{Set\+Tcp\+No\+Delay} (bool no\+Delay)
\begin{DoxyCompactList}\small\item\em Enable/\+Disable Nagle\textquotesingle{}s algorithm. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classns3_1_1TcpSocketBase_a40fe99d8e28d12ef478a346ae14c2fa9}{Get\+Tcp\+No\+Delay} (void) const 
\begin{DoxyCompactList}\small\item\em Check if Nagle\textquotesingle{}s algorithm is enabled or not. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a0d59156c8e210422800e31ef0037f00d}{Set\+Persist\+Timeout} (\hyperlink{classns3_1_1Time}{Time} \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout})
\begin{DoxyCompactList}\small\item\em Set the timout for persistent connection. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a4fa916690fa28137b0bd7df6b69638d1}{Get\+Persist\+Timeout} (void) const 
\begin{DoxyCompactList}\small\item\em Get the timout for persistent connection. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classns3_1_1TcpSocketBase_a7484f982e3a1d04d9ad0dd4ed6e3e004}{Set\+Allow\+Broadcast} (bool allow\+Broadcast)
\begin{DoxyCompactList}\small\item\em Configure whether broadcast datagram transmissions are allowed. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classns3_1_1TcpSocketBase_abce73dedea2d3683df30ba77bf54fa40}{Get\+Allow\+Broadcast} (void) const 
\begin{DoxyCompactList}\small\item\em Query whether broadcast datagram transmissions are allowed. \end{DoxyCompactList}\item 
int \hyperlink{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{Setup\+Callback} (void)
\begin{DoxyCompactList}\small\item\em Common part of the two \hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind()}, i.\+e. set callback and remembering local addr\+:port. \end{DoxyCompactList}\item 
int \hyperlink{classns3_1_1TcpSocketBase_ac07945f77be2c49f0c1712ea56322493}{Do\+Connect} (void)
\begin{DoxyCompactList}\small\item\em Perform the real connection tasks\+: Send S\+YN if allowed, R\+ST if invalid. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a324311b484cc258ae61fbd7bcfbeeb7e}{Connection\+Succeeded} (void)
\begin{DoxyCompactList}\small\item\em Schedule-\/friendly wrapper for \hyperlink{classns3_1_1Socket_a2f55d195304131b356818bc74134c5a7}{Socket\+::\+Notify\+Connection\+Succeeded()} \end{DoxyCompactList}\item 
int \hyperlink{classns3_1_1TcpSocketBase_aa1e2094be5e9653b9d8d8d76b7ec670f}{Setup\+Endpoint} (void)
\begin{DoxyCompactList}\small\item\em Configure the endpoint to a local address. Called by \hyperlink{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}{Connect()} if \hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind()} didn\textquotesingle{}t specify one. \end{DoxyCompactList}\item 
int \hyperlink{classns3_1_1TcpSocketBase_afe98eecb266502ddd1fdbcfa37442b7a}{Setup\+Endpoint6} (void)
\begin{DoxyCompactList}\small\item\em Configure the endpoint v6 to a local address. Called by \hyperlink{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}{Connect()} if \hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind()} didn\textquotesingle{}t specify one. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_abba7d4c43acb3f9356e348b970a882fb}{Complete\+Fork} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header, const \hyperlink{classns3_1_1Address}{Address} \&from\+Address, const \hyperlink{classns3_1_1Address}{Address} \&to\+Address)
\begin{DoxyCompactList}\small\item\em Complete a connection by forking the socket. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}{Forward\+Up} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} header, uint16\+\_\+t \hyperlink{visualizer-ideas_8txt_a21ff1c530daf8435e00048b7fc2c58e3}{port}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4Interface}{Ipv4\+Interface} $>$ incoming\+Interface)
\begin{DoxyCompactList}\small\item\em Called by the L3 protocol when it received a packet to pass on to T\+CP. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_aa0cd34b3562685596b2c3fd1e6a42a6f}{Forward\+Up6} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ipv6Header}{Ipv6\+Header} header, uint16\+\_\+t \hyperlink{visualizer-ideas_8txt_a21ff1c530daf8435e00048b7fc2c58e3}{port}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv6Interface}{Ipv6\+Interface} $>$ incoming\+Interface)
\begin{DoxyCompactList}\small\item\em Called by the L3 protocol when it received a packet to pass on to T\+CP. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_ad5e7b21b9e9371bf9c19da5d3c56aac1}{Do\+Forward\+Up} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1Address}{Address} \&from\+Address, const \hyperlink{classns3_1_1Address}{Address} \&to\+Address)
\begin{DoxyCompactList}\small\item\em Called by \hyperlink{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}{Tcp\+Socket\+Base\+::\+Forward\+Up}\{,6\}(). \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_ad4887f46646734366ae435dbca13e3fd}{Forward\+Icmp} (\hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)
\begin{DoxyCompactList}\small\item\em Called by the L3 protocol when it received an I\+C\+MP packet to pass on to T\+CP. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_ad55d818db7149e0c2db0ce5eb6810beb}{Forward\+Icmp6} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6\+Address} icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)
\begin{DoxyCompactList}\small\item\em Called by the L3 protocol when it received an I\+C\+M\+Pv6 packet to pass on to T\+CP. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}{Send\+Pending\+Data} (bool with\+Ack=\hyperlink{lte__cqi__generation_8m_ab1bef239d413c4da139c4bac92cd657a}{false})
\begin{DoxyCompactList}\small\item\em Send as much pending data as possible according to the Tx window. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a677488c04da1df87f916953a40e1bd64}{Send\+Data\+Packet} (\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} seq, uint32\+\_\+t max\+Size, bool with\+Ack)
\begin{DoxyCompactList}\small\item\em Extract at most max\+Size bytes from the Tx\+Buffer at sequence seq, add the T\+CP header, and send to \hyperlink{classns3_1_1TcpL4Protocol}{Tcp\+L4\+Protocol}. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{Send\+Empty\+Packet} (uint8\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em Send a empty packet that carries a flag, e.\+g., A\+CK. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{Send\+R\+ST} (void)
\begin{DoxyCompactList}\small\item\em Send reset and tear down this socket. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a99af6d09e114652b31187db88da577b6}{Out\+Of\+Range} (\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} head, \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} tail) const 
\begin{DoxyCompactList}\small\item\em Check if a sequence number range is within the rx window. \end{DoxyCompactList}\item 
int \hyperlink{classns3_1_1TcpSocketBase_adfc92c152f498c918cd73d4b31579472}{Do\+Close} (void)
\begin{DoxyCompactList}\small\item\em Close a socket by sending R\+ST, F\+IN, or F\+I\+N+\+A\+CK, depend on the current state. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{Close\+And\+Notify} (void)
\begin{DoxyCompactList}\small\item\em Peacefully close the socket by notifying the upper layer and deallocate end point. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_aa0171ac255369c09a30144b1a5f6b21d}{Destroy} (void)
\begin{DoxyCompactList}\small\item\em Kill this socket by zeroing its attributes (I\+Pv4) \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a194e921d823fdfd396fa64aa524a0326}{Destroy6} (void)
\begin{DoxyCompactList}\small\item\em Kill this socket by zeroing its attributes (I\+Pv6) \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a53791738228495d40197679dbc057392}{Deallocate\+End\+Point} (void)
\begin{DoxyCompactList}\small\item\em Deallocate m\+\_\+end\+Point and m\+\_\+end\+Point6. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a417d981796bf0919582c843403f823ad}{Peer\+Close} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p}, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Received a F\+IN from peer, notify rx buffer. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a8a56cf4ab3b64d9f781ed1b1f63f51cd}{Do\+Peer\+Close} (void)
\begin{DoxyCompactList}\small\item\em F\+IN is in sequence, notify app and respond with a F\+IN. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{Cancel\+All\+Timers} (void)
\begin{DoxyCompactList}\small\item\em Cancel all timer when endpoint is deleted. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_acd41dedaf25ea16d290aa5737e303099}{Time\+Wait} (void)
\begin{DoxyCompactList}\small\item\em Move from C\+L\+O\+S\+I\+NG or F\+I\+N\+\_\+\+W\+A\+I\+T\+\_\+2 to T\+I\+M\+E\+\_\+\+W\+A\+IT state. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a0deda9c6a4f777bf660b190cd73b102f}{Process\+Established} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Received a packet upon E\+S\+T\+A\+B\+L\+I\+S\+H\+ED state. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_adc3976e8b42e884f5d99def1d5e2647f}{Process\+Listen} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header, const \hyperlink{classns3_1_1Address}{Address} \&from\+Address, const \hyperlink{classns3_1_1Address}{Address} \&to\+Address)
\begin{DoxyCompactList}\small\item\em Received a packet upon L\+I\+S\+T\+EN state. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a2e9b990c6a4d686291033a393290906b}{Process\+Syn\+Sent} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Received a packet upon S\+Y\+N\+\_\+\+S\+E\+NT. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a69113acf27c4b8267c9e107a5dca7cc1}{Process\+Syn\+Rcvd} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header, const \hyperlink{classns3_1_1Address}{Address} \&from\+Address, const \hyperlink{classns3_1_1Address}{Address} \&to\+Address)
\begin{DoxyCompactList}\small\item\em Received a packet upon S\+Y\+N\+\_\+\+R\+C\+VD. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a58aa892c1cb33908aca5ca36967a2a99}{Process\+Wait} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Received a packet upon C\+L\+O\+S\+E\+\_\+\+W\+A\+IT, F\+I\+N\+\_\+\+W\+A\+I\+T\+\_\+1, F\+I\+N\+\_\+\+W\+A\+I\+T\+\_\+2. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_abc2462833556fdd737fdcdc5992768e8}{Process\+Closing} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Received a packet upon C\+L\+O\+S\+I\+NG. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a6700ac3f9e4d3c197499e6b7521205f2}{Process\+Last\+Ack} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Received a packet upon L\+A\+S\+T\+\_\+\+A\+CK. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_aba0c8b002908bfa8cd170b793df747bc}{Un\+Ack\+Data\+Count} (void) const 
\begin{DoxyCompactList}\small\item\em Return count of number of unacked bytes. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{Bytes\+In\+Flight} (void) const 
\begin{DoxyCompactList}\small\item\em Return total bytes in flight. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a820d022945d4fa0494712d7ed5868091}{Window} (void) const 
\begin{DoxyCompactList}\small\item\em Return the max possible number of unacked bytes. \end{DoxyCompactList}\item 
virtual uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_add825047dd7c82046d42087e29b7c5b7}{Available\+Window} (void) const 
\begin{DoxyCompactList}\small\item\em Return unfilled portion of window. \end{DoxyCompactList}\item 
virtual uint16\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{Advertised\+Window\+Size} (bool scale=true) const 
\begin{DoxyCompactList}\small\item\em The amount of Rx window announced to the peer. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_aaa81bed04831358d23d50a4ef3a9a6c5}{Update\+Window\+Size} (const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&header)
\begin{DoxyCompactList}\small\item\em Update the receiver window (R\+W\+ND) based on the value of the window field in the header. \end{DoxyCompactList}\item 
virtual \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} $>$ \hyperlink{classns3_1_1TcpSocketBase_a991265d824d6e36affef05e1e050c752}{Fork} (void)
\begin{DoxyCompactList}\small\item\em Call Copy\+Object$<$$>$ to clone me. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a695c036628adf8a204a653dbf178f8cd}{Received\+Ack} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Received an A\+CK packet. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a7c8a0eb71e14abececff528e8d4261b6}{Process\+Ack} (const \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \&ack\+Number, bool scoreboard\+Updated)
\begin{DoxyCompactList}\small\item\em Process a received ack. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{Received\+Data} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Recv of a data, put into buffer, call L7 to get it if necessary. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_af10157be4b91fdefbc3f618baf6919b2}{Estimate\+Rtt} (const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Take into account the packet for R\+TT estimation. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_af66bb88aa9438d6abbc9f8b941ab5cc8}{Update\+Rtt\+History} (const \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \&seq, uint32\+\_\+t sz, bool is\+Retransmission)
\begin{DoxyCompactList}\small\item\em Update the R\+TT history, when we send T\+CP segments. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a13401dd51854607d0521a35bf2622761}{New\+Ack} (\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} const \&seq, bool reset\+R\+TO)
\begin{DoxyCompactList}\small\item\em Update buffers w.\+r.\+t. A\+CK. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a9139f54e2cdf0f1a796011a43dabfad5}{Dup\+Ack} ()
\begin{DoxyCompactList}\small\item\em Dupack management. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_ae192934b14961166fa6cd3197c85406c}{Limited\+Transmit} ()
\begin{DoxyCompactList}\small\item\em Limited transmit algorithm. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_aad6550badbb76f8b04811f14e7afd10c}{Enter\+Recovery} ()
\begin{DoxyCompactList}\small\item\em Enter the C\+A\+\_\+\+R\+E\+C\+O\+V\+E\+RY, and retransmit the head. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a60bb6a7cfb5855bba206606174d50c5e}{Re\+Tx\+Timeout} (void)
\begin{DoxyCompactList}\small\item\em An R\+TO event happened. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a6bea4790f749e771462d8e4ab63ebc67}{Del\+Ack\+Timeout} (void)
\begin{DoxyCompactList}\small\item\em Action upon delay A\+CK timeout, i.\+e. send an A\+CK. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_affa65b010fdc8c5f32105f5c8279f50d}{Last\+Ack\+Timeout} (void)
\begin{DoxyCompactList}\small\item\em Timeout at L\+A\+S\+T\+\_\+\+A\+CK, close the connection. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a80fe451da81e0059154321eee693de31}{Persist\+Timeout} (void)
\begin{DoxyCompactList}\small\item\em Send 1 byte probe to get an updated window size. \end{DoxyCompactList}\item 
virtual void \hyperlink{classns3_1_1TcpSocketBase_a13b6b897811a48523988f8af6e9130d3}{Do\+Retransmit} (void)
\begin{DoxyCompactList}\small\item\em Retransmit the oldest packet. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}{Add\+Options} (\hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header)
\begin{DoxyCompactList}\small\item\em Add options to \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header}. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a5fc67b6d49bb81a520c67cd6018954bb}{Read\+Options} (const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&tcp\+Header, bool \&scoreboard\+Updated)
\begin{DoxyCompactList}\small\item\em Read T\+CP options begore Ack processing. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_afb18d462bc2f1c1fe7f47d9e909b007a}{Is\+Tcp\+Option\+Enabled} (uint8\+\_\+t kind) const 
\begin{DoxyCompactList}\small\item\em Return true if the specified option is enabled. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a4674edd220672235e629cb3e3b2a673f}{Process\+Option\+W\+Scale} (const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1TcpOption}{Tcp\+Option} $>$ option)
\begin{DoxyCompactList}\small\item\em Read and parse the Window scale option. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_aa749dc3f6287c79a2ad39cb306220663}{Add\+Option\+W\+Scale} (\hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&header)
\begin{DoxyCompactList}\small\item\em Add the window scale option to the header. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a53856cbb5c7e49324f5428da7b9f0c74}{Calculate\+W\+Scale} () const 
\begin{DoxyCompactList}\small\item\em Calculate window scale value based on receive buffer space. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a9c7dac8b3121549ac801eb0de41801ec}{Process\+Option\+Sack\+Permitted} (const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1TcpOption}{Tcp\+Option} $>$ option)
\begin{DoxyCompactList}\small\item\em Read the S\+A\+CK P\+E\+R\+M\+I\+T\+T\+ED option. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a0c41c637acc8824e691404f0c9ebe858}{Process\+Option\+Sack} (const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1TcpOption}{Tcp\+Option} $>$ option)
\begin{DoxyCompactList}\small\item\em Read the S\+A\+CK option. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a470e7b2406d76319c457f2fdf5ff0699}{Add\+Option\+Sack\+Permitted} (\hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&header)
\begin{DoxyCompactList}\small\item\em Add the S\+A\+CK P\+E\+R\+M\+I\+T\+T\+ED option to the header. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a009a4dcad47330a47e5b829918fb9140}{Add\+Option\+Sack} (\hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&header)
\begin{DoxyCompactList}\small\item\em Add the S\+A\+CK option to the header. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_af5cc928b5194d832031a1d7ec159f567}{Process\+Option\+Timestamp} (const \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1TcpOption}{Tcp\+Option} $>$ option, const \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \&seq)
\begin{DoxyCompactList}\small\item\em Process the timestamp option from other side. \end{DoxyCompactList}\item 
void \hyperlink{classns3_1_1TcpSocketBase_a62689196f68584e8731fb5c6b7693d30}{Add\+Option\+Timestamp} (\hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&header)
\begin{DoxyCompactList}\small\item\em Add the timestamp option to the header. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a7925b2818a17c63669a64488ce2726d0}{Safe\+Subtraction} (uint32\+\_\+t a, uint32\+\_\+t \hyperlink{lte__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b})
\begin{DoxyCompactList}\small\item\em Performs a safe subtraction between a and b (a-\/b) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\+\_\+retx\+Event}
\begin{DoxyCompactList}\small\item\em Retransmission event. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1TcpSocketBase_ac6933cbf3722ece8188d40a889c45649}{m\+\_\+last\+Ack\+Event}
\begin{DoxyCompactList}\small\item\em Last A\+CK timeout event. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\+\_\+del\+Ack\+Event}
\begin{DoxyCompactList}\small\item\em Delayed A\+CK timeout event. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\+\_\+persist\+Event}
\begin{DoxyCompactList}\small\item\em Persist event\+: Send 1 byte to probe for a non-\/zero Rx window. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1TcpSocketBase_a49b5b01bd6e824835859a9983465c9f2}{m\+\_\+timewait\+Event}
\begin{DoxyCompactList}\small\item\em T\+I\+M\+E\+\_\+\+W\+A\+IT expiration event\+: Move this socket to C\+L\+O\+S\+ED state. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\+\_\+dup\+Ack\+Count}
\begin{DoxyCompactList}\small\item\em Dupack counter. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\+\_\+del\+Ack\+Count}
\begin{DoxyCompactList}\small\item\em Delayed A\+CK counter. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\+\_\+del\+Ack\+Max\+Count}
\begin{DoxyCompactList}\small\item\em Number of packet to fire an A\+CK before delay timeout. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}{m\+\_\+no\+Delay}
\begin{DoxyCompactList}\small\item\em Set to true to disable Nagle\textquotesingle{}s algorithm. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\+\_\+syn\+Count}
\begin{DoxyCompactList}\small\item\em Count of remaining connection retries. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\+\_\+syn\+Retries}
\begin{DoxyCompactList}\small\item\em Number of connection attempts. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\+\_\+data\+Retr\+Count}
\begin{DoxyCompactList}\small\item\em Count of remaining data retransmission attempts. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\+\_\+data\+Retries}
\begin{DoxyCompactList}\small\item\em Number of data retransmission attempts. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ \hyperlink{classns3_1_1Time}{Time} $>$ \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\+\_\+rto}
\begin{DoxyCompactList}\small\item\em Retransmit timeout. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\+\_\+min\+Rto}
\begin{DoxyCompactList}\small\item\em minimum value of the Retransmit timeout \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\+\_\+clock\+Granularity}
\begin{DoxyCompactList}\small\item\em Clock Granularity used in R\+TO calcs. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ \hyperlink{classns3_1_1Time}{Time} $>$ \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\+\_\+last\+Rtt}
\begin{DoxyCompactList}\small\item\em Last R\+TT sample collected. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}{m\+\_\+del\+Ack\+Timeout}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Time}{Time} to delay an A\+CK. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\+\_\+persist\+Timeout}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Time}{Time} between sending 1-\/byte probes. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Time}{Time} \hyperlink{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{m\+\_\+cn\+Timeout}
\begin{DoxyCompactList}\small\item\em Timeout for connection retry. \end{DoxyCompactList}\item 
\hyperlink{namespacens3_a04f92e99d963a2e9abc4df951063fdcc}{Rtt\+History\+\_\+t} \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\+\_\+history}
\begin{DoxyCompactList}\small\item\em List of sent packet. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv4EndPoint}{Ipv4\+End\+Point} $\ast$ \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\+\_\+end\+Point}
\begin{DoxyCompactList}\small\item\em the I\+Pv4 endpoint \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ipv6EndPoint}{Ipv6\+End\+Point} $\ast$ \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\+\_\+end\+Point6}
\begin{DoxyCompactList}\small\item\em the I\+Pv6 endpoint \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\+\_\+node}
\begin{DoxyCompactList}\small\item\em the associated node \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpL4Protocol}{Tcp\+L4\+Protocol} $>$ \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\+\_\+tcp}
\begin{DoxyCompactList}\small\item\em the associated T\+CP L4 protocol \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address}, uint8\+\_\+t, uint8\+\_\+t, uint8\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1TcpSocketBase_aef792b929bd15886a4b9a7132525a0ea}{m\+\_\+icmp\+Callback}
\begin{DoxyCompactList}\small\item\em I\+C\+MP callback. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Callback}{Callback}$<$ void, \hyperlink{classns3_1_1Ipv6Address}{Ipv6\+Address}, uint8\+\_\+t, uint8\+\_\+t, uint8\+\_\+t, uint32\+\_\+t $>$ \hyperlink{classns3_1_1TcpSocketBase_a75aca0603de58d7db7c0fa7daab34064}{m\+\_\+icmp\+Callback6}
\begin{DoxyCompactList}\small\item\em I\+C\+M\+Pv6 callback. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1RttEstimator}{Rtt\+Estimator} $>$ \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\+\_\+rtt}
\begin{DoxyCompactList}\small\item\em Round trip time estimator. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpRxBuffer}{Tcp\+Rx\+Buffer} $>$ \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\+\_\+rx\+Buffer}
\begin{DoxyCompactList}\small\item\em Rx buffer (reordering buffer) \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpTxBuffer}{Tcp\+Tx\+Buffer} $>$ \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\+\_\+tx\+Buffer}
\begin{DoxyCompactList}\small\item\em Tx buffer. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ \hyperlink{group__tcp_ga3929cdb47bdf159657fa24054aa5ca03}{Tcp\+States\+\_\+t} $>$ \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\+\_\+state}
\begin{DoxyCompactList}\small\item\em T\+CP state. \end{DoxyCompactList}\item 
enum \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6cca}{Socket\+Errno} \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\+\_\+errno}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1Socket}{Socket} error code. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\+\_\+close\+Notified}
\begin{DoxyCompactList}\small\item\em Told app to close socket. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{m\+\_\+close\+On\+Empty}
\begin{DoxyCompactList}\small\item\em Close socket upon tx buffer emptied. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{m\+\_\+shutdown\+Send}
\begin{DoxyCompactList}\small\item\em Send no longer allowed. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}{m\+\_\+shutdown\+Recv}
\begin{DoxyCompactList}\small\item\em Receive no longer allowed. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\+\_\+connected}
\begin{DoxyCompactList}\small\item\em Connection established. \end{DoxyCompactList}\item 
double \hyperlink{classns3_1_1TcpSocketBase_a668a2cc5cf751511263ee8a0766c9ea5}{m\+\_\+msl}
\begin{DoxyCompactList}\small\item\em Max segment lifetime. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{m\+\_\+max\+Win\+Size}
\begin{DoxyCompactList}\small\item\em Maximum window size to advertise. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ uint32\+\_\+t $>$ \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\+\_\+r\+Wnd}
\begin{DoxyCompactList}\small\item\em Receiver window (R\+C\+V.\+W\+ND in R\+F\+C793) \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ uint32\+\_\+t $>$ \hyperlink{classns3_1_1TcpSocketBase_a12a1c017e48895fbe36df0d54a509041}{m\+\_\+adv\+Wnd}
\begin{DoxyCompactList}\small\item\em Advertised Window size. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} $>$ \hyperlink{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}{m\+\_\+high\+Rx\+Mark}
\begin{DoxyCompactList}\small\item\em Highest seqno received. \end{DoxyCompactList}\item 
\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \hyperlink{classns3_1_1TcpSocketBase_a593fd39ccf865253c39bae9721263255}{m\+\_\+high\+Tx\+Ack}
\begin{DoxyCompactList}\small\item\em Highest ack sent. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} $>$ \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\+\_\+high\+Rx\+Ack\+Mark}
\begin{DoxyCompactList}\small\item\em Highest ack received. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}{m\+\_\+bytes\+Acked\+Not\+Processed}
\begin{DoxyCompactList}\small\item\em Bytes acked, but not processed. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedValue}{Traced\+Value}$<$ uint32\+\_\+t $>$ \hyperlink{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}{m\+\_\+bytes\+In\+Flight}
\begin{DoxyCompactList}\small\item\em Bytes in flight. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\+\_\+sack\+Enabled}
\begin{DoxyCompactList}\small\item\em R\+FC S\+A\+CK option enabled. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{m\+\_\+win\+Scaling\+Enabled}
\begin{DoxyCompactList}\small\item\em Window Scale option enabled (R\+FC 7323) \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}{m\+\_\+rcv\+Wind\+Shift}
\begin{DoxyCompactList}\small\item\em Window shift to apply to outgoing segments. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}{m\+\_\+snd\+Wind\+Shift}
\begin{DoxyCompactList}\small\item\em Window shift to apply to incoming segments. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\+\_\+timestamp\+Enabled}
\begin{DoxyCompactList}\small\item\em Timestamp option enabled. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{m\+\_\+timestamp\+To\+Echo}
\begin{DoxyCompactList}\small\item\em Timestamp to echo. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1EventId}{Event\+Id} \hyperlink{classns3_1_1TcpSocketBase_a84be5c63b5ebf8e2452b43f9def59cab}{m\+\_\+send\+Pending\+Data\+Event}
\begin{DoxyCompactList}\small\item\em micro-\/delay event to send pending data \end{DoxyCompactList}\item 
\hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{Sequence\+Number32} \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\+\_\+recover}
\begin{DoxyCompactList}\small\item\em Previous highest Tx seqnum for fast recovery. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\+\_\+retx\+Thresh}
\begin{DoxyCompactList}\small\item\em Fast Retransmit threshold. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}{m\+\_\+limited\+Tx}
\begin{DoxyCompactList}\small\item\em perform limited transmit \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} $>$ \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\+\_\+tcb}
\begin{DoxyCompactList}\small\item\em Congestion control informations. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1TcpCongestionOps}{Tcp\+Congestion\+Ops} $>$ \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\+\_\+congestion\+Control}
\begin{DoxyCompactList}\small\item\em Congestion control. \end{DoxyCompactList}\item 
bool \hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\+\_\+is\+First\+Partial\+Ack}
\begin{DoxyCompactList}\small\item\em First partial A\+CK during R\+E\+C\+O\+V\+E\+RY. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} $>$ $>$ \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{m\+\_\+tx\+Trace}
\begin{DoxyCompactList}\small\item\em Trace of transmitted packets. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback}$<$ \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1Packet}{Packet} $>$, const \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} \&, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} $>$ $>$ \hyperlink{classns3_1_1TcpSocketBase_a27b35f098b956baf89388fff0d4e539b}{m\+\_\+rx\+Trace}
\begin{DoxyCompactList}\small\item\em Trace of received packets. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Related Functions}
(Note that these are not member functions.) \begin{DoxyCompactItemize}
\item 
class \hyperlink{classns3_1_1TcpSocketBase_a9e3da14f8f21e0ea02af26ce426e4804}{Tcp\+General\+Test}
\begin{DoxyCompactList}\small\item\em \hyperlink{classns3_1_1TcpGeneralTest}{Tcp\+General\+Test} friend class (for tests). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A base class for implementation of a stream socket using T\+CP. 

This class contains the essential components of T\+CP, as well as a sockets interface for upper layers to call. This class provides connection orientation and sliding window flow control; congestion control is delegated to subclasses of \hyperlink{classns3_1_1TcpCongestionOps}{Tcp\+Congestion\+Ops}. Part of \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} is modified from the original N\+S-\/3 T\+CP socket implementation (Tcp\+Socket\+Impl) by Raj Bhattacharjea \href{mailto:raj.b@gatech.edu}{\tt raj.\+b@gatech.\+edu} of Georgia Tech.

For I\+Pv4 packets, the T\+OS set for the socket is used. The Bind and Connect operations set the T\+OS for the socket to the value specified in the provided address. A Socket\+Ip\+Tos tag is only added to the packet if the resulting T\+OS is non-\/null. Each packet is assigned the priority set for the socket. Setting a T\+OS for a socket also sets a priority for the socket (according to the \hyperlink{classns3_1_1Socket_a81564620cc94d291f1dc5d79b2f13b4a}{Socket\+::\+Ip\+Tos2\+Priority} function). A Socket\+Priority tag is only added to the packet if the priority is non-\/null.

\subsubsection*{Congestion state machine }

The socket maintains two state machines; the T\+CP one, and another called \char`\"{}\+Congestion state machine\char`\"{}, which keeps track of the phase we are in. Currently, ns-\/3 manages the states\+:


\begin{DoxyItemize}
\item C\+A\+\_\+\+O\+P\+EN
\item C\+A\+\_\+\+D\+I\+S\+O\+R\+D\+ER
\item C\+A\+\_\+\+R\+E\+C\+O\+V\+E\+RY
\item C\+A\+\_\+\+L\+O\+SS
\end{DoxyItemize}

Another one (C\+A\+\_\+\+C\+WR) is present but not used. For more information, see the Tcp\+Cong\+State\+\_\+t documentation.

\subsubsection*{Congestion control interface }

Congestion control, unlike older releases of ns-\/3, has been split from \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base}. In particular, each congestion control is now a subclass of the main \hyperlink{classns3_1_1TcpCongestionOps}{Tcp\+Congestion\+Ops} class. Switching between congestion algorithm is now a matter of setting a pointer into the \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} class. The idea and the interfaces are inspired by the Linux operating system, and in particular from the structure tcp\+\_\+congestion\+\_\+ops.

\subsubsection*{Transmission Control Block (T\+CB) }

The variables needed to congestion control classes to operate correctly have been moved inside the \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} class. It contains information on the congestion window, slow start threshold, segment size and the state of the Congestion state machine.

To track the trace inside the \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} class, a \char`\"{}forward\char`\"{} technique is used, which consists in chaining callbacks from \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} to \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} (see for example c\+Wnd trace source).

\subsubsection*{Fast retransmit }

The fast retransmit enhancement is introduced in R\+FC 2581 and updated in R\+FC 5681. It reduces the time a sender waits before retransmitting a lost segment, through the assumption that if it receives a certain number of duplicate A\+C\+Ks, a segment has been lost and it can be retransmitted. Usually, it is coupled with the Limited Transmit algorithm, defined in R\+FC 3042.

In ns-\/3, these algorithms are included in this class, and it is implemented inside the Process\+Ack method. The attribute which manages the number of dup A\+C\+Ks necessary to start the fast retransmit algorithm is named \char`\"{}\+Re\+Tx\+Threshold\char`\"{}, and its default value is 3, while the Limited Transmit one can be enabled by setting the attribute \char`\"{}\+Limited\+Transmit\char`\"{} to true. Before entering the recovery phase, the method Enter\+Recovery is called.

\subsubsection*{Fast recovery }

The fast recovery algorithm is introduced R\+FC 2001, and it avoids to reset c\+Wnd to 1 segment after sensing a loss on the channel. Instead, the slow start threshold is halved, and the c\+Wnd is set equal to such value, plus segments for the c\+Wnd inflation.

The algorithm is implemented in the Process\+Ack method.

\subsubsection*{R\+TO expiration }

When the Retransmission \hyperlink{classns3_1_1Time}{Time} Out expires, the T\+CP faces a big performance drop. The expiration event is managed in Re\+Tx\+Timeout method, that basically set the c\+Wnd to 1 segment and start \char`\"{}from scratch\char`\"{} again.

\subsubsection*{Options management }

S\+YN and S\+Y\+N-\/\+A\+CK options, which are allowed only at the beginning of the connection, are managed in the Do\+Forward\+Up and Send\+Empty\+Packet methods. To read all others, we have set up a cycle inside Read\+Options. For adding them, there is no a unique place, since the options (and the information available to build them) are scattered around the code. For instance, the S\+A\+CK option is built in Send\+Empty\+Packet only under certain conditions.

\subsubsection*{S\+A\+CK }

The S\+A\+CK generation/management is delegated to the buffer classes, namely \hyperlink{classns3_1_1TcpTxBuffer}{Tcp\+Tx\+Buffer} and \hyperlink{classns3_1_1TcpRxBuffer}{Tcp\+Rx\+Buffer}. Please take a look on their documentation if you need more informations. 

\subsection{Member Typedef Documentation}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Tcp\+Tx\+Rx\+Traced\+Callback@{Tcp\+Tx\+Rx\+Traced\+Callback}}
\index{Tcp\+Tx\+Rx\+Traced\+Callback@{Tcp\+Tx\+Rx\+Traced\+Callback}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Tcp\+Tx\+Rx\+Traced\+Callback}{TcpTxRxTracedCallback}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$  ns3\+::\+Tcp\+Socket\+Base\+::\+Tcp\+Tx\+Rx\+Traced\+Callback) (const {\bf Ptr}$<$ const {\bf Packet} $>$ packet, const {\bf Tcp\+Header} \&header, const {\bf Ptr}$<$ const {\bf Tcp\+Socket\+Base} $>$ socket)}\hypertarget{classns3_1_1TcpSocketBase_adf72372176d8a74b77ddc5a54db02048}{}\label{classns3_1_1TcpSocketBase_adf72372176d8a74b77ddc5a54db02048}
\hyperlink{classns3_1_1TracedCallback}{Traced\+Callback} signature for tcp packet transmission or reception events.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em packet} & The packet. \\
\hline
\mbox{\tt in}  & {\em ipv4} & \\
\hline
\mbox{\tt in}  & {\em interface} & \\
\hline
\end{DoxyParams}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Tcp\+Socket\+Base@{Tcp\+Socket\+Base}}
\index{Tcp\+Socket\+Base@{Tcp\+Socket\+Base}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Tcp\+Socket\+Base(void)}{TcpSocketBase(void)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Tcp\+Socket\+Base\+::\+Tcp\+Socket\+Base (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_a89e51540a8ac03d929349ae2ec56239b}{}\label{classns3_1_1TcpSocketBase_a89e51540a8ac03d929349ae2ec56239b}
Create an unbound T\+CP socket 
\begin{DoxyCode}
280   : \hyperlink{classns3_1_1TcpSocket_a70c351707b7af59abb6912cd7d145e60}{TcpSocket} (),
281     \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent} (),
282     \hyperlink{classns3_1_1TcpSocketBase_ac6933cbf3722ece8188d40a889c45649}{m\_lastAckEvent} (),
283     \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent} (),
284     \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent} (),
285     \hyperlink{classns3_1_1TcpSocketBase_a49b5b01bd6e824835859a9983465c9f2}{m\_timewaitEvent} (),
286     \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} (0),
287     \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} (0),
288     \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount} (0),
289     \hyperlink{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}{m\_noDelay} (\textcolor{keyword}{false}),
290     \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} (0),
291     \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries} (0),
292     \hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\_dataRetrCount} (0),
293     \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\_dataRetries} (0),
294     \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0)),
295     \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto} (\hyperlink{classns3_1_1Time_ad3414eb47d40a34971d5e78db88cfc72}{Time::Max} ()),
296     \hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.001)),
297     \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0)),
298     \hyperlink{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}{m\_delAckTimeout} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0)),
299     \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0)),
300     \hyperlink{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{m\_cnTimeout} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0)),
301     \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} (0),
302     \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} (0),
303     \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node} (0),
304     \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} (0),
305     \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt} (0),
306     \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer} (0),
307     \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer} (0),
308     \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} (\hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED}),
309     \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} (\hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaaa7eb006d73c5ad0117c5591fcb3469f7}{ERROR\_NOTERROR}),
310     \hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified} (\textcolor{keyword}{false}),
311     \hyperlink{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{m\_closeOnEmpty} (\textcolor{keyword}{false}),
312     \hyperlink{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{m\_shutdownSend} (\textcolor{keyword}{false}),
313     \hyperlink{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}{m\_shutdownRecv} (\textcolor{keyword}{false}),
314     \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected} (\textcolor{keyword}{false}),
315     \hyperlink{classns3_1_1TcpSocketBase_a668a2cc5cf751511263ee8a0766c9ea5}{m\_msl} (0),
316     \hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{m\_maxWinSize} (0),
317     \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd} (0),
318     \hyperlink{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}{m\_highRxMark} (0),
319     \hyperlink{classns3_1_1TcpSocketBase_a593fd39ccf865253c39bae9721263255}{m\_highTxAck} (0),
320     \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark} (0),
321     \hyperlink{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}{m\_bytesAckedNotProcessed} (0),
322     \hyperlink{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}{m\_bytesInFlight} (0),
323     \hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled} (\textcolor{keyword}{false}),
324     \hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{m\_winScalingEnabled} (\textcolor{keyword}{false}),
325     \hyperlink{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}{m\_rcvWindShift} (0),
326     \hyperlink{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}{m\_sndWindShift} (0),
327     \hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled} (\textcolor{keyword}{true}),
328     \hyperlink{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{m\_timestampToEcho} (0),
329     \hyperlink{classns3_1_1TcpSocketBase_a84be5c63b5ebf8e2452b43f9def59cab}{m\_sendPendingDataEvent} (),
330     \textcolor{comment}{// Set m\_recover to the initial sequence number}
331     \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover} (0),
332     \hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\_retxThresh} (3),
333     \hyperlink{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}{m\_limitedTx} (\textcolor{keyword}{false}),
334     \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl} (0),
335     \hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\_isFirstPartialAck} (\textcolor{keyword}{true})
336 \{
337   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
338   \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer} = CreateObject<TcpRxBuffer> ();
339   \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer} = CreateObject<TcpTxBuffer> ();
340   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}      = CreateObject<TcpSocketState> ();
341 
342   \textcolor{keywordtype}{bool} ok;
343 
344   ok = m\_tcb->\hyperlink{classns3_1_1ObjectBase_a1be45f6fd561e75dcac9dfa81b2b81e4}{TraceConnectWithoutContext} (\textcolor{stringliteral}{"CongestionWindow"},
345                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_af45fbd60c8ccde3357801e31e93e163d}{TcpSocketBase::UpdateCwnd}, \textcolor{keyword}{this}));
346   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
347 
348   ok = m\_tcb->TraceConnectWithoutContext (\textcolor{stringliteral}{"SlowStartThreshold"},
349                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_aa1abe21f8c190e2ab5a4b454ffc466e3}{TcpSocketBase::UpdateSsThresh}, \textcolor{keyword}{this}));
350   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
351 
352   ok = m\_tcb->TraceConnectWithoutContext (\textcolor{stringliteral}{"CongState"},
353                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_a8c31591889130527c14c4b2a5d0a2a4b}{TcpSocketBase::UpdateCongState}, \textcolor{keyword}{this}));
354   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
355 
356   ok = m\_tcb->TraceConnectWithoutContext (\textcolor{stringliteral}{"NextTxSequence"},
357                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_ad97775a4eaa42d5fea38ea20674889c4}{TcpSocketBase::UpdateNextTxSequence}, \textcolor{keyword}{this}));
358   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
359 
360   ok = m\_tcb->TraceConnectWithoutContext (\textcolor{stringliteral}{"HighestSequence"},
361                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_a4a2122af95f0f40965e4b8a894fd4814}{TcpSocketBase::UpdateHighTxMark}, \textcolor{keyword}{this}));
362   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
363 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Tcp\+Socket\+Base@{Tcp\+Socket\+Base}}
\index{Tcp\+Socket\+Base@{Tcp\+Socket\+Base}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Tcp\+Socket\+Base(const Tcp\+Socket\+Base \&sock)}{TcpSocketBase(const TcpSocketBase &sock)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Tcp\+Socket\+Base\+::\+Tcp\+Socket\+Base (
\begin{DoxyParamCaption}
\item[{const {\bf Tcp\+Socket\+Base} \&}]{sock}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_a88ad90b1dca7d8a470225c9351198736}{}\label{classns3_1_1TcpSocketBase_a88ad90b1dca7d8a470225c9351198736}
Clone a T\+CP socket, for use upon receiving a connection request in L\+I\+S\+T\+EN state


\begin{DoxyParams}{Parameters}
{\em sock} & the original Tcp \hyperlink{classns3_1_1Socket}{Socket} \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
366   : \hyperlink{classns3_1_1TcpSocket_a70c351707b7af59abb6912cd7d145e60}{TcpSocket} (sock),
367     \textcolor{comment}{//copy object::m\_tid and socket::callbacks}
368     \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} (sock.m\_dupAckCount),
369     \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} (0),
370     \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount} (sock.m\_delAckMaxCount),
371     \hyperlink{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}{m\_noDelay} (sock.m\_noDelay),
372     \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} (sock.m\_synCount),
373     \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries} (sock.m\_synRetries),
374     \hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\_dataRetrCount} (sock.m\_dataRetrCount),
375     \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\_dataRetries} (sock.m\_dataRetries),
376     \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} (sock.m\_rto),
377     \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto} (sock.m\_minRto),
378     \hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity} (sock.m\_clockGranularity),
379     \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt} (sock.m\_lastRtt),
380     \hyperlink{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}{m\_delAckTimeout} (sock.m\_delAckTimeout),
381     \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout} (sock.m\_persistTimeout),
382     \hyperlink{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{m\_cnTimeout} (sock.m\_cnTimeout),
383     \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} (0),
384     \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} (0),
385     \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node} (sock.m\_node),
386     \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} (sock.m\_tcp),
387     \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} (sock.m\_state),
388     \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} (sock.m\_errno),
389     \hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified} (sock.m\_closeNotified),
390     \hyperlink{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{m\_closeOnEmpty} (sock.m\_closeOnEmpty),
391     \hyperlink{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{m\_shutdownSend} (sock.m\_shutdownSend),
392     \hyperlink{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}{m\_shutdownRecv} (sock.m\_shutdownRecv),
393     \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected} (sock.m\_connected),
394     \hyperlink{classns3_1_1TcpSocketBase_a668a2cc5cf751511263ee8a0766c9ea5}{m\_msl} (sock.m\_msl),
395     \hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{m\_maxWinSize} (sock.m\_maxWinSize),
396     \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd} (sock.m\_rWnd),
397     \hyperlink{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}{m\_highRxMark} (sock.m\_highRxMark),
398     \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark} (sock.m\_highRxAckMark),
399     \hyperlink{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}{m\_bytesAckedNotProcessed} (sock.m\_bytesAckedNotProcessed),
400     \hyperlink{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}{m\_bytesInFlight} (sock.m\_bytesInFlight),
401     \hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled} (sock.m\_sackEnabled),
402     \hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{m\_winScalingEnabled} (sock.m\_winScalingEnabled),
403     \hyperlink{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}{m\_rcvWindShift} (sock.m\_rcvWindShift),
404     \hyperlink{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}{m\_sndWindShift} (sock.m\_sndWindShift),
405     \hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled} (sock.m\_timestampEnabled),
406     \hyperlink{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{m\_timestampToEcho} (sock.m\_timestampToEcho),
407     \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover} (sock.m\_recover),
408     \hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\_retxThresh} (sock.m\_retxThresh),
409     \hyperlink{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}{m\_limitedTx} (sock.m\_limitedTx),
410     \hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\_isFirstPartialAck} (sock.m\_isFirstPartialAck),
411     \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{m\_txTrace} (sock.m\_txTrace),
412     \hyperlink{classns3_1_1TcpSocketBase_a27b35f098b956baf89388fff0d4e539b}{m\_rxTrace} (sock.m\_rxTrace)
413 \{
414   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
415   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Invoked the copy constructor"});
416   \textcolor{comment}{// Copy the rtt estimator if it is set}
417   \textcolor{keywordflow}{if} (sock.m\_rtt)
418     \{
419       \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt} = sock.m\_rtt->Copy ();
420     \}
421   \textcolor{comment}{// Reset all callbacks to null}
422   Callback<void, Ptr< Socket > > vPS = MakeNullCallback<void, Ptr<Socket> > ();
423   Callback<void, Ptr<Socket>, \textcolor{keyword}{const} Address &> vPSA = MakeNullCallback<void, Ptr<Socket>, \textcolor{keyword}{const} Address &> 
      ();
424   Callback<void, Ptr<Socket>, uint32\_t> vPSUI = MakeNullCallback<void, Ptr<Socket>, uint32\_t> ();
425   \hyperlink{classns3_1_1Socket_a18935c615315a1921ea52c1b8c16be7f}{SetConnectCallback} (vPS, vPS);
426   \hyperlink{classns3_1_1Socket_a7857525a481afb48f485598a57c7f235}{SetDataSentCallback} (vPSUI);
427   \hyperlink{classns3_1_1Socket_a85ff5c8cc7d242823f301b49264c68a4}{SetSendCallback} (vPSUI);
428   \hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (vPS);
429   \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer} = \hyperlink{classns3_1_1Object_ae13320b2910618312ecdb81e62e0cff6}{CopyObject} (sock.m\_txBuffer);
430   \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer} = \hyperlink{classns3_1_1Object_ae13320b2910618312ecdb81e62e0cff6}{CopyObject} (sock.m\_rxBuffer);
431   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb} = \hyperlink{classns3_1_1Object_ae13320b2910618312ecdb81e62e0cff6}{CopyObject} (sock.m\_tcb);
432   \textcolor{keywordflow}{if} (sock.m\_congestionControl)
433     \{
434       \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl} = sock.m\_congestionControl->Fork ();
435     \}
436 
437   \textcolor{keywordtype}{bool} ok;
438 
439   ok = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1ObjectBase_a1be45f6fd561e75dcac9dfa81b2b81e4}{TraceConnectWithoutContext} (\textcolor{stringliteral}{"CongestionWindow"},
440                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_af45fbd60c8ccde3357801e31e93e163d}{TcpSocketBase::UpdateCwnd}, \textcolor{keyword}{this}));
441   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
442 
443   ok = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1ObjectBase_a1be45f6fd561e75dcac9dfa81b2b81e4}{TraceConnectWithoutContext} (\textcolor{stringliteral}{"SlowStartThreshold"},
444                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_aa1abe21f8c190e2ab5a4b454ffc466e3}{TcpSocketBase::UpdateSsThresh}, \textcolor{keyword}{this}));
445   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
446 
447   ok = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1ObjectBase_a1be45f6fd561e75dcac9dfa81b2b81e4}{TraceConnectWithoutContext} (\textcolor{stringliteral}{"CongState"},
448                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_a8c31591889130527c14c4b2a5d0a2a4b}{TcpSocketBase::UpdateCongState}, \textcolor{keyword}{this}));
449   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
450 
451   ok = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1ObjectBase_a1be45f6fd561e75dcac9dfa81b2b81e4}{TraceConnectWithoutContext} (\textcolor{stringliteral}{"NextTxSequence"},
452                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_ad97775a4eaa42d5fea38ea20674889c4}{TcpSocketBase::UpdateNextTxSequence}, \textcolor{keyword}{this}));
453   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
454 
455   ok = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1ObjectBase_a1be45f6fd561e75dcac9dfa81b2b81e4}{TraceConnectWithoutContext} (\textcolor{stringliteral}{"HighestSequence"},
456                                           \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_a4a2122af95f0f40965e4b8a894fd4814}{TcpSocketBase::UpdateHighTxMark}, \textcolor{keyword}{this}));
457   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ok == \textcolor{keyword}{true});
458 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!````~Tcp\+Socket\+Base@{$\sim$\+Tcp\+Socket\+Base}}
\index{````~Tcp\+Socket\+Base@{$\sim$\+Tcp\+Socket\+Base}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{$\sim$\+Tcp\+Socket\+Base(void)}{~TcpSocketBase(void)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Tcp\+Socket\+Base\+::$\sim$\+Tcp\+Socket\+Base (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a4b736ccb66957dbee78b4f7a27c082e4}{}\label{classns3_1_1TcpSocketBase_a4b736ccb66957dbee78b4f7a27c082e4}

\begin{DoxyCode}
461 \{
462   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
463   \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node} = 0;
464   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
465     \{
466       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} != 0);
467       \textcolor{comment}{/*}
468 \textcolor{comment}{       * Upon Bind, an Ipv4Endpoint is allocated and set to m\_endPoint, and}
469 \textcolor{comment}{       * DestroyCallback is set to TcpSocketBase::Destroy. If we called}
470 \textcolor{comment}{       * m\_tcp->DeAllocate, it wil destroy its Ipv4EndpointDemux::DeAllocate,}
471 \textcolor{comment}{       * which in turn destroys my m\_endPoint, and in turn invokes}
472 \textcolor{comment}{       * TcpSocketBase::Destroy to nullify m\_node, m\_endPoint, and m\_tcp.}
473 \textcolor{comment}{       */}
474       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0);
475       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->DeAllocate (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint});
476       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0);
477     \}
478   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} != 0)
479     \{
480       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} != 0);
481       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} != 0);
482       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->DeAllocate (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6});
483       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} == 0);
484     \}
485   \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} = 0;
486   \hyperlink{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{CancelAllTimers} ();
487 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




\subsection{Member Function Documentation}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Add\+Options@{Add\+Options}}
\index{Add\+Options@{Add\+Options}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Add\+Options(\+Tcp\+Header \&tcp\+Header)}{AddOptions(TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Add\+Options (
\begin{DoxyParamCaption}
\item[{{\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}{}\label{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}


Add options to \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header}. 

Test each option, and if it is enabled on our side, add it to the header


\begin{DoxyParams}{Parameters}
{\em tcp\+Header} & \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} to add options to \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3551 \{
3552   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << header);
3553 
3554   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled})
3555     \{
3556       \hyperlink{classns3_1_1TcpSocketBase_a62689196f68584e8731fb5c6b7693d30}{AddOptionTimestamp} (header);
3557     \}
3558 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5




Here is the caller graph for this function\+:
% FIG 6


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Add\+Option\+Sack@{Add\+Option\+Sack}}
\index{Add\+Option\+Sack@{Add\+Option\+Sack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Add\+Option\+Sack(\+Tcp\+Header \&header)}{AddOptionSack(TcpHeader &header)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Add\+Option\+Sack (
\begin{DoxyParamCaption}
\item[{{\bf Tcp\+Header} \&}]{header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a009a4dcad47330a47e5b829918fb9140}{}\label{classns3_1_1TcpSocketBase_a009a4dcad47330a47e5b829918fb9140}


Add the S\+A\+CK option to the header. 


\begin{DoxyParams}{Parameters}
{\em header} & \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} where the method should add the option \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3659 \{
3660   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << header);
3661 
3662   \textcolor{comment}{// Calculate the number of SACK blocks allowed in this packet}
3663   uint8\_t optionLenAvail = header.GetMaxOptionLength () - header.GetOptionLength ();
3664   uint8\_t allowedSackBlocks = (optionLenAvail - 2) / 8;
3665 
3666   \hyperlink{classns3_1_1TcpOptionSack_a2aa2d721c71424680d79ebaa079f264a}{TcpOptionSack::SackList} sackList = \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->GetSackList ();
3667   \textcolor{keywordflow}{if} (allowedSackBlocks == 0 || sackList.empty ())
3668     \{
3669       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"No space available or sack list empty, not adding sack blocks"});
3670       \textcolor{keywordflow}{return};
3671     \}
3672 
3673   \textcolor{comment}{// Append the allowed number of SACK blocks}
3674   Ptr<TcpOptionSack> option = CreateObject<TcpOptionSack> ();
3675   TcpOptionSack::SackList::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i};
3676   \textcolor{keywordflow}{for} (i = sackList.begin (); allowedSackBlocks > 0 && i != sackList.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
3677     \{
3678       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Left edge of the block: "} << (*i).first << \textcolor{stringliteral}{" Right edge of the block: "} <<
       (*i).second);
3679       option->AddSackBlock (*i);
3680       allowedSackBlocks--;
3681     \}
3682 
3683   header.AppendOption (option);
3684   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" Add option SACK"});
3685 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Add\+Option\+Sack\+Permitted@{Add\+Option\+Sack\+Permitted}}
\index{Add\+Option\+Sack\+Permitted@{Add\+Option\+Sack\+Permitted}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Add\+Option\+Sack\+Permitted(\+Tcp\+Header \&header)}{AddOptionSackPermitted(TcpHeader &header)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Add\+Option\+Sack\+Permitted (
\begin{DoxyParamCaption}
\item[{{\bf Tcp\+Header} \&}]{header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a470e7b2406d76319c457f2fdf5ff0699}{}\label{classns3_1_1TcpSocketBase_a470e7b2406d76319c457f2fdf5ff0699}


Add the S\+A\+CK P\+E\+R\+M\+I\+T\+T\+ED option to the header. 


\begin{DoxyParams}{Parameters}
{\em header} & \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} where the method should add the option \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3648 \{
3649   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << header);
3650   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (header.GetFlags () & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN});
3651 
3652   Ptr<TcpOptionSackPermitted> option = CreateObject<TcpOptionSackPermitted> ();
3653   header.AppendOption (option);
3654   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" Add option SACK-PERMITTED"});
3655 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Add\+Option\+Timestamp@{Add\+Option\+Timestamp}}
\index{Add\+Option\+Timestamp@{Add\+Option\+Timestamp}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Add\+Option\+Timestamp(\+Tcp\+Header \&header)}{AddOptionTimestamp(TcpHeader &header)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Add\+Option\+Timestamp (
\begin{DoxyParamCaption}
\item[{{\bf Tcp\+Header} \&}]{header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a62689196f68584e8731fb5c6b7693d30}{}\label{classns3_1_1TcpSocketBase_a62689196f68584e8731fb5c6b7693d30}


Add the timestamp option to the header. 

Set the timestamp as the lower bits of the \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator\+::\+Now} time, and the echo value as the last seen timestamp from the other part.


\begin{DoxyParams}{Parameters}
{\em header} & \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} to which add the option to \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3709 \{
3710   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << header);
3711 
3712   Ptr<TcpOptionTS> option = CreateObject<TcpOptionTS> ();
3713 
3714   option->SetTimestamp (\hyperlink{classns3_1_1TcpOptionTS_aa4a0e1a584d5cd3be873173cb686e069}{TcpOptionTS::NowToTsValue} ());
3715   option->SetEcho (\hyperlink{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{m\_timestampToEcho});
3716 
3717   header.AppendOption (option);
3718   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" Add option TS, ts="} <<
3719                option->GetTimestamp () << \textcolor{stringliteral}{" echo="} << \hyperlink{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{m\_timestampToEcho});
3720 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Add\+Option\+W\+Scale@{Add\+Option\+W\+Scale}}
\index{Add\+Option\+W\+Scale@{Add\+Option\+W\+Scale}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Add\+Option\+W\+Scale(\+Tcp\+Header \&header)}{AddOptionWScale(TcpHeader &header)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Add\+Option\+W\+Scale (
\begin{DoxyParamCaption}
\item[{{\bf Tcp\+Header} \&}]{header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aa749dc3f6287c79a2ad39cb306220663}{}\label{classns3_1_1TcpSocketBase_aa749dc3f6287c79a2ad39cb306220663}


Add the window scale option to the header. 

Calculate our factor from the rx\+Buffer max size, and add it to the header.


\begin{DoxyParams}{Parameters}
{\em header} & \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} where the method should add the window scale option \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3607 \{
3608   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << header);
3609   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (header.GetFlags () & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN});
3610 
3611   Ptr<TcpOptionWinScale> option = CreateObject<TcpOptionWinScale> ();
3612 
3613   \textcolor{comment}{// In naming, we do the contrary of RFC 1323. The sended scaling factor}
3614   \textcolor{comment}{// is Snd.Wind.Scale (and not Rcv.Wind.Scale)}
3615 
3616   \hyperlink{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}{m\_rcvWindShift} = \hyperlink{classns3_1_1TcpSocketBase_a53856cbb5c7e49324f5428da7b9f0c74}{CalculateWScale} ();
3617   option->SetScale (m\_rcvWindShift);
3618 
3619   header.AppendOption (option);
3620 
3621   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" Send a scaling factor of "} <<
3622                \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>} (\hyperlink{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}{m\_rcvWindShift}));
3623 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Advertised\+Window\+Size@{Advertised\+Window\+Size}}
\index{Advertised\+Window\+Size@{Advertised\+Window\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Advertised\+Window\+Size(bool scale=true) const }{AdvertisedWindowSize(bool scale=true) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Advertised\+Window\+Size (
\begin{DoxyParamCaption}
\item[{bool}]{scale = {\ttfamily true}}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{}\label{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}


The amount of Rx window announced to the peer. 


\begin{DoxyParams}{Parameters}
{\em scale} & indicate if the window should be scaled. True for almost all cases, except when we are sending a S\+YN \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of Rx window announced to the peer 
\end{DoxyReturn}


Reimplemented in \hyperlink{classTcpSocketAdvertisedWindowProxy_a79348b8b48a47b87d0dcaa59b3d8ee1d}{Tcp\+Socket\+Advertised\+Window\+Proxy}.


\begin{DoxyCode}
2958 \{
2959   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << scale);
2960   uint32\_t \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_afd61ec66f9d7b807eece6eb12c781844}{w} = (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxRxSequence () > \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ()) ?
2961     \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxRxSequence () - \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () : 0;
2962 
2963   \textcolor{comment}{// We don't want to advertise 0 after a FIN is received. So, we just use}
2964   \textcolor{comment}{// the previous value of the advWnd.}
2965   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Finished ())
2966     \{
2967       w = \hyperlink{classns3_1_1TcpSocketBase_a12a1c017e48895fbe36df0d54a509041}{m\_advWnd};
2968     \}
2969 
2970   \textcolor{comment}{// Ugly, but we are not modifying the state, that variable}
2971   \textcolor{comment}{// is used only for tracing purpose.}
2972   \textcolor{keywordflow}{if} (w != \hyperlink{classns3_1_1TcpSocketBase_a12a1c017e48895fbe36df0d54a509041}{m\_advWnd})
2973     \{
2974       \textcolor{keyword}{const\_cast<}\hyperlink{classns3_1_1TcpSocketBase_a89e51540a8ac03d929349ae2ec56239b}{TcpSocketBase}*\textcolor{keyword}{>} (\textcolor{keyword}{this})->\hyperlink{classns3_1_1TcpSocketBase_a12a1c017e48895fbe36df0d54a509041}{m\_advWnd} = w;
2975     \}
2976   \textcolor{keywordflow}{if} (scale)
2977     \{
2978       w >>= \hyperlink{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}{m\_rcvWindShift};
2979     \}
2980   \textcolor{keywordflow}{if} (w > \hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{m\_maxWinSize})
2981     \{
2982       w = \hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{m\_maxWinSize};
2983       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Adv window size truncated to "} << \hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{m\_maxWinSize} << \textcolor{stringliteral}{"; possibly to
       avoid overflow of the 16-bit integer"});
2984     \}
2985   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Returning AdvertisedWindowSize of "} << static\_cast<uint16\_t> (w));
2986   \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>} (\hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_afd61ec66f9d7b807eece6eb12c781844}{w});
2987 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 15


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Available\+Window@{Available\+Window}}
\index{Available\+Window@{Available\+Window}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Available\+Window(void) const }{AvailableWindow(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Available\+Window (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_add825047dd7c82046d42087e29b7c5b7}{}\label{classns3_1_1TcpSocketBase_add825047dd7c82046d42087e29b7c5b7}


Return unfilled portion of window. 

\begin{DoxyReturn}{Returns}
unfilled portion of window 
\end{DoxyReturn}

\begin{DoxyCode}
2941 \{
2942   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
2943   uint32\_t inflight = \hyperlink{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{BytesInFlight} (); \textcolor{comment}{// Number of outstanding bytes}
2944   uint32\_t win = \hyperlink{classns3_1_1TcpSocketBase_a820d022945d4fa0494712d7ed5868091}{Window} ();             \textcolor{comment}{// Number of bytes allowed to be outstanding}
2945 
2946   \textcolor{keywordflow}{if} (inflight > win)
2947     \{
2948       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"InFlight="} << inflight << \textcolor{stringliteral}{", Win="} << win << \textcolor{stringliteral}{" availWin=0"});
2949       \textcolor{keywordflow}{return} 0;
2950     \}
2951 
2952   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"InFlight="} << inflight << \textcolor{stringliteral}{", Win="} << win << \textcolor{stringliteral}{" availWin="} << win-inflight);
2953   \textcolor{keywordflow}{return} win - inflight;
2954 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16




Here is the caller graph for this function\+:
% FIG 17


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Bind@{Bind}}
\index{Bind@{Bind}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Bind(void)}{Bind(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Bind (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{}\label{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}


Allocate a local I\+Pv4 endpoint for this socket. 

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on failure. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_a680c1edd8b3ec3adf4085e1ded1e8a0d}{ns3\+::\+Socket}.


\begin{DoxyCode}
535 \{
536   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
537   \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate ();
538   \textcolor{keywordflow}{if} (0 == \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
539     \{
540       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaae6ddc4aa97ebe6f3f71688337c9d3117}{ERROR\_ADDRNOTAVAIL};
541       \textcolor{keywordflow}{return} -1;
542     \}
543 
544   \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->AddSocket (\textcolor{keyword}{this});
545 
546   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{SetupCallback} ();
547 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 18




Here is the caller graph for this function\+:
% FIG 19


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Bind@{Bind}}
\index{Bind@{Bind}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Bind(const Address \&address)}{Bind(const Address &address)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Bind (
\begin{DoxyParamCaption}
\item[{const {\bf Address} \&}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a86469a9087181185895314d8da713f35}{}\label{classns3_1_1TcpSocketBase_a86469a9087181185895314d8da713f35}


Allocate a local endpoint for this socket. 


\begin{DoxyParams}{Parameters}
{\em address} & the address to try to allocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 on failure. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{ns3\+::\+Socket}.


\begin{DoxyCode}
568 \{
569   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << address);
570   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1InetSocketAddress_a9426766e34e928ce5dbdbeb9563a10df}{InetSocketAddress::IsMatchingType} (address))
571     \{
572       InetSocketAddress transport = \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (address);
573       Ipv4Address ipv4 = transport.GetIpv4 ();
574       uint16\_t \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = transport.GetPort ();
575       \hyperlink{classns3_1_1Socket_a2a21a2d166ec2adf766b84d984d1cf65}{SetIpTos} (transport.GetTos ());
576       \textcolor{keywordflow}{if} (ipv4 == \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} () && port == 0)
577         \{
578           \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate ();
579         \}
580       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ipv4 == \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} () && port != 0)
581         \{
582           \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate (port);
583         \}
584       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ipv4 != \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} () && port == 0)
585         \{
586           \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate (ipv4);
587         \}
588       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ipv4 != \hyperlink{classns3_1_1Ipv4Address_a7a39b330c8e701183a411d5779fca1a4}{Ipv4Address::GetAny} () && port != 0)
589         \{
590           \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate (ipv4, port);
591         \}
592       \textcolor{keywordflow}{if} (0 == \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
593         \{
594           \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = port ? \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaa5ed359ef348d4ee7d288881b74cca81a}{ERROR\_ADDRINUSE} : 
      \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaae6ddc4aa97ebe6f3f71688337c9d3117}{ERROR\_ADDRNOTAVAIL};
595           \textcolor{keywordflow}{return} -1;
596         \}
597     \}
598   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Inet6SocketAddress_a4d928c54affbfb530a12076d6d7e0540}{Inet6SocketAddress::IsMatchingType} (address))
599     \{
600       Inet6SocketAddress transport = \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (
      address);
601       Ipv6Address ipv6 = transport.GetIpv6 ();
602       uint16\_t port = transport.GetPort ();
603       \textcolor{keywordflow}{if} (ipv6 == \hyperlink{classns3_1_1Ipv6Address_a2783e8badfc98c8b0a8508bba6e1b91e}{Ipv6Address::GetAny} () && port == 0)
604         \{
605           \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate6 ();
606         \}
607       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ipv6 == \hyperlink{classns3_1_1Ipv6Address_a2783e8badfc98c8b0a8508bba6e1b91e}{Ipv6Address::GetAny} () && port != 0)
608         \{
609           \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate6 (port);
610         \}
611       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ipv6 != \hyperlink{classns3_1_1Ipv6Address_a2783e8badfc98c8b0a8508bba6e1b91e}{Ipv6Address::GetAny} () && port == 0)
612         \{
613           \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate6 (ipv6);
614         \}
615       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ipv6 != \hyperlink{classns3_1_1Ipv6Address_a2783e8badfc98c8b0a8508bba6e1b91e}{Ipv6Address::GetAny} () && port != 0)
616         \{
617           \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate6 (ipv6, port);
618         \}
619       \textcolor{keywordflow}{if} (0 == \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6})
620         \{
621           \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = port ? \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaa5ed359ef348d4ee7d288881b74cca81a}{ERROR\_ADDRINUSE} : 
      \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaae6ddc4aa97ebe6f3f71688337c9d3117}{ERROR\_ADDRNOTAVAIL};
622           \textcolor{keywordflow}{return} -1;
623         \}
624     \}
625   \textcolor{keywordflow}{else}
626     \{
627       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaa4b98dd50740861229f8e03bcc36d379b}{ERROR\_INVAL};
628       \textcolor{keywordflow}{return} -1;
629     \}
630 
631   \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->AddSocket (\textcolor{keyword}{this});
632 
633   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"TcpSocketBase "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" got an endpoint: "} << 
      \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint});
634 
635   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{SetupCallback} ();
636 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Bind6@{Bind6}}
\index{Bind6@{Bind6}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Bind6(void)}{Bind6(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Bind6 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_abe62bb701ac4f057199d5c34938a96a9}{}\label{classns3_1_1TcpSocketBase_abe62bb701ac4f057199d5c34938a96a9}


Allocate a local I\+Pv6 endpoint for this socket. 

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on failure. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_a68a4f2bcd38dec94d5a6fd4d867a1f19}{ns3\+::\+Socket}.


\begin{DoxyCode}
551 \{
552   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
553   \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate6 ();
554   \textcolor{keywordflow}{if} (0 == \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6})
555     \{
556       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaae6ddc4aa97ebe6f3f71688337c9d3117}{ERROR\_ADDRNOTAVAIL};
557       \textcolor{keywordflow}{return} -1;
558     \}
559 
560   \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->AddSocket (\textcolor{keyword}{this});
561 
562   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{SetupCallback} ();
563 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21




Here is the caller graph for this function\+:
% FIG 22


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Bind\+To\+Net\+Device@{Bind\+To\+Net\+Device}}
\index{Bind\+To\+Net\+Device@{Bind\+To\+Net\+Device}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Bind\+To\+Net\+Device(\+Ptr$<$ Net\+Device $>$ netdevice)}{BindToNetDevice(Ptr< NetDevice > netdevice)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Bind\+To\+Net\+Device (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{netdevice}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a88b552dfa0a85e0224ed8a7dc140f190}{}\label{classns3_1_1TcpSocketBase_a88b552dfa0a85e0224ed8a7dc140f190}


Bind a socket to specific device. 

This method corresponds to using setsockopt() S\+O\+\_\+\+B\+I\+N\+D\+T\+O\+D\+E\+V\+I\+CE of real network or B\+SD sockets. If set on a socket, this option will force packets to leave the bound device regardless of the device that IP routing would naturally choose. In the receive direction, only packets received from the bound interface will be delivered.

This option has no particular relationship to binding sockets to an address via \hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Socket\+::\+Bind} (). It is possible to bind sockets to a specific IP address on the bound interface by calling both \hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Socket\+::\+Bind} (address) and \hyperlink{classns3_1_1Socket_a9952cd10a2c8c108846027108cc9e44e}{Socket\+::\+Bind\+To\+Net\+Device} (device), but it is also possible to bind to mismatching device and address, even if the socket can not receive any packets as a result.

\begin{DoxyWarning}{Warning}
Bind\+To\+Net\+Device should be used {\itshape after} Bind. Otherwise it will perform a Bind itself.
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em netdevice} & Pointer to Netdevice of desired interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
nothing 
\end{DoxyReturn}


Reimplemented from \hyperlink{classns3_1_1Socket_a9952cd10a2c8c108846027108cc9e44e}{ns3\+::\+Socket}.


\begin{DoxyCode}
991 \{
992   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (netdevice);
993   \hyperlink{classns3_1_1Socket_a9952cd10a2c8c108846027108cc9e44e}{Socket::BindToNetDevice} (netdevice); \textcolor{comment}{// Includes sanity check}
994   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0)
995     \{
996       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind} () == -1)
997         \{
998           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0);
999           \textcolor{keywordflow}{return};
1000         \}
1001       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0);
1002     \}
1003   \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0f4a3c34e81be074385dbbb7c19e17b6}{BindToNetDevice} (netdevice);
1004 
1005   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} == 0)
1006     \{
1007       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_abe62bb701ac4f057199d5c34938a96a9}{Bind6} () == -1)
1008         \{
1009           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} == 0);
1010           \textcolor{keywordflow}{return};
1011         \}
1012       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} != 0);
1013     \}
1014   \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa8bfe996727cd7064564a9fbd34cd0f5}{BindToNetDevice} (netdevice);
1015 
1016   \textcolor{keywordflow}{return};
1017 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Bytes\+In\+Flight@{Bytes\+In\+Flight}}
\index{Bytes\+In\+Flight@{Bytes\+In\+Flight}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Bytes\+In\+Flight(void) const }{BytesInFlight(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Bytes\+In\+Flight (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{}\label{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}


Return total bytes in flight. 

Does not count segments lost and S\+A\+C\+Ked (or dup\+A\+C\+Ked)

\begin{DoxyReturn}{Returns}
total bytes in flight 
\end{DoxyReturn}

\begin{DoxyCode}
2910 \{
2911   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2912   \textcolor{comment}{// Previous (see bug 1783):}
2913   \textcolor{comment}{// uint32\_t bytesInFlight = m\_highTxMark.Get () - m\_txBuffer->HeadSequence ();}
2914   \textcolor{comment}{// RFC 4898 page 23}
2915   \textcolor{comment}{// PipeSize=SND.NXT-SND.UNA+(retransmits-dupacks)*CurMSS}
2916 
2917   \textcolor{comment}{// flightSize == UnAckDataCount (), but we avoid the call to save log lines}
2918   uint32\_t bytesInFlight = \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->BytesInFlight (\hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\_retxThresh}, 
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize});
2919 
2920   \textcolor{comment}{// m\_bytesInFlight is traced; avoid useless assignments which would fire}
2921   \textcolor{comment}{// fruitlessly the callback}
2922   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}{m\_bytesInFlight} != bytesInFlight)
2923     \{
2924       \textcolor{comment}{// Ugly, but we are not modifying the state; m\_bytesInFlight is used}
2925       \textcolor{comment}{// only for tracing purpose.}
2926       \textcolor{keyword}{const\_cast<}\hyperlink{classns3_1_1TcpSocketBase_a89e51540a8ac03d929349ae2ec56239b}{TcpSocketBase}*\textcolor{keyword}{>} (\textcolor{keyword}{this})->\hyperlink{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}{m\_bytesInFlight} = bytesInFlight;
2927     \}
2928 
2929   \textcolor{keywordflow}{return} bytesInFlight;
2930 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 24


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Calculate\+W\+Scale@{Calculate\+W\+Scale}}
\index{Calculate\+W\+Scale@{Calculate\+W\+Scale}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Calculate\+W\+Scale() const }{CalculateWScale() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Calculate\+W\+Scale (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a53856cbb5c7e49324f5428da7b9f0c74}{}\label{classns3_1_1TcpSocketBase_a53856cbb5c7e49324f5428da7b9f0c74}


Calculate window scale value based on receive buffer space. 

Calculate our factor from the rx\+Buffer max size

\begin{DoxyReturn}{Returns}
the Window Scale factor 
\end{DoxyReturn}

\begin{DoxyCode}
3583 \{
3584   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
3585   uint32\_t maxSpace = \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxBufferSize ();
3586   uint8\_t scale = 0;
3587 
3588   \textcolor{keywordflow}{while} (maxSpace > \hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{m\_maxWinSize})
3589     \{
3590       maxSpace = maxSpace >> 1;
3591       ++scale;
3592     \}
3593 
3594   \textcolor{keywordflow}{if} (scale > 14)
3595     \{
3596       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Possible error; scale exceeds 14: "} << scale);
3597       scale = 14;
3598     \}
3599 
3600   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Node "} << \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" calculated wscale factor of "} <<
3601                \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>} (scale) << \textcolor{stringliteral}{" for buffer size "} << \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxBufferSize ());
3602   \textcolor{keywordflow}{return} scale;
3603 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 25




Here is the caller graph for this function\+:
% FIG 26


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Cancel\+All\+Timers@{Cancel\+All\+Timers}}
\index{Cancel\+All\+Timers@{Cancel\+All\+Timers}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Cancel\+All\+Timers(void)}{CancelAllTimers(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Cancel\+All\+Timers (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{}\label{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}


Cancel all timer when endpoint is deleted. 


\begin{DoxyCode}
3369 \{
3370   \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3371   \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3372   \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3373   \hyperlink{classns3_1_1TcpSocketBase_ac6933cbf3722ece8188d40a889c45649}{m\_lastAckEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3374   \hyperlink{classns3_1_1TcpSocketBase_a49b5b01bd6e824835859a9983465c9f2}{m\_timewaitEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3375   \hyperlink{classns3_1_1TcpSocketBase_a84be5c63b5ebf8e2452b43f9def59cab}{m\_sendPendingDataEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3376 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27




Here is the caller graph for this function\+:
% FIG 28


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Close@{Close}}
\index{Close@{Close}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Close(void)}{Close(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Close (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_adab0076d02811c29ea9ced8b10e7a878}{}\label{classns3_1_1TcpSocketBase_adab0076d02811c29ea9ced8b10e7a878}


Close a socket. 

\begin{DoxyReturn}{Returns}
zero on success, -\/1 on failure.
\end{DoxyReturn}
After the Close call, the socket is no longer valid, and cannot safely be used for subsequent operations. 

Implements \hyperlink{classns3_1_1Socket_abdac6e2498c5aa2963ef361d4200ddf3}{ns3\+::\+Socket}.


\begin{DoxyCode}
765 \{
766   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
770   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Size () != 0)
771     \{
772       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Socket "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" << unread rx data during close.  Sending reset."} <<
773                    \textcolor{stringliteral}{"This is probably due to a bad sink application; check its code"});
774       \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
775       \textcolor{keywordflow}{return} 0;
776     \}
777 
778   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SizeFromSequence (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence}) > 0)
779     \{ \textcolor{comment}{// App close with pending data must wait until all data transmitted}
780       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{m\_closeOnEmpty} == \textcolor{keyword}{false})
781         \{
782           \hyperlink{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{m\_closeOnEmpty} = \textcolor{keyword}{true};
783           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Socket "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" deferring close, state "} << 
      \hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}]);
784         \}
785       \textcolor{keywordflow}{return} 0;
786     \}
787   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_adfc92c152f498c918cd73d4b31579472}{DoClose} ();
788 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 29




Here is the caller graph for this function\+:
% FIG 30


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Close\+And\+Notify@{Close\+And\+Notify}}
\index{Close\+And\+Notify@{Close\+And\+Notify}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Close\+And\+Notify(void)}{CloseAndNotify(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Close\+And\+Notify (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{}\label{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}


Peacefully close the socket by notifying the upper layer and deallocate end point. 


\begin{DoxyCode}
1113 \{
1114   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1115 
1116   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified})
1117     \{
1118       \hyperlink{classns3_1_1Socket_a6bdec380c7dacff36147b89a05ceae84}{NotifyNormalClose} ();
1119       \hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified} = \textcolor{keyword}{true};
1120     \}
1121 
1122   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}] << \textcolor{stringliteral}{" -> CLOSED"});
1123   \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED};
1124   \hyperlink{classns3_1_1TcpSocketBase_a53791738228495d40197679dbc057392}{DeallocateEndPoint} ();
1125 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 31




Here is the caller graph for this function\+:
% FIG 32


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Complete\+Fork@{Complete\+Fork}}
\index{Complete\+Fork@{Complete\+Fork}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Complete\+Fork(\+Ptr$<$ Packet $>$ p, const Tcp\+Header \&tcp\+Header, const Address \&from\+Address, const Address \&to\+Address)}{CompleteFork(Ptr< Packet > p, const TcpHeader &tcpHeader, const Address &fromAddress, const Address &toAddress)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Complete\+Fork (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{p, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header, }
\item[{const {\bf Address} \&}]{from\+Address, }
\item[{const {\bf Address} \&}]{to\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_abba7d4c43acb3f9356e348b970a882fb}{}\label{classns3_1_1TcpSocketBase_abba7d4c43acb3f9356e348b970a882fb}


Complete a connection by forking the socket. 

This function is called only if a S\+YN received in L\+I\+S\+T\+EN state. After \hyperlink{classns3_1_1TcpSocketBase}{Tcp\+Socket\+Base} cloned, allocate a new end point to handle the incoming connection and send a S\+Y\+N+\+A\+CK to complete the handshake.


\begin{DoxyParams}{Parameters}
{\em p} & the packet triggering the fork \\
\hline
{\em tcp\+Header} & the T\+CP header of the triggering packet \\
\hline
{\em from\+Address} & the address of the remote host \\
\hline
{\em to\+Address} & the address the connection is directed to \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{classns3_1_1TcpSocketMsgBase_a1509ce6df2f3e5384889f03b5de06a45}{ns3\+::\+Tcp\+Socket\+Msg\+Base}.


\begin{DoxyCode}
2576 \{
2577   \textcolor{comment}{// Get port and address from peer (connecting host)}
2578   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1InetSocketAddress_a9426766e34e928ce5dbdbeb9563a10df}{InetSocketAddress::IsMatchingType} (toAddress))
2579     \{
2580       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate (
      \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (toAddress).GetIpv4 (),
2581                                     \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (toAddress
      ).GetPort (),
2582                                     \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (
      fromAddress).GetIpv4 (),
2583                                     \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (
      fromAddress).GetPort ());
2584       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = 0;
2585     \}
2586   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Inet6SocketAddress_a4d928c54affbfb530a12076d6d7e0540}{Inet6SocketAddress::IsMatchingType} (toAddress))
2587     \{
2588       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->Allocate6 (
      \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (toAddress).GetIpv6 (),
2589                                       \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (
      toAddress).GetPort (),
2590                                       \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (
      fromAddress).GetIpv6 (),
2591                                       \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (
      fromAddress).GetPort ());
2592       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = 0;
2593     \}
2594   \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->AddSocket (\textcolor{keyword}{this});
2595 
2596   \textcolor{comment}{// Change the cloned socket from LISTEN state to SYN\_RCVD}
2597   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"LISTEN -> SYN\_RCVD"});
2598   \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03abdb50eab9f592a17a412a62deddde11a}{SYN\_RCVD};
2599   \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} = \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries};
2600   \hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\_dataRetrCount} = \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\_dataRetries};
2601   \hyperlink{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{SetupCallback} ();
2602   \textcolor{comment}{// Set the sequence number and send SYN+ACK}
2603   \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->SetNextRxSequence (h.GetSequenceNumber () + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1));
2604 
2605   \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
2606 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 33




Here is the caller graph for this function\+:
% FIG 34


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Connect@{Connect}}
\index{Connect@{Connect}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Connect(const Address \&address)}{Connect(const Address &address)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Connect (
\begin{DoxyParamCaption}
\item[{const {\bf Address} \&}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}{}\label{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}


Initiate a connection to a remote host. 


\begin{DoxyParams}{Parameters}
{\em address} & \hyperlink{classns3_1_1Address}{Address} of remote. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error (in which case errno is set). 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_a97f08aaf37b8fd7d4b5cad4dfdd4022a}{ns3\+::\+Socket}.


\begin{DoxyCode}
671 \{
672   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << address);
673 
674   \textcolor{comment}{// If haven't do so, Bind() this socket first}
675   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1InetSocketAddress_a9426766e34e928ce5dbdbeb9563a10df}{InetSocketAddress::IsMatchingType} (address))
676     \{
677       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0)
678         \{
679           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind} () == -1)
680             \{
681               \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0);
682               \textcolor{keywordflow}{return} -1; \textcolor{comment}{// Bind() failed}
683             \}
684           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0);
685         \}
686       InetSocketAddress transport = \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (address);
687       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aa83bdb487bea8b5d9643c3f2efd0289f}{SetPeer} (transport.GetIpv4 (), transport.GetPort ());
688       \hyperlink{classns3_1_1Socket_a2a21a2d166ec2adf766b84d984d1cf65}{SetIpTos} (transport.GetTos ());
689       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = 0;
690 
691       \textcolor{comment}{// Get the appropriate local address and port number from the routing protocol and set up endpoint}
692       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_aa1e2094be5e9653b9d8d8d76b7ec670f}{SetupEndpoint} () != 0)
693         \{
694           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Route to destination does not exist ?!"});
695           \textcolor{keywordflow}{return} -1;
696         \}
697     \}
698   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Inet6SocketAddress_a4d928c54affbfb530a12076d6d7e0540}{Inet6SocketAddress::IsMatchingType} (address))
699     \{
700       \textcolor{comment}{// If we are operating on a v4-mapped address, translate the address to}
701       \textcolor{comment}{// a v4 address and re-call this function}
702       Inet6SocketAddress transport = \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (
      address);
703       Ipv6Address v6Addr = transport.GetIpv6 ();
704       \textcolor{keywordflow}{if} (v6Addr.IsIpv4MappedAddress () == \textcolor{keyword}{true})
705         \{
706           Ipv4Address v4Addr = v6Addr.GetIpv4MappedAddress ();
707           \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}{Connect} (InetSocketAddress (v4Addr, transport.GetPort ()));
708         \}
709 
710       \textcolor{keywordflow}{if} (m\_endPoint6 == 0)
711         \{
712           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_abe62bb701ac4f057199d5c34938a96a9}{Bind6} () == -1)
713             \{
714               \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (m\_endPoint6 == 0);
715               \textcolor{keywordflow}{return} -1; \textcolor{comment}{// Bind() failed}
716             \}
717           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (m\_endPoint6 != 0);
718         \}
719       m\_endPoint6->SetPeer (v6Addr, transport.GetPort ());
720       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = 0;
721 
722       \textcolor{comment}{// Get the appropriate local address and port number from the routing protocol and set up endpoint}
723       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_afe98eecb266502ddd1fdbcfa37442b7a}{SetupEndpoint6} () != 0)
724         \{
725           \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Route to destination does not exist ?!"});
726           \textcolor{keywordflow}{return} -1;
727         \}
728     \}
729   \textcolor{keywordflow}{else}
730     \{
731       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaa4b98dd50740861229f8e03bcc36d379b}{ERROR\_INVAL};
732       \textcolor{keywordflow}{return} -1;
733     \}
734 
735   \textcolor{comment}{// Re-initialize parameters in case this socket is being reused after CLOSE}
736   \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->Reset ();
737   \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} = \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries};
738   \hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\_dataRetrCount} = \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\_dataRetries};
739 
740   \textcolor{comment}{// DoConnect() will do state-checking and send a SYN packet}
741   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_ac07945f77be2c49f0c1712ea56322493}{DoConnect} ();
742 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 35


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Connection\+Succeeded@{Connection\+Succeeded}}
\index{Connection\+Succeeded@{Connection\+Succeeded}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Connection\+Succeeded(void)}{ConnectionSucceeded(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Connection\+Succeeded (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a324311b484cc258ae61fbd7bcfbeeb7e}{}\label{classns3_1_1TcpSocketBase_a324311b484cc258ae61fbd7bcfbeeb7e}


Schedule-\/friendly wrapper for \hyperlink{classns3_1_1Socket_a2f55d195304131b356818bc74134c5a7}{Socket\+::\+Notify\+Connection\+Succeeded()} 


\begin{DoxyCode}
2610 \{ \textcolor{comment}{// Wrapper to protected function NotifyConnectionSucceeded() so that it can}
2611   \textcolor{comment}{// be called as a scheduled event}
2612   \hyperlink{classns3_1_1Socket_a2f55d195304131b356818bc74134c5a7}{NotifyConnectionSucceeded} ();
2613   \textcolor{comment}{// The if-block below was moved from ProcessSynSent() to here because we need}
2614   \textcolor{comment}{// to invoke the NotifySend() only after NotifyConnectionSucceeded() to}
2615   \textcolor{comment}{// reflect the behaviour in the real world.}
2616   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{GetTxAvailable} () > 0)
2617     \{
2618       \hyperlink{classns3_1_1Socket_a34cd5de5b9feeadd6ba8973b954c3d5f}{NotifySend} (\hyperlink{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{GetTxAvailable} ());
2619     \}
2620 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 36




Here is the caller graph for this function\+:
% FIG 37


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Deallocate\+End\+Point@{Deallocate\+End\+Point}}
\index{Deallocate\+End\+Point@{Deallocate\+End\+Point}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Deallocate\+End\+Point(void)}{DeallocateEndPoint(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Deallocate\+End\+Point (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a53791738228495d40197679dbc057392}{}\label{classns3_1_1TcpSocketBase_a53791738228495d40197679dbc057392}


Deallocate m\+\_\+end\+Point and m\+\_\+end\+Point6. 


\begin{DoxyCode}
2490 \{
2491   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
2492     \{
2493       \hyperlink{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{CancelAllTimers} ();
2494       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a19ec16d98c501d3684e6549d7296ea0a}{SetDestroyCallback} (MakeNullCallback<void> ());
2495       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->DeAllocate (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint});
2496       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = 0;
2497       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->RemoveSocket (\textcolor{keyword}{this});
2498     \}
2499   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} != 0)
2500     \{
2501       \hyperlink{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{CancelAllTimers} ();
2502       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_af2922ef8f9f9ead0a2604c8391e90328}{SetDestroyCallback} (MakeNullCallback<void> ());
2503       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->DeAllocate (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6});
2504       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = 0;
2505       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->RemoveSocket (\textcolor{keyword}{this});
2506     \}
2507 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 38




Here is the caller graph for this function\+:
% FIG 39


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Del\+Ack\+Timeout@{Del\+Ack\+Timeout}}
\index{Del\+Ack\+Timeout@{Del\+Ack\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Del\+Ack\+Timeout(void)}{DelAckTimeout(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Del\+Ack\+Timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a6bea4790f749e771462d8e4ab63ebc67}{}\label{classns3_1_1TcpSocketBase_a6bea4790f749e771462d8e4ab63ebc67}


Action upon delay A\+CK timeout, i.\+e. send an A\+CK. 


\begin{DoxyCode}
3243 \{
3244   \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = 0;
3245   \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
3246 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 40




Here is the caller graph for this function\+:
% FIG 41


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Destroy@{Destroy}}
\index{Destroy@{Destroy}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Destroy(void)}{Destroy(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Destroy (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aa0171ac255369c09a30144b1a5f6b21d}{}\label{classns3_1_1TcpSocketBase_aa0171ac255369c09a30144b1a5f6b21d}


Kill this socket by zeroing its attributes (I\+Pv4) 

This is a callback function configured to m\+\_\+endpoint in \hyperlink{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{Setup\+Callback()}, invoked when the endpoint is destroyed. 
\begin{DoxyCode}
2286 \{
2287   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2288   \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} = 0;
2289   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} != 0)
2290     \{
2291       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->RemoveSocket (\textcolor{keyword}{this});
2292     \}
2293   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Cancelled ReTxTimeout event which was set to expire at "} <<
2294                 (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1Simulator_af2c7b4285454aa5062bd2df2bb7a7ab9}{Simulator::GetDelayLeft} (
      \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent})).GetSeconds ());
2295   \hyperlink{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{CancelAllTimers} ();
2296 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 42




Here is the caller graph for this function\+:
% FIG 43


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Destroy6@{Destroy6}}
\index{Destroy6@{Destroy6}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Destroy6(void)}{Destroy6(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Destroy6 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a194e921d823fdfd396fa64aa524a0326}{}\label{classns3_1_1TcpSocketBase_a194e921d823fdfd396fa64aa524a0326}


Kill this socket by zeroing its attributes (I\+Pv6) 

This is a callback function configured to m\+\_\+endpoint in \hyperlink{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{Setup\+Callback()}, invoked when the endpoint is destroyed. 
\begin{DoxyCode}
2302 \{
2303   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2304   \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} = 0;
2305   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} != 0)
2306     \{
2307       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->RemoveSocket (\textcolor{keyword}{this});
2308     \}
2309   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Cancelled ReTxTimeout event which was set to expire at "} <<
2310                 (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1Simulator_af2c7b4285454aa5062bd2df2bb7a7ab9}{Simulator::GetDelayLeft} (
      \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent})).GetSeconds ());
2311   \hyperlink{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{CancelAllTimers} ();
2312 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 44




Here is the caller graph for this function\+:
% FIG 45


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Do\+Close@{Do\+Close}}
\index{Do\+Close@{Do\+Close}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Do\+Close(void)}{DoClose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Do\+Close (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_adfc92c152f498c918cd73d4b31579472}{}\label{classns3_1_1TcpSocketBase_adfc92c152f498c918cd73d4b31579472}


Close a socket by sending R\+ST, F\+IN, or F\+I\+N+\+A\+CK, depend on the current state. 

\begin{DoxyReturn}{Returns}
0 on success 
\end{DoxyReturn}

\begin{DoxyCode}
1071 \{
1072   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1073   \textcolor{keywordflow}{switch} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state})
1074     \{
1075     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03abdb50eab9f592a17a412a62deddde11a}{SYN\_RCVD}:
1076     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED}:
1077       \textcolor{comment}{// send FIN to close the peer}
1078       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN});
1079       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ESTABLISHED -> FIN\_WAIT\_1"});
1080       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1};
1081       \textcolor{keywordflow}{break};
1082     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT}:
1083       \textcolor{comment}{// send FIN+ACK to close the peer}
1084       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
1085       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"CLOSE\_WAIT -> LAST\_ACK"});
1086       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK};
1087       \textcolor{keywordflow}{break};
1088     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a93f185d16390df3819d44eca0c349cc3}{SYN\_SENT}:
1089     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING}:
1090       \textcolor{comment}{// Send RST if application closes in SYN\_SENT and CLOSING}
1091       \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
1092       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
1093       \textcolor{keywordflow}{break};
1094     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a581d49096b20553996c0ef8aaf2712f8}{LISTEN}:
1095     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK}:
1096       \textcolor{comment}{// In these three states, move to CLOSED and tear down the end point}
1097       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
1098       \textcolor{keywordflow}{break};
1099     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED}:
1100     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1}:
1101     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a21589580da204f50bec2361f7d39643f}{FIN\_WAIT\_2}:
1102     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aabab2f97744253d961a122fa320db73b}{TIME\_WAIT}:
1103     \textcolor{keywordflow}{default}: \textcolor{comment}{/* mute compiler */}
1104       \textcolor{comment}{// Do nothing in these four states}
1105       \textcolor{keywordflow}{break};
1106     \}
1107   \textcolor{keywordflow}{return} 0;
1108 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 46




Here is the caller graph for this function\+:
% FIG 47


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Do\+Connect@{Do\+Connect}}
\index{Do\+Connect@{Do\+Connect}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Do\+Connect(void)}{DoConnect(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Do\+Connect (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ac07945f77be2c49f0c1712ea56322493}{}\label{classns3_1_1TcpSocketBase_ac07945f77be2c49f0c1712ea56322493}


Perform the real connection tasks\+: Send S\+YN if allowed, R\+ST if invalid. 

\begin{DoxyReturn}{Returns}
0 on success 
\end{DoxyReturn}

\begin{DoxyCode}
1048 \{
1049   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1050 
1051   \textcolor{comment}{// A new connection is allowed only if this socket does not have a connection}
1052   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a581d49096b20553996c0ef8aaf2712f8}{LISTEN} || 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a93f185d16390df3819d44eca0c349cc3}{SYN\_SENT} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK} || 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT})
1053     \{ \textcolor{comment}{// send a SYN packet and change state into SYN\_SENT}
1054       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN});
1055       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}] << \textcolor{stringliteral}{" -> SYN\_SENT"});
1056       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a93f185d16390df3819d44eca0c349cc3}{SYN\_SENT};
1057     \}
1058   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} != \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aabab2f97744253d961a122fa320db73b}{TIME\_WAIT})
1059     \{ \textcolor{comment}{// In states SYN\_RCVD, ESTABLISHED, FIN\_WAIT\_1, FIN\_WAIT\_2, and CLOSING, an connection}
1060       \textcolor{comment}{// exists. We send RST, tear down everything, and close this socket.}
1061       \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
1062       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
1063     \}
1064   \textcolor{keywordflow}{return} 0;
1065 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 48




Here is the caller graph for this function\+:
% FIG 49


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Do\+Forward\+Up@{Do\+Forward\+Up}}
\index{Do\+Forward\+Up@{Do\+Forward\+Up}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Do\+Forward\+Up(\+Ptr$<$ Packet $>$ packet, const Address \&from\+Address, const Address \&to\+Address)}{DoForwardUp(Ptr< Packet > packet, const Address &fromAddress, const Address &toAddress)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Do\+Forward\+Up (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Address} \&}]{from\+Address, }
\item[{const {\bf Address} \&}]{to\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ad5e7b21b9e9371bf9c19da5d3c56aac1}{}\label{classns3_1_1TcpSocketBase_ad5e7b21b9e9371bf9c19da5d3c56aac1}


Called by \hyperlink{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}{Tcp\+Socket\+Base\+::\+Forward\+Up}\{,6\}(). 

Get a packet from L3. This is the real function to handle the incoming packet from lower layers. This is wrapped by \hyperlink{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}{Forward\+Up()} so that this function can be overloaded by daughter classes.


\begin{DoxyParams}{Parameters}
{\em packet} & the incoming packet \\
\hline
{\em from\+Address} & the address of the sender of packet \\
\hline
{\em to\+Address} & the address of the receiver of packet (hopefully, us) \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1213 \{
1214   \textcolor{comment}{// in case the packet still has a priority tag attached, remove it}
1215   SocketPriorityTag priorityTag;
1216   packet->\hyperlink{classns3_1_1Packet_a078fe922d976a417ab25ba2f3c2fd667}{RemovePacketTag} (priorityTag);
1217 
1218   \textcolor{comment}{// Peel off TCP header and do validity checking}
1219   TcpHeader tcpHeader;
1220   uint32\_t bytesRemoved = packet->\hyperlink{classns3_1_1Packet_a0961eccf975d75f902d40956c93ba63e}{RemoveHeader} (tcpHeader);
1221   \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} seq = tcpHeader.GetSequenceNumber ();
1222   \textcolor{keywordflow}{if} (bytesRemoved == 0 || bytesRemoved > 60)
1223     \{
1224       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (\textcolor{stringliteral}{"Bytes removed: "} << bytesRemoved << \textcolor{stringliteral}{" invalid"});
1225       \textcolor{keywordflow}{return}; \textcolor{comment}{// Discard invalid packet}
1226     \}
1227   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () > 0 && \hyperlink{classns3_1_1TcpSocketBase_a99af6d09e114652b31187db88da577b6}{OutOfRange} (seq, seq + packet->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()))
1228     \{
1229       \textcolor{comment}{// Discard fully out of range data packets}
1230       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"At state "} << \hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}] <<
1231                    \textcolor{stringliteral}{" received packet of seq ["} << seq <<
1232                    \textcolor{stringliteral}{":"} << seq + packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () <<
1233                    \textcolor{stringliteral}{") out of range ["} << \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () << \textcolor{stringliteral}{":"} <<
1234                    \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxRxSequence () << \textcolor{stringliteral}{")"});
1235       \textcolor{comment}{// Acknowledgement should be sent for all unacceptable packets (RFC793, p.69)}
1236       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED} && !(tcpHeader.GetFlags () & 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST}))
1237         \{
1238           \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
1239         \}
1240       \textcolor{keywordflow}{return};
1241     \}
1242 
1243   \hyperlink{classns3_1_1TcpSocketBase_a27b35f098b956baf89388fff0d4e539b}{m\_rxTrace} (packet, tcpHeader, \textcolor{keyword}{this});
1244 
1245   \textcolor{keywordflow}{if} (tcpHeader.GetFlags () & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN})
1246     \{
1247       \textcolor{comment}{/* The window field in a segment where the SYN bit is set (i.e., a <SYN>}
1248 \textcolor{comment}{       * or <SYN,ACK>) MUST NOT be scaled (from RFC 7323 page 9). But should be}
1249 \textcolor{comment}{       * saved anyway..}
1250 \textcolor{comment}{       */}
1251       \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd} = tcpHeader.GetWindowSize ();
1252 
1253       \textcolor{keywordflow}{if} (tcpHeader.HasOption (\hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efddab982246aeba4e5c8a134da32317b44c0}{TcpOption::WINSCALE}) && 
      \hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{m\_winScalingEnabled})
1254         \{
1255           \hyperlink{classns3_1_1TcpSocketBase_a4674edd220672235e629cb3e3b2a673f}{ProcessOptionWScale} (tcpHeader.GetOption (
      \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efddab982246aeba4e5c8a134da32317b44c0}{TcpOption::WINSCALE}));
1256         \}
1257       \textcolor{keywordflow}{else}
1258         \{
1259           \hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{m\_winScalingEnabled} = \textcolor{keyword}{false};
1260         \}
1261 
1262       \textcolor{keywordflow}{if} (tcpHeader.HasOption (\hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efddab7c52885f2df3f09365bbb3781261a06}{TcpOption::SACKPERMITTED}) && 
      \hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled})
1263         \{
1264           \hyperlink{classns3_1_1TcpSocketBase_a9c7dac8b3121549ac801eb0de41801ec}{ProcessOptionSackPermitted} (tcpHeader.GetOption (
      \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efddab7c52885f2df3f09365bbb3781261a06}{TcpOption::SACKPERMITTED}));
1265         \}
1266       \textcolor{keywordflow}{else}
1267         \{
1268           \hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled} = \textcolor{keyword}{false};
1269         \}
1270 
1271       \textcolor{comment}{// When receiving a <SYN> or <SYN-ACK> we should adapt TS to the other end}
1272       \textcolor{keywordflow}{if} (tcpHeader.HasOption (\hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda36327bb876e173f67d0881ecccc10bba}{TcpOption::TS}) && \hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled})
1273         \{
1274           \hyperlink{classns3_1_1TcpSocketBase_af5cc928b5194d832031a1d7ec159f567}{ProcessOptionTimestamp} (tcpHeader.GetOption (
      \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda36327bb876e173f67d0881ecccc10bba}{TcpOption::TS}),
1275                                   tcpHeader.GetSequenceNumber ());
1276         \}
1277       \textcolor{keywordflow}{else}
1278         \{
1279           \hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled} = \textcolor{keyword}{false};
1280         \}
1281 
1282       \textcolor{comment}{// Initialize cWnd and ssThresh}
1283       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} = \hyperlink{classns3_1_1TcpSocketBase_a2ac4eb2a33a8db482f4265f3bf119b76}{GetInitialCwnd} () * \hyperlink{classns3_1_1TcpSocketBase_acd5e25608675522197d8f7784e2ed03d}{GetSegSize} ();
1284       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh} = \hyperlink{classns3_1_1TcpSocketBase_aa2237283f17696ffbf78040668c44138}{GetInitialSSThresh} ();
1285 
1286       \textcolor{keywordflow}{if} (tcpHeader.GetFlags () & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
1287         \{
1288           \hyperlink{classns3_1_1TcpSocketBase_af10157be4b91fdefbc3f618baf6919b2}{EstimateRtt} (tcpHeader);
1289           \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark} = tcpHeader.GetAckNumber ();
1290         \}
1291     \}
1292   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpHeader.GetFlags () & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
1293     \{
1294       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (!(tcpHeader.GetFlags () & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN}));
1295       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled})
1296         \{
1297           \textcolor{keywordflow}{if} (!tcpHeader.HasOption (\hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda36327bb876e173f67d0881ecccc10bba}{TcpOption::TS}))
1298             \{
1299               \textcolor{comment}{// Ignoring segment without TS, RFC 7323}
1300               \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"At state "} << \hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}] <<
1301                             \textcolor{stringliteral}{" received packet of seq ["} << seq <<
1302                             \textcolor{stringliteral}{":"} << seq + packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () <<
1303                             \textcolor{stringliteral}{") without TS option. Silently discard it"});
1304               \textcolor{keywordflow}{return};
1305             \}
1306           \textcolor{keywordflow}{else}
1307             \{
1308               \hyperlink{classns3_1_1TcpSocketBase_af5cc928b5194d832031a1d7ec159f567}{ProcessOptionTimestamp} (tcpHeader.GetOption (
      \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda36327bb876e173f67d0881ecccc10bba}{TcpOption::TS}),
1309                                       tcpHeader.GetSequenceNumber ());
1310             \}
1311         \}
1312 
1313       \hyperlink{classns3_1_1TcpSocketBase_af10157be4b91fdefbc3f618baf6919b2}{EstimateRtt} (tcpHeader);
1314       \hyperlink{classns3_1_1TcpSocketBase_aaa81bed04831358d23d50a4ef3a9a6c5}{UpdateWindowSize} (tcpHeader);
1315 
1316       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled}
1317           && \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} != \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19ad50c191d2648f5472641d8e144ccbf3d}{TcpSocketState::CA\_LOSS}
1318           && !\hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent}.\hyperlink{classns3_1_1EventId_aabf8476d1a080c199ea0c6aa9ccea372}{IsRunning} ())
1319         \{
1320           \textcolor{comment}{// Emulate SACK for (old) dupack definition.}
1321           \textcolor{comment}{// Don't generate block for the persistent window probe}
1322           \textcolor{comment}{// Don't include the ACK number in any SACK block}
1323           \textcolor{keywordflow}{if} (tcpHeader.GetAckNumber () == \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ()
1324               && tcpHeader.GetAckNumber () < \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence})
1325             \{
1326               \textcolor{comment}{// Dupack following old ns-3 behavior. Craft a special SACK option.}
1327               uint8\_t available = tcpHeader.GetMaxOptionLength () - tcpHeader.GetOptionLength ();
1328               Ptr<const TcpOptionSack> sackBlock = \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->CraftSackOption (tcpHeader.
      GetAckNumber (), available);
1329               \textcolor{keywordflow}{if} (sackBlock != 0)
1330                 \{
1331                   tcpHeader.AppendOption (sackBlock);
1332                 \}
1333             \}
1334         \}
1335     \}
1336 
1337 
1338   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} () == 0 && \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent}.\hyperlink{classns3_1_1EventId_a5c30c92e7c1c34b4e8505cc07ed71b02}{IsExpired} ())
1339     \{ \textcolor{comment}{// Zero window: Enter persist state to send 1 byte to probe}
1340       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Enter zerowindow persist state"});
1341       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Cancelled ReTxTimeout event which was set to expire at "} <<
1342                     (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1Simulator_af2c7b4285454aa5062bd2df2bb7a7ab9}{Simulator::GetDelayLeft} (
      \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent})).GetSeconds ());
1343       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
1344       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Schedule persist timeout at time "} <<
1345                     \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds () << \textcolor{stringliteral}{" to expire at time "} <<
1346                     (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout}).GetSeconds ());
1347       \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (
      \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout}, &\hyperlink{classns3_1_1TcpSocketBase_a80fe451da81e0059154321eee693de31}{TcpSocketBase::PersistTimeout}, \textcolor{keyword}{this});
1348       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout} == 
      \hyperlink{classns3_1_1Simulator_af2c7b4285454aa5062bd2df2bb7a7ab9}{Simulator::GetDelayLeft} (\hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent}));
1349     \}
1350 
1351   \textcolor{comment}{// TCP state machine code in different process functions}
1352   \textcolor{comment}{// C.f.: tcp\_rcv\_state\_process() in tcp\_input.c in Linux kernel}
1353   \textcolor{keywordflow}{switch} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state})
1354     \{
1355     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED}:
1356       \hyperlink{classns3_1_1TcpSocketBase_a0deda9c6a4f777bf660b190cd73b102f}{ProcessEstablished} (packet, tcpHeader);
1357       \textcolor{keywordflow}{break};
1358     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a581d49096b20553996c0ef8aaf2712f8}{LISTEN}:
1359       \hyperlink{classns3_1_1TcpSocketBase_adc3976e8b42e884f5d99def1d5e2647f}{ProcessListen} (packet, tcpHeader, fromAddress, toAddress);
1360       \textcolor{keywordflow}{break};
1361     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aabab2f97744253d961a122fa320db73b}{TIME\_WAIT}:
1362       \textcolor{comment}{// Do nothing}
1363       \textcolor{keywordflow}{break};
1364     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED}:
1365       \textcolor{comment}{// Send RST if the incoming packet is not a RST}
1366       \textcolor{keywordflow}{if} ((tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG})) != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST})
1367         \{ \textcolor{comment}{// Since m\_endPoint is not configured yet, we cannot use SendRST here}
1368           TcpHeader h;
1369           Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = Create<Packet> ();
1370           h.SetFlags (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST});
1371           h.SetSequenceNumber (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence});
1372           h.SetAckNumber (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ());
1373           h.SetSourcePort (tcpHeader.GetDestinationPort ());
1374           h.SetDestinationPort (tcpHeader.GetSourcePort ());
1375           h.SetWindowSize (\hyperlink{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{AdvertisedWindowSize} ());
1376           \hyperlink{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}{AddOptions} (h);
1377           \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{m\_txTrace} (p, h, \textcolor{keyword}{this});
1378           \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, h, toAddress, fromAddress, \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
1379         \}
1380       \textcolor{keywordflow}{break};
1381     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a93f185d16390df3819d44eca0c349cc3}{SYN\_SENT}:
1382       \hyperlink{classns3_1_1TcpSocketBase_a2e9b990c6a4d686291033a393290906b}{ProcessSynSent} (packet, tcpHeader);
1383       \textcolor{keywordflow}{break};
1384     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03abdb50eab9f592a17a412a62deddde11a}{SYN\_RCVD}:
1385       \hyperlink{classns3_1_1TcpSocketBase_a69113acf27c4b8267c9e107a5dca7cc1}{ProcessSynRcvd} (packet, tcpHeader, fromAddress, toAddress);
1386       \textcolor{keywordflow}{break};
1387     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1}:
1388     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a21589580da204f50bec2361f7d39643f}{FIN\_WAIT\_2}:
1389     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT}:
1390       \hyperlink{classns3_1_1TcpSocketBase_a58aa892c1cb33908aca5ca36967a2a99}{ProcessWait} (packet, tcpHeader);
1391       \textcolor{keywordflow}{break};
1392     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING}:
1393       \hyperlink{classns3_1_1TcpSocketBase_abc2462833556fdd737fdcdc5992768e8}{ProcessClosing} (packet, tcpHeader);
1394       \textcolor{keywordflow}{break};
1395     \textcolor{keywordflow}{case} \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK}:
1396       \hyperlink{classns3_1_1TcpSocketBase_a6700ac3f9e4d3c197499e6b7521205f2}{ProcessLastAck} (packet, tcpHeader);
1397       \textcolor{keywordflow}{break};
1398     \textcolor{keywordflow}{default}: \textcolor{comment}{// mute compiler}
1399       \textcolor{keywordflow}{break};
1400     \}
1401 
1402   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} () != 0 && \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent}.\hyperlink{classns3_1_1EventId_aabf8476d1a080c199ea0c6aa9ccea372}{IsRunning} ())
1403     \{ \textcolor{comment}{// persist probes end, the other end has increased the window}
1404       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected});
1405       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Leaving zerowindow persist state"});
1406       \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
1407 
1408       \hyperlink{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}{SendPendingData} (\hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected});
1409     \}
1410 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 50




Here is the caller graph for this function\+:
% FIG 51


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Do\+Peer\+Close@{Do\+Peer\+Close}}
\index{Do\+Peer\+Close@{Do\+Peer\+Close}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Do\+Peer\+Close(void)}{DoPeerClose(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Do\+Peer\+Close (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a8a56cf4ab3b64d9f781ed1b1f63f51cd}{}\label{classns3_1_1TcpSocketBase_a8a56cf4ab3b64d9f781ed1b1f63f51cd}


F\+IN is in sequence, notify app and respond with a F\+IN. 


\begin{DoxyCode}
2247 \{
2248   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == 
      \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03abdb50eab9f592a17a412a62deddde11a}{SYN\_RCVD});
2249 
2250   \textcolor{comment}{// Move the state to CLOSE\_WAIT}
2251   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}] << \textcolor{stringliteral}{" -> CLOSE\_WAIT"});
2252   \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT};
2253 
2254   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified})
2255     \{
2256       \textcolor{comment}{// The normal behaviour for an application is that, when the peer sent a in-sequence}
2257       \textcolor{comment}{// FIN, the app should prepare to close. The app has two choices at this point: either}
2258       \textcolor{comment}{// respond with ShutdownSend() call to declare that it has nothing more to send and}
2259       \textcolor{comment}{// the socket can be closed immediately; or remember the peer's close request, wait}
2260       \textcolor{comment}{// until all its existing data are pushed into the TCP socket, then call Close()}
2261       \textcolor{comment}{// explicitly.}
2262       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"TCP "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" calling NotifyNormalClose"});
2263       \hyperlink{classns3_1_1Socket_a6bdec380c7dacff36147b89a05ceae84}{NotifyNormalClose} ();
2264       \hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified} = \textcolor{keyword}{true};
2265     \}
2266   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{m\_shutdownSend})
2267     \{ \textcolor{comment}{// The application declares that it would not sent any more, close this socket}
2268       \hyperlink{classns3_1_1TcpSocketBase_adab0076d02811c29ea9ced8b10e7a878}{Close} ();
2269     \}
2270   \textcolor{keywordflow}{else}
2271     \{ \textcolor{comment}{// Need to ack, the application will close later}
2272       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
2273     \}
2274   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK})
2275     \{
2276       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"TcpSocketBase "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" scheduling LATO1"});
2277       \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} lastRto = \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetEstimate () + \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (\hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity}, 
      \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetVariation () * 4);
2278       \hyperlink{classns3_1_1TcpSocketBase_ac6933cbf3722ece8188d40a889c45649}{m\_lastAckEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (lastRto, &
      \hyperlink{classns3_1_1TcpSocketBase_affa65b010fdc8c5f32105f5c8279f50d}{TcpSocketBase::LastAckTimeout}, \textcolor{keyword}{this});
2279     \}
2280 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 52




Here is the caller graph for this function\+:
% FIG 53


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Do\+Retransmit@{Do\+Retransmit}}
\index{Do\+Retransmit@{Do\+Retransmit}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Do\+Retransmit(void)}{DoRetransmit(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Do\+Retransmit (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a13b6b897811a48523988f8af6e9130d3}{}\label{classns3_1_1TcpSocketBase_a13b6b897811a48523988f8af6e9130d3}


Retransmit the oldest packet. 


\begin{DoxyCode}
3311 \{
3312   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
3313   \textcolor{comment}{// Retransmit SYN packet}
3314   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a93f185d16390df3819d44eca0c349cc3}{SYN\_SENT})
3315     \{
3316       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} > 0)
3317         \{
3318           \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN});
3319         \}
3320       \textcolor{keywordflow}{else}
3321         \{
3322           \hyperlink{classns3_1_1Socket_a34f83cdc8fb487ac8ea5436d184827c4}{NotifyConnectionFailed} ();
3323         \}
3324       \textcolor{keywordflow}{return};
3325     \}
3326 
3327   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\_dataRetrCount} == 0)
3328     \{
3329       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"No more data retries available. Dropping connection"});
3330       \hyperlink{classns3_1_1Socket_a9b89cb8b7718d3a0641ce812970f9c16}{NotifyErrorClose} ();
3331       \hyperlink{classns3_1_1TcpSocketBase_a53791738228495d40197679dbc057392}{DeallocateEndPoint} ();
3332       \textcolor{keywordflow}{return};
3333     \}
3334   \textcolor{keywordflow}{else}
3335     \{
3336       --\hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\_dataRetrCount};
3337     \}
3338 
3339   \textcolor{comment}{// Retransmit non-data packet: Only if in FIN\_WAIT\_1 or CLOSING state}
3340   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () == 0)
3341     \{
3342       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING})
3343         \{ \textcolor{comment}{// Must have lost FIN, re-send}
3344           \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN});
3345         \}
3346       \textcolor{keywordflow}{return};
3347     \}
3348 
3349   \textcolor{comment}{// Retransmit a data packet: Call SendDataPacket}
3350   \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} oldSequence = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence};
3351   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} = \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ();
3352   uint32\_t sz = \hyperlink{classns3_1_1TcpSocketBase_a677488c04da1df87f916953a40e1bd64}{SendDataPacket} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence (), 
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize}, \textcolor{keyword}{true});
3353 
3354   \textcolor{comment}{// In case of RTO, advance m\_tcb->m\_nextTxSequence}
3355   \textcolor{keywordflow}{if} (oldSequence == \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ())
3356     \{
3357       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} (), \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence () + sz);
3358     \}
3359   \textcolor{keywordflow}{else}
3360     \{
3361       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} = oldSequence;
3362     \}
3363 
3364   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"retxing seq "} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ());
3365 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 54




Here is the caller graph for this function\+:
% FIG 55


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Dup\+Ack@{Dup\+Ack}}
\index{Dup\+Ack@{Dup\+Ack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Dup\+Ack()}{DupAck()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Dup\+Ack (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a9139f54e2cdf0f1a796011a43dabfad5}{}\label{classns3_1_1TcpSocketBase_a9139f54e2cdf0f1a796011a43dabfad5}


Dupack management. 


\begin{DoxyCode}
1578 \{
1579   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1580   \textcolor{comment}{// RFC 6675, Section 5:}
1581   \textcolor{comment}{// the TCP MUST increase DupAcks by one ...}
1582   \textcolor{comment}{// NOTE: We count also the dupAcks received in CA\_RECOVERY}
1583   ++\hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount};
1584 
1585   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN})
1586     \{
1587       \textcolor{comment}{// From Open we go Disorder}
1588       \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} == 1, \textcolor{stringliteral}{"From OPEN->DISORDER but with "} <<
1589                      \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} << \textcolor{stringliteral}{" dup ACKs"});
1590 
1591       \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a389f9d267c6b0a752d39a0d1a9ee3aae}{TcpSocketState::CA\_DISORDER});
1592       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} = \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a389f9d267c6b0a752d39a0d1a9ee3aae}{TcpSocketState::CA\_DISORDER};
1593 
1594       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"OPEN -> DISORDER"});
1595     \}
1596 
1597   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a389f9d267c6b0a752d39a0d1a9ee3aae}{TcpSocketState::CA\_DISORDER})
1598     \{
1599       \textcolor{comment}{// RFC 6675, Section 5, continuing:}
1600       \textcolor{comment}{// ... and take the following steps:}
1601       \textcolor{comment}{// (1) If DupAcks >= DupThresh, go to step (4).}
1602       \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} == \hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\_retxThresh}) && (
      \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark} >= \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover}))
1603         \{
1604           \hyperlink{classns3_1_1TcpSocketBase_aad6550badbb76f8b04811f14e7afd10c}{EnterRecovery} ();
1605           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY});
1606         \}
1607       \textcolor{comment}{// (2) If DupAcks < DupThresh but IsLost (HighACK + 1) returns true}
1608       \textcolor{comment}{// (indicating at least three segments have arrived above the current}
1609       \textcolor{comment}{// cumulative acknowledgment point, which is taken to indicate loss)}
1610       \textcolor{comment}{// go to step (4).}
1611       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->IsLost (\hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark} + 1, 
      \hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\_retxThresh}, \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize}))
1612         \{
1613           \hyperlink{classns3_1_1TcpSocketBase_aad6550badbb76f8b04811f14e7afd10c}{EnterRecovery} ();
1614           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY});
1615         \}
1616       \textcolor{keywordflow}{else}
1617         \{
1618           \textcolor{comment}{// (3) The TCP MAY transmit previously unsent data segments as per}
1619           \textcolor{comment}{// Limited Transmit [RFC5681] ...except that the number of octets}
1620           \textcolor{comment}{// which may be sent is governed by pipe and cwnd as follows:}
1621           \textcolor{comment}{//}
1622           \textcolor{comment}{// (3.1) Set HighRxt to HighACK.}
1623           \textcolor{comment}{// Not clear in RFC. We don't do this here, since we still have}
1624           \textcolor{comment}{// to retransmit the segment.}
1625 
1626           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} < \hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\_retxThresh});
1627           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}{m\_limitedTx})
1628             \{
1629               \textcolor{comment}{// (3.2) and (3.3) are performed in the following:}
1630               \hyperlink{classns3_1_1TcpSocketBase_ae192934b14961166fa6cd3197c85406c}{LimitedTransmit} ();
1631             \}
1632           \textcolor{comment}{// (3.4) Terminate processing of this ACK.}
1633         \}
1634     \}
1635 
1636   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} > 0)
1637     \{
1638       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} > 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN});
1639     \}
1640 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 56




Here is the caller graph for this function\+:
% FIG 57


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Enter\+Recovery@{Enter\+Recovery}}
\index{Enter\+Recovery@{Enter\+Recovery}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Enter\+Recovery()}{EnterRecovery()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Enter\+Recovery (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aad6550badbb76f8b04811f14e7afd10c}{}\label{classns3_1_1TcpSocketBase_aad6550badbb76f8b04811f14e7afd10c}


Enter the C\+A\+\_\+\+R\+E\+C\+O\+V\+E\+RY, and retransmit the head. 


\begin{DoxyCode}
1545 \{
1546   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1547   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} != 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY});
1548 
1549   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\hyperlink{classns3_1_1TcpSocketState_a5ef7513bf909c4d8b728cb8d25ad4a3b}{TcpSocketState::TcpCongStateName}[
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState}] <<
1550                 \textcolor{stringliteral}{" -> CA\_RECOVERY"});
1551 
1552   \textcolor{comment}{// RFC 6675, point (4):}
1553   \textcolor{comment}{// (4) Invoke fast retransmit and enter loss recovery as follows:}
1554   \textcolor{comment}{// (4.1) RecoveryPoint = HighData}
1555   \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover} = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark};
1556 
1557   \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY});
1558   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} = \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY};
1559 
1560   \textcolor{comment}{// (4.2) ssthresh = cwnd = (FlightSize / 2)}
1561   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh} = \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->GetSsThresh (
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb},
1562                                                         \hyperlink{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{BytesInFlight} ());
1563   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh};
1564 
1565   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} << \textcolor{stringliteral}{" dupack. Enter fast recovery mode."} <<
1566                \textcolor{stringliteral}{"Reset cwnd to "} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} << \textcolor{stringliteral}{", ssthresh to "} <<
1567                \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh} << \textcolor{stringliteral}{" at fast recovery seqnum "} << 
      \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover});
1568 
1569   \textcolor{comment}{// (4.3) Retransmit the first data segment presumed dropped}
1570   \hyperlink{classns3_1_1TcpSocketBase_a13b6b897811a48523988f8af6e9130d3}{DoRetransmit} ();
1571   \textcolor{comment}{// (4.4) Run SetPipe ()}
1572   \textcolor{comment}{// (4.5) Proceed to step (C)}
1573   \textcolor{comment}{// the step C is done after the ProcessAck function (SendPendingData)}
1574 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 58




Here is the caller graph for this function\+:
% FIG 59


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Estimate\+Rtt@{Estimate\+Rtt}}
\index{Estimate\+Rtt@{Estimate\+Rtt}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Estimate\+Rtt(const Tcp\+Header \&tcp\+Header)}{EstimateRtt(const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Estimate\+Rtt (
\begin{DoxyParamCaption}
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_af10157be4b91fdefbc3f618baf6919b2}{}\label{classns3_1_1TcpSocketBase_af10157be4b91fdefbc3f618baf6919b2}


Take into account the packet for R\+TT estimation. 

Estimate the R\+TT.


\begin{DoxyParams}{Parameters}
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header\\
\hline
\end{DoxyParams}
Called by \hyperlink{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}{Forward\+Up()} to estimate R\+TT.


\begin{DoxyParams}{Parameters}
{\em tcp\+Header} & T\+CP header for the incoming packet \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3056 \{
3057   \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} ackSeq = tcpHeader.GetAckNumber ();
3058   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} m = \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (0.0);
3059 
3060   \textcolor{comment}{// An ack has been received, calculate rtt and log this measurement}
3061   \textcolor{comment}{// Note we use a linear search (O(n)) for this since for the common}
3062   \textcolor{comment}{// case the ack'ed packet will be at the head of the list}
3063   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.empty ())
3064     \{
3065       RttHistory& h = \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.front ();
3066       \textcolor{keywordflow}{if} (!h.retx && ackSeq >= (h.seq + \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (h.count)))
3067         \{ \textcolor{comment}{// Ok to use this sample}
3068           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled} && tcpHeader.HasOption (
      \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda36327bb876e173f67d0881ecccc10bba}{TcpOption::TS}))
3069             \{
3070               Ptr<const TcpOptionTS> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ada841f58d7be618bfbc76c87e7d44086}{ts};
3071               ts = DynamicCast<const TcpOptionTS> (tcpHeader.GetOption (
      \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda36327bb876e173f67d0881ecccc10bba}{TcpOption::TS}));
3072               m = \hyperlink{classns3_1_1TcpOptionTS_a43934610282898ab9631acb58f2bd35e}{TcpOptionTS::ElapsedTimeFromTsValue} (ts->GetEcho ());
3073             \}
3074           \textcolor{keywordflow}{else}
3075             \{
3076               m = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () - h.time; \textcolor{comment}{// Elapsed time}
3077             \}
3078         \}
3079     \}
3080 
3081   \textcolor{comment}{// Now delete all ack history with seq <= ack}
3082   \textcolor{keywordflow}{while} (!\hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.empty ())
3083     \{
3084       RttHistory& h = \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.front ();
3085       \textcolor{keywordflow}{if} ((h.seq + \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (h.count)) > ackSeq)
3086         \{
3087           \textcolor{keywordflow}{break};                                                              \textcolor{comment}{// Done removing}
3088         \}
3089       \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.pop\_front (); \textcolor{comment}{// Remove}
3090     \}
3091 
3092   \textcolor{keywordflow}{if} (!m.IsZero ())
3093     \{
3094       \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->Measurement (m);                \textcolor{comment}{// Log the measurement}
3095       \textcolor{comment}{// RFC 6298, clause 2.4}
3096       \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} = \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (\hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetEstimate () + \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (
      \hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity}, \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetVariation () * 4), \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto});
3097       \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt} = \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetEstimate ();
3098       \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
3099     \}
3100 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 60




Here is the caller graph for this function\+:
% FIG 61


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Fork@{Fork}}
\index{Fork@{Fork}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Fork(void)}{Fork(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Tcp\+Socket\+Base} $>$ ns3\+::\+Tcp\+Socket\+Base\+::\+Fork (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a991265d824d6e36affef05e1e050c752}{}\label{classns3_1_1TcpSocketBase_a991265d824d6e36affef05e1e050c752}


Call Copy\+Object$<$$>$ to clone me. 

\begin{DoxyReturn}{Returns}
a copy of the socket 
\end{DoxyReturn}


Reimplemented in \hyperlink{classns3_1_1TcpSocketSmallAcks_a945f1256f9e850886f13746d8c703f36}{ns3\+::\+Tcp\+Socket\+Small\+Acks}, \hyperlink{classns3_1_1TcpSocketMsgBase_a58a2f5803ece6745c5d79d710d01f8ee}{ns3\+::\+Tcp\+Socket\+Msg\+Base}, \hyperlink{classTcpSocketAdvertisedWindowProxy_ac0ae0da07f307d681332f75563ab45f4}{Tcp\+Socket\+Advertised\+Window\+Proxy}, and \hyperlink{classTcpSocketHalfAck_acae86abb1337213c04565efff8f239bd}{Tcp\+Socket\+Half\+Ack}.


\begin{DoxyCode}
3846 \{
3847   \textcolor{keywordflow}{return} CopyObject<TcpSocketBase> (\textcolor{keyword}{this});
3848 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 62


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Forward\+Icmp@{Forward\+Icmp}}
\index{Forward\+Icmp@{Forward\+Icmp}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Forward\+Icmp(\+Ipv4\+Address icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)}{ForwardIcmp(Ipv4Address icmpSource, uint8_t icmpTtl, uint8_t icmpType, uint8_t icmpCode, uint32_t icmpInfo)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Forward\+Icmp (
\begin{DoxyParamCaption}
\item[{{\bf Ipv4\+Address}}]{icmp\+Source, }
\item[{uint8\+\_\+t}]{icmp\+Ttl, }
\item[{uint8\+\_\+t}]{icmp\+Type, }
\item[{uint8\+\_\+t}]{icmp\+Code, }
\item[{uint32\+\_\+t}]{icmp\+Info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ad4887f46646734366ae435dbca13e3fd}{}\label{classns3_1_1TcpSocketBase_ad4887f46646734366ae435dbca13e3fd}


Called by the L3 protocol when it received an I\+C\+MP packet to pass on to T\+CP. 


\begin{DoxyParams}{Parameters}
{\em icmp\+Source} & the I\+C\+MP source address \\
\hline
{\em icmp\+Ttl} & the I\+C\+MP \hyperlink{classns3_1_1Time}{Time} to Live \\
\hline
{\em icmp\+Type} & the I\+C\+MP Type \\
\hline
{\em icmp\+Code} & the I\+C\+MP Code \\
\hline
{\em icmp\+Info} & the I\+C\+MP Info \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1188 \{
1189   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << icmpSource << (uint32\_t)icmpTtl << (uint32\_t)icmpType <<
1190                    (uint32\_t)icmpCode << icmpInfo);
1191   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_aef792b929bd15886a4b9a7132525a0ea}{m\_icmpCallback}.IsNull ())
1192     \{
1193       \hyperlink{classns3_1_1TcpSocketBase_aef792b929bd15886a4b9a7132525a0ea}{m\_icmpCallback} (icmpSource, icmpTtl, icmpType, icmpCode, icmpInfo);
1194     \}
1195 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 63


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Forward\+Icmp6@{Forward\+Icmp6}}
\index{Forward\+Icmp6@{Forward\+Icmp6}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Forward\+Icmp6(\+Ipv6\+Address icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)}{ForwardIcmp6(Ipv6Address icmpSource, uint8_t icmpTtl, uint8_t icmpType, uint8_t icmpCode, uint32_t icmpInfo)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Forward\+Icmp6 (
\begin{DoxyParamCaption}
\item[{{\bf Ipv6\+Address}}]{icmp\+Source, }
\item[{uint8\+\_\+t}]{icmp\+Ttl, }
\item[{uint8\+\_\+t}]{icmp\+Type, }
\item[{uint8\+\_\+t}]{icmp\+Code, }
\item[{uint32\+\_\+t}]{icmp\+Info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ad55d818db7149e0c2db0ce5eb6810beb}{}\label{classns3_1_1TcpSocketBase_ad55d818db7149e0c2db0ce5eb6810beb}


Called by the L3 protocol when it received an I\+C\+M\+Pv6 packet to pass on to T\+CP. 


\begin{DoxyParams}{Parameters}
{\em icmp\+Source} & the I\+C\+MP source address \\
\hline
{\em icmp\+Ttl} & the I\+C\+MP \hyperlink{classns3_1_1Time}{Time} to Live \\
\hline
{\em icmp\+Type} & the I\+C\+MP Type \\
\hline
{\em icmp\+Code} & the I\+C\+MP Code \\
\hline
{\em icmp\+Info} & the I\+C\+MP Info \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1201 \{
1202   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << icmpSource << (uint32\_t)icmpTtl << (uint32\_t)icmpType <<
1203                    (uint32\_t)icmpCode << icmpInfo);
1204   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a75aca0603de58d7db7c0fa7daab34064}{m\_icmpCallback6}.IsNull ())
1205     \{
1206       \hyperlink{classns3_1_1TcpSocketBase_a75aca0603de58d7db7c0fa7daab34064}{m\_icmpCallback6} (icmpSource, icmpTtl, icmpType, icmpCode, icmpInfo);
1207     \}
1208 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 64


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Forward\+Up@{Forward\+Up}}
\index{Forward\+Up@{Forward\+Up}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Forward\+Up(\+Ptr$<$ Packet $>$ packet, Ipv4\+Header header, uint16\+\_\+t port, Ptr$<$ Ipv4\+Interface $>$ incoming\+Interface)}{ForwardUp(Ptr< Packet > packet, Ipv4Header header, uint16_t port, Ptr< Ipv4Interface > incomingInterface)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Forward\+Up (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{{\bf Ipv4\+Header}}]{header, }
\item[{uint16\+\_\+t}]{port, }
\item[{{\bf Ptr}$<$ {\bf Ipv4\+Interface} $>$}]{incoming\+Interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}{}\label{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}


Called by the L3 protocol when it received a packet to pass on to T\+CP. 


\begin{DoxyParams}{Parameters}
{\em packet} & the incoming packet \\
\hline
{\em header} & the packet\textquotesingle{}s I\+Pv4 header \\
\hline
{\em port} & the remote port \\
\hline
{\em incoming\+Interface} & the incoming interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1153 \{
1154   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Socket "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" forward up "} <<
1155                 \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} () <<
1156                 \textcolor{stringliteral}{":"} << \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0954ccf4be313b3a2992894ae2baf1c6}{GetPeerPort} () <<
1157                 \textcolor{stringliteral}{" to "} << \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_ae08283e26ace5880c3172ea5d803b6f8}{GetLocalAddress} () <<
1158                 \textcolor{stringliteral}{":"} << \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aab137f64770abf94f0b8a81217a0b106}{GetLocalPort} ());
1159 
1160   Address fromAddress = InetSocketAddress (header.GetSource (), \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
1161   Address toAddress = InetSocketAddress (header.GetDestination (),
1162                                          \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aab137f64770abf94f0b8a81217a0b106}{GetLocalPort} ());
1163 
1164   \hyperlink{classns3_1_1TcpSocketBase_ad5e7b21b9e9371bf9c19da5d3c56aac1}{DoForwardUp} (packet, fromAddress, toAddress);
1165 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 65




Here is the caller graph for this function\+:
% FIG 66


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Forward\+Up6@{Forward\+Up6}}
\index{Forward\+Up6@{Forward\+Up6}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Forward\+Up6(\+Ptr$<$ Packet $>$ packet, Ipv6\+Header header, uint16\+\_\+t port, Ptr$<$ Ipv6\+Interface $>$ incoming\+Interface)}{ForwardUp6(Ptr< Packet > packet, Ipv6Header header, uint16_t port, Ptr< Ipv6Interface > incomingInterface)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Forward\+Up6 (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{{\bf Ipv6\+Header}}]{header, }
\item[{uint16\+\_\+t}]{port, }
\item[{{\bf Ptr}$<$ {\bf Ipv6\+Interface} $>$}]{incoming\+Interface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aa0cd34b3562685596b2c3fd1e6a42a6f}{}\label{classns3_1_1TcpSocketBase_aa0cd34b3562685596b2c3fd1e6a42a6f}


Called by the L3 protocol when it received a packet to pass on to T\+CP. 


\begin{DoxyParams}{Parameters}
{\em packet} & the incoming packet \\
\hline
{\em header} & the packet\textquotesingle{}s I\+Pv6 header \\
\hline
{\em port} & the remote port \\
\hline
{\em incoming\+Interface} & the incoming interface \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1170 \{
1171   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Socket "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" forward up "} <<
1172                 \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} () <<
1173                 \textcolor{stringliteral}{":"} << \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_ac200f6b424104280ec1e55a415ed96fd}{GetPeerPort} () <<
1174                 \textcolor{stringliteral}{" to "} << \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a1972cd26240d42cd75f93e12d9182976}{GetLocalAddress} () <<
1175                 \textcolor{stringliteral}{":"} << \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a39a9fd4aa85a8ecbbf2d6c84d589080b}{GetLocalPort} ());
1176 
1177   Address fromAddress = Inet6SocketAddress (header.GetSourceAddress (), \hyperlink{dsdv-manet_8cc_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
1178   Address toAddress = Inet6SocketAddress (header.GetDestinationAddress (),
1179                                           \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a39a9fd4aa85a8ecbbf2d6c84d589080b}{GetLocalPort} ());
1180 
1181   \hyperlink{classns3_1_1TcpSocketBase_ad5e7b21b9e9371bf9c19da5d3c56aac1}{DoForwardUp} (packet, fromAddress, toAddress);
1182 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 67




Here is the caller graph for this function\+:
% FIG 68


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Allow\+Broadcast@{Get\+Allow\+Broadcast}}
\index{Get\+Allow\+Broadcast@{Get\+Allow\+Broadcast}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Allow\+Broadcast(void) const }{GetAllowBroadcast(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Allow\+Broadcast (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_abce73dedea2d3683df30ba77bf54fa40}{}\label{classns3_1_1TcpSocketBase_abce73dedea2d3683df30ba77bf54fa40}


Query whether broadcast datagram transmissions are allowed. 

This method corresponds to using getsockopt() S\+O\+\_\+\+B\+R\+O\+A\+D\+C\+A\+ST of real network or B\+SD sockets.

\begin{DoxyReturn}{Returns}
true if broadcast is allowed, false otherwise 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_a95338a1ac89330a492d6af5b4e172d34}{ns3\+::\+Socket}.


\begin{DoxyCode}
3545 \{
3546   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
3547 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Clock\+Granularity@{Get\+Clock\+Granularity}}
\index{Get\+Clock\+Granularity@{Get\+Clock\+Granularity}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Clock\+Granularity(void) const }{GetClockGranularity(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Clock\+Granularity (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1TcpSocketBase_a4c47e3add9c7e8023884e0df5a88c489}{}\label{classns3_1_1TcpSocketBase_a4c47e3add9c7e8023884e0df5a88c489}


Get the Clock Granularity (used in R\+TO calcs). 

\begin{DoxyReturn}{Returns}
The Clock Granularity. 
\end{DoxyReturn}

\begin{DoxyCode}
3788 \{
3789   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity};
3790 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 69


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Conn\+Timeout@{Get\+Conn\+Timeout}}
\index{Get\+Conn\+Timeout@{Get\+Conn\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Conn\+Timeout(void) const }{GetConnTimeout(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Conn\+Timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a523cfca900c9e27b6687bbb983e2585e}{}\label{classns3_1_1TcpSocketBase_a523cfca900c9e27b6687bbb983e2585e}


Get the connection timeout. 

\begin{DoxyReturn}{Returns}
the connection timeout 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_ac1071340de41405b7984fd4174e87bbb}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3453 \{
3454   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{m\_cnTimeout};
3455 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 70


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Data\+Retries@{Get\+Data\+Retries}}
\index{Get\+Data\+Retries@{Get\+Data\+Retries}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Data\+Retries(void) const }{GetDataRetries(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Data\+Retries (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ae6bc66f86e59e933d9681561e18774ce}{}\label{classns3_1_1TcpSocketBase_ae6bc66f86e59e933d9681561e18774ce}


Get the number of data transmission retries before giving up. 

\begin{DoxyReturn}{Returns}
the number of data transmission retries 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_a405c339d8ed65ddfac6cd99827a1f019}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3479 \{
3480   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
3481   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\_dataRetries};
3482 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Del\+Ack\+Max\+Count@{Get\+Del\+Ack\+Max\+Count}}
\index{Get\+Del\+Ack\+Max\+Count@{Get\+Del\+Ack\+Max\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Del\+Ack\+Max\+Count(void) const }{GetDelAckMaxCount(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Del\+Ack\+Max\+Count (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a807fa9a8f8d4faeb78f34dab8cd112d2}{}\label{classns3_1_1TcpSocketBase_a807fa9a8f8d4faeb78f34dab8cd112d2}


Get the number of packet to fire an A\+CK before delay timeout. 

\begin{DoxyReturn}{Returns}
the number of packet to fire an A\+CK before delay timeout 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_a571678fa845c306375810bfe9b48d43e}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3506 \{
3507   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount};
3508 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Del\+Ack\+Timeout@{Get\+Del\+Ack\+Timeout}}
\index{Get\+Del\+Ack\+Timeout@{Get\+Del\+Ack\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Del\+Ack\+Timeout(void) const }{GetDelAckTimeout(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Del\+Ack\+Timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a82c0837e768770ca28cb95f70af0a1dc}{}\label{classns3_1_1TcpSocketBase_a82c0837e768770ca28cb95f70af0a1dc}


Get the time to delay an A\+CK. 

\begin{DoxyReturn}{Returns}
the time to delay an A\+CK 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_ad2f42e0b4f6bfa6fde17c4e94a176ccc}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3493 \{
3494   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}{m\_delAckTimeout};
3495 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 71


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Errno@{Get\+Errno}}
\index{Get\+Errno@{Get\+Errno}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Errno(void) const }{GetErrno(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Socket\+::\+Socket\+Errno} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Errno (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a7ea2ab815e861e653803fbe82787c92f}{}\label{classns3_1_1TcpSocketBase_a7ea2ab815e861e653803fbe82787c92f}


Get last error number. 

\begin{DoxyReturn}{Returns}
the errno associated to the last call which failed in this socket. Each socket\textquotesingle{}s errno is initialized to zero when the socket is created. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_ae489616249d946f3c0dc831c05d0d711}{ns3\+::\+Socket}.


\begin{DoxyCode}
513 \{
514   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno};
515 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Initial\+Cwnd@{Get\+Initial\+Cwnd}}
\index{Get\+Initial\+Cwnd@{Get\+Initial\+Cwnd}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Initial\+Cwnd(void) const }{GetInitialCwnd(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Initial\+Cwnd (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a2ac4eb2a33a8db482f4265f3bf119b76}{}\label{classns3_1_1TcpSocketBase_a2ac4eb2a33a8db482f4265f3bf119b76}


Get the initial Congestion Window. 

\begin{DoxyReturn}{Returns}
the initial congestion window (in bytes) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_adeb7fef4213315f2c743ab7ac22ec2d3}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
664 \{
665   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a89931823b979729b749d93d34de9dc10}{m\_initialCWnd};
666 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 72


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Initial\+S\+S\+Thresh@{Get\+Initial\+S\+S\+Thresh}}
\index{Get\+Initial\+S\+S\+Thresh@{Get\+Initial\+S\+S\+Thresh}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Initial\+S\+S\+Thresh(void) const }{GetInitialSSThresh(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Initial\+S\+S\+Thresh (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aa2237283f17696ffbf78040668c44138}{}\label{classns3_1_1TcpSocketBase_aa2237283f17696ffbf78040668c44138}


Get the initial Slow Start Threshold. 

\begin{DoxyReturn}{Returns}
the Slow Start Threshold (in bytes) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_a5536c0feb21d1f0e555cf1f7725e14a4}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
649 \{
650   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a32bb44dd7042e9ee25b5869a5a49e0bb}{m\_initialSsThresh};
651 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 73


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Instance\+Type\+Id@{Get\+Instance\+Type\+Id}}
\index{Get\+Instance\+Type\+Id@{Get\+Instance\+Type\+Id}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Instance\+Type\+Id() const }{GetInstanceTypeId() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Instance\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a37790b71ae253df6aea9f25b80657b67}{}\label{classns3_1_1TcpSocketBase_a37790b71ae253df6aea9f25b80657b67}


Get the instance \hyperlink{classns3_1_1TypeId}{Type\+Id}. 

\begin{DoxyReturn}{Returns}
the instance \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}


Reimplemented from \hyperlink{classns3_1_1Object_a51e5994fa4b6eae32d719ad69f8fcbf5}{ns3\+::\+Object}.


\begin{DoxyCode}
204 \{
205   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a7aa3d6dfe929e6b61ead2217bc5a646a}{TcpSocketBase::GetTypeId} ();
206 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 74


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Min\+Rto@{Get\+Min\+Rto}}
\index{Get\+Min\+Rto@{Get\+Min\+Rto}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Min\+Rto(void) const }{GetMinRto(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Min\+Rto (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1TcpSocketBase_a7a2d5935f65b598dba9e2c01506cdbb3}{}\label{classns3_1_1TcpSocketBase_a7a2d5935f65b598dba9e2c01506cdbb3}


Get the Minimum R\+TO. 

\begin{DoxyReturn}{Returns}
The minimum R\+TO. 
\end{DoxyReturn}

\begin{DoxyCode}
3775 \{
3776   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto};
3777 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 75


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Node@{Get\+Node}}
\index{Get\+Node@{Get\+Node}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Node(void) const }{GetNode(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Node} $>$ ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Node (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_afaca88563d7dc2bb8d5abdb8d9ace59b}{}\label{classns3_1_1TcpSocketBase_afaca88563d7dc2bb8d5abdb8d9ace59b}


Return the node this socket is associated with. 

\begin{DoxyReturn}{Returns}
the node 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{ns3\+::\+Socket}.


\begin{DoxyCode}
527 \{
528   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
529   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node};
530 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 76


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Peer\+Name@{Get\+Peer\+Name}}
\index{Get\+Peer\+Name@{Get\+Peer\+Name}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Peer\+Name(\+Address \&address) const }{GetPeerName(Address &address) const }}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Peer\+Name (
\begin{DoxyParamCaption}
\item[{{\bf Address} \&}]{address}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a3fe3f208498b8735a9ed0754940ec06c}{}\label{classns3_1_1TcpSocketBase_a3fe3f208498b8735a9ed0754940ec06c}


Get the peer address of a connected socket. 


\begin{DoxyParams}{Parameters}
{\em address} & the address this socket is connected to. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if success, -\/1 otherwise 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_a78a3c37a539d2e70869bb82cc60fbb09}{ns3\+::\+Socket}.


\begin{DoxyCode}
961 \{
962   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << address);
963 
964   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} && !\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6})
965     \{
966       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaaeb1fd23c1f4965b496786597125bf0f6}{ERROR\_NOTCONN};
967       \textcolor{keywordflow}{return} -1;
968     \}
969 
970   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
971     \{
972       address = InetSocketAddress (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} (),
973                                    \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0954ccf4be313b3a2992894ae2baf1c6}{GetPeerPort} ());
974     \}
975   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6})
976     \{
977       address = Inet6SocketAddress (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} (),
978                                     \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_ac200f6b424104280ec1e55a415ed96fd}{GetPeerPort} ());
979     \}
980   \textcolor{keywordflow}{else}
981     \{
982       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\textcolor{keyword}{false});
983     \}
984 
985   \textcolor{keywordflow}{return} 0;
986 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 77


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Persist\+Timeout@{Get\+Persist\+Timeout}}
\index{Get\+Persist\+Timeout@{Get\+Persist\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Persist\+Timeout(void) const }{GetPersistTimeout(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Persist\+Timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a4fa916690fa28137b0bd7df6b69638d1}{}\label{classns3_1_1TcpSocketBase_a4fa916690fa28137b0bd7df6b69638d1}


Get the timout for persistent connection. 

When the timout expires, send 1-\/byte data to probe for the window size at the receiver when the local knowledge tells that the receiver has zero window size

\begin{DoxyReturn}{Returns}
the persistent timout 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_a2b9492e7c80f37b4e74284f066a8a529}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3532 \{
3533   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout};
3534 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Rcv\+Buf\+Size@{Get\+Rcv\+Buf\+Size}}
\index{Get\+Rcv\+Buf\+Size@{Get\+Rcv\+Buf\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Rcv\+Buf\+Size(void) const }{GetRcvBufSize(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Rcv\+Buf\+Size (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_accd0cb0f4780dc2dc3849b78da7f343b}{}\label{classns3_1_1TcpSocketBase_accd0cb0f4780dc2dc3849b78da7f343b}


Get the receive buffer size. 

\begin{DoxyReturn}{Returns}
the buffer size (in bytes) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_ab71a79da5991d3c789be3d72a89429a5}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3425 \{
3426   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxBufferSize ();
3427 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 78


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Rx\+Available@{Get\+Rx\+Available}}
\index{Get\+Rx\+Available@{Get\+Rx\+Available}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Rx\+Available(void) const }{GetRxAvailable(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Rx\+Available (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_acc09fa5cc37944a1630be0d1bdcec33e}{}\label{classns3_1_1TcpSocketBase_acc09fa5cc37944a1630be0d1bdcec33e}
Return number of bytes which can be returned from one or multiple calls to Recv. Must be possible to call this method from the Recv callback.

\begin{DoxyReturn}{Returns}
the number of bytes which can be returned from one or multiple Recv calls. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_ad35d8931e53ae0754ee864acb1cecd0e}{ns3\+::\+Socket}.


\begin{DoxyCode}
932 \{
933   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
934   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Available ();
935 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Rx\+Buffer@{Get\+Rx\+Buffer}}
\index{Get\+Rx\+Buffer@{Get\+Rx\+Buffer}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Rx\+Buffer(void) const }{GetRxBuffer(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Tcp\+Rx\+Buffer} $>$ ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Rx\+Buffer (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1TcpSocketBase_a4107fd640582c5e35641994386e11b55}{}\label{classns3_1_1TcpSocketBase_a4107fd640582c5e35641994386e11b55}


Get a pointer to the Rx buffer. 

\begin{DoxyReturn}{Returns}
a pointer to the rx buffer 
\end{DoxyReturn}

\begin{DoxyCode}
3800 \{
3801   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer};
3802 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 79


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Seg\+Size@{Get\+Seg\+Size}}
\index{Get\+Seg\+Size@{Get\+Seg\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Seg\+Size(void) const }{GetSegSize(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Seg\+Size (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_acd5e25608675522197d8f7784e2ed03d}{}\label{classns3_1_1TcpSocketBase_acd5e25608675522197d8f7784e2ed03d}


Get the segment size. 

\begin{DoxyReturn}{Returns}
the segment size (in bytes) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_a86014de940c3824e18e96cf04b74fe55}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3440 \{
3441   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
3442 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 80


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Snd\+Buf\+Size@{Get\+Snd\+Buf\+Size}}
\index{Get\+Snd\+Buf\+Size@{Get\+Snd\+Buf\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Snd\+Buf\+Size(void) const }{GetSndBufSize(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Snd\+Buf\+Size (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ab2ff28ba55771f51fa607dee6c7d629d}{}\label{classns3_1_1TcpSocketBase_ab2ff28ba55771f51fa607dee6c7d629d}


Get the send buffer size. 

\begin{DoxyReturn}{Returns}
the buffer size (in bytes) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_ab214c236e683f88ea8dc38d564dd54bc}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3402 \{
3403   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->MaxBufferSize ();
3404 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Socket\+Type@{Get\+Socket\+Type}}
\index{Get\+Socket\+Type@{Get\+Socket\+Type}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Socket\+Type(void) const }{GetSocketType(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Socket\+::\+Socket\+Type} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Socket\+Type (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ab491cb3bfc9f1a0f77f5c53d3e813727}{}\label{classns3_1_1TcpSocketBase_ab491cb3bfc9f1a0f77f5c53d3e813727}
\begin{DoxyReturn}{Returns}
the socket type, analogous to getsockopt (S\+O\+\_\+\+T\+Y\+PE) 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_af9333cfc006d6ed9363f20d3822fedcb}{ns3\+::\+Socket}.


\begin{DoxyCode}
520 \{
521   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1Socket_a698fbcc486a48b7a0d2b0e4ab863d571a322b0c0b6e6b3911049276b46f2c55ca}{NS3\_SOCK\_STREAM};
522 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Sock\+Name@{Get\+Sock\+Name}}
\index{Get\+Sock\+Name@{Get\+Sock\+Name}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Sock\+Name(\+Address \&address) const }{GetSockName(Address &address) const }}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Sock\+Name (
\begin{DoxyParamCaption}
\item[{{\bf Address} \&}]{address}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a0a1ee7f59726c5da47a1a6ab4dad46e8}{}\label{classns3_1_1TcpSocketBase_a0a1ee7f59726c5da47a1a6ab4dad46e8}


Get socket address. 


\begin{DoxyParams}{Parameters}
{\em address} & the address name this socket is associated with. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if success, -\/1 otherwise 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_aa982ca9baab28bea412b0d9710e63b43}{ns3\+::\+Socket}.


\begin{DoxyCode}
940 \{
941   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
942   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
943     \{
944       address = InetSocketAddress (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_ae08283e26ace5880c3172ea5d803b6f8}{GetLocalAddress} (), 
      \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aab137f64770abf94f0b8a81217a0b106}{GetLocalPort} ());
945     \}
946   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} != 0)
947     \{
948       address = Inet6SocketAddress (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a1972cd26240d42cd75f93e12d9182976}{GetLocalAddress} (), 
      \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a39a9fd4aa85a8ecbbf2d6c84d589080b}{GetLocalPort} ());
949     \}
950   \textcolor{keywordflow}{else}
951     \{ \textcolor{comment}{// It is possible to call this method on a socket without a name}
952       \textcolor{comment}{// in which case, behavior is unspecified}
953       \textcolor{comment}{// Should this return an InetSocketAddress or an Inet6SocketAddress?}
954       address = InetSocketAddress (\hyperlink{classns3_1_1Ipv4Address_aeeb1c76b35d4ab612fda7bc51e99c5db}{Ipv4Address::GetZero} (), 0);
955     \}
956   \textcolor{keywordflow}{return} 0;
957 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 81


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Syn\+Retries@{Get\+Syn\+Retries}}
\index{Get\+Syn\+Retries@{Get\+Syn\+Retries}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Syn\+Retries(void) const }{GetSynRetries(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Syn\+Retries (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aa27e11abd33d64abce31784cc0685bc0}{}\label{classns3_1_1TcpSocketBase_aa27e11abd33d64abce31784cc0685bc0}


Get the number of connection retries before giving up. 

\begin{DoxyReturn}{Returns}
the number of connection retries 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_a80d5ebdbc7400325e1a76ad0c1f93e06}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3466 \{
3467   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries};
3468 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Tcp\+No\+Delay@{Get\+Tcp\+No\+Delay}}
\index{Get\+Tcp\+No\+Delay@{Get\+Tcp\+No\+Delay}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Tcp\+No\+Delay(void) const }{GetTcpNoDelay(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Tcp\+No\+Delay (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a40fe99d8e28d12ef478a346ae14c2fa9}{}\label{classns3_1_1TcpSocketBase_a40fe99d8e28d12ef478a346ae14c2fa9}


Check if Nagle\textquotesingle{}s algorithm is enabled or not. 

\begin{DoxyReturn}{Returns}
true if Nagle\textquotesingle{}s algorithm is D\+I\+S\+A\+B\+L\+ED 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1TcpSocket_a155c876b87b89d2bbfc7e0e932a8604e}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3519 \{
3520   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}{m\_noDelay};
3521 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Tx\+Available@{Get\+Tx\+Available}}
\index{Get\+Tx\+Available@{Get\+Tx\+Available}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Tx\+Available(void) const }{GetTxAvailable(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Tx\+Available (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{}\label{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}


Returns the number of bytes which can be sent in a single call to Send. 

For datagram sockets, this returns the number of bytes that can be passed atomically through the underlying protocol.

For stream sockets, this returns the available space in bytes left in the transmit buffer.

\begin{DoxyReturn}{Returns}
The number of bytes which can be sent in a single Send call. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_ae7cf62e3acf44106bfa1d40eaeaec151}{ns3\+::\+Socket}.


\begin{DoxyCode}
924 \{
925   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
926   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Available ();
927 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 82


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Tx\+Buffer@{Get\+Tx\+Buffer}}
\index{Get\+Tx\+Buffer@{Get\+Tx\+Buffer}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Tx\+Buffer(void) const }{GetTxBuffer(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Tcp\+Tx\+Buffer} $>$ ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Tx\+Buffer (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1TcpSocketBase_aea4dd16496e03e7cc96d0ed8c51256fa}{}\label{classns3_1_1TcpSocketBase_aea4dd16496e03e7cc96d0ed8c51256fa}


Get a pointer to the Tx buffer. 

\begin{DoxyReturn}{Returns}
a pointer to the tx buffer 
\end{DoxyReturn}

\begin{DoxyCode}
3794 \{
3795   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer};
3796 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 83


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Tcp\+Socket\+Base\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1TcpSocketBase_a7aa3d6dfe929e6b61ead2217bc5a646a}{}\label{classns3_1_1TcpSocketBase_a7aa3d6dfe929e6b61ead2217bc5a646a}


Get the type ID. 

Get the type ID. \begin{DoxyReturn}{Returns}
the object \hyperlink{classns3_1_1TypeId}{Type\+Id} 
\end{DoxyReturn}

\begin{DoxyCode}
68 \{
69   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::TcpSocketBase"})
70     .SetParent<\hyperlink{classns3_1_1TcpSocket_a70c351707b7af59abb6912cd7d145e60}{TcpSocket}> ()
71     .SetGroupName (\textcolor{stringliteral}{"Internet"})
72     .AddConstructor<\hyperlink{classns3_1_1TcpSocketBase_a89e51540a8ac03d929349ae2ec56239b}{TcpSocketBase}> ()
73 \textcolor{comment}{//    .AddAttribute ("TcpState", "State in TCP state machine",}
74 \textcolor{comment}{//                   TypeId::ATTR\_GET,}
75 \textcolor{comment}{//                   EnumValue (CLOSED),}
76 \textcolor{comment}{//                   MakeEnumAccessor (&TcpSocketBase::m\_state),}
77 \textcolor{comment}{//                   MakeEnumChecker (CLOSED, "Closed"))}
78     .AddAttribute (\textcolor{stringliteral}{"MaxSegLifetime"},
79                    \textcolor{stringliteral}{"Maximum segment lifetime in seconds, use for TIME\_WAIT state transition to CLOSED state
      "},
80                    DoubleValue (120), \textcolor{comment}{/* RFC793 says MSL=2 minutes*/}
81                    MakeDoubleAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a668a2cc5cf751511263ee8a0766c9ea5}{TcpSocketBase::m\_msl}),
82                    MakeDoubleChecker<double> (0))
83     .AddAttribute (\textcolor{stringliteral}{"MaxWindowSize"}, \textcolor{stringliteral}{"Max size of advertised window"},
84                    UintegerValue (65535),
85                    MakeUintegerAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{TcpSocketBase::m\_maxWinSize}),
86                    MakeUintegerChecker<uint16\_t> ())
87     .AddAttribute (\textcolor{stringliteral}{"IcmpCallback"}, \textcolor{stringliteral}{"Callback invoked whenever an icmp error is received on this socket."},
88                    CallbackValue (),
89                    MakeCallbackAccessor (&\hyperlink{classns3_1_1TcpSocketBase_aef792b929bd15886a4b9a7132525a0ea}{TcpSocketBase::m\_icmpCallback}),
90                    MakeCallbackChecker ())
91     .AddAttribute (\textcolor{stringliteral}{"IcmpCallback6"}, \textcolor{stringliteral}{"Callback invoked whenever an icmpv6 error is received on this socket."}
      ,
92                    CallbackValue (),
93                    MakeCallbackAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a75aca0603de58d7db7c0fa7daab34064}{TcpSocketBase::m\_icmpCallback6}),
94                    MakeCallbackChecker ())
95     .AddAttribute (\textcolor{stringliteral}{"WindowScaling"}, \textcolor{stringliteral}{"Enable or disable Window Scaling option"},
96                    BooleanValue (\textcolor{keyword}{true}),
97                    MakeBooleanAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{TcpSocketBase::m\_winScalingEnabled}
      ),
98                    MakeBooleanChecker ())
99     .AddAttribute (\textcolor{stringliteral}{"Sack"}, \textcolor{stringliteral}{"Enable or disable Sack option"},
100                    BooleanValue (\textcolor{keyword}{true}),
101                    MakeBooleanAccessor (&\hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{TcpSocketBase::m\_sackEnabled}),
102                    MakeBooleanChecker ())
103     .AddAttribute (\textcolor{stringliteral}{"Timestamp"}, \textcolor{stringliteral}{"Enable or disable Timestamp option"},
104                    BooleanValue (\textcolor{keyword}{true}),
105                    MakeBooleanAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{TcpSocketBase::m\_timestampEnabled}
      ),
106                    MakeBooleanChecker ())
107     .AddAttribute (\textcolor{stringliteral}{"MinRto"},
108                    \textcolor{stringliteral}{"Minimum retransmit timeout value"},
109                    TimeValue (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (1.0)), \textcolor{comment}{// RFC 6298 says min RTO=1 sec, but Linux uses 200ms.}
110                    \textcolor{comment}{// See http://www.postel.org/pipermail/end2end-interest/2004-November/004402.html}
111                    MakeTimeAccessor (&\hyperlink{classns3_1_1TcpSocketBase_af99b7fe3341051dead8b4e26a5b2c12b}{TcpSocketBase::SetMinRto},
112                                      &\hyperlink{classns3_1_1TcpSocketBase_a7a2d5935f65b598dba9e2c01506cdbb3}{TcpSocketBase::GetMinRto}),
113                    \hyperlink{group__time_ga7032965bd4afa578691d88c09e4481c1}{MakeTimeChecker} ())
114     .AddAttribute (\textcolor{stringliteral}{"ClockGranularity"},
115                    \textcolor{stringliteral}{"Clock Granularity used in RTO calculations"},
116                    TimeValue (\hyperlink{group__timecivil_gaf26127cf4571146b83a92ee18679c7a9}{MilliSeconds} (1)), \textcolor{comment}{// RFC6298 suggest to use fine clock
       granularity}
117                    MakeTimeAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a9164b842ec64a11e42f5b5e87cb2cecc}{TcpSocketBase::SetClockGranularity},
118                                      &\hyperlink{classns3_1_1TcpSocketBase_a4c47e3add9c7e8023884e0df5a88c489}{TcpSocketBase::GetClockGranularity})
      ,
119                    \hyperlink{group__time_ga7032965bd4afa578691d88c09e4481c1}{MakeTimeChecker} ())
120     .AddAttribute (\textcolor{stringliteral}{"TxBuffer"},
121                    \textcolor{stringliteral}{"TCP Tx buffer"},
122                    PointerValue (),
123                    MakePointerAccessor (&\hyperlink{classns3_1_1TcpSocketBase_aea4dd16496e03e7cc96d0ed8c51256fa}{TcpSocketBase::GetTxBuffer}),
124                    MakePointerChecker<TcpTxBuffer> ())
125     .AddAttribute (\textcolor{stringliteral}{"RxBuffer"},
126                    \textcolor{stringliteral}{"TCP Rx buffer"},
127                    PointerValue (),
128                    MakePointerAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a4107fd640582c5e35641994386e11b55}{TcpSocketBase::GetRxBuffer}),
129                    MakePointerChecker<TcpRxBuffer> ())
130     .AddAttribute (\textcolor{stringliteral}{"ReTxThreshold"}, \textcolor{stringliteral}{"Threshold for fast retransmit"},
131                    UintegerValue (3),
132                    MakeUintegerAccessor (&\hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{TcpSocketBase::m\_retxThresh}),
133                    MakeUintegerChecker<uint32\_t> ())
134     .AddAttribute (\textcolor{stringliteral}{"LimitedTransmit"}, \textcolor{stringliteral}{"Enable limited transmit"},
135                    BooleanValue (\textcolor{keyword}{true}),
136                    MakeBooleanAccessor (&\hyperlink{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}{TcpSocketBase::m\_limitedTx}),
137                    MakeBooleanChecker ())
138     .AddTraceSource (\textcolor{stringliteral}{"RTO"},
139                      \textcolor{stringliteral}{"Retransmission timeout"},
140                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{TcpSocketBase::m\_rto}),
141                      \textcolor{stringliteral}{"ns3::Time::TracedValueCallback"})
142     .AddTraceSource (\textcolor{stringliteral}{"RTT"},
143                      \textcolor{stringliteral}{"Last RTT sample"},
144                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{TcpSocketBase::m\_lastRtt}),
145                      \textcolor{stringliteral}{"ns3::Time::TracedValueCallback"})
146     .AddTraceSource (\textcolor{stringliteral}{"NextTxSequence"},
147                      \textcolor{stringliteral}{"Next sequence number to send (SND.NXT)"},
148                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a4f6e09e3f0132fbf82af53bcd9c49acc}{TcpSocketBase::m\_nextTxSequenceTrace}),
149                      \textcolor{stringliteral}{"ns3::SequenceNumber32TracedValueCallback"})
150     .AddTraceSource (\textcolor{stringliteral}{"HighestSequence"},
151                      \textcolor{stringliteral}{"Highest sequence number ever sent in socket's life time"},
152                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_abe31167cc73bc1917e616aa210fa1041}{TcpSocketBase::m\_highTxMarkTrace}),
153                      \textcolor{stringliteral}{"ns3::SequenceNumber32TracedValueCallback"})
154     .AddTraceSource (\textcolor{stringliteral}{"State"},
155                      \textcolor{stringliteral}{"TCP state"},
156                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{TcpSocketBase::m\_state}),
157                      \textcolor{stringliteral}{"ns3::TcpStatesTracedValueCallback"})
158     .AddTraceSource (\textcolor{stringliteral}{"CongState"},
159                      \textcolor{stringliteral}{"TCP Congestion machine state"},
160                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a682c31efa86a22cbffae1f4ba7c0bbc4}{TcpSocketBase::m\_congStateTrace}),
161                      \textcolor{stringliteral}{"ns3::TcpSocketState::TcpCongStatesTracedValueCallback"})
162     .AddTraceSource (\textcolor{stringliteral}{"AdvWND"},
163                      \textcolor{stringliteral}{"Advertised Window Size"},
164                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a12a1c017e48895fbe36df0d54a509041}{TcpSocketBase::m\_advWnd}),
165                      \textcolor{stringliteral}{"ns3::TracedValueCallback::Uint32"})
166     .AddTraceSource (\textcolor{stringliteral}{"RWND"},
167                      \textcolor{stringliteral}{"Remote side's flow control window"},
168                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{TcpSocketBase::m\_rWnd}),
169                      \textcolor{stringliteral}{"ns3::TracedValueCallback::Uint32"})
170     .AddTraceSource (\textcolor{stringliteral}{"BytesInFlight"},
171                      \textcolor{stringliteral}{"Socket estimation of bytes in flight"},
172                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}{TcpSocketBase::m\_bytesInFlight}),
173                      \textcolor{stringliteral}{"ns3::TracedValueCallback::Uint32"})
174     .AddTraceSource (\textcolor{stringliteral}{"HighestRxSequence"},
175                      \textcolor{stringliteral}{"Highest sequence number received from peer"},
176                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}{TcpSocketBase::m\_highRxMark}),
177                      \textcolor{stringliteral}{"ns3::SequenceNumber32TracedValueCallback"})
178     .AddTraceSource (\textcolor{stringliteral}{"HighestRxAck"},
179                      \textcolor{stringliteral}{"Highest ack received from peer"},
180                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{TcpSocketBase::m\_highRxAckMark}),
181                      \textcolor{stringliteral}{"ns3::SequenceNumber32TracedValueCallback"})
182     .AddTraceSource (\textcolor{stringliteral}{"CongestionWindow"},
183                      \textcolor{stringliteral}{"The TCP connection's congestion window"},
184                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a53183f9cee6315bcb73742b9b9d14970}{TcpSocketBase::m\_cWndTrace}),
185                      \textcolor{stringliteral}{"ns3::TracedValueCallback::Uint32"})
186     .AddTraceSource (\textcolor{stringliteral}{"SlowStartThreshold"},
187                      \textcolor{stringliteral}{"TCP slow start threshold (bytes)"},
188                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_aba33c4aa346eeb1a205a97844d8ed689}{TcpSocketBase::m\_ssThTrace}),
189                      \textcolor{stringliteral}{"ns3::TracedValueCallback::Uint32"})
190     .AddTraceSource (\textcolor{stringliteral}{"Tx"},
191                      \textcolor{stringliteral}{"Send tcp packet to IP protocol"},
192                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{TcpSocketBase::m\_txTrace}),
193                      \textcolor{stringliteral}{"ns3::TcpSocketBase::TcpTxRxTracedCallback"})
194     .AddTraceSource (\textcolor{stringliteral}{"Rx"},
195                      \textcolor{stringliteral}{"Receive tcp packet from IP protocol"},
196                      \hyperlink{group__tracing_gab21a770b9855af4e8f69f7531ea4a6b0}{MakeTraceSourceAccessor} (&
      \hyperlink{classns3_1_1TcpSocketBase_a27b35f098b956baf89388fff0d4e539b}{TcpSocketBase::m\_rxTrace}),
197                      \textcolor{stringliteral}{"ns3::TcpSocketBase::TcpTxRxTracedCallback"})
198   ;
199   \textcolor{keywordflow}{return} tid;
200 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 84




Here is the caller graph for this function\+:
% FIG 85


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Is\+Tcp\+Option\+Enabled@{Is\+Tcp\+Option\+Enabled}}
\index{Is\+Tcp\+Option\+Enabled@{Is\+Tcp\+Option\+Enabled}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Is\+Tcp\+Option\+Enabled(uint8\+\_\+t kind) const }{IsTcpOptionEnabled(uint8_t kind) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::\+Is\+Tcp\+Option\+Enabled (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{kind}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_afb18d462bc2f1c1fe7f47d9e909b007a}{}\label{classns3_1_1TcpSocketBase_afb18d462bc2f1c1fe7f47d9e909b007a}


Return true if the specified option is enabled. 


\begin{DoxyParams}{Parameters}
{\em kind} & kind of T\+CP option \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the option is enabled 
\end{DoxyReturn}

\begin{DoxyCode}
1484 \{
1485   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << (\textcolor{keywordtype}{int})kind);
1486 
1487   \textcolor{keywordflow}{switch} (kind)
1488     \{
1489     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda36327bb876e173f67d0881ecccc10bba}{TcpOption::TS}:
1490       \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{m\_timestampEnabled};
1491     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efddab982246aeba4e5c8a134da32317b44c0}{TcpOption::WINSCALE}:
1492       \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{m\_winScalingEnabled};
1493     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efddab7c52885f2df3f09365bbb3781261a06}{TcpOption::SACKPERMITTED}:
1494     \textcolor{keywordflow}{case} \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda15a723b4b912895242cef1595f19b0a2}{TcpOption::SACK}:
1495       \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled};
1496     \textcolor{keywordflow}{default}:
1497       \textcolor{keywordflow}{break};
1498     \}
1499   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1500 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Last\+Ack\+Timeout@{Last\+Ack\+Timeout}}
\index{Last\+Ack\+Timeout@{Last\+Ack\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Last\+Ack\+Timeout(void)}{LastAckTimeout(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Last\+Ack\+Timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_affa65b010fdc8c5f32105f5c8279f50d}{}\label{classns3_1_1TcpSocketBase_affa65b010fdc8c5f32105f5c8279f50d}


Timeout at L\+A\+S\+T\+\_\+\+A\+CK, close the connection. 


\begin{DoxyCode}
3250 \{
3251   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
3252 
3253   \hyperlink{classns3_1_1TcpSocketBase_ac6933cbf3722ece8188d40a889c45649}{m\_lastAckEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3254   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK})
3255     \{
3256       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
3257     \}
3258   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified})
3259     \{
3260       \hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified} = \textcolor{keyword}{true};
3261     \}
3262 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 86




Here is the caller graph for this function\+:
% FIG 87


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Limited\+Transmit@{Limited\+Transmit}}
\index{Limited\+Transmit@{Limited\+Transmit}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Limited\+Transmit()}{LimitedTransmit()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Limited\+Transmit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ae192934b14961166fa6cd3197c85406c}{}\label{classns3_1_1TcpSocketBase_ae192934b14961166fa6cd3197c85406c}


Limited transmit algorithm. 


\begin{DoxyCode}
1527 \{
1528   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1529   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}{m\_limitedTx});
1530 
1531   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Limited transmit"});
1532   \textcolor{comment}{// RFC 6675, Section 5, point 3, continuing :}
1533   \textcolor{comment}{// (3.2) Run SetPipe ().}
1534   \textcolor{comment}{// (3.3) If (cwnd - pipe) >= 1 SMSS, there exists previously unsent}
1535   \textcolor{comment}{//      data, and the receiver's advertised window allows, transmit}
1536   \textcolor{comment}{//      up to 1 SMSS of data starting with the octet HighData+1 and}
1537   \textcolor{comment}{//      update HighData to reflect this transmission, then return}
1538   \textcolor{comment}{//      to (3.2).}
1539   \textcolor{comment}{// (3.2) and (3.1) done in SendPendingData}
1540   \hyperlink{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}{SendPendingData} (\hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected});
1541 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 88




Here is the caller graph for this function\+:
% FIG 89


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Listen@{Listen}}
\index{Listen@{Listen}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Listen(void)}{Listen(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Listen (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a4d6c4cf0d65fd6e50aa969964ccc029b}{}\label{classns3_1_1TcpSocketBase_a4d6c4cf0d65fd6e50aa969964ccc029b}


Listen for incoming connections. 

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error (in which case errno is set). 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_a6b3529a32632cf1a56debf5f79e56c54}{ns3\+::\+Socket}.


\begin{DoxyCode}
747 \{
748   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
749 
750   \textcolor{comment}{// Linux quits EINVAL if we're not in CLOSED state, so match what they do}
751   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} != \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED})
752     \{
753       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaa4b98dd50740861229f8e03bcc36d379b}{ERROR\_INVAL};
754       \textcolor{keywordflow}{return} -1;
755     \}
756   \textcolor{comment}{// In other cases, set the state to LISTEN and done}
757   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"CLOSED -> LISTEN"});
758   \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a581d49096b20553996c0ef8aaf2712f8}{LISTEN};
759   \textcolor{keywordflow}{return} 0;
760 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!New\+Ack@{New\+Ack}}
\index{New\+Ack@{New\+Ack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{New\+Ack(\+Sequence\+Number32 const \&seq, bool reset\+R\+T\+O)}{NewAck(SequenceNumber32 const &seq, bool resetRTO)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+New\+Ack (
\begin{DoxyParamCaption}
\item[{{\bf Sequence\+Number32} const \&}]{seq, }
\item[{bool}]{reset\+R\+TO}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a13401dd51854607d0521a35bf2622761}{}\label{classns3_1_1TcpSocketBase_a13401dd51854607d0521a35bf2622761}


Update buffers w.\+r.\+t. A\+CK. 


\begin{DoxyParams}{Parameters}
{\em seq} & the sequence number \\
\hline
{\em reset\+R\+TO} & indicates if R\+TO should be reset \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3107 \{
3108   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << ack);
3109 
3110   \textcolor{comment}{// Reset the data retransmission count. We got a new ACK!}
3111   \hyperlink{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{m\_dataRetrCount} = \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\_dataRetries};
3112 
3113   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} != \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03abdb50eab9f592a17a412a62deddde11a}{SYN\_RCVD} && resetRTO)
3114     \{ \textcolor{comment}{// Set RTO unless the ACK is received in SYN\_RCVD state}
3115       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Cancelled ReTxTimeout event which was set to expire at "} <<
3116                     (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1Simulator_af2c7b4285454aa5062bd2df2bb7a7ab9}{Simulator::GetDelayLeft} (
      \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent})).GetSeconds ());
3117       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3118       \textcolor{comment}{// On receiving a "New" ack we restart retransmission timer .. RFC 6298}
3119       \textcolor{comment}{// RFC 6298, clause 2.4}
3120       \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} = \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (\hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetEstimate () + \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (
      \hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity}, \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetVariation () * 4), \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto});
3121 
3122       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Schedule ReTxTimeout at time "} <<
3123                     \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds () << \textcolor{stringliteral}{" to expire at time "} <<
3124                     (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ()).GetSeconds ());
3125       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (\hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}, &
      \hyperlink{classns3_1_1TcpSocketBase_a60bb6a7cfb5855bba206606174d50c5e}{TcpSocketBase::ReTxTimeout}, \textcolor{keyword}{this});
3126     \}
3127 
3128   \textcolor{comment}{// Note the highest ACK and tell app to send more}
3129   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"TCP "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" NewAck "} << ack <<
3130                 \textcolor{stringliteral}{" numberAck "} << (ack - \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ())); \textcolor{comment}{// Number bytes ack'ed}
3131   \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->DiscardUpTo (ack);
3132   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{GetTxAvailable} () > 0)
3133     \{
3134       \hyperlink{classns3_1_1Socket_a34cd5de5b9feeadd6ba8973b954c3d5f}{NotifySend} (\hyperlink{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{GetTxAvailable} ());
3135     \}
3136   \textcolor{keywordflow}{if} (ack > \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence})
3137     \{
3138       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} = ack; \textcolor{comment}{// If advanced}
3139     \}
3140   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () == 0 && \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} != \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1} && 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} != \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING})
3141     \{ \textcolor{comment}{// No retransmit timer if no data to retransmit}
3142       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" Cancelled ReTxTimeout event which was set to expire at "} <<
3143                     (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1Simulator_af2c7b4285454aa5062bd2df2bb7a7ab9}{Simulator::GetDelayLeft} (
      \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent})).GetSeconds ());
3144       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3145     \}
3146 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 90




Here is the caller graph for this function\+:
% FIG 91


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Out\+Of\+Range@{Out\+Of\+Range}}
\index{Out\+Of\+Range@{Out\+Of\+Range}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Out\+Of\+Range(\+Sequence\+Number32 head, Sequence\+Number32 tail) const }{OutOfRange(SequenceNumber32 head, SequenceNumber32 tail) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::\+Out\+Of\+Range (
\begin{DoxyParamCaption}
\item[{{\bf Sequence\+Number32}}]{head, }
\item[{{\bf Sequence\+Number32}}]{tail}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a99af6d09e114652b31187db88da577b6}{}\label{classns3_1_1TcpSocketBase_a99af6d09e114652b31187db88da577b6}


Check if a sequence number range is within the rx window. 


\begin{DoxyParams}{Parameters}
{\em head} & start of the Sequence window \\
\hline
{\em tail} & end of the Sequence window \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if it is in range 
\end{DoxyReturn}

\begin{DoxyCode}
1132 \{
1133   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a581d49096b20553996c0ef8aaf2712f8}{LISTEN} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a93f185d16390df3819d44eca0c349cc3}{SYN\_SENT} || 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03abdb50eab9f592a17a412a62deddde11a}{SYN\_RCVD})
1134     \{ \textcolor{comment}{// Rx buffer in these states are not initialized.}
1135       \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1136     \}
1137   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING} || 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT})
1138     \{ \textcolor{comment}{// In LAST\_ACK and CLOSING states, it only wait for an ACK and the}
1139       \textcolor{comment}{// sequence number must equals to m\_rxBuffer->NextRxSequence ()}
1140       \textcolor{keywordflow}{return} (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () != head);
1141     \}
1142 
1143   \textcolor{comment}{// In all other cases, check if the sequence number is in range}
1144   \textcolor{keywordflow}{return} (tail < m\_rxBuffer->NextRxSequence () || \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxRxSequence () <= head);
1145 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 92


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Peer\+Close@{Peer\+Close}}
\index{Peer\+Close@{Peer\+Close}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Peer\+Close(\+Ptr$<$ Packet $>$ p, const Tcp\+Header \&tcp\+Header)}{PeerClose(Ptr< Packet > p, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Peer\+Close (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{p, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a417d981796bf0919582c843403f823ad}{}\label{classns3_1_1TcpSocketBase_a417d981796bf0919582c843403f823ad}


Received a F\+IN from peer, notify rx buffer. 


\begin{DoxyParams}{Parameters}
{\em p} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
2210 \{
2211   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
2212 
2213   \textcolor{comment}{// Ignore all out of range packets}
2214   \textcolor{keywordflow}{if} (tcpHeader.GetSequenceNumber () < \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ()
2215       || tcpHeader.GetSequenceNumber () > \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->MaxRxSequence ())
2216     \{
2217       \textcolor{keywordflow}{return};
2218     \}
2219   \textcolor{comment}{// For any case, remember the FIN position in rx buffer first}
2220   \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->SetFinSequence (tcpHeader.GetSequenceNumber () + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()));
2221   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Accepted FIN at seq "} << tcpHeader.GetSequenceNumber () + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()));
2222   \textcolor{comment}{// If there is any piggybacked data, process it}
2223   \textcolor{keywordflow}{if} (p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ())
2224     \{
2225       \hyperlink{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{ReceivedData} (p, tcpHeader);
2226     \}
2227   \textcolor{comment}{// Return if FIN is out of sequence, otherwise move to CLOSE\_WAIT state by DoPeerClose}
2228   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Finished ())
2229     \{
2230       \textcolor{keywordflow}{return};
2231     \}
2232 
2233   \textcolor{comment}{// Simultaneous close: Application invoked Close() when we are processing this FIN packet}
2234   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1})
2235     \{
2236       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"FIN\_WAIT\_1 -> CLOSING"});
2237       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING};
2238       \textcolor{keywordflow}{return};
2239     \}
2240 
2241   \hyperlink{classns3_1_1TcpSocketBase_a8a56cf4ab3b64d9f781ed1b1f63f51cd}{DoPeerClose} (); \textcolor{comment}{// Change state, respond with ACK}
2242 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 93




Here is the caller graph for this function\+:
% FIG 94


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Persist\+Timeout@{Persist\+Timeout}}
\index{Persist\+Timeout@{Persist\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Persist\+Timeout(void)}{PersistTimeout(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Persist\+Timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a80fe451da81e0059154321eee693de31}{}\label{classns3_1_1TcpSocketBase_a80fe451da81e0059154321eee693de31}


Send 1 byte probe to get an updated window size. 


\begin{DoxyCode}
3269 \{
3270   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"PersistTimeout expired at "} << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds ());
3271   \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout} = \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (60), \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} (2 * 
      \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout})); \textcolor{comment}{// max persist timeout = 60s}
3272   Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->CopyFromSequence (1, \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence});
3273   \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->ResetLastSegmentSent ();
3274   TcpHeader tcpHeader;
3275   tcpHeader.SetSequenceNumber (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence});
3276   tcpHeader.SetAckNumber (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ());
3277   tcpHeader.SetWindowSize (\hyperlink{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{AdvertisedWindowSize} ());
3278   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
3279     \{
3280       tcpHeader.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aab137f64770abf94f0b8a81217a0b106}{GetLocalPort} ());
3281       tcpHeader.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0954ccf4be313b3a2992894ae2baf1c6}{GetPeerPort} ());
3282     \}
3283   \textcolor{keywordflow}{else}
3284     \{
3285       tcpHeader.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a39a9fd4aa85a8ecbbf2d6c84d589080b}{GetLocalPort} ());
3286       tcpHeader.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_ac200f6b424104280ec1e55a415ed96fd}{GetPeerPort} ());
3287     \}
3288   \hyperlink{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}{AddOptions} (tcpHeader);
3289 
3290   \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{m\_txTrace} (p, tcpHeader, \textcolor{keyword}{this});
3291 
3292   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
3293     \{
3294       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, tcpHeader, \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->
      \hyperlink{classns3_1_1Ipv4EndPoint_ae08283e26ace5880c3172ea5d803b6f8}{GetLocalAddress} (),
3295                          \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
3296     \}
3297   \textcolor{keywordflow}{else}
3298     \{
3299       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, tcpHeader, \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->
      \hyperlink{classns3_1_1Ipv6EndPoint_a1972cd26240d42cd75f93e12d9182976}{GetLocalAddress} (),
3300                          \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
3301     \}
3302 
3303   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Schedule persist timeout at time "}
3304                 << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds () << \textcolor{stringliteral}{" to expire at time "}
3305                 << (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout}).GetSeconds ());
3306   \hyperlink{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{m\_persistEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (
      \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout}, &\hyperlink{classns3_1_1TcpSocketBase_a80fe451da81e0059154321eee693de31}{TcpSocketBase::PersistTimeout}, \textcolor{keyword}{this});
3307 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 95




Here is the caller graph for this function\+:
% FIG 96


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Ack@{Process\+Ack}}
\index{Process\+Ack@{Process\+Ack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Ack(const Sequence\+Number32 \&ack\+Number, bool scoreboard\+Updated)}{ProcessAck(const SequenceNumber32 &ackNumber, bool scoreboardUpdated)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Ack (
\begin{DoxyParamCaption}
\item[{const {\bf Sequence\+Number32} \&}]{ack\+Number, }
\item[{bool}]{scoreboard\+Updated}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a7c8a0eb71e14abececff528e8d4261b6}{}\label{classns3_1_1TcpSocketBase_a7c8a0eb71e14abececff528e8d4261b6}


Process a received ack. 


\begin{DoxyParams}{Parameters}
{\em ack\+Number} & ack number \\
\hline
{\em scoreboard\+Updated} & if true indicates that the scoreboard has been updated with S\+A\+CK information \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1676 \{
1677   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << ackNumber << scoreboardUpdated);
1678   \textcolor{comment}{// RFC 6675, Section 5, 2nd paragraph:}
1679   \textcolor{comment}{// If the incoming ACK is a cumulative acknowledgment, the TCP MUST}
1680   \textcolor{comment}{// reset DupAcks to zero.}
1681   uint32\_t oldDupAckCount = \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount}; \textcolor{comment}{// remember the old value}
1682   \textcolor{keywordflow}{if} (ackNumber > \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ())
1683     \{
1684       \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} = 0;
1685     \}
1686 
1687   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7a30ba2b675238429c7fe2f0c8d1ce94}{m\_lastAckedSeq} = ackNumber; \textcolor{comment}{// Update lastAckedSeq}
1688 
1689   \textcolor{comment}{/* In RFC 5681 the definition of duplicate acknowledgment was strict:}
1690 \textcolor{comment}{   *}
1691 \textcolor{comment}{   * (a) the receiver of the ACK has outstanding data,}
1692 \textcolor{comment}{   * (b) the incoming acknowledgment carries no data,}
1693 \textcolor{comment}{   * (c) the SYN and FIN bits are both off,}
1694 \textcolor{comment}{   * (d) the acknowledgment number is equal to the greatest acknowledgment}
1695 \textcolor{comment}{   *     received on the given connection (TCP.UNA from [RFC793]),}
1696 \textcolor{comment}{   * (e) the advertised window in the incoming acknowledgment equals the}
1697 \textcolor{comment}{   *     advertised window in the last incoming acknowledgment.}
1698 \textcolor{comment}{   *}
1699 \textcolor{comment}{   * With RFC 6675, this definition has been reduced:}
1700 \textcolor{comment}{   *}
1701 \textcolor{comment}{   * (a) the ACK is carrying a SACK block that identifies previously}
1702 \textcolor{comment}{   *     unacknowledged and un-SACKed octets between HighACK (TCP.UNA) and}
1703 \textcolor{comment}{   *     HighData (m\_highTxMark)}
1704 \textcolor{comment}{   */}
1705   \textcolor{comment}{// RFC 6675, Section 5, 3rd paragraph:}
1706   \textcolor{comment}{// If the incoming ACK is a duplicate acknowledgment per the definition}
1707   \textcolor{comment}{// in Section 2 (regardless of its status as a cumulative}
1708   \textcolor{comment}{// acknowledgment), and the TCP is not currently in loss recovery}
1709   \textcolor{keywordflow}{if} (scoreboardUpdated)
1710     \{
1711       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ACK of "} << ackNumber <<
1712                     \textcolor{stringliteral}{" SND.UNA="} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence () <<
1713                     \textcolor{stringliteral}{" SND.NXT="} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} <<
1714                     \textcolor{stringliteral}{" we are ready to process the dupAck"});
1715       \textcolor{comment}{// loss recovery check is done inside this function thanks to}
1716       \textcolor{comment}{// the congestion state machine}
1717       \hyperlink{classns3_1_1TcpSocketBase_a9139f54e2cdf0f1a796011a43dabfad5}{DupAck} ();
1718     \}
1719 
1720   \textcolor{keywordflow}{if} (ackNumber == \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ()
1721       && ackNumber == \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence})
1722     \{
1723       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"ACK of "} << ackNumber <<
1724                    \textcolor{stringliteral}{", there is no need to process (we haven't data to transmit)"});
1725       \textcolor{comment}{// Dupack, but the ACK is precisely equal to the nextTxSequence}
1726       \textcolor{keywordflow}{return};
1727     \}
1728   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ackNumber == \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ()
1729            && ackNumber > \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence})
1730     \{
1731       \textcolor{comment}{// ACK of the FIN bit ... nextTxSequence is not updated since we}
1732       \textcolor{comment}{// don't have anything to transmit}
1733       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Update nextTxSequence manually to "} << ackNumber);
1734       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} = ackNumber;
1735     \}
1736   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ackNumber == \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ())
1737     \{
1738       \textcolor{comment}{// DupAck. Artificially call PktsAcked: after all, one segment has been ACKed.}
1739       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"ACK of "} << ackNumber << \textcolor{stringliteral}{", PktsAcked called (ACK already managed in DupAck)
      "});
1740       \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->PktsAcked (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 1, 
      \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
1741     \}
1742   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ackNumber > \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ())
1743     \{
1744       uint32\_t bytesAcked = ackNumber - \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ();
1745       uint32\_t segsAcked  = bytesAcked / \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
1746       \hyperlink{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}{m\_bytesAckedNotProcessed} += bytesAcked % \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
1747 
1748       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}{m\_bytesAckedNotProcessed} >= \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize})
1749         \{
1750           segsAcked += 1;
1751           \hyperlink{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}{m\_bytesAckedNotProcessed} -= \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
1752         \}
1753 
1754       \textcolor{comment}{// RFC 6675, Section 5, part (B)}
1755       \textcolor{comment}{// (B) Upon receipt of an ACK that does not cover RecoveryPoint, the}
1756       \textcolor{comment}{// following actions MUST be taken:}
1757       \textcolor{comment}{//}
1758       \textcolor{comment}{// (B.1) Use Update () to record the new SACK information conveyed}
1759       \textcolor{comment}{//       by the incoming ACK.}
1760       \textcolor{comment}{// (B.2) Use SetPipe () to re-calculate the number of octets still}
1761       \textcolor{comment}{//       in the network.}
1762       \textcolor{comment}{//}
1763       \textcolor{comment}{// (B.1) is done at the beginning, while (B.2) is delayed to part (C) while}
1764       \textcolor{comment}{// trying to transmit with SendPendingData. We are not allowed to exit}
1765       \textcolor{comment}{// the CA\_RECOVERY phase. Just process this partial ack (RFC 5681)}
1766       \textcolor{keywordflow}{if} (ackNumber < m\_recover && m\_tcb->m\_congState == 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY})
1767         \{
1768           \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->DiscardUpTo (ackNumber);
1769           \hyperlink{classns3_1_1TcpSocketBase_a13b6b897811a48523988f8af6e9130d3}{DoRetransmit} (); \textcolor{comment}{// Assume the next seq is lost. Retransmit lost packet}
1770 
1771           \textcolor{comment}{// This partial ACK acknowledge the fact that one segment has been}
1772           \textcolor{comment}{// previously lost and now successfully received. All others have}
1773           \textcolor{comment}{// been processed when they come under the form of dupACKs}
1774           \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->PktsAcked (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 1, 
      \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
1775           \hyperlink{classns3_1_1TcpSocketBase_a13401dd51854607d0521a35bf2622761}{NewAck} (ackNumber, \hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\_isFirstPartialAck});
1776 
1777           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\_isFirstPartialAck})
1778             \{
1779               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Partial ACK of "} << ackNumber <<
1780                             \textcolor{stringliteral}{" and this is the first (RTO will be reset)"});
1781               \hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\_isFirstPartialAck} = \textcolor{keyword}{false};
1782             \}
1783           \textcolor{keywordflow}{else}
1784             \{
1785               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Partial ACK of "} << ackNumber <<
1786                             \textcolor{stringliteral}{" and this is NOT the first (RTO will not be reset)"});
1787             \}
1788         \}
1789       \textcolor{comment}{// From RFC 6675 section 5.1}
1790       \textcolor{comment}{// In addition, a new recovery phase (as described in Section 5) MUST NOT}
1791       \textcolor{comment}{// be initiated until HighACK is greater than or equal to the new value}
1792       \textcolor{comment}{// of RecoveryPoint.}
1793       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ackNumber < m\_recover && m\_tcb->m\_congState == 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19ad50c191d2648f5472641d8e144ccbf3d}{TcpSocketState::CA\_LOSS})
1794         \{
1795           \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->PktsAcked (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, segsAcked, 
      \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
1796 
1797           \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->IncreaseWindow (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, segsAcked);
1798 
1799           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Ack of "} << ackNumber << \textcolor{stringliteral}{", equivalent of "} << segsAcked <<
1800                         \textcolor{stringliteral}{" segments in CA\_LOSS. Cong Control Called, cWnd="} << 
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} <<
1801                         \textcolor{stringliteral}{" ssTh="} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh});
1802 
1803           \hyperlink{classns3_1_1TcpSocketBase_a13401dd51854607d0521a35bf2622761}{NewAck} (ackNumber, \textcolor{keyword}{true});
1804         \}
1805       \textcolor{keywordflow}{else}
1806         \{
1807           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN})
1808             \{
1809               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (segsAcked << \textcolor{stringliteral}{" segments acked in CA\_OPEN, ack of "} <<
1810                             ackNumber);
1811               \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->PktsAcked (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, segsAcked, 
      \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
1812             \}
1813           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a389f9d267c6b0a752d39a0d1a9ee3aae}{TcpSocketState::CA\_DISORDER})
1814             \{
1815               \textcolor{comment}{// The network reorder packets. Linux changes the counting lost}
1816               \textcolor{comment}{// packet algorithm from FACK to NewReno. We simply go back in Open.}
1817               \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN});
1818               \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} = \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN};
1819               \textcolor{keywordflow}{if} (segsAcked >= oldDupAckCount)
1820                 \{
1821                   \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->PktsAcked (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, segsAcked - oldDupAckCount
      , \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
1822                 \}
1823               \textcolor{keywordflow}{else}
1824                 \{
1825                   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (oldDupAckCount - segsAcked == 1);
1826                 \}
1827               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (segsAcked << \textcolor{stringliteral}{" segments acked in CA\_DISORDER, ack of "} <<
1828                             ackNumber << \textcolor{stringliteral}{" exiting CA\_DISORDER -> CA\_OPEN"});
1829             \}
1830           \textcolor{comment}{// RFC 6675, Section 5:}
1831           \textcolor{comment}{// Once a TCP is in the loss recovery phase, the following procedure}
1832           \textcolor{comment}{// MUST be used for each arriving ACK:}
1833           \textcolor{comment}{// (A) An incoming cumulative ACK for a sequence number greater than}
1834           \textcolor{comment}{// RecoveryPoint signals the end of loss recovery, and the loss}
1835           \textcolor{comment}{// recovery phase MUST be terminated.  Any information contained in}
1836           \textcolor{comment}{// the scoreboard for sequence numbers greater than the new value of}
1837           \textcolor{comment}{// HighACK SHOULD NOT be cleared when leaving the loss recovery}
1838           \textcolor{comment}{// phase.}
1839           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY})
1840             \{
1841               \hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\_isFirstPartialAck} = \textcolor{keyword}{true};
1842 
1843               \textcolor{comment}{// Recalculate the segs acked, that are from m\_recover to ackNumber}
1844               \textcolor{comment}{// (which are the ones we have not passed to PktsAcked and that}
1845               \textcolor{comment}{// can increase cWnd)}
1846               segsAcked = (ackNumber - \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover}) / \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
1847               \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->PktsAcked (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, segsAcked, 
      \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
1848 
1849               \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN});
1850               \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} = \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN};
1851 
1852               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (segsAcked << \textcolor{stringliteral}{" segments acked in CA\_RECOVER, ack of "} <<
1853                             ackNumber << \textcolor{stringliteral}{", exiting CA\_RECOVERY -> CA\_OPEN"});
1854             \}
1855           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19ad50c191d2648f5472641d8e144ccbf3d}{TcpSocketState::CA\_LOSS})
1856             \{
1857               \hyperlink{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{m\_isFirstPartialAck} = \textcolor{keyword}{true};
1858 
1859               \textcolor{comment}{// Recalculate the segs acked, that are from m\_recover to ackNumber}
1860               \textcolor{comment}{// (which are the ones we have not passed to PktsAcked and that}
1861               \textcolor{comment}{// can increase cWnd)}
1862               segsAcked = (ackNumber - \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover}) / \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
1863 
1864               \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->PktsAcked (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, segsAcked, 
      \hyperlink{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{m\_lastRtt});
1865 
1866               \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN});
1867               \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} = \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN};
1868               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (segsAcked << \textcolor{stringliteral}{" segments acked in CA\_LOSS, ack of"} <<
1869                             ackNumber << \textcolor{stringliteral}{", exiting CA\_LOSS -> CA\_OPEN"});
1870             \}
1871 
1872           \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->IncreaseWindow (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, segsAcked);
1873           \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} = 0;
1874 
1875           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Congestion control called: "} <<
1876                         \textcolor{stringliteral}{" cWnd: "} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} <<
1877                         \textcolor{stringliteral}{" ssTh: "} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh});
1878 
1879           \hyperlink{classns3_1_1TcpSocketBase_a13401dd51854607d0521a35bf2622761}{NewAck} (ackNumber, \textcolor{keyword}{true});
1880         \}
1881     \}
1882 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 97




Here is the caller graph for this function\+:
% FIG 98


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Closing@{Process\+Closing}}
\index{Process\+Closing@{Process\+Closing}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Closing(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header)}{ProcessClosing(Ptr< Packet > packet, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Closing (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_abc2462833556fdd737fdcdc5992768e8}{}\label{classns3_1_1TcpSocketBase_abc2462833556fdd737fdcdc5992768e8}


Received a packet upon C\+L\+O\+S\+I\+NG. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
2142 \{
2143   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
2144 
2145   \textcolor{comment}{// Extract the flags. PSH and URG are not honoured.}
2146   uint8\_t tcpflags = tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG});
2147 
2148   \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
2149     \{
2150       \textcolor{keywordflow}{if} (tcpHeader.GetSequenceNumber () == \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ())
2151         \{ \textcolor{comment}{// This ACK corresponds to the FIN sent}
2152           \hyperlink{classns3_1_1TcpSocketBase_acd41dedaf25ea16d290aa5737e303099}{TimeWait} ();
2153         \}
2154     \}
2155   \textcolor{keywordflow}{else}
2156     \{ \textcolor{comment}{// CLOSING state means simultaneous close, i.e. no one is sending data to}
2157       \textcolor{comment}{// anyone. If anything other than ACK is received, respond with a reset.}
2158       \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} || tcpflags == (
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}))
2159         \{ \textcolor{comment}{// FIN from the peer as well. We can close immediately.}
2160           \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
2161         \}
2162       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST})
2163         \{ \textcolor{comment}{// Receive of SYN or SYN+ACK or bad flags or pure data}
2164           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Illegal flag "} << \hyperlink{classns3_1_1TcpHeader_aaaa261ca12b0fb50e45c7083cec88cff}{TcpHeader::FlagsToString} (
      tcpflags) << \textcolor{stringliteral}{" received. Reset packet is sent."});
2165           \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
2166         \}
2167       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
2168     \}
2169 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 99




Here is the caller graph for this function\+:
% FIG 100


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Established@{Process\+Established}}
\index{Process\+Established@{Process\+Established}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Established(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header)}{ProcessEstablished(Ptr< Packet > packet, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Established (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a0deda9c6a4f777bf660b190cd73b102f}{}\label{classns3_1_1TcpSocketBase_a0deda9c6a4f777bf660b190cd73b102f}


Received a packet upon E\+S\+T\+A\+B\+L\+I\+S\+H\+ED state. 

This function is mimicking the role of tcp\+\_\+rcv\+\_\+established() in tcp\+\_\+input.\+c in Linux kernel.


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1416 \{
1417   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
1418 
1419   \textcolor{comment}{// Extract the flags. PSH and URG are not honoured.}
1420   uint8\_t tcpflags = tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG});
1421 
1422   \textcolor{comment}{// Different flags are different events}
1423   \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
1424     \{
1425       \textcolor{keywordflow}{if} (tcpHeader.GetAckNumber () < \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ())
1426         \{
1427           \textcolor{comment}{// Case 1:  If the ACK is a duplicate (SEG.ACK < SND.UNA), it can be ignored.}
1428           \textcolor{comment}{// Pag. 72 RFC 793}
1429           \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Ignored ack of "} << tcpHeader.GetAckNumber () <<
1430                        \textcolor{stringliteral}{" SND.UNA = "} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ());
1431 
1432           \textcolor{comment}{// TODO: RFC 5961 5.2 [Blind Data Injection Attack].[Mitigation]}
1433         \}
1434       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpHeader.GetAckNumber () > \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark})
1435         \{
1436           \textcolor{comment}{// If the ACK acks something not yet sent (SEG.ACK > HighTxMark) then}
1437           \textcolor{comment}{// send an ACK, drop the segment, and return.}
1438           \textcolor{comment}{// Pag. 72 RFC 793}
1439           \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Ignored ack of "} << tcpHeader.GetAckNumber () <<
1440                        \textcolor{stringliteral}{" HighTxMark = "} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark});
1441 
1442           \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
1443         \}
1444       \textcolor{keywordflow}{else}
1445         \{
1446           \textcolor{comment}{// SND.UNA < SEG.ACK =< HighTxMark}
1447           \textcolor{comment}{// Pag. 72 RFC 793}
1448           \hyperlink{classns3_1_1TcpSocketBase_a695c036628adf8a204a653dbf178f8cd}{ReceivedAck} (packet, tcpHeader);
1449         \}
1450     \}
1451   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN})
1452     \{ \textcolor{comment}{// Received SYN, old NS-3 behaviour is to set state to SYN\_RCVD and}
1453       \textcolor{comment}{// respond with a SYN+ACK. But it is not a legal state transition as of}
1454       \textcolor{comment}{// RFC793. Thus this is ignored.}
1455     \}
1456   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}))
1457     \{ \textcolor{comment}{// No action for received SYN+ACK, it is probably a duplicated packet}
1458     \}
1459   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} || tcpflags == (
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}))
1460     \{ \textcolor{comment}{// Received FIN or FIN+ACK, bring down this socket nicely}
1461       \hyperlink{classns3_1_1TcpSocketBase_a417d981796bf0919582c843403f823ad}{PeerClose} (packet, tcpHeader);
1462     \}
1463   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == 0)
1464     \{ \textcolor{comment}{// No flags means there is only data}
1465       \hyperlink{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{ReceivedData} (packet, tcpHeader);
1466       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Finished ())
1467         \{
1468           \hyperlink{classns3_1_1TcpSocketBase_a417d981796bf0919582c843403f823ad}{PeerClose} (packet, tcpHeader);
1469         \}
1470     \}
1471   \textcolor{keywordflow}{else}
1472     \{ \textcolor{comment}{// Received RST or the TCP flags is invalid, in either case, terminate this socket}
1473       \textcolor{keywordflow}{if} (tcpflags != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST})
1474         \{ \textcolor{comment}{// this must be an invalid flag, send reset}
1475           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Illegal flag "} << \hyperlink{classns3_1_1TcpHeader_aaaa261ca12b0fb50e45c7083cec88cff}{TcpHeader::FlagsToString} (
      tcpflags) << \textcolor{stringliteral}{" received. Reset packet is sent."});
1476           \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
1477         \}
1478       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
1479     \}
1480 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 101




Here is the caller graph for this function\+:
% FIG 102


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Last\+Ack@{Process\+Last\+Ack}}
\index{Process\+Last\+Ack@{Process\+Last\+Ack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Last\+Ack(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header)}{ProcessLastAck(Ptr< Packet > packet, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Last\+Ack (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a6700ac3f9e4d3c197499e6b7521205f2}{}\label{classns3_1_1TcpSocketBase_a6700ac3f9e4d3c197499e6b7521205f2}


Received a packet upon L\+A\+S\+T\+\_\+\+A\+CK. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
2174 \{
2175   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
2176 
2177   \textcolor{comment}{// Extract the flags. PSH and URG are not honoured.}
2178   uint8\_t tcpflags = tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG});
2179 
2180   \textcolor{keywordflow}{if} (tcpflags == 0)
2181     \{
2182       \hyperlink{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{ReceivedData} (packet, tcpHeader);
2183     \}
2184   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
2185     \{
2186       \textcolor{keywordflow}{if} (tcpHeader.GetSequenceNumber () == \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ())
2187         \{ \textcolor{comment}{// This ACK corresponds to the FIN sent. This socket closed peacefully.}
2188           \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
2189         \}
2190     \}
2191   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN})
2192     \{ \textcolor{comment}{// Received FIN again, the peer probably lost the FIN+ACK}
2193       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
2194     \}
2195   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}) || tcpflags == 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST})
2196     \{
2197       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
2198     \}
2199   \textcolor{keywordflow}{else}
2200     \{ \textcolor{comment}{// Received a SYN or SYN+ACK or bad flags}
2201       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Illegal flag "} << \hyperlink{classns3_1_1TcpHeader_aaaa261ca12b0fb50e45c7083cec88cff}{TcpHeader::FlagsToString} (
      tcpflags) << \textcolor{stringliteral}{" received. Reset packet is sent."});
2202       \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
2203       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
2204     \}
2205 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 103




Here is the caller graph for this function\+:
% FIG 104


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Listen@{Process\+Listen}}
\index{Process\+Listen@{Process\+Listen}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Listen(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header, const Address \&from\+Address, const Address \&to\+Address)}{ProcessListen(Ptr< Packet > packet, const TcpHeader &tcpHeader, const Address &fromAddress, const Address &toAddress)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Listen (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header, }
\item[{const {\bf Address} \&}]{from\+Address, }
\item[{const {\bf Address} \&}]{to\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_adc3976e8b42e884f5d99def1d5e2647f}{}\label{classns3_1_1TcpSocketBase_adc3976e8b42e884f5d99def1d5e2647f}


Received a packet upon L\+I\+S\+T\+EN state. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
{\em from\+Address} & the source address \\
\hline
{\em to\+Address} & the destination address \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1888 \{
1889   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
1890 
1891   \textcolor{comment}{// Extract the flags. PSH and URG are not honoured.}
1892   uint8\_t tcpflags = tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG});
1893 
1894   \textcolor{comment}{// Fork a socket if received a SYN. Do nothing otherwise.}
1895   \textcolor{comment}{// C.f.: the LISTEN part in tcp\_v4\_do\_rcv() in tcp\_ipv4.c in Linux kernel}
1896   \textcolor{keywordflow}{if} (tcpflags != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN})
1897     \{
1898       \textcolor{keywordflow}{return};
1899     \}
1900 
1901   \textcolor{comment}{// Call socket's notify function to let the server app know we got a SYN}
1902   \textcolor{comment}{// If the server app refuses the connection, do nothing}
1903   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1Socket_a41c2de15bac8a50d6d54067937f77d28}{NotifyConnectionRequest} (fromAddress))
1904     \{
1905       \textcolor{keywordflow}{return};
1906     \}
1907   \textcolor{comment}{// Clone the socket, simulate fork}
1908   Ptr<TcpSocketBase> newSock = \hyperlink{classns3_1_1TcpSocketBase_a991265d824d6e36affef05e1e050c752}{Fork} ();
1909   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Cloned a TcpSocketBase "} << newSock);
1910   \hyperlink{classns3_1_1Simulator_a2219ee02c0647adc83d1c918c3256266}{Simulator::ScheduleNow} (&\hyperlink{classns3_1_1TcpSocketBase_abba7d4c43acb3f9356e348b970a882fb}{TcpSocketBase::CompleteFork}, 
      newSock,
1911                           packet, tcpHeader, fromAddress, toAddress);
1912 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 105




Here is the caller graph for this function\+:
% FIG 106


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Option\+Sack@{Process\+Option\+Sack}}
\index{Process\+Option\+Sack@{Process\+Option\+Sack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Option\+Sack(const Ptr$<$ const Tcp\+Option $>$ option)}{ProcessOptionSack(const Ptr< const TcpOption > option)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Option\+Sack (
\begin{DoxyParamCaption}
\item[{const {\bf Ptr}$<$ const {\bf Tcp\+Option} $>$}]{option}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a0c41c637acc8824e691404f0c9ebe858}{}\label{classns3_1_1TcpSocketBase_a0c41c637acc8824e691404f0c9ebe858}


Read the S\+A\+CK option. 


\begin{DoxyParams}{Parameters}
{\em option} & S\+A\+CK option from the header \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true in case of an update to the S\+A\+C\+Ked blocks 
\end{DoxyReturn}

\begin{DoxyCode}
3627 \{
3628   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << option);
3629 
3630   Ptr<const TcpOptionSack> \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = DynamicCast<const TcpOptionSack> (option);
3631   \hyperlink{classns3_1_1TcpOptionSack_a2aa2d721c71424680d79ebaa079f264a}{TcpOptionSack::SackList} \hyperlink{openflow-interface_8h_afd9bcfa176617760671b67580f536fa7}{list} = s->GetSackList ();
3632   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Update (list);
3633 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 107


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Option\+Sack\+Permitted@{Process\+Option\+Sack\+Permitted}}
\index{Process\+Option\+Sack\+Permitted@{Process\+Option\+Sack\+Permitted}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Option\+Sack\+Permitted(const Ptr$<$ const Tcp\+Option $>$ option)}{ProcessOptionSackPermitted(const Ptr< const TcpOption > option)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Option\+Sack\+Permitted (
\begin{DoxyParamCaption}
\item[{const {\bf Ptr}$<$ const {\bf Tcp\+Option} $>$}]{option}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a9c7dac8b3121549ac801eb0de41801ec}{}\label{classns3_1_1TcpSocketBase_a9c7dac8b3121549ac801eb0de41801ec}


Read the S\+A\+CK P\+E\+R\+M\+I\+T\+T\+ED option. 

Currently this is a placeholder, since no operations should be done on such option.


\begin{DoxyParams}{Parameters}
{\em option} & S\+A\+CK P\+E\+R\+M\+I\+T\+T\+ED option from the header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3637 \{
3638   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << option);
3639 
3640   Ptr<const TcpOptionSackPermitted> \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = DynamicCast<const TcpOptionSackPermitted> (option);
3641 
3642   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled} == \textcolor{keyword}{true});
3643   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" Received a SACK\_PERMITTED option "} << 
      \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s});
3644 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 108




Here is the caller graph for this function\+:
% FIG 109


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Option\+Timestamp@{Process\+Option\+Timestamp}}
\index{Process\+Option\+Timestamp@{Process\+Option\+Timestamp}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Option\+Timestamp(const Ptr$<$ const Tcp\+Option $>$ option, const Sequence\+Number32 \&seq)}{ProcessOptionTimestamp(const Ptr< const TcpOption > option, const SequenceNumber32 &seq)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Option\+Timestamp (
\begin{DoxyParamCaption}
\item[{const {\bf Ptr}$<$ const {\bf Tcp\+Option} $>$}]{option, }
\item[{const {\bf Sequence\+Number32} \&}]{seq}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_af5cc928b5194d832031a1d7ec159f567}{}\label{classns3_1_1TcpSocketBase_af5cc928b5194d832031a1d7ec159f567}


Process the timestamp option from other side. 

Get the timestamp and the echo, then save timestamp (which will be the echo value in our out-\/packets) and save the echoed timestamp, to utilize later to calculate R\+TT.

\begin{DoxySeeAlso}{See also}
\hyperlink{classns3_1_1TcpSocketBase_af10157be4b91fdefbc3f618baf6919b2}{Estimate\+Rtt} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em option} & Option from the segment \\
\hline
{\em seq} & Sequence number of the segment \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3690 \{
3691   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << option);
3692 
3693   Ptr<const TcpOptionTS> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_ada841f58d7be618bfbc76c87e7d44086}{ts} = DynamicCast<const TcpOptionTS> (option);
3694 
3695   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_af590aa7004c1b09e4e20defd75a7e84a}{m\_rcvTimestampValue} = ts->GetTimestamp ();
3696   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a930be195736a97e37b7a1f92360b6261}{m\_rcvTimestampEchoReply} = ts->GetEcho();
3697 
3698   \textcolor{keywordflow}{if} (seq == \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () && seq <= \hyperlink{classns3_1_1TcpSocketBase_a593fd39ccf865253c39bae9721263255}{m\_highTxAck})
3699     \{
3700       \hyperlink{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{m\_timestampToEcho} = ts->GetTimestamp ();
3701     \}
3702 
3703   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" Got timestamp="} <<
3704                \hyperlink{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{m\_timestampToEcho} << \textcolor{stringliteral}{" and Echo="}     << ts->GetEcho ());
3705 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 110




Here is the caller graph for this function\+:
% FIG 111


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Option\+W\+Scale@{Process\+Option\+W\+Scale}}
\index{Process\+Option\+W\+Scale@{Process\+Option\+W\+Scale}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Option\+W\+Scale(const Ptr$<$ const Tcp\+Option $>$ option)}{ProcessOptionWScale(const Ptr< const TcpOption > option)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Option\+W\+Scale (
\begin{DoxyParamCaption}
\item[{const {\bf Ptr}$<$ const {\bf Tcp\+Option} $>$}]{option}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a4674edd220672235e629cb3e3b2a673f}{}\label{classns3_1_1TcpSocketBase_a4674edd220672235e629cb3e3b2a673f}


Read and parse the Window scale option. 

Read the window scale option (encoded logarithmically) and save it. Per R\+FC 1323, the value can\textquotesingle{}t exceed 14.


\begin{DoxyParams}{Parameters}
{\em option} & Window scale option read from the header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3562 \{
3563   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << option);
3564 
3565   Ptr<const TcpOptionWinScale> ws = DynamicCast<const TcpOptionWinScale> (option);
3566 
3567   \textcolor{comment}{// In naming, we do the contrary of RFC 1323. The received scaling factor}
3568   \textcolor{comment}{// is Rcv.Wind.Scale (and not Snd.Wind.Scale)}
3569   \hyperlink{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}{m\_sndWindShift} = ws->GetScale ();
3570 
3571   \textcolor{keywordflow}{if} (m\_sndWindShift > 14)
3572     \{
3573       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Possible error; m\_sndWindShift exceeds 14: "} << m\_sndWindShift);
3574       m\_sndWindShift = 14;
3575     \}
3576 
3577   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} () << \textcolor{stringliteral}{" Received a scale factor of "} <<
3578                \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>} (\hyperlink{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}{m\_sndWindShift}));
3579 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 112




Here is the caller graph for this function\+:
% FIG 113


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Syn\+Rcvd@{Process\+Syn\+Rcvd}}
\index{Process\+Syn\+Rcvd@{Process\+Syn\+Rcvd}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Syn\+Rcvd(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header, const Address \&from\+Address, const Address \&to\+Address)}{ProcessSynRcvd(Ptr< Packet > packet, const TcpHeader &tcpHeader, const Address &fromAddress, const Address &toAddress)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Syn\+Rcvd (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header, }
\item[{const {\bf Address} \&}]{from\+Address, }
\item[{const {\bf Address} \&}]{to\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a69113acf27c4b8267c9e107a5dca7cc1}{}\label{classns3_1_1TcpSocketBase_a69113acf27c4b8267c9e107a5dca7cc1}


Received a packet upon S\+Y\+N\+\_\+\+R\+C\+VD. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
{\em from\+Address} & the source address \\
\hline
{\em to\+Address} & the destination address \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1979 \{
1980   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
1981 
1982   \textcolor{comment}{// Extract the flags. PSH and URG are not honoured.}
1983   uint8\_t tcpflags = tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG});
1984 
1985   \textcolor{keywordflow}{if} (tcpflags == 0
1986       || (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}
1987           && \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} + \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1) == 
      tcpHeader.GetAckNumber ()))
1988     \{ \textcolor{comment}{// If it is bare data, accept it and move to ESTABLISHED state. This is}
1989       \textcolor{comment}{// possibly due to ACK lost in 3WHS. If in-sequence ACK is received, the}
1990       \textcolor{comment}{// handshake is completed nicely.}
1991       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"SYN\_RCVD -> ESTABLISHED"});
1992       \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN});
1993       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED};
1994       \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected} = \textcolor{keyword}{true};
1995       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
1996       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark} = ++\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence};
1997       \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SetHeadSequence (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence});
1998       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
1999         \{
2000           \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aa83bdb487bea8b5d9643c3f2efd0289f}{SetPeer} (\hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom}
       (fromAddress).GetIpv4 (),
2001                                \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (fromAddress).
      GetPort ());
2002         \}
2003       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6})
2004         \{
2005           \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a269971e8551e8e1e84865f274e89f9a0}{SetPeer} (
      \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (fromAddress).GetIpv6 (),
2006                                 \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (fromAddress
      ).GetPort ());
2007         \}
2008       \textcolor{comment}{// Always respond to first data packet to speed up the connection.}
2009       \textcolor{comment}{// Remove to get the behaviour of old NS-3 code.}
2010       \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount};
2011       \hyperlink{classns3_1_1TcpSocketBase_a695c036628adf8a204a653dbf178f8cd}{ReceivedAck} (packet, tcpHeader);
2012       \hyperlink{classns3_1_1Socket_a38c6f13f6c475afa2eadc1cf1a54a0e7}{NotifyNewConnectionCreated} (\textcolor{keyword}{this}, fromAddress);
2013       \textcolor{comment}{// As this connection is established, the socket is available to send data now}
2014       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{GetTxAvailable} () > 0)
2015         \{
2016           \hyperlink{classns3_1_1Socket_a34cd5de5b9feeadd6ba8973b954c3d5f}{NotifySend} (\hyperlink{classns3_1_1TcpSocketBase_aa2d8e1962f46031bae6f92bd9c30a068}{GetTxAvailable} ());
2017         \}
2018     \}
2019   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN})
2020     \{ \textcolor{comment}{// Probably the peer lost my SYN+ACK}
2021       \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->SetNextRxSequence (tcpHeader.GetSequenceNumber () + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1));
2022       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
2023     \}
2024   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}))
2025     \{
2026       \textcolor{keywordflow}{if} (tcpHeader.GetSequenceNumber () == \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ())
2027         \{ \textcolor{comment}{// In-sequence FIN before connection complete. Set up connection and close.}
2028           \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected} = \textcolor{keyword}{true};
2029           \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
2030           \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark} = ++\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence};
2031           \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SetHeadSequence (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence});
2032           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
2033             \{
2034               \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aa83bdb487bea8b5d9643c3f2efd0289f}{SetPeer} (
      \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (fromAddress).GetIpv4 (),
2035                                    \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (
      fromAddress).GetPort ());
2036             \}
2037           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6})
2038             \{
2039               \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a269971e8551e8e1e84865f274e89f9a0}{SetPeer} (
      \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (fromAddress).GetIpv6 (),
2040                                     \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (
      fromAddress).GetPort ());
2041             \}
2042           \hyperlink{classns3_1_1TcpSocketBase_a417d981796bf0919582c843403f823ad}{PeerClose} (packet, tcpHeader);
2043         \}
2044     \}
2045   \textcolor{keywordflow}{else}
2046     \{ \textcolor{comment}{// Other in-sequence input}
2047       \textcolor{keywordflow}{if} (tcpflags != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST})
2048         \{ \textcolor{comment}{// When (1) rx of SYN+ACK; (2) rx of FIN; (3) rx of bad flags}
2049           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Illegal flag "} << \hyperlink{classns3_1_1TcpHeader_aaaa261ca12b0fb50e45c7083cec88cff}{TcpHeader::FlagsToString} (
      tcpflags) <<
2050                         \textcolor{stringliteral}{" received. Reset packet is sent."});
2051           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
2052             \{
2053               \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aa83bdb487bea8b5d9643c3f2efd0289f}{SetPeer} (
      \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (fromAddress).GetIpv4 (),
2054                                    \hyperlink{classns3_1_1InetSocketAddress_ade776b1109e7b9a7be0b22ced49931e3}{InetSocketAddress::ConvertFrom} (
      fromAddress).GetPort ());
2055             \}
2056           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6})
2057             \{
2058               \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a269971e8551e8e1e84865f274e89f9a0}{SetPeer} (
      \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (fromAddress).GetIpv6 (),
2059                                     \hyperlink{classns3_1_1Inet6SocketAddress_a2177c66e1bcf17c85dcffb9d2a971f5a}{Inet6SocketAddress::ConvertFrom} (
      fromAddress).GetPort ());
2060             \}
2061           \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
2062         \}
2063       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
2064     \}
2065 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 114




Here is the caller graph for this function\+:
% FIG 115


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Syn\+Sent@{Process\+Syn\+Sent}}
\index{Process\+Syn\+Sent@{Process\+Syn\+Sent}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Syn\+Sent(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header)}{ProcessSynSent(Ptr< Packet > packet, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Syn\+Sent (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a2e9b990c6a4d686291033a393290906b}{}\label{classns3_1_1TcpSocketBase_a2e9b990c6a4d686291033a393290906b}


Received a packet upon S\+Y\+N\+\_\+\+S\+E\+NT. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1917 \{
1918   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
1919 
1920   \textcolor{comment}{// Extract the flags. PSH and URG are not honoured.}
1921   uint8\_t tcpflags = tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG});
1922 
1923   \textcolor{keywordflow}{if} (tcpflags == 0)
1924     \{ \textcolor{comment}{// Bare data, accept it and move to ESTABLISHED state. This is not a normal behaviour. Remove this?}
1925       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"SYN\_SENT -> ESTABLISHED"});
1926       \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN});
1927       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED};
1928       \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected} = \textcolor{keyword}{true};
1929       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
1930       \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount};
1931       \hyperlink{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{ReceivedData} (packet, tcpHeader);
1932       \hyperlink{classns3_1_1Simulator_a2219ee02c0647adc83d1c918c3256266}{Simulator::ScheduleNow} (&
      \hyperlink{classns3_1_1TcpSocketBase_a324311b484cc258ae61fbd7bcfbeeb7e}{TcpSocketBase::ConnectionSucceeded}, \textcolor{keyword}{this});
1933     \}
1934   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
1935     \{ \textcolor{comment}{// Ignore ACK in SYN\_SENT}
1936     \}
1937   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN})
1938     \{ \textcolor{comment}{// Received SYN, move to SYN\_RCVD state and respond with SYN+ACK}
1939       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"SYN\_SENT -> SYN\_RCVD"});
1940       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03abdb50eab9f592a17a412a62deddde11a}{SYN\_RCVD};
1941       \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} = \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries};
1942       \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->SetNextRxSequence (tcpHeader.GetSequenceNumber () + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1));
1943       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
1944     \}
1945   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
1946            && \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} + \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1) == 
      tcpHeader.GetAckNumber ())
1947     \{ \textcolor{comment}{// Handshake completed}
1948       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"SYN\_SENT -> ESTABLISHED"});
1949       \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN});
1950       \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED};
1951       \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected} = \textcolor{keyword}{true};
1952       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
1953       \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->SetNextRxSequence (tcpHeader.GetSequenceNumber () + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1));
1954       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark} = ++\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence};
1955       \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SetHeadSequence (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence});
1956       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
1957       \hyperlink{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}{SendPendingData} (\hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected});
1958       \hyperlink{classns3_1_1Simulator_a2219ee02c0647adc83d1c918c3256266}{Simulator::ScheduleNow} (&
      \hyperlink{classns3_1_1TcpSocketBase_a324311b484cc258ae61fbd7bcfbeeb7e}{TcpSocketBase::ConnectionSucceeded}, \textcolor{keyword}{this});
1959       \textcolor{comment}{// Always respond to first data packet to speed up the connection.}
1960       \textcolor{comment}{// Remove to get the behaviour of old NS-3 code.}
1961       \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount};
1962     \}
1963   \textcolor{keywordflow}{else}
1964     \{ \textcolor{comment}{// Other in-sequence input}
1965       \textcolor{keywordflow}{if} (tcpflags != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST})
1966         \{ \textcolor{comment}{// When (1) rx of FIN+ACK; (2) rx of FIN; (3) rx of bad flags}
1967           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Illegal flag "} << \hyperlink{classns3_1_1TcpHeader_aaaa261ca12b0fb50e45c7083cec88cff}{TcpHeader::FlagsToString} (
      tcpflags) <<
1968                         \textcolor{stringliteral}{" received. Reset packet is sent."});
1969           \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
1970         \}
1971       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
1972     \}
1973 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 116




Here is the caller graph for this function\+:
% FIG 117


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Process\+Wait@{Process\+Wait}}
\index{Process\+Wait@{Process\+Wait}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Process\+Wait(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header)}{ProcessWait(Ptr< Packet > packet, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Process\+Wait (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a58aa892c1cb33908aca5ca36967a2a99}{}\label{classns3_1_1TcpSocketBase_a58aa892c1cb33908aca5ca36967a2a99}


Received a packet upon C\+L\+O\+S\+E\+\_\+\+W\+A\+IT, F\+I\+N\+\_\+\+W\+A\+I\+T\+\_\+1, F\+I\+N\+\_\+\+W\+A\+I\+T\+\_\+2. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
2070 \{
2071   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
2072 
2073   \textcolor{comment}{// Extract the flags. PSH and URG are not honoured.}
2074   uint8\_t tcpflags = tcpHeader.GetFlags () & ~(\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a3f1e9f1fc7466d436279cfe7ab9ef3db}{TcpHeader::PSH} | 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a03d58c80bf87169baf9f2f4896b7cf65}{TcpHeader::URG});
2075 
2076   \textcolor{keywordflow}{if} (packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () > 0 && tcpflags != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
2077     \{ \textcolor{comment}{// Bare data, accept it}
2078       \hyperlink{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{ReceivedData} (packet, tcpHeader);
2079     \}
2080   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
2081     \{ \textcolor{comment}{// Process the ACK, and if in FIN\_WAIT\_1, conditionally move to FIN\_WAIT\_2}
2082       \hyperlink{classns3_1_1TcpSocketBase_a695c036628adf8a204a653dbf178f8cd}{ReceivedAck} (packet, tcpHeader);
2083       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1} && \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () == 0
2084           && tcpHeader.GetAckNumber () == \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark} + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1))
2085         \{ \textcolor{comment}{// This ACK corresponds to the FIN sent}
2086           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"FIN\_WAIT\_1 -> FIN\_WAIT\_2"});
2087           \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a21589580da204f50bec2361f7d39643f}{FIN\_WAIT\_2};
2088         \}
2089     \}
2090   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} || tcpflags == (
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN} | \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}))
2091     \{ \textcolor{comment}{// Got FIN, respond with ACK and move to next state}
2092       \textcolor{keywordflow}{if} (tcpflags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
2093         \{ \textcolor{comment}{// Process the ACK first}
2094           \hyperlink{classns3_1_1TcpSocketBase_a695c036628adf8a204a653dbf178f8cd}{ReceivedAck} (packet, tcpHeader);
2095         \}
2096       \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->SetFinSequence (tcpHeader.GetSequenceNumber ());
2097     \}
2098   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tcpflags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN} || tcpflags == (
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN} | TcpHeader::ACK))
2099     \{ \textcolor{comment}{// Duplicated SYN or SYN+ACK, possibly due to spurious retransmission}
2100       \textcolor{keywordflow}{return};
2101     \}
2102   \textcolor{keywordflow}{else}
2103     \{ \textcolor{comment}{// This is a RST or bad flags}
2104       \textcolor{keywordflow}{if} (tcpflags != \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST})
2105         \{
2106           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Illegal flag "} << \hyperlink{classns3_1_1TcpHeader_aaaa261ca12b0fb50e45c7083cec88cff}{TcpHeader::FlagsToString} (
      tcpflags) <<
2107                         \textcolor{stringliteral}{" received. Reset packet is sent."});
2108           \hyperlink{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{SendRST} ();
2109         \}
2110       \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
2111       \textcolor{keywordflow}{return};
2112     \}
2113 
2114   \textcolor{comment}{// Check if the close responder sent an in-sequence FIN, if so, respond ACK}
2115   \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a21589580da204f50bec2361f7d39643f}{FIN\_WAIT\_2}) && 
      \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Finished ())
2116     \{
2117       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1})
2118         \{
2119           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"FIN\_WAIT\_1 -> CLOSING"});
2120           \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING};
2121           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () == 0
2122               && tcpHeader.GetAckNumber () == \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark} + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (1))
2123             \{ \textcolor{comment}{// This ACK corresponds to the FIN sent}
2124               \hyperlink{classns3_1_1TcpSocketBase_acd41dedaf25ea16d290aa5737e303099}{TimeWait} ();
2125             \}
2126         \}
2127       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a21589580da204f50bec2361f7d39643f}{FIN\_WAIT\_2})
2128         \{
2129           \hyperlink{classns3_1_1TcpSocketBase_acd41dedaf25ea16d290aa5737e303099}{TimeWait} ();
2130         \}
2131       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (TcpHeader::ACK);
2132       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}{m\_shutdownRecv})
2133         \{
2134           \hyperlink{classns3_1_1Socket_a91fa3046bbd0a7644381f1d2481bdfef}{NotifyDataRecv} ();
2135         \}
2136     \}
2137 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 118




Here is the caller graph for this function\+:
% FIG 119


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Read\+Options@{Read\+Options}}
\index{Read\+Options@{Read\+Options}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Read\+Options(const Tcp\+Header \&tcp\+Header, bool \&scoreboard\+Updated)}{ReadOptions(const TcpHeader &tcpHeader, bool &scoreboardUpdated)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Read\+Options (
\begin{DoxyParamCaption}
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header, }
\item[{bool \&}]{scoreboard\+Updated}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a5fc67b6d49bb81a520c67cd6018954bb}{}\label{classns3_1_1TcpSocketBase_a5fc67b6d49bb81a520c67cd6018954bb}


Read T\+CP options begore Ack processing. 

Timestamp and Window scale are managed in other pieces of code.


\begin{DoxyParams}{Parameters}
{\em tcp\+Header} & \hyperlink{classns3_1_1Header}{Header} of the segment \\
\hline
{\em scoreboard\+Updated} & indicates if the scoreboard was updated due to a S\+A\+CK option \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1504 \{
1505   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
1506   TcpHeader::TcpOptionList::const\_iterator it;
1507   \textcolor{keyword}{const} \hyperlink{classns3_1_1TcpHeader_ac28e919e2a5be37ada2b8f06cb0c4d4a}{TcpHeader::TcpOptionList} options = tcpHeader.GetOptionList ();
1508 
1509   \textcolor{keywordflow}{for} (it = options.begin (); it != options.end (); ++it)
1510     \{
1511       \textcolor{keyword}{const} Ptr<const TcpOption> option = (*it);
1512 
1513       \textcolor{comment}{// Check only for ACK options here}
1514       \textcolor{keywordflow}{switch} (option->GetKind ())
1515         \{
1516         \textcolor{keywordflow}{case} \hyperlink{classns3_1_1TcpOption_ab5fef728704d0ef8415899ca6af3efdda15a723b4b912895242cef1595f19b0a2}{TcpOption::SACK}:
1517           scoreboardUpdated = \hyperlink{classns3_1_1TcpSocketBase_a0c41c637acc8824e691404f0c9ebe858}{ProcessOptionSack} (option);
1518           \textcolor{keywordflow}{break};
1519         \textcolor{keywordflow}{default}:
1520           \textcolor{keywordflow}{continue};
1521         \}
1522     \}
1523 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 120




Here is the caller graph for this function\+:
% FIG 121


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Received\+Ack@{Received\+Ack}}
\index{Received\+Ack@{Received\+Ack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Received\+Ack(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header)}{ReceivedAck(Ptr< Packet > packet, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Received\+Ack (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a695c036628adf8a204a653dbf178f8cd}{}\label{classns3_1_1TcpSocketBase_a695c036628adf8a204a653dbf178f8cd}


Received an A\+CK packet. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{classns3_1_1TcpSocketMsgBase_a9e6d6d2050a0e9c8a06a44462a1a7aa7}{ns3\+::\+Tcp\+Socket\+Msg\+Base}.


\begin{DoxyCode}
1645 \{
1646   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
1647 
1648   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (0 != (tcpHeader.GetFlags () & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK}));
1649   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize} > 0);
1650 
1651   \textcolor{comment}{// RFC 6675, Section 5, 1st paragraph:}
1652   \textcolor{comment}{// Upon the receipt of any ACK containing SACK information, the}
1653   \textcolor{comment}{// scoreboard MUST be updated via the Update () routine (done in ReadOptions)}
1654   \textcolor{keywordtype}{bool} scoreboardUpdated = \textcolor{keyword}{false};
1655   \hyperlink{classns3_1_1TcpSocketBase_a5fc67b6d49bb81a520c67cd6018954bb}{ReadOptions} (tcpHeader, scoreboardUpdated);
1656 
1657   \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} ackNumber = tcpHeader.GetAckNumber ();
1658 
1659   \textcolor{comment}{// RFC 6675 Section 5: 2nd, 3rd paragraph and point (A), (B) implementation}
1660   \textcolor{comment}{// are inside the function ProcessAck}
1661   \hyperlink{classns3_1_1TcpSocketBase_a7c8a0eb71e14abececff528e8d4261b6}{ProcessAck} (ackNumber, scoreboardUpdated);
1662 
1663   \textcolor{comment}{// RFC 6675, Section 5, point (C), try to send more data. NB: (C) is implemented}
1664   \textcolor{comment}{// inside SendPendingData}
1665   \hyperlink{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}{SendPendingData} (\hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected});
1666 
1667   \textcolor{comment}{// If there is any data piggybacked, store it into m\_rxBuffer}
1668   \textcolor{keywordflow}{if} (packet->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} () > 0)
1669     \{
1670       \hyperlink{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{ReceivedData} (packet, tcpHeader);
1671     \}
1672 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 122




Here is the caller graph for this function\+:
% FIG 123


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Received\+Data@{Received\+Data}}
\index{Received\+Data@{Received\+Data}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Received\+Data(\+Ptr$<$ Packet $>$ packet, const Tcp\+Header \&tcp\+Header)}{ReceivedData(Ptr< Packet > packet, const TcpHeader &tcpHeader)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Received\+Data (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{const {\bf Tcp\+Header} \&}]{tcp\+Header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}{}\label{classns3_1_1TcpSocketBase_a479e1a8be1ee1b169f87e57a4dc6f73c}


Recv of a data, put into buffer, call L7 to get it if necessary. 


\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em tcp\+Header} & the packet\textquotesingle{}s T\+CP header \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{classTcpSocketHalfAck_af7e6040b891ce8b8abd0f774a366fa90}{Tcp\+Socket\+Half\+Ack}.


\begin{DoxyCode}
2992 \{
2993   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << tcpHeader);
2994   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Data segment, seq="} << tcpHeader.GetSequenceNumber () <<
2995                 \textcolor{stringliteral}{" pkt size="} << \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p}->GetSize () );
2996 
2997   \textcolor{comment}{// Put into Rx buffer}
2998   \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} expectedSeq = \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ();
2999   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Add (\hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p}, tcpHeader))
3000     \{ \textcolor{comment}{// Insert failed: No data or RX buffer full}
3001       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
3002       \textcolor{keywordflow}{return};
3003     \}
3004   \textcolor{comment}{// Notify app to receive if necessary}
3005   \textcolor{keywordflow}{if} (expectedSeq < m\_rxBuffer->NextRxSequence ())
3006     \{ \textcolor{comment}{// NextRxSeq advanced, we have something to send to the app}
3007       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}{m\_shutdownRecv})
3008         \{
3009           \hyperlink{classns3_1_1Socket_a91fa3046bbd0a7644381f1d2481bdfef}{NotifyDataRecv} ();
3010         \}
3011       \textcolor{comment}{// Handle exceptions}
3012       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{m\_closeNotified})
3013         \{
3014           \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Why TCP "} << \textcolor{keyword}{this} << \textcolor{stringliteral}{" got data after close notification?"});
3015         \}
3016       \textcolor{comment}{// If we received FIN before and now completed all "holes" in rx buffer,}
3017       \textcolor{comment}{// invoke peer close procedure}
3018       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Finished () && (tcpHeader.GetFlags () & 
      \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN}) == 0)
3019         \{
3020           \hyperlink{classns3_1_1TcpSocketBase_a8a56cf4ab3b64d9f781ed1b1f63f51cd}{DoPeerClose} ();
3021           \textcolor{keywordflow}{return};
3022         \}
3023     \}
3024   \textcolor{comment}{// Now send a new ACK packet acknowledging all received and delivered data}
3025   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Size () > \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Available () || 
      \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence () > expectedSeq + \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p}->GetSize ())
3026     \{ \textcolor{comment}{// A gap exists in the buffer, or we filled a gap: Always ACK}
3027       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
3028     \}
3029   \textcolor{keywordflow}{else}
3030     \{ \textcolor{comment}{// In-sequence packet: ACK if delayed ack count allows}
3031       \textcolor{keywordflow}{if} (++\hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} >= \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount})
3032         \{
3033           \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
3034           \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = 0;
3035           \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
3036         \}
3037       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent}.\hyperlink{classns3_1_1EventId_a5c30c92e7c1c34b4e8505cc07ed71b02}{IsExpired} ())
3038         \{
3039           \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (
      \hyperlink{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}{m\_delAckTimeout},
3040                                                &\hyperlink{classns3_1_1TcpSocketBase_a6bea4790f749e771462d8e4ab63ebc67}{TcpSocketBase::DelAckTimeout}, \textcolor{keyword}{
      this});
3041           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" scheduled delayed ACK at "} <<
3042                         (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + 
      \hyperlink{classns3_1_1Simulator_af2c7b4285454aa5062bd2df2bb7a7ab9}{Simulator::GetDelayLeft} (\hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent})).GetSeconds ());
3043         \}
3044     \}
3045 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 124




Here is the caller graph for this function\+:
% FIG 125


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Recv@{Recv}}
\index{Recv@{Recv}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Recv(uint32\+\_\+t max\+Size, uint32\+\_\+t flags)}{Recv(uint32_t maxSize, uint32_t flags)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Packet} $>$ ns3\+::\+Tcp\+Socket\+Base\+::\+Recv (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{max\+Size, }
\item[{uint32\+\_\+t}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a114fc3153ceac81813f31651a4f9df9a}{}\label{classns3_1_1TcpSocketBase_a114fc3153ceac81813f31651a4f9df9a}


Read data from the socket. 

This function matches closely in semantics to the recv() function call in the standard C library (libc)\+: ssize\+\_\+t recv (int s, void $\ast$buf, size\+\_\+t len, int flags); except that the receive I/O is asynchronous. This is the primary Recv method at this low-\/level A\+PI and must be implemented by subclasses.

This method is normally used only on a connected socket. In a typical blocking sockets model, this call would block until at least one byte is returned or the connection closes. In ns-\/3 at this A\+PI, the call returns immediately in such a case and returns 0 if nothing is available to be read. However, an application can set a callback, ns3\+::\+Set\+Recv\+Callback, to be notified of data being available to be read (when it conceptually unblocks); this is an asynchronous I/O model for recv().

This variant of \hyperlink{classns3_1_1Socket_afb4e211a54a3f63ac3f79624a3a964f7}{Recv()} uses class \hyperlink{classns3_1_1Packet}{ns3\+::\+Packet} to encapsulate data, rather than providing a raw pointer and length field. This allows an ns-\/3 application to attach tags if desired (such as a flow ID) and may allow the simulator to avoid some data copies. Despite the appearance of receiving Packets on a stream socket, just think of it as a fancy byte buffer with streaming semantics.

The semantics depend on the type of socket. For a datagram socket, each \hyperlink{classns3_1_1Socket_afb4e211a54a3f63ac3f79624a3a964f7}{Recv()} returns the data from at most one \hyperlink{classns3_1_1TcpSocketBase_a172e373bab86078af4462fc1415c59e4}{Send()}, and order is not necessarily preserved. For a stream socket, the bytes are delivered in order, and on-\/the-\/wire packet boundaries are not preserved.

The flags argument is formed by or\textquotesingle{}ing one or more of the values\+: M\+S\+G\+\_\+\+O\+OB process out-\/of-\/band data M\+S\+G\+\_\+\+P\+E\+EK peek at incoming message None of these flags are supported for now.

Some variants of \hyperlink{classns3_1_1Socket_afb4e211a54a3f63ac3f79624a3a964f7}{Recv()} are supported as additional A\+PI, including \hyperlink{classns3_1_1TcpSocketBase_afbfc81cc21495573d75cb0546502da9a}{Recv\+From()}, overloaded \hyperlink{classns3_1_1Socket_afb4e211a54a3f63ac3f79624a3a964f7}{Recv()} without arguments, and variants that use raw character buffers.


\begin{DoxyParams}{Parameters}
{\em max\+Size} & reader will accept packet up to max\+Size \\
\hline
{\em flags} & \hyperlink{classns3_1_1Socket}{Socket} control flags \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classns3_1_1Ptr}{Ptr$<$\+Packet$>$} of the next in-\/sequence packet. Returns 0 if the socket cannot return a next in-\/sequence packet conforming to the max\+Size and flags.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{Set\+Recv\+Callback} 
\end{DoxySeeAlso}


Implements \hyperlink{classns3_1_1Socket_a8949b1f844aae563446f2f4c5be8827a}{ns3\+::\+Socket}.


\begin{DoxyCode}
885 \{
886   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
887   \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (flags, \textcolor{stringliteral}{"use of flags is not supported in TcpSocketBase::Recv()"});
888   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Size () == 0 && \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT})
889     \{
890       \textcolor{keywordflow}{return} Create<Packet> (); \textcolor{comment}{// Send EOF on connection close}
891     \}
892   Ptr<Packet> outPacket = \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->Extract (maxSize);
893   \textcolor{keywordflow}{return} outPacket;
894 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Recv\+From@{Recv\+From}}
\index{Recv\+From@{Recv\+From}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Recv\+From(uint32\+\_\+t max\+Size, uint32\+\_\+t flags, Address \&from\+Address)}{RecvFrom(uint32_t maxSize, uint32_t flags, Address &fromAddress)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Packet} $>$ ns3\+::\+Tcp\+Socket\+Base\+::\+Recv\+From (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{max\+Size, }
\item[{uint32\+\_\+t}]{flags, }
\item[{{\bf Address} \&}]{from\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_afbfc81cc21495573d75cb0546502da9a}{}\label{classns3_1_1TcpSocketBase_afbfc81cc21495573d75cb0546502da9a}


Read a single packet from the socket and retrieve the sender address. 

Calls Recv(max\+Size, flags) with max\+Size implicitly set to maximum sized integer, and flags set to zero.

This method has similar semantics to Recv () but subclasses may want to provide checks on socket state, so the implementation is pushed to subclasses.


\begin{DoxyParams}{Parameters}
{\em max\+Size} & reader will accept packet up to max\+Size \\
\hline
{\em flags} & \hyperlink{classns3_1_1Socket}{Socket} control flags \\
\hline
{\em from\+Address} & output parameter that will return the address of the sender of the received packet, if any. Remains untouched if no packet is received. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classns3_1_1Ptr}{Ptr$<$\+Packet$>$} of the next in-\/sequence packet. Returns 0 if the socket cannot return a next in-\/sequence packet. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{ns3\+::\+Socket}.


\begin{DoxyCode}
899 \{
900   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << maxSize << flags);
901   Ptr<Packet> packet = \hyperlink{classns3_1_1Socket_afb4e211a54a3f63ac3f79624a3a964f7}{Recv} (maxSize, flags);
902   \textcolor{comment}{// Null packet means no data to read, and an empty packet indicates EOF}
903   \textcolor{keywordflow}{if} (packet != 0 && packet->GetSize () != 0)
904     \{
905       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
906         \{
907           fromAddress = InetSocketAddress (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0954ccf4be313b3a2992894ae2baf1c6}{GetPeerPort} ());
908         \}
909       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} != 0)
910         \{
911           fromAddress = Inet6SocketAddress (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->
      \hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} (), \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_ac200f6b424104280ec1e55a415ed96fd}{GetPeerPort} ());
912         \}
913       \textcolor{keywordflow}{else}
914         \{
915           fromAddress = InetSocketAddress (\hyperlink{classns3_1_1Ipv4Address_aeeb1c76b35d4ab612fda7bc51e99c5db}{Ipv4Address::GetZero} (), 0);
916         \}
917     \}
918   \textcolor{keywordflow}{return} packet;
919 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 126


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Re\+Tx\+Timeout@{Re\+Tx\+Timeout}}
\index{Re\+Tx\+Timeout@{Re\+Tx\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Re\+Tx\+Timeout(void)}{ReTxTimeout(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Re\+Tx\+Timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a60bb6a7cfb5855bba206606174d50c5e}{}\label{classns3_1_1TcpSocketBase_a60bb6a7cfb5855bba206606174d50c5e}


An R\+TO event happened. 



Reimplemented in \hyperlink{classns3_1_1TcpSocketMsgBase_af890d12f15ead128b26ca59b47a14c53}{ns3\+::\+Tcp\+Socket\+Msg\+Base}.


\begin{DoxyCode}
3151 \{
3152   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
3153   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" ReTxTimeout Expired at time "} << 
      \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds ());
3154   \textcolor{comment}{// If erroneous timeout in closed/timed-wait state, just return}
3155   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aabab2f97744253d961a122fa320db73b}{TIME\_WAIT})
3156     \{
3157       \textcolor{keywordflow}{return};
3158     \}
3159   \textcolor{comment}{// If all data are received (non-closing socket and nothing to send), just return}
3160   \textcolor{keywordflow}{if} (m\_state <= ESTABLISHED && m\_txBuffer->HeadSequence () >= \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark})
3161     \{
3162       \textcolor{keywordflow}{return};
3163     \}
3164 
3165   \textcolor{comment}{// From RFC 6675, Section 5.1}
3166   \textcolor{comment}{// [RFC2018] suggests that a TCP sender SHOULD expunge the SACK}
3167   \textcolor{comment}{// information gathered from a receiver upon a retransmission timeout}
3168   \textcolor{comment}{// (RTO) "since the timeout might indicate that the data receiver has}
3169   \textcolor{comment}{// reneged."  Additionally, a TCP sender MUST "ignore prior SACK}
3170   \textcolor{comment}{// information in determining which data to retransmit."}
3171   \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled})
3172     \{
3173       \textcolor{comment}{// If SACK is not enabled, give up with all sack blocks we crafted}
3174       \textcolor{comment}{// m\_txBuffer->ResetScoreboard ();}
3175       \textcolor{comment}{// And move all the sent packet into the unsent, again. (ResetScoreboard}
3176       \textcolor{comment}{// is done inside that function)}
3177       \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->ResetSentList ();
3178     \}
3179   \textcolor{keywordflow}{else}
3180     \{
3181       \textcolor{comment}{// Continuing from RFC 6675, Section 5.1}
3182       \textcolor{comment}{// It has been suggested that, as long as robust tests for}
3183       \textcolor{comment}{// reneging are present, an implementation can retain and use SACK}
3184       \textcolor{comment}{// information across a timeout event [Errata1610]}
3185 
3186       \textcolor{comment}{// Please note that BytesInFlight should reflect the fact that all our}
3187       \textcolor{comment}{// sent list is considered lost. The following line could be a start,}
3188       \textcolor{comment}{// but we miss tests for reneging right now. So, be safe.}
3189       \textcolor{comment}{// m\_txBuffer->SetSentListLost ();}
3190       \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->ResetSentList ();
3191     \}
3192 
3193   \textcolor{comment}{// From RFC 6675, Section 5.1}
3194   \textcolor{comment}{// If an RTO occurs during loss recovery as specified in this document,}
3195   \textcolor{comment}{// RecoveryPoint MUST be set to HighData.  Further, the new value of}
3196   \textcolor{comment}{// RecoveryPoint MUST be preserved and the loss recovery algorithm}
3197   \textcolor{comment}{// outlined in this document MUST be terminated.}
3198   \hyperlink{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{m\_recover} = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark};
3199 
3200   \textcolor{comment}{// RFC 6298, clause 2.5, double the timer}
3201   \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} doubledRto = \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} + \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto};
3202   m\_rto = \hyperlink{group__highprec_gacb0b89d5f4363bf77747ff1212f27430}{Min} (doubledRto, \hyperlink{classns3_1_1Time_a60e845f4a74e62495b86356afe604cb4}{Time::FromDouble} (60,  \hyperlink{classns3_1_1Time_a87a7f4d29c68b047a72d291ad660295aade8622b06524a328cd3a59db6ccf76af}{Time::S}));
3203 
3204   \textcolor{comment}{// Empty RTT history}
3205   \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.clear ();
3206 
3207   \textcolor{comment}{// Reset dupAckCount}
3208   \hyperlink{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{m\_dupAckCount} = 0;
3209 
3210   \textcolor{comment}{// Please don't reset highTxMark, it is used for retransmission detection}
3211 
3212   \textcolor{comment}{// When a TCP sender detects segment loss using the retransmission timer}
3213   \textcolor{comment}{// and the given segment has not yet been resent by way of the}
3214   \textcolor{comment}{// retransmission timer, decrease ssThresh}
3215   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} != \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19ad50c191d2648f5472641d8e144ccbf3d}{TcpSocketState::CA\_LOSS} || !
      \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->IsHeadRetransmitted ())
3216     \{
3217       \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh} = \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->GetSsThresh (
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, \hyperlink{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{BytesInFlight} ());
3218     \}
3219 
3220   \textcolor{comment}{// Cwnd set to 1 MSS}
3221   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize};
3222 
3223   \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl}->CongestionStateSet (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}, 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19ad50c191d2648f5472641d8e144ccbf3d}{TcpSocketState::CA\_LOSS});
3224   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} = \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19ad50c191d2648f5472641d8e144ccbf3d}{TcpSocketState::CA\_LOSS};
3225 
3226   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"RTO. Reset cwnd to "} <<  \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} << \textcolor{stringliteral}{", ssthresh to "} <<
3227                 \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_aec003b6dba9d269bfb1036c7652ffbd6}{m\_ssThresh} << \textcolor{stringliteral}{", restart from seqnum "} <<
3228                 \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence () << \textcolor{stringliteral}{" doubled rto to "} <<
3229                 m\_rto.Get ().GetSeconds () << \textcolor{stringliteral}{" s"});
3230 
3231   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{BytesInFlight} () == 0, \textcolor{stringliteral}{"There are some bytes in flight after an
       RTO: "} <<
3232                  \hyperlink{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{BytesInFlight} ());
3233 
3234   \textcolor{comment}{// Retransmit the packet}
3235   \hyperlink{classns3_1_1TcpSocketBase_a13b6b897811a48523988f8af6e9130d3}{DoRetransmit} ();
3236 
3237   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} (\hyperlink{classns3_1_1TcpSocketBase_ad240f7f16347250ed2c82f1ab2777521}{BytesInFlight} () <= \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize},
3238                  \textcolor{stringliteral}{"In flight there is more than one segment"});
3239 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 127




Here is the caller graph for this function\+:
% FIG 128


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Safe\+Subtraction@{Safe\+Subtraction}}
\index{Safe\+Subtraction@{Safe\+Subtraction}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Safe\+Subtraction(uint32\+\_\+t a, uint32\+\_\+t b)}{SafeSubtraction(uint32_t a, uint32_t b)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Safe\+Subtraction (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{a, }
\item[{uint32\+\_\+t}]{b}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a7925b2818a17c63669a64488ce2726d0}{}\label{classns3_1_1TcpSocketBase_a7925b2818a17c63669a64488ce2726d0}


Performs a safe subtraction between a and b (a-\/b) 

Safe is used to indicate that, if b$>$a, the results returned is 0.


\begin{DoxyParams}{Parameters}
{\em a} & first number \\
\hline
{\em b} & second number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if b$>$0, (a-\/b) otherwise 
\end{DoxyReturn}

\begin{DoxyCode}
3852 \{
3853   \textcolor{keywordflow}{if} (a > \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b})
3854     \{
3855       \textcolor{keywordflow}{return} a-\hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b};
3856     \}
3857 
3858   \textcolor{keywordflow}{return} 0;
3859 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Send@{Send}}
\index{Send@{Send}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Send(\+Ptr$<$ Packet $>$ p, uint32\+\_\+t flags)}{Send(Ptr< Packet > p, uint32_t flags)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Send (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{p, }
\item[{uint32\+\_\+t}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a172e373bab86078af4462fc1415c59e4}{}\label{classns3_1_1TcpSocketBase_a172e373bab86078af4462fc1415c59e4}


Send data (or dummy data) to the remote host. 

This function matches closely in semantics to the send() function call in the standard C library (libc)\+: ssize\+\_\+t send (int s, const void $\ast$msg, size\+\_\+t len, int flags); except that the send I/O is asynchronous. This is the primary Send method at this low-\/level A\+PI and must be implemented by subclasses.

In a typical blocking sockets model, this call would block upon lack of space to hold the message to be sent. In ns-\/3 at this A\+PI, the call returns immediately in such a case, but the callback registered with \hyperlink{classns3_1_1Socket_a85ff5c8cc7d242823f301b49264c68a4}{Set\+Send\+Callback()} is invoked when the socket has space (when it conceptually unblocks); this is an asynchronous I/O model for send().

This variant of \hyperlink{classns3_1_1TcpSocketBase_a172e373bab86078af4462fc1415c59e4}{Send()} uses class \hyperlink{classns3_1_1Packet}{ns3\+::\+Packet} to encapsulate data, rather than providing a raw pointer and length field. This allows an ns-\/3 application to attach tags if desired (such as a flow ID) and may allow the simulator to avoid some data copies. Despite the appearance of sending Packets on a stream socket, just think of it as a fancy byte buffer with streaming semantics.

If either the message buffer within the \hyperlink{classns3_1_1Packet}{Packet} is too long to pass atomically through the underlying protocol (for datagram sockets), or the message buffer cannot entirely fit in the transmit buffer (for stream sockets), -\/1 is returned and Socket\+Errno is set to E\+R\+R\+O\+R\+\_\+\+M\+S\+G\+S\+I\+ZE. If the packet does not fit, the caller can split the \hyperlink{classns3_1_1Packet}{Packet} (based on information obtained from Get\+Tx\+Available) and reattempt to send the data.

The flags argument is formed by or\textquotesingle{}ing one or more of the values\+: M\+S\+G\+\_\+\+O\+OB process out-\/of-\/band data M\+S\+G\+\_\+\+D\+O\+N\+T\+R\+O\+U\+TE bypass routing, use direct interface These flags are {\itshape unsupported} as of ns-\/3.\+1.


\begin{DoxyParams}{Parameters}
{\em p} & \hyperlink{classns3_1_1Packet}{ns3\+::\+Packet} to send \\
\hline
{\em flags} & \hyperlink{classns3_1_1Socket}{Socket} control flags \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of bytes accepted for transmission if no error occurs, and -\/1 otherwise.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classns3_1_1Socket_a85ff5c8cc7d242823f301b49264c68a4}{Set\+Send\+Callback} 
\end{DoxySeeAlso}


Implements \hyperlink{classns3_1_1Socket_a036901c8f485fe5b6eab93b7f2ec289d}{ns3\+::\+Socket}.


\begin{DoxyCode}
837 \{
838   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << p);
839   \hyperlink{group__fatal_ga6653324225bc139e46deea177614ceee}{NS\_ABORT\_MSG\_IF} (flags, \textcolor{stringliteral}{"use of flags is not supported in TcpSocketBase::Send()"});
840   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a93f185d16390df3819d44eca0c349cc3}{SYN\_SENT} || 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT})
841     \{
842       \textcolor{comment}{// Store the packet into Tx buffer}
843       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Add (p))
844         \{ \textcolor{comment}{// TxBuffer overflow, send failed}
845           \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaaeba174dbfeaed34194ce9463f6a469f1}{ERROR\_MSGSIZE};
846           \textcolor{keywordflow}{return} -1;
847         \}
848       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{m\_shutdownSend})
849         \{
850           \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaa471b853a7aed4ec0c5c64b0c5ad8e521}{ERROR\_SHUTDOWN};
851           \textcolor{keywordflow}{return} -1;
852         \}
853       \textcolor{comment}{// Submit the data to lower layers}
854       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"txBufSize="} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () << \textcolor{stringliteral}{" state "} << 
      \hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}]);
855       \textcolor{keywordflow}{if} ((\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == 
      \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT}) && \hyperlink{classns3_1_1TcpSocketBase_add825047dd7c82046d42087e29b7c5b7}{AvailableWindow} () > 0)
856         \{ \textcolor{comment}{// Try to send the data out: Add a little step to allow the application}
857           \textcolor{comment}{// to fill the buffer}
858           \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a84be5c63b5ebf8e2452b43f9def59cab}{m\_sendPendingDataEvent}.\hyperlink{classns3_1_1EventId_aabf8476d1a080c199ea0c6aa9ccea372}{IsRunning} ())
859             \{
860               \hyperlink{classns3_1_1TcpSocketBase_a84be5c63b5ebf8e2452b43f9def59cab}{m\_sendPendingDataEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (
      \hyperlink{group__time_ga464a3c1cbb458c6c3ed3bd5ce9506758}{TimeStep} (1),
861                                                             &
      \hyperlink{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}{TcpSocketBase::SendPendingData},
862                                                             \textcolor{keyword}{this}, \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected});
863             \}
864         \}
865       \textcolor{keywordflow}{return} p->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
866     \}
867   \textcolor{keywordflow}{else}
868     \{ \textcolor{comment}{// Connection not established yet}
869       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6ccaaeb1fd23c1f4965b496786597125bf0f6}{ERROR\_NOTCONN};
870       \textcolor{keywordflow}{return} -1; \textcolor{comment}{// Send failure}
871     \}
872 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 129




Here is the caller graph for this function\+:
% FIG 130


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Send\+Data\+Packet@{Send\+Data\+Packet}}
\index{Send\+Data\+Packet@{Send\+Data\+Packet}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Send\+Data\+Packet(\+Sequence\+Number32 seq, uint32\+\_\+t max\+Size, bool with\+Ack)}{SendDataPacket(SequenceNumber32 seq, uint32_t maxSize, bool withAck)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Send\+Data\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Sequence\+Number32}}]{seq, }
\item[{uint32\+\_\+t}]{max\+Size, }
\item[{bool}]{with\+Ack}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a677488c04da1df87f916953a40e1bd64}{}\label{classns3_1_1TcpSocketBase_a677488c04da1df87f916953a40e1bd64}


Extract at most max\+Size bytes from the Tx\+Buffer at sequence seq, add the T\+CP header, and send to \hyperlink{classns3_1_1TcpL4Protocol}{Tcp\+L4\+Protocol}. 


\begin{DoxyParams}{Parameters}
{\em seq} & the sequence number \\
\hline
{\em max\+Size} & the maximum data block to be transmitted (in bytes) \\
\hline
{\em with\+Ack} & forces an A\+CK to be sent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of bytes sent 
\end{DoxyReturn}

\begin{DoxyCode}
2626 \{
2627   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << seq << maxSize << withAck);
2628 
2629   \textcolor{keywordtype}{bool} isRetransmission = \textcolor{keyword}{false};
2630   \textcolor{keywordflow}{if} (seq != \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark})
2631     \{
2632       isRetransmission = \textcolor{keyword}{true};
2633     \}
2634 
2635   Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->CopyFromSequence (maxSize, seq);
2636   uint32\_t sz = p->GetSize (); \textcolor{comment}{// Size of packet}
2637   uint8\_t flags = withAck ? \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK} : 0;
2638   uint32\_t remainingData = \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SizeFromSequence (seq + 
      \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (sz));
2639 
2640   \textcolor{keywordflow}{if} (withAck)
2641     \{
2642       \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
2643       \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = 0;
2644     \}
2645 
2646   \textcolor{comment}{/*}
2647 \textcolor{comment}{   * Add tags for each socket option.}
2648 \textcolor{comment}{   * Note that currently the socket adds both IPv4 tag and IPv6 tag}
2649 \textcolor{comment}{   * if both options are set. Once the packet got to layer three, only}
2650 \textcolor{comment}{   * the corresponding tags will be read.}
2651 \textcolor{comment}{   */}
2652   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_a95bd4732074d3d26d4a6949fc3499ccb}{GetIpTos} ())
2653     \{
2654       SocketIpTosTag ipTosTag;
2655       ipTosTag.SetTos (\hyperlink{classns3_1_1Socket_a95bd4732074d3d26d4a6949fc3499ccb}{GetIpTos} ());
2656       p->AddPacketTag (ipTosTag);
2657     \}
2658 
2659   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_a83858f6116bcdabecf1b63b37514ec8d}{IsManualIpv6Tclass} ())
2660     \{
2661       SocketIpv6TclassTag ipTclassTag;
2662       ipTclassTag.SetTclass (\hyperlink{classns3_1_1Socket_aed62162f0b5f322b1fa23b7350c3c2ce}{GetIpv6Tclass} ());
2663       p->AddPacketTag (ipTclassTag);
2664     \}
2665 
2666   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_afbbd0ecd7cda631cafc80eda33aa0b2c}{IsManualIpTtl} ())
2667     \{
2668       SocketIpTtlTag ipTtlTag;
2669       ipTtlTag.SetTtl (\hyperlink{classns3_1_1Socket_adf6420d12b8a0b6a20e46c37fe48830d}{GetIpTtl} ());
2670       p->AddPacketTag (ipTtlTag);
2671     \}
2672 
2673   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_af537e44bad2f67bffe7ef6c1c86c2459}{IsManualIpv6HopLimit} ())
2674     \{
2675       SocketIpv6HopLimitTag ipHopLimitTag;
2676       ipHopLimitTag.SetHopLimit (\hyperlink{classns3_1_1Socket_ad78033887757bda28f40f4ab1f0620d0}{GetIpv6HopLimit} ());
2677       p->AddPacketTag (ipHopLimitTag);
2678     \}
2679 
2680   uint8\_t priority = \hyperlink{classns3_1_1Socket_a3e4788d61c0e841ccaa1c7fce6fda2c1}{GetPriority} ();
2681   \textcolor{keywordflow}{if} (priority)
2682     \{
2683       SocketPriorityTag priorityTag;
2684       priorityTag.SetPriority (priority);
2685       p->ReplacePacketTag (priorityTag);
2686     \}
2687 
2688   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{m\_closeOnEmpty} && (remainingData == 0))
2689     \{
2690       flags |= \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN};
2691       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED})
2692         \{ \textcolor{comment}{// On active close: I am the first one to send FIN}
2693           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ESTABLISHED -> FIN\_WAIT\_1"});
2694           \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1};
2695         \}
2696       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT})
2697         \{ \textcolor{comment}{// On passive close: Peer sent me FIN already}
2698           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"CLOSE\_WAIT -> LAST\_ACK"});
2699           \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK};
2700         \}
2701     \}
2702   TcpHeader header;
2703   header.SetFlags (flags);
2704   header.SetSequenceNumber (seq);
2705   header.SetAckNumber (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ());
2706   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
2707     \{
2708       header.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aab137f64770abf94f0b8a81217a0b106}{GetLocalPort} ());
2709       header.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0954ccf4be313b3a2992894ae2baf1c6}{GetPeerPort} ());
2710     \}
2711   \textcolor{keywordflow}{else}
2712     \{
2713       header.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a39a9fd4aa85a8ecbbf2d6c84d589080b}{GetLocalPort} ());
2714       header.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_ac200f6b424104280ec1e55a415ed96fd}{GetPeerPort} ());
2715     \}
2716   header.SetWindowSize (\hyperlink{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{AdvertisedWindowSize} ());
2717   \hyperlink{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}{AddOptions} (header);
2718 
2719   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a5c30c92e7c1c34b4e8505cc07ed71b02}{IsExpired} ())
2720     \{
2721       \textcolor{comment}{// Schedules retransmit timeout. m\_rto should be already doubled.}
2722 
2723       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" SendDataPacket Schedule ReTxTimeout at time "} <<
2724                     \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds () << \textcolor{stringliteral}{" to expire at time "} <<
2725                     (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ()).GetSeconds () );
2726       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (\hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}, &
      \hyperlink{classns3_1_1TcpSocketBase_a60bb6a7cfb5855bba206606174d50c5e}{TcpSocketBase::ReTxTimeout}, \textcolor{keyword}{this});
2727     \}
2728 
2729   \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{m\_txTrace} (p, header, \textcolor{keyword}{this});
2730 
2731   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint})
2732     \{
2733       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, header, \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_ae08283e26ace5880c3172ea5d803b6f8}{GetLocalAddress} (),
2734                          \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
2735       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Send segment of size "} << sz << \textcolor{stringliteral}{" with remaining data "} <<
2736                     remainingData << \textcolor{stringliteral}{" via TcpL4Protocol to "} <<  \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->
      \hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} () <<
2737                     \textcolor{stringliteral}{". Header "} << header);
2738     \}
2739   \textcolor{keywordflow}{else}
2740     \{
2741       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, header, \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a1972cd26240d42cd75f93e12d9182976}{GetLocalAddress} (),
2742                          \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
2743       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Send segment of size "} << sz << \textcolor{stringliteral}{" with remaining data "} <<
2744                     remainingData << \textcolor{stringliteral}{" via TcpL4Protocol to "} <<  \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->
      \hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} () <<
2745                     \textcolor{stringliteral}{". Header "} << header);
2746     \}
2747 
2748   \hyperlink{classns3_1_1TcpSocketBase_af66bb88aa9438d6abbc9f8b941ab5cc8}{UpdateRttHistory} (seq, sz, isRetransmission);
2749 
2750   \textcolor{comment}{// Notify the application of the data being sent unless this is a retransmit}
2751   \textcolor{keywordflow}{if} (seq + sz > \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark})
2752     \{
2753       \hyperlink{classns3_1_1Simulator_a2219ee02c0647adc83d1c918c3256266}{Simulator::ScheduleNow} (&
      \hyperlink{classns3_1_1Socket_ae478fc503f7041a1da5e9db361f1ae20}{TcpSocketBase::NotifyDataSent}, \textcolor{keyword}{this},
2754                               (seq + sz - \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark}.
      \hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ()));
2755     \}
2756   \textcolor{comment}{// Update highTxMark}
2757   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark} = \hyperlink{80211b_8c_affe776513b24d84b39af8ab0930fef7f}{std::max} (seq + sz, \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ());
2758   \textcolor{keywordflow}{return} sz;
2759 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 131




Here is the caller graph for this function\+:
% FIG 132


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Send\+Empty\+Packet@{Send\+Empty\+Packet}}
\index{Send\+Empty\+Packet@{Send\+Empty\+Packet}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Send\+Empty\+Packet(uint8\+\_\+t flags)}{SendEmptyPacket(uint8_t flags)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Send\+Empty\+Packet (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{}\label{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}


Send a empty packet that carries a flag, e.\+g., A\+CK. 


\begin{DoxyParams}{Parameters}
{\em flags} & the packet\textquotesingle{}s flags \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{classns3_1_1TcpSocketSmallAcks_aa1b40c84003225f76661534dfa82634b}{ns3\+::\+Tcp\+Socket\+Small\+Acks}.


\begin{DoxyCode}
2317 \{
2318   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << (uint32\_t)flags);
2319   Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = Create<Packet> ();
2320   TcpHeader header;
2321   \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence};
2322 
2323   \textcolor{comment}{/*}
2324 \textcolor{comment}{   * Add tags for each socket option.}
2325 \textcolor{comment}{   * Note that currently the socket adds both IPv4 tag and IPv6 tag}
2326 \textcolor{comment}{   * if both options are set. Once the packet got to layer three, only}
2327 \textcolor{comment}{   * the corresponding tags will be read.}
2328 \textcolor{comment}{   */}
2329   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_a95bd4732074d3d26d4a6949fc3499ccb}{GetIpTos} ())
2330     \{
2331       SocketIpTosTag ipTosTag;
2332       ipTosTag.SetTos (\hyperlink{classns3_1_1Socket_a95bd4732074d3d26d4a6949fc3499ccb}{GetIpTos} ());
2333       p->AddPacketTag (ipTosTag);
2334     \}
2335 
2336   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_a83858f6116bcdabecf1b63b37514ec8d}{IsManualIpv6Tclass} ())
2337     \{
2338       SocketIpv6TclassTag ipTclassTag;
2339       ipTclassTag.SetTclass (\hyperlink{classns3_1_1Socket_aed62162f0b5f322b1fa23b7350c3c2ce}{GetIpv6Tclass} ());
2340       p->AddPacketTag (ipTclassTag);
2341     \}
2342 
2343   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_afbbd0ecd7cda631cafc80eda33aa0b2c}{IsManualIpTtl} ())
2344     \{
2345       SocketIpTtlTag ipTtlTag;
2346       ipTtlTag.SetTtl (\hyperlink{classns3_1_1Socket_adf6420d12b8a0b6a20e46c37fe48830d}{GetIpTtl} ());
2347       p->AddPacketTag (ipTtlTag);
2348     \}
2349 
2350   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1Socket_af537e44bad2f67bffe7ef6c1c86c2459}{IsManualIpv6HopLimit} ())
2351     \{
2352       SocketIpv6HopLimitTag ipHopLimitTag;
2353       ipHopLimitTag.SetHopLimit (\hyperlink{classns3_1_1Socket_ad78033887757bda28f40f4ab1f0620d0}{GetIpv6HopLimit} ());
2354       p->AddPacketTag (ipHopLimitTag);
2355     \}
2356 
2357   uint8\_t priority = \hyperlink{classns3_1_1Socket_a3e4788d61c0e841ccaa1c7fce6fda2c1}{GetPriority} ();
2358   \textcolor{keywordflow}{if} (priority)
2359     \{
2360       SocketPriorityTag priorityTag;
2361       priorityTag.SetPriority (priority);
2362       p->ReplacePacketTag (priorityTag);
2363     \}
2364 
2365   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0 && \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} == 0)
2366     \{
2367       \hyperlink{group__logging_gade7208b4009cdf0e25783cd26766f559}{NS\_LOG\_WARN} (\textcolor{stringliteral}{"Failed to send empty packet due to null endpoint"});
2368       \textcolor{keywordflow}{return};
2369     \}
2370   \textcolor{keywordflow}{if} (flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN})
2371     \{
2372       flags |= \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK};
2373     \}
2374   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK} || 
      \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aed7b7568d5e6519d8ce40712445b533d}{CLOSING})
2375     \{
2376       ++\hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s};
2377     \}
2378 
2379   header.SetFlags (flags);
2380   header.SetSequenceNumber (s);
2381   header.SetAckNumber (\hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->NextRxSequence ());
2382   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
2383     \{
2384       header.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_aab137f64770abf94f0b8a81217a0b106}{GetLocalPort} ());
2385       header.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a0954ccf4be313b3a2992894ae2baf1c6}{GetPeerPort} ());
2386     \}
2387   \textcolor{keywordflow}{else}
2388     \{
2389       header.SetSourcePort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a39a9fd4aa85a8ecbbf2d6c84d589080b}{GetLocalPort} ());
2390       header.SetDestinationPort (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_ac200f6b424104280ec1e55a415ed96fd}{GetPeerPort} ());
2391     \}
2392   \hyperlink{classns3_1_1TcpSocketBase_a55087ef950f5c2f4a7cdb8c825666955}{AddOptions} (header);
2393 
2394   \textcolor{comment}{// RFC 6298, clause 2.4}
2395   \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} = \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (\hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetEstimate () + \hyperlink{group__highprec_ga0d35bb9363c0da4cc2557158b95dbca0}{Max} (\hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity}, 
      \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->GetVariation () * 4), \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto});
2396 
2397   uint16\_t windowSize = \hyperlink{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{AdvertisedWindowSize} ();
2398   \textcolor{keywordtype}{bool} hasSyn = flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6aa28ef8087c3cb5f3db10d728063b6ac0}{TcpHeader::SYN};
2399   \textcolor{keywordtype}{bool} hasFin = flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN};
2400   \textcolor{keywordtype}{bool} isAck = flags == \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK};
2401   \textcolor{keywordflow}{if} (hasSyn)
2402     \{
2403       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{m\_winScalingEnabled})
2404         \{ \textcolor{comment}{// The window scaling option is set only on SYN packets}
2405           \hyperlink{classns3_1_1TcpSocketBase_aa749dc3f6287c79a2ad39cb306220663}{AddOptionWScale} (header);
2406         \}
2407 
2408       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled})
2409         \{
2410           \hyperlink{classns3_1_1TcpSocketBase_a470e7b2406d76319c457f2fdf5ff0699}{AddOptionSackPermitted} (header);
2411         \}
2412 
2413       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount} == 0)
2414         \{ \textcolor{comment}{// No more connection retries, give up}
2415           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Connection failed."});
2416           \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt}->Reset (); \textcolor{comment}{//According to recommendation -> RFC 6298}
2417           \hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{CloseAndNotify} ();
2418           \textcolor{keywordflow}{return};
2419         \}
2420       \textcolor{keywordflow}{else}
2421         \{ \textcolor{comment}{// Exponential backoff of connection time out}
2422           \textcolor{keywordtype}{int} backoffCount = 0x1 << (\hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries} - \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount});
2423           \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto} = \hyperlink{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{m\_cnTimeout} * backoffCount;
2424           \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount}--;
2425         \}
2426 
2427       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries} - 1 == \hyperlink{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{m\_synCount})
2428         \{
2429           \hyperlink{classns3_1_1TcpSocketBase_af66bb88aa9438d6abbc9f8b941ab5cc8}{UpdateRttHistory} (s, 0, \textcolor{keyword}{false});
2430         \}
2431       \textcolor{keywordflow}{else}
2432         \{ \textcolor{comment}{// This is SYN retransmission}
2433           \hyperlink{classns3_1_1TcpSocketBase_af66bb88aa9438d6abbc9f8b941ab5cc8}{UpdateRttHistory} (s, 0, \textcolor{keyword}{true});
2434         \}
2435 
2436       windowSize = \hyperlink{classns3_1_1TcpSocketBase_ae4f307151ccc4d5f5266d2832002df27}{AdvertisedWindowSize} (\textcolor{keyword}{false});
2437     \}
2438   header.SetWindowSize (windowSize);
2439 
2440   \textcolor{keywordflow}{if} (flags & \hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK})
2441     \{ \textcolor{comment}{// If sending an ACK, cancel the delay ACK as well}
2442       \hyperlink{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{m\_delAckEvent}.\hyperlink{classns3_1_1EventId_a993ae94e48e014e1afd47edb16db7a11}{Cancel} ();
2443       \hyperlink{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{m\_delAckCount} = 0;
2444       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a593fd39ccf865253c39bae9721263255}{m\_highTxAck} < header.GetAckNumber ())
2445         \{
2446           \hyperlink{classns3_1_1TcpSocketBase_a593fd39ccf865253c39bae9721263255}{m\_highTxAck} = header.GetAckNumber ();
2447         \}
2448       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{m\_sackEnabled} && \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->GetSackListSize () > 0)
2449         \{
2450           \hyperlink{classns3_1_1TcpSocketBase_a009a4dcad47330a47e5b829918fb9140}{AddOptionSack} (header);
2451         \}
2452     \}
2453 
2454   \hyperlink{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{m\_txTrace} (p, header, \textcolor{keyword}{this});
2455 
2456   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
2457     \{
2458       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, header, \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_ae08283e26ace5880c3172ea5d803b6f8}{GetLocalAddress} (),
2459                          \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
2460     \}
2461   \textcolor{keywordflow}{else}
2462     \{
2463       \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp}->SendPacket (p, header, \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a1972cd26240d42cd75f93e12d9182976}{GetLocalAddress} (),
2464                          \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} (), 
      \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice});
2465     \}
2466 
2467 
2468   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent}.\hyperlink{classns3_1_1EventId_a5c30c92e7c1c34b4e8505cc07ed71b02}{IsExpired} () && (hasSyn || hasFin) && !isAck )
2469     \{ \textcolor{comment}{// Retransmit SYN / SYN+ACK / FIN / FIN+ACK to guard against lost}
2470       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Schedule retransmission timeout at time "}
2471                     << \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ().GetSeconds () << \textcolor{stringliteral}{" to expire at time "}
2472                     << (\hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} () + \hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ()).GetSeconds ());
2473       \hyperlink{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{m\_retxEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (\hyperlink{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{m\_rto}, &
      \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{TcpSocketBase::SendEmptyPacket}, \textcolor{keyword}{this}, flags);
2474     \}
2475 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 133




Here is the caller graph for this function\+:
% FIG 134


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Send\+Pending\+Data@{Send\+Pending\+Data}}
\index{Send\+Pending\+Data@{Send\+Pending\+Data}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Send\+Pending\+Data(bool with\+Ack=false)}{SendPendingData(bool withAck=false)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Send\+Pending\+Data (
\begin{DoxyParamCaption}
\item[{bool}]{with\+Ack = {\ttfamily {\bf false}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}{}\label{classns3_1_1TcpSocketBase_a129ac0ec5fc399fa7c5552c615ae6562}


Send as much pending data as possible according to the Tx window. 

Note that this function did not implement the P\+SH flag.


\begin{DoxyParams}{Parameters}
{\em with\+Ack} & forces an A\+CK to be sent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of packets sent 
\end{DoxyReturn}

\begin{DoxyCode}
2789 \{
2790   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << withAck);
2791   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () == 0)
2792     \{
2793       \textcolor{keywordflow}{return} \textcolor{keyword}{false};                           \textcolor{comment}{// Nothing to send}
2794     \}
2795   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0 && \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} == 0)
2796     \{
2797       \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"TcpSocketBase::SendPendingData: No endpoint; m\_shutdownSend="} << 
      \hyperlink{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{m\_shutdownSend});
2798       \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \textcolor{comment}{// Is this the right way to handle this condition?}
2799     \}
2800 
2801   uint32\_t nPacketsSent = 0;
2802   uint32\_t availableWindow = \hyperlink{classns3_1_1TcpSocketBase_add825047dd7c82046d42087e29b7c5b7}{AvailableWindow} ();
2803 
2804   \textcolor{comment}{// RFC 6675, Section (C)}
2805   \textcolor{comment}{// If cwnd - pipe >= 1 SMSS, the sender SHOULD transmit one or more}
2806   \textcolor{comment}{// segments as follows:}
2807   \textcolor{comment}{// (NOTE: We check > 0, and do the checks for segmentSize in the following}
2808   \textcolor{comment}{// else branch to control silly window syndrome and Nagle)}
2809   \textcolor{keywordflow}{while} (availableWindow > 0)
2810     \{
2811       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19af2d22f02a77b603394c34d4968bad142}{TcpSocketState::CA\_OPEN}
2812           && \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{TcpSocket::FIN\_WAIT\_1})
2813         \{
2814           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"FIN\_WAIT and OPEN state; no data to transmit"});
2815           \textcolor{keywordflow}{break};
2816         \}
2817       \textcolor{comment}{// (C.1) The scoreboard MUST be queried via NextSeg () for the}
2818       \textcolor{comment}{//       sequence number range of the next segment to transmit (if}
2819       \textcolor{comment}{//       any), and the given segment sent.  If NextSeg () returns}
2820       \textcolor{comment}{//       failure (no data to send), return without sending anything}
2821       \textcolor{comment}{//       (i.e., terminate steps C.1 -- C.5).}
2822       \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} next;
2823       \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->NextSeg (&next, \hyperlink{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{m\_retxThresh}, \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize},
2824                                 \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a4053e1eb120c572d0881b04620b52c30}{m\_congState} == 
      \hyperlink{classns3_1_1TcpSocketState_a6fc313945a33d48fd60cbffe0c787b19a092ee3d215c587170a751974dac5f663}{TcpSocketState::CA\_RECOVERY}))
2825         \{
2826           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"no valid seq to transmit, or no data available"});
2827           \textcolor{keywordflow}{break};
2828         \}
2829       \textcolor{keywordflow}{else}
2830         \{
2831           \textcolor{comment}{// It's time to transmit, but before do silly window and Nagle's check}
2832           uint32\_t availableData = \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SizeFromSequence (next);
2833 
2834           \textcolor{comment}{// Stop sending if we need to wait for a larger Tx window (prevent silly window syndrome)}
2835           \textcolor{keywordflow}{if} (availableWindow < m\_tcb->m\_segmentSize &&  availableData > availableWindow)
2836             \{
2837               \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Preventing Silly Window Syndrome. Wait to send."});
2838               \textcolor{keywordflow}{break}; \textcolor{comment}{// No more}
2839             \}
2840           \textcolor{comment}{// Nagle's algorithm (RFC896): Hold off sending if there is unacked data}
2841           \textcolor{comment}{// in the buffer and the amount of data to send is less than one segment}
2842           \textcolor{keywordflow}{if} (!\hyperlink{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}{m\_noDelay} && \hyperlink{classns3_1_1TcpSocketBase_aba0c8b002908bfa8cd170b793df747bc}{UnAckDataCount} () > 0 && availableData < m\_tcb->
      m\_segmentSize)
2843             \{
2844               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Invoking Nagle's algorithm for seq "} << next <<
2845                             \textcolor{stringliteral}{", SFS: "} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SizeFromSequence (next) <<
2846                             \textcolor{stringliteral}{". Wait to send."});
2847               \textcolor{keywordflow}{break};
2848             \}
2849 
2850           uint32\_t \hyperlink{generate__test__data__lte__sinr_8m_ad83eeb3a142285d1243a08c6b7026df8}{s} = \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (availableWindow, \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize});
2851 
2852           \textcolor{comment}{// (C.2) If any of the data octets sent in (C.1) are below HighData,}
2853           \textcolor{comment}{//       HighRxt MUST be set to the highest sequence number of the}
2854           \textcolor{comment}{//       retransmitted segment unless NextSeg () rule (4) was}
2855           \textcolor{comment}{//       invoked for this retransmission.}
2856           \textcolor{comment}{// (C.3) If any of the data octets sent in (C.1) are above HighData,}
2857           \textcolor{comment}{//       HighData must be updated to reflect the transmission of}
2858           \textcolor{comment}{//       previously unsent data.}
2859           \textcolor{comment}{//}
2860           \textcolor{comment}{// These steps are done in m\_txBuffer with the tags.}
2861           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} != next)
2862             \{
2863               \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} = next;
2864             \}
2865 
2866           uint32\_t sz = \hyperlink{classns3_1_1TcpSocketBase_a677488c04da1df87f916953a40e1bd64}{SendDataPacket} (\hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->
      \hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence}, s, withAck);
2867           \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} += sz;
2868 
2869           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{" rxwin "} << \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd} <<
2870                         \textcolor{stringliteral}{" segsize "} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize} <<
2871                         \textcolor{stringliteral}{" highestRxAck "} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence () <<
2872                         \textcolor{stringliteral}{" pd->Size "} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () <<
2873                         \textcolor{stringliteral}{" pd->SFS "} << \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SizeFromSequence (
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence}));
2874 
2875           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"cWnd: "} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd} <<
2876                         \textcolor{stringliteral}{" total unAck: "} << \hyperlink{classns3_1_1TcpSocketBase_aba0c8b002908bfa8cd170b793df747bc}{UnAckDataCount} () <<
2877                         \textcolor{stringliteral}{" sent seq "} << \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_ad1f77b1cbdb9267a89ebb6f16ac76892}{m\_nextTxSequence} <<
2878                         \textcolor{stringliteral}{" size "} << sz);
2879 
2880           ++nPacketsSent;
2881         \}
2882 
2883       \textcolor{comment}{// (C.4) The estimate of the amount of data outstanding in the}
2884       \textcolor{comment}{//       network must be updated by incrementing pipe by the number}
2885       \textcolor{comment}{//       of octets transmitted in (C.1).}
2886       \textcolor{comment}{//}
2887       \textcolor{comment}{// Done in BytesInFlight, inside AvailableWindow.}
2888       availableWindow = \hyperlink{classns3_1_1TcpSocketBase_add825047dd7c82046d42087e29b7c5b7}{AvailableWindow} ();
2889 
2890       \textcolor{comment}{// (C.5) If cwnd - pipe >= 1 SMSS, return to (C.1)}
2891       \textcolor{comment}{// loop again!}
2892     \}
2893 
2894   \textcolor{keywordflow}{if} (nPacketsSent > 0)
2895     \{
2896       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"SendPendingData sent "} << nPacketsSent << \textcolor{stringliteral}{" segments"});
2897     \}
2898   \textcolor{keywordflow}{return} nPacketsSent;
2899 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 135




Here is the caller graph for this function\+:
% FIG 136


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Send\+R\+ST@{Send\+R\+ST}}
\index{Send\+R\+ST@{Send\+R\+ST}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Send\+R\+S\+T(void)}{SendRST(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Send\+R\+ST (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}{}\label{classns3_1_1TcpSocketBase_a070b9ac86f372fe0b661050686bef68e}


Send reset and tear down this socket. 


\begin{DoxyCode}
2480 \{
2481   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2482   \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ace24c1738ff6e0ae9348ca913b9d10d8}{TcpHeader::RST});
2483   \hyperlink{classns3_1_1Socket_a9b89cb8b7718d3a0641ce812970f9c16}{NotifyErrorClose} ();
2484   \hyperlink{classns3_1_1TcpSocketBase_a53791738228495d40197679dbc057392}{DeallocateEndPoint} ();
2485 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 137




Here is the caller graph for this function\+:
% FIG 138


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Send\+To@{Send\+To}}
\index{Send\+To@{Send\+To}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Send\+To(\+Ptr$<$ Packet $>$ p, uint32\+\_\+t flags, const Address \&to\+Address)}{SendTo(Ptr< Packet > p, uint32_t flags, const Address &toAddress)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Send\+To (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{p, }
\item[{uint32\+\_\+t}]{flags, }
\item[{const {\bf Address} \&}]{to\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ac7bd6956cd3d723c454814698bc8f094}{}\label{classns3_1_1TcpSocketBase_ac7bd6956cd3d723c454814698bc8f094}


Send data to a specified peer. 

This method has similar semantics to Send () but subclasses may want to provide checks on socket state, so the implementation is pushed to subclasses.


\begin{DoxyParams}{Parameters}
{\em p} & packet to send \\
\hline
{\em flags} & \hyperlink{classns3_1_1Socket}{Socket} control flags \\
\hline
{\em to\+Address} & IP \hyperlink{classns3_1_1Address}{Address} of remote host \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 in case of error or the number of bytes copied in the internal buffer and accepted for transmission. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_af898fce6a58e0dbba23c1c6de1d4220e}{ns3\+::\+Socket}.


\begin{DoxyCode}
877 \{
878   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a172e373bab86078af4462fc1415c59e4}{Send} (p, flags); \textcolor{comment}{// SendTo() and Send() are the same}
879 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 139


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Allow\+Broadcast@{Set\+Allow\+Broadcast}}
\index{Set\+Allow\+Broadcast@{Set\+Allow\+Broadcast}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Allow\+Broadcast(bool allow\+Broadcast)}{SetAllowBroadcast(bool allowBroadcast)}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Allow\+Broadcast (
\begin{DoxyParamCaption}
\item[{bool}]{allow\+Broadcast}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a7484f982e3a1d04d9ad0dd4ed6e3e004}{}\label{classns3_1_1TcpSocketBase_a7484f982e3a1d04d9ad0dd4ed6e3e004}


Configure whether broadcast datagram transmissions are allowed. 

This method corresponds to using setsockopt() S\+O\+\_\+\+B\+R\+O\+A\+D\+C\+A\+ST of real network or B\+SD sockets. If set on a socket, this option will enable or disable packets to be transmitted to broadcast destination addresses.


\begin{DoxyParams}{Parameters}
{\em allow\+Broadcast} & Whether broadcast is allowed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if operation succeeds 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1Socket_a32b4fa27b732a63207c8d9054a817ed5}{ns3\+::\+Socket}.


\begin{DoxyCode}
3538 \{
3539   \textcolor{comment}{// Broadcast is not implemented. Return true only if allowBroadcast==false}
3540   \textcolor{keywordflow}{return} (!allowBroadcast);
3541 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Clock\+Granularity@{Set\+Clock\+Granularity}}
\index{Set\+Clock\+Granularity@{Set\+Clock\+Granularity}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Clock\+Granularity(\+Time clock\+Granularity)}{SetClockGranularity(Time clockGranularity)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Clock\+Granularity (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{clock\+Granularity}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_a9164b842ec64a11e42f5b5e87cb2cecc}{}\label{classns3_1_1TcpSocketBase_a9164b842ec64a11e42f5b5e87cb2cecc}


Sets the Clock Granularity (used in R\+TO calcs). 


\begin{DoxyParams}{Parameters}
{\em clock\+Granularity} & The Clock Granularity \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3781 \{
3782   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << clockGranularity);
3783   \hyperlink{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{m\_clockGranularity} = clockGranularity;
3784 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 140


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Congestion\+Control\+Algorithm@{Set\+Congestion\+Control\+Algorithm}}
\index{Set\+Congestion\+Control\+Algorithm@{Set\+Congestion\+Control\+Algorithm}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Congestion\+Control\+Algorithm(\+Ptr$<$ Tcp\+Congestion\+Ops $>$ algo)}{SetCongestionControlAlgorithm(Ptr< TcpCongestionOps > algo)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Congestion\+Control\+Algorithm (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Tcp\+Congestion\+Ops} $>$}]{algo}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_acc21ee26be8b33d0b4e82703153a7fc8}{}\label{classns3_1_1TcpSocketBase_acc21ee26be8b33d0b4e82703153a7fc8}


Install a congestion control algorithm on this socket. 


\begin{DoxyParams}{Parameters}
{\em algo} & Algorithm to be installed \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3839 \{
3840   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << algo);
3841   \hyperlink{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{m\_congestionControl} = algo;
3842 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 141


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Conn\+Timeout@{Set\+Conn\+Timeout}}
\index{Set\+Conn\+Timeout@{Set\+Conn\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Conn\+Timeout(\+Time timeout)}{SetConnTimeout(Time timeout)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Conn\+Timeout (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a3d0bf93406d7def639741d5ea132d66e}{}\label{classns3_1_1TcpSocketBase_a3d0bf93406d7def639741d5ea132d66e}


Set the connection timeout. 


\begin{DoxyParams}{Parameters}
{\em timeout} & the connection timeout \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_acde1dd61f9790c1e4d9faff352d7c4a8}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3446 \{
3447   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout});
3448   \hyperlink{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{m\_cnTimeout} = \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout};
3449 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Data\+Retries@{Set\+Data\+Retries}}
\index{Set\+Data\+Retries@{Set\+Data\+Retries}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Data\+Retries(uint32\+\_\+t retries)}{SetDataRetries(uint32_t retries)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Data\+Retries (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{retries}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a6a29b086aee1d5cec7eee34a6d3e9621}{}\label{classns3_1_1TcpSocketBase_a6a29b086aee1d5cec7eee34a6d3e9621}


Set the number of data transmission retries before giving up. 


\begin{DoxyParams}{Parameters}
{\em retries} & the number of data transmission retries \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_ac56c8dc614fc35836105b6bb9351e021}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3472 \{
3473   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << retries);
3474   \hyperlink{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{m\_dataRetries} = retries;
3475 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Del\+Ack\+Max\+Count@{Set\+Del\+Ack\+Max\+Count}}
\index{Set\+Del\+Ack\+Max\+Count@{Set\+Del\+Ack\+Max\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Del\+Ack\+Max\+Count(uint32\+\_\+t count)}{SetDelAckMaxCount(uint32_t count)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Del\+Ack\+Max\+Count (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{count}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aac71f522f7742d83a71d39dfebf76188}{}\label{classns3_1_1TcpSocketBase_aac71f522f7742d83a71d39dfebf76188}


Set the number of packet to fire an A\+CK before delay timeout. 


\begin{DoxyParams}{Parameters}
{\em count} & the umber of packet to fire an A\+CK before delay timeout \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_a31468da4fd4dfc9955caa6cb16b45973}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3499 \{
3500   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << count);
3501   \hyperlink{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{m\_delAckMaxCount} = count;
3502 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Del\+Ack\+Timeout@{Set\+Del\+Ack\+Timeout}}
\index{Set\+Del\+Ack\+Timeout@{Set\+Del\+Ack\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Del\+Ack\+Timeout(\+Time timeout)}{SetDelAckTimeout(Time timeout)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Del\+Ack\+Timeout (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a2c23d993022a027c7377c14b790433d6}{}\label{classns3_1_1TcpSocketBase_a2c23d993022a027c7377c14b790433d6}


Set the time to delay an A\+CK. 


\begin{DoxyParams}{Parameters}
{\em timeout} & the time to delay an A\+CK \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_acaa9a24ec3438c0d100b0f5449a18a33}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3486 \{
3487   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout});
3488   \hyperlink{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}{m\_delAckTimeout} = \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout};
3489 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Initial\+Cwnd@{Set\+Initial\+Cwnd}}
\index{Set\+Initial\+Cwnd@{Set\+Initial\+Cwnd}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Initial\+Cwnd(uint32\+\_\+t cwnd)}{SetInitialCwnd(uint32_t cwnd)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Initial\+Cwnd (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{cwnd}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aa3735c7914a19141ea1751b862e42eab}{}\label{classns3_1_1TcpSocketBase_aa3735c7914a19141ea1751b862e42eab}


Set the initial Congestion Window. 


\begin{DoxyParams}{Parameters}
{\em cwnd} & the initial congestion window (in bytes) \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_ae2dbd6d7ffcfc063fc0b84c8b517d74b}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
655 \{
656   \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} ( (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED}) || cwnd == 
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a89931823b979729b749d93d34de9dc10}{m\_initialCWnd},
657                         \textcolor{stringliteral}{"TcpSocketBase::SetInitialCwnd() cannot change initial cwnd after connection
       started."});
658 
659   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a89931823b979729b749d93d34de9dc10}{m\_initialCWnd} = cwnd;
660 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 142


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Initial\+S\+S\+Thresh@{Set\+Initial\+S\+S\+Thresh}}
\index{Set\+Initial\+S\+S\+Thresh@{Set\+Initial\+S\+S\+Thresh}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Initial\+S\+S\+Thresh(uint32\+\_\+t threshold)}{SetInitialSSThresh(uint32_t threshold)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Initial\+S\+S\+Thresh (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{threshold}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_adf3850adfe73a0bf0e40f6b81ec30e41}{}\label{classns3_1_1TcpSocketBase_adf3850adfe73a0bf0e40f6b81ec30e41}


Set the initial Slow Start Threshold. 


\begin{DoxyParams}{Parameters}
{\em threshold} & the Slow Start Threshold (in bytes) \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_a068de8f7bcb9864c95d8c722d8d56e5f}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
640 \{
641   \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} ( (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED}) || threshold == 
      \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a32bb44dd7042e9ee25b5869a5a49e0bb}{m\_initialSsThresh},
642                         \textcolor{stringliteral}{"TcpSocketBase::SetSSThresh() cannot change initial ssThresh after connection
       started."});
643 
644   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a32bb44dd7042e9ee25b5869a5a49e0bb}{m\_initialSsThresh} = threshold;
645 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Min\+Rto@{Set\+Min\+Rto}}
\index{Set\+Min\+Rto@{Set\+Min\+Rto}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Min\+Rto(\+Time min\+Rto)}{SetMinRto(Time minRto)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Min\+Rto (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{min\+Rto}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_af99b7fe3341051dead8b4e26a5b2c12b}{}\label{classns3_1_1TcpSocketBase_af99b7fe3341051dead8b4e26a5b2c12b}


Sets the Minimum R\+TO. 


\begin{DoxyParams}{Parameters}
{\em min\+Rto} & The minimum R\+TO. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3768 \{
3769   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << minRto);
3770   \hyperlink{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{m\_minRto} = minRto;
3771 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 143


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Node@{Set\+Node}}
\index{Set\+Node@{Set\+Node}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Node(\+Ptr$<$ Node $>$ node)}{SetNode(Ptr< Node > node)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Node (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{node}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a1e1f8e39307c73a0d35aaa88a05caac1}{}\label{classns3_1_1TcpSocketBase_a1e1f8e39307c73a0d35aaa88a05caac1}


Set the associated node. 


\begin{DoxyParams}{Parameters}
{\em node} & the node \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
492 \{
493   \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node} = node;
494 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Persist\+Timeout@{Set\+Persist\+Timeout}}
\index{Set\+Persist\+Timeout@{Set\+Persist\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Persist\+Timeout(\+Time timeout)}{SetPersistTimeout(Time timeout)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Persist\+Timeout (
\begin{DoxyParamCaption}
\item[{{\bf Time}}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a0d59156c8e210422800e31ef0037f00d}{}\label{classns3_1_1TcpSocketBase_a0d59156c8e210422800e31ef0037f00d}


Set the timout for persistent connection. 

When the timout expires, send 1-\/byte data to probe for the window size at the receiver when the local knowledge tells that the receiver has zero window size


\begin{DoxyParams}{Parameters}
{\em timeout} & the persistent timout \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_a455616a87f286c5e8234640fbfee6f33}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3525 \{
3526   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout});
3527   \hyperlink{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{m\_persistTimeout} = \hyperlink{openflow-switch_8cc_a386d174ae121d1cfa279074b7e209714}{timeout};
3528 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Rcv\+Buf\+Size@{Set\+Rcv\+Buf\+Size}}
\index{Set\+Rcv\+Buf\+Size@{Set\+Rcv\+Buf\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Rcv\+Buf\+Size(uint32\+\_\+t size)}{SetRcvBufSize(uint32_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Rcv\+Buf\+Size (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a400be1b74a19f5e381e29cdfe1f9fa28}{}\label{classns3_1_1TcpSocketBase_a400be1b74a19f5e381e29cdfe1f9fa28}


Set the receive buffer size. 


\begin{DoxyParams}{Parameters}
{\em size} & the buffer size (in bytes) \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_a16cf22dda11f238c7a4f71501c01ca9a}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3408 \{
3409   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << size);
3410   uint32\_t oldSize = \hyperlink{classns3_1_1TcpSocketBase_accd0cb0f4780dc2dc3849b78da7f343b}{GetRcvBufSize} ();
3411 
3412   \hyperlink{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{m\_rxBuffer}->SetMaxBufferSize (size);
3413 
3414   \textcolor{comment}{/* The size has (manually) increased. Actively inform the other end to prevent}
3415 \textcolor{comment}{   * stale zero-window states.}
3416 \textcolor{comment}{   */}
3417   \textcolor{keywordflow}{if} (oldSize < size && \hyperlink{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{m\_connected})
3418     \{
3419       \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6a1182e63050402c9f49208c62c1ec2d5c}{TcpHeader::ACK});
3420     \}
3421 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 144




Here is the caller graph for this function\+:
% FIG 145


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Rtt@{Set\+Rtt}}
\index{Set\+Rtt@{Set\+Rtt}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Rtt(\+Ptr$<$ Rtt\+Estimator $>$ rtt)}{SetRtt(Ptr< RttEstimator > rtt)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Rtt (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Rtt\+Estimator} $>$}]{rtt}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a520a55f6b7d9a02f06258928882ea3b6}{}\label{classns3_1_1TcpSocketBase_a520a55f6b7d9a02f06258928882ea3b6}


Set the associated R\+TT estimator. 


\begin{DoxyParams}{Parameters}
{\em rtt} & the R\+TT estimator \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
506 \{
507   \hyperlink{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{m\_rtt} = rtt;
508 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Seg\+Size@{Set\+Seg\+Size}}
\index{Set\+Seg\+Size@{Set\+Seg\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Seg\+Size(uint32\+\_\+t size)}{SetSegSize(uint32_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Seg\+Size (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a03735ecd86c296e081c1825efd945bd6}{}\label{classns3_1_1TcpSocketBase_a03735ecd86c296e081c1825efd945bd6}


Set the segment size. 


\begin{DoxyParams}{Parameters}
{\em size} & the segment size (in bytes) \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_a9328f877a2c8659298d363b11e8689c1}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3431 \{
3432   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << size);
3433   \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a079872f7b0099ef5f3cab4ff47bd2edd}{m\_segmentSize} = size;
3434 
3435   \hyperlink{group__fatal_ga0bd3f62c55e7347ff814572f3aaa3864}{NS\_ABORT\_MSG\_UNLESS} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9ce7d71243551037394c5e691627e66f}{CLOSED}, \textcolor{stringliteral}{"Cannot change segment size
       dynamically."});
3436 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Snd\+Buf\+Size@{Set\+Snd\+Buf\+Size}}
\index{Set\+Snd\+Buf\+Size@{Set\+Snd\+Buf\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Snd\+Buf\+Size(uint32\+\_\+t size)}{SetSndBufSize(uint32_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Snd\+Buf\+Size (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ad74ab3c8d10069de9f24337009e19a65}{}\label{classns3_1_1TcpSocketBase_ad74ab3c8d10069de9f24337009e19a65}


Set the send buffer size. 


\begin{DoxyParams}{Parameters}
{\em size} & the buffer size (in bytes) \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_ab82368990962d308cd4572129b5e1f85}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3395 \{
3396   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << size);
3397   \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->SetMaxBufferSize (size);
3398 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Syn\+Retries@{Set\+Syn\+Retries}}
\index{Set\+Syn\+Retries@{Set\+Syn\+Retries}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Syn\+Retries(uint32\+\_\+t count)}{SetSynRetries(uint32_t count)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Syn\+Retries (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{count}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a79b5050d650fcb425531ae9a8561250f}{}\label{classns3_1_1TcpSocketBase_a79b5050d650fcb425531ae9a8561250f}


Set the number of connection retries before giving up. 


\begin{DoxyParams}{Parameters}
{\em count} & the number of connection retries \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_af2f2e8f1d0cd533e5dde58ef68c1774a}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3459 \{
3460   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << count);
3461   \hyperlink{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{m\_synRetries} = count;
3462 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Tcp@{Set\+Tcp}}
\index{Set\+Tcp@{Set\+Tcp}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Tcp(\+Ptr$<$ Tcp\+L4\+Protocol $>$ tcp)}{SetTcp(Ptr< TcpL4Protocol > tcp)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Tcp (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Tcp\+L4\+Protocol} $>$}]{tcp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a283ba18630a9de25d561a884c66d9538}{}\label{classns3_1_1TcpSocketBase_a283ba18630a9de25d561a884c66d9538}


Set the associated T\+CP L4 protocol. 


\begin{DoxyParams}{Parameters}
{\em tcp} & the T\+CP L4 protocol \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
499 \{
500   \hyperlink{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{m\_tcp} = tcp;
501 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Set\+Tcp\+No\+Delay@{Set\+Tcp\+No\+Delay}}
\index{Set\+Tcp\+No\+Delay@{Set\+Tcp\+No\+Delay}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Set\+Tcp\+No\+Delay(bool no\+Delay)}{SetTcpNoDelay(bool noDelay)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Set\+Tcp\+No\+Delay (
\begin{DoxyParamCaption}
\item[{bool}]{no\+Delay}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a5dc1ed5b7d5eacc77b0300229e1a0236}{}\label{classns3_1_1TcpSocketBase_a5dc1ed5b7d5eacc77b0300229e1a0236}


Enable/\+Disable Nagle\textquotesingle{}s algorithm. 


\begin{DoxyParams}{Parameters}
{\em no\+Delay} & true to D\+I\+S\+A\+B\+LE Nagle\textquotesingle{}s algorithm \\
\hline
\end{DoxyParams}


Implements \hyperlink{classns3_1_1TcpSocket_ad20148bb4389b28abb97e1020ce1b322}{ns3\+::\+Tcp\+Socket}.


\begin{DoxyCode}
3512 \{
3513   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << noDelay);
3514   \hyperlink{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}{m\_noDelay} = noDelay;
3515 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Setup\+Callback@{Setup\+Callback}}
\index{Setup\+Callback@{Setup\+Callback}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Setup\+Callback(void)}{SetupCallback(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Setup\+Callback (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}{}\label{classns3_1_1TcpSocketBase_a18a50820f806878422527d507268c4ac}


Common part of the two \hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind()}, i.\+e. set callback and remembering local addr\+:port. 

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on failure 
\end{DoxyReturn}

\begin{DoxyCode}
1022 \{
1023   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
1024 
1025   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} == 0 && \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} == 0)
1026     \{
1027       \textcolor{keywordflow}{return} -1;
1028     \}
1029   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint} != 0)
1030     \{
1031       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_abf5a10aadc249f2ce275cad9bb26322d}{SetRxCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_a2ebbcb9713facc9481341fcd972cdd82}{TcpSocketBase::ForwardUp}, Ptr<TcpSocketBase> (\textcolor{keyword}{this})));
1032       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a96d3a484480565a8f7444eae41caa4b4}{SetIcmpCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_ad4887f46646734366ae435dbca13e3fd}{TcpSocketBase::ForwardIcmp}, Ptr<TcpSocketBase> (\textcolor{keyword}{this})));
1033       \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a19ec16d98c501d3684e6549d7296ea0a}{SetDestroyCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_aa0171ac255369c09a30144b1a5f6b21d}{TcpSocketBase::Destroy}, Ptr<TcpSocketBase> (\textcolor{keyword}{this})));
1034     \}
1035   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6} != 0)
1036     \{
1037       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_adec9357acb2821c4bba0222bcc5638f1}{SetRxCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_aa0cd34b3562685596b2c3fd1e6a42a6f}{TcpSocketBase::ForwardUp6}, Ptr<TcpSocketBase> (\textcolor{keyword}{this})));
1038       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_a482f65430f138b5780bb063bc716c514}{SetIcmpCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_ad55d818db7149e0c2db0ce5eb6810beb}{TcpSocketBase::ForwardIcmp6}, Ptr<TcpSocketBase> (\textcolor{keyword}{this})));
1039       \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_af2922ef8f9f9ead0a2604c8391e90328}{SetDestroyCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classns3_1_1TcpSocketBase_a194e921d823fdfd396fa64aa524a0326}{TcpSocketBase::Destroy6}, Ptr<TcpSocketBase> (\textcolor{keyword}{this})));
1040     \}
1041 
1042   \textcolor{keywordflow}{return} 0;
1043 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 146




Here is the caller graph for this function\+:
% FIG 147


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Setup\+Endpoint@{Setup\+Endpoint}}
\index{Setup\+Endpoint@{Setup\+Endpoint}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Setup\+Endpoint(void)}{SetupEndpoint(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Setup\+Endpoint (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aa1e2094be5e9653b9d8d8d76b7ec670f}{}\label{classns3_1_1TcpSocketBase_aa1e2094be5e9653b9d8d8d76b7ec670f}


Configure the endpoint to a local address. Called by \hyperlink{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}{Connect()} if \hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind()} didn\textquotesingle{}t specify one. 

\begin{DoxyReturn}{Returns}
0 on success 
\end{DoxyReturn}

\begin{DoxyCode}
2512 \{
2513   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2514   Ptr<Ipv4> ipv4 = \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<Ipv4> ();
2515   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ipv4 != 0);
2516   \textcolor{keywordflow}{if} (ipv4->GetRoutingProtocol () == 0)
2517     \{
2518       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Ipv4RoutingProtocol in the node"});
2519     \}
2520   \textcolor{comment}{// Create a dummy packet, then ask the routing function for the best output}
2521   \textcolor{comment}{// interface's address}
2522   Ipv4Header header;
2523   header.SetDestination (\hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} ());
2524   \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6cca}{Socket::SocketErrno} errno\_;
2525   Ptr<Ipv4Route> route;
2526   Ptr<NetDevice> oif = \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice};
2527   route = ipv4->GetRoutingProtocol ()->RouteOutput (Ptr<Packet> (), header, oif, errno\_);
2528   \textcolor{keywordflow}{if} (route == 0)
2529     \{
2530       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route to "} << \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->
      \hyperlink{classns3_1_1Ipv4EndPoint_a3faf5ec4dce2e951a6ade79758e2075d}{GetPeerAddress} () << \textcolor{stringliteral}{" does not exist"});
2531       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (errno\_);
2532       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = errno\_;
2533       \textcolor{keywordflow}{return} -1;
2534     \}
2535   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route exists"});
2536   \hyperlink{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{m\_endPoint}->\hyperlink{classns3_1_1Ipv4EndPoint_a2b8ad9db8b266a73ee14118025fa5b03}{SetLocalAddress} (route->GetSource ());
2537   \textcolor{keywordflow}{return} 0;
2538 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 148




Here is the caller graph for this function\+:
% FIG 149


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Setup\+Endpoint6@{Setup\+Endpoint6}}
\index{Setup\+Endpoint6@{Setup\+Endpoint6}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Setup\+Endpoint6(void)}{SetupEndpoint6(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Setup\+Endpoint6 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_afe98eecb266502ddd1fdbcfa37442b7a}{}\label{classns3_1_1TcpSocketBase_afe98eecb266502ddd1fdbcfa37442b7a}


Configure the endpoint v6 to a local address. Called by \hyperlink{classns3_1_1TcpSocketBase_aabd08c9eb0ee3c88c855eb7268e392bf}{Connect()} if \hyperlink{classns3_1_1TcpSocketBase_a7a9a87b74c1ce59ac89df8d9221681dd}{Bind()} didn\textquotesingle{}t specify one. 

\begin{DoxyReturn}{Returns}
0 on success 
\end{DoxyReturn}

\begin{DoxyCode}
2542 \{
2543   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2544   Ptr<Ipv6L3Protocol> ipv6 = \hyperlink{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{m\_node}->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<Ipv6L3Protocol> ();
2545   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (ipv6 != 0);
2546   \textcolor{keywordflow}{if} (ipv6->GetRoutingProtocol () == 0)
2547     \{
2548       \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"No Ipv6RoutingProtocol in the node"});
2549     \}
2550   \textcolor{comment}{// Create a dummy packet, then ask the routing function for the best output}
2551   \textcolor{comment}{// interface's address}
2552   Ipv6Header header;
2553   header.SetDestinationAddress (\hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} ());
2554   \hyperlink{classns3_1_1Socket_ada1328c5ae0c28cb2a982caf8f6d6cca}{Socket::SocketErrno} errno\_;
2555   Ptr<Ipv6Route> route;
2556   Ptr<NetDevice> oif = \hyperlink{classns3_1_1Socket_a9781d8dfdb5e9364d5dce8f53b768bb5}{m\_boundnetdevice};
2557   route = ipv6->GetRoutingProtocol ()->RouteOutput (Ptr<Packet> (), header, oif, errno\_);
2558   \textcolor{keywordflow}{if} (route == 0)
2559     \{
2560       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route to "} << \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->
      \hyperlink{classns3_1_1Ipv6EndPoint_aa48c776ae54d85cf0f6a61a80d7b4cd8}{GetPeerAddress} () << \textcolor{stringliteral}{" does not exist"});
2561       \hyperlink{group__logging_ga0261a8db1d4ac5f79417d117634fd455}{NS\_LOG\_ERROR} (errno\_);
2562       \hyperlink{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{m\_errno} = errno\_;
2563       \textcolor{keywordflow}{return} -1;
2564     \}
2565   \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Route exists"});
2566   \hyperlink{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{m\_endPoint6}->\hyperlink{classns3_1_1Ipv6EndPoint_aa1dd94923ccc95928694197550d4561e}{SetLocalAddress} (route->GetSource ());
2567   \textcolor{keywordflow}{return} 0;
2568 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 150




Here is the caller graph for this function\+:
% FIG 151


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Shutdown\+Recv@{Shutdown\+Recv}}
\index{Shutdown\+Recv@{Shutdown\+Recv}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Shutdown\+Recv(void)}{ShutdownRecv(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Shutdown\+Recv (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a76be46f62b71156137ec760524aa47fa}{}\label{classns3_1_1TcpSocketBase_a76be46f62b71156137ec760524aa47fa}
\begin{DoxyReturn}{Returns}
zero on success, -\/1 on failure.
\end{DoxyReturn}
Do not allow any further Recv calls. This method is typically implemented for Tcp sockets by a half close. 

Implements \hyperlink{classns3_1_1Socket_a5a6b835bb7ccf2cf43b54912e7cae600}{ns3\+::\+Socket}.


\begin{DoxyCode}
827 \{
828   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
829   \hyperlink{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}{m\_shutdownRecv} = \textcolor{keyword}{true};
830   \textcolor{keywordflow}{return} 0;
831 \}
\end{DoxyCode}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Shutdown\+Send@{Shutdown\+Send}}
\index{Shutdown\+Send@{Shutdown\+Send}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Shutdown\+Send(void)}{ShutdownSend(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int ns3\+::\+Tcp\+Socket\+Base\+::\+Shutdown\+Send (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_ab972c5b46c62fed0c30b387e03753ca7}{}\label{classns3_1_1TcpSocketBase_ab972c5b46c62fed0c30b387e03753ca7}
\begin{DoxyReturn}{Returns}
zero on success, -\/1 on failure.
\end{DoxyReturn}
Do not allow any further Send calls. This method is typically implemented for Tcp sockets by a half close. 

Implements \hyperlink{classns3_1_1Socket_a8186c87627fa3ece326d8f1c822d7f95}{ns3\+::\+Socket}.


\begin{DoxyCode}
793 \{
794   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
795 
796   \textcolor{comment}{//this prevents data from being added to the buffer}
797   \hyperlink{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{m\_shutdownSend} = \textcolor{keyword}{true};
798   \hyperlink{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{m\_closeOnEmpty} = \textcolor{keyword}{true};
799   \textcolor{comment}{//if buffer is already empty, send a fin now}
800   \textcolor{comment}{//otherwise fin will go when buffer empties.}
801   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->Size () == 0)
802     \{
803       \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED} || \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == 
      \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a812907d056aeb79789f671d657f076a3}{CLOSE\_WAIT})
804         \{
805           \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Emtpy tx buffer, send fin"});
806           \hyperlink{classns3_1_1TcpSocketBase_aa858913c9a4480a14d293f1014905b3e}{SendEmptyPacket} (\hyperlink{classns3_1_1TcpHeader_a5f3d432941327854b5ad621e467479c6ad523ac42b96f79a086261246e83b5244}{TcpHeader::FIN});
807 
808           \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} == \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED})
809             \{ \textcolor{comment}{// On active close: I am the first one to send FIN}
810               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"ESTABLISHED -> FIN\_WAIT\_1"});
811               \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a9f54edeb0f23302ae1c36d433b587b02}{FIN\_WAIT\_1};
812             \}
813           \textcolor{keywordflow}{else}
814             \{ \textcolor{comment}{// On passive close: Peer sent me FIN already}
815               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"CLOSE\_WAIT -> LAST\_ACK"});
816               \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03ac7d6d4c1e935aee5aced83a7777cbd6c}{LAST\_ACK};
817             \}
818         \}
819     \}
820 
821   \textcolor{keywordflow}{return} 0;
822 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 152


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Time\+Wait@{Time\+Wait}}
\index{Time\+Wait@{Time\+Wait}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Time\+Wait(void)}{TimeWait(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Time\+Wait (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_acd41dedaf25ea16d290aa5737e303099}{}\label{classns3_1_1TcpSocketBase_acd41dedaf25ea16d290aa5737e303099}


Move from C\+L\+O\+S\+I\+NG or F\+I\+N\+\_\+\+W\+A\+I\+T\+\_\+2 to T\+I\+M\+E\+\_\+\+W\+A\+IT state. 


\begin{DoxyCode}
3381 \{
3382   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\hyperlink{classns3_1_1TcpSocket_a1706f3309652d17f052b7d05816dd5ba}{TcpStateName}[\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state}] << \textcolor{stringliteral}{" -> TIME\_WAIT"});
3383   \hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} = \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03aabab2f97744253d961a122fa320db73b}{TIME\_WAIT};
3384   \hyperlink{classns3_1_1TcpSocketBase_a8dc4de52308fc01262a8c06ae0bcccc5}{CancelAllTimers} ();
3385   \textcolor{comment}{// Move from TIME\_WAIT to CLOSED after 2*MSL. Max segment lifetime is 2 min}
3386   \textcolor{comment}{// according to RFC793, p.28}
3387   \hyperlink{classns3_1_1TcpSocketBase_a49b5b01bd6e824835859a9983465c9f2}{m\_timewaitEvent} = \hyperlink{classns3_1_1Simulator_a671882c894a08af4a5e91181bf1eec13}{Simulator::Schedule} (
      \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (2 * \hyperlink{classns3_1_1TcpSocketBase_a668a2cc5cf751511263ee8a0766c9ea5}{m\_msl}),
3388                                          &\hyperlink{classns3_1_1TcpSocketBase_a04354f05482d826576740fd2f1691818}{TcpSocketBase::CloseAndNotify}, \textcolor{keyword}{this})
      ;
3389 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 153




Here is the caller graph for this function\+:
% FIG 154


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Un\+Ack\+Data\+Count@{Un\+Ack\+Data\+Count}}
\index{Un\+Ack\+Data\+Count@{Un\+Ack\+Data\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Un\+Ack\+Data\+Count(void) const }{UnAckDataCount(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Un\+Ack\+Data\+Count (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_aba0c8b002908bfa8cd170b793df747bc}{}\label{classns3_1_1TcpSocketBase_aba0c8b002908bfa8cd170b793df747bc}


Return count of number of unacked bytes. 

The difference between S\+N\+D.\+U\+NA and High\+Tx

\begin{DoxyReturn}{Returns}
count of number of unacked bytes 
\end{DoxyReturn}

\begin{DoxyCode}
2903 \{
2904   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2905   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a2c46f51fd8e2bf43b564ea838b43b8bb}{m\_highTxMark}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} () - \hyperlink{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{m\_txBuffer}->HeadSequence ();
2906 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 155




Here is the caller graph for this function\+:
% FIG 156


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Update\+Cong\+State@{Update\+Cong\+State}}
\index{Update\+Cong\+State@{Update\+Cong\+State}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Update\+Cong\+State(\+Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t old\+Value, Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t new\+Value)}{UpdateCongState(TcpSocketState::TcpCongState_t oldValue, TcpSocketState::TcpCongState_t newValue)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Update\+Cong\+State (
\begin{DoxyParamCaption}
\item[{{\bf Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t}}]{old\+Value, }
\item[{{\bf Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t}}]{new\+Value}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_a8c31591889130527c14c4b2a5d0a2a4b}{}\label{classns3_1_1TcpSocketBase_a8c31591889130527c14c4b2a5d0a2a4b}


\hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} congestion state. 


\begin{DoxyParams}{Parameters}
{\em old\+Value} & old congestion state value \\
\hline
{\em new\+Value} & new congestion state value \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3819 \{
3820   \hyperlink{classns3_1_1TcpSocketBase_a682c31efa86a22cbffae1f4ba7c0bbc4}{m\_congStateTrace} (oldValue, newValue);
3821 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 157


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Update\+Cwnd@{Update\+Cwnd}}
\index{Update\+Cwnd@{Update\+Cwnd}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Update\+Cwnd(uint32\+\_\+t old\+Value, uint32\+\_\+t new\+Value)}{UpdateCwnd(uint32_t oldValue, uint32_t newValue)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Update\+Cwnd (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{old\+Value, }
\item[{uint32\+\_\+t}]{new\+Value}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_af45fbd60c8ccde3357801e31e93e163d}{}\label{classns3_1_1TcpSocketBase_af45fbd60c8ccde3357801e31e93e163d}


\hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} congestion window. 


\begin{DoxyParams}{Parameters}
{\em old\+Value} & old c\+Wnd value \\
\hline
{\em new\+Value} & new c\+Wnd value \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3806 \{
3807   \hyperlink{classns3_1_1TcpSocketBase_a53183f9cee6315bcb73742b9b9d14970}{m\_cWndTrace} (oldValue, newValue);
3808 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 158


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Update\+High\+Tx\+Mark@{Update\+High\+Tx\+Mark}}
\index{Update\+High\+Tx\+Mark@{Update\+High\+Tx\+Mark}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Update\+High\+Tx\+Mark(\+Sequence\+Number32 old\+Value, Sequence\+Number32 new\+Value)}{UpdateHighTxMark(SequenceNumber32 oldValue, SequenceNumber32 newValue)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Update\+High\+Tx\+Mark (
\begin{DoxyParamCaption}
\item[{{\bf Sequence\+Number32}}]{old\+Value, }
\item[{{\bf Sequence\+Number32}}]{new\+Value}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_a4a2122af95f0f40965e4b8a894fd4814}{}\label{classns3_1_1TcpSocketBase_a4a2122af95f0f40965e4b8a894fd4814}


\hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} high tx mark. 


\begin{DoxyParams}{Parameters}
{\em old\+Value} & old high tx mark \\
\hline
{\em new\+Value} & new high tx mark \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3833 \{
3834   \hyperlink{classns3_1_1TcpSocketBase_abe31167cc73bc1917e616aa210fa1041}{m\_highTxMarkTrace} (oldValue, newValue);
3835 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 159


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Update\+Next\+Tx\+Sequence@{Update\+Next\+Tx\+Sequence}}
\index{Update\+Next\+Tx\+Sequence@{Update\+Next\+Tx\+Sequence}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Update\+Next\+Tx\+Sequence(\+Sequence\+Number32 old\+Value, Sequence\+Number32 new\+Value)}{UpdateNextTxSequence(SequenceNumber32 oldValue, SequenceNumber32 newValue)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Update\+Next\+Tx\+Sequence (
\begin{DoxyParamCaption}
\item[{{\bf Sequence\+Number32}}]{old\+Value, }
\item[{{\bf Sequence\+Number32}}]{new\+Value}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_ad97775a4eaa42d5fea38ea20674889c4}{}\label{classns3_1_1TcpSocketBase_ad97775a4eaa42d5fea38ea20674889c4}


\hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} next tx sequence. 


\begin{DoxyParams}{Parameters}
{\em old\+Value} & old next\+Tx\+Seq value \\
\hline
{\em new\+Value} & new next\+Tx\+Seq value \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3827 \{
3828   \hyperlink{classns3_1_1TcpSocketBase_a4f6e09e3f0132fbf82af53bcd9c49acc}{m\_nextTxSequenceTrace} (oldValue, newValue);
3829 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 160


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Update\+Rtt\+History@{Update\+Rtt\+History}}
\index{Update\+Rtt\+History@{Update\+Rtt\+History}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Update\+Rtt\+History(const Sequence\+Number32 \&seq, uint32\+\_\+t sz, bool is\+Retransmission)}{UpdateRttHistory(const SequenceNumber32 &seq, uint32_t sz, bool isRetransmission)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Update\+Rtt\+History (
\begin{DoxyParamCaption}
\item[{const {\bf Sequence\+Number32} \&}]{seq, }
\item[{uint32\+\_\+t}]{sz, }
\item[{bool}]{is\+Retransmission}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_af66bb88aa9438d6abbc9f8b941ab5cc8}{}\label{classns3_1_1TcpSocketBase_af66bb88aa9438d6abbc9f8b941ab5cc8}


Update the R\+TT history, when we send T\+CP segments. 


\begin{DoxyParams}{Parameters}
{\em seq} & The sequence number of the T\+CP segment \\
\hline
{\em sz} & The segment\textquotesingle{}s size \\
\hline
{\em is\+Retransmission} & Whether or not the segment is a retransmission \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{classns3_1_1TcpSocketMsgBase_a08ac3b00fadcacfa05a20b24e7cb65cc}{ns3\+::\+Tcp\+Socket\+Msg\+Base}.


\begin{DoxyCode}
2764 \{
2765   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2766 
2767   \textcolor{comment}{// update the history of sequence numbers used to calculate the RTT}
2768   \textcolor{keywordflow}{if} (isRetransmission == \textcolor{keyword}{false})
2769     \{ \textcolor{comment}{// This is the next expected one, just log at end}
2770       \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.push\_back (RttHistory (seq, sz, \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ()));
2771     \}
2772   \textcolor{keywordflow}{else}
2773     \{ \textcolor{comment}{// This is a retransmit, find in list and mark as re-tx}
2774       \textcolor{keywordflow}{for} (RttHistory\_t::iterator \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.begin (); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != 
      \hyperlink{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{m\_history}.end (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
2775         \{
2776           \textcolor{keywordflow}{if} ((seq >= \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->seq) && (seq < (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->seq + \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->count))))
2777             \{ \textcolor{comment}{// Found it}
2778               \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->retx = \textcolor{keyword}{true};
2779               \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->count = ((seq + \hyperlink{group__network_gacb2070e4e98d2d5135c9bede58f07a03}{SequenceNumber32} (sz)) - \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}->seq); \textcolor{comment}{// And update count in
       hist}
2780               \textcolor{keywordflow}{break};
2781             \}
2782         \}
2783     \}
2784 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 161




Here is the caller graph for this function\+:
% FIG 162


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Update\+Ss\+Thresh@{Update\+Ss\+Thresh}}
\index{Update\+Ss\+Thresh@{Update\+Ss\+Thresh}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Update\+Ss\+Thresh(uint32\+\_\+t old\+Value, uint32\+\_\+t new\+Value)}{UpdateSsThresh(uint32_t oldValue, uint32_t newValue)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Update\+Ss\+Thresh (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{old\+Value, }
\item[{uint32\+\_\+t}]{new\+Value}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1TcpSocketBase_aa1abe21f8c190e2ab5a4b454ffc466e3}{}\label{classns3_1_1TcpSocketBase_aa1abe21f8c190e2ab5a4b454ffc466e3}


\hyperlink{classns3_1_1Callback}{Callback} function to hook to \hyperlink{classns3_1_1TcpSocketState}{Tcp\+Socket\+State} slow start threshold. 


\begin{DoxyParams}{Parameters}
{\em old\+Value} & old ss\+Th value \\
\hline
{\em new\+Value} & new ss\+Th value \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3812 \{
3813   \hyperlink{classns3_1_1TcpSocketBase_aba33c4aa346eeb1a205a97844d8ed689}{m\_ssThTrace} (oldValue, newValue);
3814 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 163


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Update\+Window\+Size@{Update\+Window\+Size}}
\index{Update\+Window\+Size@{Update\+Window\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Update\+Window\+Size(const Tcp\+Header \&header)}{UpdateWindowSize(const TcpHeader &header)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Tcp\+Socket\+Base\+::\+Update\+Window\+Size (
\begin{DoxyParamCaption}
\item[{const {\bf Tcp\+Header} \&}]{header}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aaa81bed04831358d23d50a4ef3a9a6c5}{}\label{classns3_1_1TcpSocketBase_aaa81bed04831358d23d50a4ef3a9a6c5}


Update the receiver window (R\+W\+ND) based on the value of the window field in the header. 

This method suppresses updates unless one of the following three conditions holds\+: 1) segment contains new data (advancing the right edge of the receive buffer), 2) segment does not contain new data but the segment acks new data (highest sequence number acked advances), or 3) the advertised window is larger than the current send window


\begin{DoxyParams}{Parameters}
{\em header} & \hyperlink{classns3_1_1TcpHeader}{Tcp\+Header} from which to extract the new window value \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
3723 \{
3724   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << header);
3725   \textcolor{comment}{//  If the connection is not established, the window size is always}
3726   \textcolor{comment}{//  updated}
3727   uint32\_t receivedWindow = header.GetWindowSize ();
3728   receivedWindow <<= \hyperlink{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}{m\_sndWindShift};
3729   \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"Received (scaled) window is "} << receivedWindow << \textcolor{stringliteral}{" bytes"});
3730   \textcolor{keywordflow}{if} (\hyperlink{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{m\_state} < \hyperlink{group__tcp_gga3929cdb47bdf159657fa24054aa5ca03a1826ad465d372319d1db905886de3743}{ESTABLISHED})
3731     \{
3732       \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd} = receivedWindow;
3733       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"State less than ESTABLISHED; updating rWnd to "} << 
      \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd});
3734       \textcolor{keywordflow}{return};
3735     \}
3736 
3737   \textcolor{comment}{// Test for conditions that allow updating of the window}
3738   \textcolor{comment}{// 1) segment contains new data (advancing the right edge of the receive}
3739   \textcolor{comment}{// buffer),}
3740   \textcolor{comment}{// 2) segment does not contain new data but the segment acks new data}
3741   \textcolor{comment}{// (highest sequence number acked advances), or}
3742   \textcolor{comment}{// 3) the advertised window is larger than the current send window}
3743   \textcolor{keywordtype}{bool} update = \textcolor{keyword}{false};
3744   \textcolor{keywordflow}{if} (header.GetAckNumber () == \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark} && receivedWindow > 
      \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd})
3745     \{
3746       \textcolor{comment}{// right edge of the send window is increased (window update)}
3747       update = \textcolor{keyword}{true};
3748     \}
3749   \textcolor{keywordflow}{if} (header.GetAckNumber () > \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark})
3750     \{
3751       \hyperlink{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{m\_highRxAckMark} = header.GetAckNumber ();
3752       update = \textcolor{keyword}{true};
3753     \}
3754   \textcolor{keywordflow}{if} (header.GetSequenceNumber () > \hyperlink{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}{m\_highRxMark})
3755     \{
3756       \hyperlink{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}{m\_highRxMark} = header.GetSequenceNumber ();
3757       update = \textcolor{keyword}{true};
3758     \}
3759   \textcolor{keywordflow}{if} (update == \textcolor{keyword}{true})
3760     \{
3761       \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd} = receivedWindow;
3762       \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"updating rWnd to "} << \hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd});
3763     \}
3764 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 164




Here is the caller graph for this function\+:
% FIG 165


\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Window@{Window}}
\index{Window@{Window}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Window(void) const }{Window(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::\+Window (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1TcpSocketBase_a820d022945d4fa0494712d7ed5868091}{}\label{classns3_1_1TcpSocketBase_a820d022945d4fa0494712d7ed5868091}


Return the max possible number of unacked bytes. 

\begin{DoxyReturn}{Returns}
the max possible number of unacked bytes 
\end{DoxyReturn}

\begin{DoxyCode}
2934 \{
2935   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
2936   \textcolor{keywordflow}{return} \hyperlink{80211b_8c_ac6afabdc09a49a433ee19d8a9486056d}{std::min} (\hyperlink{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{m\_rWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} (), \hyperlink{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{m\_tcb}->\hyperlink{classns3_1_1TcpSocketState_a7cd3d2156a483c1db436097477a0fd7f}{m\_cWnd}.\hyperlink{classns3_1_1TracedValue_a10fddd1de961ac65acfbeb440a1e8551}{Get} ());
2937 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 166




Here is the caller graph for this function\+:
% FIG 167




\subsection{Friends And Related Function Documentation}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!Tcp\+General\+Test@{Tcp\+General\+Test}}
\index{Tcp\+General\+Test@{Tcp\+General\+Test}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{Tcp\+General\+Test}{TcpGeneralTest}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Tcp\+General\+Test}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{classns3_1_1TcpSocketBase_a9e3da14f8f21e0ea02af26ce426e4804}{}\label{classns3_1_1TcpSocketBase_a9e3da14f8f21e0ea02af26ce426e4804}


\hyperlink{classns3_1_1TcpGeneralTest}{Tcp\+General\+Test} friend class (for tests). 



\subsection{Member Data Documentation}
\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+adv\+Wnd@{m\+\_\+adv\+Wnd}}
\index{m\+\_\+adv\+Wnd@{m\+\_\+adv\+Wnd}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+adv\+Wnd}{m_advWnd}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<$uint32\+\_\+t$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+adv\+Wnd\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a12a1c017e48895fbe36df0d54a509041}{}\label{classns3_1_1TcpSocketBase_a12a1c017e48895fbe36df0d54a509041}


Advertised Window size. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+bytes\+Acked\+Not\+Processed@{m\+\_\+bytes\+Acked\+Not\+Processed}}
\index{m\+\_\+bytes\+Acked\+Not\+Processed@{m\+\_\+bytes\+Acked\+Not\+Processed}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+bytes\+Acked\+Not\+Processed}{m_bytesAckedNotProcessed}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+bytes\+Acked\+Not\+Processed\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}{}\label{classns3_1_1TcpSocketBase_a6224a29116682fbbc66f43bcb114239c}


Bytes acked, but not processed. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+bytes\+In\+Flight@{m\+\_\+bytes\+In\+Flight}}
\index{m\+\_\+bytes\+In\+Flight@{m\+\_\+bytes\+In\+Flight}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+bytes\+In\+Flight}{m_bytesInFlight}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<$uint32\+\_\+t$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+bytes\+In\+Flight\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}{}\label{classns3_1_1TcpSocketBase_ad7acd30c8700b980142ddd38a52a5401}


Bytes in flight. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+clock\+Granularity@{m\+\_\+clock\+Granularity}}
\index{m\+\_\+clock\+Granularity@{m\+\_\+clock\+Granularity}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+clock\+Granularity}{m_clockGranularity}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+clock\+Granularity\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}{}\label{classns3_1_1TcpSocketBase_a92035196e6807e1430369bdfdead2e46}


Clock Granularity used in R\+TO calcs. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+close\+Notified@{m\+\_\+close\+Notified}}
\index{m\+\_\+close\+Notified@{m\+\_\+close\+Notified}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+close\+Notified}{m_closeNotified}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+close\+Notified\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}{}\label{classns3_1_1TcpSocketBase_a8b9716e924553832a827b6efe214b70f}


Told app to close socket. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+close\+On\+Empty@{m\+\_\+close\+On\+Empty}}
\index{m\+\_\+close\+On\+Empty@{m\+\_\+close\+On\+Empty}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+close\+On\+Empty}{m_closeOnEmpty}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+close\+On\+Empty\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}{}\label{classns3_1_1TcpSocketBase_a46c12a1d96840292ae2b55c3c2974214}


Close socket upon tx buffer emptied. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+cn\+Timeout@{m\+\_\+cn\+Timeout}}
\index{m\+\_\+cn\+Timeout@{m\+\_\+cn\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+cn\+Timeout}{m_cnTimeout}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+cn\+Timeout\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}{}\label{classns3_1_1TcpSocketBase_a7ee27f03de14c2f9f3d8fcda1e32352e}


Timeout for connection retry. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+congestion\+Control@{m\+\_\+congestion\+Control}}
\index{m\+\_\+congestion\+Control@{m\+\_\+congestion\+Control}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+congestion\+Control}{m_congestionControl}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Tcp\+Congestion\+Ops}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+congestion\+Control\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}{}\label{classns3_1_1TcpSocketBase_a090719d52b06a791341e2fefa5e12c3e}


Congestion control. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+cong\+State\+Trace@{m\+\_\+cong\+State\+Trace}}
\index{m\+\_\+cong\+State\+Trace@{m\+\_\+cong\+State\+Trace}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+cong\+State\+Trace}{m_congStateTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<${\bf Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t}, {\bf Tcp\+Socket\+State\+::\+Tcp\+Cong\+State\+\_\+t}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+cong\+State\+Trace}\hypertarget{classns3_1_1TcpSocketBase_a682c31efa86a22cbffae1f4ba7c0bbc4}{}\label{classns3_1_1TcpSocketBase_a682c31efa86a22cbffae1f4ba7c0bbc4}


\hyperlink{classns3_1_1Callback}{Callback} pointer for congestion state trace chaining. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+connected@{m\+\_\+connected}}
\index{m\+\_\+connected@{m\+\_\+connected}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+connected}{m_connected}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+connected\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}{}\label{classns3_1_1TcpSocketBase_aa52df78102ea7c1c6b432ad9486ed0c2}


Connection established. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+c\+Wnd\+Trace@{m\+\_\+c\+Wnd\+Trace}}
\index{m\+\_\+c\+Wnd\+Trace@{m\+\_\+c\+Wnd\+Trace}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+c\+Wnd\+Trace}{m_cWndTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<$uint32\+\_\+t, uint32\+\_\+t$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+c\+Wnd\+Trace}\hypertarget{classns3_1_1TcpSocketBase_a53183f9cee6315bcb73742b9b9d14970}{}\label{classns3_1_1TcpSocketBase_a53183f9cee6315bcb73742b9b9d14970}


\hyperlink{classns3_1_1Callback}{Callback} pointer for c\+Wnd trace chaining. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+data\+Retr\+Count@{m\+\_\+data\+Retr\+Count}}
\index{m\+\_\+data\+Retr\+Count@{m\+\_\+data\+Retr\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+data\+Retr\+Count}{m_dataRetrCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+data\+Retr\+Count\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}{}\label{classns3_1_1TcpSocketBase_ace7efd32ba5d109037ddd08e128d589d}


Count of remaining data retransmission attempts. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+data\+Retries@{m\+\_\+data\+Retries}}
\index{m\+\_\+data\+Retries@{m\+\_\+data\+Retries}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+data\+Retries}{m_dataRetries}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+data\+Retries\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}{}\label{classns3_1_1TcpSocketBase_a65d99ef317bd43d9f8a58a34c8fe5faa}


Number of data retransmission attempts. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+del\+Ack\+Count@{m\+\_\+del\+Ack\+Count}}
\index{m\+\_\+del\+Ack\+Count@{m\+\_\+del\+Ack\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+del\+Ack\+Count}{m_delAckCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+del\+Ack\+Count\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}{}\label{classns3_1_1TcpSocketBase_a7652a3f675c8d56bd5ddc868da70153e}


Delayed A\+CK counter. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+del\+Ack\+Event@{m\+\_\+del\+Ack\+Event}}
\index{m\+\_\+del\+Ack\+Event@{m\+\_\+del\+Ack\+Event}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+del\+Ack\+Event}{m_delAckEvent}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+del\+Ack\+Event\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}{}\label{classns3_1_1TcpSocketBase_a5069bf1f5f588a29e858b533d9ff34ab}


Delayed A\+CK timeout event. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+del\+Ack\+Max\+Count@{m\+\_\+del\+Ack\+Max\+Count}}
\index{m\+\_\+del\+Ack\+Max\+Count@{m\+\_\+del\+Ack\+Max\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+del\+Ack\+Max\+Count}{m_delAckMaxCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+del\+Ack\+Max\+Count\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}{}\label{classns3_1_1TcpSocketBase_a8a36367ad1e6e7e70827e4c4ba746240}


Number of packet to fire an A\+CK before delay timeout. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+del\+Ack\+Timeout@{m\+\_\+del\+Ack\+Timeout}}
\index{m\+\_\+del\+Ack\+Timeout@{m\+\_\+del\+Ack\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+del\+Ack\+Timeout}{m_delAckTimeout}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+del\+Ack\+Timeout\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}{}\label{classns3_1_1TcpSocketBase_ad7eb8814b40c3d1c26b60df6759748d4}


\hyperlink{classns3_1_1Time}{Time} to delay an A\+CK. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+dup\+Ack\+Count@{m\+\_\+dup\+Ack\+Count}}
\index{m\+\_\+dup\+Ack\+Count@{m\+\_\+dup\+Ack\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+dup\+Ack\+Count}{m_dupAckCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+dup\+Ack\+Count\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}{}\label{classns3_1_1TcpSocketBase_a4cf1d54115a5b2c8db34b62b6ccfa541}


Dupack counter. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+end\+Point@{m\+\_\+end\+Point}}
\index{m\+\_\+end\+Point@{m\+\_\+end\+Point}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+end\+Point}{m_endPoint}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv4\+End\+Point}$\ast$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+end\+Point\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}{}\label{classns3_1_1TcpSocketBase_a78a4181c0a7394749110ea6b194de467}


the I\+Pv4 endpoint 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+end\+Point6@{m\+\_\+end\+Point6}}
\index{m\+\_\+end\+Point6@{m\+\_\+end\+Point6}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+end\+Point6}{m_endPoint6}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ipv6\+End\+Point}$\ast$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+end\+Point6\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}{}\label{classns3_1_1TcpSocketBase_ab4b114c3959ee672b4fc9b7a90540dba}


the I\+Pv6 endpoint 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+errno@{m\+\_\+errno}}
\index{m\+\_\+errno@{m\+\_\+errno}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+errno}{m_errno}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Socket\+Errno} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+errno\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}{}\label{classns3_1_1TcpSocketBase_a592901b6c992843533af1b7c1c7f9474}


\hyperlink{classns3_1_1Socket}{Socket} error code. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+high\+Rx\+Ack\+Mark@{m\+\_\+high\+Rx\+Ack\+Mark}}
\index{m\+\_\+high\+Rx\+Ack\+Mark@{m\+\_\+high\+Rx\+Ack\+Mark}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+high\+Rx\+Ack\+Mark}{m_highRxAckMark}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<${\bf Sequence\+Number32}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+high\+Rx\+Ack\+Mark\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}{}\label{classns3_1_1TcpSocketBase_aa53b354456e23b35a97c367e4e03cd97}


Highest ack received. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+high\+Rx\+Mark@{m\+\_\+high\+Rx\+Mark}}
\index{m\+\_\+high\+Rx\+Mark@{m\+\_\+high\+Rx\+Mark}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+high\+Rx\+Mark}{m_highRxMark}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<${\bf Sequence\+Number32}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+high\+Rx\+Mark\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}{}\label{classns3_1_1TcpSocketBase_a9e93feb3fed4ad395da7f3abea173062}


Highest seqno received. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+high\+Tx\+Ack@{m\+\_\+high\+Tx\+Ack}}
\index{m\+\_\+high\+Tx\+Ack@{m\+\_\+high\+Tx\+Ack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+high\+Tx\+Ack}{m_highTxAck}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sequence\+Number32} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+high\+Tx\+Ack\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a593fd39ccf865253c39bae9721263255}{}\label{classns3_1_1TcpSocketBase_a593fd39ccf865253c39bae9721263255}


Highest ack sent. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+high\+Tx\+Mark\+Trace@{m\+\_\+high\+Tx\+Mark\+Trace}}
\index{m\+\_\+high\+Tx\+Mark\+Trace@{m\+\_\+high\+Tx\+Mark\+Trace}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+high\+Tx\+Mark\+Trace}{m_highTxMarkTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<${\bf Sequence\+Number32}, {\bf Sequence\+Number32}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+high\+Tx\+Mark\+Trace}\hypertarget{classns3_1_1TcpSocketBase_abe31167cc73bc1917e616aa210fa1041}{}\label{classns3_1_1TcpSocketBase_abe31167cc73bc1917e616aa210fa1041}


\hyperlink{classns3_1_1Callback}{Callback} pointer for high tx mark chaining. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+history@{m\+\_\+history}}
\index{m\+\_\+history@{m\+\_\+history}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+history}{m_history}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Rtt\+History\+\_\+t} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+history\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}{}\label{classns3_1_1TcpSocketBase_a6d6853c108db3acb5b43ee855bd1f805}


List of sent packet. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+icmp\+Callback@{m\+\_\+icmp\+Callback}}
\index{m\+\_\+icmp\+Callback@{m\+\_\+icmp\+Callback}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+icmp\+Callback}{m_icmpCallback}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Callback}$<$void, {\bf Ipv4\+Address},uint8\+\_\+t,uint8\+\_\+t,uint8\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+icmp\+Callback\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aef792b929bd15886a4b9a7132525a0ea}{}\label{classns3_1_1TcpSocketBase_aef792b929bd15886a4b9a7132525a0ea}


I\+C\+MP callback. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+icmp\+Callback6@{m\+\_\+icmp\+Callback6}}
\index{m\+\_\+icmp\+Callback6@{m\+\_\+icmp\+Callback6}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+icmp\+Callback6}{m_icmpCallback6}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Callback}$<$void, {\bf Ipv6\+Address},uint8\+\_\+t,uint8\+\_\+t,uint8\+\_\+t,uint32\+\_\+t$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+icmp\+Callback6\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a75aca0603de58d7db7c0fa7daab34064}{}\label{classns3_1_1TcpSocketBase_a75aca0603de58d7db7c0fa7daab34064}


I\+C\+M\+Pv6 callback. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+is\+First\+Partial\+Ack@{m\+\_\+is\+First\+Partial\+Ack}}
\index{m\+\_\+is\+First\+Partial\+Ack@{m\+\_\+is\+First\+Partial\+Ack}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+is\+First\+Partial\+Ack}{m_isFirstPartialAck}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+is\+First\+Partial\+Ack\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}{}\label{classns3_1_1TcpSocketBase_ad68f7d239e22043ba999101b94770d90}


First partial A\+CK during R\+E\+C\+O\+V\+E\+RY. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+last\+Ack\+Event@{m\+\_\+last\+Ack\+Event}}
\index{m\+\_\+last\+Ack\+Event@{m\+\_\+last\+Ack\+Event}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+last\+Ack\+Event}{m_lastAckEvent}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+last\+Ack\+Event\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ac6933cbf3722ece8188d40a889c45649}{}\label{classns3_1_1TcpSocketBase_ac6933cbf3722ece8188d40a889c45649}


Last A\+CK timeout event. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+last\+Rtt@{m\+\_\+last\+Rtt}}
\index{m\+\_\+last\+Rtt@{m\+\_\+last\+Rtt}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+last\+Rtt}{m_lastRtt}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<${\bf Time}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+last\+Rtt\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}{}\label{classns3_1_1TcpSocketBase_a6c48fbea019c593b975bd1d5f5c95dde}


Last R\+TT sample collected. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+limited\+Tx@{m\+\_\+limited\+Tx}}
\index{m\+\_\+limited\+Tx@{m\+\_\+limited\+Tx}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+limited\+Tx}{m_limitedTx}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+limited\+Tx\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}{}\label{classns3_1_1TcpSocketBase_a676649ad67ed68ec06a1a87a6acd6693}


perform limited transmit 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+max\+Win\+Size@{m\+\_\+max\+Win\+Size}}
\index{m\+\_\+max\+Win\+Size@{m\+\_\+max\+Win\+Size}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+max\+Win\+Size}{m_maxWinSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+max\+Win\+Size\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}{}\label{classns3_1_1TcpSocketBase_a045897aa710b2ad3e99cefd66e8dc168}


Maximum window size to advertise. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+min\+Rto@{m\+\_\+min\+Rto}}
\index{m\+\_\+min\+Rto@{m\+\_\+min\+Rto}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+min\+Rto}{m_minRto}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+min\+Rto\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}{}\label{classns3_1_1TcpSocketBase_a0e95a7381ca2a157516e7f2e86455922}


minimum value of the Retransmit timeout 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+msl@{m\+\_\+msl}}
\index{m\+\_\+msl@{m\+\_\+msl}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+msl}{m_msl}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+msl\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a668a2cc5cf751511263ee8a0766c9ea5}{}\label{classns3_1_1TcpSocketBase_a668a2cc5cf751511263ee8a0766c9ea5}


Max segment lifetime. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+next\+Tx\+Sequence\+Trace@{m\+\_\+next\+Tx\+Sequence\+Trace}}
\index{m\+\_\+next\+Tx\+Sequence\+Trace@{m\+\_\+next\+Tx\+Sequence\+Trace}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+next\+Tx\+Sequence\+Trace}{m_nextTxSequenceTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<${\bf Sequence\+Number32}, {\bf Sequence\+Number32}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+next\+Tx\+Sequence\+Trace}\hypertarget{classns3_1_1TcpSocketBase_a4f6e09e3f0132fbf82af53bcd9c49acc}{}\label{classns3_1_1TcpSocketBase_a4f6e09e3f0132fbf82af53bcd9c49acc}


\hyperlink{classns3_1_1Callback}{Callback} pointer for next tx sequence chaining. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+node@{m\+\_\+node}}
\index{m\+\_\+node@{m\+\_\+node}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+node}{m_node}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Node}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+node\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}{}\label{classns3_1_1TcpSocketBase_abefd2b9f439fe5d0deef93ee68884a1e}


the associated node 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+no\+Delay@{m\+\_\+no\+Delay}}
\index{m\+\_\+no\+Delay@{m\+\_\+no\+Delay}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+no\+Delay}{m_noDelay}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+no\+Delay\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}{}\label{classns3_1_1TcpSocketBase_ad358f0bbed41f6b13d474c49db493223}


Set to true to disable Nagle\textquotesingle{}s algorithm. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+persist\+Event@{m\+\_\+persist\+Event}}
\index{m\+\_\+persist\+Event@{m\+\_\+persist\+Event}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+persist\+Event}{m_persistEvent}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+persist\+Event\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}{}\label{classns3_1_1TcpSocketBase_ac9f9af0cce2ec51e89396146e3199b42}


Persist event\+: Send 1 byte to probe for a non-\/zero Rx window. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+persist\+Timeout@{m\+\_\+persist\+Timeout}}
\index{m\+\_\+persist\+Timeout@{m\+\_\+persist\+Timeout}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+persist\+Timeout}{m_persistTimeout}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+persist\+Timeout\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}{}\label{classns3_1_1TcpSocketBase_a036e720fee99f359c288110f90180a62}


\hyperlink{classns3_1_1Time}{Time} between sending 1-\/byte probes. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+rcv\+Wind\+Shift@{m\+\_\+rcv\+Wind\+Shift}}
\index{m\+\_\+rcv\+Wind\+Shift@{m\+\_\+rcv\+Wind\+Shift}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+rcv\+Wind\+Shift}{m_rcvWindShift}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+rcv\+Wind\+Shift\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}{}\label{classns3_1_1TcpSocketBase_a045fc4c0c16f906c5ec43d853cdb599f}


Window shift to apply to outgoing segments. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+recover@{m\+\_\+recover}}
\index{m\+\_\+recover@{m\+\_\+recover}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+recover}{m_recover}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sequence\+Number32} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+recover\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}{}\label{classns3_1_1TcpSocketBase_a176f84edf4bba543e7e3457881f6660f}


Previous highest Tx seqnum for fast recovery. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+retx\+Event@{m\+\_\+retx\+Event}}
\index{m\+\_\+retx\+Event@{m\+\_\+retx\+Event}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+retx\+Event}{m_retxEvent}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+retx\+Event\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}{}\label{classns3_1_1TcpSocketBase_a620dd547e6484bc03c6b796f589b75a6}


Retransmission event. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+retx\+Thresh@{m\+\_\+retx\+Thresh}}
\index{m\+\_\+retx\+Thresh@{m\+\_\+retx\+Thresh}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+retx\+Thresh}{m_retxThresh}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+retx\+Thresh\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}{}\label{classns3_1_1TcpSocketBase_aea5678454b966c263c6f72f174e6e328}


Fast Retransmit threshold. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+rto@{m\+\_\+rto}}
\index{m\+\_\+rto@{m\+\_\+rto}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+rto}{m_rto}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<${\bf Time}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+rto\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}{}\label{classns3_1_1TcpSocketBase_a47788384a59ae230896377ceab6829d4}


Retransmit timeout. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+rtt@{m\+\_\+rtt}}
\index{m\+\_\+rtt@{m\+\_\+rtt}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+rtt}{m_rtt}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Rtt\+Estimator}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+rtt\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}{}\label{classns3_1_1TcpSocketBase_a5fc75bf06fd5382244cf1d60652cf58d}


Round trip time estimator. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+r\+Wnd@{m\+\_\+r\+Wnd}}
\index{m\+\_\+r\+Wnd@{m\+\_\+r\+Wnd}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+r\+Wnd}{m_rWnd}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<$uint32\+\_\+t$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+r\+Wnd\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}{}\label{classns3_1_1TcpSocketBase_af3fafd1671964e0674677be541e1501a}


Receiver window (R\+C\+V.\+W\+ND in R\+F\+C793) 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+rx\+Buffer@{m\+\_\+rx\+Buffer}}
\index{m\+\_\+rx\+Buffer@{m\+\_\+rx\+Buffer}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+rx\+Buffer}{m_rxBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Tcp\+Rx\+Buffer}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+rx\+Buffer\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}{}\label{classns3_1_1TcpSocketBase_a0163894148e5a70e6bd89970a1483fae}


Rx buffer (reordering buffer) 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+rx\+Trace@{m\+\_\+rx\+Trace}}
\index{m\+\_\+rx\+Trace@{m\+\_\+rx\+Trace}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+rx\+Trace}{m_rxTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<${\bf Ptr}$<$const {\bf Packet}$>$, const {\bf Tcp\+Header}\&, {\bf Ptr}$<$const {\bf Tcp\+Socket\+Base}$>$ $>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+rx\+Trace\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a27b35f098b956baf89388fff0d4e539b}{}\label{classns3_1_1TcpSocketBase_a27b35f098b956baf89388fff0d4e539b}


Trace of received packets. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+sack\+Enabled@{m\+\_\+sack\+Enabled}}
\index{m\+\_\+sack\+Enabled@{m\+\_\+sack\+Enabled}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+sack\+Enabled}{m_sackEnabled}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+sack\+Enabled\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}{}\label{classns3_1_1TcpSocketBase_af79c709855a362f331251ef73167209a}


R\+FC S\+A\+CK option enabled. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+send\+Pending\+Data\+Event@{m\+\_\+send\+Pending\+Data\+Event}}
\index{m\+\_\+send\+Pending\+Data\+Event@{m\+\_\+send\+Pending\+Data\+Event}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+send\+Pending\+Data\+Event}{m_sendPendingDataEvent}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+send\+Pending\+Data\+Event\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a84be5c63b5ebf8e2452b43f9def59cab}{}\label{classns3_1_1TcpSocketBase_a84be5c63b5ebf8e2452b43f9def59cab}


micro-\/delay event to send pending data 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+shutdown\+Recv@{m\+\_\+shutdown\+Recv}}
\index{m\+\_\+shutdown\+Recv@{m\+\_\+shutdown\+Recv}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+shutdown\+Recv}{m_shutdownRecv}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+shutdown\+Recv\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}{}\label{classns3_1_1TcpSocketBase_a946e6fc03360915a21e089f9cd8cf279}


Receive no longer allowed. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+shutdown\+Send@{m\+\_\+shutdown\+Send}}
\index{m\+\_\+shutdown\+Send@{m\+\_\+shutdown\+Send}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+shutdown\+Send}{m_shutdownSend}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+shutdown\+Send\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}{}\label{classns3_1_1TcpSocketBase_a443b4ee2b08a845f9429e150d1171a23}


Send no longer allowed. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+snd\+Wind\+Shift@{m\+\_\+snd\+Wind\+Shift}}
\index{m\+\_\+snd\+Wind\+Shift@{m\+\_\+snd\+Wind\+Shift}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+snd\+Wind\+Shift}{m_sndWindShift}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+snd\+Wind\+Shift\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}{}\label{classns3_1_1TcpSocketBase_a249576feb9975ab927aeeda274d9bef0}


Window shift to apply to incoming segments. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+ss\+Th\+Trace@{m\+\_\+ss\+Th\+Trace}}
\index{m\+\_\+ss\+Th\+Trace@{m\+\_\+ss\+Th\+Trace}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+ss\+Th\+Trace}{m_ssThTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<$uint32\+\_\+t, uint32\+\_\+t$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+ss\+Th\+Trace}\hypertarget{classns3_1_1TcpSocketBase_aba33c4aa346eeb1a205a97844d8ed689}{}\label{classns3_1_1TcpSocketBase_aba33c4aa346eeb1a205a97844d8ed689}


\hyperlink{classns3_1_1Callback}{Callback} pointer for ss\+Th trace chaining. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+state@{m\+\_\+state}}
\index{m\+\_\+state@{m\+\_\+state}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+state}{m_state}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Value}$<${\bf Tcp\+States\+\_\+t}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+state\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}{}\label{classns3_1_1TcpSocketBase_a5db6f29272f23546e23320c06a681f3e}


T\+CP state. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+syn\+Count@{m\+\_\+syn\+Count}}
\index{m\+\_\+syn\+Count@{m\+\_\+syn\+Count}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+syn\+Count}{m_synCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+syn\+Count\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}{}\label{classns3_1_1TcpSocketBase_addf20037951e7b85435a97d8885ea844}


Count of remaining connection retries. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+syn\+Retries@{m\+\_\+syn\+Retries}}
\index{m\+\_\+syn\+Retries@{m\+\_\+syn\+Retries}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+syn\+Retries}{m_synRetries}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+syn\+Retries\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}{}\label{classns3_1_1TcpSocketBase_ac1995a7d30c5175e8f2db539ff288d0f}


Number of connection attempts. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+tcb@{m\+\_\+tcb}}
\index{m\+\_\+tcb@{m\+\_\+tcb}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+tcb}{m_tcb}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Tcp\+Socket\+State}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+tcb\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}{}\label{classns3_1_1TcpSocketBase_a26bbaf59001308dc43fb630d76f2e38b}


Congestion control informations. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+tcp@{m\+\_\+tcp}}
\index{m\+\_\+tcp@{m\+\_\+tcp}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+tcp}{m_tcp}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Tcp\+L4\+Protocol}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+tcp\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}{}\label{classns3_1_1TcpSocketBase_a26b979e55b02e0aed76cb84c39a66bc7}


the associated T\+CP L4 protocol 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+timestamp\+Enabled@{m\+\_\+timestamp\+Enabled}}
\index{m\+\_\+timestamp\+Enabled@{m\+\_\+timestamp\+Enabled}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+timestamp\+Enabled}{m_timestampEnabled}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+timestamp\+Enabled\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}{}\label{classns3_1_1TcpSocketBase_a5a7f7e51b07e27a908d4bab44028eee1}


Timestamp option enabled. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+timestamp\+To\+Echo@{m\+\_\+timestamp\+To\+Echo}}
\index{m\+\_\+timestamp\+To\+Echo@{m\+\_\+timestamp\+To\+Echo}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+timestamp\+To\+Echo}{m_timestampToEcho}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+timestamp\+To\+Echo\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}{}\label{classns3_1_1TcpSocketBase_ab3fdcb2bbc5e6a064e004e0671875996}


Timestamp to echo. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+timewait\+Event@{m\+\_\+timewait\+Event}}
\index{m\+\_\+timewait\+Event@{m\+\_\+timewait\+Event}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+timewait\+Event}{m_timewaitEvent}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Event\+Id} ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+timewait\+Event\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a49b5b01bd6e824835859a9983465c9f2}{}\label{classns3_1_1TcpSocketBase_a49b5b01bd6e824835859a9983465c9f2}


T\+I\+M\+E\+\_\+\+W\+A\+IT expiration event\+: Move this socket to C\+L\+O\+S\+ED state. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+tx\+Buffer@{m\+\_\+tx\+Buffer}}
\index{m\+\_\+tx\+Buffer@{m\+\_\+tx\+Buffer}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+tx\+Buffer}{m_txBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Tcp\+Tx\+Buffer}$>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+tx\+Buffer\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}{}\label{classns3_1_1TcpSocketBase_a4a1b53982ffd851bd07ab8d5005c130e}


Tx buffer. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+tx\+Trace@{m\+\_\+tx\+Trace}}
\index{m\+\_\+tx\+Trace@{m\+\_\+tx\+Trace}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+tx\+Trace}{m_txTrace}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Traced\+Callback}$<${\bf Ptr}$<$const {\bf Packet}$>$, const {\bf Tcp\+Header}\&, {\bf Ptr}$<$const {\bf Tcp\+Socket\+Base}$>$ $>$ ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+tx\+Trace\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}{}\label{classns3_1_1TcpSocketBase_a133b5c147fbc16ef12d4788c620cca3c}


Trace of transmitted packets. 

\index{ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}!m\+\_\+win\+Scaling\+Enabled@{m\+\_\+win\+Scaling\+Enabled}}
\index{m\+\_\+win\+Scaling\+Enabled@{m\+\_\+win\+Scaling\+Enabled}!ns3\+::\+Tcp\+Socket\+Base@{ns3\+::\+Tcp\+Socket\+Base}}
\subsubsection[{\texorpdfstring{m\+\_\+win\+Scaling\+Enabled}{m_winScalingEnabled}}]{\setlength{\rightskip}{0pt plus 5cm}bool ns3\+::\+Tcp\+Socket\+Base\+::m\+\_\+win\+Scaling\+Enabled\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}{}\label{classns3_1_1TcpSocketBase_a80ff21f228d3334f17dcf56f14fa0c7c}


Window Scale option enabled (R\+FC 7323) 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
internet/model/\hyperlink{tcp-socket-base_8h}{tcp-\/socket-\/base.\+h}\item 
internet/model/\hyperlink{tcp-socket-base_8cc}{tcp-\/socket-\/base.\+cc}\end{DoxyCompactItemize}
