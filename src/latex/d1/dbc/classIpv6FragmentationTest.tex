\hypertarget{classIpv6FragmentationTest}{}\section{Ipv6\+Fragmentation\+Test Class Reference}
\label{classIpv6FragmentationTest}\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}


I\+Pv6 Fragmentation Test.  




Inheritance diagram for Ipv6\+Fragmentation\+Test\+:
% FIG 0


Collaboration diagram for Ipv6\+Fragmentation\+Test\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classIpv6FragmentationTest_a83bd2f74ceac188b83cfb604a90c7b7b}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\item 
\hyperlink{classIpv6FragmentationTest_a22c35d4cf2723a7c64301c3cd05963b9}{Ipv6\+Fragmentation\+Test} ()
\item 
\hyperlink{classIpv6FragmentationTest_a08b345c279d680f160b253618e8065a4}{$\sim$\+Ipv6\+Fragmentation\+Test} ()
\item 
void \hyperlink{classIpv6FragmentationTest_a9e17748c96724c7a7b1af39ab54bdbfa}{Start\+Server} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ Server\+Node)
\begin{DoxyCompactList}\small\item\em Start the server. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6FragmentationTest_a3e548835f02712c58b19277eb0aeb110}{Handle\+Read\+Server} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Handle incoming packets. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6FragmentationTest_afe87fca4651780b7210efb45a77eadff}{Start\+Client} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ Client\+Node)
\begin{DoxyCompactList}\small\item\em Start the client. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6FragmentationTest_ad6c91384e008c34c6b4eb7f60fc7ba31}{Handle\+Read\+Client} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ socket)
\begin{DoxyCompactList}\small\item\em Handle incoming packets. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6FragmentationTest_a71cb73de46321641ac92d33df9cfc580}{Handle\+Read\+Icmp\+Client} (\hyperlink{classns3_1_1Ipv6Address}{Ipv6\+Address} icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)
\begin{DoxyCompactList}\small\item\em Handle incoming I\+C\+MP packets. \end{DoxyCompactList}\item 
void \hyperlink{classIpv6FragmentationTest_a6143375e886a978a720812a578767ab3}{Set\+Fill} (uint8\+\_\+t $\ast$fill, uint32\+\_\+t fill\+Size, uint32\+\_\+t data\+Size)
\begin{DoxyCompactList}\small\item\em Set the packet fill. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classIpv6FragmentationTest_ac687632e8c098b596c007d201f1d5f3c}{Send\+Client} (void)
\begin{DoxyCompactList}\small\item\em Send a packet. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classIpv6FragmentationTest_ac14aa60abba7c0ea12a25e4ad2165133}{m\+\_\+sent\+Packet\+Client}
\begin{DoxyCompactList}\small\item\em Packet sent by client. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classIpv6FragmentationTest_af8d5fd0d59dea9ddb85589998728fea6}{m\+\_\+received\+Packet\+Client}
\begin{DoxyCompactList}\small\item\em Packet received by client. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\+\_\+received\+Packet\+Server}
\begin{DoxyCompactList}\small\item\em Packet received by server. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ \hyperlink{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{m\+\_\+socket\+Server}
\begin{DoxyCompactList}\small\item\em Server socket. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Socket}{Socket} $>$ \hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\+\_\+socket\+Client}
\begin{DoxyCompactList}\small\item\em Client socket. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{m\+\_\+data\+Size}
\begin{DoxyCompactList}\small\item\em Data size. \end{DoxyCompactList}\item 
uint8\+\_\+t $\ast$ \hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\+\_\+data}
\begin{DoxyCompactList}\small\item\em Data. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classIpv6FragmentationTest_aeff576474d2d8d3291e23b5410271b4f}{m\+\_\+size}
\begin{DoxyCompactList}\small\item\em packet size. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classIpv6FragmentationTest_ae933968023c4913c690cb92eb06fa9f8}{m\+\_\+icmp\+Type}
\begin{DoxyCompactList}\small\item\em I\+C\+MP type. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}{m\+\_\+icmp\+Code}
\begin{DoxyCompactList}\small\item\em I\+C\+MP code. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
I\+Pv6 Fragmentation Test. 

\subsection{Constructor \& Destructor Documentation}
\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Ipv6\+Fragmentation\+Test()}{Ipv6FragmentationTest()}}]{\setlength{\rightskip}{0pt plus 5cm}Ipv6\+Fragmentation\+Test\+::\+Ipv6\+Fragmentation\+Test (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_a22c35d4cf2723a7c64301c3cd05963b9}{}\label{classIpv6FragmentationTest_a22c35d4cf2723a7c64301c3cd05963b9}

\begin{DoxyCode}
183   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Verify the IPv6 layer 3 protocol fragmentation and reassembly"})
184 \{
185   \hyperlink{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{m\_socketServer} = 0;
186   \hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data} = 0;
187   \hyperlink{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{m\_dataSize} = 0;
188   \hyperlink{classIpv6FragmentationTest_aeff576474d2d8d3291e23b5410271b4f}{m\_size} = 0;
189   \hyperlink{classIpv6FragmentationTest_ae933968023c4913c690cb92eb06fa9f8}{m\_icmpType} = 0;
190   \hyperlink{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}{m\_icmpCode} = 0;
191 \}
\end{DoxyCode}
\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!````~Ipv6\+Fragmentation\+Test@{$\sim$\+Ipv6\+Fragmentation\+Test}}
\index{````~Ipv6\+Fragmentation\+Test@{$\sim$\+Ipv6\+Fragmentation\+Test}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{$\sim$\+Ipv6\+Fragmentation\+Test()}{~Ipv6FragmentationTest()}}]{\setlength{\rightskip}{0pt plus 5cm}Ipv6\+Fragmentation\+Test\+::$\sim$\+Ipv6\+Fragmentation\+Test (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_a08b345c279d680f160b253618e8065a4}{}\label{classIpv6FragmentationTest_a08b345c279d680f160b253618e8065a4}

\begin{DoxyCode}
194 \{
195   \textcolor{keywordflow}{if} ( \hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data} )
196     \{
197       \textcolor{keyword}{delete}[] \hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data};
198     \}
199   \hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data} = 0;
200   \hyperlink{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{m\_dataSize} = 0;
201 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Fragmentation\+Test\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classIpv6FragmentationTest_a83bd2f74ceac188b83cfb604a90c7b7b}{}\label{classIpv6FragmentationTest_a83bd2f74ceac188b83cfb604a90c7b7b}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
325 \{
326   \textcolor{comment}{// Create topology}
327 
328   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} internet;
329   internet.\hyperlink{classns3_1_1InternetStackHelper_a10e2a35f410d0d1c90d979542c8bfd6e}{SetIpv4StackInstall} (\textcolor{keyword}{false});
330 
331   \textcolor{comment}{// Receiver Node}
332   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} serverNode = CreateObject<Node> ();
333   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (serverNode);
334   \hyperlink{classns3_1_1Ptr}{Ptr<SimpleNetDevice>} serverDev;
335   \hyperlink{classns3_1_1Ptr}{Ptr<BinaryErrorModel>} serverDevErrorModel = CreateObject<BinaryErrorModel> ();
336   \{
337     serverDev = CreateObject<SimpleNetDevice> ();
338     serverDev->\hyperlink{classns3_1_1SimpleNetDevice_a968ef3e7318bac29d5f1d7d977029af4}{SetAddress} (Mac48Address::ConvertFrom (Mac48Address::Allocate ()));
339     serverDev->\hyperlink{classns3_1_1SimpleNetDevice_ab41676e626a91832291bcfbd55ee454a}{SetMtu} (1500);
340     serverDev->\hyperlink{classns3_1_1SimpleNetDevice_a8674cbc75fa8504bbf6c27b2ca1f5129}{SetReceiveErrorModel} (serverDevErrorModel);
341     serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
342     serverNode->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (serverDev);
343     \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6>} ipv6 = serverNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv6}{Ipv6}> ();
344     uint32\_t netdev\_idx = ipv6->\hyperlink{classns3_1_1Ipv6_a4fd7da82c16b8abf9ca15f982918e6a4}{AddInterface} (serverDev);
345     \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001::1"}), \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (32));
346     ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (netdev\_idx, ipv6Addr);
347     ipv6->\hyperlink{classns3_1_1Ipv6_a8e61d85ec7fd342ed38fef2d040ed1b9}{SetUp} (netdev\_idx);
348   \}
349   \hyperlink{classIpv6FragmentationTest_a9e17748c96724c7a7b1af39ab54bdbfa}{StartServer} (serverNode);
350 
351   \textcolor{comment}{// Sender Node}
352   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} clientNode = CreateObject<Node> ();
353   internet.\hyperlink{classns3_1_1InternetStackHelper_a6645b412f31283d2d9bc3d8a95cebbc0}{Install} (clientNode);
354   \hyperlink{classns3_1_1Ptr}{Ptr<SimpleNetDevice>} clientDev;
355   \hyperlink{classns3_1_1Ptr}{Ptr<BinaryErrorModel>} clientDevErrorModel = CreateObject<BinaryErrorModel> ();
356   \{
357     clientDev = CreateObject<SimpleNetDevice> ();
358     clientDev->\hyperlink{classns3_1_1SimpleNetDevice_a968ef3e7318bac29d5f1d7d977029af4}{SetAddress} (Mac48Address::ConvertFrom (Mac48Address::Allocate ()));
359     clientDev->\hyperlink{classns3_1_1SimpleNetDevice_ab41676e626a91832291bcfbd55ee454a}{SetMtu} (1500);
360     clientDev->\hyperlink{classns3_1_1SimpleNetDevice_a8674cbc75fa8504bbf6c27b2ca1f5129}{SetReceiveErrorModel} (clientDevErrorModel);
361     clientDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
362     clientNode->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (clientDev);
363     \hyperlink{classns3_1_1Ptr}{Ptr<Ipv6>} ipv6 = clientNode->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<\hyperlink{classns3_1_1Ipv6}{Ipv6}> ();
364     uint32\_t netdev\_idx = ipv6->\hyperlink{classns3_1_1Ipv6_a4fd7da82c16b8abf9ca15f982918e6a4}{AddInterface} (clientDev);
365     \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} ipv6Addr = \hyperlink{classns3_1_1Ipv6InterfaceAddress}{Ipv6InterfaceAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001::2"}), \hyperlink{classns3_1_1Ipv6Prefix}{Ipv6Prefix} (32));
366     ipv6->\hyperlink{classns3_1_1Ipv6_a5cd576e83cf65445be3a0b5ffd1ddc5c}{AddAddress} (netdev\_idx, ipv6Addr);
367     ipv6->\hyperlink{classns3_1_1Ipv6_a8e61d85ec7fd342ed38fef2d040ed1b9}{SetUp} (netdev\_idx);
368   \}
369   \hyperlink{classIpv6FragmentationTest_afe87fca4651780b7210efb45a77eadff}{StartClient} (clientNode);
370 
371   \textcolor{comment}{// link the two nodes}
372   \hyperlink{classns3_1_1Ptr}{Ptr<ErrorChannel>} channel = CreateObject<ErrorChannel> ();
373   serverDev->\hyperlink{classns3_1_1SimpleNetDevice_af9e9828ad584b5ba538f18f645f162e0}{SetChannel} (channel);
374   clientDev->\hyperlink{classns3_1_1SimpleNetDevice_af9e9828ad584b5ba538f18f645f162e0}{SetChannel} (channel);
375   channel->\hyperlink{classns3_1_1ErrorChannel_a907fdc086d939d84eb4e612d0eac1d84}{SetJumpingTime} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.5));
376 
377 
378   \textcolor{comment}{// some small packets, some rather big ones}
379   uint32\_t packetSizes[5] = \{2000, 2500, 5000, 10000, 65000\};
380 
381   \textcolor{comment}{// using the alphabet}
382   uint8\_t fillData[78];
383   \textcolor{keywordflow}{for} ( uint32\_t k = 48; k <= 125; k++ )
384     \{
385       fillData[k - 48] = k;
386     \}
387 
388   \textcolor{comment}{// First test: normal channel, no errors, no delays}
389   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
390     \{
391       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
392 
393       \hyperlink{classIpv6FragmentationTest_a6143375e886a978a720812a578767ab3}{SetFill} (fillData, 78, packetSize);
394 
395       \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer} = Create<Packet> ();
396       Simulator::ScheduleWithContext (\hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
397                                       &\hyperlink{classIpv6FragmentationTest_ac687632e8c098b596c007d201f1d5f3c}{Ipv6FragmentationTest::SendClient}, \textcolor{keyword}{
      this});
398       Simulator::Run ();
399 
400       uint8\_t recvBuffer[65000];
401 
402       uint16\_t recvSize = \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
403 
404       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (recvSize, packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}],
405                              \textcolor{stringliteral}{"Packet size not correct: recvSize: "} << recvSize << \textcolor{stringliteral}{" packetSizes["} << i << \textcolor{stringliteral}{"
      ]: "} << packetSizes[i] );
406 
407       \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (recvBuffer, 65000);
408       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (memcmp (\hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data}, recvBuffer, 
      \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()),
409                              0, \textcolor{stringliteral}{"Packet content differs"});
410     \}
411 
412   \textcolor{comment}{// Second test: normal channel, no errors, delays each 2 packets.}
413   \textcolor{comment}{// Each other fragment will arrive out-of-order.}
414   \textcolor{comment}{// The packets should be received correctly since reassembly will reorder the fragments.}
415   channel->\hyperlink{classns3_1_1ErrorChannel_aa30b3b76ca1fc19aa68e28bd21431131}{SetJumpingMode} (\textcolor{keyword}{true});
416   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
417     \{
418       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
419 
420       \hyperlink{classIpv6FragmentationTest_a6143375e886a978a720812a578767ab3}{SetFill} (fillData, 78, packetSize);
421 
422       \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer} = Create<Packet> ();
423       Simulator::ScheduleWithContext (\hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
424                                       &\hyperlink{classIpv6FragmentationTest_ac687632e8c098b596c007d201f1d5f3c}{Ipv6FragmentationTest::SendClient}, \textcolor{keyword}{
      this});
425       Simulator::Run ();
426 
427       uint8\_t recvBuffer[65000];
428 
429       uint16\_t recvSize = \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
430 
431       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (recvSize, packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}],
432                              \textcolor{stringliteral}{"Packet size not correct: recvSize: "} << recvSize << \textcolor{stringliteral}{" packetSizes["} << i << \textcolor{stringliteral}{"
      ]: "} << packetSizes[i] );
433 
434       \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (recvBuffer, 65000);
435       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (memcmp (\hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data}, recvBuffer, 
      \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ()),
436                              0, \textcolor{stringliteral}{"Packet content differs"});
437     \}
438   channel->\hyperlink{classns3_1_1ErrorChannel_aa30b3b76ca1fc19aa68e28bd21431131}{SetJumpingMode} (\textcolor{keyword}{false});
439 
440   \textcolor{comment}{// Third test: normal channel, some errors, no delays.}
441   \textcolor{comment}{// The reassembly procedure should fire a timeout after 30 seconds (as specified in the RFCs).}
442   \textcolor{comment}{// Upon the timeout, the fragments received so far are discarded and an ICMP should be sent back}
443   \textcolor{comment}{// to the sender (if the first fragment has been received).}
444   \textcolor{comment}{// In this test case the first fragment is received, so we do expect an ICMP.}
445   \textcolor{comment}{// Client -> Server : errors enabled}
446   \textcolor{comment}{// Server -> Client : errors disabled (we want to have back the ICMP)}
447   clientDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
448   serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a571d61a2fc9ce2d30df95da7e87b763c}{Enable} ();
449   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 1; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < 5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
450     \{
451       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
452 
453       \hyperlink{classIpv6FragmentationTest_a6143375e886a978a720812a578767ab3}{SetFill} (fillData, 78, packetSize);
454 
455       \textcolor{comment}{// reset the model, we want to receive the very first fragment.}
456       serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a6b7cbe56c27562e5ba6daf2f04bcd282}{Reset} ();
457 
458       \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer} = Create<Packet> ();
459       \hyperlink{classIpv6FragmentationTest_ae933968023c4913c690cb92eb06fa9f8}{m\_icmpType} = 0;
460       \hyperlink{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}{m\_icmpCode} = 0;
461       Simulator::ScheduleWithContext (\hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
462                                       &\hyperlink{classIpv6FragmentationTest_ac687632e8c098b596c007d201f1d5f3c}{Ipv6FragmentationTest::SendClient}, \textcolor{keyword}{
      this});
463       Simulator::Run ();
464 
465       uint16\_t recvSize = \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} ();
466 
467       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} ((recvSize == 0), \textcolor{keyword}{true}, \textcolor{stringliteral}{"Server got a packet, something
       wrong"});
468       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} ((m\_icmpType == Icmpv6Header::ICMPV6\_ERROR\_TIME\_EXCEEDED)
469                              && (\hyperlink{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}{m\_icmpCode} == Icmpv6Header::ICMPV6\_FRAGTIME),
470                              \textcolor{keyword}{true}, \textcolor{stringliteral}{"Client did not receive ICMPv6::TIME\_EXCEEDED "} << \textcolor{keywordtype}{int}(m\_icmpType) << \textcolor{keywordtype}{
      int}(\hyperlink{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}{m\_icmpCode}) );
471     \}
472 
473   \textcolor{comment}{// Fourth test: normal channel, no errors, no delays.}
474   \textcolor{comment}{// We check tags}
475   clientDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
476   serverDevErrorModel->\hyperlink{classns3_1_1ErrorModel_a55d35a3e713c31f650577e9f96cf25c0}{Disable} ();
477   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}= 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}<5; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
478     \{
479       uint32\_t packetSize = packetSizes[\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
480 
481       \hyperlink{classIpv6FragmentationTest_a6143375e886a978a720812a578767ab3}{SetFill} (fillData, 78, packetSize);
482 
483       \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer} = Create<Packet> ();
484       Simulator::ScheduleWithContext (\hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_aba642ad4301c1df47befc0aa9afa2e48}{GetNode} ()->
      \hyperlink{classns3_1_1Node_aaf49b64a843565ce3812326313b370ac}{GetId} (), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0),
485                                       &\hyperlink{classIpv6FragmentationTest_ac687632e8c098b596c007d201f1d5f3c}{Ipv6FragmentationTest::SendClient}, \textcolor{keyword}{
      this});
486       Simulator::Run ();
487 
488       \hyperlink{classIPv6TestTag}{IPv6TestTag} packetTag;
489       \textcolor{keywordtype}{bool} found = \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->\hyperlink{classns3_1_1Packet_a1734de11f2ca1e78a7872461a0625168}{PeekPacketTag} (packetTag);
490 
491       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (found, \textcolor{keyword}{true}, \textcolor{stringliteral}{"PacketTag not found"});
492       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (packetTag.\hyperlink{classIPv6TestTag_a768de709cd124098db46ac1ae0f5a9b8}{GetToken} (), 42, \textcolor{stringliteral}{"PacketTag value not
       correct"});
493 
494       \hyperlink{classns3_1_1ByteTagIterator}{ByteTagIterator} iter = \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->
      \hyperlink{classns3_1_1Packet_a3c03f35c267e8534c29bdaa4686e4823}{GetByteTagIterator} ();
495 
496       uint32\_t end = 0;
497       uint32\_t tagStart = 0;
498       uint32\_t tagEnd = 0;
499       \textcolor{keywordflow}{while} (iter.HasNext ())
500         \{
501           \hyperlink{classns3_1_1ByteTagIterator_1_1Item}{ByteTagIterator::Item} item = iter.Next ();
502           \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (item.\hyperlink{classns3_1_1ByteTagIterator_1_1Item_aaae5fe08c2b67ac485faa4372fe38cea}{GetTypeId} ().
      \hyperlink{classns3_1_1TypeId_aa3c41c79ae428b3cb396a9c6bb3ef314}{GetName} (), \textcolor{stringliteral}{"ns3::IPv6TestTag"}, \textcolor{stringliteral}{"ByteTag name not correct"});
503           tagStart = item.\hyperlink{classns3_1_1ByteTagIterator_1_1Item_abaf7c97dec29431934732d656361d13c}{GetStart} ();
504           tagEnd = item.\hyperlink{classns3_1_1ByteTagIterator_1_1Item_a47e206d7530bd378c26a55f206deefea}{GetEnd} ();
505           \textcolor{keywordflow}{if} (end == 0)
506             \{
507               \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (tagStart, 0, \textcolor{stringliteral}{"First ByteTag Start not correct"});
508             \}
509           \textcolor{keywordflow}{if} (end != 0)
510             \{
511               \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (tagStart, end, \textcolor{stringliteral}{"ByteTag End not correct"});
512             \}
513           end = tagEnd;
514           \hyperlink{classIPv6TestTag}{IPv6TestTag} *byteTag = \textcolor{keyword}{dynamic\_cast<}\hyperlink{classIPv6TestTag}{IPv6TestTag} *\textcolor{keyword}{>} (item.
      \hyperlink{classns3_1_1ByteTagIterator_1_1Item_aaae5fe08c2b67ac485faa4372fe38cea}{GetTypeId} ().\hyperlink{classns3_1_1TypeId_ad9b0bc71ee7593a1ff23ff8d53938e95}{GetConstructor} () ());
515           \hyperlink{group__testing_ga6d4b162d26b8a930115b97dd5f3d9ed9}{NS\_TEST\_EXPECT\_MSG\_NE} (byteTag, 0, \textcolor{stringliteral}{"ByteTag not found"});
516           item.\hyperlink{classns3_1_1ByteTagIterator_1_1Item_ada7f72efd4a0d9caef5edae0ea571ec1}{GetTag} (*byteTag);
517           \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (byteTag->\hyperlink{classIPv6TestTag_a768de709cd124098db46ac1ae0f5a9b8}{GetToken} (), 42, \textcolor{stringliteral}{"ByteTag value not
       correct"});
518           \textcolor{keyword}{delete} byteTag;
519         \}
520       \hyperlink{group__testing_ga7304ba46a28d8cf08dfdfd6499cf7068}{NS\_TEST\_EXPECT\_MSG\_EQ} (end, \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer}->
      \hyperlink{classns3_1_1Packet_a462855c9929954d4301a4edfe55f4f1c}{GetSize} (), \textcolor{stringliteral}{"trivial"});
521     \}
522 
523   Simulator::Destroy ();
524 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Handle\+Read\+Client@{Handle\+Read\+Client}}
\index{Handle\+Read\+Client@{Handle\+Read\+Client}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Handle\+Read\+Client(\+Ptr$<$ Socket $>$ socket)}{HandleReadClient(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Fragmentation\+Test\+::\+Handle\+Read\+Client (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_ad6c91384e008c34c6b4eb7f60fc7ba31}{}\label{classIpv6FragmentationTest_ad6c91384e008c34c6b4eb7f60fc7ba31}


Handle incoming packets. 


\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
253 \{
254   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} packet;
255   \hyperlink{classns3_1_1Address}{Address} \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from};
256   \textcolor{keywordflow}{while} ((packet = socket->\hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{RecvFrom} (from)))
257     \{
258       \textcolor{keywordflow}{if} (Inet6SocketAddress::IsMatchingType (from))
259         \{
260           \hyperlink{classIpv6FragmentationTest_af8d5fd0d59dea9ddb85589998728fea6}{m\_receivedPacketClient} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
261         \}
262     \}
263 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3




Here is the caller graph for this function\+:
% FIG 4


\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Handle\+Read\+Icmp\+Client@{Handle\+Read\+Icmp\+Client}}
\index{Handle\+Read\+Icmp\+Client@{Handle\+Read\+Icmp\+Client}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Handle\+Read\+Icmp\+Client(\+Ipv6\+Address icmp\+Source, uint8\+\_\+t icmp\+Ttl, uint8\+\_\+t icmp\+Type, uint8\+\_\+t icmp\+Code, uint32\+\_\+t icmp\+Info)}{HandleReadIcmpClient(Ipv6Address icmpSource, uint8_t icmpTtl, uint8_t icmpType, uint8_t icmpCode, uint32_t icmpInfo)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Fragmentation\+Test\+::\+Handle\+Read\+Icmp\+Client (
\begin{DoxyParamCaption}
\item[{{\bf Ipv6\+Address}}]{icmp\+Source, }
\item[{uint8\+\_\+t}]{icmp\+Ttl, }
\item[{uint8\+\_\+t}]{icmp\+Type, }
\item[{uint8\+\_\+t}]{icmp\+Code, }
\item[{uint32\+\_\+t}]{icmp\+Info}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_a71cb73de46321641ac92d33df9cfc580}{}\label{classIpv6FragmentationTest_a71cb73de46321641ac92d33df9cfc580}


Handle incoming I\+C\+MP packets. 


\begin{DoxyParams}{Parameters}
{\em icmp\+Source} & The I\+C\+MP sender. \\
\hline
{\em icmp\+Ttl} & The I\+C\+MP T\+TL. \\
\hline
{\em icmp\+Type} & The I\+C\+MP Type. \\
\hline
{\em icmp\+Code} & The I\+C\+MP Code. \\
\hline
{\em icmp\+Info} & The I\+C\+MP Info. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
269 \{
270   \hyperlink{classIpv6FragmentationTest_ae933968023c4913c690cb92eb06fa9f8}{m\_icmpType} = icmpType;
271   \hyperlink{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}{m\_icmpCode} = icmpCode;
272 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 5


\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Handle\+Read\+Server@{Handle\+Read\+Server}}
\index{Handle\+Read\+Server@{Handle\+Read\+Server}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Handle\+Read\+Server(\+Ptr$<$ Socket $>$ socket)}{HandleReadServer(Ptr< Socket > socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Fragmentation\+Test\+::\+Handle\+Read\+Server (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Socket} $>$}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_a3e548835f02712c58b19277eb0aeb110}{}\label{classIpv6FragmentationTest_a3e548835f02712c58b19277eb0aeb110}


Handle incoming packets. 


\begin{DoxyParams}{Parameters}
{\em socket} & The receiving socket. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
222 \{
223   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} packet;
224   \hyperlink{classns3_1_1Address}{Address} \hyperlink{lte__amc_8m_a1b4c81ff74eb1a626b5ade44c81004b3}{from};
225   \textcolor{keywordflow}{while} ((packet = socket->\hyperlink{classns3_1_1Socket_af22378d7af9a2745a9eada20210da215}{RecvFrom} (from)))
226     \{
227       \textcolor{keywordflow}{if} (Inet6SocketAddress::IsMatchingType (from))
228         \{
229           \hyperlink{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{m\_receivedPacketServer} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
230         \}
231     \}
232 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Send\+Client@{Send\+Client}}
\index{Send\+Client@{Send\+Client}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Send\+Client(void)}{SendClient(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Packet} $>$ Ipv6\+Fragmentation\+Test\+::\+Send\+Client (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_ac687632e8c098b596c007d201f1d5f3c}{}\label{classIpv6FragmentationTest_ac687632e8c098b596c007d201f1d5f3c}


Send a packet. 

\begin{DoxyReturn}{Returns}
The sent packet. 
\end{DoxyReturn}

\begin{DoxyCode}
303 \{
304   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p};
305   \textcolor{keywordflow}{if} (\hyperlink{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{m\_dataSize})
306     \{
307       p = Create<Packet> (\hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data}, \hyperlink{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{m\_dataSize});
308     \}
309   \textcolor{keywordflow}{else}
310     \{
311       p = Create<Packet> (\hyperlink{classIpv6FragmentationTest_aeff576474d2d8d3291e23b5410271b4f}{m\_size});
312     \}
313   \hyperlink{classIPv6TestTag}{IPv6TestTag} tag;
314   tag.\hyperlink{classIPv6TestTag_aeeafdd9d12f0d9f4ed4cc124f5729858}{SetToken} (42);
315   p->\hyperlink{classns3_1_1Packet_a7400b8655852f5271c5957250d0141af}{AddPacketTag} (tag);
316   p->\hyperlink{classns3_1_1Packet_ad5997caea8c22757acade2fcb4d7daca}{AddByteTag} (tag);
317 
318   \hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_a036901c8f485fe5b6eab93b7f2ec289d}{Send} (p);
319 
320   \textcolor{keywordflow}{return} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p};
321 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8




Here is the caller graph for this function\+:
% FIG 9


\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Set\+Fill@{Set\+Fill}}
\index{Set\+Fill@{Set\+Fill}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Set\+Fill(uint8\+\_\+t $\ast$fill, uint32\+\_\+t fill\+Size, uint32\+\_\+t data\+Size)}{SetFill(uint8_t *fill, uint32_t fillSize, uint32_t dataSize)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Fragmentation\+Test\+::\+Set\+Fill (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{fill, }
\item[{uint32\+\_\+t}]{fill\+Size, }
\item[{uint32\+\_\+t}]{data\+Size}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_a6143375e886a978a720812a578767ab3}{}\label{classIpv6FragmentationTest_a6143375e886a978a720812a578767ab3}


Set the packet fill. 


\begin{DoxyParams}{Parameters}
{\em fill} & The fill. \\
\hline
{\em fill\+Size} & The fill size. \\
\hline
{\em data\+Size} & The packet size. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
276 \{
277   \textcolor{keywordflow}{if} (dataSize != \hyperlink{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{m\_dataSize})
278     \{
279       \textcolor{keyword}{delete} [] \hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data};
280       \hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data} = \textcolor{keyword}{new} uint8\_t [dataSize];
281       \hyperlink{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{m\_dataSize} = dataSize;
282     \}
283 
284   \textcolor{keywordflow}{if} (fillSize >= dataSize)
285     \{
286       memcpy (\hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data}, fill, dataSize);
287       \textcolor{keywordflow}{return};
288     \}
289 
290   uint32\_t filled = 0;
291   \textcolor{keywordflow}{while} (filled + fillSize < dataSize)
292     \{
293       memcpy (&\hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data}[filled], fill, fillSize);
294       filled += fillSize;
295     \}
296 
297   memcpy (&\hyperlink{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{m\_data}[filled], fill, dataSize - filled);
298 
299   \hyperlink{classIpv6FragmentationTest_aeff576474d2d8d3291e23b5410271b4f}{m\_size} = dataSize;
300 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 10


\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Start\+Client@{Start\+Client}}
\index{Start\+Client@{Start\+Client}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Start\+Client(\+Ptr$<$ Node $>$ Client\+Node)}{StartClient(Ptr< Node > ClientNode)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Fragmentation\+Test\+::\+Start\+Client (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{Client\+Node}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_afe87fca4651780b7210efb45a77eadff}{}\label{classIpv6FragmentationTest_afe87fca4651780b7210efb45a77eadff}


Start the client. 


\begin{DoxyParams}{Parameters}
{\em Client\+Node} & The client. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
236 \{
237 
238   \textcolor{keywordflow}{if} (\hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient} == 0)
239     \{
240       \hyperlink{classns3_1_1TypeId}{TypeId} tid = TypeId::LookupByName (\textcolor{stringliteral}{"ns3::UdpSocketFactory"});
241       \hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient} = Socket::CreateSocket (ClientNode, tid);
242       \hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (\hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (Ipv6Address::GetAny (),
       9));
243       \hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_a97f08aaf37b8fd7d4b5cad4dfdd4022a}{Connect} (\hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001::1"}), 9));
244       \hyperlink{classns3_1_1CallbackValue}{CallbackValue} cbValue = \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classIpv6FragmentationTest_a71cb73de46321641ac92d33df9cfc580}{Ipv6FragmentationTest::HandleReadIcmpClient}, \textcolor{keyword}{this});
245       \hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1ObjectBase_ac60245d3ea4123bbc9b1d391f1f6592f}{SetAttribute} (\textcolor{stringliteral}{"IcmpCallback6"}, cbValue);
246     \}
247 
248   \hyperlink{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{m\_socketClient}->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classIpv6FragmentationTest_ad6c91384e008c34c6b4eb7f60fc7ba31}{Ipv6FragmentationTest::HandleReadClient}, \textcolor{keyword}{this}));
249 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!Start\+Server@{Start\+Server}}
\index{Start\+Server@{Start\+Server}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{Start\+Server(\+Ptr$<$ Node $>$ Server\+Node)}{StartServer(Ptr< Node > ServerNode)}}]{\setlength{\rightskip}{0pt plus 5cm}void Ipv6\+Fragmentation\+Test\+::\+Start\+Server (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{Server\+Node}
\end{DoxyParamCaption}
)}\hypertarget{classIpv6FragmentationTest_a9e17748c96724c7a7b1af39ab54bdbfa}{}\label{classIpv6FragmentationTest_a9e17748c96724c7a7b1af39ab54bdbfa}


Start the server. 


\begin{DoxyParams}{Parameters}
{\em Server\+Node} & The server. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
206 \{
207 
208   \textcolor{keywordflow}{if} (\hyperlink{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{m\_socketServer} == 0)
209     \{
210       \hyperlink{classns3_1_1TypeId}{TypeId} tid = TypeId::LookupByName (\textcolor{stringliteral}{"ns3::UdpSocketFactory"});
211       \hyperlink{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{m\_socketServer} = Socket::CreateSocket (ServerNode, tid);
212       \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} local = \hyperlink{classns3_1_1Inet6SocketAddress}{Inet6SocketAddress} (
      \hyperlink{classns3_1_1Ipv6Address}{Ipv6Address} (\textcolor{stringliteral}{"2001::1"}), 9);
213       \hyperlink{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{m\_socketServer}->\hyperlink{classns3_1_1Socket_ada93439a43de2028b5a8fc6621dad482}{Bind} (local);
214       \hyperlink{classns3_1_1Ptr}{Ptr<UdpSocket>} udpSocket = DynamicCast<UdpSocket> (
      \hyperlink{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{m\_socketServer});
215     \}
216 
217   \hyperlink{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{m\_socketServer}->\hyperlink{classns3_1_1Socket_a243f7835ef1a85f9270fd3577e3a40da}{SetRecvCallback} (\hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classIpv6FragmentationTest_a3e548835f02712c58b19277eb0aeb110}{Ipv6FragmentationTest::HandleReadServer}, \textcolor{keyword}{this}));
218 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14




\subsection{Member Data Documentation}
\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+data@{m\+\_\+data}}
\index{m\+\_\+data@{m\+\_\+data}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+data}{m_data}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t$\ast$ Ipv6\+Fragmentation\+Test\+::m\+\_\+data\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}{}\label{classIpv6FragmentationTest_af7b77e77aad9b5667512c25a3f7eef83}


Data. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+data\+Size@{m\+\_\+data\+Size}}
\index{m\+\_\+data\+Size@{m\+\_\+data\+Size}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+data\+Size}{m_dataSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ipv6\+Fragmentation\+Test\+::m\+\_\+data\+Size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}{}\label{classIpv6FragmentationTest_a5fa7017430c2a39ffb33c5bdaaed7402}


Data size. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+icmp\+Code@{m\+\_\+icmp\+Code}}
\index{m\+\_\+icmp\+Code@{m\+\_\+icmp\+Code}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+icmp\+Code}{m_icmpCode}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t Ipv6\+Fragmentation\+Test\+::m\+\_\+icmp\+Code\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}{}\label{classIpv6FragmentationTest_a6d12c2608f87aa36c54cd9d7bdf3e558}


I\+C\+MP code. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+icmp\+Type@{m\+\_\+icmp\+Type}}
\index{m\+\_\+icmp\+Type@{m\+\_\+icmp\+Type}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+icmp\+Type}{m_icmpType}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t Ipv6\+Fragmentation\+Test\+::m\+\_\+icmp\+Type\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_ae933968023c4913c690cb92eb06fa9f8}{}\label{classIpv6FragmentationTest_ae933968023c4913c690cb92eb06fa9f8}


I\+C\+MP type. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+received\+Packet\+Client@{m\+\_\+received\+Packet\+Client}}
\index{m\+\_\+received\+Packet\+Client@{m\+\_\+received\+Packet\+Client}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+received\+Packet\+Client}{m_receivedPacketClient}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Ipv6\+Fragmentation\+Test\+::m\+\_\+received\+Packet\+Client\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_af8d5fd0d59dea9ddb85589998728fea6}{}\label{classIpv6FragmentationTest_af8d5fd0d59dea9ddb85589998728fea6}


Packet received by client. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+received\+Packet\+Server@{m\+\_\+received\+Packet\+Server}}
\index{m\+\_\+received\+Packet\+Server@{m\+\_\+received\+Packet\+Server}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+received\+Packet\+Server}{m_receivedPacketServer}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Ipv6\+Fragmentation\+Test\+::m\+\_\+received\+Packet\+Server\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}{}\label{classIpv6FragmentationTest_abe697e5a49ddbe098865a13c306d2f94}


Packet received by server. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+sent\+Packet\+Client@{m\+\_\+sent\+Packet\+Client}}
\index{m\+\_\+sent\+Packet\+Client@{m\+\_\+sent\+Packet\+Client}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+sent\+Packet\+Client}{m_sentPacketClient}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Packet}$>$ Ipv6\+Fragmentation\+Test\+::m\+\_\+sent\+Packet\+Client\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_ac14aa60abba7c0ea12a25e4ad2165133}{}\label{classIpv6FragmentationTest_ac14aa60abba7c0ea12a25e4ad2165133}


Packet sent by client. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+size@{m\+\_\+size}}
\index{m\+\_\+size@{m\+\_\+size}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+size}{m_size}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Ipv6\+Fragmentation\+Test\+::m\+\_\+size\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_aeff576474d2d8d3291e23b5410271b4f}{}\label{classIpv6FragmentationTest_aeff576474d2d8d3291e23b5410271b4f}


packet size. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+socket\+Client@{m\+\_\+socket\+Client}}
\index{m\+\_\+socket\+Client@{m\+\_\+socket\+Client}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+socket\+Client}{m_socketClient}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Socket}$>$ Ipv6\+Fragmentation\+Test\+::m\+\_\+socket\+Client\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}{}\label{classIpv6FragmentationTest_a42352629fa60d0a232d6494f6f4210f2}


Client socket. 

\index{Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}!m\+\_\+socket\+Server@{m\+\_\+socket\+Server}}
\index{m\+\_\+socket\+Server@{m\+\_\+socket\+Server}!Ipv6\+Fragmentation\+Test@{Ipv6\+Fragmentation\+Test}}
\subsubsection[{\texorpdfstring{m\+\_\+socket\+Server}{m_socketServer}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Socket}$>$ Ipv6\+Fragmentation\+Test\+::m\+\_\+socket\+Server\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}{}\label{classIpv6FragmentationTest_a826cfa2a3fcb43dac98cbd8cdc69b151}


Server socket. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
internet/test/\hyperlink{ipv6-fragmentation-test_8cc}{ipv6-\/fragmentation-\/test.\+cc}\end{DoxyCompactItemize}
