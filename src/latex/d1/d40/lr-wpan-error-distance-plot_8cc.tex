\hypertarget{lr-wpan-error-distance-plot_8cc}{}\section{lr-\/wpan/examples/lr-\/wpan-\/error-\/distance-\/plot.cc File Reference}
\label{lr-wpan-error-distance-plot_8cc}\index{lr-\/wpan/examples/lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan/examples/lr-\/wpan-\/error-\/distance-\/plot.\+cc}}
{\ttfamily \#include $<$ns3/test.\+h$>$}\\*
{\ttfamily \#include $<$ns3/log.\+h$>$}\\*
{\ttfamily \#include $<$ns3/callback.\+h$>$}\\*
{\ttfamily \#include $<$ns3/packet.\+h$>$}\\*
{\ttfamily \#include $<$ns3/simulator.\+h$>$}\\*
{\ttfamily \#include $<$ns3/lr-\/wpan-\/error-\/model.\+h$>$}\\*
{\ttfamily \#include $<$ns3/propagation-\/loss-\/model.\+h$>$}\\*
{\ttfamily \#include $<$ns3/lr-\/wpan-\/net-\/device.\+h$>$}\\*
{\ttfamily \#include $<$ns3/spectrum-\/value.\+h$>$}\\*
{\ttfamily \#include $<$ns3/lr-\/wpan-\/spectrum-\/value-\/helper.\+h$>$}\\*
{\ttfamily \#include $<$ns3/lr-\/wpan-\/mac.\+h$>$}\\*
{\ttfamily \#include $<$ns3/node.\+h$>$}\\*
{\ttfamily \#include $<$ns3/net-\/device.\+h$>$}\\*
{\ttfamily \#include $<$ns3/single-\/model-\/spectrum-\/channel.\+h$>$}\\*
{\ttfamily \#include $<$ns3/multi-\/model-\/spectrum-\/channel.\+h$>$}\\*
{\ttfamily \#include $<$ns3/mac16-\/address.\+h$>$}\\*
{\ttfamily \#include $<$ns3/constant-\/position-\/mobility-\/model.\+h$>$}\\*
{\ttfamily \#include $<$ns3/uinteger.\+h$>$}\\*
{\ttfamily \#include $<$ns3/nstime.\+h$>$}\\*
{\ttfamily \#include $<$ns3/abort.\+h$>$}\\*
{\ttfamily \#include $<$ns3/command-\/line.\+h$>$}\\*
{\ttfamily \#include $<$ns3/gnuplot.\+h$>$}\\*
{\ttfamily \#include $<$fstream$>$}\\*
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$vector$>$}\\*
Include dependency graph for lr-\/wpan-\/error-\/distance-\/plot.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{lr-wpan-error-distance-plot_8cc_ad8a5f5cb4f0c36ee52f713331497bf6a}{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE} (\char`\"{}Lr\+Wpan\+Error\+Distance\+Plot\char`\"{})
\item 
static void \hyperlink{lr-wpan-error-distance-plot_8cc_ab8c524d53619b411a9383d6bd742921d}{Lr\+Wpan\+Error\+Distance\+Callback} (\hyperlink{structns3_1_1McpsDataIndicationParams}{Mcps\+Data\+Indication\+Params} params, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_ac9de518908a968428863f829398a4e62}{p})
\item 
int \hyperlink{lr-wpan-error-distance-plot_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static uint32\+\_\+t \hyperlink{lr-wpan-error-distance-plot_8cc_a79032fdf9e19bed9048d5c198b35ff2a}{g\+\_\+received} = 0
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}!Lr\+Wpan\+Error\+Distance\+Callback@{Lr\+Wpan\+Error\+Distance\+Callback}}
\index{Lr\+Wpan\+Error\+Distance\+Callback@{Lr\+Wpan\+Error\+Distance\+Callback}!lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}}
\subsubsection[{\texorpdfstring{Lr\+Wpan\+Error\+Distance\+Callback(\+Mcps\+Data\+Indication\+Params params, Ptr$<$ Packet $>$ p)}{LrWpanErrorDistanceCallback(McpsDataIndicationParams params, Ptr< Packet > p)}}]{\setlength{\rightskip}{0pt plus 5cm}static void Lr\+Wpan\+Error\+Distance\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Mcps\+Data\+Indication\+Params}}]{params, }
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{p}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{lr-wpan-error-distance-plot_8cc_ab8c524d53619b411a9383d6bd742921d}{}\label{lr-wpan-error-distance-plot_8cc_ab8c524d53619b411a9383d6bd742921d}

\begin{DoxyCode}
63 \{
64   \hyperlink{lr-wpan-error-distance-plot_8cc_a79032fdf9e19bed9048d5c198b35ff2a}{g\_received}++;
65 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 1


\index{lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}!main@{main}}
\index{main@{main}!lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{lr-wpan-error-distance-plot_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{lr-wpan-error-distance-plot_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
68 \{
69   std::ostringstream os;
70   std::ofstream berfile (\textcolor{stringliteral}{"802.15.4-psr-distance.plt"});
71 
72   \textcolor{keywordtype}{int} minDistance = 1;
73   \textcolor{keywordtype}{int} maxDistance = 200;  \textcolor{comment}{// meters}
74   \textcolor{keywordtype}{int} \hyperlink{mmwave-amc-test2_8cc_ac504dff76b24ab9f15536c51aec9fbbb}{increment} = 1;
75   \textcolor{keywordtype}{int} maxPackets = 1000;
76   \textcolor{keywordtype}{int} packetSize = 20;
77   \textcolor{keywordtype}{double} txPower = 0;
78   uint32\_t channelNumber = 11;
79 
80   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
81 
82   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"txPower"}, \textcolor{stringliteral}{"transmit power (dBm)"}, txPower);
83   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"packetSize"}, \textcolor{stringliteral}{"packet (MSDU) size (bytes)"}, packetSize);
84   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"channelNumber"}, \textcolor{stringliteral}{"channel number"}, channelNumber);
85 
86   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc, argv);
87 
88   os << \textcolor{stringliteral}{"Packet (MSDU) size = "} << packetSize << \textcolor{stringliteral}{" bytes; tx power = "} << txPower << \textcolor{stringliteral}{" dBm; channel = "} << 
      channelNumber;
89 
90   \hyperlink{classns3_1_1Gnuplot}{Gnuplot} psrplot = \hyperlink{classns3_1_1Gnuplot}{Gnuplot} (\textcolor{stringliteral}{"802.15.4-psr-distance.eps"});
91   \hyperlink{classns3_1_1Gnuplot2dDataset}{Gnuplot2dDataset} psrdataset (\textcolor{stringliteral}{"802.15.4-psr-vs-distance"});
92 
93   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n0 = CreateObject <Node> ();
94   \hyperlink{classns3_1_1Ptr}{Ptr<Node>} n1 = CreateObject <Node> ();
95   \hyperlink{classns3_1_1Ptr}{Ptr<LrWpanNetDevice>} dev0 = CreateObject<LrWpanNetDevice> ();
96   \hyperlink{classns3_1_1Ptr}{Ptr<LrWpanNetDevice>} dev1 = CreateObject<LrWpanNetDevice> ();
97   dev0->SetAddress (\hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:01"}));
98   dev1->SetAddress (\hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:02"}));
99   \hyperlink{classns3_1_1Ptr}{Ptr<MultiModelSpectrumChannel>} channel = 
      CreateObject<MultiModelSpectrumChannel> ();
100   \hyperlink{classns3_1_1Ptr}{Ptr<LogDistancePropagationLossModel>} model = 
      CreateObject<LogDistancePropagationLossModel> ();
101   channel->\hyperlink{classns3_1_1MultiModelSpectrumChannel_ae458452bac17bd605b6e2f8f0fd58b29}{AddPropagationLossModel} (model);
102   dev0->SetChannel (channel);
103   dev1->SetChannel (channel);
104   n0->\hyperlink{classns3_1_1Node_a42ff83ee1d5d1649c770d3f5b62375de}{AddDevice} (dev0);
105   n1->AddDevice (dev1);
106   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantPositionMobilityModel>} mob0 = 
      CreateObject<ConstantPositionMobilityModel> ();
107   dev0->GetPhy ()->SetMobility (mob0);
108   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantPositionMobilityModel>} mob1 = 
      CreateObject<ConstantPositionMobilityModel> ();
109   dev1->GetPhy ()->SetMobility (mob1);
110 
111   \hyperlink{classns3_1_1LrWpanSpectrumValueHelper}{LrWpanSpectrumValueHelper} svh;
112   \hyperlink{classns3_1_1Ptr}{Ptr<SpectrumValue>} psd = svh.\hyperlink{classns3_1_1LrWpanSpectrumValueHelper_af0ae8f605c101953da6475676047ae32}{CreateTxPowerSpectralDensity} (
      txPower, channelNumber);
113   dev0->GetPhy ()->SetTxPowerSpectralDensity (psd);
114 
115   \hyperlink{classns3_1_1Callback}{McpsDataIndicationCallback} cb0;
116   cb0 = \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&\hyperlink{lr-wpan-error-distance-plot_8cc_ab8c524d53619b411a9383d6bd742921d}{LrWpanErrorDistanceCallback});
117   dev1->GetMac ()->SetMcpsDataIndicationCallback (cb0);
118 
119   \hyperlink{structns3_1_1McpsDataRequestParams}{McpsDataRequestParams} params;
120   params.\hyperlink{structns3_1_1McpsDataRequestParams_a31f4c281d07cf3b5992d45416bd71309}{m\_srcAddrMode} = \hyperlink{group__lr-wpan_gga9ea4702ab11d5329e1593afebce06bbba7bf58267dde39bdabfeeb5793450c5e3}{SHORT\_ADDR};
121   params.\hyperlink{structns3_1_1McpsDataRequestParams_a5c5e8dd4d08bfcd24de430d38ea7cd78}{m\_dstAddrMode} = \hyperlink{group__lr-wpan_gga9ea4702ab11d5329e1593afebce06bbba7bf58267dde39bdabfeeb5793450c5e3}{SHORT\_ADDR};
122   params.\hyperlink{structns3_1_1McpsDataRequestParams_a6695c180dec55fbd39f883052040e003}{m\_dstPanId} = 0;
123   params.\hyperlink{structns3_1_1McpsDataRequestParams_a68e918ac117d0fe43d6b9541ae4347c5}{m\_dstAddr} = \hyperlink{classns3_1_1Mac16Address}{Mac16Address} (\textcolor{stringliteral}{"00:02"});
124   params.\hyperlink{structns3_1_1McpsDataRequestParams_a90a54f9a082876ebe872538c8b1ce6bc}{m\_msduHandle} = 0;
125   params.\hyperlink{structns3_1_1McpsDataRequestParams_ad20ec674a277222812523b3ebbc18d4c}{m\_txOptions} = 0;
126 
127   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p};
128   mob0->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (0,0,0));
129   mob1->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (minDistance,0,0));
130   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = minDistance; j < maxDistance;  )
131     \{
132       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < maxPackets; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
133         \{
134           p = Create<Packet> (packetSize);
135           Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}),
136                                &LrWpanMac::McpsDataRequest,
137                                dev0->GetMac (), params, \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p});
138         \}
139       Simulator::Run ();
140       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Received "} << \hyperlink{lr-wpan-error-distance-plot_8cc_a79032fdf9e19bed9048d5c198b35ff2a}{g\_received} << \textcolor{stringliteral}{" packets for distance "} << j);
141       psrdataset.Add (j, \hyperlink{lr-wpan-error-distance-plot_8cc_a79032fdf9e19bed9048d5c198b35ff2a}{g\_received} / 1000.0);
142       \hyperlink{lr-wpan-error-distance-plot_8cc_a79032fdf9e19bed9048d5c198b35ff2a}{g\_received} = 0;
143       j += \hyperlink{mmwave-amc-test2_8cc_ac504dff76b24ab9f15536c51aec9fbbb}{increment};
144       mob1->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (\hyperlink{classns3_1_1Vector3D_a7e59b47bc94c9cb1dadff68c1d0112d8}{Vector} (j,0,0));
145     \}
146 
147   psrplot.\hyperlink{classns3_1_1Gnuplot_a306ec724a327cf9ab699700f31fca0a1}{AddDataset} (psrdataset);
148 
149   psrplot.\hyperlink{classns3_1_1Gnuplot_ac01f15633d49f0239f8a45293a1e04f0}{SetTitle} (os.str ());
150   psrplot.\hyperlink{classns3_1_1Gnuplot_a50cfef476972d6abace3dc6a6f72e7ec}{SetTerminal} (\textcolor{stringliteral}{"postscript eps color enh \(\backslash\)"Times-BoldItalic\(\backslash\)""});
151   psrplot.\hyperlink{classns3_1_1Gnuplot_a409069caf3227b213bdbb6bc303058b1}{SetLegend} (\textcolor{stringliteral}{"distance (m)"}, \textcolor{stringliteral}{"Packet Success Rate (PSR)"});
152   psrplot.\hyperlink{classns3_1_1Gnuplot_ab87336c31937b7083fda6a966488bb4c}{SetExtra}  (\textcolor{stringliteral}{"set xrange [0:200]\(\backslash\)n\(\backslash\)}
153 \textcolor{stringliteral}{set yrange [0:1]\(\backslash\)n\(\backslash\)}
154 \textcolor{stringliteral}{set grid\(\backslash\)n\(\backslash\)}
155 \textcolor{stringliteral}{set style line 1 linewidth 5\(\backslash\)n\(\backslash\)}
156 \textcolor{stringliteral}{set style increment user"});
157   psrplot.\hyperlink{classns3_1_1Gnuplot_a6cd487453f61e2405cc7cc9c80dc0cf2}{GenerateOutput} (berfile);
158   berfile.close ();
159 
160   Simulator::Destroy ();
161   \textcolor{keywordflow}{return} 0;
162 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}!N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}}
\index{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE@{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE}!lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}}
\subsubsection[{\texorpdfstring{N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+N\+E(""Lr\+Wpan\+Error\+Distance\+Plot"")}{NS_LOG_COMPONENT_DEFINE("LrWpanErrorDistancePlot")}}]{\setlength{\rightskip}{0pt plus 5cm}N\+S\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+D\+E\+F\+I\+NE (
\begin{DoxyParamCaption}
\item[{\char`\"{}Lr\+Wpan\+Error\+Distance\+Plot\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{lr-wpan-error-distance-plot_8cc_ad8a5f5cb4f0c36ee52f713331497bf6a}{}\label{lr-wpan-error-distance-plot_8cc_ad8a5f5cb4f0c36ee52f713331497bf6a}


\subsection{Variable Documentation}
\index{lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}!g\+\_\+received@{g\+\_\+received}}
\index{g\+\_\+received@{g\+\_\+received}!lr-\/wpan-\/error-\/distance-\/plot.\+cc@{lr-\/wpan-\/error-\/distance-\/plot.\+cc}}
\subsubsection[{\texorpdfstring{g\+\_\+received}{g_received}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t g\+\_\+received = 0\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{lr-wpan-error-distance-plot_8cc_a79032fdf9e19bed9048d5c198b35ff2a}{}\label{lr-wpan-error-distance-plot_8cc_a79032fdf9e19bed9048d5c198b35ff2a}
