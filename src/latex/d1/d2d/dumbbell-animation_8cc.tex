\hypertarget{dumbbell-animation_8cc}{}\section{netanim/examples/dumbbell-\/animation.cc File Reference}
\label{dumbbell-animation_8cc}\index{netanim/examples/dumbbell-\/animation.\+cc@{netanim/examples/dumbbell-\/animation.\+cc}}
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include \char`\"{}ns3/core-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/network-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/internet-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/point-\/to-\/point-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/netanim-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/applications-\/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ns3/point-\/to-\/point-\/layout-\/module.\+h\char`\"{}}\\*
Include dependency graph for dumbbell-\/animation.cc\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{dumbbell-animation_8cc_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{dumbbell-\/animation.\+cc@{dumbbell-\/animation.\+cc}!main@{main}}
\index{main@{main}!dumbbell-\/animation.\+cc@{dumbbell-\/animation.\+cc}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{dumbbell-animation_8cc_a0ddf1224851353fc92bfbff6f499fa97}{}\label{dumbbell-animation_8cc_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
32 \{
33   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::OnOffApplication::PacketSize"}, UintegerValue (512));
34   \hyperlink{group__config_ga2e7882df849d8ba4aaad31c934c40c06}{Config::SetDefault} (\textcolor{stringliteral}{"ns3::OnOffApplication::DataRate"}, StringValue (\textcolor{stringliteral}{"500kb/s"}));
35 
36   uint32\_t    nLeftLeaf = 5;
37   uint32\_t    nRightLeaf = 5;
38   uint32\_t    nLeaf = 0; \textcolor{comment}{// If non-zero, number of both left and right}
39   std::string animFile = \textcolor{stringliteral}{"dumbbell-animation.xml"} ;  \textcolor{comment}{// Name of file for animation output}
40 
41   \hyperlink{classns3_1_1CommandLine}{CommandLine} cmd;
42   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"nLeftLeaf"}, \textcolor{stringliteral}{"Number of left side leaf nodes"}, nLeftLeaf);
43   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"nRightLeaf"},\textcolor{stringliteral}{"Number of right side leaf nodes"}, nRightLeaf);
44   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"nLeaf"},     \textcolor{stringliteral}{"Number of left and right side leaf nodes"}, nLeaf);
45   cmd.\hyperlink{classns3_1_1CommandLine_addcfb546c7ad4c8bd0965654d55beb8e}{AddValue} (\textcolor{stringliteral}{"animFile"},  \textcolor{stringliteral}{"File Name for Animation Output"}, animFile);
46 
47   cmd.\hyperlink{classns3_1_1CommandLine_a5c10b85b3207e5ecb48d907966923156}{Parse} (argc,argv);
48   \textcolor{keywordflow}{if} (nLeaf > 0)
49     \{
50       nLeftLeaf = nLeaf;
51       nRightLeaf = nLeaf;
52     \}
53 
54   \textcolor{comment}{// Create the point-to-point link helpers}
55   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} pointToPointRouter;
56   pointToPointRouter.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute}  (\textcolor{stringliteral}{"DataRate"}, StringValue (\textcolor{stringliteral}{"10Mbps"}));
57   pointToPointRouter.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute} (\textcolor{stringliteral}{"Delay"}, StringValue (\textcolor{stringliteral}{"1ms"}));
58   \hyperlink{classns3_1_1PointToPointHelper}{PointToPointHelper} pointToPointLeaf;
59   pointToPointLeaf.\hyperlink{classns3_1_1PointToPointHelper_a4577f5ab8c387e5528af2e0fbab1152e}{SetDeviceAttribute}    (\textcolor{stringliteral}{"DataRate"}, StringValue (\textcolor{stringliteral}{"10Mbps"}));
60   pointToPointLeaf.\hyperlink{classns3_1_1PointToPointHelper_a6b5317fd17fb61e5a53f8d66a90b63b9}{SetChannelAttribute}   (\textcolor{stringliteral}{"Delay"}, StringValue (\textcolor{stringliteral}{"1ms"}));
61 
62   \hyperlink{classns3_1_1PointToPointDumbbellHelper}{PointToPointDumbbellHelper} \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d} (nLeftLeaf, pointToPointLeaf,
63                                 nRightLeaf, pointToPointLeaf,
64                                 pointToPointRouter);
65 
66   \textcolor{comment}{// Install Stack}
67   \hyperlink{classns3_1_1InternetStackHelper}{InternetStackHelper} stack;
68   \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d}.InstallStack (stack);
69 
70   \textcolor{comment}{// Assign IP Addresses}
71   \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d}.AssignIpv4Addresses (\hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} (\textcolor{stringliteral}{"10.1.1.0"}, \textcolor{stringliteral}{"255.255.255.0"}),
72                          \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} (\textcolor{stringliteral}{"10.2.1.0"}, \textcolor{stringliteral}{"255.255.255.0"}),
73                          \hyperlink{classns3_1_1Ipv4AddressHelper}{Ipv4AddressHelper} (\textcolor{stringliteral}{"10.3.1.0"}, \textcolor{stringliteral}{"255.255.255.0"}));
74 
75   \textcolor{comment}{// Install on/off app on all right side nodes}
76   \hyperlink{classns3_1_1OnOffHelper}{OnOffHelper} clientHelper (\textcolor{stringliteral}{"ns3::UdpSocketFactory"}, \hyperlink{classns3_1_1Address}{Address} ());
77   clientHelper.SetAttribute (\textcolor{stringliteral}{"OnTime"}, StringValue (\textcolor{stringliteral}{"ns3::UniformRandomVariable"}));
78   clientHelper.SetAttribute (\textcolor{stringliteral}{"OffTime"}, StringValue (\textcolor{stringliteral}{"ns3::UniformRandomVariable"}));
79   \hyperlink{classns3_1_1ApplicationContainer}{ApplicationContainer} clientApps;
80 
81   \textcolor{keywordflow}{for} (uint32\_t \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d}.RightCount (); ++\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})
82     \{
83       \textcolor{comment}{// Create an on/off app sending packets to the same leaf right side}
84       AddressValue remoteAddress (\hyperlink{classns3_1_1InetSocketAddress}{InetSocketAddress} (\hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d}.GetLeftIpv4Address (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}), 1000));
85       clientHelper.SetAttribute (\textcolor{stringliteral}{"Remote"}, remoteAddress);
86       clientApps.\hyperlink{classns3_1_1ApplicationContainer_ad09ab1a1ad5849d518d5f4c262e38152}{Add} (clientHelper.Install (\hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d}.GetRight (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})));
87     \}
88 
89   clientApps.\hyperlink{classns3_1_1ApplicationContainer_a8eff87926507020bbe3e1390358a54a7}{Start} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0.0));
90   clientApps.\hyperlink{classns3_1_1ApplicationContainer_adfc52f9aa4020c8714679b00bbb9ddb3}{Stop} (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10.0));
91 
92   \textcolor{comment}{// Set the bounding box for animation}
93   \hyperlink{buildings__pathloss_8m_a9f9b934daed17a4d3613b6886ff4cf4b}{d}.BoundingBox (1, 1, 100, 100);
94 
95   \textcolor{comment}{// Create the animation object and configure for specified output}
96   \hyperlink{classns3_1_1AnimationInterface}{AnimationInterface} anim (animFile);
97   anim.EnablePacketMetadata (); \textcolor{comment}{// Optional}
98   anim.EnableIpv4L3ProtocolCounters (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (0), \hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10)); \textcolor{comment}{// Optional}
99   
100   \textcolor{comment}{// Set up the acutal simulation}
101   Ipv4GlobalRoutingHelper::PopulateRoutingTables ();
102 
103   Simulator::Run ();
104   std::cout << \textcolor{stringliteral}{"Animation Trace file created:"} << animFile.c\_str ()<< std::endl;
105   Simulator::Destroy ();
106   \textcolor{keywordflow}{return} 0;
107 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


