\hypertarget{classns3_1_1MmWaveChannelRaytracing}{}\section{ns3\+:\+:Mm\+Wave\+Channel\+Raytracing Class Reference}
\label{classns3_1_1MmWaveChannelRaytracing}\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}


{\ttfamily \#include $<$mmwave-\/channel-\/raytracing.\+h$>$}



Inheritance diagram for ns3\+:\+:Mm\+Wave\+Channel\+Raytracing\+:
% FIG 0


Collaboration diagram for ns3\+:\+:Mm\+Wave\+Channel\+Raytracing\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1MmWaveChannelRaytracing_a589ce99d5245ae888be89e61a81a781d}{Mm\+Wave\+Channel\+Raytracing} ()
\item 
virtual \hyperlink{classns3_1_1MmWaveChannelRaytracing_a992e7f43cb5a3e5585872808fbf6caad}{$\sim$\+Mm\+Wave\+Channel\+Raytracing} ()
\item 
void \hyperlink{classns3_1_1MmWaveChannelRaytracing_a6d28926731bb6ee573eb3b7e431f2643}{Do\+Dispose} ()
\item 
void \hyperlink{classns3_1_1MmWaveChannelRaytracing_ac651f8bb2239af97faa8f524d4c9f0e9}{Load\+Traces} ()
\item 
void \hyperlink{classns3_1_1MmWaveChannelRaytracing_a8f1e187d23f0de1b906d97eab364e3b5}{Connect\+Devices} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ dev1, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1NetDevice}{Net\+Device} $>$ dev2)
\item 
void \hyperlink{classns3_1_1MmWaveChannelRaytracing_a4d9bc726032d2738fb159b432816018d}{Initial} (\hyperlink{classns3_1_1NetDeviceContainer}{Net\+Device\+Container} ue\+Devices, \hyperlink{classns3_1_1NetDeviceContainer}{Net\+Device\+Container} enb\+Devices)
\item 
void \hyperlink{classns3_1_1MmWaveChannelRaytracing_a29703c1f21c01890dfad7d9a9dddae26}{Set\+Configuration\+Parameters} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ ptr\+Config)
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_a6c66dffe14fe7f93785c95eba58e6e96}{Get\+Configuration\+Parameters} (void) const 
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_a05ab8d0eec036305bde7d2de74de6403}{Calc\+Rx\+Power\+Spectral\+Density} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{tx\+Psd}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ a, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ \hyperlink{lte__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}) const 
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1MmWaveChannelRaytracing_a5ce7a278e7d41a6ecd7dd9a2b5400f5b}{Get\+Type\+Id} (void)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_acc7c4160f1e83ce989502aec3fda4814}{Do\+Calc\+Rx\+Power\+Spectral\+Density} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{tx\+Psd}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ a, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1MobilityModel}{Mobility\+Model} $>$ \hyperlink{lte__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}) const 
\item 
\hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2\+D\+Vector\+\_\+t} \hyperlink{classns3_1_1MmWaveChannelRaytracing_a49dc87b1c7a9e87b2dfc0f64dbe3e543}{Gen\+Spatial\+Matrix} (uint64\+\_\+t trace\+Index, uint8\+\_\+t $\ast$antenna\+Num, bool bs) const 
\item 
\hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complex\+Vector\+\_\+t} \hyperlink{classns3_1_1MmWaveChannelRaytracing_a8014182a34e2b345469219704ddf42fb}{Gen\+Single\+Path} (double h\+Angle, double v\+Angle, uint8\+\_\+t $\ast$antenna\+Num) const 
\item 
\hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complex\+Vector\+\_\+t} \hyperlink{classns3_1_1MmWaveChannelRaytracing_a523c2da49105b8b3365e5a60e225b0ca}{Calc\+Beamforming\+Vector} (\hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2\+D\+Vector\+\_\+t} Spatial\+Matrix, \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{double\+Vector\+\_\+t} power\+Fraction) const 
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_acddfc590166e32ed64faff5b6673c951}{Get\+Channel\+Gain} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{lte__link__budget__x2__handover__measures_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{tx\+Psd}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{structns3_1_1mmWaveBeamFormingTraces}{mm\+Wave\+Beam\+Forming\+Traces} $>$ bf\+Params, double \hyperlink{mmwave-amc-test_8cc_a6dc6e6f3c75c509ce943163afb5dade7}{speed}) const 
\item 
double \hyperlink{classns3_1_1MmWaveChannelRaytracing_a4b1cda4eb5073b8c715d5f89a35ba180}{Get\+System\+Bandwidth} () const 
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\+\_\+t}, int $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{m\+\_\+connected\+Pair}
\item 
std\+::map$<$ \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\+\_\+t}, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{structns3_1_1TraceParams}{Trace\+Params} $>$ $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}{m\+\_\+channel\+Matrix\+Map}
\item 
double \hyperlink{classns3_1_1MmWaveChannelRaytracing_a2767e831325c65376c59d1fb277d7944}{m\+\_\+antenna\+Separation}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1UniformRandomVariable}{Uniform\+Random\+Variable} $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_a13ab4f0642dccc8758a20e0418cd7b16}{m\+\_\+uniform\+Rv}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1MmWavePhyMacCommon}{Mm\+Wave\+Phy\+Mac\+Common} $>$ \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\+\_\+phy\+Mac\+Config}
\item 
uint16\+\_\+t \hyperlink{classns3_1_1MmWaveChannelRaytracing_a796e2c26275e231a09c4049cf8af289d}{m\+\_\+start\+Distance}
\item 
double \hyperlink{classns3_1_1MmWaveChannelRaytracing_a318db9adde133cf62fd929bbd3b2b62e}{m\+\_\+speed}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Mm\+Wave\+Channel\+Raytracing@{Mm\+Wave\+Channel\+Raytracing}}
\index{Mm\+Wave\+Channel\+Raytracing@{Mm\+Wave\+Channel\+Raytracing}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Mm\+Wave\+Channel\+Raytracing()}{MmWaveChannelRaytracing()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Mm\+Wave\+Channel\+Raytracing (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a589ce99d5245ae888be89e61a81a781d}{}\label{classns3_1_1MmWaveChannelRaytracing_a589ce99d5245ae888be89e61a81a781d}

\begin{DoxyCode}
66         :\hyperlink{classns3_1_1MmWaveChannelRaytracing_a2767e831325c65376c59d1fb277d7944}{m\_antennaSeparation}(0.5)
67 \{
68         \hyperlink{classns3_1_1MmWaveChannelRaytracing_a13ab4f0642dccc8758a20e0418cd7b16}{m\_uniformRv} = CreateObject<UniformRandomVariable> ();
69         \hyperlink{classns3_1_1MmWaveChannelRaytracing_ac651f8bb2239af97faa8f524d4c9f0e9}{LoadTraces}();
70 
71 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!````~Mm\+Wave\+Channel\+Raytracing@{$\sim$\+Mm\+Wave\+Channel\+Raytracing}}
\index{````~Mm\+Wave\+Channel\+Raytracing@{$\sim$\+Mm\+Wave\+Channel\+Raytracing}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{$\sim$\+Mm\+Wave\+Channel\+Raytracing()}{~MmWaveChannelRaytracing()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::$\sim$\+Mm\+Wave\+Channel\+Raytracing (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a992e7f43cb5a3e5585872808fbf6caad}{}\label{classns3_1_1MmWaveChannelRaytracing_a992e7f43cb5a3e5585872808fbf6caad}

\begin{DoxyCode}
93 \{
94 
95 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Calc\+Beamforming\+Vector@{Calc\+Beamforming\+Vector}}
\index{Calc\+Beamforming\+Vector@{Calc\+Beamforming\+Vector}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Calc\+Beamforming\+Vector(complex2\+D\+Vector\+\_\+t Spatial\+Matrix, double\+Vector\+\_\+t power\+Fraction) const }{CalcBeamformingVector(complex2DVector_t SpatialMatrix, doubleVector_t powerFraction) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf complex\+Vector\+\_\+t} ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Calc\+Beamforming\+Vector (
\begin{DoxyParamCaption}
\item[{{\bf complex2\+D\+Vector\+\_\+t}}]{Spatial\+Matrix, }
\item[{{\bf double\+Vector\+\_\+t}}]{power\+Fraction}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a523c2da49105b8b3365e5a60e225b0ca}{}\label{classns3_1_1MmWaveChannelRaytracing_a523c2da49105b8b3365e5a60e225b0ca}

\begin{DoxyCode}
457 \{
458         \hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complexVector\_t} antennaWeights;
459         uint16\_t antennaNum = spatialMatrix.at (0).size ();
460         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}< antennaNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
461         \{
462                 antennaWeights.push\_back(spatialMatrix.at (0).at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})/sqrt(antennaNum));
463         \}
464 
465         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} iter = 0; iter<10; iter++)
466         \{
467                 \hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complexVector\_t} antennaWeights\_New;
468 
469                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} pathIndex = 0; pathIndex<spatialMatrix.size (); pathIndex++)
470                 \{
471                         std::complex<double> sum;
472                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}< antennaNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
473                         \{
474                                 sum += std::conj(spatialMatrix.at (pathIndex).at (
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}))*antennaWeights.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
475                         \}
476 
477                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}< antennaNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
478                         \{
479                 \textcolor{keywordtype}{double} pathPowerLinear = std::pow (10.0, (powerFraction. at(pathIndex)) / 10.0);
480 
481 
482                                 \textcolor{keywordflow}{if}(pathIndex ==0)
483                                 \{
484                                         antennaWeights\_New.push\_back(pathPowerLinear*spatialMatrix.at (
      pathIndex).at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})*sum);
485                                 \}
486                                 \textcolor{keywordflow}{else}
487                                 \{
488                                         antennaWeights\_New.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) += pathPowerLinear*spatialMatrix.at (
      pathIndex).at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})*sum;
489                                 \}
490                         \}
491                 \}
492                 \textcolor{comment}{//normalize antennaWeights;}
493                 \textcolor{keywordtype}{double} weightSum = 0;
494                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}< antennaNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
495                 \{
496                         weightSum += pow (std::abs(antennaWeights\_New. at(\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})),2);
497                 \}
498                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}< antennaNum; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
499                 \{
500                         antennaWeights\_New. at(\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}) = antennaWeights\_New. at(\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})/sqrt(weightSum);
501                 \}
502                 antennaWeights = antennaWeights\_New;
503         \}
504         \textcolor{keywordflow}{return} antennaWeights;
505 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 3


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Calc\+Rx\+Power\+Spectral\+Density@{Calc\+Rx\+Power\+Spectral\+Density}}
\index{Calc\+Rx\+Power\+Spectral\+Density@{Calc\+Rx\+Power\+Spectral\+Density}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Calc\+Rx\+Power\+Spectral\+Density(\+Ptr$<$ const Spectrum\+Value $>$ tx\+Psd, Ptr$<$ const Mobility\+Model $>$ a, Ptr$<$ const Mobility\+Model $>$ b) const }{CalcRxPowerSpectralDensity(Ptr< const SpectrumValue > txPsd, Ptr< const MobilityModel > a, Ptr< const MobilityModel > b) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Calc\+Rx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Spectrum\+Value} $>$}]{tx\+Psd, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{a, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{b}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a05ab8d0eec036305bde7d2de74de6403}{}\label{classns3_1_1MmWaveChannelRaytracing_a05ab8d0eec036305bde7d2de74de6403}

\begin{DoxyCode}
643 \{
644         \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MmWaveChannelRaytracing_acc7c4160f1e83ce989502aec3fda4814}{DoCalcRxPowerSpectralDensity}(\hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd}, a, 
      \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b});
645 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Connect\+Devices@{Connect\+Devices}}
\index{Connect\+Devices@{Connect\+Devices}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Connect\+Devices(\+Ptr$<$ Net\+Device $>$ dev1, Ptr$<$ Net\+Device $>$ dev2)}{ConnectDevices(Ptr< NetDevice > dev1, Ptr< NetDevice > dev2)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Connect\+Devices (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{dev1, }
\item[{{\bf Ptr}$<$ {\bf Net\+Device} $>$}]{dev2}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a8f1e187d23f0de1b906d97eab364e3b5}{}\label{classns3_1_1MmWaveChannelRaytracing_a8f1e187d23f0de1b906d97eab364e3b5}

\begin{DoxyCode}
193 \{
194         \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\_t} key = std::make\_pair(dev1,dev2);
195 
196         std::map< key\_t, int >::iterator iter = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{m\_connectedPair}.find(key);
197         \textcolor{keywordflow}{if} (iter != \hyperlink{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{m\_connectedPair}.end ())
198         \{
199                 \hyperlink{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{m\_connectedPair}.erase (iter);
200         \}
201         \hyperlink{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{m\_connectedPair}.insert(std::make\_pair(key,1));
202 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 5


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Do\+Calc\+Rx\+Power\+Spectral\+Density@{Do\+Calc\+Rx\+Power\+Spectral\+Density}}
\index{Do\+Calc\+Rx\+Power\+Spectral\+Density@{Do\+Calc\+Rx\+Power\+Spectral\+Density}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Do\+Calc\+Rx\+Power\+Spectral\+Density(\+Ptr$<$ const Spectrum\+Value $>$ tx\+Psd, Ptr$<$ const Mobility\+Model $>$ a, Ptr$<$ const Mobility\+Model $>$ b) const }{DoCalcRxPowerSpectralDensity(Ptr< const SpectrumValue > txPsd, Ptr< const MobilityModel > a, Ptr< const MobilityModel > b) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Do\+Calc\+Rx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Spectrum\+Value} $>$}]{tx\+Psd, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{a, }
\item[{{\bf Ptr}$<$ const {\bf Mobility\+Model} $>$}]{b}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [virtual]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_acc7c4160f1e83ce989502aec3fda4814}{}\label{classns3_1_1MmWaveChannelRaytracing_acc7c4160f1e83ce989502aec3fda4814}

\begin{DoxyParams}{Parameters}
{\em tx\+Psd} & set of values Vs frequency representing the transmission power. See \hyperlink{classns3_1_1SpectrumChannel}{Spectrum\+Channel} for details. \\
\hline
{\em a} & sender mobility \\
\hline
{\em b} & receiver mobility\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
set of values Vs frequency representing the received power in the same units used for the tx\+Power parameter. 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1SpectrumPropagationLossModel_a84c0da581e8828ee013fe164a899e5c9}{ns3\+::\+Spectrum\+Propagation\+Loss\+Model}.


\begin{DoxyCode}
245 \{
246         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
247         Ptr<SpectrumValue> rxPsd = \hyperlink{namespacens3_a952d99f6d759fee74dda19f308451bc1}{Copy} (\hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd});
248         Ptr<AntennaArrayModel> txAntennaArray, rxAntennaArray;
249 
250         Ptr<NetDevice> txDevice = a->GetObject<Node> ()->GetDevice (0);
251         Ptr<NetDevice> rxDevice = \hyperlink{buildings__pathloss_8m_a21ad0bd836b90d08f4cf640b4c298e7c}{b}->GetObject<Node> ()->GetDevice (0);
252         Ptr<MmWaveEnbNetDevice> txEnb =
253                                         DynamicCast<MmWaveEnbNetDevice> (txDevice);
254         Ptr<MmWaveUeNetDevice> rxUe =
255                                         DynamicCast<MmWaveUeNetDevice> (rxDevice);
256 
257         uint8\_t txAntennaNum[2];
258         uint8\_t rxAntennaNum[2];
259 
260         \textcolor{keywordtype}{bool} dl = \textcolor{keyword}{true};
261 
262         \textcolor{keywordflow}{if}(txEnb!=0 && rxUe!=0)
263         \{
264                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is downlink case"});
265 
266                 txAntennaNum[0] = sqrt (txEnb->GetAntennaNum ());
267                 txAntennaNum[1] = sqrt (txEnb->GetAntennaNum ());
268                 rxAntennaNum[0] = sqrt (rxUe->GetAntennaNum ());
269                 rxAntennaNum[1] = sqrt (rxUe->GetAntennaNum ());
270 
271                 txAntennaArray = DynamicCast<AntennaArrayModel> (
272                                         txEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
273                 rxAntennaArray = DynamicCast<AntennaArrayModel> (
274                                         rxUe->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
275         \}
276         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (txEnb !=0 && rxUe == 0)
277         \{
278                 Ptr<McUeNetDevice> rxMcUe = DynamicCast<McUeNetDevice> (rxDevice);
279 
280                 \textcolor{keywordflow}{if}(rxMcUe != 0)
281                 \{
282                         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is downlink case for MC device"});
283 
284                         txAntennaNum[0] = sqrt (txEnb->GetAntennaNum ());
285                         txAntennaNum[1] = sqrt (txEnb->GetAntennaNum ());
286                         rxAntennaNum[0] = sqrt (rxMcUe->GetAntennaNum ());
287                         rxAntennaNum[1] = sqrt (rxMcUe->GetAntennaNum ());
288 
289                         txAntennaArray = DynamicCast<AntennaArrayModel> (
290                                                 txEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
291                         rxAntennaArray = DynamicCast<AntennaArrayModel> (
292                                                 rxMcUe->GetMmWavePhy ()->GetDlSpectrumPhy ()->GetRxAntenna 
      ());
293                 \}
294         \} 
295         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (txEnb==0 && rxUe==0 )
296         \{
297                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is uplink case"});
298 
299                 dl = \textcolor{keyword}{false};
300                 Ptr<MmWaveUeNetDevice> txUe =
301                                                 DynamicCast<MmWaveUeNetDevice> (txDevice);
302                 Ptr<MmWaveEnbNetDevice> rxEnb =
303                                                 DynamicCast<MmWaveEnbNetDevice> (rxDevice);
304 
305                 \textcolor{keywordflow}{if}(txUe != 0)
306                 \{
307                         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is uplink case"}); 
308                         txAntennaNum[0] = sqrt (txUe->GetAntennaNum ());
309                         txAntennaNum[1] = sqrt (txUe->GetAntennaNum ());
310                         rxAntennaNum[0] = sqrt (rxEnb->GetAntennaNum ());
311                         rxAntennaNum[1] = sqrt (rxEnb->GetAntennaNum ());
312 
313                         txAntennaArray = DynamicCast<AntennaArrayModel> (
314                                                 txUe->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
315                         rxAntennaArray = DynamicCast<AntennaArrayModel> (
316                                                 rxEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna ());
317                 \}
318                 \textcolor{keywordflow}{else}
319                 \{
320                         Ptr<McUeNetDevice> txMcUe = DynamicCast<McUeNetDevice> (txDevice);
321 
322                         \textcolor{keywordflow}{if}(txMcUe != 0)
323                         \{
324                                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"this is uplink case for MC device"});   
325 
326                                 txAntennaNum[0] = sqrt (txMcUe->GetAntennaNum ());
327                                 txAntennaNum[1] = sqrt (txMcUe->GetAntennaNum ());
328                                 rxAntennaNum[0] = sqrt (rxEnb->GetAntennaNum ());
329                                 rxAntennaNum[1] = sqrt (rxEnb->GetAntennaNum ());
330 
331                                 txAntennaArray = DynamicCast<AntennaArrayModel> (
332                                                         txMcUe->GetMmWavePhy ()->GetDlSpectrumPhy ()->
      GetRxAntenna ());
333                                 rxAntennaArray = DynamicCast<AntennaArrayModel> (
334                                                         rxEnb->GetPhy ()->GetDlSpectrumPhy ()->GetRxAntenna
       ());
335 
336                         \}
337                 \}
338         \}
339         \textcolor{keywordflow}{else}
340         \{
341                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{stringliteral}{"enb to enb or ue to ue transmission, skip beamforming"});
342                 \textcolor{keywordflow}{return} rxPsd;
343         \}
344 
345         Ptr<mmWaveBeamFormingTraces> bfParams = Create<mmWaveBeamFormingTraces> ();
346         \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\_t} key = std::make\_pair(txDevice,rxDevice);
347 
348         \textcolor{keywordtype}{double} time = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now}().\hyperlink{classns3_1_1Time_a8f20d5c3b0902d7b4320982f340b57c8}{GetSeconds}();
349         uint16\_t traceIndex = (\hyperlink{classns3_1_1MmWaveChannelRaytracing_a796e2c26275e231a09c4049cf8af289d}{m\_startDistance}+time*\hyperlink{classns3_1_1MmWaveChannelRaytracing_a318db9adde133cf62fd929bbd3b2b62e}{m\_speed})*100;
350         \textcolor{keyword}{static} uint16\_t currentIndex = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a796e2c26275e231a09c4049cf8af289d}{m\_startDistance}*100;
351         \textcolor{keywordflow}{if}(traceIndex > 26050)
352         \{
353                 \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR} (\textcolor{stringliteral}{"The maximum trace index is 26050"});
354         \}
355         \textcolor{keywordflow}{if}(traceIndex != currentIndex)
356         \{
357                 currentIndex = traceIndex;
358                 \hyperlink{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}{m\_channelMatrixMap}.clear();
359         \}
360 
361         std::map< key\_t, Ptr<TraceParams> >::iterator it = \hyperlink{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}{m\_channelMatrixMap}.find (key);
362         \textcolor{keywordflow}{if} (it == \hyperlink{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}{m\_channelMatrixMap}.end ())
363         \{
364 
365                 \hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2DVector\_t} txSpatialMatrix;
366                 \hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2DVector\_t} rxSpatialMatrix;
367                 \textcolor{keywordflow}{if}(dl)
368                 \{
369                         txSpatialMatrix = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a49dc87b1c7a9e87b2dfc0f64dbe3e543}{GenSpatialMatrix} (traceIndex,txAntennaNum, \textcolor{keyword}{true});
370                         rxSpatialMatrix = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a49dc87b1c7a9e87b2dfc0f64dbe3e543}{GenSpatialMatrix} (traceIndex,rxAntennaNum, \textcolor{keyword}{false})
      ;
371                 \}
372                 \textcolor{keywordflow}{else}
373                 \{
374                         txSpatialMatrix = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a49dc87b1c7a9e87b2dfc0f64dbe3e543}{GenSpatialMatrix} (traceIndex,txAntennaNum, \textcolor{keyword}{false})
      ;
375                         rxSpatialMatrix = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a49dc87b1c7a9e87b2dfc0f64dbe3e543}{GenSpatialMatrix} (traceIndex,rxAntennaNum, \textcolor{keyword}{true});
376                 \}
377                 \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{doubleVector\_t} dopplerShift;
378                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < \hyperlink{namespacens3_aa9bd92de8f4cfc681e22ff5b45e141c6}{g\_path}.at(traceIndex); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
379                 \{
380                         dopplerShift.push\_back(\hyperlink{classns3_1_1MmWaveChannelRaytracing_a13ab4f0642dccc8758a20e0418cd7b16}{m\_uniformRv}->\hyperlink{classns3_1_1UniformRandomVariable_a03822d8c86ac51e9aa83bbc73041386b}{GetValue} (0,1));
381                 \}
382 
383                 Ptr<TraceParams> channel = Create<TraceParams> ();
384 
385                 channel->m\_txSpatialMatrix = txSpatialMatrix;
386                 channel->m\_rxSpatialMatrix = rxSpatialMatrix;
387                 channel->m\_powerFraction = \hyperlink{namespacens3_a7393b978973ee32cbf20a99c193f3aa7}{g\_pathloss}.at (traceIndex);
388                 channel->m\_delaySpread = \hyperlink{namespacens3_a9ae8878579236b1567aca15ee5d820b7}{g\_delay}.at (traceIndex);
389                 channel->m\_doppler = dopplerShift;
390 
391 
392                 \hyperlink{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}{m\_channelMatrixMap}.insert(std::make\_pair(key,channel));
393 
394                 \hyperlink{namespacens3_aa42bd408e172586b3b192acfaa36b070}{key\_t} reverseKey = std::make\_pair(rxDevice,txDevice);
395                 Ptr<TraceParams> reverseChannel = Create<TraceParams> ();
396                 reverseChannel->m\_txSpatialMatrix = rxSpatialMatrix;
397                 reverseChannel->m\_rxSpatialMatrix = txSpatialMatrix;
398                 reverseChannel->m\_powerFraction = \hyperlink{namespacens3_a7393b978973ee32cbf20a99c193f3aa7}{g\_pathloss}.at (traceIndex);;
399                 reverseChannel->m\_delaySpread = \hyperlink{namespacens3_a9ae8878579236b1567aca15ee5d820b7}{g\_delay}.at (traceIndex);
400                 reverseChannel->m\_doppler = dopplerShift;
401 
402                 \hyperlink{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}{m\_channelMatrixMap}.insert(std::make\_pair(reverseKey,reverseChannel));
403 
404                 bfParams->m\_channelParams = channel;
405         \}
406         \textcolor{keywordflow}{else}
407         \{
408                 bfParams->m\_channelParams = (*it).second;
409         \}
410 
411         \textcolor{comment}{//      calculate antenna weights, better method should be implemented}
412         bfParams->m\_txW = txAntennaArray->GetBeamformingVector();
413         bfParams->m\_rxW = rxAntennaArray->GetBeamformingVector();
414 
415 
416         std::map< key\_t, int >::iterator it1 = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{m\_connectedPair}.find (key);
417         \textcolor{keywordflow}{if}(it1 != \hyperlink{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{m\_connectedPair}.end ())
418         \{
419                 bfParams->m\_txW = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a523c2da49105b8b3365e5a60e225b0ca}{CalcBeamformingVector}(bfParams->m\_channelParams->
      m\_txSpatialMatrix, bfParams->m\_channelParams->m\_powerFraction);
420                 bfParams->m\_rxW = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a523c2da49105b8b3365e5a60e225b0ca}{CalcBeamformingVector}(bfParams->m\_channelParams->
      m\_rxSpatialMatrix, bfParams->m\_channelParams->m\_powerFraction);
421                 txAntennaArray->SetBeamformingVector(bfParams->m\_txW,rxDevice);
422                 rxAntennaArray->SetBeamformingVector(bfParams->m\_rxW,txDevice);
423         \}
424 
425         \textcolor{comment}{/*Vector rxSpeed = b->GetVelocity();}
426 \textcolor{comment}{        Vector txSpeed = a->GetVelocity();}
427 \textcolor{comment}{        double relativeSpeed = (rxSpeed.x-txSpeed.x)}
428 \textcolor{comment}{                        +(rxSpeed.y-txSpeed.y)+(rxSpeed.z-txSpeed.z);*/}
429         Ptr<SpectrumValue> bfPsd = \hyperlink{classns3_1_1MmWaveChannelRaytracing_acddfc590166e32ed64faff5b6673c951}{GetChannelGain}(rxPsd,bfParams, 
      \hyperlink{classns3_1_1MmWaveChannelRaytracing_a318db9adde133cf62fd929bbd3b2b62e}{m\_speed});
430 
431 
432         \textcolor{comment}{/*loging the beamforming gain for debug*/}
433         \textcolor{comment}{/*Values::iterator bfit = bfPsd->ValuesBegin ();}
434 \textcolor{comment}{        Values::iterator rxit = rxPsd->ValuesBegin ();}
435 \textcolor{comment}{        uint32\_t subChannel = 0;}
436 \textcolor{comment}{        double value=0;}
437 \textcolor{comment}{        while (bfit != bfPsd->ValuesEnd ())}
438 \textcolor{comment}{        \{}
439 \textcolor{comment}{                value += (*bfit)/(*rxit);}
440 \textcolor{comment}{                bfit++;}
441 \textcolor{comment}{                rxit++;}
442 \textcolor{comment}{                subChannel++;}
443 \textcolor{comment}{        \}*/}
444         \textcolor{comment}{//NS\_LOG\_UNCOND("Gain("<<10*log10(value/72)<<"dB)");}
445 
446         \textcolor{comment}{//NS\_LOG\_UNCOND ("TxAngle("<<txAngles.phi*180/M\_PI<<") RxAngle("<<rxAngles.phi*180/M\_PI}
447         \textcolor{comment}{//              <<") Speed["<<relativeSpeed<<"]");}
448         \textcolor{comment}{//NS\_LOG\_UNCOND ("Gain("<<10*Log10((*bfPsd)/(*txPsd))<<"dB)");}
449         \textcolor{keywordflow}{return} bfPsd;
450 
451 
452 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6




Here is the caller graph for this function\+:
% FIG 7


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Do\+Dispose@{Do\+Dispose}}
\index{Do\+Dispose@{Do\+Dispose}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Do\+Dispose()}{DoDispose()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Do\+Dispose (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a6d28926731bb6ee573eb3b7e431f2643}{}\label{classns3_1_1MmWaveChannelRaytracing_a6d28926731bb6ee573eb3b7e431f2643}
Destructor implementation.

This method is called by \hyperlink{classns3_1_1Object_aa90ae598863f6c251cdab3c3722afdaf}{Dispose()} or by the \hyperlink{classns3_1_1Object}{Object}\textquotesingle{}s destructor, whichever comes first.

Subclasses are expected to implement their real destruction code in an overriden version of this method and chain up to their parent\textquotesingle{}s implementation once they are done. {\itshape i.\+e}, for simplicity, the destructor of every subclass should be empty and its content should be moved to the associated \hyperlink{classns3_1_1MmWaveChannelRaytracing_a6d28926731bb6ee573eb3b7e431f2643}{Do\+Dispose()} method.

It is safe to call \hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{Get\+Object()} from within this method. 

Reimplemented from \hyperlink{classns3_1_1SpectrumPropagationLossModel_a26259057c97ea893d472b5ac52d6649e}{ns3\+::\+Spectrum\+Propagation\+Loss\+Model}.


\begin{DoxyCode}
99 \{
100         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
101 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Gen\+Single\+Path@{Gen\+Single\+Path}}
\index{Gen\+Single\+Path@{Gen\+Single\+Path}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Gen\+Single\+Path(double h\+Angle, double v\+Angle, uint8\+\_\+t $\ast$antenna\+Num) const }{GenSinglePath(double hAngle, double vAngle, uint8_t *antennaNum) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf complex\+Vector\+\_\+t} ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Gen\+Single\+Path (
\begin{DoxyParamCaption}
\item[{double}]{h\+Angle, }
\item[{double}]{v\+Angle, }
\item[{uint8\+\_\+t $\ast$}]{antenna\+Num}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a8014182a34e2b345469219704ddf42fb}{}\label{classns3_1_1MmWaveChannelRaytracing_a8014182a34e2b345469219704ddf42fb}

\begin{DoxyCode}
539 \{
540         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
541         \hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complexVector\_t} singlePath;
542         uint16\_t vSize = antennaNum[0];
543         uint16\_t hSize = antennaNum[1];
544 
545         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} vIndex = 0; vIndex < vSize; vIndex++)
546         \{
547                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} hIndex =0; hIndex < hSize; hIndex++)
548                 \{
549                         \textcolor{keywordtype}{double} \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_afd61ec66f9d7b807eece6eb12c781844}{w} = (-2)*M\_PI*hIndex*\hyperlink{classns3_1_1MmWaveChannelRaytracing_a2767e831325c65376c59d1fb277d7944}{m\_antennaSeparation}*cos(hAngle)
550                                                                                 + (-2)*M\_PI*vIndex*
      \hyperlink{classns3_1_1MmWaveChannelRaytracing_a2767e831325c65376c59d1fb277d7944}{m\_antennaSeparation}*cos(vAngle);
551                         singlePath.push\_back (std::complex<double> (cos (w), sin (w)));
552                 \}
553         \}
554         \textcolor{keywordflow}{return} singlePath;
555 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 8


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Gen\+Spatial\+Matrix@{Gen\+Spatial\+Matrix}}
\index{Gen\+Spatial\+Matrix@{Gen\+Spatial\+Matrix}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Gen\+Spatial\+Matrix(uint64\+\_\+t trace\+Index, uint8\+\_\+t $\ast$antenna\+Num, bool bs) const }{GenSpatialMatrix(uint64_t traceIndex, uint8_t *antennaNum, bool bs) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf complex2\+D\+Vector\+\_\+t} ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Gen\+Spatial\+Matrix (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{trace\+Index, }
\item[{uint8\+\_\+t $\ast$}]{antenna\+Num, }
\item[{bool}]{bs}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a49dc87b1c7a9e87b2dfc0f64dbe3e543}{}\label{classns3_1_1MmWaveChannelRaytracing_a49dc87b1c7a9e87b2dfc0f64dbe3e543}

\begin{DoxyCode}
511 \{
512         \hyperlink{namespacens3_aa25e3feece2676fd7470d50d4ba3d1d1}{complex2DVector\_t} spatialMatrix;
513         uint16\_t pathNum = \hyperlink{namespacens3_aa9bd92de8f4cfc681e22ff5b45e141c6}{g\_path}.at (traceIndex);
514         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} pathIndex = 0; pathIndex < pathNum; pathIndex++)
515         \{
516                 \textcolor{keywordtype}{double} azimuthAngle;
517                 \textcolor{keywordtype}{double} verticalAngle;
518                 \textcolor{keywordflow}{if}(bs)
519                 \{
520                         azimuthAngle = \hyperlink{namespacens3_a4500423074c7fcc93c888d3285c15f7b}{g\_aodAzimuth}.at (traceIndex).at (pathIndex);
521                         verticalAngle = \hyperlink{namespacens3_a886ae3f6e0e8310edc1666e886d04201}{g\_aodElevation}.at (traceIndex).at (pathIndex);
522                 \}
523                 \textcolor{keywordflow}{else}
524                 \{
525                         azimuthAngle = \hyperlink{namespacens3_a1ff84afca167d02e77c1d89872d1c88d}{g\_aoaAzimuth}.at (traceIndex).at (pathIndex);
526                         verticalAngle = \hyperlink{namespacens3_a8c7d43868bcbe7751105fb0481332145}{g\_aoaElevation}.at (traceIndex).at (pathIndex);
527                 \}
528                 \hyperlink{namespacens3_a6a7f75817ae50e6ac47414955b17d926}{complexVector\_t} singlePath;
529                 singlePath = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a8014182a34e2b345469219704ddf42fb}{GenSinglePath} (azimuthAngle*M\_PI/180, verticalAngle*M\_PI/180, 
      antennaNum);
530                 spatialMatrix.push\_back(singlePath);
531         \}
532 
533         \textcolor{keywordflow}{return} spatialMatrix;
534 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9




Here is the caller graph for this function\+:
% FIG 10


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Get\+Channel\+Gain@{Get\+Channel\+Gain}}
\index{Get\+Channel\+Gain@{Get\+Channel\+Gain}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Get\+Channel\+Gain(\+Ptr$<$ const Spectrum\+Value $>$ tx\+Psd, Ptr$<$ mm\+Wave\+Beam\+Forming\+Traces $>$ bf\+Params, double speed) const }{GetChannelGain(Ptr< const SpectrumValue > txPsd, Ptr< mmWaveBeamFormingTraces > bfParams, double speed) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Get\+Channel\+Gain (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Spectrum\+Value} $>$}]{tx\+Psd, }
\item[{{\bf Ptr}$<$ {\bf mm\+Wave\+Beam\+Forming\+Traces} $>$}]{bf\+Params, }
\item[{double}]{speed}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_acddfc590166e32ed64faff5b6673c951}{}\label{classns3_1_1MmWaveChannelRaytracing_acddfc590166e32ed64faff5b6673c951}

\begin{DoxyCode}
559 \{
560         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
561 
562         \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT}(bfParams->m\_channelParams->m\_rxSpatialMatrix.size () == bfParams->
      m\_channelParams->m\_txSpatialMatrix.size ());
563         uint16\_t pathNum = bfParams->m\_channelParams->m\_txSpatialMatrix.size ();
564         \hyperlink{namespacens3_1_1TracedValueCallback_a7ffd3e7c142ffe7c8a1d2db9b8de38ec}{Time} time = \hyperlink{classns3_1_1Simulator_ac3178fa975b419f7875e7105be122800}{Simulator::Now} ();
565         \textcolor{keywordtype}{double} t = time.GetSeconds ();
566         Ptr<SpectrumValue> tempPsd = Copy<SpectrumValue> (\hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd});
567         \textcolor{keywordtype}{bool} noSpeed = \textcolor{keyword}{false};
568         \textcolor{keywordflow}{if} (\hyperlink{mmwave-amc-test_8cc_a6dc6e6f3c75c509ce943163afb5dade7}{speed} == 0)
569         \{
570                 noSpeed = \textcolor{keyword}{true};
571         \}
572 
573         Values::iterator vit = tempPsd->ValuesBegin ();
574         uint16\_t iSubband = 0;
575         \textcolor{keywordflow}{while} (vit != tempPsd->ValuesEnd ())
576         \{
577                 std::complex<double> subsbandGain (0.0,0.0);
578                 \textcolor{keywordflow}{if} ((*vit) != 0.00)
579                 \{
580                         \textcolor{keywordtype}{double} fsb = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig}->
      \hyperlink{classns3_1_1MmWavePhyMacCommon_a0850d2e37c7075b9bce242723b722019}{GetCenterFrequency} () - \hyperlink{classns3_1_1MmWaveChannelRaytracing_a4b1cda4eb5073b8c715d5f89a35ba180}{GetSystemBandwidth} ()/2 + 
      \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_acc801566d527f1893d67a618ea3be203}{GetChunkWidth} ()*iSubband ;
581                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} pathIndex = 0; pathIndex < pathNum; pathIndex++)
582                         \{
583                                 \textcolor{comment}{//need to convert ns to s}
584                                 \textcolor{keywordtype}{double} temp\_delay = -1e-9*2*M\_PI*fsb*bfParams->m\_channelParams->
      m\_delaySpread.at (pathIndex);
585                                 std::complex<double> \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay} (cos (temp\_delay), sin (temp\_delay));
586 
587                                 std::complex<double> doppler;
588                                 \textcolor{keywordflow}{if} (noSpeed)
589                                 \{
590                                         doppler = std::complex<double> (1,0);
591                                 \}
592                                 \textcolor{keywordflow}{else}
593                                 \{
594                                         \textcolor{keywordtype}{double} f\_d = \hyperlink{mmwave-amc-test_8cc_a6dc6e6f3c75c509ce943163afb5dade7}{speed}*\hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig}->
      \hyperlink{classns3_1_1MmWavePhyMacCommon_a0850d2e37c7075b9bce242723b722019}{GetCenterFrequency} ()/3e8;
595                                         \textcolor{keywordtype}{double} temp\_Doppler = 2*M\_PI*t*f\_d*bfParams->m\_channelParams->
      m\_doppler.at (pathIndex);
596                                         doppler = std::complex<double> (cos (temp\_Doppler), sin (
      temp\_Doppler));
597                                 \}
598                 \textcolor{keywordtype}{double} pathPowerLinear = std::pow (10.0, (bfParams->m\_channelParams->m\_powerFraction. at(
      pathIndex)) / 10.0);
599 
600                                 std::complex<double> smallScaleFading = sqrt(pathPowerLinear)*doppler*
      \hyperlink{lte_2model_2fading-traces_2fading__trace__generator_8m_a7964e6aa8f61a9d28973c8267a606ad8}{delay};
601                                 \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO}(doppler<<delay);
602 
603                                 \textcolor{keywordflow}{if}(bfParams->m\_txW.empty ()||bfParams->m\_rxW.empty ())
604                                 \{
605                                         \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR}(\textcolor{stringliteral}{"antenna weights are empty"});
606                                 \}
607                                 \textcolor{keywordflow}{else}
608                                 \{
609                                         \textcolor{comment}{/* beam forming*/}
610                                         std::complex<double> txSum, rxSum;
611                                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < bfParams->m\_txW.size (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
612                                         \{
613                                                 txSum += std::conj(bfParams->m\_channelParams->
      m\_txSpatialMatrix.at (pathIndex).at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}))*bfParams->m\_txW.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i});
614                                         \}
615                                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} < bfParams->m\_rxW.size (); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
616                                         \{
617                                                 rxSum += bfParams->m\_channelParams->m\_rxSpatialMatrix.at (
      pathIndex). at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i})*std::conj(bfParams->m\_rxW.at (\hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}));
618                                         \}
619                                         subsbandGain = subsbandGain + txSum*rxSum*smallScaleFading;
620                                 \}
621                         \}
622                         *vit = (*vit)*(norm (subsbandGain));
623                 \}
624                 vit++;
625                 iSubband++;
626         \}
627         \textcolor{keywordflow}{return} tempPsd;
628 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11




Here is the caller graph for this function\+:
% FIG 12


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Get\+Configuration\+Parameters@{Get\+Configuration\+Parameters}}
\index{Get\+Configuration\+Parameters@{Get\+Configuration\+Parameters}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Get\+Configuration\+Parameters(void) const }{GetConfigurationParameters(void) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Mm\+Wave\+Phy\+Mac\+Common} $>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Get\+Configuration\+Parameters (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a6c66dffe14fe7f93785c95eba58e6e96}{}\label{classns3_1_1MmWaveChannelRaytracing_a6c66dffe14fe7f93785c95eba58e6e96}

\begin{DoxyCode}
111 \{
112         \textcolor{keywordflow}{return} \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig};
113 \}
\end{DoxyCode}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Get\+System\+Bandwidth@{Get\+System\+Bandwidth}}
\index{Get\+System\+Bandwidth@{Get\+System\+Bandwidth}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Get\+System\+Bandwidth() const }{GetSystemBandwidth() const }}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Get\+System\+Bandwidth (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a4b1cda4eb5073b8c715d5f89a35ba180}{}\label{classns3_1_1MmWaveChannelRaytracing_a4b1cda4eb5073b8c715d5f89a35ba180}

\begin{DoxyCode}
632 \{
633         \textcolor{keywordtype}{double} \hyperlink{generate__test__data__lte__spectrum__model_8m_a3f7228a3941f19f282647a09dd494528}{bw} = 0.00;
634         bw = \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_acc801566d527f1893d67a618ea3be203}{GetChunkWidth} () * 
      \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a8a303f463053dadea5902859a00d481f}{GetNumChunkPerRb} () * 
      \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig}->\hyperlink{classns3_1_1MmWavePhyMacCommon_a4c5f323fd722d6eec52efda5d76f97ad}{GetNumRb} ();
635         \textcolor{keywordflow}{return} \hyperlink{generate__test__data__lte__spectrum__model_8m_a3f7228a3941f19f282647a09dd494528}{bw};
636 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13




Here is the caller graph for this function\+:
% FIG 14


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id(void)}{GetTypeId(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a5ce7a278e7d41a6ecd7dd9a2b5400f5b}{}\label{classns3_1_1MmWaveChannelRaytracing_a5ce7a278e7d41a6ecd7dd9a2b5400f5b}

\begin{DoxyCode}
75 \{
76         \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::MmWaveChannelRaytracing"})
77         .SetParent<\hyperlink{classns3_1_1Object_a40860402e64d8008fb42329df7097cdb}{Object}> ()
78         .AddAttribute (\textcolor{stringliteral}{"StartDistance"},
79                            \textcolor{stringliteral}{"Select start point of the simulation, the range of data point is [0, 260]
       meters"},
80                            UintegerValue (0),
81                            MakeUintegerAccessor (&
      \hyperlink{classns3_1_1MmWaveChannelRaytracing_a796e2c26275e231a09c4049cf8af289d}{MmWaveChannelRaytracing::m\_startDistance}),
82                            MakeUintegerChecker<uint16\_t> ())
83         .AddAttribute (\textcolor{stringliteral}{"Speed"},
84                            \textcolor{stringliteral}{"The speed of the node (m/s)"},
85                            DoubleValue (1.0),
86                            MakeDoubleAccessor (&\hyperlink{classns3_1_1MmWaveChannelRaytracing_a318db9adde133cf62fd929bbd3b2b62e}{MmWaveChannelRaytracing::m\_speed}
      ),
87                            MakeDoubleChecker<double> ())
88         ;
89         \textcolor{keywordflow}{return} tid;
90 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Initial@{Initial}}
\index{Initial@{Initial}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Initial(\+Net\+Device\+Container ue\+Devices, Net\+Device\+Container enb\+Devices)}{Initial(NetDeviceContainer ueDevices, NetDeviceContainer enbDevices)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Initial (
\begin{DoxyParamCaption}
\item[{{\bf Net\+Device\+Container}}]{ue\+Devices, }
\item[{{\bf Net\+Device\+Container}}]{enb\+Devices}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a4d9bc726032d2738fb159b432816018d}{}\label{classns3_1_1MmWaveChannelRaytracing_a4d9bc726032d2738fb159b432816018d}

\begin{DoxyCode}
206 \{
207 
208         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (&ueDevices<<&enbDevices);
209 
210         \textcolor{keywordflow}{for} (\hyperlink{classns3_1_1NetDeviceContainer_a45709bb572f975569ed985fa89b132f8}{NetDeviceContainer::Iterator} \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} = ueDevices.Begin(); 
      \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i} != ueDevices.End(); \hyperlink{bernuolliDistribution_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}++)
211         \{
212                 Ptr<MmWaveUeNetDevice> UeDev =
213                                                 DynamicCast<MmWaveUeNetDevice> (*i);
214                 \textcolor{keywordflow}{if} (UeDev != 0) 
215                 \{
216                         \textcolor{keywordflow}{if} (UeDev->GetTargetEnb ())
217                         \{
218                                 Ptr<NetDevice> targetBs = UeDev->GetTargetEnb ();
219                                 \hyperlink{classns3_1_1MmWaveChannelRaytracing_a8f1e187d23f0de1b906d97eab364e3b5}{ConnectDevices} (*i, targetBs);
220                                 \hyperlink{classns3_1_1MmWaveChannelRaytracing_a8f1e187d23f0de1b906d97eab364e3b5}{ConnectDevices} (targetBs, *i);
221                         \}
222                 \}
223                 \textcolor{keywordflow}{else}
224                 \{       \textcolor{comment}{// it may be a McUeNetDevice}
225                         Ptr<McUeNetDevice> mcUeDev =
226                                                 DynamicCast<McUeNetDevice> (*i);
227                         \textcolor{keywordflow}{if} (mcUeDev != 0) 
228                         \{
229                                 \textcolor{keywordflow}{if} (mcUeDev->GetMmWaveTargetEnb ())
230                                 \{
231                                         Ptr<NetDevice> targetBs = mcUeDev->GetMmWaveTargetEnb ();
232                                         \hyperlink{classns3_1_1MmWaveChannelRaytracing_a8f1e187d23f0de1b906d97eab364e3b5}{ConnectDevices} (*i, targetBs);
233                                         \hyperlink{classns3_1_1MmWaveChannelRaytracing_a8f1e187d23f0de1b906d97eab364e3b5}{ConnectDevices} (targetBs, *i);
234                                 \}
235                         \}
236                 \}
237         \}
238 
239 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Load\+Traces@{Load\+Traces}}
\index{Load\+Traces@{Load\+Traces}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Load\+Traces()}{LoadTraces()}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Load\+Traces (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelRaytracing_ac651f8bb2239af97faa8f524d4c9f0e9}{}\label{classns3_1_1MmWaveChannelRaytracing_ac651f8bb2239af97faa8f524d4c9f0e9}

\begin{DoxyCode}
117 \{
118         std::string filename = \textcolor{stringliteral}{"src/mmwave/model/Raytracing/traces10cm.txt"};
119         \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << \textcolor{stringliteral}{"Loading Raytracing file "} << filename);
120         std::ifstream singlefile;
121         singlefile.open (filename.c\_str (), std::ifstream::in);
122 
123         \hyperlink{group__logging_gafbd73ee2cf9f26b319f49086d8e860fb}{NS\_LOG\_INFO} (\textcolor{keyword}{this} << \textcolor{stringliteral}{" File: "} << filename);
124         \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG}(singlefile.good (), \textcolor{stringliteral}{" Raytracing file not found"});
125     std::string line;
126     std::string token;
127     uint16\_t counter = 0;
128     \textcolor{keywordflow}{while}( std::getline(singlefile, line) ) \textcolor{comment}{//Parse each line of the file}
129     \{
130         \textcolor{keywordflow}{if}(counter == 8)
131         \{
132                 counter = 0;
133         \}
134         \hyperlink{namespacens3_aa6f1edf6566ca6afec613bc6e40240ea}{doubleVector\_t} path;
135         std::istringstream stream(line);
136         \textcolor{keywordflow}{while}( getline(stream,token,\textcolor{charliteral}{','}) ) \textcolor{comment}{//Parse each comma separated string in a line}
137         \{
138             \textcolor{keywordtype}{double} sigma = 0.00;
139             std::stringstream stream( token );
140             stream>>sigma;
141                 path.push\_back(sigma);
142                 \}
143 
144                 \textcolor{keywordflow}{switch} (counter)
145                 \{
146                 \textcolor{keywordflow}{case} 0:
147                         \hyperlink{namespacens3_aa9bd92de8f4cfc681e22ff5b45e141c6}{g\_path}.push\_back (path.at (0));
148                         \textcolor{keywordflow}{break};
149                 \textcolor{keywordflow}{case} 1:
150                         \hyperlink{namespacens3_a9ae8878579236b1567aca15ee5d820b7}{g\_delay}.push\_back (path);
151                         \textcolor{keywordflow}{break};
152                 \textcolor{keywordflow}{case} 2:
153                         \hyperlink{namespacens3_a7393b978973ee32cbf20a99c193f3aa7}{g\_pathloss}.push\_back (path);
154                         \textcolor{keywordflow}{break};
155                 \textcolor{keywordflow}{case} 3:
156                         \hyperlink{namespacens3_a9cf5be6b6a45b7a18d9f31e3ccfa3092}{g\_phase}.push\_back (path);
157                         \textcolor{keywordflow}{break};
158                 \textcolor{keywordflow}{case} 4:
159                         \hyperlink{namespacens3_a886ae3f6e0e8310edc1666e886d04201}{g\_aodElevation}.push\_back (path);
160                         \textcolor{keywordflow}{break};
161                 \textcolor{keywordflow}{case} 5:
162                         \hyperlink{namespacens3_a4500423074c7fcc93c888d3285c15f7b}{g\_aodAzimuth}.push\_back (path);
163                         \textcolor{keywordflow}{break};
164                 \textcolor{keywordflow}{case} 6:
165                         \hyperlink{namespacens3_a8c7d43868bcbe7751105fb0481332145}{g\_aoaElevation}.push\_back (path);
166                         \textcolor{keywordflow}{break};
167                 \textcolor{keywordflow}{case} 7:
168                         \hyperlink{namespacens3_a1ff84afca167d02e77c1d89872d1c88d}{g\_aoaAzimuth}.push\_back (path);
169                         \textcolor{keywordflow}{break};
170                 \textcolor{keywordflow}{default}:
171                         \hyperlink{group__fatal_ga5131d5e3f75d7d4cbfd706ac456fdc85}{NS\_FATAL\_ERROR}(\textcolor{stringliteral}{"Never call this"});
172                         \textcolor{keywordflow}{break};
173                 \}
174                 counter++;
175         \}
176 
177         \textcolor{comment}{/*NS\_LOG\_UNCOND(g\_path.size());}
178 \textcolor{comment}{        NS\_LOG\_UNCOND(g\_delay.size());}
179 \textcolor{comment}{        NS\_LOG\_UNCOND(g\_pathloss.size());}
180 \textcolor{comment}{        NS\_LOG\_UNCOND(g\_phase.size());}
181 \textcolor{comment}{        NS\_LOG\_UNCOND(g\_aodElevation.size());}
182 \textcolor{comment}{        NS\_LOG\_UNCOND(g\_aodAzimuth.size());}
183 \textcolor{comment}{        NS\_LOG\_UNCOND(g\_aoaElevation.size());}
184 \textcolor{comment}{        NS\_LOG\_UNCOND(g\_aoaAzimuth.size());*/}
185 
186 
187 
188 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 17


\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!Set\+Configuration\+Parameters@{Set\+Configuration\+Parameters}}
\index{Set\+Configuration\+Parameters@{Set\+Configuration\+Parameters}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{Set\+Configuration\+Parameters(\+Ptr$<$ Mm\+Wave\+Phy\+Mac\+Common $>$ ptr\+Config)}{SetConfigurationParameters(Ptr< MmWavePhyMacCommon > ptrConfig)}}]{\setlength{\rightskip}{0pt plus 5cm}void ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::\+Set\+Configuration\+Parameters (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Mm\+Wave\+Phy\+Mac\+Common} $>$}]{ptr\+Config}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a29703c1f21c01890dfad7d9a9dddae26}{}\label{classns3_1_1MmWaveChannelRaytracing_a29703c1f21c01890dfad7d9a9dddae26}

\begin{DoxyCode}
105 \{
106         \hyperlink{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{m\_phyMacConfig} = ptrConfig;
107 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!m\+\_\+antenna\+Separation@{m\+\_\+antenna\+Separation}}
\index{m\+\_\+antenna\+Separation@{m\+\_\+antenna\+Separation}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{m\+\_\+antenna\+Separation}{m_antennaSeparation}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::m\+\_\+antenna\+Separation\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a2767e831325c65376c59d1fb277d7944}{}\label{classns3_1_1MmWaveChannelRaytracing_a2767e831325c65376c59d1fb277d7944}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!m\+\_\+channel\+Matrix\+Map@{m\+\_\+channel\+Matrix\+Map}}
\index{m\+\_\+channel\+Matrix\+Map@{m\+\_\+channel\+Matrix\+Map}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{m\+\_\+channel\+Matrix\+Map}{m_channelMatrixMap}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ {\bf key\+\_\+t}, {\bf Ptr}$<${\bf Trace\+Params}$>$ $>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::m\+\_\+channel\+Matrix\+Map\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}{}\label{classns3_1_1MmWaveChannelRaytracing_abdee4d8795a80d738563c52ec233cfdd}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!m\+\_\+connected\+Pair@{m\+\_\+connected\+Pair}}
\index{m\+\_\+connected\+Pair@{m\+\_\+connected\+Pair}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{m\+\_\+connected\+Pair}{m_connectedPair}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ {\bf key\+\_\+t}, int $>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::m\+\_\+connected\+Pair\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}{}\label{classns3_1_1MmWaveChannelRaytracing_a51c4346d4884ef3b8b08667ab6ca790d}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!m\+\_\+phy\+Mac\+Config@{m\+\_\+phy\+Mac\+Config}}
\index{m\+\_\+phy\+Mac\+Config@{m\+\_\+phy\+Mac\+Config}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{m\+\_\+phy\+Mac\+Config}{m_phyMacConfig}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Mm\+Wave\+Phy\+Mac\+Common}$>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::m\+\_\+phy\+Mac\+Config\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}{}\label{classns3_1_1MmWaveChannelRaytracing_a7782dd5b891e4cffae9024b271960891}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!m\+\_\+speed@{m\+\_\+speed}}
\index{m\+\_\+speed@{m\+\_\+speed}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{m\+\_\+speed}{m_speed}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::m\+\_\+speed\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a318db9adde133cf62fd929bbd3b2b62e}{}\label{classns3_1_1MmWaveChannelRaytracing_a318db9adde133cf62fd929bbd3b2b62e}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!m\+\_\+start\+Distance@{m\+\_\+start\+Distance}}
\index{m\+\_\+start\+Distance@{m\+\_\+start\+Distance}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{m\+\_\+start\+Distance}{m_startDistance}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::m\+\_\+start\+Distance\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a796e2c26275e231a09c4049cf8af289d}{}\label{classns3_1_1MmWaveChannelRaytracing_a796e2c26275e231a09c4049cf8af289d}
\index{ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}!m\+\_\+uniform\+Rv@{m\+\_\+uniform\+Rv}}
\index{m\+\_\+uniform\+Rv@{m\+\_\+uniform\+Rv}!ns3\+::\+Mm\+Wave\+Channel\+Raytracing@{ns3\+::\+Mm\+Wave\+Channel\+Raytracing}}
\subsubsection[{\texorpdfstring{m\+\_\+uniform\+Rv}{m_uniformRv}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Uniform\+Random\+Variable}$>$ ns3\+::\+Mm\+Wave\+Channel\+Raytracing\+::m\+\_\+uniform\+Rv\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1MmWaveChannelRaytracing_a13ab4f0642dccc8758a20e0418cd7b16}{}\label{classns3_1_1MmWaveChannelRaytracing_a13ab4f0642dccc8758a20e0418cd7b16}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
mmwave/model/\hyperlink{mmwave-channel-raytracing_8h}{mmwave-\/channel-\/raytracing.\+h}\item 
mmwave/model/\hyperlink{mmwave-channel-raytracing_8cc}{mmwave-\/channel-\/raytracing.\+cc}\end{DoxyCompactItemize}
