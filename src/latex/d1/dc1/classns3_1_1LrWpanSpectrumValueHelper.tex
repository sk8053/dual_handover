\hypertarget{classns3_1_1LrWpanSpectrumValueHelper}{}\section{ns3\+:\+:Lr\+Wpan\+Spectrum\+Value\+Helper Class Reference}
\label{classns3_1_1LrWpanSpectrumValueHelper}\index{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}}


This class defines all functions to create spectrum model for Lr\+Wpan.  




{\ttfamily \#include $<$lr-\/wpan-\/spectrum-\/value-\/helper.\+h$>$}



Collaboration diagram for ns3\+:\+:Lr\+Wpan\+Spectrum\+Value\+Helper\+:
% FIG 0
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1LrWpanSpectrumValueHelper_a1aceee02f0f8edf6091f3e44e21179f3}{Lr\+Wpan\+Spectrum\+Value\+Helper} (void)
\item 
virtual \hyperlink{classns3_1_1LrWpanSpectrumValueHelper_ac3b8b9c31f5ba27a1e01906a64bbfa6d}{$\sim$\+Lr\+Wpan\+Spectrum\+Value\+Helper} (void)
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1LrWpanSpectrumValueHelper_af0ae8f605c101953da6475676047ae32}{Create\+Tx\+Power\+Spectral\+Density} (double tx\+Power, uint32\+\_\+t channel)
\begin{DoxyCompactList}\small\item\em create spectrum value \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ \hyperlink{classns3_1_1LrWpanSpectrumValueHelper_a7cb76ff84cd11ab86100af9aa3c5e2a5}{Create\+Noise\+Power\+Spectral\+Density} (uint32\+\_\+t channel)
\begin{DoxyCompactList}\small\item\em create spectrum value for noise \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static double \hyperlink{classns3_1_1LrWpanSpectrumValueHelper_ab8f05acfb68822f7b94fc637311fbda6}{Total\+Avg\+Power} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ const \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} $>$ psd, uint32\+\_\+t channel)
\begin{DoxyCompactList}\small\item\em total average power of the signal is the integral of the P\+SD using the limits of the given channel \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classns3_1_1LrWpanSpectrumValueHelper_aa5ff3ee6c408d74dea64ee98743a5fac}{m\+\_\+noise\+Factor}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class defines all functions to create spectrum model for Lr\+Wpan. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}!Lr\+Wpan\+Spectrum\+Value\+Helper@{Lr\+Wpan\+Spectrum\+Value\+Helper}}
\index{Lr\+Wpan\+Spectrum\+Value\+Helper@{Lr\+Wpan\+Spectrum\+Value\+Helper}!ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Lr\+Wpan\+Spectrum\+Value\+Helper(void)}{LrWpanSpectrumValueHelper(void)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1LrWpanSpectrumValueHelper_a1aceee02f0f8edf6091f3e44e21179f3}{}\label{classns3_1_1LrWpanSpectrumValueHelper_a1aceee02f0f8edf6091f3e44e21179f3}

\begin{DoxyCode}
60 \{
61   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
62   \hyperlink{classns3_1_1LrWpanSpectrumValueHelper_aa5ff3ee6c408d74dea64ee98743a5fac}{m\_noiseFactor} = 1.0;
63 \}
\end{DoxyCode}
\index{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}!````~Lr\+Wpan\+Spectrum\+Value\+Helper@{$\sim$\+Lr\+Wpan\+Spectrum\+Value\+Helper}}
\index{````~Lr\+Wpan\+Spectrum\+Value\+Helper@{$\sim$\+Lr\+Wpan\+Spectrum\+Value\+Helper}!ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{$\sim$\+Lr\+Wpan\+Spectrum\+Value\+Helper(void)}{~LrWpanSpectrumValueHelper(void)}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper\+::$\sim$\+Lr\+Wpan\+Spectrum\+Value\+Helper (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1LrWpanSpectrumValueHelper_ac3b8b9c31f5ba27a1e01906a64bbfa6d}{}\label{classns3_1_1LrWpanSpectrumValueHelper_ac3b8b9c31f5ba27a1e01906a64bbfa6d}

\begin{DoxyCode}
66 \{
67   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
68 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}!Create\+Noise\+Power\+Spectral\+Density@{Create\+Noise\+Power\+Spectral\+Density}}
\index{Create\+Noise\+Power\+Spectral\+Density@{Create\+Noise\+Power\+Spectral\+Density}!ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Noise\+Power\+Spectral\+Density(uint32\+\_\+t channel)}{CreateNoisePowerSpectralDensity(uint32_t channel)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper\+::\+Create\+Noise\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1LrWpanSpectrumValueHelper_a7cb76ff84cd11ab86100af9aa3c5e2a5}{}\label{classns3_1_1LrWpanSpectrumValueHelper_a7cb76ff84cd11ab86100af9aa3c5e2a5}


create spectrum value for noise 


\begin{DoxyParams}{Parameters}
{\em channel} & the channel number per I\+E\+E\+E802.\+15.\+4 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a \hyperlink{classns3_1_1Ptr}{Ptr} to a newly created \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} instance 
\end{DoxyReturn}

\begin{DoxyCode}
105 \{
106   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
107   Ptr<SpectrumValue> noisePsd = Create <SpectrumValue> (\hyperlink{namespacens3_a42737ccd2a2a0c75325fbf6abfffda10}{g\_LrWpanSpectrumModel});
108 
109   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{double} BOLTZMANN = 1.3803e-23;
110   \textcolor{comment}{// Nt  is the power of thermal noise in W}
111   \textcolor{keywordtype}{double} Nt = BOLTZMANN * 290.0;
112   \textcolor{comment}{// noise Floor (W) which accounts for thermal noise and non-idealities of the receiver}
113   \textcolor{keywordtype}{double} noisePowerDensity = \hyperlink{classns3_1_1LrWpanSpectrumValueHelper_aa5ff3ee6c408d74dea64ee98743a5fac}{m\_noiseFactor} * Nt;
114 
115   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} ((channel >= 11 && channel <= 26), \textcolor{stringliteral}{"Invalid channel numbers"});
116 
117   (*noisePsd)[2405 + 5 * (channel - 11) - 2400 - 2] = noisePowerDensity;
118   (*noisePsd)[2405 + 5 * (channel - 11) - 2400 - 1] = noisePowerDensity;
119   (*noisePsd)[2405 + 5 * (channel - 11) - 2400] = noisePowerDensity;
120   (*noisePsd)[2405 + 5 * (channel - 11) - 2400 + 1] = noisePowerDensity;
121   (*noisePsd)[2405 + 5 * (channel - 11) - 2400 + 2] = noisePowerDensity;
122 
123   \textcolor{keywordflow}{return} noisePsd;
124 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 1


\index{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}!Create\+Tx\+Power\+Spectral\+Density@{Create\+Tx\+Power\+Spectral\+Density}}
\index{Create\+Tx\+Power\+Spectral\+Density@{Create\+Tx\+Power\+Spectral\+Density}!ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Create\+Tx\+Power\+Spectral\+Density(double tx\+Power, uint32\+\_\+t channel)}{CreateTxPowerSpectralDensity(double txPower, uint32_t channel)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<$ {\bf Spectrum\+Value} $>$ ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper\+::\+Create\+Tx\+Power\+Spectral\+Density (
\begin{DoxyParamCaption}
\item[{double}]{tx\+Power, }
\item[{uint32\+\_\+t}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1LrWpanSpectrumValueHelper_af0ae8f605c101953da6475676047ae32}{}\label{classns3_1_1LrWpanSpectrumValueHelper_af0ae8f605c101953da6475676047ae32}


create spectrum value 


\begin{DoxyParams}{Parameters}
{\em tx\+Power} & the power transmission in d\+Bm \\
\hline
{\em channel} & the channel number per I\+E\+E\+E802.\+15.\+4 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a \hyperlink{classns3_1_1Ptr}{Ptr} to a newly created \hyperlink{classns3_1_1SpectrumValue}{Spectrum\+Value} instance 
\end{DoxyReturn}

\begin{DoxyCode}
72 \{
73   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this});
74   Ptr<SpectrumValue> \hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd} = Create <SpectrumValue> (\hyperlink{namespacens3_a42737ccd2a2a0c75325fbf6abfffda10}{g\_LrWpanSpectrumModel});
75 
76   \textcolor{comment}{// txPower is expressed in dBm. We must convert it into natural unit (W).}
77   txPower = pow (10., (txPower - 30) / 10);
78 
79   \textcolor{comment}{// The effective occupied bandwidth of the signal is modelled to be 2 MHz.}
80   \textcolor{comment}{// 99.5% of power is within +/- 1MHz of center frequency, and 0.5% is outside.}
81   \textcolor{comment}{// There are 5 bands containing signal power.  The middle (center) band}
82   \textcolor{comment}{// contains half of the power.  The two inner side bands contain 49.5%.}
83   \textcolor{comment}{// The two outer side bands contain roughly 0.5%.}
84   \textcolor{keywordtype}{double} txPowerDensity = txPower / 2.0e6;
85 
86   \hyperlink{assert_8h_aff5ece9066c74e681e74999856f08539}{NS\_ASSERT\_MSG} ((channel >= 11 && channel <= 26), \textcolor{stringliteral}{"Invalid channel numbers"});
87 
88   \textcolor{comment}{// The channel assignment is in section 6.1.2.1}
89   \textcolor{comment}{// Channel 11 centered at 2.405 GHz, 12 at 2.410 GHz, ... 26 at 2.480 GHz}
90   (*txPsd)[2405 + 5 * (channel - 11) - 2400 - 2] = txPowerDensity * 0.005;
91   (*txPsd)[2405 + 5 * (channel - 11) - 2400 - 1] = txPowerDensity * 0.495;
92   (*txPsd)[2405 + 5 * (channel - 11) - 2400] = txPowerDensity; \textcolor{comment}{// center}
93   (*txPsd)[2405 + 5 * (channel - 11) - 2400 + 1 ] = txPowerDensity * 0.495;
94   (*txPsd)[2405 + 5 * (channel - 11) - 2400 + 2 ] = txPowerDensity * 0.005;
95 
96   \textcolor{comment}{// If more power is allocated to more subbands in future revisions of}
97   \textcolor{comment}{// this model, make sure to renormalize so that the integral of the}
98   \textcolor{comment}{// txPsd still equals txPower}
99 
100   \textcolor{keywordflow}{return} \hyperlink{lte__link__budget_8m_a684fe3101a5e48a5fcc57cab8dbcd1aa}{txPsd};
101 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 2


\index{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}!Total\+Avg\+Power@{Total\+Avg\+Power}}
\index{Total\+Avg\+Power@{Total\+Avg\+Power}!ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{Total\+Avg\+Power(\+Ptr$<$ const Spectrum\+Value $>$ psd, uint32\+\_\+t channel)}{TotalAvgPower(Ptr< const SpectrumValue > psd, uint32_t channel)}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper\+::\+Total\+Avg\+Power (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ const {\bf Spectrum\+Value} $>$}]{psd, }
\item[{uint32\+\_\+t}]{channel}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1LrWpanSpectrumValueHelper_ab8f05acfb68822f7b94fc637311fbda6}{}\label{classns3_1_1LrWpanSpectrumValueHelper_ab8f05acfb68822f7b94fc637311fbda6}


total average power of the signal is the integral of the P\+SD using the limits of the given channel 


\begin{DoxyParams}{Parameters}
{\em psd} & spectral density \\
\hline
{\em channel} & the channel number per I\+E\+E\+E802.\+15.\+4 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
total power (using composite trap. rule to numerally integrate) 
\end{DoxyReturn}

\begin{DoxyCode}
128 \{
129   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (psd);
130   \textcolor{keywordtype}{double} totalAvgPower = 0.0;
131 
132   \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (psd->GetSpectrumModel () == \hyperlink{namespacens3_a42737ccd2a2a0c75325fbf6abfffda10}{g\_LrWpanSpectrumModel});
133 
134   \textcolor{comment}{// numerically integrate to get area under psd using 1 MHz resolution}
135 
136   totalAvgPower += (*psd)[2405 + 5 * (channel - 11) - 2400 - 2];
137   totalAvgPower += (*psd)[2405 + 5 * (channel - 11) - 2400 - 1];
138   totalAvgPower += (*psd)[2405 + 5 * (channel - 11) - 2400];
139   totalAvgPower += (*psd)[2405 + 5 * (channel - 11) - 2400 + 1];
140   totalAvgPower += (*psd)[2405 + 5 * (channel - 11) - 2400 + 2];
141   totalAvgPower *= 1.0e6;
142 
143   \textcolor{keywordflow}{return} totalAvgPower;
144 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 3




\subsection{Member Data Documentation}
\index{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}!m\+\_\+noise\+Factor@{m\+\_\+noise\+Factor}}
\index{m\+\_\+noise\+Factor@{m\+\_\+noise\+Factor}!ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper@{ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper}}
\subsubsection[{\texorpdfstring{m\+\_\+noise\+Factor}{m_noiseFactor}}]{\setlength{\rightskip}{0pt plus 5cm}double ns3\+::\+Lr\+Wpan\+Spectrum\+Value\+Helper\+::m\+\_\+noise\+Factor\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1LrWpanSpectrumValueHelper_aa5ff3ee6c408d74dea64ee98743a5fac}{}\label{classns3_1_1LrWpanSpectrumValueHelper_aa5ff3ee6c408d74dea64ee98743a5fac}
A scaling factor for the noise power. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lr-\/wpan/model/\hyperlink{lr-wpan-spectrum-value-helper_8h}{lr-\/wpan-\/spectrum-\/value-\/helper.\+h}\item 
lr-\/wpan/model/\hyperlink{lr-wpan-spectrum-value-helper_8cc}{lr-\/wpan-\/spectrum-\/value-\/helper.\+cc}\end{DoxyCompactItemize}
