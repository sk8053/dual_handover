\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep}{}\section{ns3\+:\+:dsr\+:\+:Dsr\+Option\+Rrep Class Reference}
\label{classns3_1_1dsr_1_1DsrOptionRrep}\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}


Dsr Option Route Reply.  




{\ttfamily \#include $<$dsr-\/options.\+h$>$}



Inheritance diagram for ns3\+:\+:dsr\+:\+:Dsr\+Option\+Rrep\+:
% FIG 0


Collaboration diagram for ns3\+:\+:dsr\+:\+:Dsr\+Option\+Rrep\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_a530843a582a10b60c894c5da10f6fdef}{Get\+Instance\+Type\+Id} () const 
\begin{DoxyCompactList}\small\item\em Get the instance type ID. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_a6db903f7b41a1c66f756950b53b558e0}{Dsr\+Option\+Rrep} ()
\item 
virtual \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_ada9b256541b3cd4d352bbe3ebc10f909}{$\sim$\+Dsr\+Option\+Rrep} ()
\item 
virtual uint8\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_ad96484656808d0a622d34aa23c1f2330}{Get\+Option\+Number} () const 
\begin{DoxyCompactList}\small\item\em Get the option number. \end{DoxyCompactList}\item 
virtual uint8\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_a79ff29fe60c7c62ac99ca0da8c0a820f}{Process} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ packet, \hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Packet}{Packet} $>$ dsrP, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} ipv4\+Address, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} source, \hyperlink{classns3_1_1Ipv4Header}{Ipv4\+Header} const \&ipv4\+Header, uint8\+\_\+t protocol, bool \&is\+Promisc, \hyperlink{classns3_1_1Ipv4Address}{Ipv4\+Address} promisc\+Source)
\begin{DoxyCompactList}\small\item\em Process method. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classns3_1_1TypeId}{Type\+Id} \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_ab9cae666e1efd949ce46cea71c177e04}{Get\+Type\+Id} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const uint8\+\_\+t \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_ab7202d71702f2935c407f57f95ccafcd}{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER} = 2
\begin{DoxyCompactList}\small\item\em Router alert option number. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1dsr_1_1DsrRouteCache}{dsr\+::\+Dsr\+Route\+Cache} $>$ \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_ae289cef15b97d8b41f3cc8b9a5de4124}{m\+\_\+route\+Cache}
\begin{DoxyCompactList}\small\item\em The route cache. \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Ipv4}{Ipv4} $>$ \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_a7cfa7876592c810a25f091478b65a2c4}{m\+\_\+ipv4}
\begin{DoxyCompactList}\small\item\em The ip layer 3. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Dsr Option Route Reply. 

\subsection{Constructor \& Destructor Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!Dsr\+Option\+Rrep@{Dsr\+Option\+Rrep}}
\index{Dsr\+Option\+Rrep@{Dsr\+Option\+Rrep}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{Dsr\+Option\+Rrep()}{DsrOptionRrep()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::\+Dsr\+Option\+Rrep (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_a6db903f7b41a1c66f756950b53b558e0}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_a6db903f7b41a1c66f756950b53b558e0}

\begin{DoxyCode}
977 \{
978   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
979 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!````~Dsr\+Option\+Rrep@{$\sim$\+Dsr\+Option\+Rrep}}
\index{````~Dsr\+Option\+Rrep@{$\sim$\+Dsr\+Option\+Rrep}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{$\sim$\+Dsr\+Option\+Rrep()}{~DsrOptionRrep()}}]{\setlength{\rightskip}{0pt plus 5cm}ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::$\sim$\+Dsr\+Option\+Rrep (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_ada9b256541b3cd4d352bbe3ebc10f909}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_ada9b256541b3cd4d352bbe3ebc10f909}

\begin{DoxyCode}
982 \{
983   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
984 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!Get\+Instance\+Type\+Id@{Get\+Instance\+Type\+Id}}
\index{Get\+Instance\+Type\+Id@{Get\+Instance\+Type\+Id}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{Get\+Instance\+Type\+Id() const }{GetInstanceTypeId() const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::\+Get\+Instance\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_a530843a582a10b60c894c5da10f6fdef}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_a530843a582a10b60c894c5da10f6fdef}


Get the instance type ID. 

\begin{DoxyReturn}{Returns}
instance type ID 
\end{DoxyReturn}


Reimplemented from \hyperlink{classns3_1_1Object_a51e5994fa4b6eae32d719ad69f8fcbf5}{ns3\+::\+Object}.


\begin{DoxyCode}
987 \{
988   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_ab9cae666e1efd949ce46cea71c177e04}{GetTypeId} ();
989 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!Get\+Option\+Number@{Get\+Option\+Number}}
\index{Get\+Option\+Number@{Get\+Option\+Number}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{Get\+Option\+Number() const }{GetOptionNumber() const }}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::\+Get\+Option\+Number (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_ad96484656808d0a622d34aa23c1f2330}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_ad96484656808d0a622d34aa23c1f2330}


Get the option number. 

\begin{DoxyReturn}{Returns}
option number 
\end{DoxyReturn}


Implements \hyperlink{classns3_1_1dsr_1_1DsrOptions_a31407523e51950f30c95c89602580fc9}{ns3\+::dsr\+::\+Dsr\+Options}.


\begin{DoxyCode}
992 \{
993   \hyperlink{log-macros-disabled_8h_a8f7e4afc291c9d29a65c18ac1f79197b}{NS\_LOG\_FUNCTION\_NOARGS} ();
994 
995   \textcolor{keywordflow}{return} \hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_ab7202d71702f2935c407f57f95ccafcd}{OPT\_NUMBER};
996 \}
\end{DoxyCode}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!Get\+Type\+Id@{Get\+Type\+Id}}
\index{Get\+Type\+Id@{Get\+Type\+Id}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{Get\+Type\+Id()}{GetTypeId()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Id} ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::\+Get\+Type\+Id (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_ab9cae666e1efd949ce46cea71c177e04}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_ab9cae666e1efd949ce46cea71c177e04}

\begin{DoxyCode}
967 \{
968   \textcolor{keyword}{static} TypeId tid = TypeId (\textcolor{stringliteral}{"ns3::dsr::DsrOptionRrep"})
969     .SetParent<\hyperlink{classns3_1_1dsr_1_1DsrOptions_a26f9dda6f030963939c59ef1ab2a74c0}{DsrOptions}> ()
970     .SetGroupName (\textcolor{stringliteral}{"Dsr"})
971     .AddConstructor<\hyperlink{classns3_1_1dsr_1_1DsrOptionRrep_a6db903f7b41a1c66f756950b53b558e0}{DsrOptionRrep}> ()
972   ;
973   \textcolor{keywordflow}{return} tid;
974 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!Process@{Process}}
\index{Process@{Process}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{Process(\+Ptr$<$ Packet $>$ packet, Ptr$<$ Packet $>$ dsr\+P, Ipv4\+Address ipv4\+Address, Ipv4\+Address source, Ipv4\+Header const \&ipv4\+Header, uint8\+\_\+t protocol, bool \&is\+Promisc, Ipv4\+Address promisc\+Source)}{Process(Ptr< Packet > packet, Ptr< Packet > dsrP, Ipv4Address ipv4Address, Ipv4Address source, Ipv4Header const &ipv4Header, uint8_t protocol, bool &isPromisc, Ipv4Address promiscSource)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::\+Process (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{packet, }
\item[{{\bf Ptr}$<$ {\bf Packet} $>$}]{dsrP, }
\item[{{\bf Ipv4\+Address}}]{ipv4\+Address, }
\item[{{\bf Ipv4\+Address}}]{source, }
\item[{{\bf Ipv4\+Header} const \&}]{ipv4\+Header, }
\item[{uint8\+\_\+t}]{protocol, }
\item[{bool \&}]{is\+Promisc, }
\item[{{\bf Ipv4\+Address}}]{promisc\+Source}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_a79ff29fe60c7c62ac99ca0da8c0a820f}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_a79ff29fe60c7c62ac99ca0da8c0a820f}


Process method. 

Called from \hyperlink{classns3_1_1dsr_1_1DsrRouting_a4908cdae502d8bdca8a244d4420311e6}{Dsr\+Routing\+::\+Receive}. 
\begin{DoxyParams}{Parameters}
{\em packet} & the packet \\
\hline
{\em dsrP} & the clean packet with payload \\
\hline
{\em ipv4\+Address} & the I\+Pv4 address \\
\hline
{\em source} & I\+Pv4 address of the source \\
\hline
{\em ipv4\+Header} & the I\+Pv4 header of packet received \\
\hline
{\em protocol} & the protocol number of the up layer \\
\hline
{\em is\+Promisc} & if the packet must be dropped \\
\hline
{\em promisc\+Source} & I\+Pv4 address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the processed size 
\end{DoxyReturn}
Get the destination address, which is the last element in the node\+List

Get the destination address for the data packet, which is the last element in the node\+List

Add the newly found route to the route cache The route looks like\+: \textbackslash{} \char`\"{}src\+Address\char`\"{} + \char`\"{}intermediate node address\char`\"{} + \char`\"{}target\+Address\char`\"{}

Found a route the dst, construct the source route option header

Schedule the packet retry

Implements \hyperlink{classns3_1_1dsr_1_1DsrOptions_ac34fb87a95464f3ea9d82ad12253a5cc}{ns3\+::dsr\+::\+Dsr\+Options}.


\begin{DoxyCode}
999 \{
1000   \hyperlink{log-macros-disabled_8h_a90b90d5bad1f39cb1b64923ea94c0761}{NS\_LOG\_FUNCTION} (\textcolor{keyword}{this} << packet << dsrP << ipv4Address << source << ipv4Header << (
      uint32\_t)protocol << isPromisc);
1001 
1002   Ptr<Packet> \hyperlink{lte__link__budget_8m_ac9de518908a968428863f829398a4e62}{p} = packet->\hyperlink{classns3_1_1Packet_a5d5c70802a5f77fc5f0001e0cfc1898b}{Copy} ();
1003 
1004   \textcolor{comment}{// Get the number of routers' address field}
1005   uint8\_t buf[2];
1006   p->\hyperlink{classns3_1_1Packet_a5a6d304b9e0d90733919ffe224b98f0d}{CopyData} (buf, \textcolor{keyword}{sizeof}(buf));
1007   uint8\_t numberAddress = (buf[1] - 2) / 4;
1008 
1009   DsrOptionRrepHeader rrep;
1010   rrep.SetNumberAddress (numberAddress);  \textcolor{comment}{// Set the number of ip address in the header to reserver space
       for deserialize header}
1011   p->RemoveHeader (rrep);
1012 
1013   Ptr<Node> node = \hyperlink{classns3_1_1dsr_1_1DsrOptions_a1a91f820f3d754a477a54bad547ca659}{GetNodeWithAddress} (ipv4Address);
1014   Ptr<dsr::DsrRouting> dsr = node->GetObject<dsr::DsrRouting> ();
1015 
1016   \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The next header value "} << (uint32\_t)protocol);
1017 
1018   std::vector<Ipv4Address> nodeList = rrep.GetNodesAddress ();
1022   Ipv4Address targetAddress = nodeList.front ();
1023   \textcolor{comment}{// If the RREP option has reached to the destination}
1024   \textcolor{keywordflow}{if} (targetAddress == ipv4Address)
1025     \{
1026       \hyperlink{classns3_1_1dsr_1_1DsrOptions_a7b822a7c827006feddd82cc9baab03bd}{RemoveDuplicates} (nodeList); \textcolor{comment}{// This is for the route reply from intermediate node
       since we didn't remove}
1027                                    \textcolor{comment}{// duplicate there}
1028       \textcolor{keywordflow}{if} (nodeList.size () == 0)
1029         \{
1030           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route we have contains 0 entries"});
1031           \textcolor{keywordflow}{return} 0;
1032         \}
1036       Ipv4Address dst = nodeList.back ();
1042       DsrRouteCacheEntry toDestination (\textcolor{comment}{/*IP\_VECTOR=*/} nodeList, \textcolor{comment}{/*dst=*/} dst, \textcolor{comment}{/*expire time=*/} 
      \hyperlink{classns3_1_1dsr_1_1DsrOptions_a2d111e83b3c91f18ea49478a35ebb119}{ActiveRouteTimeout});
1043       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (nodeList.front () == ipv4Address);
1044       \textcolor{keywordtype}{bool} addRoute = \textcolor{keyword}{false};
1045       \textcolor{keywordflow}{if} (dsr->IsLinkCache ())
1046         \{
1047           addRoute = dsr->AddRoute\_Link (nodeList, ipv4Address);
1048         \}
1049       \textcolor{keywordflow}{else}
1050         \{
1051           addRoute = dsr->AddRoute (toDestination);
1052         \}
1053 
1054       \textcolor{keywordflow}{if} (addRoute)
1055         \{
1056           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"We have added the route and search send buffer for packet with
       destination "} << dst);
1060           DsrOptionSRHeader sourceRoute;
1061           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route length "} << nodeList.size ());
1062           sourceRoute.SetNodesAddress (nodeList);
1063           sourceRoute.SetSegmentsLeft ((nodeList.size () - 2));
1064           sourceRoute.SetSalvage (0);
1065           Ipv4Address nextHop = \hyperlink{classns3_1_1dsr_1_1DsrOptions_a061c66ba810a71ae227371a45cc30cc0}{SearchNextHop} (ipv4Address, nodeList); \textcolor{comment}{// Get the next hop
       address}
1066           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The nextHop address "} << nextHop);
1067           \textcolor{keywordflow}{if} (nextHop == \textcolor{stringliteral}{"0.0.0.0"})
1068             \{
1069               dsr->PacketNewRoute (dsrP, ipv4Address, dst, protocol);
1070               \textcolor{keywordflow}{return} 0;
1071             \}
1072           \hyperlink{classns3_1_1dsr_1_1DsrOptions_a44ae8e58769880ec9c0150bb28652350}{PrintVector} (nodeList);
1073           \hyperlink{classns3_1_1dsr_1_1DsrOptions_af749b76db4626ae64bc37001a5353b99}{SetRoute} (nextHop, ipv4Address);
1074           \textcolor{comment}{// Cancel the route request timer for destination}
1075           dsr->CancelRreqTimer (dst, \textcolor{keyword}{true});
1079           dsr->SendPacketFromBuffer (sourceRoute, nextHop, protocol);
1080         \}
1081       \textcolor{keywordflow}{else}
1082         \{
1083           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"Failed to add the route"});
1084           \textcolor{keywordflow}{return} 0;
1085         \}
1086     \}
1087   \textcolor{keywordflow}{else}
1088     \{
1089       uint8\_t length = rrep.GetLength () - 2; \textcolor{comment}{// The get length - 2 is to get aligned for the malformed
       header check}
1090       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The length of rrep option "} << (uint32\_t)length);
1091 
1092       \textcolor{keywordflow}{if} (length % 2 != 0)
1093         \{
1094           \hyperlink{group__logging_ga88acd260151caf2db9c0fc84997f45ce}{NS\_LOG\_LOGIC} (\textcolor{stringliteral}{"Malformed header. Drop!"});
1095           \hyperlink{classns3_1_1dsr_1_1DsrOptions_a176bbc9efb58b6d750c14b9b03c525c4}{m\_dropTrace} (packet);
1096           \textcolor{keywordflow}{return} 0;
1097         \}
1098       \hyperlink{classns3_1_1dsr_1_1DsrOptions_a44ae8e58769880ec9c0150bb28652350}{PrintVector} (nodeList);
1099       \textcolor{comment}{/*}
1100 \textcolor{comment}{       * This node is only an intermediate node, but it needs to save the possible route to the destination
       when cutting the route}
1101 \textcolor{comment}{       */}
1102       std::vector<Ipv4Address> routeCopy = nodeList;
1103       std::vector<Ipv4Address> cutRoute = \hyperlink{classns3_1_1dsr_1_1DsrOptions_a8bea995195bd88aab4610af594f099d0}{CutRoute} (ipv4Address, nodeList);
1104       \hyperlink{classns3_1_1dsr_1_1DsrOptions_a44ae8e58769880ec9c0150bb28652350}{PrintVector} (cutRoute);
1105       \textcolor{keywordflow}{if} (cutRoute.size () >= 2)
1106         \{
1107           Ipv4Address dst = cutRoute.back ();
1108           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route destination after cut "} << dst);
1109           DsrRouteCacheEntry toDestination (\textcolor{comment}{/*IP\_VECTOR=*/} cutRoute, \textcolor{comment}{/*dst=*/} dst, \textcolor{comment}{/*expire time=*/} 
      \hyperlink{classns3_1_1dsr_1_1DsrOptions_a2d111e83b3c91f18ea49478a35ebb119}{ActiveRouteTimeout});
1110           \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (cutRoute.front () == ipv4Address);
1111           \textcolor{keywordtype}{bool} addRoute = \textcolor{keyword}{false};
1112           \textcolor{keywordflow}{if} (dsr->IsLinkCache ())
1113             \{
1114               addRoute = dsr->AddRoute\_Link (nodeList, ipv4Address);
1115             \}
1116           \textcolor{keywordflow}{else}
1117             \{
1118               addRoute = dsr->AddRoute (toDestination);
1119             \}
1120           \textcolor{keywordflow}{if} (addRoute)
1121             \{
1122               dsr->CancelRreqTimer (dst, \textcolor{keyword}{true});
1123             \}
1124           \textcolor{keywordflow}{else}
1125             \{
1126               \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route not added"});
1127             \}
1128         \}
1129       \textcolor{keywordflow}{else}
1130         \{
1131           \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The route is corrupted"});
1132         \}
1133       \textcolor{comment}{/*}
1134 \textcolor{comment}{       * Reverse search the vector for next hop address}
1135 \textcolor{comment}{       */}
1136       Ipv4Address nextHop = \hyperlink{classns3_1_1dsr_1_1DsrOptions_a9cc1c0bdf1b57f8b2eea4d9070b26a58}{ReverseSearchNextHop} (ipv4Address, routeCopy);
1137       \hyperlink{assert_8h_a6dccdb0de9b252f60088ce281c49d052}{NS\_ASSERT} (routeCopy.back () == source);
1138       \hyperlink{classns3_1_1dsr_1_1DsrOptions_a44ae8e58769880ec9c0150bb28652350}{PrintVector} (routeCopy);
1139       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The nextHop address "} << nextHop << \textcolor{stringliteral}{" and the source in the route reply "} 
      << source);
1140       \textcolor{comment}{/*}
1141 \textcolor{comment}{       * Set the route entry we will use to send reply}
1142 \textcolor{comment}{       */}
1143       \hyperlink{classns3_1_1dsr_1_1DsrOptions_af749b76db4626ae64bc37001a5353b99}{SetRoute} (nextHop, ipv4Address);
1144       \textcolor{comment}{/*}
1145 \textcolor{comment}{       * This part add dsr routing header to the packet and send reply}
1146 \textcolor{comment}{       */}
1147       DsrRoutingHeader dsrRoutingHeader;
1148       dsrRoutingHeader.SetNextHeader (protocol);
1149 
1150       length = rrep.GetLength ();    \textcolor{comment}{// Get the length of the rrep header excluding the type header}
1151       \hyperlink{group__logging_ga413f1886406d49f59a6a0a89b77b4d0a}{NS\_LOG\_DEBUG} (\textcolor{stringliteral}{"The reply header length "} << (uint32\_t)length);
1152       dsrRoutingHeader.SetPayloadLength (length + 2);
1153       dsrRoutingHeader.SetMessageType (1);
1154       dsrRoutingHeader.SetSourceId (\hyperlink{classns3_1_1dsr_1_1DsrOptions_a7e53a9a0421c607e17866e7dd0dd5440}{GetIDfromIP} (source));
1155       dsrRoutingHeader.SetDestId (\hyperlink{classns3_1_1dsr_1_1DsrOptions_a7e53a9a0421c607e17866e7dd0dd5440}{GetIDfromIP} (targetAddress));
1156       dsrRoutingHeader.AddDsrOption (rrep);
1157       Ptr<Packet> newPacket = Create<Packet> ();
1158       newPacket->AddHeader (dsrRoutingHeader);
1159       dsr->SendReply (newPacket, ipv4Address, nextHop, \hyperlink{classns3_1_1dsr_1_1DsrOptions_ae4785209eae1d101cb8bd2d3b392d2ad}{m\_ipv4Route});
1160       isPromisc = \textcolor{keyword}{false};
1161     \}
1162   \textcolor{keywordflow}{return} rrep.GetSerializedSize ();
1163 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




\subsection{Member Data Documentation}
\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!m\+\_\+ipv4@{m\+\_\+ipv4}}
\index{m\+\_\+ipv4@{m\+\_\+ipv4}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{m\+\_\+ipv4}{m_ipv4}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Ipv4}$>$ ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::m\+\_\+ipv4\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_a7cfa7876592c810a25f091478b65a2c4}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_a7cfa7876592c810a25f091478b65a2c4}


The ip layer 3. 

\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!m\+\_\+route\+Cache@{m\+\_\+route\+Cache}}
\index{m\+\_\+route\+Cache@{m\+\_\+route\+Cache}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{m\+\_\+route\+Cache}{m_routeCache}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf dsr\+::\+Dsr\+Route\+Cache}$>$ ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::m\+\_\+route\+Cache\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_ae289cef15b97d8b41f3cc8b9a5de4124}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_ae289cef15b97d8b41f3cc8b9a5de4124}


The route cache. 

\index{ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}!O\+P\+T\+\_\+\+N\+U\+M\+B\+ER@{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER}}
\index{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER@{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER}!ns3\+::dsr\+::\+Dsr\+Option\+Rrep@{ns3\+::dsr\+::\+Dsr\+Option\+Rrep}}
\subsubsection[{\texorpdfstring{O\+P\+T\+\_\+\+N\+U\+M\+B\+ER}{OPT_NUMBER}}]{\setlength{\rightskip}{0pt plus 5cm}const uint8\+\_\+t ns3\+::dsr\+::\+Dsr\+Option\+Rrep\+::\+O\+P\+T\+\_\+\+N\+U\+M\+B\+ER = 2\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classns3_1_1dsr_1_1DsrOptionRrep_ab7202d71702f2935c407f57f95ccafcd}{}\label{classns3_1_1dsr_1_1DsrOptionRrep_ab7202d71702f2935c407f57f95ccafcd}


Router alert option number. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
dsr/model/\hyperlink{dsr-options_8h}{dsr-\/options.\+h}\item 
dsr/model/\hyperlink{dsr-options_8cc}{dsr-\/options.\+cc}\end{DoxyCompactItemize}
