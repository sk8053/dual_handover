\hypertarget{classAcousticModemEnergyDepletionTestCase}{}\section{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case Class Reference}
\label{classAcousticModemEnergyDepletionTestCase}\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}


Acoustic Modem Energy Depletion Test Case.  




Inheritance diagram for Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+:
% FIG 0


Collaboration diagram for Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+:
% FIG 1
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classAcousticModemEnergyDepletionTestCase_a53634e19f40b436de75acc34bc34b4d4}{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case} ()
\item 
\hyperlink{classAcousticModemEnergyDepletionTestCase_ac72a0d569f99d6ab9e50daf1da0ee516}{$\sim$\+Acoustic\+Modem\+Energy\+Depletion\+Test\+Case} ()
\item 
void \hyperlink{classAcousticModemEnergyDepletionTestCase_a821bfbad5268c94f381b46b3da55c166}{Depletion\+Handler} (void)
\begin{DoxyCompactList}\small\item\em Depletion handler function. \end{DoxyCompactList}\item 
void \hyperlink{classAcousticModemEnergyDepletionTestCase_a3516e25b430f496c6a3ba2366e08691a}{Send\+One\+Packet} (\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ node)
\item 
void \hyperlink{classAcousticModemEnergyDepletionTestCase_a36ddefb587ebfbbcbfe60d0bdbc4de91}{Do\+Run} (void)
\begin{DoxyCompactList}\small\item\em Implementation to actually run this Test\+Case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classAcousticModemEnergyDepletionTestCase_ae081c5442fcc0406d5d002c20540e0a5}{m\+\_\+sim\+Time}
\begin{DoxyCompactList}\small\item\em Simulation time. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classAcousticModemEnergyDepletionTestCase_aab78b851effc5b78aabd4f82cf0007e2}{m\+\_\+callback\+Count}
\begin{DoxyCompactList}\small\item\em callback count \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{classAcousticModemEnergyDepletionTestCase_a27cef9a0ab916df25d00c58793619087}{m\+\_\+packet\+Size}
\begin{DoxyCompactList}\small\item\em packet size \end{DoxyCompactList}\item 
\hyperlink{classns3_1_1Ptr}{Ptr}$<$ \hyperlink{classns3_1_1Node}{Node} $>$ \hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\+\_\+node}
\begin{DoxyCompactList}\small\item\em the node \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Acoustic Modem Energy Depletion Test Case. 

\subsection{Constructor \& Destructor Documentation}
\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case()}{AcousticModemEnergyDepletionTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::\+Acoustic\+Modem\+Energy\+Depletion\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classAcousticModemEnergyDepletionTestCase_a53634e19f40b436de75acc34bc34b4d4}{}\label{classAcousticModemEnergyDepletionTestCase_a53634e19f40b436de75acc34bc34b4d4}

\begin{DoxyCode}
245   : \hyperlink{classns3_1_1TestCase_a3b0b91a96aac1933e8d146e019b9e207}{TestCase} (\textcolor{stringliteral}{"Acoustic Modem energy depletion test case"}),
246     \hyperlink{classAcousticModemEnergyDepletionTestCase_ae081c5442fcc0406d5d002c20540e0a5}{m\_simTime} (25),
247     \hyperlink{classAcousticModemEnergyDepletionTestCase_aab78b851effc5b78aabd4f82cf0007e2}{m\_callbackCount} (0),
248     \hyperlink{classAcousticModemEnergyDepletionTestCase_a27cef9a0ab916df25d00c58793619087}{m\_packetSize} (17)
249 \{
250 \}
\end{DoxyCode}
\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!````~Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{$\sim$\+Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\index{````~Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{$\sim$\+Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{$\sim$\+Acoustic\+Modem\+Energy\+Depletion\+Test\+Case()}{~AcousticModemEnergyDepletionTestCase()}}]{\setlength{\rightskip}{0pt plus 5cm}Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::$\sim$\+Acoustic\+Modem\+Energy\+Depletion\+Test\+Case (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classAcousticModemEnergyDepletionTestCase_ac72a0d569f99d6ab9e50daf1da0ee516}{}\label{classAcousticModemEnergyDepletionTestCase_ac72a0d569f99d6ab9e50daf1da0ee516}

\begin{DoxyCode}
253 \{
254   \hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\_node} = 0;
255 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!Depletion\+Handler@{Depletion\+Handler}}
\index{Depletion\+Handler@{Depletion\+Handler}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{Depletion\+Handler(void)}{DepletionHandler(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::\+Depletion\+Handler (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classAcousticModemEnergyDepletionTestCase_a821bfbad5268c94f381b46b3da55c166}{}\label{classAcousticModemEnergyDepletionTestCase_a821bfbad5268c94f381b46b3da55c166}


Depletion handler function. 


\begin{DoxyCode}
259 \{
260   \textcolor{comment}{// increase callback count}
261   \hyperlink{classAcousticModemEnergyDepletionTestCase_aab78b851effc5b78aabd4f82cf0007e2}{m\_callbackCount}++;
262 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
% FIG 2


\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!Do\+Run@{Do\+Run}}
\index{Do\+Run@{Do\+Run}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{Do\+Run(void)}{DoRun(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::\+Do\+Run (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{classAcousticModemEnergyDepletionTestCase_a36ddefb587ebfbbcbfe60d0bdbc4de91}{}\label{classAcousticModemEnergyDepletionTestCase_a36ddefb587ebfbbcbfe60d0bdbc4de91}


Implementation to actually run this Test\+Case. 

Subclasses should override this method to conduct their tests. 

Implements \hyperlink{classns3_1_1TestCase_a8ff74680cf017ed42011e4be51917a24}{ns3\+::\+Test\+Case}.


\begin{DoxyCode}
281 \{
282   \textcolor{comment}{// create a generic node}
283   \hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\_node} = CreateObject<Node> ();
284 
285   \textcolor{comment}{// create a default underwater channel}
286   \hyperlink{classns3_1_1Ptr}{Ptr<UanChannel>} channel = CreateObject<UanChannel> ();
287   \hyperlink{classns3_1_1Ptr}{Ptr<UanNoiseModelDefault>} noise = CreateObject<UanNoiseModelDefault> ();
288   channel->SetPropagationModel (CreateObject<UanPropModelIdeal> ());
289   channel->SetNoiseModel (noise);
290 
291   \textcolor{comment}{// install the underwater communication stack}
292   \hyperlink{classns3_1_1UanHelper}{UanHelper} uan;
293   \hyperlink{classns3_1_1Ptr}{Ptr<UanNetDevice>} devNode = uan.\hyperlink{classns3_1_1UanHelper_a283475798bb2df2ff11c53b68d2f1361}{Install} (\hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\_node}, channel);
294 
295   \textcolor{comment}{// set an empty energy source}
296   \hyperlink{classns3_1_1BasicEnergySourceHelper}{BasicEnergySourceHelper} eh;
297   eh.\hyperlink{classns3_1_1BasicEnergySourceHelper_aa07c8c1c4a4ced92b8fc51bf4be4de3f}{Set} (\textcolor{stringliteral}{"BasicEnergySourceInitialEnergyJ"}, DoubleValue (0.0));
298   eh.\hyperlink{classns3_1_1EnergySourceHelper_ac52e48ef79c83537cc0bba02df8d91a1}{Install} (\hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\_node});
299 
300   \textcolor{comment}{// mobility model}
301   \hyperlink{classns3_1_1Ptr}{Ptr<ConstantPositionMobilityModel>} mobility = 
      CreateObject<ConstantPositionMobilityModel> ();
302   mobility->\hyperlink{classns3_1_1MobilityModel_ac584b3d5a309709d2f13ed6ada1e7640}{SetPosition} (Vector (0,0,0));
303   \hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\_node}->\hyperlink{classns3_1_1Object_a79dd435d300f3deca814553f561a2922}{AggregateObject} (mobility);
304 
305   \textcolor{comment}{// micro modem energy model}
306   \hyperlink{classns3_1_1AcousticModemEnergyModelHelper}{AcousticModemEnergyModelHelper} modemHelper;
307   \hyperlink{classns3_1_1Ptr}{Ptr<EnergySource>} source = \hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\_node}->\hyperlink{classns3_1_1Object_a13e18c00017096c8381eb651d5bd0783}{GetObject}<
      \hyperlink{classns3_1_1EnergySourceContainer}{EnergySourceContainer}> ()->Get (0);
308   \textcolor{comment}{// set the depletion callback}
309   \hyperlink{classns3_1_1Callback}{AcousticModemEnergyModel::AcousticModemEnergyDepletionCallback}
       callback =
310     \hyperlink{group__makecallbackmemptr_ga9376283685aa99d204048d6a4b7610a4}{MakeCallback} (&
      \hyperlink{classAcousticModemEnergyDepletionTestCase_a821bfbad5268c94f381b46b3da55c166}{AcousticModemEnergyDepletionTestCase::DepletionHandler}
      , \textcolor{keyword}{this});
311   modemHelper.\hyperlink{classns3_1_1AcousticModemEnergyModelHelper_a9f3e874ddcc7469341aec932dae3813e}{SetDepletionCallback} (callback);
312   \hyperlink{classns3_1_1DeviceEnergyModelContainer}{DeviceEnergyModelContainer} cont = modemHelper.
      \hyperlink{classns3_1_1DeviceEnergyModelHelper_a085a4854e96ff8f314a9ebec93e6c4eb}{Install} (devNode,source);
313 
314   \textcolor{comment}{// try to send a packet}
315   Simulator::ScheduleNow (&\hyperlink{classAcousticModemEnergyDepletionTestCase_a3516e25b430f496c6a3ba2366e08691a}{AcousticModemEnergyDepletionTestCase::SendOnePacket}
      ,
316                           \textcolor{keyword}{this},
317                           \hyperlink{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{m\_node});
318 
319   Simulator::Stop (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (\hyperlink{classAcousticModemEnergyDepletionTestCase_ae081c5442fcc0406d5d002c20540e0a5}{m\_simTime}));
320   Simulator::Run ();
321   Simulator::Destroy ();
322 
323   \hyperlink{group__testing_ga2a9d78cffb3db8e867c35fff0b698cf5}{NS\_TEST\_ASSERT\_MSG\_EQ} (\hyperlink{classAcousticModemEnergyDepletionTestCase_aab78b851effc5b78aabd4f82cf0007e2}{m\_callbackCount}, 1, \textcolor{stringliteral}{"Callback not invoked"});
324 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!Send\+One\+Packet@{Send\+One\+Packet}}
\index{Send\+One\+Packet@{Send\+One\+Packet}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{Send\+One\+Packet(\+Ptr$<$ Node $>$ node)}{SendOnePacket(Ptr< Node > node)}}]{\setlength{\rightskip}{0pt plus 5cm}void Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::\+Send\+One\+Packet (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Node} $>$}]{node}
\end{DoxyParamCaption}
)}\hypertarget{classAcousticModemEnergyDepletionTestCase_a3516e25b430f496c6a3ba2366e08691a}{}\label{classAcousticModemEnergyDepletionTestCase_a3516e25b430f496c6a3ba2366e08691a}
Send one packet function 
\begin{DoxyParams}{Parameters}
{\em node} & the node to send to \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
266 \{
267   \textcolor{comment}{// create an empty packet}
268   \hyperlink{classns3_1_1Ptr}{Ptr<Packet>} pkt = Create<Packet> (\hyperlink{classAcousticModemEnergyDepletionTestCase_a27cef9a0ab916df25d00c58793619087}{m\_packetSize});
269   \textcolor{comment}{// send the packet in broadcast}
270   \hyperlink{classns3_1_1Ptr}{Ptr<UanNetDevice>} dev = node->\hyperlink{classns3_1_1Node_a5918dfd24ef632efc9a83a5f6561c76e}{GetDevice} (0)->GetObject<
      \hyperlink{classns3_1_1UanNetDevice}{UanNetDevice}> ();
271   dev->\hyperlink{classns3_1_1UanNetDevice_aca7865bf58e980106b68a177d41d346b}{Send} (pkt, dev->GetBroadcast (), 0);
272 
273   Simulator::Schedule (\hyperlink{group__timecivil_ga33c34b816f8ff6628e33d5c8e9713b9e}{Seconds} (10),
274                        &\hyperlink{classAcousticModemEnergyDepletionTestCase_a3516e25b430f496c6a3ba2366e08691a}{AcousticModemEnergyDepletionTestCase::SendOnePacket}
      ,
275                        \textcolor{keyword}{this},
276                        node);
277 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4




Here is the caller graph for this function\+:
% FIG 5




\subsection{Member Data Documentation}
\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!m\+\_\+callback\+Count@{m\+\_\+callback\+Count}}
\index{m\+\_\+callback\+Count@{m\+\_\+callback\+Count}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+callback\+Count}{m_callbackCount}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::m\+\_\+callback\+Count}\hypertarget{classAcousticModemEnergyDepletionTestCase_aab78b851effc5b78aabd4f82cf0007e2}{}\label{classAcousticModemEnergyDepletionTestCase_aab78b851effc5b78aabd4f82cf0007e2}


callback count 

\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!m\+\_\+node@{m\+\_\+node}}
\index{m\+\_\+node@{m\+\_\+node}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+node}{m_node}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ptr}$<${\bf Node}$>$ Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::m\+\_\+node}\hypertarget{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}{}\label{classAcousticModemEnergyDepletionTestCase_aad8287a51fe09423d58935484fb3ac6d}


the node 

\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!m\+\_\+packet\+Size@{m\+\_\+packet\+Size}}
\index{m\+\_\+packet\+Size@{m\+\_\+packet\+Size}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+packet\+Size}{m_packetSize}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::m\+\_\+packet\+Size}\hypertarget{classAcousticModemEnergyDepletionTestCase_a27cef9a0ab916df25d00c58793619087}{}\label{classAcousticModemEnergyDepletionTestCase_a27cef9a0ab916df25d00c58793619087}


packet size 

\index{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}!m\+\_\+sim\+Time@{m\+\_\+sim\+Time}}
\index{m\+\_\+sim\+Time@{m\+\_\+sim\+Time}!Acoustic\+Modem\+Energy\+Depletion\+Test\+Case@{Acoustic\+Modem\+Energy\+Depletion\+Test\+Case}}
\subsubsection[{\texorpdfstring{m\+\_\+sim\+Time}{m_simTime}}]{\setlength{\rightskip}{0pt plus 5cm}double Acoustic\+Modem\+Energy\+Depletion\+Test\+Case\+::m\+\_\+sim\+Time}\hypertarget{classAcousticModemEnergyDepletionTestCase_ae081c5442fcc0406d5d002c20540e0a5}{}\label{classAcousticModemEnergyDepletionTestCase_ae081c5442fcc0406d5d002c20540e0a5}


Simulation time. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
uan/test/\hyperlink{uan-energy-model-test_8cc}{uan-\/energy-\/model-\/test.\+cc}\end{DoxyCompactItemize}
